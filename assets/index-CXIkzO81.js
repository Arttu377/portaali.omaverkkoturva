var Vle=Object.defineProperty;var V3=e=>{throw TypeError(e)};var Ule=(e,t,r)=>t in e?Vle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ue=(e,t,r)=>Ule(e,typeof t!="symbol"?t+"":t,r),Mk=(e,t,r)=>t.has(e)||V3("Cannot "+r);var Ge=(e,t,r)=>(Mk(e,t,"read from private field"),r?r.call(e):t.get(e)),Rr=(e,t,r)=>t.has(e)?V3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ur=(e,t,r,n)=>(Mk(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),qi=(e,t,r)=>(Mk(e,t,"access private method"),r);var v0=(e,t,r,n)=>({set _(i){ur(e,t,i,r)},get _(){return Ge(e,t,n)}});function Wle(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ir(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Gle(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var BK={exports:{}},d1={},zK={exports:{}},_r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=Symbol.for("react.element"),Hle=Symbol.for("react.portal"),Kle=Symbol.for("react.fragment"),qle=Symbol.for("react.strict_mode"),Xle=Symbol.for("react.profiler"),Yle=Symbol.for("react.provider"),Qle=Symbol.for("react.context"),Zle=Symbol.for("react.forward_ref"),Jle=Symbol.for("react.suspense"),ece=Symbol.for("react.memo"),tce=Symbol.for("react.lazy"),U3=Symbol.iterator;function rce(e){return e===null||typeof e!="object"?null:(e=U3&&e[U3]||e["@@iterator"],typeof e=="function"?e:null)}var VK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UK=Object.assign,WK={};function Gp(e,t,r){this.props=e,this.context=t,this.refs=WK,this.updater=r||VK}Gp.prototype.isReactComponent={};Gp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function GK(){}GK.prototype=Gp.prototype;function gA(e,t,r){this.props=e,this.context=t,this.refs=WK,this.updater=r||VK}var yA=gA.prototype=new GK;yA.constructor=gA;UK(yA,Gp.prototype);yA.isPureReactComponent=!0;var W3=Array.isArray,HK=Object.prototype.hasOwnProperty,vA={current:null},KK={key:!0,ref:!0,__self:!0,__source:!0};function qK(e,t,r){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)HK.call(t,n)&&!KK.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Qv,type:e,key:s,ref:a,props:i,_owner:vA.current}}function nce(e,t){return{$$typeof:Qv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _A(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qv}function ice(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var G3=/\/+/g;function kk(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ice(""+e.key):t.toString(36)}function Px(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Qv:case Hle:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+kk(a,0):n,W3(i)?(r="",e!=null&&(r=e.replace(G3,"$&/")+"/"),Px(i,t,r,"",function(c){return c})):i!=null&&(_A(i)&&(i=nce(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(G3,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",W3(e))for(var o=0;o<e.length;o++){s=e[o];var l=n+kk(s,o);a+=Px(s,t,r,l,i)}else if(l=rce(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=n+kk(s,o++),a+=Px(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function _0(e,t,r){if(e==null)return e;var n=[],i=0;return Px(e,n,"","",function(s){return t.call(r,s,i++)}),n}function sce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ss={current:null},Ex={transition:null},ace={ReactCurrentDispatcher:Ss,ReactCurrentBatchConfig:Ex,ReactCurrentOwner:vA};function XK(){throw Error("act(...) is not supported in production builds of React.")}_r.Children={map:_0,forEach:function(e,t,r){_0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _0(e,function(){t++}),t},toArray:function(e){return _0(e,function(t){return t})||[]},only:function(e){if(!_A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_r.Component=Gp;_r.Fragment=Kle;_r.Profiler=Xle;_r.PureComponent=gA;_r.StrictMode=qle;_r.Suspense=Jle;_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ace;_r.act=XK;_r.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=UK({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=vA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)HK.call(t,l)&&!KK.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Qv,type:e.type,key:i,ref:s,props:n,_owner:a}};_r.createContext=function(e){return e={$$typeof:Qle,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Yle,_context:e},e.Consumer=e};_r.createElement=qK;_r.createFactory=function(e){var t=qK.bind(null,e);return t.type=e,t};_r.createRef=function(){return{current:null}};_r.forwardRef=function(e){return{$$typeof:Zle,render:e}};_r.isValidElement=_A;_r.lazy=function(e){return{$$typeof:tce,_payload:{_status:-1,_result:e},_init:sce}};_r.memo=function(e,t){return{$$typeof:ece,type:e,compare:t===void 0?null:t}};_r.startTransition=function(e){var t=Ex.transition;Ex.transition={};try{e()}finally{Ex.transition=t}};_r.unstable_act=XK;_r.useCallback=function(e,t){return Ss.current.useCallback(e,t)};_r.useContext=function(e){return Ss.current.useContext(e)};_r.useDebugValue=function(){};_r.useDeferredValue=function(e){return Ss.current.useDeferredValue(e)};_r.useEffect=function(e,t){return Ss.current.useEffect(e,t)};_r.useId=function(){return Ss.current.useId()};_r.useImperativeHandle=function(e,t,r){return Ss.current.useImperativeHandle(e,t,r)};_r.useInsertionEffect=function(e,t){return Ss.current.useInsertionEffect(e,t)};_r.useLayoutEffect=function(e,t){return Ss.current.useLayoutEffect(e,t)};_r.useMemo=function(e,t){return Ss.current.useMemo(e,t)};_r.useReducer=function(e,t,r){return Ss.current.useReducer(e,t,r)};_r.useRef=function(e){return Ss.current.useRef(e)};_r.useState=function(e){return Ss.current.useState(e)};_r.useSyncExternalStore=function(e,t,r){return Ss.current.useSyncExternalStore(e,t,r)};_r.useTransition=function(){return Ss.current.useTransition()};_r.version="18.3.1";zK.exports=_r;var E=zK.exports;const se=Ir(E),YK=Wle({__proto__:null,default:se},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oce=E,lce=Symbol.for("react.element"),cce=Symbol.for("react.fragment"),uce=Object.prototype.hasOwnProperty,dce=oce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fce={key:!0,ref:!0,__self:!0,__source:!0};function QK(e,t,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)uce.call(t,n)&&!fce.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:lce,type:e,key:s,ref:a,props:i,_owner:dce.current}}d1.Fragment=cce;d1.jsx=QK;d1.jsxs=QK;BK.exports=d1;var h=BK.exports,ZK={exports:{}},da={},JK={exports:{}},e9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,te){var ae=B.length;B.push(te);e:for(;0<ae;){var z=ae-1>>>1,D=B[z];if(0<i(D,te))B[z]=te,B[ae]=D,ae=z;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var te=B[0],ae=B.pop();if(ae!==te){B[0]=ae;e:for(var z=0,D=B.length,K=D>>>1;z<K;){var oe=2*(z+1)-1,_e=B[oe],de=oe+1,ve=B[de];if(0>i(_e,ae))de<D&&0>i(ve,_e)?(B[z]=ve,B[de]=ae,z=de):(B[z]=_e,B[oe]=ae,z=oe);else if(de<D&&0>i(ve,ae))B[z]=ve,B[de]=ae,z=de;else break e}}return te}function i(B,te){var ae=B.sortIndex-te.sortIndex;return ae!==0?ae:B.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,u=null,f=3,p=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var te=r(c);te!==null;){if(te.callback===null)n(c);else if(te.startTime<=B)n(c),te.sortIndex=te.expirationTime,t(l,te);else break;te=r(c)}}function b(B){if(g=!1,w(B),!m)if(r(l)!==null)m=!0,G(_);else{var te=r(c);te!==null&&H(b,te.startTime-B)}}function _(B,te){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var ae=f;try{for(w(te),u=r(l);u!==null&&(!(u.expirationTime>te)||B&&!R());){var z=u.callback;if(typeof z=="function"){u.callback=null,f=u.priorityLevel;var D=z(u.expirationTime<=te);te=e.unstable_now(),typeof D=="function"?u.callback=D:u===r(l)&&n(l),w(te)}else n(l);u=r(l)}if(u!==null)var K=!0;else{var oe=r(c);oe!==null&&H(b,oe.startTime-te),K=!1}return K}finally{u=null,f=ae,p=!1}}var T=!1,M=null,k=-1,j=5,A=-1;function R(){return!(e.unstable_now()-A<j)}function I(){if(M!==null){var B=e.unstable_now();A=B;var te=!0;try{te=M(!0,B)}finally{te?$():(T=!1,M=null)}}else T=!1}var $;if(typeof y=="function")$=function(){y(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=I,$=function(){V.postMessage(null)}}else $=function(){x(I,0)};function G(B){M=B,T||(T=!0,$())}function H(B,te){k=x(function(){B(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,G(_))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var te=3;break;default:te=f}var ae=f;f=te;try{return B()}finally{f=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=f;f=B;try{return te()}finally{f=ae}},e.unstable_scheduleCallback=function(B,te,ae){var z=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,B){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ae+D,B={id:d++,callback:te,priorityLevel:B,startTime:ae,expirationTime:D,sortIndex:-1},ae>z?(B.sortIndex=ae,t(c,B),r(l)===null&&B===r(c)&&(g?(v(k),k=-1):g=!0,H(b,ae-z))):(B.sortIndex=D,t(l,B),m||p||(m=!0,G(_))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var te=f;return function(){var ae=f;f=te;try{return B.apply(this,arguments)}finally{f=ae}}}})(e9);JK.exports=e9;var hce=JK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pce=E,ua=hce;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t9=new Set,yy={};function lf(e,t){rp(e,t),rp(e+"Capture",t)}function rp(e,t){for(yy[e]=t,e=0;e<t.length;e++)t9.add(t[e])}var Fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gE=Object.prototype.hasOwnProperty,mce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H3={},K3={};function gce(e){return gE.call(K3,e)?!0:gE.call(H3,e)?!1:mce.test(e)?K3[e]=!0:(H3[e]=!0,!1)}function yce(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vce(e,t,r,n){if(t===null||typeof t>"u"||yce(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ps(e,t,r,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bi[e]=new Ps(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bi[t]=new Ps(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bi[e]=new Ps(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bi[e]=new Ps(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bi[e]=new Ps(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bi[e]=new Ps(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bi[e]=new Ps(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bi[e]=new Ps(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bi[e]=new Ps(e,5,!1,e.toLowerCase(),null,!1,!1)});var xA=/[\-:]([a-z])/g;function bA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xA,bA);Bi[t]=new Ps(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xA,bA);Bi[t]=new Ps(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xA,bA);Bi[t]=new Ps(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bi[e]=new Ps(e,1,!1,e.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new Ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bi[e]=new Ps(e,1,!1,e.toLowerCase(),null,!0,!0)});function wA(e,t,r,n){var i=Bi.hasOwnProperty(t)?Bi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vce(t,r,i,n)&&(r=null),n||i===null?gce(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Zl=pce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x0=Symbol.for("react.element"),sh=Symbol.for("react.portal"),ah=Symbol.for("react.fragment"),TA=Symbol.for("react.strict_mode"),yE=Symbol.for("react.profiler"),r9=Symbol.for("react.provider"),n9=Symbol.for("react.context"),MA=Symbol.for("react.forward_ref"),vE=Symbol.for("react.suspense"),_E=Symbol.for("react.suspense_list"),kA=Symbol.for("react.memo"),Pc=Symbol.for("react.lazy"),i9=Symbol.for("react.offscreen"),q3=Symbol.iterator;function Km(e){return e===null||typeof e!="object"?null:(e=q3&&e[q3]||e["@@iterator"],typeof e=="function"?e:null)}var An=Object.assign,Sk;function Cg(e){if(Sk===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sk=t&&t[1]||""}return`
`+Sk+e}var Pk=!1;function Ek(e,t){if(!e||Pk)return"";Pk=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{Pk=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cg(e):""}function _ce(e){switch(e.tag){case 5:return Cg(e.type);case 16:return Cg("Lazy");case 13:return Cg("Suspense");case 19:return Cg("SuspenseList");case 0:case 2:case 15:return e=Ek(e.type,!1),e;case 11:return e=Ek(e.type.render,!1),e;case 1:return e=Ek(e.type,!0),e;default:return""}}function xE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ah:return"Fragment";case sh:return"Portal";case yE:return"Profiler";case TA:return"StrictMode";case vE:return"Suspense";case _E:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case n9:return(e.displayName||"Context")+".Consumer";case r9:return(e._context.displayName||"Context")+".Provider";case MA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kA:return t=e.displayName||null,t!==null?t:xE(e.type)||"Memo";case Pc:t=e._payload,e=e._init;try{return xE(e(t))}catch{}}return null}function xce(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xE(t);case 8:return t===TA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function au(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function s9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bce(e){var t=s9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function b0(e){e._valueTracker||(e._valueTracker=bce(e))}function a9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=s9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function rb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bE(e,t){var r=t.checked;return An({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function X3(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=au(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function o9(e,t){t=t.checked,t!=null&&wA(e,"checked",t,!1)}function wE(e,t){o9(e,t);var r=au(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?TE(e,t.type,r):t.hasOwnProperty("defaultValue")&&TE(e,t.type,au(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Y3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function TE(e,t,r){(t!=="number"||rb(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var jg=Array.isArray;function Ah(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+au(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ME(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return An({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Q3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(jg(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:au(r)}}function l9(e,t){var r=au(t.value),n=au(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Z3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function c9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?c9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var w0,u9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(w0=w0||document.createElement("div"),w0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=w0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Gg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wce=["Webkit","ms","Moz","O"];Object.keys(Gg).forEach(function(e){wce.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gg[t]=Gg[e]})});function d9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Gg.hasOwnProperty(e)&&Gg[e]?(""+t).trim():t+"px"}function f9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=d9(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Tce=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function SE(e,t){if(t){if(Tce[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function PE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EE=null;function SA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var CE=null,Oh=null,$h=null;function J3(e){if(e=e_(e)){if(typeof CE!="function")throw Error(et(280));var t=e.stateNode;t&&(t=g1(t),CE(e.stateNode,e.type,t))}}function h9(e){Oh?$h?$h.push(e):$h=[e]:Oh=e}function p9(){if(Oh){var e=Oh,t=$h;if($h=Oh=null,J3(e),t)for(e=0;e<t.length;e++)J3(t[e])}}function m9(e,t){return e(t)}function g9(){}var Ck=!1;function y9(e,t,r){if(Ck)return e(t,r);Ck=!0;try{return m9(e,t,r)}finally{Ck=!1,(Oh!==null||$h!==null)&&(g9(),p9())}}function _y(e,t){var r=e.stateNode;if(r===null)return null;var n=g1(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var jE=!1;if(Fl)try{var qm={};Object.defineProperty(qm,"passive",{get:function(){jE=!0}}),window.addEventListener("test",qm,qm),window.removeEventListener("test",qm,qm)}catch{jE=!1}function Mce(e,t,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Hg=!1,nb=null,ib=!1,AE=null,kce={onError:function(e){Hg=!0,nb=e}};function Sce(e,t,r,n,i,s,a,o,l){Hg=!1,nb=null,Mce.apply(kce,arguments)}function Pce(e,t,r,n,i,s,a,o,l){if(Sce.apply(this,arguments),Hg){if(Hg){var c=nb;Hg=!1,nb=null}else throw Error(et(198));ib||(ib=!0,AE=c)}}function cf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function v9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eB(e){if(cf(e)!==e)throw Error(et(188))}function Ece(e){var t=e.alternate;if(!t){if(t=cf(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return eB(i),e;if(s===n)return eB(i),t;s=s.sibling}throw Error(et(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function _9(e){return e=Ece(e),e!==null?x9(e):null}function x9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=x9(e);if(t!==null)return t;e=e.sibling}return null}var b9=ua.unstable_scheduleCallback,tB=ua.unstable_cancelCallback,Cce=ua.unstable_shouldYield,jce=ua.unstable_requestPaint,qn=ua.unstable_now,Ace=ua.unstable_getCurrentPriorityLevel,PA=ua.unstable_ImmediatePriority,w9=ua.unstable_UserBlockingPriority,sb=ua.unstable_NormalPriority,Oce=ua.unstable_LowPriority,T9=ua.unstable_IdlePriority,f1=null,Ko=null;function $ce(e){if(Ko&&typeof Ko.onCommitFiberRoot=="function")try{Ko.onCommitFiberRoot(f1,e,void 0,(e.current.flags&128)===128)}catch{}}var yo=Math.clz32?Math.clz32:Dce,Ice=Math.log,Nce=Math.LN2;function Dce(e){return e>>>=0,e===0?32:31-(Ice(e)/Nce|0)|0}var T0=64,M0=4194304;function Ag(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ab(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Ag(o):(s&=a,s!==0&&(n=Ag(s)))}else a=r&~i,a!==0?n=Ag(a):s!==0&&(n=Ag(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-yo(t),i=1<<r,n|=e[r],t&=~i;return n}function Rce(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lce(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-yo(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=Rce(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function OE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function M9(){var e=T0;return T0<<=1,!(T0&4194240)&&(T0=64),e}function jk(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yo(t),e[t]=r}function Fce(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-yo(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function EA(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-yo(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Vr=0;function k9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var S9,CA,P9,E9,C9,$E=!1,k0=[],qc=null,Xc=null,Yc=null,xy=new Map,by=new Map,Oc=[],Bce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rB(e,t){switch(e){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Xc=null;break;case"mouseover":case"mouseout":Yc=null;break;case"pointerover":case"pointerout":xy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":by.delete(t.pointerId)}}function Xm(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=e_(t),t!==null&&CA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function zce(e,t,r,n,i){switch(t){case"focusin":return qc=Xm(qc,e,t,r,n,i),!0;case"dragenter":return Xc=Xm(Xc,e,t,r,n,i),!0;case"mouseover":return Yc=Xm(Yc,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return xy.set(s,Xm(xy.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,by.set(s,Xm(by.get(s)||null,e,t,r,n,i)),!0}return!1}function j9(e){var t=xd(e.target);if(t!==null){var r=cf(t);if(r!==null){if(t=r.tag,t===13){if(t=v9(r),t!==null){e.blockedOn=t,C9(e.priority,function(){P9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=IE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);EE=n,r.target.dispatchEvent(n),EE=null}else return t=e_(r),t!==null&&CA(t),e.blockedOn=r,!1;t.shift()}return!0}function nB(e,t,r){Cx(e)&&r.delete(t)}function Vce(){$E=!1,qc!==null&&Cx(qc)&&(qc=null),Xc!==null&&Cx(Xc)&&(Xc=null),Yc!==null&&Cx(Yc)&&(Yc=null),xy.forEach(nB),by.forEach(nB)}function Ym(e,t){e.blockedOn===t&&(e.blockedOn=null,$E||($E=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,Vce)))}function wy(e){function t(i){return Ym(i,e)}if(0<k0.length){Ym(k0[0],e);for(var r=1;r<k0.length;r++){var n=k0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(qc!==null&&Ym(qc,e),Xc!==null&&Ym(Xc,e),Yc!==null&&Ym(Yc,e),xy.forEach(t),by.forEach(t),r=0;r<Oc.length;r++)n=Oc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Oc.length&&(r=Oc[0],r.blockedOn===null);)j9(r),r.blockedOn===null&&Oc.shift()}var Ih=Zl.ReactCurrentBatchConfig,ob=!0;function Uce(e,t,r,n){var i=Vr,s=Ih.transition;Ih.transition=null;try{Vr=1,jA(e,t,r,n)}finally{Vr=i,Ih.transition=s}}function Wce(e,t,r,n){var i=Vr,s=Ih.transition;Ih.transition=null;try{Vr=4,jA(e,t,r,n)}finally{Vr=i,Ih.transition=s}}function jA(e,t,r,n){if(ob){var i=IE(e,t,r,n);if(i===null)Bk(e,t,n,lb,r),rB(e,n);else if(zce(i,e,t,r,n))n.stopPropagation();else if(rB(e,n),t&4&&-1<Bce.indexOf(e)){for(;i!==null;){var s=e_(i);if(s!==null&&S9(s),s=IE(e,t,r,n),s===null&&Bk(e,t,n,lb,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Bk(e,t,n,null,r)}}var lb=null;function IE(e,t,r,n){if(lb=null,e=SA(n),e=xd(e),e!==null)if(t=cf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=v9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lb=e,null}function A9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ace()){case PA:return 1;case w9:return 4;case sb:case Oce:return 16;case T9:return 536870912;default:return 16}default:return 16}}var Uc=null,AA=null,jx=null;function O9(){if(jx)return jx;var e,t=AA,r=t.length,n,i="value"in Uc?Uc.value:Uc.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[s-n];n++);return jx=i.slice(e,1<n?1-n:void 0)}function Ax(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function S0(){return!0}function iB(){return!1}function fa(e){function t(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?S0:iB,this.isPropagationStopped=iB,this}return An(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=S0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=S0)},persist:function(){},isPersistent:S0}),t}var Hp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OA=fa(Hp),Jv=An({},Hp,{view:0,detail:0}),Gce=fa(Jv),Ak,Ok,Qm,h1=An({},Jv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$A,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qm&&(Qm&&e.type==="mousemove"?(Ak=e.screenX-Qm.screenX,Ok=e.screenY-Qm.screenY):Ok=Ak=0,Qm=e),Ak)},movementY:function(e){return"movementY"in e?e.movementY:Ok}}),sB=fa(h1),Hce=An({},h1,{dataTransfer:0}),Kce=fa(Hce),qce=An({},Jv,{relatedTarget:0}),$k=fa(qce),Xce=An({},Hp,{animationName:0,elapsedTime:0,pseudoElement:0}),Yce=fa(Xce),Qce=An({},Hp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zce=fa(Qce),Jce=An({},Hp,{data:0}),aB=fa(Jce),eue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nue(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rue[e])?!!t[e]:!1}function $A(){return nue}var iue=An({},Jv,{key:function(e){if(e.key){var t=eue[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ax(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tue[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$A,charCode:function(e){return e.type==="keypress"?Ax(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ax(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sue=fa(iue),aue=An({},h1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oB=fa(aue),oue=An({},Jv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$A}),lue=fa(oue),cue=An({},Hp,{propertyName:0,elapsedTime:0,pseudoElement:0}),uue=fa(cue),due=An({},h1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fue=fa(due),hue=[9,13,27,32],IA=Fl&&"CompositionEvent"in window,Kg=null;Fl&&"documentMode"in document&&(Kg=document.documentMode);var pue=Fl&&"TextEvent"in window&&!Kg,$9=Fl&&(!IA||Kg&&8<Kg&&11>=Kg),lB=" ",cB=!1;function I9(e,t){switch(e){case"keyup":return hue.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oh=!1;function mue(e,t){switch(e){case"compositionend":return N9(t);case"keypress":return t.which!==32?null:(cB=!0,lB);case"textInput":return e=t.data,e===lB&&cB?null:e;default:return null}}function gue(e,t){if(oh)return e==="compositionend"||!IA&&I9(e,t)?(e=O9(),jx=AA=Uc=null,oh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $9&&t.locale!=="ko"?null:t.data;default:return null}}var yue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yue[e.type]:t==="textarea"}function D9(e,t,r,n){h9(n),t=cb(t,"onChange"),0<t.length&&(r=new OA("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qg=null,Ty=null;function vue(e){K9(e,0)}function p1(e){var t=uh(e);if(a9(t))return e}function _ue(e,t){if(e==="change")return t}var R9=!1;if(Fl){var Ik;if(Fl){var Nk="oninput"in document;if(!Nk){var dB=document.createElement("div");dB.setAttribute("oninput","return;"),Nk=typeof dB.oninput=="function"}Ik=Nk}else Ik=!1;R9=Ik&&(!document.documentMode||9<document.documentMode)}function fB(){qg&&(qg.detachEvent("onpropertychange",L9),Ty=qg=null)}function L9(e){if(e.propertyName==="value"&&p1(Ty)){var t=[];D9(t,Ty,e,SA(e)),y9(vue,t)}}function xue(e,t,r){e==="focusin"?(fB(),qg=t,Ty=r,qg.attachEvent("onpropertychange",L9)):e==="focusout"&&fB()}function bue(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return p1(Ty)}function wue(e,t){if(e==="click")return p1(t)}function Tue(e,t){if(e==="input"||e==="change")return p1(t)}function Mue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bo=typeof Object.is=="function"?Object.is:Mue;function My(e,t){if(bo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!gE.call(t,i)||!bo(e[i],t[i]))return!1}return!0}function hB(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pB(e,t){var r=hB(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hB(r)}}function F9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?F9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B9(){for(var e=window,t=rb();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=rb(e.document)}return t}function NA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kue(e){var t=B9(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&F9(r.ownerDocument.documentElement,r)){if(n!==null&&NA(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=pB(r,s);var a=pB(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sue=Fl&&"documentMode"in document&&11>=document.documentMode,lh=null,NE=null,Xg=null,DE=!1;function mB(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;DE||lh==null||lh!==rb(n)||(n=lh,"selectionStart"in n&&NA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xg&&My(Xg,n)||(Xg=n,n=cb(NE,"onSelect"),0<n.length&&(t=new OA("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=lh)))}function P0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ch={animationend:P0("Animation","AnimationEnd"),animationiteration:P0("Animation","AnimationIteration"),animationstart:P0("Animation","AnimationStart"),transitionend:P0("Transition","TransitionEnd")},Dk={},z9={};Fl&&(z9=document.createElement("div").style,"AnimationEvent"in window||(delete ch.animationend.animation,delete ch.animationiteration.animation,delete ch.animationstart.animation),"TransitionEvent"in window||delete ch.transitionend.transition);function m1(e){if(Dk[e])return Dk[e];if(!ch[e])return e;var t=ch[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in z9)return Dk[e]=t[r];return e}var V9=m1("animationend"),U9=m1("animationiteration"),W9=m1("animationstart"),G9=m1("transitionend"),H9=new Map,gB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xu(e,t){H9.set(e,t),lf(t,[e])}for(var Rk=0;Rk<gB.length;Rk++){var Lk=gB[Rk],Pue=Lk.toLowerCase(),Eue=Lk[0].toUpperCase()+Lk.slice(1);xu(Pue,"on"+Eue)}xu(V9,"onAnimationEnd");xu(U9,"onAnimationIteration");xu(W9,"onAnimationStart");xu("dblclick","onDoubleClick");xu("focusin","onFocus");xu("focusout","onBlur");xu(G9,"onTransitionEnd");rp("onMouseEnter",["mouseout","mouseover"]);rp("onMouseLeave",["mouseout","mouseover"]);rp("onPointerEnter",["pointerout","pointerover"]);rp("onPointerLeave",["pointerout","pointerover"]);lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Og="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cue=new Set("cancel close invalid load scroll toggle".split(" ").concat(Og));function yB(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Pce(n,t,void 0,e),e.currentTarget=null}function K9(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;yB(i,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;yB(i,o,c),s=l}}}if(ib)throw e=AE,ib=!1,AE=null,e}function hn(e,t){var r=t[zE];r===void 0&&(r=t[zE]=new Set);var n=e+"__bubble";r.has(n)||(q9(t,e,2,!1),r.add(n))}function Fk(e,t,r){var n=0;t&&(n|=4),q9(r,e,n,t)}var E0="_reactListening"+Math.random().toString(36).slice(2);function ky(e){if(!e[E0]){e[E0]=!0,t9.forEach(function(r){r!=="selectionchange"&&(Cue.has(r)||Fk(r,!1,e),Fk(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[E0]||(t[E0]=!0,Fk("selectionchange",!1,t))}}function q9(e,t,r,n){switch(A9(t)){case 1:var i=Uce;break;case 4:i=Wce;break;default:i=jA}r=i.bind(null,t,r,e),i=void 0,!jE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Bk(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=xd(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}y9(function(){var c=s,d=SA(r),u=[];e:{var f=H9.get(e);if(f!==void 0){var p=OA,m=e;switch(e){case"keypress":if(Ax(r)===0)break e;case"keydown":case"keyup":p=sue;break;case"focusin":m="focus",p=$k;break;case"focusout":m="blur",p=$k;break;case"beforeblur":case"afterblur":p=$k;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=sB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Kce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lue;break;case V9:case U9:case W9:p=Yce;break;case G9:p=uue;break;case"scroll":p=Gce;break;case"wheel":p=fue;break;case"copy":case"cut":case"paste":p=Zce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=oB}var g=(t&4)!==0,x=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,v!==null&&(b=_y(y,v),b!=null&&g.push(Sy(y,b,w)))),x)break;y=y.return}0<g.length&&(f=new p(f,m,null,r,d),u.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==EE&&(m=r.relatedTarget||r.fromElement)&&(xd(m)||m[Bl]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?xd(m):null,m!==null&&(x=cf(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=sB,b="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=oB,b="onPointerLeave",v="onPointerEnter",y="pointer"),x=p==null?f:uh(p),w=m==null?f:uh(m),f=new g(b,y+"leave",p,r,d),f.target=x,f.relatedTarget=w,b=null,xd(d)===c&&(g=new g(v,y+"enter",m,r,d),g.target=w,g.relatedTarget=x,b=g),x=b,p&&m)t:{for(g=p,v=m,y=0,w=g;w;w=Df(w))y++;for(w=0,b=v;b;b=Df(b))w++;for(;0<y-w;)g=Df(g),y--;for(;0<w-y;)v=Df(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Df(g),v=Df(v)}g=null}else g=null;p!==null&&vB(u,f,p,g,!1),m!==null&&x!==null&&vB(u,x,m,g,!0)}}e:{if(f=c?uh(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=_ue;else if(uB(f))if(R9)_=Tue;else{_=bue;var T=xue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=wue);if(_&&(_=_(e,c))){D9(u,_,r,d);break e}T&&T(e,f,c),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&TE(f,"number",f.value)}switch(T=c?uh(c):window,e){case"focusin":(uB(T)||T.contentEditable==="true")&&(lh=T,NE=c,Xg=null);break;case"focusout":Xg=NE=lh=null;break;case"mousedown":DE=!0;break;case"contextmenu":case"mouseup":case"dragend":DE=!1,mB(u,r,d);break;case"selectionchange":if(Sue)break;case"keydown":case"keyup":mB(u,r,d)}var M;if(IA)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else oh?I9(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&($9&&r.locale!=="ko"&&(oh||k!=="onCompositionStart"?k==="onCompositionEnd"&&oh&&(M=O9()):(Uc=d,AA="value"in Uc?Uc.value:Uc.textContent,oh=!0)),T=cb(c,k),0<T.length&&(k=new aB(k,e,null,r,d),u.push({event:k,listeners:T}),M?k.data=M:(M=N9(r),M!==null&&(k.data=M)))),(M=pue?mue(e,r):gue(e,r))&&(c=cb(c,"onBeforeInput"),0<c.length&&(d=new aB("onBeforeInput","beforeinput",null,r,d),u.push({event:d,listeners:c}),d.data=M))}K9(u,t)})}function Sy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function cb(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_y(e,r),s!=null&&n.unshift(Sy(e,s,i)),s=_y(e,t),s!=null&&n.push(Sy(e,s,i))),e=e.return}return n}function Df(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vB(e,t,r,n,i){for(var s=t._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=_y(r,s),l!=null&&a.unshift(Sy(r,l,o))):i||(l=_y(r,s),l!=null&&a.push(Sy(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var jue=/\r\n?/g,Aue=/\u0000|\uFFFD/g;function _B(e){return(typeof e=="string"?e:""+e).replace(jue,`
`).replace(Aue,"")}function C0(e,t,r){if(t=_B(t),_B(e)!==t&&r)throw Error(et(425))}function ub(){}var RE=null,LE=null;function FE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BE=typeof setTimeout=="function"?setTimeout:void 0,Oue=typeof clearTimeout=="function"?clearTimeout:void 0,xB=typeof Promise=="function"?Promise:void 0,$ue=typeof queueMicrotask=="function"?queueMicrotask:typeof xB<"u"?function(e){return xB.resolve(null).then(e).catch(Iue)}:BE;function Iue(e){setTimeout(function(){throw e})}function zk(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),wy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);wy(t)}function Qc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bB(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Kp=Math.random().toString(36).slice(2),Uo="__reactFiber$"+Kp,Py="__reactProps$"+Kp,Bl="__reactContainer$"+Kp,zE="__reactEvents$"+Kp,Nue="__reactListeners$"+Kp,Due="__reactHandles$"+Kp;function xd(e){var t=e[Uo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bl]||r[Uo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=bB(e);e!==null;){if(r=e[Uo])return r;e=bB(e)}return t}e=r,r=e.parentNode}return null}function e_(e){return e=e[Uo]||e[Bl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function uh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function g1(e){return e[Py]||null}var VE=[],dh=-1;function bu(e){return{current:e}}function gn(e){0>dh||(e.current=VE[dh],VE[dh]=null,dh--)}function sn(e,t){dh++,VE[dh]=e.current,e.current=t}var ou={},as=bu(ou),Bs=bu(!1),Vd=ou;function np(e,t){var r=e.type.contextTypes;if(!r)return ou;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function zs(e){return e=e.childContextTypes,e!=null}function db(){gn(Bs),gn(as)}function wB(e,t,r){if(as.current!==ou)throw Error(et(168));sn(as,t),sn(Bs,r)}function X9(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(et(108,xce(e)||"Unknown",i));return An({},r,n)}function fb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ou,Vd=as.current,sn(as,e),sn(Bs,Bs.current),!0}function TB(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=X9(e,t,Vd),n.__reactInternalMemoizedMergedChildContext=e,gn(Bs),gn(as),sn(as,e)):gn(Bs),sn(Bs,r)}var kl=null,y1=!1,Vk=!1;function Y9(e){kl===null?kl=[e]:kl.push(e)}function Rue(e){y1=!0,Y9(e)}function wu(){if(!Vk&&kl!==null){Vk=!0;var e=0,t=Vr;try{var r=kl;for(Vr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}kl=null,y1=!1}catch(i){throw kl!==null&&(kl=kl.slice(e+1)),b9(PA,wu),i}finally{Vr=t,Vk=!1}}return null}var fh=[],hh=0,hb=null,pb=0,ka=[],Sa=0,Ud=null,Pl=1,El="";function od(e,t){fh[hh++]=pb,fh[hh++]=hb,hb=e,pb=t}function Q9(e,t,r){ka[Sa++]=Pl,ka[Sa++]=El,ka[Sa++]=Ud,Ud=e;var n=Pl;e=El;var i=32-yo(n)-1;n&=~(1<<i),r+=1;var s=32-yo(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Pl=1<<32-yo(t)+i|r<<i|n,El=s+e}else Pl=1<<s|r<<i|n,El=e}function DA(e){e.return!==null&&(od(e,1),Q9(e,1,0))}function RA(e){for(;e===hb;)hb=fh[--hh],fh[hh]=null,pb=fh[--hh],fh[hh]=null;for(;e===Ud;)Ud=ka[--Sa],ka[Sa]=null,El=ka[--Sa],ka[Sa]=null,Pl=ka[--Sa],ka[Sa]=null}var ia=null,na=null,wn=!1,co=null;function Z9(e,t){var r=Ca(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function MB(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ia=e,na=Qc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ia=e,na=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ud!==null?{id:Pl,overflow:El}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ca(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ia=e,na=null,!0):!1;default:return!1}}function UE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function WE(e){if(wn){var t=na;if(t){var r=t;if(!MB(e,t)){if(UE(e))throw Error(et(418));t=Qc(r.nextSibling);var n=ia;t&&MB(e,t)?Z9(n,r):(e.flags=e.flags&-4097|2,wn=!1,ia=e)}}else{if(UE(e))throw Error(et(418));e.flags=e.flags&-4097|2,wn=!1,ia=e}}}function kB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ia=e}function j0(e){if(e!==ia)return!1;if(!wn)return kB(e),wn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!FE(e.type,e.memoizedProps)),t&&(t=na)){if(UE(e))throw J9(),Error(et(418));for(;t;)Z9(e,t),t=Qc(t.nextSibling)}if(kB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){na=Qc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}na=null}}else na=ia?Qc(e.stateNode.nextSibling):null;return!0}function J9(){for(var e=na;e;)e=Qc(e.nextSibling)}function ip(){na=ia=null,wn=!1}function LA(e){co===null?co=[e]:co.push(e)}var Lue=Zl.ReactCurrentBatchConfig;function Zm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function A0(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function SB(e){var t=e._init;return t(e._payload)}function eq(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=tu(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,w,b){return y===null||y.tag!==6?(y=Xk(w,v.mode,b),y.return=v,y):(y=i(y,w),y.return=v,y)}function l(v,y,w,b){var _=w.type;return _===ah?d(v,y,w.props.children,b,w.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Pc&&SB(_)===y.type)?(b=i(y,w.props),b.ref=Zm(v,y,w),b.return=v,b):(b=Lx(w.type,w.key,w.props,null,v.mode,b),b.ref=Zm(v,y,w),b.return=v,b)}function c(v,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Yk(w,v.mode,b),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function d(v,y,w,b,_){return y===null||y.tag!==7?(y=Rd(w,v.mode,b,_),y.return=v,y):(y=i(y,w),y.return=v,y)}function u(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xk(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case x0:return w=Lx(y.type,y.key,y.props,null,v.mode,w),w.ref=Zm(v,null,y),w.return=v,w;case sh:return y=Yk(y,v.mode,w),y.return=v,y;case Pc:var b=y._init;return u(v,b(y._payload),w)}if(jg(y)||Km(y))return y=Rd(y,v.mode,w,null),y.return=v,y;A0(v,y)}return null}function f(v,y,w,b){var _=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:o(v,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case x0:return w.key===_?l(v,y,w,b):null;case sh:return w.key===_?c(v,y,w,b):null;case Pc:return _=w._init,f(v,y,_(w._payload),b)}if(jg(w)||Km(w))return _!==null?null:d(v,y,w,b,null);A0(v,w)}return null}function p(v,y,w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(w)||null,o(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x0:return v=v.get(b.key===null?w:b.key)||null,l(y,v,b,_);case sh:return v=v.get(b.key===null?w:b.key)||null,c(y,v,b,_);case Pc:var T=b._init;return p(v,y,w,T(b._payload),_)}if(jg(b)||Km(b))return v=v.get(w)||null,d(y,v,b,_,null);A0(y,b)}return null}function m(v,y,w,b){for(var _=null,T=null,M=y,k=y=0,j=null;M!==null&&k<w.length;k++){M.index>k?(j=M,M=null):j=M.sibling;var A=f(v,M,w[k],b);if(A===null){M===null&&(M=j);break}e&&M&&A.alternate===null&&t(v,M),y=s(A,y,k),T===null?_=A:T.sibling=A,T=A,M=j}if(k===w.length)return r(v,M),wn&&od(v,k),_;if(M===null){for(;k<w.length;k++)M=u(v,w[k],b),M!==null&&(y=s(M,y,k),T===null?_=M:T.sibling=M,T=M);return wn&&od(v,k),_}for(M=n(v,M);k<w.length;k++)j=p(M,v,k,w[k],b),j!==null&&(e&&j.alternate!==null&&M.delete(j.key===null?k:j.key),y=s(j,y,k),T===null?_=j:T.sibling=j,T=j);return e&&M.forEach(function(R){return t(v,R)}),wn&&od(v,k),_}function g(v,y,w,b){var _=Km(w);if(typeof _!="function")throw Error(et(150));if(w=_.call(w),w==null)throw Error(et(151));for(var T=_=null,M=y,k=y=0,j=null,A=w.next();M!==null&&!A.done;k++,A=w.next()){M.index>k?(j=M,M=null):j=M.sibling;var R=f(v,M,A.value,b);if(R===null){M===null&&(M=j);break}e&&M&&R.alternate===null&&t(v,M),y=s(R,y,k),T===null?_=R:T.sibling=R,T=R,M=j}if(A.done)return r(v,M),wn&&od(v,k),_;if(M===null){for(;!A.done;k++,A=w.next())A=u(v,A.value,b),A!==null&&(y=s(A,y,k),T===null?_=A:T.sibling=A,T=A);return wn&&od(v,k),_}for(M=n(v,M);!A.done;k++,A=w.next())A=p(M,v,k,A.value,b),A!==null&&(e&&A.alternate!==null&&M.delete(A.key===null?k:A.key),y=s(A,y,k),T===null?_=A:T.sibling=A,T=A);return e&&M.forEach(function(I){return t(v,I)}),wn&&od(v,k),_}function x(v,y,w,b){if(typeof w=="object"&&w!==null&&w.type===ah&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case x0:e:{for(var _=w.key,T=y;T!==null;){if(T.key===_){if(_=w.type,_===ah){if(T.tag===7){r(v,T.sibling),y=i(T,w.props.children),y.return=v,v=y;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Pc&&SB(_)===T.type){r(v,T.sibling),y=i(T,w.props),y.ref=Zm(v,T,w),y.return=v,v=y;break e}r(v,T);break}else t(v,T);T=T.sibling}w.type===ah?(y=Rd(w.props.children,v.mode,b,w.key),y.return=v,v=y):(b=Lx(w.type,w.key,w.props,null,v.mode,b),b.ref=Zm(v,y,w),b.return=v,v=b)}return a(v);case sh:e:{for(T=w.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=Yk(w,v.mode,b),y.return=v,v=y}return a(v);case Pc:return T=w._init,x(v,y,T(w._payload),b)}if(jg(w))return m(v,y,w,b);if(Km(w))return g(v,y,w,b);A0(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(v,y.sibling),y=i(y,w),y.return=v,v=y):(r(v,y),y=Xk(w,v.mode,b),y.return=v,v=y),a(v)):r(v,y)}return x}var sp=eq(!0),tq=eq(!1),mb=bu(null),gb=null,ph=null,FA=null;function BA(){FA=ph=gb=null}function zA(e){var t=mb.current;gn(mb),e._currentValue=t}function GE(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Nh(e,t){gb=e,FA=ph=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ls=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(FA!==e)if(e={context:e,memoizedValue:t,next:null},ph===null){if(gb===null)throw Error(et(308));ph=e,gb.dependencies={lanes:0,firstContext:e}}else ph=ph.next=e;return t}var bd=null;function VA(e){bd===null?bd=[e]:bd.push(e)}function rq(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,VA(t)):(r.next=i.next,i.next=r),t.interleaved=r,zl(e,n)}function zl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ec=!1;function UA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nq(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ol(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Er&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,zl(e,r)}return i=n.interleaved,i===null?(t.next=t,VA(n)):(t.next=i.next,i.next=t),n.interleaved=t,zl(e,r)}function Ox(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,EA(e,r)}}function PB(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function yb(e,t,r,n){var i=e.updateQueue;Ec=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;a=0,d=c=l=null,o=s;do{var f=o.lane,p=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(f=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){u=m.call(p,u,f);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,u,f):m,f==null)break e;u=An({},u,f);break e;case 2:Ec=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=p,l=u):d=d.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Gd|=a,e.lanes=a,e.memoizedState=u}}function EB(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(et(191,i));i.call(n)}}}var t_={},qo=bu(t_),Ey=bu(t_),Cy=bu(t_);function wd(e){if(e===t_)throw Error(et(174));return e}function WA(e,t){switch(sn(Cy,t),sn(Ey,e),sn(qo,t_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kE(t,e)}gn(qo),sn(qo,t)}function ap(){gn(qo),gn(Ey),gn(Cy)}function iq(e){wd(Cy.current);var t=wd(qo.current),r=kE(t,e.type);t!==r&&(sn(Ey,e),sn(qo,r))}function GA(e){Ey.current===e&&(gn(qo),gn(Ey))}var En=bu(0);function vb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uk=[];function HA(){for(var e=0;e<Uk.length;e++)Uk[e]._workInProgressVersionPrimary=null;Uk.length=0}var $x=Zl.ReactCurrentDispatcher,Wk=Zl.ReactCurrentBatchConfig,Wd=0,jn=null,gi=null,Ci=null,_b=!1,Yg=!1,jy=0,Fue=0;function Xi(){throw Error(et(321))}function KA(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bo(e[r],t[r]))return!1;return!0}function qA(e,t,r,n,i,s){if(Wd=s,jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$x.current=e===null||e.memoizedState===null?Uue:Wue,e=r(n,i),Yg){s=0;do{if(Yg=!1,jy=0,25<=s)throw Error(et(301));s+=1,Ci=gi=null,t.updateQueue=null,$x.current=Gue,e=r(n,i)}while(Yg)}if($x.current=xb,t=gi!==null&&gi.next!==null,Wd=0,Ci=gi=jn=null,_b=!1,t)throw Error(et(300));return e}function XA(){var e=jy!==0;return jy=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?jn.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Na(){if(gi===null){var e=jn.alternate;e=e!==null?e.memoizedState:null}else e=gi.next;var t=Ci===null?jn.memoizedState:Ci.next;if(t!==null)Ci=t,gi=e;else{if(e===null)throw Error(et(310));gi=e,e={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Ci===null?jn.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Ay(e,t){return typeof t=="function"?t(e):t}function Gk(e){var t=Na(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=gi,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var d=c.lane;if((Wd&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=u,a=n):l=l.next=u,jn.lanes|=d,Gd|=d}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,bo(n,t.memoizedState)||(Ls=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,jn.lanes|=s,Gd|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hk(e){var t=Na(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);bo(s,t.memoizedState)||(Ls=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function sq(){}function aq(e,t){var r=jn,n=Na(),i=t(),s=!bo(n.memoizedState,i);if(s&&(n.memoizedState=i,Ls=!0),n=n.queue,YA(cq.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Ci!==null&&Ci.memoizedState.tag&1){if(r.flags|=2048,Oy(9,lq.bind(null,r,n,i,t),void 0,null),Ai===null)throw Error(et(349));Wd&30||oq(r,t,i)}return i}function oq(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lq(e,t,r,n){t.value=r,t.getSnapshot=n,uq(t)&&dq(e)}function cq(e,t,r){return r(function(){uq(t)&&dq(e)})}function uq(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bo(e,r)}catch{return!0}}function dq(e){var t=zl(e,1);t!==null&&vo(t,e,1,-1)}function CB(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ay,lastRenderedState:e},t.queue=e,e=e.dispatch=Vue.bind(null,jn,e),[t.memoizedState,e]}function Oy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fq(){return Na().memoizedState}function Ix(e,t,r,n){var i=Ro();jn.flags|=e,i.memoizedState=Oy(1|t,r,void 0,n===void 0?null:n)}function v1(e,t,r,n){var i=Na();n=n===void 0?null:n;var s=void 0;if(gi!==null){var a=gi.memoizedState;if(s=a.destroy,n!==null&&KA(n,a.deps)){i.memoizedState=Oy(t,r,s,n);return}}jn.flags|=e,i.memoizedState=Oy(1|t,r,s,n)}function jB(e,t){return Ix(8390656,8,e,t)}function YA(e,t){return v1(2048,8,e,t)}function hq(e,t){return v1(4,2,e,t)}function pq(e,t){return v1(4,4,e,t)}function mq(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gq(e,t,r){return r=r!=null?r.concat([e]):null,v1(4,4,mq.bind(null,t,e),r)}function QA(){}function yq(e,t){var r=Na();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&KA(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function vq(e,t){var r=Na();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&KA(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _q(e,t,r){return Wd&21?(bo(r,t)||(r=M9(),jn.lanes|=r,Gd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ls=!0),e.memoizedState=r)}function Bue(e,t){var r=Vr;Vr=r!==0&&4>r?r:4,e(!0);var n=Wk.transition;Wk.transition={};try{e(!1),t()}finally{Vr=r,Wk.transition=n}}function xq(){return Na().memoizedState}function zue(e,t,r){var n=eu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bq(e))wq(t,r);else if(r=rq(e,t,r,n),r!==null){var i=Ms();vo(r,e,n,i),Tq(r,t,n)}}function Vue(e,t,r){var n=eu(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bq(e))wq(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,bo(o,a)){var l=t.interleaved;l===null?(i.next=i,VA(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=rq(e,t,i,n),r!==null&&(i=Ms(),vo(r,e,n,i),Tq(r,t,n))}}function bq(e){var t=e.alternate;return e===jn||t!==null&&t===jn}function wq(e,t){Yg=_b=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Tq(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,EA(e,r)}}var xb={readContext:Ia,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},Uue={readContext:Ia,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:Ia,useEffect:jB,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ix(4194308,4,mq.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ix(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ix(4,2,e,t)},useMemo:function(e,t){var r=Ro();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ro();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=zue.bind(null,jn,e),[n.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:CB,useDebugValue:QA,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=CB(!1),t=e[0];return e=Bue.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=jn,i=Ro();if(wn){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Ai===null)throw Error(et(349));Wd&30||oq(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,jB(cq.bind(null,n,s,e),[e]),n.flags|=2048,Oy(9,lq.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Ro(),t=Ai.identifierPrefix;if(wn){var r=El,n=Pl;r=(n&~(1<<32-yo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=jy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Fue++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wue={readContext:Ia,useCallback:yq,useContext:Ia,useEffect:YA,useImperativeHandle:gq,useInsertionEffect:hq,useLayoutEffect:pq,useMemo:vq,useReducer:Gk,useRef:fq,useState:function(){return Gk(Ay)},useDebugValue:QA,useDeferredValue:function(e){var t=Na();return _q(t,gi.memoizedState,e)},useTransition:function(){var e=Gk(Ay)[0],t=Na().memoizedState;return[e,t]},useMutableSource:sq,useSyncExternalStore:aq,useId:xq,unstable_isNewReconciler:!1},Gue={readContext:Ia,useCallback:yq,useContext:Ia,useEffect:YA,useImperativeHandle:gq,useInsertionEffect:hq,useLayoutEffect:pq,useMemo:vq,useReducer:Hk,useRef:fq,useState:function(){return Hk(Ay)},useDebugValue:QA,useDeferredValue:function(e){var t=Na();return gi===null?t.memoizedState=e:_q(t,gi.memoizedState,e)},useTransition:function(){var e=Hk(Ay)[0],t=Na().memoizedState;return[e,t]},useMutableSource:sq,useSyncExternalStore:aq,useId:xq,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){t=An({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function HE(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:An({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _1={isMounted:function(e){return(e=e._reactInternals)?cf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=eu(e),s=Ol(n,i);s.payload=t,r!=null&&(s.callback=r),t=Zc(e,s,i),t!==null&&(vo(t,e,i,n),Ox(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=eu(e),s=Ol(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Zc(e,s,i),t!==null&&(vo(t,e,i,n),Ox(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ms(),n=eu(e),i=Ol(r,n);i.tag=2,t!=null&&(i.callback=t),t=Zc(e,i,n),t!==null&&(vo(t,e,n,r),Ox(t,e,n))}};function AB(e,t,r,n,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!My(r,n)||!My(i,s):!0}function Mq(e,t,r){var n=!1,i=ou,s=t.contextType;return typeof s=="object"&&s!==null?s=Ia(s):(i=zs(t)?Vd:as.current,n=t.contextTypes,s=(n=n!=null)?np(e,i):ou),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_1,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function OB(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&_1.enqueueReplaceState(t,t.state,null)}function KE(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},UA(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ia(s):(s=zs(t)?Vd:as.current,i.context=np(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(HE(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_1.enqueueReplaceState(i,i.state,null),yb(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function op(e,t){try{var r="",n=t;do r+=_ce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Kk(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function qE(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Hue=typeof WeakMap=="function"?WeakMap:Map;function kq(e,t,r){r=Ol(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){wb||(wb=!0,iC=n),qE(e,t)},r}function Sq(e,t,r){r=Ol(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){qE(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){qE(e,t),typeof n!="function"&&(Jc===null?Jc=new Set([this]):Jc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function $B(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Hue;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=ade.bind(null,e,t,r),t.then(e,e))}function IB(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function NB(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ol(-1,1),t.tag=2,Zc(r,t,1))),r.lanes|=1),e)}var Kue=Zl.ReactCurrentOwner,Ls=!1;function ms(e,t,r,n){t.child=e===null?tq(t,null,r,n):sp(t,e.child,r,n)}function DB(e,t,r,n,i){r=r.render;var s=t.ref;return Nh(t,i),n=qA(e,t,r,n,s,i),r=XA(),e!==null&&!Ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i)):(wn&&r&&DA(t),t.flags|=1,ms(e,t,n,i),t.child)}function RB(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!sO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Pq(e,t,s,n,i)):(e=Lx(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:My,r(a,n)&&e.ref===t.ref)return Vl(e,t,i)}return t.flags|=1,e=tu(s,n),e.ref=t.ref,e.return=t,t.child=e}function Pq(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(My(s,n)&&e.ref===t.ref)if(Ls=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Ls=!0);else return t.lanes=e.lanes,Vl(e,t,i)}return XE(e,t,r,n,i)}function Eq(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(gh,Ys),Ys|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sn(gh,Ys),Ys|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,sn(gh,Ys),Ys|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,sn(gh,Ys),Ys|=n;return ms(e,t,i,r),t.child}function Cq(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function XE(e,t,r,n,i){var s=zs(r)?Vd:as.current;return s=np(t,s),Nh(t,i),r=qA(e,t,r,n,s,i),n=XA(),e!==null&&!Ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i)):(wn&&n&&DA(t),t.flags|=1,ms(e,t,r,i),t.child)}function LB(e,t,r,n,i){if(zs(r)){var s=!0;fb(t)}else s=!1;if(Nh(t,i),t.stateNode===null)Nx(e,t),Mq(t,r,n),KE(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ia(c):(c=zs(r)?Vd:as.current,c=np(t,c));var d=r.getDerivedStateFromProps,u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&OB(t,a,n,c),Ec=!1;var f=t.memoizedState;a.state=f,yb(t,n,a,i),l=t.memoizedState,o!==n||f!==l||Bs.current||Ec?(typeof d=="function"&&(HE(t,r,d,n),l=t.memoizedState),(o=Ec||AB(t,r,o,n,f,l,c))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,nq(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,u=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ia(l):(l=zs(r)?Vd:as.current,l=np(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||f!==l)&&OB(t,a,n,l),Ec=!1,f=t.memoizedState,a.state=f,yb(t,n,a,i);var m=t.memoizedState;o!==u||f!==m||Bs.current||Ec?(typeof p=="function"&&(HE(t,r,p,n),m=t.memoizedState),(c=Ec||AB(t,r,c,n,f,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return YE(e,t,r,n,s,i)}function YE(e,t,r,n,i,s){Cq(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&TB(t,r,!1),Vl(e,t,s);n=t.stateNode,Kue.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=sp(t,e.child,null,s),t.child=sp(t,null,o,s)):ms(e,t,o,s),t.memoizedState=n.state,i&&TB(t,r,!0),t.child}function jq(e){var t=e.stateNode;t.pendingContext?wB(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wB(e,t.context,!1),WA(e,t.containerInfo)}function FB(e,t,r,n,i){return ip(),LA(i),t.flags|=256,ms(e,t,r,n),t.child}var QE={dehydrated:null,treeContext:null,retryLane:0};function ZE(e){return{baseLanes:e,cachePool:null,transitions:null}}function Aq(e,t,r){var n=t.pendingProps,i=En.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),sn(En,i&1),e===null)return WE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=w1(a,n,0,null),e=Rd(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ZE(r),t.memoizedState=QE,e):ZA(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return que(e,t,a,n,o,i,r);if(s){s=n.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=tu(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=tu(o,s):(s=Rd(s,a,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=e.child.memoizedState,a=a===null?ZE(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=QE,n}return s=e.child,e=s.sibling,n=tu(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ZA(e,t){return t=w1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function O0(e,t,r,n){return n!==null&&LA(n),sp(t,e.child,null,r),e=ZA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function que(e,t,r,n,i,s,a){if(r)return t.flags&256?(t.flags&=-257,n=Kk(Error(et(422))),O0(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=w1({mode:"visible",children:n.children},i,0,null),s=Rd(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&sp(t,e.child,null,a),t.child.memoizedState=ZE(a),t.memoizedState=QE,s);if(!(t.mode&1))return O0(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(et(419)),n=Kk(s,n,void 0),O0(e,t,a,n)}if(o=(a&e.childLanes)!==0,Ls||o){if(n=Ai,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zl(e,i),vo(n,e,i,-1))}return iO(),n=Kk(Error(et(421))),O0(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=ode.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,na=Qc(i.nextSibling),ia=t,wn=!0,co=null,e!==null&&(ka[Sa++]=Pl,ka[Sa++]=El,ka[Sa++]=Ud,Pl=e.id,El=e.overflow,Ud=t),t=ZA(t,n.children),t.flags|=4096,t)}function BB(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),GE(e.return,t,r)}function qk(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Oq(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(ms(e,t,n.children,r),n=En.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BB(e,r,t);else if(e.tag===19)BB(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(sn(En,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&vb(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),qk(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&vb(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}qk(t,!0,r,null,s);break;case"together":qk(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Gd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=tu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xue(e,t,r){switch(t.tag){case 3:jq(t),ip();break;case 5:iq(t);break;case 1:zs(t.type)&&fb(t);break;case 4:WA(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;sn(mb,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(sn(En,En.current&1),t.flags|=128,null):r&t.child.childLanes?Aq(e,t,r):(sn(En,En.current&1),e=Vl(e,t,r),e!==null?e.sibling:null);sn(En,En.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Oq(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(En,En.current),n)break;return null;case 22:case 23:return t.lanes=0,Eq(e,t,r)}return Vl(e,t,r)}var $q,JE,Iq,Nq;$q=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};JE=function(){};Iq=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,wd(qo.current);var s=null;switch(r){case"input":i=bE(e,i),n=bE(e,n),s=[];break;case"select":i=An({},i,{value:void 0}),n=An({},n,{value:void 0}),s=[];break;case"textarea":i=ME(e,i),n=ME(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ub)}SE(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yy.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hn("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};Nq=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jm(e,t){if(!wn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Yue(e,t,r){var n=t.pendingProps;switch(RA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(t),null;case 1:return zs(t.type)&&db(),Yi(t),null;case 3:return n=t.stateNode,ap(),gn(Bs),gn(as),HA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(j0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,co!==null&&(oC(co),co=null))),JE(e,t),Yi(t),null;case 5:GA(t);var i=wd(Cy.current);if(r=t.type,e!==null&&t.stateNode!=null)Iq(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(et(166));return Yi(t),null}if(e=wd(qo.current),j0(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Uo]=t,n[Py]=s,e=(t.mode&1)!==0,r){case"dialog":hn("cancel",n),hn("close",n);break;case"iframe":case"object":case"embed":hn("load",n);break;case"video":case"audio":for(i=0;i<Og.length;i++)hn(Og[i],n);break;case"source":hn("error",n);break;case"img":case"image":case"link":hn("error",n),hn("load",n);break;case"details":hn("toggle",n);break;case"input":X3(n,s),hn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},hn("invalid",n);break;case"textarea":Q3(n,s),hn("invalid",n)}SE(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&C0(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&C0(n.textContent,o,e),i=["children",""+o]):yy.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&hn("scroll",n)}switch(r){case"input":b0(n),Y3(n,s,!0);break;case"textarea":b0(n),Z3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ub)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=c9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Uo]=t,e[Py]=n,$q(e,t,!1,!1),t.stateNode=e;e:{switch(a=PE(r,n),r){case"dialog":hn("cancel",e),hn("close",e),i=n;break;case"iframe":case"object":case"embed":hn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Og.length;i++)hn(Og[i],e);i=n;break;case"source":hn("error",e),i=n;break;case"img":case"image":case"link":hn("error",e),hn("load",e),i=n;break;case"details":hn("toggle",e),i=n;break;case"input":X3(e,n),i=bE(e,n),hn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=An({},n,{value:void 0}),hn("invalid",e);break;case"textarea":Q3(e,n),i=ME(e,n),hn("invalid",e);break;default:i=n}SE(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?f9(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&u9(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&vy(e,l):typeof l=="number"&&vy(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hn("scroll",e):l!=null&&wA(e,s,l,a))}switch(r){case"input":b0(e),Y3(e,n,!1);break;case"textarea":b0(e),Z3(e);break;case"option":n.value!=null&&e.setAttribute("value",""+au(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ah(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ah(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ub)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yi(t),null;case 6:if(e&&t.stateNode!=null)Nq(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));if(r=wd(Cy.current),wd(qo.current),j0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Uo]=t,(s=n.nodeValue!==r)&&(e=ia,e!==null))switch(e.tag){case 3:C0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&C0(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Uo]=t,t.stateNode=n}return Yi(t),null;case 13:if(gn(En),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wn&&na!==null&&t.mode&1&&!(t.flags&128))J9(),ip(),t.flags|=98560,s=!1;else if(s=j0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Uo]=t}else ip(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yi(t),s=!1}else co!==null&&(oC(co),co=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||En.current&1?_i===0&&(_i=3):iO())),t.updateQueue!==null&&(t.flags|=4),Yi(t),null);case 4:return ap(),JE(e,t),e===null&&ky(t.stateNode.containerInfo),Yi(t),null;case 10:return zA(t.type._context),Yi(t),null;case 17:return zs(t.type)&&db(),Yi(t),null;case 19:if(gn(En),s=t.memoizedState,s===null)return Yi(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)Jm(s,!1);else{if(_i!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=vb(e),a!==null){for(t.flags|=128,Jm(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return sn(En,En.current&1|2),t.child}e=e.sibling}s.tail!==null&&qn()>lp&&(t.flags|=128,n=!0,Jm(s,!1),t.lanes=4194304)}else{if(!n)if(e=vb(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!wn)return Yi(t),null}else 2*qn()-s.renderingStartTime>lp&&r!==1073741824&&(t.flags|=128,n=!0,Jm(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=qn(),t.sibling=null,r=En.current,sn(En,n?r&1|2:r&1),t):(Yi(t),null);case 22:case 23:return nO(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ys&1073741824&&(Yi(t),t.subtreeFlags&6&&(t.flags|=8192)):Yi(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function Que(e,t){switch(RA(t),t.tag){case 1:return zs(t.type)&&db(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ap(),gn(Bs),gn(as),HA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return GA(t),null;case 13:if(gn(En),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));ip()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gn(En),null;case 4:return ap(),null;case 10:return zA(t.type._context),null;case 22:case 23:return nO(),null;case 24:return null;default:return null}}var $0=!1,rs=!1,Zue=typeof WeakSet=="function"?WeakSet:Set,wt=null;function mh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Rn(e,t,n)}else r.current=null}function eC(e,t,r){try{r()}catch(n){Rn(e,t,n)}}var zB=!1;function Jue(e,t){if(RE=ob,e=B9(),NA(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,d=0,u=e,f=null;t:for(;;){for(var p;u!==r||i!==0&&u.nodeType!==3||(o=a+i),u!==s||n!==0&&u.nodeType!==3||(l=a+n),u.nodeType===3&&(a+=u.nodeValue.length),(p=u.firstChild)!==null;)f=u,u=p;for(;;){if(u===e)break t;if(f===r&&++c===i&&(o=a),f===s&&++d===n&&(l=a),(p=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(LE={focusedElem:e,selectionRange:r},ob=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){t=wt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(b){Rn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}return m=zB,zB=!1,m}function Qg(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&eC(t,r,s)}i=i.next}while(i!==n)}}function x1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tC(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Dq(e){var t=e.alternate;t!==null&&(e.alternate=null,Dq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Uo],delete t[Py],delete t[zE],delete t[Nue],delete t[Due])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rq(e){return e.tag===5||e.tag===3||e.tag===4}function VB(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ub));else if(n!==4&&(e=e.child,e!==null))for(rC(e,t,r),e=e.sibling;e!==null;)rC(e,t,r),e=e.sibling}function nC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(nC(e,t,r),e=e.sibling;e!==null;)nC(e,t,r),e=e.sibling}var Di=null,ao=!1;function pc(e,t,r){for(r=r.child;r!==null;)Lq(e,t,r),r=r.sibling}function Lq(e,t,r){if(Ko&&typeof Ko.onCommitFiberUnmount=="function")try{Ko.onCommitFiberUnmount(f1,r)}catch{}switch(r.tag){case 5:rs||mh(r,t);case 6:var n=Di,i=ao;Di=null,pc(e,t,r),Di=n,ao=i,Di!==null&&(ao?(e=Di,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Di.removeChild(r.stateNode));break;case 18:Di!==null&&(ao?(e=Di,r=r.stateNode,e.nodeType===8?zk(e.parentNode,r):e.nodeType===1&&zk(e,r),wy(e)):zk(Di,r.stateNode));break;case 4:n=Di,i=ao,Di=r.stateNode.containerInfo,ao=!0,pc(e,t,r),Di=n,ao=i;break;case 0:case 11:case 14:case 15:if(!rs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&eC(r,t,a),i=i.next}while(i!==n)}pc(e,t,r);break;case 1:if(!rs&&(mh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Rn(r,t,o)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:r.mode&1?(rs=(n=rs)||r.memoizedState!==null,pc(e,t,r),rs=n):pc(e,t,r);break;default:pc(e,t,r)}}function UB(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zue),t.forEach(function(n){var i=lde.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ka(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Di=o.stateNode,ao=!1;break e;case 3:Di=o.stateNode.containerInfo,ao=!0;break e;case 4:Di=o.stateNode.containerInfo,ao=!0;break e}o=o.return}if(Di===null)throw Error(et(160));Lq(s,a,i),Di=null,ao=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Rn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fq(t,e),t=t.sibling}function Fq(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ka(t,e),No(e),n&4){try{Qg(3,e,e.return),x1(3,e)}catch(g){Rn(e,e.return,g)}try{Qg(5,e,e.return)}catch(g){Rn(e,e.return,g)}}break;case 1:Ka(t,e),No(e),n&512&&r!==null&&mh(r,r.return);break;case 5:if(Ka(t,e),No(e),n&512&&r!==null&&mh(r,r.return),e.flags&32){var i=e.stateNode;try{vy(i,"")}catch(g){Rn(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&o9(i,s),PE(o,a);var c=PE(o,s);for(a=0;a<l.length;a+=2){var d=l[a],u=l[a+1];d==="style"?f9(i,u):d==="dangerouslySetInnerHTML"?u9(i,u):d==="children"?vy(i,u):wA(i,d,u,c)}switch(o){case"input":wE(i,s);break;case"textarea":l9(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ah(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ah(i,!!s.multiple,s.defaultValue,!0):Ah(i,!!s.multiple,s.multiple?[]:"",!1))}i[Py]=s}catch(g){Rn(e,e.return,g)}}break;case 6:if(Ka(t,e),No(e),n&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Rn(e,e.return,g)}}break;case 3:if(Ka(t,e),No(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wy(t.containerInfo)}catch(g){Rn(e,e.return,g)}break;case 4:Ka(t,e),No(e);break;case 13:Ka(t,e),No(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tO=qn())),n&4&&UB(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(rs=(c=rs)||d,Ka(t,e),rs=c):Ka(t,e),No(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(wt=e,d=e.child;d!==null;){for(u=wt=d;wt!==null;){switch(f=wt,p=f.child,f.tag){case 0:case 11:case 14:case 15:Qg(4,f,f.return);break;case 1:mh(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Rn(n,r,g)}}break;case 5:mh(f,f.return);break;case 22:if(f.memoizedState!==null){GB(u);continue}}p!==null?(p.return=f,wt=p):GB(u)}d=d.sibling}e:for(d=null,u=e;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=d9("display",a))}catch(g){Rn(e,e.return,g)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){Rn(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ka(t,e),No(e),n&4&&UB(e);break;case 21:break;default:Ka(t,e),No(e)}}function No(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Rq(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(vy(i,""),n.flags&=-33);var s=VB(e);nC(e,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=VB(e);rC(e,o,a);break;default:throw Error(et(161))}}catch(l){Rn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ede(e,t,r){wt=e,Bq(e)}function Bq(e,t,r){for(var n=(e.mode&1)!==0;wt!==null;){var i=wt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||$0;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||rs;o=$0;var c=rs;if($0=a,(rs=l)&&!c)for(wt=i;wt!==null;)a=wt,l=a.child,a.tag===22&&a.memoizedState!==null?HB(i):l!==null?(l.return=a,wt=l):HB(i);for(;s!==null;)wt=s,Bq(s),s=s.sibling;wt=i,$0=o,rs=c}WB(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,wt=s):WB(e)}}function WB(e){for(;wt!==null;){var t=wt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rs||x1(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rs)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:no(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&EB(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}EB(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&wy(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}rs||t.flags&512&&tC(t)}catch(f){Rn(t,t.return,f)}}if(t===e){wt=null;break}if(r=t.sibling,r!==null){r.return=t.return,wt=r;break}wt=t.return}}function GB(e){for(;wt!==null;){var t=wt;if(t===e){wt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,wt=r;break}wt=t.return}}function HB(e){for(;wt!==null;){var t=wt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{x1(4,t)}catch(l){Rn(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Rn(t,i,l)}}var s=t.return;try{tC(t)}catch(l){Rn(t,s,l)}break;case 5:var a=t.return;try{tC(t)}catch(l){Rn(t,a,l)}}}catch(l){Rn(t,t.return,l)}if(t===e){wt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,wt=o;break}wt=t.return}}var tde=Math.ceil,bb=Zl.ReactCurrentDispatcher,JA=Zl.ReactCurrentOwner,Aa=Zl.ReactCurrentBatchConfig,Er=0,Ai=null,ii=null,Fi=0,Ys=0,gh=bu(0),_i=0,$y=null,Gd=0,b1=0,eO=0,Zg=null,Ds=null,tO=0,lp=1/0,bl=null,wb=!1,iC=null,Jc=null,I0=!1,Wc=null,Tb=0,Jg=0,sC=null,Dx=-1,Rx=0;function Ms(){return Er&6?qn():Dx!==-1?Dx:Dx=qn()}function eu(e){return e.mode&1?Er&2&&Fi!==0?Fi&-Fi:Lue.transition!==null?(Rx===0&&(Rx=M9()),Rx):(e=Vr,e!==0||(e=window.event,e=e===void 0?16:A9(e.type)),e):1}function vo(e,t,r,n){if(50<Jg)throw Jg=0,sC=null,Error(et(185));Zv(e,r,n),(!(Er&2)||e!==Ai)&&(e===Ai&&(!(Er&2)&&(b1|=r),_i===4&&$c(e,Fi)),Vs(e,n),r===1&&Er===0&&!(t.mode&1)&&(lp=qn()+500,y1&&wu()))}function Vs(e,t){var r=e.callbackNode;Lce(e,t);var n=ab(e,e===Ai?Fi:0);if(n===0)r!==null&&tB(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tB(r),t===1)e.tag===0?Rue(KB.bind(null,e)):Y9(KB.bind(null,e)),$ue(function(){!(Er&6)&&wu()}),r=null;else{switch(k9(n)){case 1:r=PA;break;case 4:r=w9;break;case 16:r=sb;break;case 536870912:r=T9;break;default:r=sb}r=qq(r,zq.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zq(e,t){if(Dx=-1,Rx=0,Er&6)throw Error(et(327));var r=e.callbackNode;if(Dh()&&e.callbackNode!==r)return null;var n=ab(e,e===Ai?Fi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Mb(e,n);else{t=n;var i=Er;Er|=2;var s=Uq();(Ai!==e||Fi!==t)&&(bl=null,lp=qn()+500,Dd(e,t));do try{ide();break}catch(o){Vq(e,o)}while(!0);BA(),bb.current=s,Er=i,ii!==null?t=0:(Ai=null,Fi=0,t=_i)}if(t!==0){if(t===2&&(i=OE(e),i!==0&&(n=i,t=aC(e,i))),t===1)throw r=$y,Dd(e,0),$c(e,n),Vs(e,qn()),r;if(t===6)$c(e,n);else{if(i=e.current.alternate,!(n&30)&&!rde(i)&&(t=Mb(e,n),t===2&&(s=OE(e),s!==0&&(n=s,t=aC(e,s))),t===1))throw r=$y,Dd(e,0),$c(e,n),Vs(e,qn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(et(345));case 2:ld(e,Ds,bl);break;case 3:if($c(e,n),(n&130023424)===n&&(t=tO+500-qn(),10<t)){if(ab(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ms(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=BE(ld.bind(null,e,Ds,bl),t);break}ld(e,Ds,bl);break;case 4:if($c(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-yo(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=qn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tde(n/1960))-n,10<n){e.timeoutHandle=BE(ld.bind(null,e,Ds,bl),n);break}ld(e,Ds,bl);break;case 5:ld(e,Ds,bl);break;default:throw Error(et(329))}}}return Vs(e,qn()),e.callbackNode===r?zq.bind(null,e):null}function aC(e,t){var r=Zg;return e.current.memoizedState.isDehydrated&&(Dd(e,t).flags|=256),e=Mb(e,t),e!==2&&(t=Ds,Ds=r,t!==null&&oC(t)),e}function oC(e){Ds===null?Ds=e:Ds.push.apply(Ds,e)}function rde(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!bo(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t){for(t&=~eO,t&=~b1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yo(t),n=1<<r;e[r]=-1,t&=~n}}function KB(e){if(Er&6)throw Error(et(327));Dh();var t=ab(e,0);if(!(t&1))return Vs(e,qn()),null;var r=Mb(e,t);if(e.tag!==0&&r===2){var n=OE(e);n!==0&&(t=n,r=aC(e,n))}if(r===1)throw r=$y,Dd(e,0),$c(e,t),Vs(e,qn()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ld(e,Ds,bl),Vs(e,qn()),null}function rO(e,t){var r=Er;Er|=1;try{return e(t)}finally{Er=r,Er===0&&(lp=qn()+500,y1&&wu())}}function Hd(e){Wc!==null&&Wc.tag===0&&!(Er&6)&&Dh();var t=Er;Er|=1;var r=Aa.transition,n=Vr;try{if(Aa.transition=null,Vr=1,e)return e()}finally{Vr=n,Aa.transition=r,Er=t,!(Er&6)&&wu()}}function nO(){Ys=gh.current,gn(gh)}function Dd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Oue(r)),ii!==null)for(r=ii.return;r!==null;){var n=r;switch(RA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&db();break;case 3:ap(),gn(Bs),gn(as),HA();break;case 5:GA(n);break;case 4:ap();break;case 13:gn(En);break;case 19:gn(En);break;case 10:zA(n.type._context);break;case 22:case 23:nO()}r=r.return}if(Ai=e,ii=e=tu(e.current,null),Fi=Ys=t,_i=0,$y=null,eO=b1=Gd=0,Ds=Zg=null,bd!==null){for(t=0;t<bd.length;t++)if(r=bd[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}bd=null}return e}function Vq(e,t){do{var r=ii;try{if(BA(),$x.current=xb,_b){for(var n=jn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_b=!1}if(Wd=0,Ci=gi=jn=null,Yg=!1,jy=0,JA.current=null,r===null||r.return===null){_i=1,$y=t,ii=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Fi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=IB(a);if(p!==null){p.flags&=-257,NB(p,a,o,s,t),p.mode&1&&$B(s,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){$B(s,c,t),iO();break e}l=Error(et(426))}}else if(wn&&o.mode&1){var x=IB(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),NB(x,a,o,s,t),LA(op(l,o));break e}}s=l=op(l,o),_i!==4&&(_i=2),Zg===null?Zg=[s]:Zg.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=kq(s,l,t);PB(s,v);break e;case 1:o=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Jc===null||!Jc.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Sq(s,o,t);PB(s,b);break e}}s=s.return}while(s!==null)}Gq(r)}catch(_){t=_,ii===r&&r!==null&&(ii=r=r.return);continue}break}while(!0)}function Uq(){var e=bb.current;return bb.current=xb,e===null?xb:e}function iO(){(_i===0||_i===3||_i===2)&&(_i=4),Ai===null||!(Gd&268435455)&&!(b1&268435455)||$c(Ai,Fi)}function Mb(e,t){var r=Er;Er|=2;var n=Uq();(Ai!==e||Fi!==t)&&(bl=null,Dd(e,t));do try{nde();break}catch(i){Vq(e,i)}while(!0);if(BA(),Er=r,bb.current=n,ii!==null)throw Error(et(261));return Ai=null,Fi=0,_i}function nde(){for(;ii!==null;)Wq(ii)}function ide(){for(;ii!==null&&!Cce();)Wq(ii)}function Wq(e){var t=Kq(e.alternate,e,Ys);e.memoizedProps=e.pendingProps,t===null?Gq(e):ii=t,JA.current=null}function Gq(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Que(r,t),r!==null){r.flags&=32767,ii=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_i=6,ii=null;return}}else if(r=Yue(r,t,Ys),r!==null){ii=r;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);_i===0&&(_i=5)}function ld(e,t,r){var n=Vr,i=Aa.transition;try{Aa.transition=null,Vr=1,sde(e,t,r,n)}finally{Aa.transition=i,Vr=n}return null}function sde(e,t,r,n){do Dh();while(Wc!==null);if(Er&6)throw Error(et(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Fce(e,s),e===Ai&&(ii=Ai=null,Fi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||I0||(I0=!0,qq(sb,function(){return Dh(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Aa.transition,Aa.transition=null;var a=Vr;Vr=1;var o=Er;Er|=4,JA.current=null,Jue(e,r),Fq(r,e),kue(LE),ob=!!RE,LE=RE=null,e.current=r,ede(r),jce(),Er=o,Vr=a,Aa.transition=s}else e.current=r;if(I0&&(I0=!1,Wc=e,Tb=i),s=e.pendingLanes,s===0&&(Jc=null),$ce(r.stateNode),Vs(e,qn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(wb)throw wb=!1,e=iC,iC=null,e;return Tb&1&&e.tag!==0&&Dh(),s=e.pendingLanes,s&1?e===sC?Jg++:(Jg=0,sC=e):Jg=0,wu(),null}function Dh(){if(Wc!==null){var e=k9(Tb),t=Aa.transition,r=Vr;try{if(Aa.transition=null,Vr=16>e?16:e,Wc===null)var n=!1;else{if(e=Wc,Wc=null,Tb=0,Er&6)throw Error(et(331));var i=Er;for(Er|=4,wt=e.current;wt!==null;){var s=wt,a=s.child;if(wt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(wt=c;wt!==null;){var d=wt;switch(d.tag){case 0:case 11:case 15:Qg(8,d,s)}var u=d.child;if(u!==null)u.return=d,wt=u;else for(;wt!==null;){d=wt;var f=d.sibling,p=d.return;if(Dq(d),d===c){wt=null;break}if(f!==null){f.return=p,wt=f;break}wt=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}wt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,wt=a;else e:for(;wt!==null;){if(s=wt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qg(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,wt=v;break e}wt=s.return}}var y=e.current;for(wt=y;wt!==null;){a=wt;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,wt=w;else e:for(a=y;wt!==null;){if(o=wt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:x1(9,o)}}catch(_){Rn(o,o.return,_)}if(o===a){wt=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,wt=b;break e}wt=o.return}}if(Er=i,wu(),Ko&&typeof Ko.onPostCommitFiberRoot=="function")try{Ko.onPostCommitFiberRoot(f1,e)}catch{}n=!0}return n}finally{Vr=r,Aa.transition=t}}return!1}function qB(e,t,r){t=op(r,t),t=kq(e,t,1),e=Zc(e,t,1),t=Ms(),e!==null&&(Zv(e,1,t),Vs(e,t))}function Rn(e,t,r){if(e.tag===3)qB(e,e,r);else for(;t!==null;){if(t.tag===3){qB(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jc===null||!Jc.has(n))){e=op(r,e),e=Sq(t,e,1),t=Zc(t,e,1),e=Ms(),t!==null&&(Zv(t,1,e),Vs(t,e));break}}t=t.return}}function ade(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ms(),e.pingedLanes|=e.suspendedLanes&r,Ai===e&&(Fi&r)===r&&(_i===4||_i===3&&(Fi&130023424)===Fi&&500>qn()-tO?Dd(e,0):eO|=r),Vs(e,t)}function Hq(e,t){t===0&&(e.mode&1?(t=M0,M0<<=1,!(M0&130023424)&&(M0=4194304)):t=1);var r=Ms();e=zl(e,t),e!==null&&(Zv(e,t,r),Vs(e,r))}function ode(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hq(e,r)}function lde(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(t),Hq(e,r)}var Kq;Kq=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bs.current)Ls=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ls=!1,Xue(e,t,r);Ls=!!(e.flags&131072)}else Ls=!1,wn&&t.flags&1048576&&Q9(t,pb,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Nx(e,t),e=t.pendingProps;var i=np(t,as.current);Nh(t,r),i=qA(null,t,n,e,i,r);var s=XA();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zs(n)?(s=!0,fb(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UA(t),i.updater=_1,t.stateNode=i,i._reactInternals=t,KE(t,n,e,r),t=YE(null,t,n,!0,s,r)):(t.tag=0,wn&&s&&DA(t),ms(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Nx(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=ude(n),e=no(n,e),i){case 0:t=XE(null,t,n,e,r);break e;case 1:t=LB(null,t,n,e,r);break e;case 11:t=DB(null,t,n,e,r);break e;case 14:t=RB(null,t,n,no(n.type,e),r);break e}throw Error(et(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:no(n,i),XE(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:no(n,i),LB(e,t,n,i,r);case 3:e:{if(jq(t),e===null)throw Error(et(387));n=t.pendingProps,s=t.memoizedState,i=s.element,nq(e,t),yb(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=op(Error(et(423)),t),t=FB(e,t,n,r,i);break e}else if(n!==i){i=op(Error(et(424)),t),t=FB(e,t,n,r,i);break e}else for(na=Qc(t.stateNode.containerInfo.firstChild),ia=t,wn=!0,co=null,r=tq(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ip(),n===i){t=Vl(e,t,r);break e}ms(e,t,n,r)}t=t.child}return t;case 5:return iq(t),e===null&&WE(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,FE(n,i)?a=null:s!==null&&FE(n,s)&&(t.flags|=32),Cq(e,t),ms(e,t,a,r),t.child;case 6:return e===null&&WE(t),null;case 13:return Aq(e,t,r);case 4:return WA(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sp(t,null,n,r):ms(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:no(n,i),DB(e,t,n,i,r);case 7:return ms(e,t,t.pendingProps,r),t.child;case 8:return ms(e,t,t.pendingProps.children,r),t.child;case 12:return ms(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,sn(mb,n._currentValue),n._currentValue=a,s!==null)if(bo(s.value,a)){if(s.children===i.children&&!Bs.current){t=Vl(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Ol(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),GE(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(et(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),GE(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ms(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Nh(t,r),i=Ia(i),n=n(i),t.flags|=1,ms(e,t,n,r),t.child;case 14:return n=t.type,i=no(n,t.pendingProps),i=no(n.type,i),RB(e,t,n,i,r);case 15:return Pq(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:no(n,i),Nx(e,t),t.tag=1,zs(n)?(e=!0,fb(t)):e=!1,Nh(t,r),Mq(t,n,i),KE(t,n,i,r),YE(null,t,n,!0,e,r);case 19:return Oq(e,t,r);case 22:return Eq(e,t,r)}throw Error(et(156,t.tag))};function qq(e,t){return b9(e,t)}function cde(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ca(e,t,r,n){return new cde(e,t,r,n)}function sO(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ude(e){if(typeof e=="function")return sO(e)?1:0;if(e!=null){if(e=e.$$typeof,e===MA)return 11;if(e===kA)return 14}return 2}function tu(e,t){var r=e.alternate;return r===null?(r=Ca(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lx(e,t,r,n,i,s){var a=2;if(n=e,typeof e=="function")sO(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ah:return Rd(r.children,i,s,t);case TA:a=8,i|=8;break;case yE:return e=Ca(12,r,t,i|2),e.elementType=yE,e.lanes=s,e;case vE:return e=Ca(13,r,t,i),e.elementType=vE,e.lanes=s,e;case _E:return e=Ca(19,r,t,i),e.elementType=_E,e.lanes=s,e;case i9:return w1(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r9:a=10;break e;case n9:a=9;break e;case MA:a=11;break e;case kA:a=14;break e;case Pc:a=16,n=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Ca(a,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Rd(e,t,r,n){return e=Ca(7,e,n,t),e.lanes=r,e}function w1(e,t,r,n){return e=Ca(22,e,n,t),e.elementType=i9,e.lanes=r,e.stateNode={isHidden:!1},e}function Xk(e,t,r){return e=Ca(6,e,null,t),e.lanes=r,e}function Yk(e,t,r){return t=Ca(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dde(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jk(0),this.expirationTimes=jk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jk(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function aO(e,t,r,n,i,s,a,o,l){return e=new dde(e,t,r,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ca(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},UA(s),e}function fde(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Xq(e){if(!e)return ou;e=e._reactInternals;e:{if(cf(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(zs(r))return X9(e,r,t)}return t}function Yq(e,t,r,n,i,s,a,o,l){return e=aO(r,n,!0,e,i,s,a,o,l),e.context=Xq(null),r=e.current,n=Ms(),i=eu(r),s=Ol(n,i),s.callback=t??null,Zc(r,s,i),e.current.lanes=i,Zv(e,i,n),Vs(e,n),e}function T1(e,t,r,n){var i=t.current,s=Ms(),a=eu(i);return r=Xq(r),t.context===null?t.context=r:t.pendingContext=r,t=Ol(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Zc(i,t,a),e!==null&&(vo(e,i,a,s),Ox(e,i,a)),a}function kb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function XB(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function oO(e,t){XB(e,t),(e=e.alternate)&&XB(e,t)}function hde(){return null}var Qq=typeof reportError=="function"?reportError:function(e){console.error(e)};function lO(e){this._internalRoot=e}M1.prototype.render=lO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));T1(e,t,null,null)};M1.prototype.unmount=lO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hd(function(){T1(null,e,null,null)}),t[Bl]=null}};function M1(e){this._internalRoot=e}M1.prototype.unstable_scheduleHydration=function(e){if(e){var t=E9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Oc.length&&t!==0&&t<Oc[r].priority;r++);Oc.splice(r,0,e),r===0&&j9(e)}};function cO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function k1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function YB(){}function pde(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=kb(a);s.call(c)}}var a=Yq(t,n,e,0,null,!1,!1,"",YB);return e._reactRootContainer=a,e[Bl]=a.current,ky(e.nodeType===8?e.parentNode:e),Hd(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=kb(l);o.call(c)}}var l=aO(e,0,!1,null,null,!1,!1,"",YB);return e._reactRootContainer=l,e[Bl]=l.current,ky(e.nodeType===8?e.parentNode:e),Hd(function(){T1(t,l,r,n)}),l}function S1(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=kb(a);o.call(l)}}T1(t,a,e,i)}else a=pde(r,t,e,i,n);return kb(a)}S9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ag(t.pendingLanes);r!==0&&(EA(t,r|1),Vs(t,qn()),!(Er&6)&&(lp=qn()+500,wu()))}break;case 13:Hd(function(){var n=zl(e,1);if(n!==null){var i=Ms();vo(n,e,1,i)}}),oO(e,1)}};CA=function(e){if(e.tag===13){var t=zl(e,134217728);if(t!==null){var r=Ms();vo(t,e,134217728,r)}oO(e,134217728)}};P9=function(e){if(e.tag===13){var t=eu(e),r=zl(e,t);if(r!==null){var n=Ms();vo(r,e,t,n)}oO(e,t)}};E9=function(){return Vr};C9=function(e,t){var r=Vr;try{return Vr=e,t()}finally{Vr=r}};CE=function(e,t,r){switch(t){case"input":if(wE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=g1(n);if(!i)throw Error(et(90));a9(n),wE(n,i)}}}break;case"textarea":l9(e,r);break;case"select":t=r.value,t!=null&&Ah(e,!!r.multiple,t,!1)}};m9=rO;g9=Hd;var mde={usingClientEntryPoint:!1,Events:[e_,uh,g1,h9,p9,rO]},eg={findFiberByHostInstance:xd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gde={bundleType:eg.bundleType,version:eg.version,rendererPackageName:eg.rendererPackageName,rendererConfig:eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_9(e),e===null?null:e.stateNode},findFiberByHostInstance:eg.findFiberByHostInstance||hde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N0.isDisabled&&N0.supportsFiber)try{f1=N0.inject(gde),Ko=N0}catch{}}da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mde;da.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cO(t))throw Error(et(200));return fde(e,t,null,r)};da.createRoot=function(e,t){if(!cO(e))throw Error(et(299));var r=!1,n="",i=Qq;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=aO(e,1,!1,null,null,r,!1,n,i),e[Bl]=t.current,ky(e.nodeType===8?e.parentNode:e),new lO(t)};da.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=_9(t),e=e===null?null:e.stateNode,e};da.flushSync=function(e){return Hd(e)};da.hydrate=function(e,t,r){if(!k1(t))throw Error(et(200));return S1(null,e,t,!0,r)};da.hydrateRoot=function(e,t,r){if(!cO(e))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=Qq;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Yq(t,null,e,1,r??null,i,!1,s,a),e[Bl]=t.current,ky(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new M1(t)};da.render=function(e,t,r){if(!k1(t))throw Error(et(200));return S1(null,e,t,!1,r)};da.unmountComponentAtNode=function(e){if(!k1(e))throw Error(et(40));return e._reactRootContainer?(Hd(function(){S1(null,null,e,!1,function(){e._reactRootContainer=null,e[Bl]=null})}),!0):!1};da.unstable_batchedUpdates=rO;da.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!k1(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return S1(e,t,r,!1,n)};da.version="18.3.1-next-f1338f8080-20240426";function Zq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zq)}catch(e){console.error(e)}}Zq(),ZK.exports=da;var uf=ZK.exports;const uO=Ir(uf);var Jq,QB=uf;Jq=QB.createRoot,QB.hydrateRoot;var yde=typeof Element<"u",vde=typeof Map=="function",_de=typeof Set=="function",xde=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Fx(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Fx(e[n],t[n]))return!1;return!0}var s;if(vde&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Fx(n.value[1],t.get(n.value[0])))return!1;return!0}if(_de&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(xde&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(yde&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Fx(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var bde=function(t,r){try{return Fx(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const wde=Ir(bde);var Tde=function(e,t,r,n,i,s,a,o){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,s,a,o],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},Mde=Tde;const ZB=Ir(Mde);var kde=function(t,r,n,i){var s=n?n.call(i,t,r):void 0;if(s!==void 0)return!!s;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(r),c=0;c<a.length;c++){var d=a[c];if(!l(d))return!1;var u=t[d],f=r[d];if(s=n?n.call(i,u,f,d):void 0,s===!1||s===void 0&&u!==f)return!1}return!0};const Sde=Ir(kde);var e7=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(e7||{}),Qk={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},JB=Object.values(e7),dO={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Pde=Object.entries(dO).reduce((e,[t,r])=>(e[r]=t,e),{}),mo="data-rh",Rh={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Lh=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},Ede=e=>{let t=Lh(e,"title");const r=Lh(e,Rh.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=Lh(e,Rh.DEFAULT_TITLE);return t||n||void 0},Cde=e=>Lh(e,Rh.ON_CHANGE_CLIENT_STATE)||(()=>{}),Zk=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),jde=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const i=Object.keys(n);for(let s=0;s<i.length;s+=1){const o=i[s].toLowerCase();if(e.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),Ade=e=>console&&typeof console.warn=="function"&&console.warn(e),tg=(e,t,r)=>{const n={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&Ade(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,s)=>{const a={};s.filter(l=>{let c;const d=Object.keys(l);for(let f=0;f<d.length;f+=1){const p=d[f],m=p.toLowerCase();t.indexOf(m)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(m==="rel"&&l[m].toLowerCase()==="stylesheet")&&(c=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const u=l[c].toLowerCase();return n[c]||(n[c]={}),a[c]||(a[c]={}),n[c][u]?!1:(a[c][u]=!0,!0)}).reverse().forEach(l=>i.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const c=o[l],d={...n[c],...a[c]};n[c]=d}return i},[]).reverse()},Ode=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},$de=e=>({baseTag:jde(["href"],e),bodyAttributes:Zk("bodyAttributes",e),defer:Lh(e,Rh.DEFER),encode:Lh(e,Rh.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Zk("htmlAttributes",e),linkTags:tg("link",["rel","href"],e),metaTags:tg("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:tg("noscript",["innerHTML"],e),onChangeClientState:Cde(e),scriptTags:tg("script",["src","innerHTML"],e),styleTags:tg("style",["cssText"],e),title:Ede(e),titleAttributes:Zk("titleAttributes",e),prioritizeSeoTags:Ode(e,Rh.PRIORITIZE_SEO_TAGS)}),t7=e=>Array.isArray(e)?e.join(""):e,Ide=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},Jk=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Ide(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},e4=(e,t)=>({...e,[t]:void 0}),Nde=["noscript","script","style"],lC=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),r7=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Dde=(e,t,r,n)=>{const i=r7(r),s=t7(t);return i?`<${e} ${mo}="true" ${i}>${lC(s,n)}</${e}>`:`<${e} ${mo}="true">${lC(s,n)}</${e}>`},Rde=(e,t,r=!0)=>t.reduce((n,i)=>{const s=i,a=Object.keys(s).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,d)=>{const u=typeof s[d]>"u"?d:`${d}="${lC(s[d],r)}"`;return c?`${c} ${u}`:u},""),o=s.innerHTML||s.cssText||"",l=Nde.indexOf(e)===-1;return`${n}<${e} ${mo}="true" ${a}${l?"/>":`>${o}</${e}>`}`},""),n7=(e,t={})=>Object.keys(e).reduce((r,n)=>{const i=dO[n];return r[i||n]=e[n],r},t),Lde=(e,t,r)=>{const n={key:t,[mo]:!0},i=n7(r,n);return[se.createElement("title",i,t)]},Bx=(e,t)=>t.map((r,n)=>{const i={key:n,[mo]:!0};return Object.keys(r).forEach(s=>{const o=dO[s]||s;if(o==="innerHTML"||o==="cssText"){const l=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:l}}else i[o]=r[s]}),se.createElement(e,i)}),ba=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Lde(e,t.title,t.titleAttributes),toString:()=>Dde(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>n7(t),toString:()=>r7(t)};default:return{toComponent:()=>Bx(e,t),toString:()=>Rde(e,t,r)}}},Fde=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const i=Jk(e,Qk.meta),s=Jk(t,Qk.link),a=Jk(r,Qk.script);return{priorityMethods:{toComponent:()=>[...Bx("meta",i.priority),...Bx("link",s.priority),...Bx("script",a.priority)],toString:()=>`${ba("meta",i.priority,n)} ${ba("link",s.priority,n)} ${ba("script",a.priority,n)}`},metaTags:i.default,linkTags:s.default,scriptTags:a.default}},Bde=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:i,noscriptTags:s,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:f}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:d,metaTags:u,scriptTags:f}=Fde(e)),{priority:p,base:ba("base",t,n),bodyAttributes:ba("bodyAttributes",r,n),htmlAttributes:ba("htmlAttributes",i,n),link:ba("link",d,n),meta:ba("meta",u,n),noscript:ba("noscript",s,n),script:ba("script",f,n),style:ba("style",a,n),title:ba("title",{title:o,titleAttributes:l},n)}},cC=Bde,D0=[],i7=!!(typeof window<"u"&&window.document&&window.document.createElement),uC=class{constructor(e,t){ue(this,"instances",[]);ue(this,"canUseDOM",i7);ue(this,"context");ue(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?D0:this.instances,add:e=>{(this.canUseDOM?D0:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?D0:this.instances).indexOf(e);(this.canUseDOM?D0:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=cC({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},zde={},s7=se.createContext(zde),Ad,a7=(Ad=class extends E.Component{constructor(r){super(r);ue(this,"helmetData");this.helmetData=new uC(this.props.context||{},Ad.canUseDOM)}render(){return se.createElement(s7.Provider,{value:this.helmetData.value},this.props.children)}},ue(Ad,"canUseDOM",i7),Ad),Rf=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${mo}]`),i=[].slice.call(n),s=[];let a;return t&&t.length&&t.forEach(o=>{const l=document.createElement(e);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c))if(c==="innerHTML")l.innerHTML=o.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const d=c,u=typeof o[d]>"u"?"":o[d];l.setAttribute(c,u)}l.setAttribute(mo,"true"),i.some((c,d)=>(a=d,l.isEqualNode(c)))?i.splice(a,1):s.push(l)}),i.forEach(o=>{var l;return(l=o.parentNode)==null?void 0:l.removeChild(o)}),s.forEach(o=>r.appendChild(o)),{oldTags:i,newTags:s}},dC=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(mo),i=n?n.split(","):[],s=[...i],a=Object.keys(t);for(const o of a){const l=t[o]||"";r.getAttribute(o)!==l&&r.setAttribute(o,l),i.indexOf(o)===-1&&i.push(o);const c=s.indexOf(o);c!==-1&&s.splice(c,1)}for(let o=s.length-1;o>=0;o-=1)r.removeAttribute(s[o]);i.length===s.length?r.removeAttribute(mo):r.getAttribute(mo)!==a.join(",")&&r.setAttribute(mo,a.join(","))},Vde=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=t7(e)),dC("title",t)},t4=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:i,linkTags:s,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:u,titleAttributes:f}=e;dC("body",n),dC("html",i),Vde(u,f);const p={baseTag:Rf("base",r),linkTags:Rf("link",s),metaTags:Rf("meta",a),noscriptTags:Rf("noscript",o),scriptTags:Rf("script",c),styleTags:Rf("style",d)},m={},g={};Object.keys(p).forEach(x=>{const{newTags:v,oldTags:y}=p[x];v.length&&(m[x]=v),y.length&&(g[x]=p[x].oldTags)}),t&&t(),l(e,m,g)},rg=null,Ude=e=>{rg&&cancelAnimationFrame(rg),e.defer?rg=requestAnimationFrame(()=>{t4(e,()=>{rg=null})}):(t4(e),rg=null)},Wde=Ude,r4=class extends E.Component{constructor(){super(...arguments);ue(this,"rendered",!1)}shouldComponentUpdate(t){return!Sde(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const i=$de(t.get().map(s=>{const a={...s.props};return delete a.context,a}));a7.canUseDOM?Wde(i):cC&&(n=cC(i)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},mE,Gde=(mE=class extends E.Component{shouldComponentUpdate(e){return!wde(e4(this.props,"helmetData"),e4(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return ZB(JB.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${JB.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),ZB(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return se.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:i,...s}=n.props,a=Object.keys(s).reduce((l,c)=>(l[Pde[c]||c]=s[c],l),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,i),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,a,i);break;default:t=this.mapObjectTypeChildren(n,t,a,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof uC)){const i=n;n=new uC(i.context,!0),delete r.helmetData}return n?se.createElement(r4,{...r,context:n.value}):se.createElement(s7.Consumer,null,i=>se.createElement(r4,{...r,context:i}))}},ue(mE,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),mE);const Hde=1,Kde=1e6;let eS=0;function qde(){return eS=(eS+1)%Number.MAX_SAFE_INTEGER,eS.toString()}const tS=new Map,n4=e=>{if(tS.has(e))return;const t=setTimeout(()=>{tS.delete(e),ey({type:"REMOVE_TOAST",toastId:e})},Kde);tS.set(e,t)},Xde=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Hde)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?n4(r):e.toasts.forEach(n=>{n4(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},zx=[];let Vx={toasts:[]};function ey(e){Vx=Xde(Vx,e),zx.forEach(t=>{t(Vx)})}function Yde({...e}){const t=qde(),r=i=>ey({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>ey({type:"DISMISS_TOAST",toastId:t});return ey({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function So(){const[e,t]=E.useState(Vx);return E.useEffect(()=>(zx.push(t),()=>{const r=zx.indexOf(t);r>-1&&zx.splice(r,1)}),[e]),{...e,toast:Yde,dismiss:r=>ey({type:"DISMISS_TOAST",toastId:r})}}function xt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Qde(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function fO(...e){return t=>e.forEach(r=>Qde(r,t))}function Or(...e){return E.useCallback(fO(...e),e)}function Zde(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(u){const{scope:f,children:p,...m}=u,g=(f==null?void 0:f[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:x,children:p})}function d(u,f){const p=(f==null?void 0:f[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,Jde(i,...t)]}function Jde(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...o,...u}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var lu=E.forwardRef((e,t)=>{const{children:r,...n}=e,i=E.Children.toArray(r),s=i.find(efe);if(s){const a=s.props.children,o=i.map(l=>l===s?E.Children.count(a)>1?E.Children.only(null):E.isValidElement(a)?a.props.children:null:l);return h.jsx(fC,{...n,ref:t,children:E.isValidElement(a)?E.cloneElement(a,void 0,o):null})}return h.jsx(fC,{...n,ref:t,children:r})});lu.displayName="Slot";var fC=E.forwardRef((e,t)=>{const{children:r,...n}=e;if(E.isValidElement(r)){const i=rfe(r);return E.cloneElement(r,{...tfe(n,r.props),ref:t?fO(t,i):i})}return E.Children.count(r)>1?E.Children.only(null):null});fC.displayName="SlotClone";var o7=({children:e})=>h.jsx(h.Fragment,{children:e});function efe(e){return E.isValidElement(e)&&e.type===o7}function tfe(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...o)=>{s(...o),i(...o)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}function rfe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function r_(e){const t=e+"CollectionProvider",[r,n]=Zde(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:m,children:g}=p,x=se.useRef(null),v=se.useRef(new Map).current;return h.jsx(i,{scope:m,itemMap:v,collectionRef:x,children:g})};a.displayName=t;const o=e+"CollectionSlot",l=se.forwardRef((p,m)=>{const{scope:g,children:x}=p,v=s(o,g),y=Or(m,v.collectionRef);return h.jsx(lu,{ref:y,children:x})});l.displayName=o;const c=e+"CollectionItemSlot",d="data-radix-collection-item",u=se.forwardRef((p,m)=>{const{scope:g,children:x,...v}=p,y=se.useRef(null),w=Or(m,y),b=s(c,g);return se.useEffect(()=>(b.itemMap.set(y,{ref:y,...v}),()=>void b.itemMap.delete(y))),h.jsx(lu,{[d]:"",ref:w,children:x})});u.displayName=c;function f(p){const m=s(e+"CollectionConsumer",p);return se.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(m.itemMap.values()).sort((b,_)=>v.indexOf(b.ref.current)-v.indexOf(_.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:l,ItemSlot:u},f,n]}function nfe(e,t){const r=E.createContext(t),n=s=>{const{children:a,...o}=s,l=E.useMemo(()=>o,Object.values(o));return h.jsx(r.Provider,{value:l,children:a})};n.displayName=e+"Provider";function i(s){const a=E.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,i]}function df(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];const c=u=>{var v;const{scope:f,children:p,...m}=u,g=((v=f==null?void 0:f[e])==null?void 0:v[l])||o,x=E.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:x,children:p})};c.displayName=s+"Provider";function d(u,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,ife(i,...t)]}function ife(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...o,...u}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var sfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ft=sfe.reduce((e,t)=>{const r=E.forwardRef((n,i)=>{const{asChild:s,...a}=n,o=s?lu:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(o,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Sb(e,t){e&&uf.flushSync(()=>e.dispatchEvent(t))}function Xn(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e}),E.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function afe(e,t=globalThis==null?void 0:globalThis.document){const r=Xn(e);E.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var ofe="DismissableLayer",hC="dismissableLayer.update",lfe="dismissableLayer.pointerDownOutside",cfe="dismissableLayer.focusOutside",i4,l7=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qp=E.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=E.useContext(l7),[d,u]=E.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=E.useState({}),m=Or(t,M=>u(M)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(x),y=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=v,_=dfe(M=>{const k=M.target,j=[...c.branches].some(A=>A.contains(k));!b||j||(i==null||i(M),a==null||a(M),M.defaultPrevented||o==null||o())},f),T=ffe(M=>{const k=M.target;[...c.branches].some(A=>A.contains(k))||(s==null||s(M),a==null||a(M),M.defaultPrevented||o==null||o())},f);return afe(M=>{y===c.layers.size-1&&(n==null||n(M),!M.defaultPrevented&&o&&(M.preventDefault(),o()))},f),E.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(i4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),s4(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=i4)}},[d,f,r,c]),E.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),s4())},[d,c]),E.useEffect(()=>{const M=()=>p({});return document.addEventListener(hC,M),()=>document.removeEventListener(hC,M)},[]),h.jsx(Ft.div,{...l,ref:m,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:xt(e.onFocusCapture,T.onFocusCapture),onBlurCapture:xt(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:xt(e.onPointerDownCapture,_.onPointerDownCapture)})});qp.displayName=ofe;var ufe="DismissableLayerBranch",c7=E.forwardRef((e,t)=>{const r=E.useContext(l7),n=E.useRef(null),i=Or(t,n);return E.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),h.jsx(Ft.div,{...e,ref:i})});c7.displayName=ufe;function dfe(e,t=globalThis==null?void 0:globalThis.document){const r=Xn(e),n=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){u7(lfe,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ffe(e,t=globalThis==null?void 0:globalThis.document){const r=Xn(e),n=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!n.current&&u7(cfe,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function s4(){const e=new CustomEvent(hC);document.dispatchEvent(e)}function u7(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Sb(i,s):i.dispatchEvent(s)}var hfe=qp,pfe=c7,wi=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},mfe="Portal",P1=E.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[i,s]=E.useState(!1);wi(()=>s(!0),[]);const a=r||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?uO.createPortal(h.jsx(Ft.div,{...n,ref:t}),a):null});P1.displayName=mfe;function gfe(e,t){return E.useReducer((r,n)=>t[r][n]??r,e)}var Ra=e=>{const{present:t,children:r}=e,n=yfe(t),i=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),s=Or(n.ref,vfe(i));return typeof r=="function"||n.isPresent?E.cloneElement(i,{ref:s}):null};Ra.displayName="Presence";function yfe(e){const[t,r]=E.useState(),n=E.useRef({}),i=E.useRef(e),s=E.useRef("none"),a=e?"mounted":"unmounted",[o,l]=gfe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=R0(n.current);s.current=o==="mounted"?c:"none"},[o]),wi(()=>{const c=n.current,d=i.current;if(d!==e){const f=s.current,p=R0(c);e?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),wi(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,u=p=>{const g=R0(n.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!i.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=p=>{p.target===t&&(s.current=R0(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:E.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function R0(e){return(e==null?void 0:e.animationName)||"none"}function vfe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ul({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=_fe({defaultProp:t,onChange:r}),s=e!==void 0,a=s?e:n,o=Xn(r),l=E.useCallback(c=>{if(s){const u=typeof c=="function"?c(e):c;u!==e&&o(u)}else i(c)},[s,e,i,o]);return[a,l]}function _fe({defaultProp:e,onChange:t}){const r=E.useState(e),[n]=r,i=E.useRef(n),s=Xn(t);return E.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}var xfe="VisuallyHidden",n_=E.forwardRef((e,t)=>h.jsx(Ft.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));n_.displayName=xfe;var d7=n_,hO="ToastProvider",[pO,bfe,wfe]=r_("Toast"),[f7,N7e]=df("Toast",[wfe]),[Tfe,E1]=f7(hO),h7=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=e,[o,l]=E.useState(null),[c,d]=E.useState(0),u=E.useRef(!1),f=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${hO}\`. Expected non-empty \`string\`.`),h.jsx(pO.Provider,{scope:t,children:h.jsx(Tfe,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:E.useCallback(()=>d(p=>p+1),[]),onToastRemove:E.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f,children:a})})};h7.displayName=hO;var p7="ToastViewport",Mfe=["F8"],pC="toast.viewportPause",mC="toast.viewportResume",m7=E.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Mfe,label:i="Notifications ({hotkey})",...s}=e,a=E1(p7,r),o=bfe(r),l=E.useRef(null),c=E.useRef(null),d=E.useRef(null),u=E.useRef(null),f=Or(t,u,a.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;E.useEffect(()=>{const x=v=>{var w;n.length!==0&&n.every(b=>v[b]||v.code===b)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),E.useEffect(()=>{const x=l.current,v=u.current;if(m&&x&&v){const y=()=>{if(!a.isClosePausedRef.current){const T=new CustomEvent(pC);v.dispatchEvent(T),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const T=new CustomEvent(mC);v.dispatchEvent(T),a.isClosePausedRef.current=!1}},b=T=>{!x.contains(T.relatedTarget)&&w()},_=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",y),x.addEventListener("focusout",b),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",b),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[m,a.isClosePausedRef]);const g=E.useCallback(({tabbingDirection:x})=>{const y=o().map(w=>{const b=w.ref.current,_=[b,...Rfe(b)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?y.reverse():y).flat()},[o]);return E.useEffect(()=>{const x=u.current;if(x){const v=y=>{var _,T,M;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const k=document.activeElement,j=y.shiftKey;if(y.target===x&&j){(_=c.current)==null||_.focus();return}const I=g({tabbingDirection:j?"backwards":"forwards"}),$=I.findIndex(F=>F===k);rS(I.slice($+1))?y.preventDefault():j?(T=c.current)==null||T.focus():(M=d.current)==null||M.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[o,g]),h.jsxs(pfe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&h.jsx(gC,{ref:c,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});rS(x)}}),h.jsx(pO.Slot,{scope:r,children:h.jsx(Ft.ol,{tabIndex:-1,...s,ref:f})}),m&&h.jsx(gC,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});rS(x)}})]})});m7.displayName=p7;var g7="ToastFocusProxy",gC=E.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=E1(g7,r);return h.jsx(n_,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:a=>{var c;const o=a.relatedTarget;!((c=s.viewport)!=null&&c.contains(o))&&n()}})});gC.displayName=g7;var C1="Toast",kfe="toast.swipeStart",Sfe="toast.swipeMove",Pfe="toast.swipeCancel",Efe="toast.swipeEnd",y7=E.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=e,[o=!0,l]=Ul({prop:n,defaultProp:i,onChange:s});return h.jsx(Ra,{present:r||o,children:h.jsx(Afe,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:Xn(e.onPause),onResume:Xn(e.onResume),onSwipeStart:xt(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xt(e.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:xt(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xt(e.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});y7.displayName=C1;var[Cfe,jfe]=f7(C1,{onClose(){}}),Afe=E.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:f,onSwipeEnd:p,...m}=e,g=E1(C1,r),[x,v]=E.useState(null),y=Or(t,F=>v(F)),w=E.useRef(null),b=E.useRef(null),_=i||g.duration,T=E.useRef(0),M=E.useRef(_),k=E.useRef(0),{onToastAdd:j,onToastRemove:A}=g,R=Xn(()=>{var V;(x==null?void 0:x.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),a()}),I=E.useCallback(F=>{!F||F===1/0||(window.clearTimeout(k.current),T.current=new Date().getTime(),k.current=window.setTimeout(R,F))},[R]);E.useEffect(()=>{const F=g.viewport;if(F){const V=()=>{I(M.current),c==null||c()},G=()=>{const H=new Date().getTime()-T.current;M.current=M.current-H,window.clearTimeout(k.current),l==null||l()};return F.addEventListener(pC,G),F.addEventListener(mC,V),()=>{F.removeEventListener(pC,G),F.removeEventListener(mC,V)}}},[g.viewport,_,l,c,I]),E.useEffect(()=>{s&&!g.isClosePausedRef.current&&I(_)},[s,_,g.isClosePausedRef,I]),E.useEffect(()=>(j(),()=>A()),[j,A]);const $=E.useMemo(()=>x?M7(x):null,[x]);return g.viewport?h.jsxs(h.Fragment,{children:[$&&h.jsx(Ofe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),h.jsx(Cfe,{scope:r,onClose:R,children:uf.createPortal(h.jsx(pO.ItemSlot,{scope:r,children:h.jsx(hfe,{asChild:!0,onEscapeKeyDown:xt(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ft.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xt(e.onKeyDown,F=>{F.key==="Escape"&&(o==null||o(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:xt(e.onPointerDown,F=>{F.button===0&&(w.current={x:F.clientX,y:F.clientY})}),onPointerMove:xt(e.onPointerMove,F=>{if(!w.current)return;const V=F.clientX-w.current.x,G=F.clientY-w.current.y,H=!!b.current,B=["left","right"].includes(g.swipeDirection),te=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ae=B?te(0,V):0,z=B?0:te(0,G),D=F.pointerType==="touch"?10:2,K={x:ae,y:z},oe={originalEvent:F,delta:K};H?(b.current=K,L0(Sfe,u,oe,{discrete:!1})):a4(K,g.swipeDirection,D)?(b.current=K,L0(kfe,d,oe,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(V)>D||Math.abs(G)>D)&&(w.current=null)}),onPointerUp:xt(e.onPointerUp,F=>{const V=b.current,G=F.target;if(G.hasPointerCapture(F.pointerId)&&G.releasePointerCapture(F.pointerId),b.current=null,w.current=null,V){const H=F.currentTarget,B={originalEvent:F,delta:V};a4(V,g.swipeDirection,g.swipeThreshold)?L0(Efe,p,B,{discrete:!0}):L0(Pfe,f,B,{discrete:!0}),H.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Ofe=e=>{const{__scopeToast:t,children:r,...n}=e,i=E1(C1,t),[s,a]=E.useState(!1),[o,l]=E.useState(!1);return Nfe(()=>a(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:h.jsx(P1,{asChild:!0,children:h.jsx(n_,{...n,children:s&&h.jsxs(h.Fragment,{children:[i.label," ",r]})})})},$fe="ToastTitle",v7=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return h.jsx(Ft.div,{...n,ref:t})});v7.displayName=$fe;var Ife="ToastDescription",_7=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return h.jsx(Ft.div,{...n,ref:t})});_7.displayName=Ife;var x7="ToastAction",b7=E.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?h.jsx(T7,{altText:r,asChild:!0,children:h.jsx(mO,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${x7}\`. Expected non-empty \`string\`.`),null)});b7.displayName=x7;var w7="ToastClose",mO=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=jfe(w7,r);return h.jsx(T7,{asChild:!0,children:h.jsx(Ft.button,{type:"button",...n,ref:t,onClick:xt(e.onClick,i.onClose)})})});mO.displayName=w7;var T7=E.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return h.jsx(Ft.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function M7(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Dfe(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...M7(n))}}),t}function L0(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Sb(i,s):i.dispatchEvent(s)}var a4=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return t==="left"||t==="right"?s&&n>r:!s&&i>r};function Nfe(e=()=>{}){const t=Xn(e);wi(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Dfe(e){return e.nodeType===e.ELEMENT_NODE}function Rfe(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function rS(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Lfe=h7,k7=m7,S7=y7,P7=v7,E7=_7,C7=b7,j7=mO;function A7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=A7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function dr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=A7(e))&&(n&&(n+=" "),n+=t);return n}const o4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,l4=dr,i_=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return l4(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(c=>{const d=r==null?void 0:r[c],u=s==null?void 0:s[c];if(d===null)return null;const f=o4(d)||o4(u);return i[c][f]}),o=r&&Object.entries(r).reduce((c,d)=>{let[u,f]=d;return f===void 0||(c[u]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,d)=>{let{class:u,className:f,...p}=d;return Object.entries(p).every(m=>{let[g,x]=m;return Array.isArray(x)?x.includes({...s,...o}[g]):{...s,...o}[g]===x})?[...c,u,f]:c},[]);return l4(e,a,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O7=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>E.createElement("svg",{ref:l,...Bfe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:O7("lucide",i),...o},[...a.map(([c,d])=>E.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(e,t)=>{const r=E.forwardRef(({className:n,...i},s)=>E.createElement(zfe,{ref:s,iconNode:t,className:O7(`lucide-${Ffe(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=jt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=jt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=jt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=jt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=jt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=jt("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=jt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=jt("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=jt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=jt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=jt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=jt("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=jt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=jt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=jt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=jt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=jt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=jt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=jt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=jt("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=jt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=jt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rhe=jt("FileSymlink",[["path",{d:"m10 18 3-3-3-3",key:"18f6ys"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 11V4a2 2 0 0 1 2-2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"50q2rw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=jt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=jt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=jt("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=jt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=jt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=jt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=jt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ohe=jt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=jt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=jt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const che=jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uhe=jt("MonitorSmartphone",[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=jt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=jt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fhe=jt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=jt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=jt("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const phe=jt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=jt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mhe=jt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=jt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=jt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=jt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=jt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=jt("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=jt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=jt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xhe=jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=jt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=jt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wO="-",bhe=e=>{const t=The(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const o=a.split(wO);return o[0]===""&&o.length!==1&&o.shift(),L7(o,t)||whe(a)},getConflictingClassGroupIds:(a,o)=>{const l=r[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},L7=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?L7(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(wO);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},h4=/^\[(.+)\]$/,whe=e=>{if(h4.test(e)){const t=h4.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},The=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return khe(Object.entries(e.classGroups),r).forEach(([s,a])=>{_C(a,n,s,t)}),n},_C=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:p4(t,i);s.classGroupId=r;return}if(typeof i=="function"){if(Mhe(i)){_C(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{_C(a,p4(t,s),r,n)})})},p4=(e,t)=>{let r=e;return t.split(wO).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Mhe=e=>e.isThemeGetter,khe=(e,t)=>t?e.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[t+a,o])):s);return[r,i]}):e,She=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},F7="!",Phe=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],s=t.length,a=o=>{const l=[];let c=0,d=0,u;for(let x=0;x<o.length;x++){let v=o[x];if(c===0){if(v===i&&(n||o.slice(x,x+s)===t)){l.push(o.slice(d,x)),d=x+s;continue}if(v==="/"){u=x;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?o:o.substring(d),p=f.startsWith(F7),m=p?f.substring(1):f,g=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return r?o=>r({className:o,parseClassName:a}):a},Ehe=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Che=e=>({cache:She(e.cacheSize),parseClassName:Phe(e),...bhe(e)}),jhe=/\s+/,Ahe=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(jhe);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:d,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let m=!!p,g=n(m?f.substring(0,p):f);if(!g){if(!m){o=c+(o.length>0?" "+o:o);continue}if(g=n(f),!g){o=c+(o.length>0?" "+o:o);continue}m=!1}const x=Ehe(d).join(":"),v=u?x+F7:x,y=v+g;if(s.includes(y))continue;s.push(y);const w=i(g,m);for(let b=0;b<w.length;++b){const _=w[b];s.push(v+_)}o=c+(o.length>0?" "+o:o)}return o};function Ohe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=B7(t))&&(n&&(n+=" "),n+=r);return n}const B7=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=B7(e[n]))&&(r&&(r+=" "),r+=t);return r};function $he(e,...t){let r,n,i,s=a;function a(l){const c=t.reduce((d,u)=>u(d),e());return r=Che(c),n=r.cache.get,i=r.cache.set,s=o,o(l)}function o(l){const c=n(l);if(c)return c;const d=Ahe(l,r);return i(l,d),d}return function(){return s(Ohe.apply(null,arguments))}}const fn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},z7=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ihe=/^\d+\/\d+$/,Nhe=new Set(["px","full","screen"]),Dhe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rhe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Lhe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Fhe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Bhe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=e=>Fh(e)||Nhe.has(e)||Ihe.test(e),mc=e=>Xp(e,"length",qhe),Fh=e=>!!e&&!Number.isNaN(Number(e)),nS=e=>Xp(e,"number",Fh),ng=e=>!!e&&Number.isInteger(Number(e)),zhe=e=>e.endsWith("%")&&Fh(e.slice(0,-1)),ar=e=>z7.test(e),gc=e=>Dhe.test(e),Vhe=new Set(["length","size","percentage"]),Uhe=e=>Xp(e,Vhe,V7),Whe=e=>Xp(e,"position",V7),Ghe=new Set(["image","url"]),Hhe=e=>Xp(e,Ghe,Yhe),Khe=e=>Xp(e,"",Xhe),ig=()=>!0,Xp=(e,t,r)=>{const n=z7.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},qhe=e=>Rhe.test(e)&&!Lhe.test(e),V7=()=>!1,Xhe=e=>Fhe.test(e),Yhe=e=>Bhe.test(e),Qhe=()=>{const e=fn("colors"),t=fn("spacing"),r=fn("blur"),n=fn("brightness"),i=fn("borderColor"),s=fn("borderRadius"),a=fn("borderSpacing"),o=fn("borderWidth"),l=fn("contrast"),c=fn("grayscale"),d=fn("hueRotate"),u=fn("invert"),f=fn("gap"),p=fn("gradientColorStops"),m=fn("gradientColorStopPositions"),g=fn("inset"),x=fn("margin"),v=fn("opacity"),y=fn("padding"),w=fn("saturate"),b=fn("scale"),_=fn("sepia"),T=fn("skew"),M=fn("space"),k=fn("translate"),j=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",ar,t],I=()=>[ar,t],$=()=>["",fl,mc],F=()=>["auto",Fh,ar],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",ar],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Fh,ar];return{cacheSize:500,separator:":",theme:{colors:[ig],spacing:[fl,mc],blur:["none","",gc,ar],brightness:z(),borderColor:[e],borderRadius:["none","","full",gc,ar],borderSpacing:I(),borderWidth:$(),contrast:z(),grayscale:te(),hueRotate:z(),invert:te(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[zhe,mc],inset:R(),margin:R(),opacity:z(),padding:I(),saturate:z(),scale:z(),sepia:te(),skew:z(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ar]}],container:["container"],columns:[{columns:[gc]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),ar]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ng,ar]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ar]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",ng,ar]}],"grid-cols":[{"grid-cols":[ig]}],"col-start-end":[{col:["auto",{span:["full",ng,ar]},ar]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[ig]}],"row-start-end":[{row:["auto",{span:[ng,ar]},ar]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ar]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ar,t]}],"min-w":[{"min-w":[ar,t,"min","max","fit"]}],"max-w":[{"max-w":[ar,t,"none","full","min","max","fit","prose",{screen:[gc]},gc]}],h:[{h:[ar,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ar,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gc,mc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nS]}],"font-family":[{font:[ig]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ar]}],"line-clamp":[{"line-clamp":["none",Fh,nS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fl,ar]}],"list-image":[{"list-image":["none",ar]}],"list-style-type":[{list:["none","disc","decimal",ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fl,mc]}],"underline-offset":[{"underline-offset":["auto",fl,ar]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),Whe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Uhe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Hhe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[fl,ar]}],"outline-w":[{outline:[fl,mc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[fl,mc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gc,Khe]}],"shadow-color":[{shadow:[ig]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gc,ar]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ar]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",ar]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ng,ar]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ar]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[fl,mc,nS]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Zhe=$he(Qhe);function kt(...e){return Zhe(dr(e))}const Jhe=Lfe,U7=E.forwardRef(({className:e,...t},r)=>h.jsx(k7,{ref:r,className:kt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));U7.displayName=k7.displayName;const epe=i_("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),W7=E.forwardRef(({className:e,variant:t,...r},n)=>h.jsx(S7,{ref:n,className:kt(epe({variant:t}),e),...r}));W7.displayName=S7.displayName;const tpe=E.forwardRef(({className:e,...t},r)=>h.jsx(C7,{ref:r,className:kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));tpe.displayName=C7.displayName;const G7=E.forwardRef(({className:e,...t},r)=>h.jsx(j7,{ref:r,className:kt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:h.jsx(xO,{className:"h-4 w-4"})}));G7.displayName=j7.displayName;const H7=E.forwardRef(({className:e,...t},r)=>h.jsx(P7,{ref:r,className:kt("text-sm font-semibold",e),...t}));H7.displayName=P7.displayName;const K7=E.forwardRef(({className:e,...t},r)=>h.jsx(E7,{ref:r,className:kt("text-sm opacity-90",e),...t}));K7.displayName=E7.displayName;function rpe(){const{toasts:e}=So();return h.jsxs(Jhe,{children:[e.map(function({id:t,title:r,description:n,action:i,...s}){return h.jsxs(W7,{...s,children:[h.jsxs("div",{className:"grid gap-1",children:[r&&h.jsx(H7,{children:r}),n&&h.jsx(K7,{children:n})]}),i,h.jsx(G7,{})]},t)}),h.jsx(U7,{})]})}var m4=["light","dark"],npe="(prefers-color-scheme: dark)",ipe=E.createContext(void 0),spe={setTheme:e=>{},themes:[]},ape=()=>{var e;return(e=E.useContext(ipe))!=null?e:spe};E.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,attrs:o,nonce:l})=>{let c=s==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,u=i?m4.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,x=!0)=>{let v=a?a[m]:m,y=g?m+"|| ''":`'${v}'`,w="";return i&&x&&!g&&m4.includes(m)&&(w+=`d.style.colorScheme = '${m}';`),r==="class"?g||v?w+=`c.add(${y})`:w+="null":v&&(w+=`d[s](n,${y})`),w},p=e?`!function(){${d}${f(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${npe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${c?"":"else{"+f(s,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${u}}catch(t){}}();`;return E.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var ope=e=>{switch(e){case"success":return upe;case"info":return fpe;case"warning":return dpe;case"error":return hpe;default:return null}},lpe=Array(12).fill(0),cpe=({visible:e})=>se.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},se.createElement("div",{className:"sonner-spinner"},lpe.map((t,r)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),upe=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dpe=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fpe=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hpe=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ppe=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},xC=1,mpe=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,s=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:xC++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...i,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),s=n!==void 0;return i.then(async a=>{if(ype(a)&&!a.ok){s=!1;let o=typeof r.error=="function"?await r.error(`HTTP error! status: ${a.status}`):r.error,l=typeof r.description=="function"?await r.description(`HTTP error! status: ${a.status}`):r.description;this.create({id:n,type:"error",message:o,description:l})}else if(r.success!==void 0){s=!1;let o=typeof r.success=="function"?await r.success(a):r.success,l=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(r.error!==void 0){s=!1;let o=typeof r.error=="function"?await r.error(a):r.error,l=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=r.finally)==null||a.call(r)}),n},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||xC++;return this.create({jsx:t(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},Xs=new mpe,gpe=(e,t)=>{let r=(t==null?void 0:t.id)||xC++;return Xs.addToast({title:e,...t,id:r}),r},ype=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",vpe=gpe,_pe=()=>Xs.toasts;Object.assign(vpe,{success:Xs.success,info:Xs.info,warning:Xs.warning,error:Xs.error,custom:Xs.custom,message:Xs.message,promise:Xs.promise,dismiss:Xs.dismiss,loading:Xs.loading},{getHistory:_pe});function xpe(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}xpe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function F0(e){return e.label!==void 0}var bpe=3,wpe="32px",Tpe=4e3,Mpe=356,kpe=14,Spe=20,Ppe=200;function Epe(...e){return e.filter(Boolean).join(" ")}var Cpe=e=>{var t,r,n,i,s,a,o,l,c,d;let{invert:u,toast:f,unstyled:p,interacting:m,setHeights:g,visibleToasts:x,heights:v,index:y,toasts:w,expanded:b,removeToast:_,defaultRichColors:T,closeButton:M,style:k,cancelButtonStyle:j,actionButtonStyle:A,className:R="",descriptionClassName:I="",duration:$,position:F,gap:V,loadingIcon:G,expandByDefault:H,classNames:B,icons:te,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:z,cn:D}=e,[K,oe]=se.useState(!1),[_e,de]=se.useState(!1),[ve,Ie]=se.useState(!1),[Se,ge]=se.useState(!1),[J,ee]=se.useState(0),[Z,we]=se.useState(0),$e=se.useRef(null),Ce=se.useRef(null),Pe=y===0,Q=y+1<=x,re=f.type,fe=f.dismissible!==!1,ke=f.className||"",je=f.descriptionClassName||"",me=se.useMemo(()=>v.findIndex(gt=>gt.toastId===f.id)||0,[v,f.id]),Fe=se.useMemo(()=>{var gt;return(gt=f.closeButton)!=null?gt:M},[f.closeButton,M]),ze=se.useMemo(()=>f.duration||$||Tpe,[f.duration,$]),Je=se.useRef(0),He=se.useRef(0),We=se.useRef(0),nt=se.useRef(null),[ct,Ht]=F.split("-"),Ut=se.useMemo(()=>v.reduce((gt,er,wr)=>wr>=me?gt:gt+er.height,0),[v,me]),$t=ppe(),yn=f.invert||u,Zr=re==="loading";He.current=se.useMemo(()=>me*V+Ut,[me,Ut]),se.useEffect(()=>{oe(!0)},[]),se.useLayoutEffect(()=>{if(!K)return;let gt=Ce.current,er=gt.style.height;gt.style.height="auto";let wr=gt.getBoundingClientRect().height;gt.style.height=er,we(wr),g(ai=>ai.find(oi=>oi.toastId===f.id)?ai.map(oi=>oi.toastId===f.id?{...oi,height:wr}:oi):[{toastId:f.id,height:wr,position:f.position},...ai])},[K,f.title,f.description,g,f.id]);let ln=se.useCallback(()=>{de(!0),ee(He.current),g(gt=>gt.filter(er=>er.toastId!==f.id)),setTimeout(()=>{_(f)},Ppe)},[f,_,g,He]);se.useEffect(()=>{if(f.promise&&re==="loading"||f.duration===1/0||f.type==="loading")return;let gt,er=ze;return b||m||z&&$t?(()=>{if(We.current<Je.current){let wr=new Date().getTime()-Je.current;er=er-wr}We.current=new Date().getTime()})():er!==1/0&&(Je.current=new Date().getTime(),gt=setTimeout(()=>{var wr;(wr=f.onAutoClose)==null||wr.call(f,f),ln()},er)),()=>clearTimeout(gt)},[b,m,H,f,ze,ln,f.promise,re,z,$t]),se.useEffect(()=>{let gt=Ce.current;if(gt){let er=gt.getBoundingClientRect().height;return we(er),g(wr=>[{toastId:f.id,height:er,position:f.position},...wr]),()=>g(wr=>wr.filter(ai=>ai.toastId!==f.id))}},[g,f.id]),se.useEffect(()=>{f.delete&&ln()},[ln,f.delete]);function Es(){return te!=null&&te.loading?se.createElement("div",{className:"sonner-loader","data-visible":re==="loading"},te.loading):G?se.createElement("div",{className:"sonner-loader","data-visible":re==="loading"},G):se.createElement(cpe,{visible:re==="loading"})}return se.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ce,className:D(R,ke,B==null?void 0:B.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[re],(r=f==null?void 0:f.classNames)==null?void 0:r[re]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:T,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":K,"data-promise":!!f.promise,"data-removed":_e,"data-visible":Q,"data-y-position":ct,"data-x-position":Ht,"data-index":y,"data-front":Pe,"data-swiping":ve,"data-dismissible":fe,"data-type":re,"data-invert":yn,"data-swipe-out":Se,"data-expanded":!!(b||H&&K),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${_e?J:He.current}px`,"--initial-height":H?"auto":`${Z}px`,...k,...f.style},onPointerDown:gt=>{Zr||!fe||($e.current=new Date,ee(He.current),gt.target.setPointerCapture(gt.pointerId),gt.target.tagName!=="BUTTON"&&(Ie(!0),nt.current={x:gt.clientX,y:gt.clientY}))},onPointerUp:()=>{var gt,er,wr,ai;if(Se||!fe)return;nt.current=null;let oi=Number(((gt=Ce.current)==null?void 0:gt.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ws=new Date().getTime()-((er=$e.current)==null?void 0:er.getTime()),Pt=Math.abs(oi)/Ws;if(Math.abs(oi)>=Spe||Pt>.11){ee(He.current),(wr=f.onDismiss)==null||wr.call(f,f),ln(),ge(!0);return}(ai=Ce.current)==null||ai.style.setProperty("--swipe-amount","0px"),Ie(!1)},onPointerMove:gt=>{var er;if(!nt.current||!fe)return;let wr=gt.clientY-nt.current.y,ai=gt.clientX-nt.current.x,oi=(ct==="top"?Math.min:Math.max)(0,wr),Ws=gt.pointerType==="touch"?10:2;Math.abs(oi)>Ws?(er=Ce.current)==null||er.style.setProperty("--swipe-amount",`${wr}px`):Math.abs(ai)>Ws&&(nt.current=null)}},Fe&&!f.jsx?se.createElement("button",{"aria-label":ae,"data-disabled":Zr,"data-close-button":!0,onClick:Zr||!fe?()=>{}:()=>{var gt;ln(),(gt=f.onDismiss)==null||gt.call(f,f)},className:D(B==null?void 0:B.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||se.isValidElement(f.title)?f.jsx||f.title:se.createElement(se.Fragment,null,re||f.icon||f.promise?se.createElement("div",{"data-icon":"",className:D(B==null?void 0:B.icon,(s=f==null?void 0:f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Es():null,f.type!=="loading"?f.icon||(te==null?void 0:te[re])||ope(re):null):null,se.createElement("div",{"data-content":"",className:D(B==null?void 0:B.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},se.createElement("div",{"data-title":"",className:D(B==null?void 0:B.title,(o=f==null?void 0:f.classNames)==null?void 0:o.title)},f.title),f.description?se.createElement("div",{"data-description":"",className:D(I,je,B==null?void 0:B.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),se.isValidElement(f.cancel)?f.cancel:f.cancel&&F0(f.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||j,onClick:gt=>{var er,wr;F0(f.cancel)&&fe&&((wr=(er=f.cancel).onClick)==null||wr.call(er,gt),ln())},className:D(B==null?void 0:B.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,se.isValidElement(f.action)?f.action:f.action&&F0(f.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||A,onClick:gt=>{var er,wr;F0(f.action)&&(gt.defaultPrevented||((wr=(er=f.action).onClick)==null||wr.call(er,gt),ln()))},className:D(B==null?void 0:B.actionButton,(d=f==null?void 0:f.classNames)==null?void 0:d.actionButton)},f.action.label):null))};function g4(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var jpe=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:s,className:a,offset:o,theme:l="light",richColors:c,duration:d,style:u,visibleToasts:f=bpe,toastOptions:p,dir:m=g4(),gap:g=kpe,loadingIcon:x,icons:v,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w,cn:b=Epe}=e,[_,T]=se.useState([]),M=se.useMemo(()=>Array.from(new Set([r].concat(_.filter(z=>z.position).map(z=>z.position)))),[_,r]),[k,j]=se.useState([]),[A,R]=se.useState(!1),[I,$]=se.useState(!1),[F,V]=se.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=se.useRef(null),H=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=se.useRef(null),te=se.useRef(!1),ae=se.useCallback(z=>{var D;(D=_.find(K=>K.id===z.id))!=null&&D.delete||Xs.dismiss(z.id),T(K=>K.filter(({id:oe})=>oe!==z.id))},[_]);return se.useEffect(()=>Xs.subscribe(z=>{if(z.dismiss){T(D=>D.map(K=>K.id===z.id?{...K,delete:!0}:K));return}setTimeout(()=>{uO.flushSync(()=>{T(D=>{let K=D.findIndex(oe=>oe.id===z.id);return K!==-1?[...D.slice(0,K),{...D[K],...z},...D.slice(K+1)]:[z,...D]})})})}),[]),se.useEffect(()=>{if(l!=="system"){V(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:z})=>{V(z?"dark":"light")})},[l]),se.useEffect(()=>{_.length<=1&&R(!1)},[_]),se.useEffect(()=>{let z=D=>{var K,oe;n.every(_e=>D[_e]||D.code===_e)&&(R(!0),(K=G.current)==null||K.focus()),D.code==="Escape"&&(document.activeElement===G.current||(oe=G.current)!=null&&oe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[n]),se.useEffect(()=>{if(G.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,te.current=!1)}},[G.current]),_.length?se.createElement("section",{"aria-label":`${y} ${H}`,tabIndex:-1},M.map((z,D)=>{var K;let[oe,_e]=z.split("-");return se.createElement("ol",{key:z,dir:m==="auto"?g4():m,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":oe,"data-x-position":_e,style:{"--front-toast-height":`${((K=k[0])==null?void 0:K.height)||0}px`,"--offset":typeof o=="number"?`${o}px`:o||wpe,"--width":`${Mpe}px`,"--gap":`${g}px`,...u},onBlur:de=>{te.current&&!de.currentTarget.contains(de.relatedTarget)&&(te.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||te.current||(te.current=!0,B.current=de.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{I||R(!1)},onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},_.filter(de=>!de.position&&D===0||de.position===z).map((de,ve)=>{var Ie,Se;return se.createElement(Cpe,{key:de.id,icons:v,index:ve,toast:de,defaultRichColors:c,duration:(Ie=p==null?void 0:p.duration)!=null?Ie:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:f,closeButton:(Se=p==null?void 0:p.closeButton)!=null?Se:s,interacting:I,position:z,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:ae,toasts:_.filter(ge=>ge.position==de.position),heights:k.filter(ge=>ge.position==de.position),setHeights:j,expandByDefault:i,gap:g,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:w,cn:b})}))})):null};const Ape=({...e})=>{const{theme:t="system"}=ape();return h.jsx(jpe,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Ope=YK.useId||(()=>{}),$pe=0;function Xo(e){const[t,r]=E.useState(Ope());return wi(()=>{e||r(n=>n??String($pe++))},[e]),e||(t?`radix-${t}`:"")}const Ipe=["top","right","bottom","left"],cu=Math.min,Zs=Math.max,Ab=Math.round,B0=Math.floor,uu=e=>({x:e,y:e}),Npe={left:"right",right:"left",bottom:"top",top:"bottom"},Dpe={start:"end",end:"start"};function bC(e,t,r){return Zs(e,cu(t,r))}function Wl(e,t){return typeof e=="function"?e(t):e}function Gl(e){return e.split("-")[0]}function Yp(e){return e.split("-")[1]}function TO(e){return e==="x"?"y":"x"}function MO(e){return e==="y"?"height":"width"}function du(e){return["top","bottom"].includes(Gl(e))?"y":"x"}function kO(e){return TO(du(e))}function Rpe(e,t,r){r===void 0&&(r=!1);const n=Yp(e),i=kO(e),s=MO(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Ob(a)),[a,Ob(a)]}function Lpe(e){const t=Ob(e);return[wC(e),t,wC(t)]}function wC(e){return e.replace(/start|end/g,t=>Dpe[t])}function Fpe(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:a;default:return[]}}function Bpe(e,t,r,n){const i=Yp(e);let s=Fpe(Gl(e),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(wC)))),s}function Ob(e){return e.replace(/left|right|bottom|top/g,t=>Npe[t])}function zpe(e){return{top:0,right:0,bottom:0,left:0,...e}}function q7(e){return typeof e!="number"?zpe(e):{top:e,right:e,bottom:e,left:e}}function $b(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function y4(e,t,r){let{reference:n,floating:i}=e;const s=du(t),a=kO(t),o=MO(a),l=Gl(t),c=s==="y",d=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,f=n[o]/2-i[o]/2;let p;switch(l){case"top":p={x:d,y:n.y-i.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:u};break;case"left":p={x:n.x-i.width,y:u};break;default:p={x:n.x,y:n.y}}switch(Yp(t)){case"start":p[a]-=f*(r&&c?-1:1);break;case"end":p[a]+=f*(r&&c?-1:1);break}return p}const Vpe=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=y4(c,n,l),f=n,p={},m=0;for(let g=0;g<o.length;g++){const{name:x,fn:v}=o[g],{x:y,y:w,data:b,reset:_}=await v({x:d,y:u,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});d=y??d,u=w??u,p={...p,[x]:{...p[x],...b}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:d,y:u}=y4(c,f,l)),g=-1)}return{x:d,y:u,placement:f,strategy:i,middlewareData:p}};async function Dy(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:p=0}=Wl(t,e),m=q7(p),x=o[f?u==="floating"?"reference":"floating":u],v=$b(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(x)))==null||r?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),y=u==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=$b(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-_.top+m.top)/b.y,bottom:(_.bottom-v.bottom+m.bottom)/b.y,left:(v.left-_.left+m.left)/b.x,right:(_.right-v.right+m.right)/b.x}}const Upe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Wl(e,t)||{};if(c==null)return{};const u=q7(d),f={x:r,y:n},p=kO(i),m=MO(p),g=await a.getDimensions(c),x=p==="y",v=x?"top":"left",y=x?"bottom":"right",w=x?"clientHeight":"clientWidth",b=s.reference[m]+s.reference[p]-f[p]-s.floating[m],_=f[p]-s.reference[p],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let M=T?T[w]:0;(!M||!await(a.isElement==null?void 0:a.isElement(T)))&&(M=o.floating[w]||s.floating[m]);const k=b/2-_/2,j=M/2-g[m]/2-1,A=cu(u[v],j),R=cu(u[y],j),I=A,$=M-g[m]-R,F=M/2-g[m]/2+k,V=bC(I,F,$),G=!l.arrow&&Yp(i)!=null&&F!==V&&s.reference[m]/2-(F<I?A:R)-g[m]/2<0,H=G?F<I?F-I:F-$:0;return{[p]:f[p]+H,data:{[p]:V,centerOffset:F-V-H,...G&&{alignmentOffset:H}},reset:G}}}),Wpe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=Wl(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const v=Gl(i),y=du(o),w=Gl(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(w||!g?[Ob(o)]:Lpe(o)),T=m!=="none";!f&&T&&_.push(...Bpe(o,g,m,b));const M=[o,..._],k=await Dy(t,x),j=[];let A=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&j.push(k[v]),u){const F=Rpe(i,a,b);j.push(k[F[0]],k[F[1]])}if(A=[...A,{placement:i,overflows:j}],!j.every(F=>F<=0)){var R,I;const F=(((R=s.flip)==null?void 0:R.index)||0)+1,V=M[F];if(V)return{data:{index:F,overflows:A},reset:{placement:V}};let G=(I=A.filter(H=>H.overflows[0]<=0).sort((H,B)=>H.overflows[1]-B.overflows[1])[0])==null?void 0:I.placement;if(!G)switch(p){case"bestFit":{var $;const H=($=A.filter(B=>{if(T){const te=du(B.placement);return te===y||te==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(te=>te>0).reduce((te,ae)=>te+ae,0)]).sort((B,te)=>B[1]-te[1])[0])==null?void 0:$[0];H&&(G=H);break}case"initialPlacement":G=o;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function v4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _4(e){return Ipe.some(t=>e[t]>=0)}const Gpe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Wl(e,t);switch(n){case"referenceHidden":{const s=await Dy(t,{...i,elementContext:"reference"}),a=v4(s,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:_4(a)}}}case"escaped":{const s=await Dy(t,{...i,altBoundary:!0}),a=v4(s,r.floating);return{data:{escapedOffsets:a,escaped:_4(a)}}}default:return{}}}}};async function Hpe(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Gl(r),o=Yp(r),l=du(r)==="y",c=["left","top"].includes(a)?-1:1,d=s&&l?-1:1,u=Wl(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const Kpe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await Hpe(t,e);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},qpe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:x=>{let{x:v,y}=x;return{x:v,y}}},...l}=Wl(e,t),c={x:r,y:n},d=await Dy(t,l),u=du(Gl(i)),f=TO(u);let p=c[f],m=c[u];if(s){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=p+d[x],w=p-d[v];p=bC(y,p,w)}if(a){const x=u==="y"?"top":"left",v=u==="y"?"bottom":"right",y=m+d[x],w=m-d[v];m=bC(y,m,w)}const g=o.fn({...t,[f]:p,[u]:m});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:s,[u]:a}}}}}},Xpe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Wl(e,t),d={x:r,y:n},u=du(i),f=TO(u);let p=d[f],m=d[u];const g=Wl(o,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",b=s.reference[f]-s.floating[w]+x.mainAxis,_=s.reference[f]+s.reference[w]-x.mainAxis;p<b?p=b:p>_&&(p=_)}if(c){var v,y;const w=f==="y"?"width":"height",b=["top","left"].includes(Gl(i)),_=s.reference[u]-s.floating[w]+(b&&((v=a.offset)==null?void 0:v[u])||0)+(b?0:x.crossAxis),T=s.reference[u]+s.reference[w]+(b?0:((y=a.offset)==null?void 0:y[u])||0)-(b?x.crossAxis:0);m<_?m=_:m>T&&(m=T)}return{[f]:p,[u]:m}}}},Ype=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Wl(e,t),d=await Dy(t,c),u=Gl(i),f=Yp(i),p=du(i)==="y",{width:m,height:g}=s.floating;let x,v;u==="top"||u==="bottom"?(x=u,v=f===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=u,x=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,w=m-d.left-d.right,b=cu(g-d[x],y),_=cu(m-d[v],w),T=!t.middlewareData.shift;let M=b,k=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(M=y),T&&!f){const A=Zs(d.left,0),R=Zs(d.right,0),I=Zs(d.top,0),$=Zs(d.bottom,0);p?k=m-2*(A!==0||R!==0?A+R:Zs(d.left,d.right)):M=g-2*(I!==0||$!==0?I+$:Zs(d.top,d.bottom))}await l({...t,availableWidth:k,availableHeight:M});const j=await a.getDimensions(o.floating);return m!==j.width||g!==j.height?{reset:{rects:!0}}:{}}}};function j1(){return typeof window<"u"}function Qp(e){return X7(e)?(e.nodeName||"").toLowerCase():"#document"}function sa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sl(e){var t;return(t=(X7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function X7(e){return j1()?e instanceof Node||e instanceof sa(e).Node:!1}function wo(e){return j1()?e instanceof Element||e instanceof sa(e).Element:!1}function tl(e){return j1()?e instanceof HTMLElement||e instanceof sa(e).HTMLElement:!1}function x4(e){return!j1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof sa(e).ShadowRoot}function s_(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=To(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function Qpe(e){return["table","td","th"].includes(Qp(e))}function A1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function SO(e){const t=PO(),r=wo(e)?To(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Zpe(e){let t=fu(e);for(;tl(t)&&!cp(t);){if(SO(t))return t;if(A1(t))return null;t=fu(t)}return null}function PO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cp(e){return["html","body","#document"].includes(Qp(e))}function To(e){return sa(e).getComputedStyle(e)}function O1(e){return wo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fu(e){if(Qp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||x4(e)&&e.host||sl(e);return x4(t)?t.host:t}function Y7(e){const t=fu(e);return cp(t)?e.ownerDocument?e.ownerDocument.body:e.body:tl(t)&&s_(t)?t:Y7(t)}function Ry(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Y7(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),a=sa(i);if(s){const o=TC(a);return t.concat(a,a.visualViewport||[],s_(i)?i:[],o&&r?Ry(o):[])}return t.concat(i,Ry(i,[],r))}function TC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Q7(e){const t=To(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=tl(e),s=i?e.offsetWidth:r,a=i?e.offsetHeight:n,o=Ab(r)!==s||Ab(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function EO(e){return wo(e)?e:e.contextElement}function Bh(e){const t=EO(e);if(!tl(t))return uu(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=Q7(t);let a=(s?Ab(r.width):r.width)/n,o=(s?Ab(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Jpe=uu(0);function Z7(e){const t=sa(e);return!PO()||!t.visualViewport?Jpe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eme(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==sa(e)?!1:t}function Xd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=EO(e);let a=uu(1);t&&(n?wo(n)&&(a=Bh(n)):a=Bh(e));const o=eme(s,r,n)?Z7(s):uu(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,d=i.width/a.x,u=i.height/a.y;if(s){const f=sa(s),p=n&&wo(n)?sa(n):n;let m=f,g=TC(m);for(;g&&n&&p!==m;){const x=Bh(g),v=g.getBoundingClientRect(),y=To(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*x.x,b=v.top+(g.clientTop+parseFloat(y.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,u*=x.y,l+=w,c+=b,m=sa(g),g=TC(m)}}return $b({width:d,height:u,x:l,y:c})}function tme(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",a=sl(n),o=t?A1(t.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=uu(1);const d=uu(0),u=tl(n);if((u||!u&&!s)&&((Qp(n)!=="body"||s_(a))&&(l=O1(n)),tl(n))){const f=Xd(n);c=Bh(n),d.x=f.x+n.clientLeft,d.y=f.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x,y:r.y*c.y-l.scrollTop*c.y+d.y}}function rme(e){return Array.from(e.getClientRects())}function MC(e,t){const r=O1(e).scrollLeft;return t?t.left+r:Xd(sl(e)).left+r}function nme(e){const t=sl(e),r=O1(e),n=e.ownerDocument.body,i=Zs(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Zs(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+MC(e);const o=-r.scrollTop;return To(n).direction==="rtl"&&(a+=Zs(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function ime(e,t){const r=sa(e),n=sl(e),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=PO();(!c||c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function sme(e,t){const r=Xd(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=tl(e)?Bh(e):uu(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function b4(e,t,r){let n;if(t==="viewport")n=ime(e,r);else if(t==="document")n=nme(sl(e));else if(wo(t))n=sme(t,r);else{const i=Z7(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return $b(n)}function J7(e,t){const r=fu(e);return r===t||!wo(r)||cp(r)?!1:To(r).position==="fixed"||J7(r,t)}function ame(e,t){const r=t.get(e);if(r)return r;let n=Ry(e,[],!1).filter(o=>wo(o)&&Qp(o)!=="body"),i=null;const s=To(e).position==="fixed";let a=s?fu(e):e;for(;wo(a)&&!cp(a);){const o=To(a),l=SO(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||s_(a)&&!l&&J7(e,a))?n=n.filter(d=>d!==a):i=o,a=fu(a)}return t.set(e,n),n}function ome(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?A1(t)?[]:ame(t,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,d)=>{const u=b4(t,d,i);return c.top=Zs(u.top,c.top),c.right=cu(u.right,c.right),c.bottom=cu(u.bottom,c.bottom),c.left=Zs(u.left,c.left),c},b4(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function lme(e){const{width:t,height:r}=Q7(e);return{width:t,height:r}}function cme(e,t,r){const n=tl(t),i=sl(t),s=r==="fixed",a=Xd(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=uu(0);if(n||!n&&!s)if((Qp(t)!=="body"||s_(i))&&(o=O1(t)),n){const p=Xd(t,!0,s,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&(l.x=MC(i));let c=0,d=0;if(i&&!n&&!s){const p=i.getBoundingClientRect();d=p.top+o.scrollTop,c=p.left+o.scrollLeft-MC(i,p)}const u=a.left+o.scrollLeft-l.x-c,f=a.top+o.scrollTop-l.y-d;return{x:u,y:f,width:a.width,height:a.height}}function iS(e){return To(e).position==="static"}function w4(e,t){if(!tl(e)||To(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return sl(e)===r&&(r=r.ownerDocument.body),r}function eX(e,t){const r=sa(e);if(A1(e))return r;if(!tl(e)){let i=fu(e);for(;i&&!cp(i);){if(wo(i)&&!iS(i))return i;i=fu(i)}return r}let n=w4(e,t);for(;n&&Qpe(n)&&iS(n);)n=w4(n,t);return n&&cp(n)&&iS(n)&&!SO(n)?r:n||Zpe(e)||r}const ume=async function(e){const t=this.getOffsetParent||eX,r=this.getDimensions,n=await r(e.floating);return{reference:cme(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function dme(e){return To(e).direction==="rtl"}const fme={convertOffsetParentRelativeRectToViewportRelativeRect:tme,getDocumentElement:sl,getClippingRect:ome,getOffsetParent:eX,getElementRects:ume,getClientRects:rme,getDimensions:lme,getScale:Bh,isElement:wo,isRTL:dme};function hme(e,t){let r=null,n;const i=sl(e);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:u,height:f}=e.getBoundingClientRect();if(o||t(),!u||!f)return;const p=B0(d),m=B0(i.clientWidth-(c+u)),g=B0(i.clientHeight-(d+f)),x=B0(c),y={rootMargin:-p+"px "+-m+"px "+-g+"px "+-x+"px",threshold:Zs(0,cu(1,l))||1};let w=!0;function b(_){const T=_[0].intersectionRatio;if(T!==l){if(!w)return a();T?a(!1,T):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(e)}return a(!0),s}function pme(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=EO(e),d=i||s?[...c?Ry(c):[],...Ry(t)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),s&&v.addEventListener("resize",r)});const u=c&&o?hme(c,r):null;let f=-1,p=null;a&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m,g=l?Xd(e):null;l&&x();function x(){const v=Xd(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,m=requestAnimationFrame(x)}return r(),()=>{var v;d.forEach(y=>{i&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),u==null||u(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const mme=Kpe,gme=qpe,yme=Wpe,vme=Ype,_me=Gpe,T4=Upe,xme=Xpe,bme=(e,t,r)=>{const n=new Map,i={platform:fme,...r},s={...i.platform,_c:n};return Vpe(e,t,{...i,platform:s})};var Ux=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Ib(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Ib(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Ib(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function tX(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function M4(e,t){const r=tX(e);return Math.round(t*r)/r}function sS(e){const t=E.useRef(e);return Ux(()=>{t.current=e}),t}function wme(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=E.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=E.useState(n);Ib(f,n)||p(n);const[m,g]=E.useState(null),[x,v]=E.useState(null),y=E.useCallback(B=>{B!==T.current&&(T.current=B,g(B))},[]),w=E.useCallback(B=>{B!==M.current&&(M.current=B,v(B))},[]),b=s||m,_=a||x,T=E.useRef(null),M=E.useRef(null),k=E.useRef(d),j=l!=null,A=sS(l),R=sS(i),I=sS(c),$=E.useCallback(()=>{if(!T.current||!M.current)return;const B={placement:t,strategy:r,middleware:f};R.current&&(B.platform=R.current),bme(T.current,M.current,B).then(te=>{const ae={...te,isPositioned:I.current!==!1};F.current&&!Ib(k.current,ae)&&(k.current=ae,uf.flushSync(()=>{u(ae)}))})},[f,t,r,R,I]);Ux(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,u(B=>({...B,isPositioned:!1})))},[c]);const F=E.useRef(!1);Ux(()=>(F.current=!0,()=>{F.current=!1}),[]),Ux(()=>{if(b&&(T.current=b),_&&(M.current=_),b&&_){if(A.current)return A.current(b,_,$);$()}},[b,_,$,A,j]);const V=E.useMemo(()=>({reference:T,floating:M,setReference:y,setFloating:w}),[y,w]),G=E.useMemo(()=>({reference:b,floating:_}),[b,_]),H=E.useMemo(()=>{const B={position:r,left:0,top:0};if(!G.floating)return B;const te=M4(G.floating,d.x),ae=M4(G.floating,d.y);return o?{...B,transform:"translate("+te+"px, "+ae+"px)",...tX(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:ae}},[r,o,G.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:$,refs:V,elements:G,floatingStyles:H}),[d,$,V,G,H])}const Tme=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?T4({element:n.current,padding:i}).fn(r):{}:n?T4({element:n,padding:i}).fn(r):{}}}},Mme=(e,t)=>({...mme(e),options:[e,t]}),kme=(e,t)=>({...gme(e),options:[e,t]}),Sme=(e,t)=>({...xme(e),options:[e,t]}),Pme=(e,t)=>({...yme(e),options:[e,t]}),Eme=(e,t)=>({...vme(e),options:[e,t]}),Cme=(e,t)=>({..._me(e),options:[e,t]}),jme=(e,t)=>({...Tme(e),options:[e,t]});var Ame="Arrow",rX=E.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return h.jsx(Ft.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});rX.displayName=Ame;var Ome=rX;function $me(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(u){const{scope:f,children:p,...m}=u,g=(f==null?void 0:f[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:x,children:p})}function d(u,f){const p=(f==null?void 0:f[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,Ime(i,...t)]}function Ime(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...o,...u}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function nX(e){const[t,r]=E.useState(void 0);return wi(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;r({width:a,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var CO="Popper",[iX,$1]=$me(CO),[Nme,sX]=iX(CO),aX=e=>{const{__scopePopper:t,children:r}=e,[n,i]=E.useState(null);return h.jsx(Nme,{scope:t,anchor:n,onAnchorChange:i,children:r})};aX.displayName=CO;var oX="PopperAnchor",lX=E.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=sX(oX,r),a=E.useRef(null),o=Or(t,a);return E.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:h.jsx(Ft.div,{...i,ref:o})});lX.displayName=oX;var jO="PopperContent",[Dme,Rme]=iX(jO),cX=E.forwardRef((e,t)=>{var ve,Ie,Se,ge,J,ee;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=e,x=sX(jO,r),[v,y]=E.useState(null),w=Or(t,Z=>y(Z)),[b,_]=E.useState(null),T=nX(b),M=(T==null?void 0:T.width)??0,k=(T==null?void 0:T.height)??0,j=n+(s!=="center"?"-"+s:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(c)?c:[c],I=R.length>0,$={padding:A,boundary:R.filter(Fme),altBoundary:I},{refs:F,floatingStyles:V,placement:G,isPositioned:H,middlewareData:B}=wme({strategy:"fixed",placement:j,whileElementsMounted:(...Z)=>pme(...Z,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[Mme({mainAxis:i+k,alignmentAxis:a}),l&&kme({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?Sme():void 0,...$}),l&&Pme({...$}),Eme({...$,apply:({elements:Z,rects:we,availableWidth:$e,availableHeight:Ce})=>{const{width:Pe,height:Q}=we.reference,re=Z.floating.style;re.setProperty("--radix-popper-available-width",`${$e}px`),re.setProperty("--radix-popper-available-height",`${Ce}px`),re.setProperty("--radix-popper-anchor-width",`${Pe}px`),re.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),b&&jme({element:b,padding:o}),Bme({arrowWidth:M,arrowHeight:k}),f&&Cme({strategy:"referenceHidden",...$})]}),[te,ae]=fX(G),z=Xn(m);wi(()=>{H&&(z==null||z())},[H,z]);const D=(ve=B.arrow)==null?void 0:ve.x,K=(Ie=B.arrow)==null?void 0:Ie.y,oe=((Se=B.arrow)==null?void 0:Se.centerOffset)!==0,[_e,de]=E.useState();return wi(()=>{v&&de(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:H?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(ge=B.transformOrigin)==null?void 0:ge.x,(J=B.transformOrigin)==null?void 0:J.y].join(" "),...((ee=B.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(Dme,{scope:r,placedSide:te,onArrowChange:_,arrowX:D,arrowY:K,shouldHideArrow:oe,children:h.jsx(Ft.div,{"data-side":te,"data-align":ae,...g,ref:w,style:{...g.style,animation:H?void 0:"none"}})})})});cX.displayName=jO;var uX="PopperArrow",Lme={top:"bottom",right:"left",bottom:"top",left:"right"},dX=E.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,s=Rme(uX,n),a=Lme[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(Ome,{...i,ref:r,style:{...i.style,display:"block"}})})});dX.displayName=uX;function Fme(e){return e!==null}var Bme=e=>({name:"transformOrigin",options:e,fn(t){var x,v,y;const{placement:r,rects:n,middlewareData:i}=t,a=((x=i.arrow)==null?void 0:x.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,d]=fX(r),u={start:"0%",center:"50%",end:"100%"}[d],f=(((v=i.arrow)==null?void 0:v.x)??0)+o/2,p=(((y=i.arrow)==null?void 0:y.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=a?u:`${f}px`,g=`${-l}px`):c==="top"?(m=a?u:`${f}px`,g=`${n.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=a?u:`${p}px`):c==="left"&&(m=`${n.floating.width+l}px`,g=a?u:`${p}px`),{data:{x:m,y:g}}}});function fX(e){const[t,r="center"]=e.split("-");return[t,r]}var zme=aX,hX=lX,pX=cX,mX=dX,[I1,R7e]=df("Tooltip",[$1]),AO=$1(),gX="TooltipProvider",Vme=700,k4="tooltip.open",[Ume,yX]=I1(gX),vX=e=>{const{__scopeTooltip:t,delayDuration:r=Vme,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,[a,o]=E.useState(!0),l=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),h.jsx(Ume,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:E.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:s})};vX.displayName=gX;var _X="Tooltip",[L7e,N1]=I1(_X),kC="TooltipTrigger",Wme=E.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=N1(kC,r),s=yX(kC,r),a=AO(r),o=E.useRef(null),l=Or(t,o,i.onTriggerChange),c=E.useRef(!1),d=E.useRef(!1),u=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),h.jsx(hX,{asChild:!0,...a,children:h.jsx(Ft.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:xt(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:xt(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:xt(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:xt(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:xt(e.onBlur,i.onClose),onClick:xt(e.onClick,i.onClose)})})});Wme.displayName=kC;var Gme="TooltipPortal",[F7e,Hme]=I1(Gme,{forceMount:void 0}),up="TooltipContent",xX=E.forwardRef((e,t)=>{const r=Hme(up,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,a=N1(up,e.__scopeTooltip);return h.jsx(Ra,{present:n||a.open,children:a.disableHoverableContent?h.jsx(bX,{side:i,...s,ref:t}):h.jsx(Kme,{side:i,...s,ref:t})})}),Kme=E.forwardRef((e,t)=>{const r=N1(up,e.__scopeTooltip),n=yX(up,e.__scopeTooltip),i=E.useRef(null),s=Or(t,i),[a,o]=E.useState(null),{trigger:l,onClose:c}=r,d=i.current,{onPointerInTransitChange:u}=n,f=E.useCallback(()=>{o(null),u(!1)},[u]),p=E.useCallback((m,g)=>{const x=m.currentTarget,v={x:m.clientX,y:m.clientY},y=Qme(v,x.getBoundingClientRect()),w=Zme(v,y),b=Jme(g.getBoundingClientRect()),_=tge([...w,...b]);o(_),u(!0)},[u]);return E.useEffect(()=>()=>f(),[f]),E.useEffect(()=>{if(l&&d){const m=x=>p(x,d),g=x=>p(x,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),E.useEffect(()=>{if(a){const m=g=>{const x=g.target,v={x:g.clientX,y:g.clientY},y=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),w=!ege(v,a);y?f():w&&(f(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,a,c,f]),h.jsx(bX,{...e,ref:s})}),[qme,Xme]=I1(_X,{isInside:!1}),bX=E.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,l=N1(up,r),c=AO(r),{onClose:d}=l;return E.useEffect(()=>(document.addEventListener(k4,d),()=>document.removeEventListener(k4,d)),[d]),E.useEffect(()=>{if(l.trigger){const u=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),h.jsx(qp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:h.jsxs(pX,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(o7,{children:n}),h.jsx(qme,{scope:r,isInside:!0,children:h.jsx(d7,{id:l.contentId,role:"tooltip",children:i||n})})]})})});xX.displayName=up;var wX="TooltipArrow",Yme=E.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=AO(r);return Xme(wX,r).isInside?null:h.jsx(mX,{...i,...n,ref:t})});Yme.displayName=wX;function Qme(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Zme(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Jme(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function ege(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s].x,l=t[s].y,c=t[a].x,d=t[a].y;l>n!=d>n&&r<(c-o)*(n-l)/(d-l)+o&&(i=!i)}return i}function tge(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),rge(t)}function rge(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var nge=vX,TX=xX;const ige=nge,sge=E.forwardRef(({className:e,sideOffset:t=4,...r},n)=>h.jsx(TX,{ref:n,sideOffset:t,className:kt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));sge.displayName=TX.displayName;var D1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},R1=typeof window>"u"||"Deno"in globalThis;function io(){}function age(e,t){return typeof e=="function"?e(t):e}function oge(e){return typeof e=="number"&&e>=0&&e!==1/0}function lge(e,t){return Math.max(e+(t||0)-Date.now(),0)}function S4(e,t){return typeof e=="function"?e(t):e}function cge(e,t){return typeof e=="function"?e(t):e}function P4(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=e;if(a){if(n){if(t.queryHash!==OO(a,t.options))return!1}else if(!Fy(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||s&&!s(t))}function E4(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ly(t.options.mutationKey)!==Ly(s))return!1}else if(!Fy(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function OO(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ly)(e)}function Ly(e){return JSON.stringify(e,(t,r)=>SC(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Fy(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Fy(e[r],t[r])):!1}function MX(e,t){if(e===t)return e;const r=C4(e)&&C4(t);if(r||SC(e)&&SC(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),a=s.length,o=r?[]:{};let l=0;for(let c=0;c<a;c++){const d=r?c:s[c];(!r&&n.includes(d)||r)&&e[d]===void 0&&t[d]===void 0?(o[d]=void 0,l++):(o[d]=MX(e[d],t[d]),o[d]===e[d]&&e[d]!==void 0&&l++)}return i===a&&l===i?e:o}return t}function C4(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function SC(e){if(!j4(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!j4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function j4(e){return Object.prototype.toString.call(e)==="[object Object]"}function uge(e){return new Promise(t=>{setTimeout(t,e)})}function dge(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?MX(e,t):t}function fge(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function hge(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var $O=Symbol();function kX(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$O?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Od,Lc,Kh,OK,pge=(OK=class extends D1{constructor(){super();Rr(this,Od);Rr(this,Lc);Rr(this,Kh);ur(this,Kh,t=>{if(!R1&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ge(this,Lc)||this.setEventListener(Ge(this,Kh))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,Lc))==null||t.call(this),ur(this,Lc,void 0))}setEventListener(t){var r;ur(this,Kh,t),(r=Ge(this,Lc))==null||r.call(this),ur(this,Lc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ge(this,Od)!==t&&(ur(this,Od,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ge(this,Od)=="boolean"?Ge(this,Od):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Od=new WeakMap,Lc=new WeakMap,Kh=new WeakMap,OK),SX=new pge,qh,Fc,Xh,$K,mge=($K=class extends D1{constructor(){super();Rr(this,qh,!0);Rr(this,Fc);Rr(this,Xh);ur(this,Xh,t=>{if(!R1&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ge(this,Fc)||this.setEventListener(Ge(this,Xh))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,Fc))==null||t.call(this),ur(this,Fc,void 0))}setEventListener(t){var r;ur(this,Xh,t),(r=Ge(this,Fc))==null||r.call(this),ur(this,Fc,t(this.setOnline.bind(this)))}setOnline(t){Ge(this,qh)!==t&&(ur(this,qh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ge(this,qh)}},qh=new WeakMap,Fc=new WeakMap,Xh=new WeakMap,$K),Nb=new mge;function gge(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function yge(e){return Math.min(1e3*2**e,3e4)}function PX(e){return(e??"online")==="online"?Nb.isOnline():!0}var EX=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function aS(e){return e instanceof EX}function CX(e){let t=!1,r=0,n=!1,i;const s=gge(),a=g=>{var x;n||(f(new EX(g)),(x=e.abort)==null||x.call(e))},o=()=>{t=!0},l=()=>{t=!1},c=()=>SX.isFocused()&&(e.networkMode==="always"||Nb.isOnline())&&e.canRun(),d=()=>PX(e.networkMode)&&e.canRun(),u=g=>{var x;n||(n=!0,(x=e.onSuccess)==null||x.call(e,g),i==null||i(),s.resolve(g))},f=g=>{var x;n||(n=!0,(x=e.onError)==null||x.call(e,g),i==null||i(),s.reject(g))},p=()=>new Promise(g=>{var x;i=v=>{(n||c())&&g(v)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;i=void 0,n||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(n)return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(u).catch(v=>{var T;if(n)return;const y=e.retry??(R1?0:3),w=e.retryDelay??yge,b=typeof w=="function"?w(r,v):w,_=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!_){f(v);return}r++,(T=e.onFail)==null||T.call(e,r,v),uge(b).then(()=>c()?void 0:p()).then(()=>{t?f(v):m()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),s)}}function vge(){let e=[],t=0,r=o=>{o()},n=o=>{o()},i=o=>setTimeout(o,0);const s=o=>{t?e.push(o):i(()=>{r(o)})},a=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var _s=vge(),$d,IK,jX=(IK=class{constructor(){Rr(this,$d)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),oge(this.gcTime)&&ur(this,$d,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(R1?1/0:5*60*1e3))}clearGcTimeout(){Ge(this,$d)&&(clearTimeout(Ge(this,$d)),ur(this,$d,void 0))}},$d=new WeakMap,IK),Yh,Qh,Ta,Zi,Xv,Id,so,vl,NK,_ge=(NK=class extends jX{constructor(t){super();Rr(this,so);Rr(this,Yh);Rr(this,Qh);Rr(this,Ta);Rr(this,Zi);Rr(this,Xv);Rr(this,Id);ur(this,Id,!1),ur(this,Xv,t.defaultOptions),this.setOptions(t.options),this.observers=[],ur(this,Ta,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ur(this,Yh,bge(this.options)),this.state=t.state??Ge(this,Yh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ge(this,Zi))==null?void 0:t.promise}setOptions(t){this.options={...Ge(this,Xv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ge(this,Ta).remove(this)}setData(t,r){const n=dge(this.state.data,t,this.options);return qi(this,so,vl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){qi(this,so,vl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Ge(this,Zi))==null?void 0:n.promise;return(i=Ge(this,Zi))==null||i.cancel(t),r?r.then(io).catch(io):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ge(this,Yh))}isActive(){return this.observers.some(t=>cge(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$O||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!lge(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ge(this,Zi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ge(this,Zi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ge(this,Ta).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ge(this,Zi)&&(Ge(this,Id)?Ge(this,Zi).cancel({revert:!0}):Ge(this,Zi).cancelRetry()),this.scheduleGc()),Ge(this,Ta).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qi(this,so,vl).call(this,{type:"invalidate"})}fetch(t,r){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ge(this,Zi))return Ge(this,Zi).continueRetry(),Ge(this,Zi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(ur(this,Id,!0),n.signal)})},s=()=>{const u=kX(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return i(f),ur(this,Id,!1),this.options.persister?this.options.persister(u,f,this):u(f)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),ur(this,Qh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&qi(this,so,vl).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const o=u=>{var f,p,m,g;aS(u)&&u.silent||qi(this,so,vl).call(this,{type:"error",error:u}),aS(u)||((p=(f=Ge(this,Ta).config).onError)==null||p.call(f,u,this),(g=(m=Ge(this,Ta).config).onSettled)==null||g.call(m,this.state.data,u,this)),this.scheduleGc()};return ur(this,Zi,CX({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{var f,p,m,g;if(u===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(x){o(x);return}(p=(f=Ge(this,Ta).config).onSuccess)==null||p.call(f,u,this),(g=(m=Ge(this,Ta).config).onSettled)==null||g.call(m,u,this.state.error,this),this.scheduleGc()},onError:o,onFail:(u,f)=>{qi(this,so,vl).call(this,{type:"failed",failureCount:u,error:f})},onPause:()=>{qi(this,so,vl).call(this,{type:"pause"})},onContinue:()=>{qi(this,so,vl).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),Ge(this,Zi).start()}},Yh=new WeakMap,Qh=new WeakMap,Ta=new WeakMap,Zi=new WeakMap,Xv=new WeakMap,Id=new WeakMap,so=new WeakSet,vl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...xge(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return aS(i)&&i.revert&&Ge(this,Qh)?{...Ge(this,Qh),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),_s.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ge(this,Ta).notify({query:this,type:"updated",action:t})})},NK);function xge(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PX(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function bge(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Bo,DK,wge=(DK=class extends D1{constructor(t={}){super();Rr(this,Bo);this.config=t,ur(this,Bo,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??OO(i,r);let a=this.get(s);return a||(a=new _ge({cache:this,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){Ge(this,Bo).has(t.queryHash)||(Ge(this,Bo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ge(this,Bo).get(t.queryHash);r&&(t.destroy(),r===t&&Ge(this,Bo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_s.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ge(this,Bo).get(t)}getAll(){return[...Ge(this,Bo).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>P4(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>P4(t,n)):r}notify(t){_s.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){_s.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_s.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bo=new WeakMap,DK),zo,ps,Nd,Vo,bc,RK,Tge=(RK=class extends jX{constructor(t){super();Rr(this,Vo);Rr(this,zo);Rr(this,ps);Rr(this,Nd);this.mutationId=t.mutationId,ur(this,ps,t.mutationCache),ur(this,zo,[]),this.state=t.state||Mge(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ge(this,zo).includes(t)||(Ge(this,zo).push(t),this.clearGcTimeout(),Ge(this,ps).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ur(this,zo,Ge(this,zo).filter(r=>r!==t)),this.scheduleGc(),Ge(this,ps).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ge(this,zo).length||(this.state.status==="pending"?this.scheduleGc():Ge(this,ps).remove(this))}continue(){var t;return((t=Ge(this,Nd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,a,o,l,c,d,u,f,p,m,g,x,v,y,w,b,_,T,M;ur(this,Nd,CX({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,j)=>{qi(this,Vo,bc).call(this,{type:"failed",failureCount:k,error:j})},onPause:()=>{qi(this,Vo,bc).call(this,{type:"pause"})},onContinue:()=>{qi(this,Vo,bc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ge(this,ps).canRun(this)}));const r=this.state.status==="pending",n=!Ge(this,Nd).canStart();try{if(!r){qi(this,Vo,bc).call(this,{type:"pending",variables:t,isPaused:n}),await((s=(i=Ge(this,ps).config).onMutate)==null?void 0:s.call(i,t,this));const j=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,t));j!==this.state.context&&qi(this,Vo,bc).call(this,{type:"pending",context:j,variables:t,isPaused:n})}const k=await Ge(this,Nd).start();return await((c=(l=Ge(this,ps).config).onSuccess)==null?void 0:c.call(l,k,t,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,k,t,this.state.context)),await((p=(f=Ge(this,ps).config).onSettled)==null?void 0:p.call(f,k,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,k,null,t,this.state.context)),qi(this,Vo,bc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(x=Ge(this,ps).config).onError)==null?void 0:v.call(x,k,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,k,t,this.state.context)),await((_=(b=Ge(this,ps).config).onSettled)==null?void 0:_.call(b,void 0,k,this.state.variables,this.state.context,this)),await((M=(T=this.options).onSettled)==null?void 0:M.call(T,void 0,k,t,this.state.context)),k}finally{qi(this,Vo,bc).call(this,{type:"error",error:k})}}finally{Ge(this,ps).runNext(this)}}},zo=new WeakMap,ps=new WeakMap,Nd=new WeakMap,Vo=new WeakSet,bc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_s.batch(()=>{Ge(this,zo).forEach(n=>{n.onMutationUpdate(t)}),Ge(this,ps).notify({mutation:this,type:"updated",action:t})})},RK);function Mge(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qs,Yv,LK,kge=(LK=class extends D1{constructor(t={}){super();Rr(this,qs);Rr(this,Yv);this.config=t,ur(this,qs,new Map),ur(this,Yv,Date.now())}build(t,r,n){const i=new Tge({mutationCache:this,mutationId:++v0(this,Yv)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){const r=z0(t),n=Ge(this,qs).get(r)??[];n.push(t),Ge(this,qs).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=z0(t);if(Ge(this,qs).has(r)){const i=(n=Ge(this,qs).get(r))==null?void 0:n.filter(s=>s!==t);i&&(i.length===0?Ge(this,qs).delete(r):Ge(this,qs).set(r,i))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=Ge(this,qs).get(z0(t)))==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=Ge(this,qs).get(z0(t)))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){_s.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Ge(this,qs).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>E4(r,n))}findAll(t={}){return this.getAll().filter(r=>E4(t,r))}notify(t){_s.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return _s.batch(()=>Promise.all(t.map(r=>r.continue().catch(io))))}},qs=new WeakMap,Yv=new WeakMap,LK);function z0(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function A4(e){return{onFetch:(t,r)=>{var d,u,f,p,m;const n=t.options,i=(f=(u=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],a=((m=t.state.data)==null?void 0:m.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=kX(t.options,t.fetchOptions),y=async(w,b,_)=>{if(g)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const T={queryKey:t.queryKey,pageParam:b,direction:_?"backward":"forward",meta:t.options.meta};x(T);const M=await v(T),{maxPages:k}=t.options,j=_?hge:fge;return{pages:j(w.pages,M,k),pageParams:j(w.pageParams,b,k)}};if(i&&s.length){const w=i==="backward",b=w?Sge:O4,_={pages:s,pageParams:a},T=b(n,_);o=await y(_,T,w)}else{const w=e??s.length;do{const b=l===0?a[0]??n.initialPageParam:O4(n,o);if(l>0&&b==null)break;o=await y(o,b),l++}while(l<w)}return o};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function O4(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Sge(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Nn,Bc,zc,Zh,Jh,Vc,ep,tp,FK,Pge=(FK=class{constructor(e={}){Rr(this,Nn);Rr(this,Bc);Rr(this,zc);Rr(this,Zh);Rr(this,Jh);Rr(this,Vc);Rr(this,ep);Rr(this,tp);ur(this,Nn,e.queryCache||new wge),ur(this,Bc,e.mutationCache||new kge),ur(this,zc,e.defaultOptions||{}),ur(this,Zh,new Map),ur(this,Jh,new Map),ur(this,Vc,0)}mount(){v0(this,Vc)._++,Ge(this,Vc)===1&&(ur(this,ep,SX.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Nn).onFocus())})),ur(this,tp,Nb.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Nn).onOnline())})))}unmount(){var e,t;v0(this,Vc)._--,Ge(this,Vc)===0&&((e=Ge(this,ep))==null||e.call(this),ur(this,ep,void 0),(t=Ge(this,tp))==null||t.call(this),ur(this,tp,void 0))}isFetching(e){return Ge(this,Nn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ge(this,Bc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ge(this,Nn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=Ge(this,Nn).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(S4(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return Ge(this,Nn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Ge(this,Nn).get(n.queryHash),s=i==null?void 0:i.state.data,a=age(t,s);if(a!==void 0)return Ge(this,Nn).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return _s.batch(()=>Ge(this,Nn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ge(this,Nn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ge(this,Nn);_s.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ge(this,Nn),n={type:"active",...e};return _s.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=_s.batch(()=>Ge(this,Nn).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(io).catch(io)}invalidateQueries(e={},t={}){return _s.batch(()=>{if(Ge(this,Nn).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=_s.batch(()=>Ge(this,Nn).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(io)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(io)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ge(this,Nn).build(this,t);return r.isStaleByTime(S4(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(io).catch(io)}fetchInfiniteQuery(e){return e.behavior=A4(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(io).catch(io)}ensureInfiniteQueryData(e){return e.behavior=A4(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Nb.isOnline()?Ge(this,Bc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ge(this,Nn)}getMutationCache(){return Ge(this,Bc)}getDefaultOptions(){return Ge(this,zc)}setDefaultOptions(e){ur(this,zc,e)}setQueryDefaults(e,t){Ge(this,Zh).set(Ly(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ge(this,Zh).values()];let r={};return t.forEach(n=>{Fy(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){Ge(this,Jh).set(Ly(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ge(this,Jh).values()];let r={};return t.forEach(n=>{Fy(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ge(this,zc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=OO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===$O&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ge(this,zc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ge(this,Nn).clear(),Ge(this,Bc).clear()}},Nn=new WeakMap,Bc=new WeakMap,zc=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Vc=new WeakMap,ep=new WeakMap,tp=new WeakMap,FK),Ege=E.createContext(void 0),Cge=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),h.jsx(Ege.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}var Hc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hc||(Hc={}));const $4="popstate";function jge(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:a,hash:o}=n.location;return PC("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Db(i)}return Oge(t,r,null,e)}function Yn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function AX(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Age(){return Math.random().toString(36).substr(2,8)}function I4(e,t){return{usr:e.state,key:e.key,idx:t}}function PC(e,t,r,n){return r===void 0&&(r=null),By({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zp(t):t,{state:r,key:t&&t.key||n||Age()})}function Db(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Zp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Oge(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=Hc.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(By({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function u(){o=Hc.Pop;let x=d(),v=x==null?null:x-c;c=x,l&&l({action:o,location:g.location,delta:v})}function f(x,v){o=Hc.Push;let y=PC(g.location,x,v);c=d()+1;let w=I4(y,c),b=g.createHref(y);try{a.pushState(w,"",b)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(b)}s&&l&&l({action:o,location:g.location,delta:1})}function p(x,v){o=Hc.Replace;let y=PC(g.location,x,v);c=d();let w=I4(y,c),b=g.createHref(y);a.replaceState(w,"",b),s&&l&&l({action:o,location:g.location,delta:0})}function m(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof x=="string"?x:Db(x);return y=y.replace(/ $/,"%20"),Yn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return o},get location(){return e(i,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener($4,u),l=x,()=>{i.removeEventListener($4,u),l=null}},createHref(x){return t(i,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(x){return a.go(x)}};return g}var N4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(N4||(N4={}));function $ge(e,t,r){return r===void 0&&(r="/"),Ige(e,t,r,!1)}function Ige(e,t,r,n){let i=typeof t=="string"?Zp(t):t,s=IO(i.pathname||"/",r);if(s==null)return null;let a=OX(e);Nge(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Hge(s);o=Wge(a[l],c,n)}return o}function OX(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Yn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ru([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Yn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),OX(s.children,t,d,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:Vge(c,s.index),routesMeta:d})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of $X(s.path))i(s,a,l)}),t}function $X(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=$X(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function Nge(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Uge(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Dge=/^:[\w-]+$/,Rge=3,Lge=2,Fge=1,Bge=10,zge=-2,D4=e=>e==="*";function Vge(e,t){let r=e.split("/"),n=r.length;return r.some(D4)&&(n+=zge),t&&(n+=Lge),r.filter(i=>!D4(i)).reduce((i,s)=>i+(Dge.test(s)?Rge:s===""?Fge:Bge),n)}function Uge(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Wge(e,t,r){let{routesMeta:n}=e,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",u=R4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!u&&c&&r&&!n[n.length-1].route.index&&(u=R4({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:ru([s,u.pathname]),pathnameBase:Yge(ru([s,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(s=ru([s,u.pathnameBase]))}return a}function R4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Gge(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,d,u)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=o[u]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[u];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:e}}function Gge(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),AX(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Hge(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return AX(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function IO(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Kge(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Zp(e):e;return{pathname:r?r.startsWith("/")?r:qge(r,t):t,search:Qge(n),hash:Zge(i)}}function qge(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function oS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xge(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function NO(e,t){let r=Xge(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function DO(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Zp(e):(i=By({},e),Yn(!i.pathname||!i.pathname.includes("?"),oS("?","pathname","search",i)),Yn(!i.pathname||!i.pathname.includes("#"),oS("#","pathname","hash",i)),Yn(!i.search||!i.search.includes("#"),oS("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let u=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),u-=1;i.pathname=f.join("/")}o=u>=0?t[u]:"/"}let l=Kge(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ru=e=>e.join("/").replace(/\/\/+/g,"/"),Yge=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qge=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zge=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jge(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IX=["post","put","patch","delete"];new Set(IX);const eye=["get",...IX];new Set(eye);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}const RO=E.createContext(null),tye=E.createContext(null),Tu=E.createContext(null),L1=E.createContext(null),Jl=E.createContext({outlet:null,matches:[],isDataRoute:!1}),NX=E.createContext(null);function rye(e,t){let{relative:r}=t===void 0?{}:t;Jp()||Yn(!1);let{basename:n,navigator:i}=E.useContext(Tu),{hash:s,pathname:a,search:o}=LX(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:ru([n,a])),i.createHref({pathname:l,search:o,hash:s})}function Jp(){return E.useContext(L1)!=null}function al(){return Jp()||Yn(!1),E.useContext(L1).location}function DX(e){E.useContext(Tu).static||E.useLayoutEffect(e)}function ff(){let{isDataRoute:e}=E.useContext(Jl);return e?mye():nye()}function nye(){Jp()||Yn(!1);let e=E.useContext(RO),{basename:t,future:r,navigator:n}=E.useContext(Tu),{matches:i}=E.useContext(Jl),{pathname:s}=al(),a=JSON.stringify(NO(i,r.v7_relativeSplatPath)),o=E.useRef(!1);return DX(()=>{o.current=!0}),E.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let u=DO(c,JSON.parse(a),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ru([t,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[t,n,a,s,e])}function RX(){let{matches:e}=E.useContext(Jl),t=e[e.length-1];return t?t.params:{}}function LX(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=E.useContext(Tu),{matches:i}=E.useContext(Jl),{pathname:s}=al(),a=JSON.stringify(NO(i,n.v7_relativeSplatPath));return E.useMemo(()=>DO(e,JSON.parse(a),s,r==="path"),[e,a,s,r])}function iye(e,t){return sye(e,t)}function sye(e,t,r,n){Jp()||Yn(!1);let{navigator:i}=E.useContext(Tu),{matches:s}=E.useContext(Jl),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=al(),d;if(t){var u;let x=typeof t=="string"?Zp(t):t;l==="/"||(u=x.pathname)!=null&&u.startsWith(l)||Yn(!1),d=x}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=$ge(e,{pathname:p}),g=uye(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:ru([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:ru([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,r,n);return t&&g?E.createElement(L1.Provider,{value:{location:zy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Hc.Pop}},g):g}function aye(){let e=pye(),t=Jge(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),r?E.createElement("pre",{style:i},r):null,null)}const oye=E.createElement(aye,null);class lye extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?E.createElement(Jl.Provider,{value:this.props.routeContext},E.createElement(NX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cye(e){let{routeContext:t,match:r,children:n}=e,i=E.useContext(RO);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(Jl.Provider,{value:t},n)}function uye(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);d>=0||Yn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let u=a[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:f,errors:p}=r,m=u.route.loader&&f[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,u,f)=>{let p,m=!1,g=null,x=null;r&&(p=o&&u.route.id?o[u.route.id]:void 0,g=u.route.errorElement||oye,l&&(c<0&&f===0?(m=!0,x=null):c===f&&(m=!0,x=u.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),y=()=>{let w;return p?w=g:m?w=x:u.route.Component?w=E.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=d,E.createElement(cye,{match:u,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?E.createElement(lye,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var FX=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(FX||{}),Rb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rb||{});function dye(e){let t=E.useContext(RO);return t||Yn(!1),t}function fye(e){let t=E.useContext(tye);return t||Yn(!1),t}function hye(e){let t=E.useContext(Jl);return t||Yn(!1),t}function BX(e){let t=hye(),r=t.matches[t.matches.length-1];return r.route.id||Yn(!1),r.route.id}function pye(){var e;let t=E.useContext(NX),r=fye(Rb.UseRouteError),n=BX(Rb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function mye(){let{router:e}=dye(FX.UseNavigateStable),t=BX(Rb.UseNavigateStable),r=E.useRef(!1);return DX(()=>{r.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,zy({fromRouteId:t},s)))},[e,t])}function zX(e){let{to:t,replace:r,state:n,relative:i}=e;Jp()||Yn(!1);let{future:s,static:a}=E.useContext(Tu),{matches:o}=E.useContext(Jl),{pathname:l}=al(),c=ff(),d=DO(t,NO(o,s.v7_relativeSplatPath),l,i==="path"),u=JSON.stringify(d);return E.useEffect(()=>c(JSON.parse(u),{replace:r,state:n,relative:i}),[c,u,i,r,n]),null}function Kr(e){Yn(!1)}function gye(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Hc.Pop,navigator:s,static:a=!1,future:o}=e;Jp()&&Yn(!1);let l=t.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:s,static:a,future:zy({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=Zp(n));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:m="default"}=n,g=E.useMemo(()=>{let x=IO(d,l);return x==null?null:{location:{pathname:x,search:u,hash:f,state:p,key:m},navigationType:i}},[l,d,u,f,p,m,i]);return g==null?null:E.createElement(Tu.Provider,{value:c},E.createElement(L1.Provider,{children:r,value:g}))}function yye(e){let{children:t,location:r}=e;return iye(EC(t),r)}new Promise(()=>{});function EC(e,t){t===void 0&&(t=[]);let r=[];return E.Children.forEach(e,(n,i)=>{if(!E.isValidElement(n))return;let s=[...t,i];if(n.type===E.Fragment){r.push.apply(r,EC(n.props.children,s));return}n.type!==Kr&&Yn(!1),!n.props.index||!n.props.children||Yn(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=EC(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CC.apply(this,arguments)}function vye(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function _ye(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xye(e,t){return e.button===0&&(!t||t==="_self")&&!_ye(e)}const bye=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wye="6";try{window.__reactRouterVersion=wye}catch{}const Tye="startTransition",L4=YK[Tye];function Mye(e){let{basename:t,children:r,future:n,window:i}=e,s=E.useRef();s.current==null&&(s.current=jge({window:i,v5Compat:!0}));let a=s.current,[o,l]=E.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=E.useCallback(u=>{c&&L4?L4(()=>l(u)):l(u)},[l,c]);return E.useLayoutEffect(()=>a.listen(d),[a,d]),E.createElement(gye,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const kye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xr=E.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u}=t,f=vye(t,bye),{basename:p}=E.useContext(Tu),m,g=!1;if(typeof c=="string"&&Sye.test(c)&&(m=c,kye))try{let w=new URL(window.location.href),b=c.startsWith("//")?new URL(w.protocol+c):new URL(c),_=IO(b.pathname,p);b.origin===w.origin&&_!=null?c=_+b.search+b.hash:g=!0}catch{}let x=rye(c,{relative:i}),v=Pye(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:u});function y(w){n&&n(w),w.defaultPrevented||v(w)}return E.createElement("a",CC({},f,{href:m||x,onClick:g||s?n:y,ref:r,target:l}))});var F4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(F4||(F4={}));var B4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(B4||(B4={}));function Pye(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=ff(),c=al(),d=LX(e,{relative:a});return E.useCallback(u=>{if(xye(u,r)){u.preventDefault();let f=n!==void 0?n:Db(c)===Db(d);l(e,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,n,i,r,e,s,a,o])}const Eye="modulepreload",Cye=function(e){return"/"+e},z4={},a_=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=Cye(l),l in z4)return;z4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Eye,c||(u.as="script"),u.crossOrigin="",u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},jye=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>a_(async()=>{const{default:n}=await Promise.resolve().then(()=>em);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class LO extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Aye extends LO{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class V4 extends LO{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class U4 extends LO{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var jC;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(jC||(jC={}));var Oye=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class $ye{constructor(t,{headers:r={},customFetch:n,region:i=jC.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=jye(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Oye(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=r;let o={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let d;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const u=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:d}).catch(g=>{throw new Aye(g)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new V4(u);if(!u.ok)throw new U4(u);let p=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null,response:u}}catch(i){return{data:null,error:i,response:i instanceof U4||i instanceof V4?i.context:void 0}}})}}var Rs={},FO={},F1={},o_={},B1={},z1={},Iye=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dp=Iye();const Nye=dp.fetch,VX=dp.fetch.bind(dp),UX=dp.Headers,Dye=dp.Request,Rye=dp.Response,em=Object.freeze(Object.defineProperty({__proto__:null,Headers:UX,Request:Dye,Response:Rye,default:VX,fetch:Nye},Symbol.toStringTag,{value:"Module"})),Lye=Gle(em);var V1={};Object.defineProperty(V1,"__esModule",{value:!0});let Fye=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};V1.default=Fye;var WX=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z1,"__esModule",{value:!0});const Bye=WX(Lye),zye=WX(V1);let Vye=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Bye.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let c=null,d=null,u=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&x&&x.length>1&&(u=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,u=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await s.text();try{c=JSON.parse(g),Array.isArray(c)&&s.status===404&&(d=[],c=null,f=200,p="OK")}catch{s.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new zye.default(c)}return{error:c,data:d,count:u,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};z1.default=Vye;var Uye=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B1,"__esModule",{value:!0});const Wye=Uye(z1);let Gye=class extends Wye.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};B1.default=Gye;var Hye=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o_,"__esModule",{value:!0});const Kye=Hye(B1);let qye=class extends Kye.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};o_.default=qye;var Xye=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F1,"__esModule",{value:!0});const sg=Xye(o_);let Yye=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=r,this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new sg.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new sg.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new sg.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new sg.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new sg.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};F1.default=Yye;var U1={},W1={};Object.defineProperty(W1,"__esModule",{value:!0});W1.version=void 0;W1.version="0.0.0-automated";Object.defineProperty(U1,"__esModule",{value:!0});U1.DEFAULT_HEADERS=void 0;const Qye=W1;U1.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qye.version}`};var GX=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(FO,"__esModule",{value:!0});const Zye=GX(F1),Jye=GX(o_),eve=U1;let tve=class HX{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},eve.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new Zye.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HX(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${t}`);let l;n||i?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,u])=>u!==void 0).map(([d,u])=>[d,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([d,u])=>{o.searchParams.append(d,u)})):(a="POST",l=r);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new Jye.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};FO.default=tve;var tm=is&&is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.PostgrestError=Rs.PostgrestBuilder=Rs.PostgrestTransformBuilder=Rs.PostgrestFilterBuilder=Rs.PostgrestQueryBuilder=Rs.PostgrestClient=void 0;const KX=tm(FO);Rs.PostgrestClient=KX.default;const qX=tm(F1);Rs.PostgrestQueryBuilder=qX.default;const XX=tm(o_);Rs.PostgrestFilterBuilder=XX.default;const YX=tm(B1);Rs.PostgrestTransformBuilder=YX.default;const QX=tm(z1);Rs.PostgrestBuilder=QX.default;const ZX=tm(V1);Rs.PostgrestError=ZX.default;var rve=Rs.default={PostgrestClient:KX.default,PostgrestQueryBuilder:qX.default,PostgrestFilterBuilder:XX.default,PostgrestTransformBuilder:YX.default,PostgrestBuilder:QX.default,PostgrestError:ZX.default};const{PostgrestClient:nve,PostgrestQueryBuilder:G7e,PostgrestFilterBuilder:H7e,PostgrestTransformBuilder:K7e,PostgrestBuilder:q7e,PostgrestError:X7e}=rve;function ive(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sve=ive(),ave="2.11.15",ove=`realtime-js/${ave}`,lve="1.0.0",JX=1e4,cve=1e3;var ty;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ty||(ty={}));var Qi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qi||(Qi={}));var oo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(oo||(oo={}));var AC;(function(e){e.websocket="websocket"})(AC||(AC={}));var md;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(md||(md={}));class uve{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(t.slice(a,a+i));a=a+i;const l=n.decode(t.slice(a,a+s));a=a+s;const c=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class eY{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tn||(tn={}));const W4=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((s,a)=>(s[a]=dve(a,e,t,i),s),{})},dve=(e,t,r,n)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=r[e];return s&&!n.includes(s)?tY(s,a):OC(a)},tY=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return mve(t,r)}switch(e){case tn.bool:return fve(t);case tn.float4:case tn.float8:case tn.int2:case tn.int4:case tn.int8:case tn.numeric:case tn.oid:return hve(t);case tn.json:case tn.jsonb:return pve(t);case tn.timestamp:return gve(t);case tn.abstime:case tn.date:case tn.daterange:case tn.int4range:case tn.int8range:case tn.money:case tn.reltime:case tn.text:case tn.time:case tn.timestamptz:case tn.timetz:case tn.tsrange:case tn.tstzrange:return OC(t);default:return OC(t)}},OC=e=>e,fve=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hve=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pve=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mve=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const a=e.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>tY(t,o))}return e},gve=e=>typeof e=="string"?e.replace(" ","T"):e,rY=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class lS{constructor(t,r,n={},i=JX){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var G4;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(G4||(G4={}));class ry{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ry.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=ry.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ry.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const s=this.cloneDeep(t),a=this.transformState(r),o={},l={};return this.map(s,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const u=s[c];if(u){const f=d.map(x=>x.presence_ref),p=u.map(x=>x.presence_ref),m=d.filter(x=>p.indexOf(x.presence_ref)<0),g=u.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(o[c]=m),g.length>0&&(l[c]=g)}else o[c]=d}),this.syncDiff(s,{joins:o,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const d=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),d.length>0){const u=t[o].map(p=>p.presence_ref),f=d.filter(p=>u.indexOf(p.presence_ref)<0);t[o].unshift(...f)}n(o,d,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const d=l.map(u=>u.presence_ref);c=c.filter(u=>d.indexOf(u.presence_ref)<0),t[o]=c,i(o,c,l),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H4;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(H4||(H4={}));var K4;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(K4||(K4={}));var wl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wl||(wl={}));class BO{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Qi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new lS(this,oo.join,this.params,this.timeout),this.rejoinTimer=new eY(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qi.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Qi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oo.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new ry(this),this.broadcastEndpointURL=rY(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qi.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(d=>t==null?void 0:t(wl.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(wl.CLOSED));const l={},c={broadcast:s,presence:a,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var u;if(this.socket.setAuth(),d===void 0){t==null||t(wl.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,m=[];for(let g=0;g<p;g++){const x=f[g],{filter:{event:v,schema:y,table:w,filter:b}}=x,_=d&&d[g];if(_&&_.event===v&&_.schema===y&&_.table===w&&_.filter===b)m.push(Object.assign(Object.assign({},x),{id:_.id}));else{this.unsubscribe(),this.state=Qi.errored,t==null||t(wl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(wl.SUBSCRIBED);return}}).receive("error",d=>{this.state=Qi.errored,t==null||t(wl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new lS(this,oo.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new lS(this,t,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=oo;if(n&&[o,l,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(p=>p.callback(f,n)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var m,g,x,v,y,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const b=p.id,_=(m=p.filter)===null||m===void 0?void 0:m.event;return b&&((g=r.ids)===null||g===void 0?void 0:g.includes(b))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(y=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return b==="*"||b===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:x,commit_timestamp:v,type:y,errors:w}=m;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===Qi.closed}_isJoined(){return this.state===Qi.joined}_isJoining(){return this.state===Qi.joining}_isLeaving(){return this.state===Qi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&BO.isEqual(i.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(oo.close,{},t)}_onError(t){this._on(oo.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=W4(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=W4(t.columns,t.old_record)),r}}const q4=()=>{},yve=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vve{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=JX,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q4,this.ref=0,this.logger=q4,this.conn=null,this.sendBuffer=[],this.serializer=new uve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>a_(async()=>{const{default:l}=await Promise.resolve().then(()=>em);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${t}/${AC.websocket}`,this.httpEndpoint=rY(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,a)=>a(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new eY(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=sve),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lve}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ty.connecting:return md.Connecting;case ty.open:return md.Open;case ty.closing:return md.Closing;default:return md.Closed}}isConnected(){return this.connectionState()===md.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new BO(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:ove};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(oo.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(cve,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:i,payload:s,ref:a}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(oo.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([yve],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class zO extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Si(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _ve extends zO{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $C extends zO{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var xve=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const nY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>a_(async()=>{const{default:n}=await Promise.resolve().then(()=>em);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bve=()=>xve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield a_(()=>Promise.resolve().then(()=>em),void 0)).Response:Response}),IC=e=>{if(Array.isArray(e))return e.map(r=>IC(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=IC(n)}),t};var hf=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const cS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wve=(e,t,r)=>hf(void 0,void 0,void 0,function*(){const n=yield bve();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{t(new _ve(cS(i),e.status||500))}).catch(i=>{t(new $C(cS(i),i))}):t(new $C(cS(e),e))}),Tve=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function l_(e,t,r,n,i,s){return hf(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,Tve(t,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>wve(l,o,n))})})}function Lb(e,t,r,n){return hf(this,void 0,void 0,function*(){return l_(e,"GET",t,r,n)})}function Cc(e,t,r,n,i){return hf(this,void 0,void 0,function*(){return l_(e,"POST",t,n,i,r)})}function Mve(e,t,r,n,i){return hf(this,void 0,void 0,function*(){return l_(e,"PUT",t,n,i,r)})}function kve(e,t,r,n){return hf(this,void 0,void 0,function*(){return l_(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function iY(e,t,r,n,i){return hf(this,void 0,void 0,function*(){return l_(e,"DELETE",t,n,i,r)})}var As=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const Sve={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},X4={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pve{constructor(t,r={},n,i){this.url=t,this.headers=r,this.bucketId=n,this.fetch=nY(i)}uploadOrUpdate(t,r,n,i){return As(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},X4),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(Si(s))return{data:null,error:s};throw s}})}upload(t,r,n){return As(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return As(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:X4.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const u=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),f=yield u.json();return u.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Si(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return As(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Cc(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new zO("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(n){if(Si(n))return{data:null,error:n};throw n}})}update(t,r,n){return As(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return As(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Si(i))return{data:null,error:i};throw i}})}copy(t,r,n){return As(this,void 0,void 0,function*(){try{return{data:{path:(yield Cc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Si(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return As(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Cc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Si(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return As(this,void 0,void 0,function*(){try{const i=yield Cc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Si(i))return{data:null,error:i};throw i}})}download(t,r){return As(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Lb(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Si(o))return{data:null,error:o};throw o}})}info(t){return As(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Lb(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:IC(n),error:null}}catch(n){if(Si(n))return{data:null,error:n};throw n}})}exists(t){return As(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield kve(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Si(n)&&n instanceof $C){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(t){return As(this,void 0,void 0,function*(){try{return{data:yield iY(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Si(r))return{data:null,error:r};throw r}})}list(t,r,n){return As(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Sve),r),{prefix:t||""});return{data:yield Cc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Si(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Eve="2.7.1",Cve={"X-Client-Info":`storage-js/${Eve}`};var Lf=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class jve{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Cve),r),this.fetch=nY(n)}listBuckets(){return Lf(this,void 0,void 0,function*(){try{return{data:yield Lb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Si(t))return{data:null,error:t};throw t}})}getBucket(t){return Lf(this,void 0,void 0,function*(){try{return{data:yield Lb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Si(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Lf(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Si(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Lf(this,void 0,void 0,function*(){try{return{data:yield Mve(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Si(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Lf(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Si(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Lf(this,void 0,void 0,function*(){try{return{data:yield iY(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Si(r))return{data:null,error:r};throw r}})}}class Ave extends jve{constructor(t,r={},n){super(t,r,n)}from(t){return new Pve(this.url,this.headers,t,this.fetch)}}const Ove="2.52.1";let $g="";typeof Deno<"u"?$g="deno":typeof document<"u"?$g="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$g="react-native":$g="node";const $ve={"X-Client-Info":`supabase-js-${$g}/${Ove}`},Ive={headers:$ve},Nve={schema:"public"},Dve={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rve={};var Lve=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const Fve=e=>{let t;return e?t=e:typeof fetch>"u"?t=VX:t=fetch,(...r)=>t(...r)},Bve=()=>typeof Headers>"u"?UX:Headers,zve=(e,t,r)=>{const n=Fve(r),i=Bve();return(s,a)=>Lve(void 0,void 0,void 0,function*(){var o;const l=(o=yield t())!==null&&o!==void 0?o:e;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},a),{headers:c}))})};var Vve=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};function Uve(e){return e.endsWith("/")?e:e+"/"}function Wve(e,t){var r,n;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Vve(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const sY="2.71.1",Zf=30*1e3,NC=3,uS=NC*Zf,Gve="http://localhost:9999",Hve="supabase.auth.token",Kve={"X-Client-Info":`gotrue-js/${sY}`},DC="X-Supabase-Api-Version",aY={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xve=10*60*1e3;class VO extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ir(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Yve extends VO{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Qve(e){return ir(e)&&e.name==="AuthApiError"}class oY extends VO{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Mu extends VO{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class wc extends Mu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zve(e){return ir(e)&&e.name==="AuthSessionMissingError"}class V0 extends Mu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class U0 extends Mu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class W0 extends Mu{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jve(e){return ir(e)&&e.name==="AuthImplicitGrantRedirectError"}class Y4 extends Mu{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RC extends Mu{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function dS(e){return ir(e)&&e.name==="AuthRetryableFetchError"}class Q4 extends Mu{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class LC extends Mu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z4=` 	
\r=`.split(""),e_e=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Z4.length;t+=1)e[Z4[t].charCodeAt(0)]=-2;for(let t=0;t<Fb.length;t+=1)e[Fb[t].charCodeAt(0)]=t;return e})();function J4(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Fb[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Fb[n]),t.queuedBits-=6}}function lY(e,t,r){const n=e_e[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ez(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{n_e(a,n,r)};for(let a=0;a<e.length;a+=1)lY(e.charCodeAt(a),i,s);return t.join("")}function t_e(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function r_e(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}t_e(n,t)}}function n_e(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function i_e(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)lY(e.charCodeAt(i),r,n);return new Uint8Array(t)}function s_e(e){const t=[];return r_e(e,r=>t.push(r)),new Uint8Array(t)}function a_e(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>J4(i,r,n)),J4(null,r,n),t.join("")}function o_e(e){return Math.round(Date.now()/1e3)+e}function l_e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const eo=()=>typeof window<"u"&&typeof document<"u",Qu={tested:!1,writable:!1},cY=()=>{if(!eo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qu.tested)return Qu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qu.tested=!0,Qu.writable=!0}catch{Qu.tested=!0,Qu.writable=!1}return Qu.writable};function c_e(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const uY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>a_(async()=>{const{default:n}=await Promise.resolve().then(()=>em);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},u_e=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Jf=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zu=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},yc=async(e,t)=>{await e.removeItem(t)};class G1{constructor(){this.promise=new G1.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}G1.promiseConstructor=Promise;function fS(e){const t=e.split(".");if(t.length!==3)throw new LC("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!qve.test(t[n]))throw new LC("JWT not in base64url format");return{header:JSON.parse(ez(t[0])),payload:JSON.parse(ez(t[1])),signature:i_e(t[2]),raw:{header:t[0],payload:t[1]}}}async function d_e(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function f_e(e,t){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){n(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function h_e(e){return("0"+e.toString(16)).substr(-2)}function p_e(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,h_e).join("")}async function m_e(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function g_e(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await m_e(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ff(e,t,r=!1){const n=p_e();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Jf(e,`${t}-code-verifier`,i);const s=await g_e(n);return[s,n===s?"plain":"s256"]}const y_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v_e(e){const t=e.headers.get(DC);if(!t||!t.match(y_e))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function __e(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function x_e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const b_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bf(e){if(!b_e.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hS(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tz(e){return JSON.parse(JSON.stringify(e))}var w_e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const cd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),T_e=[502,503,504];async function rz(e){var t;if(!u_e(e))throw new RC(cd(e),0);if(T_e.includes(e.status))throw new RC(cd(e),e.status);let r;try{r=await e.json()}catch(s){throw new oY(cd(s),s)}let n;const i=v_e(e);if(i&&i.getTime()>=aY["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Q4(cd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new wc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Q4(cd(r),e.status,r.weak_password.reasons);throw new Yve(cd(r),e.status||500,n)}const M_e=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function gr(e,t,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[DC]||(s[DC]=aY["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await k_e(e,t,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function k_e(e,t,r,n,i,s){const a=M_e(t,n,i,s);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new RC(cd(l),0)}if(o.ok||await rz(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await rz(l)}}function _l(e){var t;let r=null;C_e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=o_e(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function nz(e){const t=_l(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function S_e(e){return{data:e,error:null}}function P_e(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,a=w_e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function E_e(e){return e}function C_e(e){return e.access_token&&e.refresh_token&&e.expires_in}const pS=["global","local","others"];var j_e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class A_e{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=uY(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=pS[0]){if(pS.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pS.join(", ")}`);try{return await gr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await gr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=j_e(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await gr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:P_e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ir(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await gr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nc})}catch(r){if(ir(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await gr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:E_e});if(d.error)throw d.error;const u=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(ir(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Bf(t);try{return await gr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nc})}catch(r){if(ir(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Bf(t);try{return await gr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Bf(t);try{return await gr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Bf(t.userId);try{const{data:r,error:n}=await gr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Bf(t.userId),Bf(t.id);try{return{data:await gr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}}}function iz(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function O_e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zf={debug:!!(globalThis&&cY()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dY extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $_e extends dY{}async function I_e(e,t,r){zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),zf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $_e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zf.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}O_e();const N_e={url:Gve,storageKey:Hve,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kve,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sz(e,t,r){return await r()}const Vf={};class Vy{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vy.nextInstanceID,Vy.nextInstanceID+=1,this.instanceID>0&&eo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},N_e),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new A_e({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uY(i.fetch),this.lock=i.lock||sz,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:eo()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=I_e:this.lock=sz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:cY()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iz(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=iz(this.memoryStorage)),eo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Vf[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Vf[this.storageKey]=Object.assign(Object.assign({},Vf[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Vf[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vf[this.storageKey]=Object.assign(Object.assign({},Vf[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sY}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=c_e(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),eo()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Jve(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ir(r)?{error:r}:{error:new oY("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:_l}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ir(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,n,i;try{let s;if("email"in t){const{email:d,password:u,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ff(this.storage,this.storageKey)),s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:_l})}else if("phone"in t){const{phone:d,password:u,options:f}=t;s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_l})}else throw new U0("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ir(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:a,options:o}=t;r=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:nz})}else if("phone"in t){const{phone:s,password:a,options:o}=t;r=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:nz})}else throw new U0("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new V0}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,s,a,o,l,c,d,u,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:x,wallet:v,statement:y,options:w}=t;let b;if(eo())if(typeof v=="object")b=v;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))b=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const T=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)m=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),g=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${_.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((u=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||u===void 0)&&u.length?["Resources",...w.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await b.signMessage(new TextEncoder().encode(m),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:x,error:v}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:a_e(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:_l});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new V0}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(ir(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await Zu(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:a}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_l});if(await yc(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new V0}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(ir(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=t,o=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_l}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new V0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Ff(this.storage,this.storageKey));const{error:u}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:d}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new U0("You must provide either an email or phone number.")}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,s;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:_l});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ir(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Ff(this.storage,this.storageKey)),await gr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:S_e})}catch(s){if(ir(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new wc;const{error:i}=await gr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ir(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:s}=t,{error:a}=await gr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:i,options:s}=t,{data:a,error:o}=await gr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new U0("You must provide either an email or phone number and a type")}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<uS:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Zu(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=hS()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nc}):await this._useSession(async r=>{var n,i,s;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wc}:await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Nc})})}catch(r){if(ir(r))return Zve(r)&&(await this._removeSession(),await yc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new wc;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Ff(this.storage,this.storageKey));const{data:c,error:d}=await gr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Nc});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new wc;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:a}=fS(t.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(ir(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:o}=r;if(o)throw o;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new wc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!eo())throw new W0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new W0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Y4("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new W0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Y4("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new W0("No session defined in URL");const d=Math.round(Date.now()/1e3),u=parseInt(o);let f=d+u;l&&(f=parseInt(l));const p=f-d;p*1e3<=Zf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`);const m=f-u;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:x}=await this._getUser(s);if(x)throw x;const v={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:u,expires_at:f,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(ir(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zu(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(Qve(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await yc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=l_e(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ff(this.storage,this.storageKey,!0));try{return await gr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(ir(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var a,o,l,c,d;const{data:u,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await gr(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=u.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return eo()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ir(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await gr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await f_e(async i=>(i>0&&await d_e(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await gr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_l})),(i,s)=>{const a=200*Math.pow(2,i);return s&&dS(s)&&Date.now()+a-n<Zf})}catch(n){if(this._debug(r,"error",n),ir(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),eo()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Zu(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Zu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Jf(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:hS()}else if(i&&!i.user&&!i.user){const a=await Zu(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await yc(this.storage,this.storageKey+"-user"),await Jf(this.storage,this.storageKey,i)):i.user=hS()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<uS;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${uS}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),dS(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new wc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new G1;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new wc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),ir(s)){const a={session:null,error:s};return dS(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Jf(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=tz(i);await Jf(this.storage,this.storageKey,s)}else{const i=tz(r);await Jf(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await yc(this.storage,this.storageKey),await yc(this.storage,this.storageKey+"-code-verifier"),await yc(this.storage,this.storageKey+"-user"),this.userStorage&&await yc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&eo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zf);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Zf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Zf}ms, refresh threshold is ${NC} ticks`),i<=NC&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dY)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!eo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await Ff(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await gr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await gr(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(ir(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await gr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ir(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=fS(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Xve>i)return n;const{data:s,error:a}=await gr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=fS(n);r!=null&&r.allowExpired||__e(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const d=x_e(i.alg),u=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,u,a,s_e(`${o}.${l}`)))throw new LC("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}}}Vy.nextInstanceID=0;const D_e=Vy;class R_e extends D_e{constructor(t){super(t)}}var L_e=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{c(n.next(d))}catch(u){a(u)}}function l(d){try{c(n.throw(d))}catch(u){a(u)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class F_e{constructor(t,r,n){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Uve(t),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Nve,realtime:Rve,auth:Object.assign(Object.assign({},Dve),{storageKey:c}),global:Ive},u=Wve(n??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=zve(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new nve(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new $ye(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ave(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return L_e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:a,lock:o,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new R_e({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new vve(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const B_e=(e,t,r)=>new F_e(e,t,r);function z_e(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}z_e()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const V_e="https://fsirlcxhtyppecjjdqbp.supabase.co",U_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzaXJsY3hodHlwcGVjampkcWJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2OTk0NTgsImV4cCI6MjA2OTI3NTQ1OH0.7HZENU4G4fRpemRp44Xj6cGIobhDaxqbJEa7U4gVHVU",Bn=B_e(V_e,U_e,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),fY=E.createContext(void 0),ec=()=>{const e=E.useContext(fY);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},W_e=({children:e})=>{const[t,r]=E.useState(null),[n,i]=E.useState(null),[s,a]=E.useState(null),[o,l]=E.useState(!0),{toast:c}=So(),d=async x=>{try{const{data:v,error:y}=await Bn.from("user_roles").select("role").eq("user_id",x).single();return y?(console.error("Error fetching user role:",y),null):(v==null?void 0:v.role)||null}catch(v){return console.error("Error in fetchUserRole:",v),null}};E.useEffect(()=>{const{data:{subscription:x}}=Bn.auth.onAuthStateChange(async(v,y)=>{i(y),r((y==null?void 0:y.user)??null),y!=null&&y.user?setTimeout(async()=>{const w=await d(y.user.id);a(w)},0):a(null),l(!1)});return Bn.auth.getSession().then(({data:{session:v}})=>{i(v),r((v==null?void 0:v.user)??null),v!=null&&v.user&&setTimeout(async()=>{const y=await d(v.user.id);a(y)},0),l(!1)}),()=>x.unsubscribe()},[]);const g={user:t,session:n,userRole:s,loading:o,signIn:async(x,v)=>{try{const{error:y}=await Bn.auth.signInWithPassword({email:x,password:v});return y?c({title:"Kirjautuminen epäonnistui",description:y.message,variant:"destructive"}):(c({title:"Kirjautuminen onnistui",description:"Tervetuloa takaisin!"}),window.location.href="/dashboard"),{error:y}}catch(y){const w=y instanceof Error?y.message:"Tuntematon virhe";return c({title:"Kirjautuminen epäonnistui",description:w,variant:"destructive"}),{error:y}}},signUp:async(x,v,y)=>{try{const w=`${window.location.origin}/`,{error:b}=await Bn.auth.signUp({email:x,password:v,options:{emailRedirectTo:w,data:y}});return c(b?{title:"Rekisteröityminen epäonnistui",description:b.message,variant:"destructive"}:{title:"Rekisteröityminen onnistui",description:"Tarkista sähköpostisi vahvistuslinkin takia."}),{error:b}}catch(w){const b=w instanceof Error?w.message:"Tuntematon virhe";return c({title:"Rekisteröityminen epäonnistui",description:b,variant:"destructive"}),{error:w}}},signOut:async()=>{try{const{error:x}=await Bn.auth.signOut();c(x?{title:"Uloskirjautuminen epäonnistui",description:x.message,variant:"destructive"}:{title:"Uloskirjautunut",description:"Olet kirjautunut ulos onnistuneesti."})}catch(x){console.error("Error signing out:",x),c({title:"Uloskirjautuminen epäonnistui",description:"Tuntematon virhe",variant:"destructive"})}},isAdmin:s==="admin"};return h.jsx(fY.Provider,{value:g,children:e})},hY=E.createContext(void 0),UO=()=>{const e=E.useContext(hY);if(!e)throw new Error("useShoppingCart must be used within a ShoppingCartProvider");return e},G_e=({children:e})=>{const[t,r]=E.useState([]),{toast:n}=So(),i=l=>{const c=t.findIndex(d=>d.title===l.title);if(c>-1){const d=[...t];d[c].quantity+=1,r(d)}else{const d={id:Date.now().toString(),title:l.title,price:l.price,quantity:1};r([...t,d])}n({title:"Tuote lisätty ostoskoriin",description:`${l.title} on lisätty ostoskoriisi.`})},s=(l,c)=>{if(c<=0){a(l);return}const d=t.map(u=>u.id===l?{...u,quantity:c}:u);r(d)},a=l=>{const c=t.filter(d=>d.id!==l);r(c),n({title:"Tuote poistettu",description:"Tuote on poistettu ostoskorista."})},o=()=>{r([])};return h.jsx(hY.Provider,{value:{cartItems:t,addToCart:i,updateQuantity:s,removeFromCart:a,clearCart:o},children:e})},H_e=({children:e})=>{const{user:t,loading:r}=ec(),n=ff(),i=al(),a=["/confirm-order","/login","/auth/callback"].some(o=>i.pathname.startsWith(o));return E.useEffect(()=>{r||!t&&!a&&n("/login",{state:{from:i.pathname},replace:!0})},[t,r,n,i,a]),r?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Ladataan..."})]})}):a||t?h.jsx(h.Fragment,{children:e}):null},pY=E.createContext({});function K_e(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const WO=typeof window<"u",q_e=WO?E.useLayoutEffect:E.useEffect,GO=E.createContext(null),mY=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function X_e(e=!0){const t=E.useContext(GO);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,s=E.useId();E.useEffect(()=>{if(e)return i(s)},[e]);const a=E.useCallback(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,a]:[!0]}function HO(e,t){e.indexOf(t)===-1&&e.push(t)}function KO(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const aa=e=>e;let FC=aa;const Y_e={skipAnimations:!1,useManualTiming:!1};function qO(e){let t;return()=>(t===void 0&&(t=e()),t)}const fp=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class XO{constructor(){this.subscriptions=[]}add(t){return HO(this.subscriptions,t),()=>KO(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $l=e=>e*1e3,Il=e=>e/1e3;function gY(e,t){return t?e*(1e3/t):0}const Q_e=qO(()=>window.ScrollTimeline!==void 0);class Z_e{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(i=>{if(Q_e()&&i.attachTimeline)return i.attachTimeline(t);if(typeof r=="function")return r(i)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class J_e extends Z_e{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function YO(e,t){return e?e[t]||e.default||e:void 0}const BC=2e4;function yY(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<BC;)t+=r,n=e.next(t);return t>=BC?1/0:t}function QO(e){return typeof e=="function"}function az(e,t){e.timeline=t,e.onfinish=null}const ZO=e=>Array.isArray(e)&&typeof e[0]=="number",e0e={linearEasing:void 0};function t0e(e,t){const r=qO(e);return()=>{var n;return(n=e0e[t])!==null&&n!==void 0?n:r()}}const Bb=t0e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vY=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let s=0;s<i;s++)n+=e(fp(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function _Y(e){return!!(typeof e=="function"&&Bb()||!e||typeof e=="string"&&(e in zC||Bb())||ZO(e)||Array.isArray(e)&&e.every(_Y))}const Ig=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,zC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ig([0,.65,.55,1]),circOut:Ig([.55,0,1,.45]),backIn:Ig([.31,.01,.66,-.59]),backOut:Ig([.33,1.53,.69,.99])};function xY(e,t){if(e)return typeof e=="function"&&Bb()?vY(e,t):ZO(e)?Ig(e):Array.isArray(e)?e.map(r=>xY(r,t)||zC.easeOut):zC[e]}const G0=["read","resolveKeyframes","update","preRender","render","postRender"],oz={value:null,addProjectionMetrics:null};function r0e(e,t){let r=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(u){a.has(u)&&(d.schedule(u),e()),l++,u(o)}const d={schedule:(u,f=!1,p=!1)=>{const g=p&&i?r:n;return f&&a.add(u),g.has(u)||g.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(o=u,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(c),t&&oz.value&&oz.value.frameloop[t].push(l),l=0,r.clear(),i=!1,s&&(s=!1,d.process(u))}};return d}const n0e=40;function bY(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=G0.reduce((v,y)=>(v[y]=r0e(s,t?y:void 0),v),{}),{read:o,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:f}=a,p=()=>{const v=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,n0e),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),d.process(i),u.process(i),f.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(p))},m=()=>{r=!0,n=!0,i.isProcessing||e(p)};return{schedule:G0.reduce((v,y)=>{const w=a[y];return v[y]=(b,_=!1,T=!1)=>(r||m(),w.schedule(b,_,T)),v},{}),cancel:v=>{for(let y=0;y<G0.length;y++)a[G0[y]].cancel(v)},state:i,steps:a}}const{schedule:on,cancel:hu,state:Ri,steps:mS}=bY(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0),{schedule:JO,cancel:Y7e}=bY(queueMicrotask,!1);let Wx;function i0e(){Wx=void 0}const Yo={now:()=>(Wx===void 0&&Yo.set(Ri.isProcessing||Y_e.useManualTiming?Ri.timestamp:performance.now()),Wx),set:e=>{Wx=e,queueMicrotask(i0e)}},to={x:!1,y:!1};function wY(){return to.x||to.y}function s0e(e){return e==="x"||e==="y"?to[e]?null:(to[e]=!0,()=>{to[e]=!1}):to.x||to.y?null:(to.x=to.y=!0,()=>{to.x=to.y=!1})}function a0e(e,t,r){var n;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function TY(e,t){const r=a0e(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[r,i,()=>n.abort()]}function lz(e){return!(e.pointerType==="touch"||wY())}function o0e(e,t,r={}){const[n,i,s]=TY(e,r),a=o=>{if(!lz(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const d=u=>{lz(u)&&(c(u),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const MY=(e,t)=>t?e===t?!0:MY(e,t.parentElement):!1,e$=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,l0e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c0e(e){return l0e.has(e.tagName)||e.tabIndex!==-1}const Ng=new WeakSet;function cz(e){return t=>{t.key==="Enter"&&e(t)}}function gS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const u0e=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=cz(()=>{if(Ng.has(r))return;gS(r,"down");const i=cz(()=>{gS(r,"up")}),s=()=>gS(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",s,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function uz(e){return e$(e)&&!wY()}function d0e(e,t,r={}){const[n,i,s]=TY(e,r),a=o=>{const l=o.currentTarget;if(!uz(o)||Ng.has(l))return;Ng.add(l);const c=t(l,o),d=(p,m)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",f),!(!uz(p)||!Ng.has(l))&&(Ng.delete(l),typeof c=="function"&&c(p,{success:m}))},u=p=>{d(p,l===window||l===document||r.useGlobalTarget||MY(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",u,i),window.addEventListener("pointercancel",f,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o instanceof HTMLElement&&(o.addEventListener("focus",c=>u0e(c,i)),!c0e(o)&&o.tabIndex===null&&(o.tabIndex=0))}),s}const dz=30,f0e=e=>!isNaN(parseFloat(e));class h0e{constructor(t,r={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=Yo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Yo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=f0e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new XO);const n=this.events[t].add(r);return t==="change"?()=>{n(),on.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Yo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,dz);return gY(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uy(e,t){return new h0e(e,t)}const kY=E.createContext({strict:!1}),fz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hp={};for(const e in fz)hp[e]={isEnabled:t=>fz[e].some(r=>!!t[r])};function p0e(e){for(const t in e)hp[t]={...hp[t],...e[t]}}const m0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||m0e.has(e)}let SY=e=>!zb(e);function g0e(e){e&&(SY=t=>t.startsWith("on")?!zb(t):e(t))}try{g0e(require("@emotion/is-prop-valid").default)}catch{}function y0e(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(SY(i)||r===!0&&zb(i)||!t&&!zb(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function v0e(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const H1=E.createContext({});function K1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Wy(e){return typeof e=="string"||Array.isArray(e)}const t$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],r$=["initial",...t$];function q1(e){return K1(e.animate)||r$.some(t=>Wy(e[t]))}function PY(e){return!!(q1(e)||e.variants)}function _0e(e,t){if(q1(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Wy(r)?r:void 0,animate:Wy(n)?n:void 0}}return e.inherit!==!1?t:{}}function x0e(e){const{initial:t,animate:r}=_0e(e,E.useContext(H1));return E.useMemo(()=>({initial:t,animate:r}),[hz(t),hz(r)])}function hz(e){return Array.isArray(e)?e.join(" "):e}const b0e=Symbol.for("motionComponentSymbol");function vh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function w0e(e,t,r){return E.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):vh(r)&&(r.current=n))},[t])}const n$=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),T0e="framerAppearId",EY="data-"+n$(T0e),CY=E.createContext({});function M0e(e,t,r,n,i){var s,a;const{visualElement:o}=E.useContext(H1),l=E.useContext(kY),c=E.useContext(GO),d=E.useContext(mY).reducedMotion,u=E.useRef(null);n=n||l.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=u.current,p=E.useContext(CY);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&k0e(u.current,r,i,p);const m=E.useRef(!1);E.useInsertionEffect(()=>{f&&m.current&&f.update(r,c)});const g=r[EY],x=E.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return q_e(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),JO.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),E.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),x.current=!1))}),f}function k0e(e,t,r,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:jY(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&vh(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function jY(e){if(e)return e.options.allowProjection!==!1?e.projection:jY(e.parent)}function S0e({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){var s,a;e&&p0e(e);function o(c,d){let u;const f={...E.useContext(mY),...c,layoutId:P0e(c)},{isStatic:p}=f,m=x0e(c),g=n(c,p);if(!p&&WO){E0e();const x=C0e(f);u=x.MeasureLayout,m.visualElement=M0e(i,g,f,t,x.ProjectionNode)}return h.jsxs(H1.Provider,{value:m,children:[u&&m.visualElement?h.jsx(u,{visualElement:m.visualElement,...f}):null,r(i,c,w0e(g,m.visualElement,d),g,p,m.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=E.forwardRef(o);return l[b0e]=i,l}function P0e({layoutId:e}){const t=E.useContext(pY).id;return t&&e!==void 0?t+"-"+e:e}function E0e(e,t){E.useContext(kY).strict}function C0e(e){const{drag:t,layout:r}=hp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const AY=e=>t=>typeof t=="string"&&t.startsWith(e),i$=AY("--"),j0e=AY("var(--"),s$=e=>j0e(e)?A0e.test(e.split("/*")[0].trim()):!1,A0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gy={};function O0e(e){for(const t in e)Gy[t]=e[t],i$(t)&&(Gy[t].isCSSVariable=!0)}const rm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pf=new Set(rm);function OY(e,{layout:t,layoutId:r}){return pf.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Gy[e]||e==="opacity")}const ss=e=>!!(e&&e.getVelocity),$Y=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Hl=(e,t,r)=>r>t?t:r<e?e:r,nm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hy={...nm,transform:e=>Hl(0,1,e)},H0={...nm,default:1},c_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tc=c_("deg"),Qo=c_("%"),Vt=c_("px"),$0e=c_("vh"),I0e=c_("vw"),pz={...Qo,parse:e=>Qo.parse(e)/100,transform:e=>Qo.transform(e*100)},N0e={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,backgroundPositionX:Vt,backgroundPositionY:Vt},D0e={rotate:Tc,rotateX:Tc,rotateY:Tc,rotateZ:Tc,scale:H0,scaleX:H0,scaleY:H0,scaleZ:H0,skew:Tc,skewX:Tc,skewY:Tc,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:Hy,originX:pz,originY:pz,originZ:Vt},mz={...nm,transform:Math.round},a$={...N0e,...D0e,zIndex:mz,size:Vt,fillOpacity:Hy,strokeOpacity:Hy,numOctaves:mz},R0e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L0e=rm.length;function F0e(e,t,r){let n="",i=!0;for(let s=0;s<L0e;s++){const a=rm[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const c=$Y(o,a$[a]);if(!l){i=!1;const d=R0e[a]||a;n+=`${d}(${c}) `}r&&(t[a]=c)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function o$(e,t,r){const{style:n,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(pf.has(l)){a=!0;continue}else if(i$(l)){i[l]=c;continue}else{const d=$Y(c,a$[l]);l.startsWith("origin")?(o=!0,s[l]=d):n[l]=d}}if(t.transform||(a||r?n.transform=F0e(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;n.transformOrigin=`${l} ${c} ${d}`}}const l$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IY(e,t,r){for(const n in t)!ss(t[n])&&!OY(n,r)&&(e[n]=t[n])}function B0e({transformTemplate:e},t){return E.useMemo(()=>{const r=l$();return o$(r,t,e),Object.assign({},r.vars,r.style)},[t])}function z0e(e,t){const r=e.style||{},n={};return IY(n,r,e),Object.assign(n,B0e(e,t)),n}function V0e(e,t){const r={},n=z0e(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const U0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function c$(e){return typeof e!="string"||e.includes("-")?!1:!!(U0e.indexOf(e)>-1||/[A-Z]/u.test(e))}const W0e={offset:"stroke-dashoffset",array:"stroke-dasharray"},G0e={offset:"strokeDashoffset",array:"strokeDasharray"};function H0e(e,t,r=1,n=0,i=!0){e.pathLength=1;const s=i?W0e:G0e;e[s.offset]=Vt.transform(-n);const a=Vt.transform(t),o=Vt.transform(r);e[s.array]=`${a} ${o}`}function gz(e,t,r){return typeof e=="string"?e:Vt.transform(t+r*e)}function K0e(e,t,r){const n=gz(t,e.x,e.width),i=gz(r,e.y,e.height);return`${n} ${i}`}function u$(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,u){if(o$(e,c,u),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:m}=e;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=K0e(m,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),a!==void 0&&H0e(f,a,o,l,!1)}const NY=()=>({...l$(),attrs:{}}),d$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function q0e(e,t,r,n){const i=E.useMemo(()=>{const s=NY();return u$(s,t,d$(n),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};IY(s,e.style,e),i.style={...s,...i.style}}return i}function X0e(e=!1){return(r,n,i,{latestValues:s},a)=>{const l=(c$(r)?q0e:V0e)(n,s,a,r),c=y0e(n,typeof r=="string",e),d=r!==E.Fragment?{...c,...l,ref:i}:{},{children:u}=n,f=E.useMemo(()=>ss(u)?u.get():u,[u]);return E.createElement(r,{...d,children:f})}}function yz(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function f$(e,t,r,n){if(typeof t=="function"){const[i,s]=yz(n);t=t(r!==void 0?r:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=yz(n);t=t(r!==void 0?r:e.custom,i,s)}return t}const VC=e=>Array.isArray(e),Y0e=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Q0e=e=>VC(e)?e[e.length-1]||0:e;function Gx(e){const t=ss(e)?e.get():e;return Y0e(t)?t.toValue():t}function Z0e({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,i,s){const a={latestValues:J0e(n,i,s,e),renderState:t()};return r&&(a.onMount=o=>r({props:n,current:o,...a}),a.onUpdate=o=>r(o)),a}const DY=e=>(t,r)=>{const n=E.useContext(H1),i=E.useContext(GO),s=()=>Z0e(e,t,n,i);return r?s():K_e(s)};function J0e(e,t,r,n){const i={},s=n(e,{});for(const f in s)i[f]=Gx(s[f]);let{initial:a,animate:o}=e;const l=q1(e),c=PY(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const u=d?o:a;if(u&&typeof u!="boolean"&&!K1(u)){const f=Array.isArray(u)?u:[u];for(let p=0;p<f.length;p++){const m=f$(e,f[p]);if(m){const{transitionEnd:g,transition:x,...v}=m;for(const y in v){let w=v[y];if(Array.isArray(w)){const b=d?w.length-1:0;w=w[b]}w!==null&&(i[y]=w)}for(const y in g)i[y]=g[y]}}}return i}function h$(e,t,r){var n;const{style:i}=e,s={};for(const a in i)(ss(i[a])||t.style&&ss(t.style[a])||OY(a,e)||((n=r==null?void 0:r.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const exe={useVisualState:DY({scrapeMotionValuesFromProps:h$,createRenderState:l$})};function RY(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function LY(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const s in r)e.style.setProperty(s,r[s])}const FY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BY(e,t,r,n){LY(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(FY.has(i)?i:n$(i),t.attrs[i])}function zY(e,t,r){const n=h$(e,t,r);for(const i in e)if(ss(e[i])||ss(t[i])){const s=rm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=e[i]}return n}const vz=["x","y","width","height","cx","cy","r"],txe={useVisualState:DY({scrapeMotionValuesFromProps:zY,createRenderState:NY,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:i})=>{if(!r)return;let s=!!e.drag;if(!s){for(const o in i)if(pf.has(o)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let o=0;o<vz.length;o++){const l=vz[o];e[l]!==t[l]&&(a=!0)}a&&on.read(()=>{RY(r,n),on.render(()=>{u$(n,i,d$(r.tagName),e.transformTemplate),BY(r,n)})})}})};function rxe(e,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...c$(n)?txe:exe,preloadedFeatures:e,useRender:X0e(i),createVisualElement:t,Component:n};return S0e(a)}}function Ky(e,t,r){const n=e.getProps();return f$(n,t,r!==void 0?r:n.custom,e)}const VY=new Set(["width","height","top","left","right","bottom",...rm]);function nxe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Uy(r))}function ixe(e,t){const r=Ky(e,t);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const a in s){const o=Q0e(s[a]);nxe(e,a,o)}}function sxe(e){return!!(ss(e)&&e.add)}function UC(e,t){const r=e.getValue("willChange");if(sxe(r))return r.add(t)}function UY(e){return e.props[EY]}const WY=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,axe=1e-7,oxe=12;function lxe(e,t,r,n,i){let s,a,o=0;do a=t+(r-t)/2,s=WY(a,n,i)-e,s>0?r=a:t=a;while(Math.abs(s)>axe&&++o<oxe);return a}function u_(e,t,r,n){if(e===t&&r===n)return aa;const i=s=>lxe(s,0,1,e,r);return s=>s===0||s===1?s:WY(i(s),t,n)}const GY=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,HY=e=>t=>1-e(1-t),KY=u_(.33,1.53,.69,.99),p$=HY(KY),qY=GY(p$),XY=e=>(e*=2)<1?.5*p$(e):.5*(2-Math.pow(2,-10*(e-1))),m$=e=>1-Math.sin(Math.acos(e)),YY=HY(m$),QY=GY(m$),ZY=e=>/^0[^.\s]+$/u.test(e);function cxe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ZY(e):!0}const ny=e=>Math.round(e*1e5)/1e5,g$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uxe(e){return e==null}const dxe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,y$=(e,t)=>r=>!!(typeof r=="string"&&dxe.test(r)&&r.startsWith(e)||t&&!uxe(r)&&Object.prototype.hasOwnProperty.call(r,t)),JY=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(g$);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},fxe=e=>Hl(0,255,e),yS={...nm,transform:e=>Math.round(fxe(e))},Td={test:y$("rgb","red"),parse:JY("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+yS.transform(e)+", "+yS.transform(t)+", "+yS.transform(r)+", "+ny(Hy.transform(n))+")"};function hxe(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const WC={test:y$("#"),parse:hxe,transform:Td.transform},_h={test:y$("hsl","hue"),parse:JY("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Qo.transform(ny(t))+", "+Qo.transform(ny(r))+", "+ny(Hy.transform(n))+")"},Ji={test:e=>Td.test(e)||WC.test(e)||_h.test(e),parse:e=>Td.test(e)?Td.parse(e):_h.test(e)?_h.parse(e):WC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Td.transform(e):_h.transform(e)},pxe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mxe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(g$))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(pxe))===null||r===void 0?void 0:r.length)||0)>0}const eQ="number",tQ="color",gxe="var",yxe="var(",_z="${}",vxe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qy(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(vxe,l=>(Ji.test(l)?(n.color.push(s),i.push(tQ),r.push(Ji.parse(l))):l.startsWith(yxe)?(n.var.push(s),i.push(gxe),r.push(l)):(n.number.push(s),i.push(eQ),r.push(parseFloat(l))),++s,_z)).split(_z);return{values:r,split:o,indexes:n,types:i}}function rQ(e){return qy(e).values}function nQ(e){const{split:t,types:r}=qy(e),n=t.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=t[a],i[a]!==void 0){const o=r[a];o===eQ?s+=ny(i[a]):o===tQ?s+=Ji.transform(i[a]):s+=i[a]}return s}}const _xe=e=>typeof e=="number"?0:e;function xxe(e){const t=rQ(e);return nQ(e)(t.map(_xe))}const pu={test:mxe,parse:rQ,createTransformer:nQ,getAnimatableNone:xxe},bxe=new Set(["brightness","contrast","saturate","opacity"]);function wxe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(g$)||[];if(!n)return e;const i=r.replace(n,"");let s=bxe.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+i+")"}const Txe=/\b([a-z-]*)\(.*?\)/gu,GC={...pu,getAnimatableNone:e=>{const t=e.match(Txe);return t?t.map(wxe).join(" "):e}},Mxe={...a$,color:Ji,backgroundColor:Ji,outlineColor:Ji,fill:Ji,stroke:Ji,borderColor:Ji,borderTopColor:Ji,borderRightColor:Ji,borderBottomColor:Ji,borderLeftColor:Ji,filter:GC,WebkitFilter:GC},iQ=e=>Mxe[e];function sQ(e,t){let r=iQ(e);return r!==GC&&(r=pu),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const kxe=new Set(["auto","none","0"]);function Sxe(e,t,r){let n=0,i;for(;n<e.length&&!i;){const s=e[n];typeof s=="string"&&!kxe.has(s)&&qy(s).values.length&&(i=e[n]),n++}if(i&&r)for(const s of t)e[s]=sQ(r,i)}const Md=e=>e*180/Math.PI,HC=e=>{const t=Md(Math.atan2(e[1],e[0]));return KC(t)},Pxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:HC,rotateZ:HC,skewX:e=>Md(Math.atan(e[1])),skewY:e=>Md(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},KC=e=>(e=e%360,e<0&&(e+=360),e),xz=HC,bz=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wz=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Exe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bz,scaleY:wz,scale:e=>(bz(e)+wz(e))/2,rotateX:e=>KC(Md(Math.atan2(e[6],e[5]))),rotateY:e=>KC(Md(Math.atan2(-e[2],e[0]))),rotateZ:xz,rotate:xz,skewX:e=>Md(Math.atan(e[4])),skewY:e=>Md(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Tz(e){return e.includes("scale")?1:0}function qC(e,t){if(!e||e==="none")return Tz(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=Exe,i=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Pxe,i=o}if(!i)return Tz(t);const s=n[t],a=i[1].split(",").map(jxe);return typeof s=="function"?s(a):a[s]}const Cxe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return qC(r,t)};function jxe(e){return parseFloat(e.trim())}const Mz=e=>e===nm||e===Vt,Axe=new Set(["x","y","z"]),Oxe=rm.filter(e=>!Axe.has(e));function $xe(e){const t=[];return Oxe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const pp={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>qC(t,"x"),y:(e,{transform:t})=>qC(t,"y")};pp.translateX=pp.x;pp.translateY=pp.y;const Ld=new Set;let XC=!1,YC=!1;function aQ(){if(YC){const e=Array.from(Ld).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=$xe(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))===null||o===void 0||o.set(a)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}YC=!1,XC=!1,Ld.forEach(e=>e.complete()),Ld.clear()}function oQ(){Ld.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(YC=!0)})}function Ixe(){oQ(),aQ()}class v${constructor(t,r,n,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ld.add(this),XC||(XC=!0,on.read(oQ),on.resolveKeyframes(aQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ld.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ld.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const lQ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Nxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Dxe(e){const t=Nxe.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function cQ(e,t,r=1){const[n,i]=Dxe(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const a=s.trim();return lQ(a)?parseFloat(a):a}return s$(i)?cQ(i,t,r+1):i}const uQ=e=>t=>t.test(e),Rxe={test:e=>e==="auto",parse:e=>e},dQ=[nm,Vt,Qo,Tc,I0e,$0e,Rxe],kz=e=>dQ.find(uQ(e));class fQ extends v${constructor(t,r,n,i,s){super(t,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),s$(c))){const d=cQ(c,r.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!VY.has(n)||t.length!==2)return;const[i,s]=t,a=kz(i),o=kz(s);if(a!==o)if(Mz(a)&&Mz(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)cxe(t[i])&&n.push(i);n.length&&Sxe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=pp[n](r.measureViewportBox(),window.getComputedStyle(r.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Sz=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(pu.test(e)||e==="0")&&!e.startsWith("url("));function Lxe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function Fxe(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=Sz(i,t),o=Sz(s,t);return!a||!o?!1:Lxe(e)||(r==="spring"||QO(r))&&n}const Bxe=e=>e!==null;function X1(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Bxe),s=t&&r!=="loop"&&t%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const zxe=40;class hQ{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yo.now(),this.options={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zxe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ixe(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=Yo.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Fxe(t,n,i,s))if(a)this.options.duration=0;else{l&&l(X1(t,this.options,r)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,r);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Cn=(e,t,r)=>e+(t-e)*r;function vS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Vxe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,s=0,a=0;if(!t)i=s=a=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;i=vS(l,o,e+1/3),s=vS(l,o,e),a=vS(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function Vb(e,t){return r=>r>0?t:e}const _S=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},Uxe=[WC,Td,_h],Wxe=e=>Uxe.find(t=>t.test(e));function Pz(e){const t=Wxe(e);if(!t)return!1;let r=t.parse(e);return t===_h&&(r=Vxe(r)),r}const Ez=(e,t)=>{const r=Pz(e),n=Pz(t);if(!r||!n)return Vb(e,t);const i={...r};return s=>(i.red=_S(r.red,n.red,s),i.green=_S(r.green,n.green,s),i.blue=_S(r.blue,n.blue,s),i.alpha=Cn(r.alpha,n.alpha,s),Td.transform(i))},Gxe=(e,t)=>r=>t(e(r)),d_=(...e)=>e.reduce(Gxe),QC=new Set(["none","hidden"]);function Hxe(e,t){return QC.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function Kxe(e,t){return r=>Cn(e,t,r)}function _$(e){return typeof e=="number"?Kxe:typeof e=="string"?s$(e)?Vb:Ji.test(e)?Ez:Yxe:Array.isArray(e)?pQ:typeof e=="object"?Ji.test(e)?Ez:qxe:Vb}function pQ(e,t){const r=[...e],n=r.length,i=e.map((s,a)=>_$(s)(s,t[a]));return s=>{for(let a=0;a<n;a++)r[a]=i[a](s);return r}}function qxe(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=_$(e[i])(e[i],t[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function Xxe(e,t){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=(r=e.values[o])!==null&&r!==void 0?r:0;n[s]=l,i[a]++}return n}const Yxe=(e,t)=>{const r=pu.createTransformer(t),n=qy(e),i=qy(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?QC.has(e)&&!i.values.length||QC.has(t)&&!n.values.length?Hxe(e,t):d_(pQ(Xxe(n,i),i.values),r):Vb(e,t)};function mQ(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Cn(e,t,r):_$(e)(e,t)}const Qxe=5;function gQ(e,t,r){const n=Math.max(t-Qxe,0);return gY(r-e(n),t-n)}const Dn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xS=.001;function Zxe({duration:e=Dn.duration,bounce:t=Dn.bounce,velocity:r=Dn.velocity,mass:n=Dn.mass}){let i,s,a=1-t;a=Hl(Dn.minDamping,Dn.maxDamping,a),e=Hl(Dn.minDuration,Dn.maxDuration,Il(e)),a<1?(i=c=>{const d=c*a,u=d*e,f=d-r,p=ZC(c,a),m=Math.exp(-u);return xS-f/p*m},s=c=>{const u=c*a*e,f=u*r+r,p=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-u),g=ZC(Math.pow(c,2),a);return(-i(c)+xS>0?-1:1)*((f-p)*m)/g}):(i=c=>{const d=Math.exp(-c*e),u=(c-r)*e+1;return-xS+d*u},s=c=>{const d=Math.exp(-c*e),u=(r-c)*(e*e);return d*u});const o=5/e,l=ebe(i,s,o);if(e=$l(e),isNaN(l))return{stiffness:Dn.stiffness,damping:Dn.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:a*2*Math.sqrt(n*c),duration:e}}}const Jxe=12;function ebe(e,t,r){let n=r;for(let i=1;i<Jxe;i++)n=n-e(n)/t(n);return n}function ZC(e,t){return e*Math.sqrt(1-t*t)}const tbe=["duration","bounce"],rbe=["stiffness","damping","mass"];function Cz(e,t){return t.some(r=>e[r]!==void 0)}function nbe(e){let t={velocity:Dn.velocity,stiffness:Dn.stiffness,damping:Dn.damping,mass:Dn.mass,isResolvedFromDuration:!1,...e};if(!Cz(e,rbe)&&Cz(e,tbe))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*Hl(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Dn.mass,stiffness:i,damping:s}}else{const r=Zxe(e);t={...t,...r,mass:Dn.mass},t.isResolvedFromDuration=!0}return t}function yQ(e=Dn.visualDuration,t=Dn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:f,isResolvedFromDuration:p}=nbe({...r,velocity:-Il(r.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*d)),x=a-s,v=Il(Math.sqrt(l/d)),y=Math.abs(x)<5;n||(n=y?Dn.restSpeed.granular:Dn.restSpeed.default),i||(i=y?Dn.restDelta.granular:Dn.restDelta.default);let w;if(g<1){const _=ZC(v,g);w=T=>{const M=Math.exp(-g*v*T);return a-M*((m+g*v*x)/_*Math.sin(_*T)+x*Math.cos(_*T))}}else if(g===1)w=_=>a-Math.exp(-v*_)*(x+(m+v*x)*_);else{const _=v*Math.sqrt(g*g-1);w=T=>{const M=Math.exp(-g*v*T),k=Math.min(_*T,300);return a-M*((m+g*v*x)*Math.sinh(k)+_*x*Math.cosh(k))/_}}const b={calculatedDuration:p&&u||null,next:_=>{const T=w(_);if(p)o.done=_>=u;else{let M=0;g<1&&(M=_===0?$l(m):gQ(w,_,T));const k=Math.abs(M)<=n,j=Math.abs(a-T)<=i;o.done=k&&j}return o.value=o.done?a:T,o},toString:()=>{const _=Math.min(yY(b),BC),T=vY(M=>b.next(_*M).value,_,30);return _+"ms "+T}};return b}function jz({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],f={done:!1,value:u},p=k=>o!==void 0&&k<o||l!==void 0&&k>l,m=k=>o===void 0?l:l===void 0||Math.abs(o-k)<Math.abs(l-k)?o:l;let g=r*t;const x=u+g,v=a===void 0?x:a(x);v!==x&&(g=v-u);const y=k=>-g*Math.exp(-k/n),w=k=>v+y(k),b=k=>{const j=y(k),A=w(k);f.done=Math.abs(j)<=c,f.value=f.done?v:A};let _,T;const M=k=>{p(f.value)&&(_=k,T=yQ({keyframes:[f.value,m(f.value)],velocity:gQ(w,k,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return M(0),{calculatedDuration:null,next:k=>{let j=!1;return!T&&_===void 0&&(j=!0,b(k),M(k)),_!==void 0&&k>=_?T.next(k-_):(!j&&b(k),f)}}}const ibe=u_(.42,0,1,1),sbe=u_(0,0,.58,1),vQ=u_(.42,0,.58,1),abe=e=>Array.isArray(e)&&typeof e[0]!="number",Az={linear:aa,easeIn:ibe,easeInOut:vQ,easeOut:sbe,circIn:m$,circInOut:QY,circOut:YY,backIn:p$,backInOut:qY,backOut:KY,anticipate:XY},Oz=e=>{if(ZO(e)){FC(e.length===4);const[t,r,n,i]=e;return u_(t,r,n,i)}else if(typeof e=="string")return FC(Az[e]!==void 0),Az[e];return e};function obe(e,t,r){const n=[],i=r||mQ,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||aa:t;o=d_(l,o)}n.push(o)}return n}function lbe(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const s=e.length;if(FC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=obe(t,n,i),l=o.length,c=d=>{if(a&&d<e[0])return t[0];let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const f=fp(e[u],e[u+1],d);return o[u](f)};return r?d=>c(Hl(e[0],e[s-1],d)):c}function cbe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=fp(0,t,n);e.push(Cn(r,1,i))}}function ube(e){const t=[0];return cbe(t,e.length-1),t}function dbe(e,t){return e.map(r=>r*t)}function fbe(e,t){return e.map(()=>t||vQ).splice(0,e.length-1)}function Ub({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=abe(n)?n.map(Oz):Oz(n),s={done:!1,value:t[0]},a=dbe(r&&r.length===t.length?r:ube(t),e),o=lbe(a,t,{ease:Array.isArray(i)?i:fbe(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const hbe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>on.update(t,!0),stop:()=>hu(t),now:()=>Ri.isProcessing?Ri.timestamp:Yo.now()}},pbe={decay:jz,inertia:jz,tween:Ub,keyframes:Ub,spring:yQ},mbe=e=>e/100;class x$ extends hQ{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||v$,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=QO(r)?r:pbe[r]||Ub;let l,c;o!==Ub&&typeof t[0]!="number"&&(l=d_(mbe,mQ(t[0],t[1])),t=[0,100]);const d=o({...this.options,keyframes:t});s==="mirror"&&(c=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=yY(d));const{calculatedDuration:u}=d,f=u+i,p=f*(n+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:u,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:u}=n;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:m,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?v<0:v>d;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,b=s;if(p){const k=Math.min(this.currentTime,d)/u;let j=Math.floor(k),A=k%1;!A&&k>=1&&(A=1),A===1&&j--,j=Math.min(j,p+1),!!(j%2)&&(m==="reverse"?(A=1-A,g&&(A-=g/u)):m==="mirror"&&(b=a)),w=Hl(0,1,A)*u}const _=y?{done:!1,value:l[0]}:b.next(w);o&&(_.value=o(_.value));let{done:T}=_;!y&&c!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return M&&i!==void 0&&(_.value=X1(l,this.options,i)),x&&x(_.value),M&&this.finish(),_}get duration(){const{resolved:t}=this;return t?Il(t.calculatedDuration):0}get time(){return Il(this.currentTime)}set time(t){t=$l(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Il(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=hbe,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const gbe=new Set(["opacity","clipPath","filter","transform"]);function ybe(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:r};l&&(c.offset=l);const d=xY(o,i);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const vbe=qO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wb=10,_be=2e4;function xbe(e){return QO(e.type)||e.type==="spring"||!_Y(e.ease)}function bbe(e,t){const r=new x$({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const i=[];let s=0;for(;!n.done&&s<_be;)n=r.sample(s),i.push(n.value),s+=Wb;return{times:void 0,keyframes:i,duration:s-Wb,ease:"linear"}}const _Q={anticipate:XY,backInOut:qY,circInOut:QY};function wbe(e){return e in _Q}class $z extends hQ{constructor(t){super(t);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new fQ(s,(a,o)=>this.onKeyframesResolved(a,o),r,n,i),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Bb()&&wbe(s)&&(s=_Q[s]),xbe(this.options)){const{onComplete:u,onUpdate:f,motionValue:p,element:m,...g}=this.options,x=bbe(t,g);t=x.keyframes,t.length===1&&(t[1]=t[0]),n=x.duration,i=x.times,s=x.ease,a="keyframes"}const d=ybe(o.owner.current,l,t,{...this.options,duration:n,times:i,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(az(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:u}=this.options;o.set(X1(t,this.options,r)),u&&u(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:i,type:a,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return Il(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return Il(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=$l(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return aa;const{animation:n}=r;az(n,t)}return aa}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:i,type:s,ease:a,times:o}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:u,element:f,...p}=this.options,m=new x$({...p,keyframes:n,duration:i,type:s,ease:a,times:o,isGenerator:!0}),g=$l(this.time);c.setWithVelocity(m.sample(g-Wb).value,m.sample(g).value,Wb)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return vbe()&&n&&gbe.has(n)&&(n!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Tbe={type:"spring",stiffness:500,damping:25,restSpeed:10},Mbe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),kbe={type:"keyframes",duration:.8},Sbe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pbe=(e,{keyframes:t})=>t.length>2?kbe:pf.has(e)?e.startsWith("scale")?Mbe(t[1]):Tbe:Sbe;function Ebe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const b$=(e,t,r,n={},i,s)=>a=>{const o=YO(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-$l(l);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};Ebe(o)||(d={...d,...Pbe(e,d)}),d.duration&&(d.duration=$l(d.duration)),d.repeatDelay&&(d.repeatDelay=$l(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),d.allowFlatten=!o.type&&!o.ease,u&&!s&&t.get()!==void 0){const f=X1(d.keyframes,o);if(f!==void 0)return on.update(()=>{d.onUpdate(f),d.onComplete()}),new J_e([])}return!s&&$z.supports(d)?new $z(d):new x$(d)};function Cbe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function xQ(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);const c=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const u in l){const f=e.getValue(u,(s=e.latestValues[u])!==null&&s!==void 0?s:null),p=l[u];if(p===void 0||d&&Cbe(d,u))continue;const m={delay:r,...YO(a||{},u)};let g=!1;if(window.MotionHandoffAnimation){const v=UY(e);if(v){const y=window.MotionHandoffAnimation(v,u,on);y!==null&&(m.startTime=y,g=!0)}}UC(e,u),f.start(b$(u,f,p,e.shouldReduceMotion&&VY.has(u)?{type:!1}:m,e,g));const x=f.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{on.update(()=>{o&&ixe(e,o)})}),c}function JC(e,t,r={}){var n;const i=Ky(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const a=i?()=>Promise.all(xQ(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:f}=s;return jbe(e,t,d+c,u,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>d())}else return Promise.all([a(),o(r.delay)])}function jbe(e,t,r=0,n=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*n,l=i===1?(c=0)=>c*n:(c=0)=>o-c*n;return Array.from(e.variantChildren).sort(Abe).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(JC(c,t,{...s,delay:r+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function Abe(e,t){return e.sortNodePosition(t)}function Obe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(s=>JC(e,s,r));n=Promise.all(i)}else if(typeof t=="string")n=JC(e,t,r);else{const i=typeof t=="function"?Ky(e,t,r.custom):t;n=Promise.all(xQ(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function bQ(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const $be=r$.length;function wQ(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?wQ(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<$be;r++){const n=r$[r],i=e.props[n];(Wy(i)||i===!1)&&(t[n]=i)}return t}const Ibe=[...t$].reverse(),Nbe=t$.length;function Dbe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Obe(e,r,n)))}function Rbe(e){let t=Dbe(e),r=Iz(),n=!0;const i=l=>(c,d)=>{var u;const f=Ky(e,d,l==="exit"?(u=e.presenceContext)===null||u===void 0?void 0:u.custom:void 0);if(f){const{transition:p,transitionEnd:m,...g}=f;c={...c,...g,...m}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,d=wQ(e.parent)||{},u=[],f=new Set;let p={},m=1/0;for(let x=0;x<Nbe;x++){const v=Ibe[x],y=r[v],w=c[v]!==void 0?c[v]:d[v],b=Wy(w),_=v===l?y.isActive:null;_===!1&&(m=x);let T=w===d[v]&&w!==c[v]&&b;if(T&&n&&e.manuallyAnimateOnMount&&(T=!1),y.protectedKeys={...p},!y.isActive&&_===null||!w&&!y.prevProp||K1(w)||typeof w=="boolean")continue;const M=Lbe(y.prevProp,w);let k=M||v===l&&y.isActive&&!T&&b||x>m&&b,j=!1;const A=Array.isArray(w)?w:[w];let R=A.reduce(i(v),{});_===!1&&(R={});const{prevResolvedValues:I={}}=y,$={...I,...R},F=H=>{k=!0,f.has(H)&&(j=!0,f.delete(H)),y.needsAnimating[H]=!0;const B=e.getValue(H);B&&(B.liveStyle=!1)};for(const H in $){const B=R[H],te=I[H];if(p.hasOwnProperty(H))continue;let ae=!1;VC(B)&&VC(te)?ae=!bQ(B,te):ae=B!==te,ae?B!=null?F(H):f.add(H):B!==void 0&&f.has(H)?F(H):y.protectedKeys[H]=!0}y.prevProp=w,y.prevResolvedValues=R,y.isActive&&(p={...p,...R}),n&&e.blockInitialAnimation&&(k=!1),k&&(!(T&&M)||j)&&u.push(...A.map(H=>({animation:H,options:{type:v}})))}if(f.size){const x={};if(typeof c.initial!="boolean"){const v=Ky(e,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(x.transition=v.transition)}f.forEach(v=>{const y=e.getBaseTarget(v),w=e.getValue(v);w&&(w.liveStyle=!0),x[v]=y??null}),u.push({animation:x})}let g=!!u.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(g=!1),n=!1,g?t(u):Promise.resolve()}function o(l,c){var d;if(r[l].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),r[l].isActive=c;const u=a(l);for(const f in r)r[f].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>r,reset:()=>{r=Iz(),n=!0}}}function Lbe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bQ(t,e):!1}function Ju(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Iz(){return{animate:Ju(!0),whileInView:Ju(),whileHover:Ju(),whileTap:Ju(),whileDrag:Ju(),whileFocus:Ju(),exit:Ju()}}class ku{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Fbe extends ku{constructor(t){super(t),t.animationState||(t.animationState=Rbe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();K1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Bbe=0;class zbe extends ku{constructor(){super(...arguments),this.id=Bbe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Vbe={animation:{Feature:Fbe},exit:{Feature:zbe}};function Xy(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function f_(e){return{point:{x:e.pageX,y:e.pageY}}}const Ube=e=>t=>e$(t)&&e(t,f_(t));function iy(e,t,r,n){return Xy(e,t,Ube(r),n)}function TQ({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Wbe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Gbe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const MQ=1e-4,Hbe=1-MQ,Kbe=1+MQ,kQ=.01,qbe=0-kQ,Xbe=0+kQ;function xs(e){return e.max-e.min}function Ybe(e,t,r){return Math.abs(e-t)<=r}function Nz(e,t,r,n=.5){e.origin=n,e.originPoint=Cn(t.min,t.max,e.origin),e.scale=xs(r)/xs(t),e.translate=Cn(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Hbe&&e.scale<=Kbe||isNaN(e.scale))&&(e.scale=1),(e.translate>=qbe&&e.translate<=Xbe||isNaN(e.translate))&&(e.translate=0)}function sy(e,t,r,n){Nz(e.x,t.x,r.x,n?n.originX:void 0),Nz(e.y,t.y,r.y,n?n.originY:void 0)}function Dz(e,t,r){e.min=r.min+t.min,e.max=e.min+xs(t)}function Qbe(e,t,r){Dz(e.x,t.x,r.x),Dz(e.y,t.y,r.y)}function Rz(e,t,r){e.min=t.min-r.min,e.max=e.min+xs(t)}function ay(e,t,r){Rz(e.x,t.x,r.x),Rz(e.y,t.y,r.y)}const Lz=()=>({translate:0,scale:1,origin:0,originPoint:0}),xh=()=>({x:Lz(),y:Lz()}),Fz=()=>({min:0,max:0}),Kn=()=>({x:Fz(),y:Fz()});function xa(e){return[e("x"),e("y")]}function bS(e){return e===void 0||e===1}function ej({scale:e,scaleX:t,scaleY:r}){return!bS(e)||!bS(t)||!bS(r)}function ud(e){return ej(e)||SQ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function SQ(e){return Bz(e.x)||Bz(e.y)}function Bz(e){return e&&e!=="0%"}function Gb(e,t,r){const n=e-r,i=t*n;return r+i}function zz(e,t,r,n,i){return i!==void 0&&(e=Gb(e,i,n)),Gb(e,r,n)+t}function tj(e,t=0,r=1,n,i){e.min=zz(e.min,t,r,n,i),e.max=zz(e.max,t,r,n,i)}function PQ(e,{x:t,y:r}){tj(e.x,t.translate,t.scale,t.originPoint),tj(e.y,r.translate,r.scale,r.originPoint)}const Vz=.999999999999,Uz=1.0000000000001;function Zbe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=r[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&wh(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,PQ(e,a)),n&&ud(s.latestValues)&&wh(e,s.latestValues))}t.x<Uz&&t.x>Vz&&(t.x=1),t.y<Uz&&t.y>Vz&&(t.y=1)}function bh(e,t){e.min=e.min+t,e.max=e.max+t}function Wz(e,t,r,n,i=.5){const s=Cn(e.min,e.max,i);tj(e,t,r,s,n)}function wh(e,t){Wz(e.x,t.x,t.scaleX,t.scale,t.originX),Wz(e.y,t.y,t.scaleY,t.scale,t.originY)}function EQ(e,t){return TQ(Gbe(e.getBoundingClientRect(),t))}function Jbe(e,t,r){const n=EQ(e,r),{scroll:i}=t;return i&&(bh(n.x,i.offset.x),bh(n.y,i.offset.y)),n}const CQ=({current:e})=>e?e.ownerDocument.defaultView:null,Gz=(e,t)=>Math.abs(e-t);function ewe(e,t){const r=Gz(e.x,t.x),n=Gz(e.y,t.y);return Math.sqrt(r**2+n**2)}class jQ{constructor(t,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=TS(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=ewe(u.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:m}=u,{timestamp:g}=Ri;this.history.push({...m,timestamp:g});const{onStart:x,onMove:v}=this.handlers;f||(x&&x(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=wS(f,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=TS(u.type==="pointercancel"?this.lastMoveEventInfo:wS(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(u,x),m&&m(u,x)},!e$(t))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const a=f_(t),o=wS(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Ri;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=r;d&&d(t,TS(o,this.history)),this.removeListeners=d_(iy(this.contextWindow,"pointermove",this.handlePointerMove),iy(this.contextWindow,"pointerup",this.handlePointerUp),iy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),hu(this.updatePoint)}}function wS(e,t){return t?{point:t(e.point)}:e}function Hz(e,t){return{x:e.x-t.x,y:e.y-t.y}}function TS({point:e},t){return{point:e,delta:Hz(e,AQ(t)),offset:Hz(e,twe(t)),velocity:rwe(t,.1)}}function twe(e){return e[0]}function AQ(e){return e[e.length-1]}function rwe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=AQ(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>$l(t)));)r--;if(!n)return{x:0,y:0};const s=Il(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function nwe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Cn(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Cn(r,e,n.max):Math.min(e,r)),e}function Kz(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function iwe(e,{top:t,left:r,bottom:n,right:i}){return{x:Kz(e.x,r,i),y:Kz(e.y,t,n)}}function qz(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function swe(e,t){return{x:qz(e.x,t.x),y:qz(e.y,t.y)}}function awe(e,t){let r=.5;const n=xs(e),i=xs(t);return i>n?r=fp(t.min,t.max-n,e.min):n>i&&(r=fp(e.min,e.max-i,t.min)),Hl(0,1,r)}function owe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const rj=.35;function lwe(e=rj){return e===!1?e=0:e===!0&&(e=rj),{x:Xz(e,"left","right"),y:Xz(e,"top","bottom")}}function Xz(e,t,r){return{min:Yz(e,t),max:Yz(e,r)}}function Yz(e,t){return typeof e=="number"?e:e[t]||0}const cwe=new WeakMap;class uwe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kn(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(f_(d).point)},s=(d,u)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=s0e(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xa(x=>{let v=this.getAxisMotionValue(x).get()||0;if(Qo.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[x];w&&(v=xs(w)*(parseFloat(v)/100))}}this.originPoint[x]=v}),m&&on.postRender(()=>m(d,u)),UC(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,u)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=u;if(p&&this.currentDirection===null){this.currentDirection=dwe(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",u.point,x),this.updateAxis("y",u.point,x),this.visualElement.render(),g&&g(d,u)},o=(d,u)=>this.stop(d,u),l=()=>xa(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jQ(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:CQ(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&on.postRender(()=>s(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!K0(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=nwe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;r&&vh(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=iwe(i.layoutBox,r):this.constraints=!1,this.elastic=lwe(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&xa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=owe(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!vh(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Jbe(n,i.root,this.visualElement.getTransformPagePoint());let a=swe(i.layout.layoutBox,s);if(r){const o=r(Wbe(a));this.hasMutatedConstraints=!!o,o&&(a=TQ(o))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=xa(d=>{if(!K0(d,r,this.currentDirection))return;let u=l&&l[d]||{};a&&(u={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return UC(this.visualElement,t),n.start(b$(t,n,0,r,this.visualElement,!1))}stopAnimation(){xa(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){xa(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){xa(r=>{const{drag:n}=this.getProps();if(!K0(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[r];s.set(t[r]-Cn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!vh(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};xa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=awe({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),xa(a=>{if(!K0(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Cn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;cwe.set(this.visualElement,this);const t=this.visualElement.current,r=iy(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();vh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(n);const a=Xy(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(xa(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),r(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=rj,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function K0(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function dwe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class fwe extends ku{constructor(t){super(t),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new uwe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qz=e=>(t,r)=>{e&&on.postRender(()=>e(t,r))};class hwe extends ku{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(t){this.session=new jQ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CQ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Qz(t),onStart:Qz(r),onMove:n,onEnd:(s,a)=>{delete this.session,i&&on.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=iy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zz(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ag={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Vt.test(e))e=parseFloat(e);else return e;const r=Zz(e,t.target.x),n=Zz(e,t.target.y);return`${r}% ${n}%`}},pwe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=pu.parse(e);if(i.length>5)return n;const s=pu.createTransformer(e),a=typeof i[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=Cn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class mwe extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=t;O0e(gwe),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==r||r===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||on.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),JO.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function OQ(e){const[t,r]=X_e(),n=E.useContext(pY);return h.jsx(mwe,{...e,layoutGroup:n,switchLayoutGroup:E.useContext(CY),isPresent:t,safeToRemove:r})}const gwe={borderRadius:{...ag,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ag,borderTopRightRadius:ag,borderBottomLeftRadius:ag,borderBottomRightRadius:ag,boxShadow:pwe};function ywe(e,t,r){const n=ss(e)?e:Uy(e);return n.start(b$("",n,t,r)),n.animation}function vwe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const _we=(e,t)=>e.depth-t.depth;class xwe{constructor(){this.children=[],this.isDirty=!1}add(t){HO(this.children,t),this.isDirty=!0}remove(t){KO(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_we),this.isDirty=!1,this.children.forEach(t)}}function bwe(e,t){const r=Yo.now(),n=({timestamp:i})=>{const s=i-r;s>=t&&(hu(n),e(s-t))};return on.read(n,!0),()=>hu(n)}const $Q=["TopLeft","TopRight","BottomLeft","BottomRight"],wwe=$Q.length,Jz=e=>typeof e=="string"?parseFloat(e):e,eV=e=>typeof e=="number"||Vt.test(e);function Twe(e,t,r,n,i,s){i?(e.opacity=Cn(0,r.opacity!==void 0?r.opacity:1,Mwe(n)),e.opacityExit=Cn(t.opacity!==void 0?t.opacity:1,0,kwe(n))):s&&(e.opacity=Cn(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<wwe;a++){const o=`border${$Q[a]}Radius`;let l=tV(t,o),c=tV(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||eV(l)===eV(c)?(e[o]=Math.max(Cn(Jz(l),Jz(c),n),0),(Qo.test(c)||Qo.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=Cn(t.rotate||0,r.rotate||0,n))}function tV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Mwe=IQ(0,.5,YY),kwe=IQ(.5,.95,aa);function IQ(e,t,r){return n=>n<e?0:n>t?1:r(fp(e,t,n))}function rV(e,t){e.min=t.min,e.max=t.max}function ga(e,t){rV(e.x,t.x),rV(e.y,t.y)}function nV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function iV(e,t,r,n,i){return e-=t,e=Gb(e,1/r,n),i!==void 0&&(e=Gb(e,1/i,n)),e}function Swe(e,t=0,r=1,n=.5,i,s=e,a=e){if(Qo.test(t)&&(t=parseFloat(t),t=Cn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Cn(s.min,s.max,n);e===s&&(o-=t),e.min=iV(e.min,t,r,o,i),e.max=iV(e.max,t,r,o,i)}function sV(e,t,[r,n,i],s,a){Swe(e,t[r],t[n],t[i],t.scale,s,a)}const Pwe=["x","scaleX","originX"],Ewe=["y","scaleY","originY"];function aV(e,t,r,n){sV(e.x,t,Pwe,r?r.x:void 0,n?n.x:void 0),sV(e.y,t,Ewe,r?r.y:void 0,n?n.y:void 0)}function oV(e){return e.translate===0&&e.scale===1}function NQ(e){return oV(e.x)&&oV(e.y)}function lV(e,t){return e.min===t.min&&e.max===t.max}function Cwe(e,t){return lV(e.x,t.x)&&lV(e.y,t.y)}function cV(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function DQ(e,t){return cV(e.x,t.x)&&cV(e.y,t.y)}function uV(e){return xs(e.x)/xs(e.y)}function dV(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class jwe{constructor(){this.members=[]}add(t){HO(this.members,t),t.scheduleRender()}remove(t){if(KO(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Awe(e,t,r){let n="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(r==null?void 0:r.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:f,skewX:p,skewY:m}=r;c&&(n=`perspective(${c}px) ${n}`),d&&(n+=`rotate(${d}deg) `),u&&(n+=`rotateX(${u}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),m&&(n+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const MS=["","X","Y","Z"],Owe={visibility:"hidden"},fV=1e3;let $we=0;function kS(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function RQ(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=UY(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",on,!(i||s))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&RQ(n)}function LQ({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=$we++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Dwe),this.nodes.forEach(zwe),this.nodes.forEach(Vwe),this.nodes.forEach(Rwe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new xwe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new XO),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vwe(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),e){let u;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=bwe(f,250),Hx.hasAnimatedSinceResize&&(Hx.hasAnimatedSinceResize=!1,this.nodes.forEach(pV))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Kwe,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=d.getProps(),y=!this.targetLayout||!DQ(this.targetLayout,m),w=!f&&p;if(this.options.layoutRoot||this.resumeFrom||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,w);const b={...YO(g,"layout"),onPlay:x,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||pV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uwe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RQ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hV);return}this.isUpdating||this.nodes.forEach(Fwe),this.isUpdating=!1,this.nodes.forEach(Bwe),this.nodes.forEach(Iwe),this.nodes.forEach(Nwe),this.clearAllSnapshots();const o=Yo.now();Ri.delta=Hl(0,1e3/60,o-Ri.timestamp),Ri.timestamp=o,Ri.isProcessing=!0,mS.update.process(Ri),mS.preRender.process(Ri),mS.render.process(Ri),Ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,JO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Lwe),this.sharedNodes.forEach(Wwe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xs(this.snapshot.measuredBox.x)&&!xs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Kn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!NQ(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&(o||ud(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),qwe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Kn();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Xwe))){const{scroll:d}=this.root;d&&(bh(l.x,d.offset.x),bh(l.y,d.offset.y))}return l}removeElementScroll(a){var o;const l=Kn();if(ga(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:f}=d;d!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&ga(l,a),bh(l.x,u.offset.x),bh(l.y,u.offset.y))}return l}applyTransform(a,o=!1){const l=Kn();ga(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&wh(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ud(d.latestValues)&&wh(l,d.latestValues)}return ud(this.latestValues)&&wh(l,this.latestValues),l}removeTransform(a){const o=Kn();ga(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ud(c.latestValues))continue;ej(c.latestValues)&&c.updateSnapshot();const d=Kn(),u=c.measurePageBox();ga(d,u),aV(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ud(this.latestValues)&&aV(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Ri.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),ay(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kn(),this.targetWithTransforms=Kn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qbe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ga(this.target,this.layout.layoutBox),PQ(this.target,this.targetDelta)):ga(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),ay(this.relativeTargetOrigin,this.target,p.target),ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ej(this.parent.latestValues)||SQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ri.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;ga(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Zbe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Kn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nV(this.prevProjectionDelta.x,this.projectionDelta.x),nV(this.prevProjectionDelta.y,this.projectionDelta.y)),sy(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!dV(this.projectionDelta.x,this.prevProjectionDelta.x)||!dV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xh(),this.projectionDelta=xh(),this.projectionDeltaWithTransform=xh()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=xh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Kn(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,x=this.getStack(),v=!x||x.members.length<=1,y=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Hwe));this.animationProgress=0;let w;this.mixTargetDelta=b=>{const _=b/1e3;mV(u.x,a.x,_),mV(u.y,a.y,_),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ay(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gwe(this.relativeTarget,this.relativeTargetOrigin,f,_),w&&Cwe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Kn()),ga(w,this.relativeTarget)),g&&(this.animationValues=d,Twe(d,c,this.latestValues,_,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{Hx.hasAnimatedSinceResize=!0,this.currentAnimation=ywe(0,fV,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&FQ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Kn();const u=xs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+u;const f=xs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}ga(o,l),wh(o,d),sy(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new jwe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&kS("z",a,c,this.animationValues);for(let d=0;d<MS.length;d++)kS(`rotate${MS[d]}`,a,c,this.animationValues),kS(`skew${MS[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Owe;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Gx(a==null?void 0:a.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Gx(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ud(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=Awe(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Gy){if(f[g]===void 0)continue;const{correct:x,applyTo:v,isCSSVariable:y}=Gy[g],w=c.transform==="none"?f[g]:x(f[g],u);if(v){const b=v.length;for(let _=0;_<b;_++)c[v[_]]=w}else y?this.options.visualElement.renderState.vars[g]=w:c[g]=w}return this.options.layoutId&&(c.pointerEvents=u===this?Gx(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(hV),this.root.sharedNodes.clear()}}}function Iwe(e){e.updateLayout()}function Nwe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,a=r.source!==e.layout.source;s==="size"?xa(u=>{const f=a?r.measuredBox[u]:r.layoutBox[u],p=xs(f);f.min=n[u].min,f.max=f.min+p}):FQ(s,r.layoutBox,n)&&xa(u=>{const f=a?r.measuredBox[u]:r.layoutBox[u],p=xs(n[u]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const o=xh();sy(o,n,r.layoutBox);const l=xh();a?sy(l,e.applyTransform(i,!0),r.measuredBox):sy(l,n,r.layoutBox);const c=!NQ(o);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:p}=u;if(f&&p){const m=Kn();ay(m,r.layoutBox,f.layoutBox);const g=Kn();ay(g,n,p.layoutBox),DQ(m,g)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Dwe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Rwe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Lwe(e){e.clearSnapshot()}function hV(e){e.clearMeasurements()}function Fwe(e){e.isLayoutDirty=!1}function Bwe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function pV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function zwe(e){e.resolveTargetDelta()}function Vwe(e){e.calcProjection()}function Uwe(e){e.resetSkewAndRotation()}function Wwe(e){e.removeLeadSnapshot()}function mV(e,t,r){e.translate=Cn(t.translate,0,r),e.scale=Cn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function gV(e,t,r,n){e.min=Cn(t.min,r.min,n),e.max=Cn(t.max,r.max,n)}function Gwe(e,t,r,n){gV(e.x,t.x,r.x,n),gV(e.y,t.y,r.y,n)}function Hwe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Kwe={duration:.45,ease:[.4,0,.1,1]},yV=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),vV=yV("applewebkit/")&&!yV("chrome/")?Math.round:aa;function _V(e){e.min=vV(e.min),e.max=vV(e.max)}function qwe(e){_V(e.x),_V(e.y)}function FQ(e,t,r){return e==="position"||e==="preserve-aspect"&&!Ybe(uV(t),uV(r),.2)}function Xwe(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Ywe=LQ({attachResizeListener:(e,t)=>Xy(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),SS={current:void 0},BQ=LQ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!SS.current){const e=new Ywe({});e.mount(window),e.setOptions({layoutScroll:!0}),SS.current=e}return SS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qwe={pan:{Feature:hwe},drag:{Feature:fwe,ProjectionNode:BQ,MeasureLayout:OQ}};function xV(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,s=n[i];s&&on.postRender(()=>s(t,f_(t)))}class Zwe extends ku{mount(){const{current:t}=this.node;t&&(this.unmount=o0e(t,(r,n)=>(xV(this.node,n,"Start"),i=>xV(this.node,i,"End"))))}unmount(){}}class Jwe extends ku{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=d_(Xy(this.node.current,"focus",()=>this.onFocus()),Xy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bV(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),s=n[i];s&&on.postRender(()=>s(t,f_(t)))}class e1e extends ku{mount(){const{current:t}=this.node;t&&(this.unmount=d0e(t,(r,n)=>(bV(this.node,n,"Start"),(i,{success:s})=>bV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const nj=new WeakMap,PS=new WeakMap,t1e=e=>{const t=nj.get(e.target);t&&t(e)},r1e=e=>{e.forEach(t1e)};function n1e({root:e,...t}){const r=e||document;PS.has(r)||PS.set(r,{});const n=PS.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(r1e,{root:e,...t})),n[i]}function i1e(e,t,r){const n=n1e(t);return nj.set(e,r),n.observe(e),()=>{nj.delete(e),n.unobserve(e)}}const s1e={some:0,all:1};class a1e extends ku{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:s1e[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),f=c?d:u;f&&f(l)};return i1e(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(o1e(t,r))&&this.startObserver()}unmount(){}}function o1e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const l1e={inView:{Feature:a1e},tap:{Feature:e1e},focus:{Feature:Jwe},hover:{Feature:Zwe}},c1e={layout:{ProjectionNode:BQ,MeasureLayout:OQ}},ij={current:null},zQ={current:!1};function u1e(){if(zQ.current=!0,!!WO)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ij.current=e.matches;e.addListener(t),t()}else ij.current=!1}const d1e=[...dQ,Ji,pu],f1e=e=>d1e.find(uQ(e)),h1e=new WeakMap;function p1e(e,t,r){for(const n in t){const i=t[n],s=r[n];if(ss(i))e.addValue(n,i);else if(ss(s))e.addValue(n,Uy(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){const a=e.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(n);e.addValue(n,Uy(a!==void 0?a:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const wV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class m1e{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=v$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Yo.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,on.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=a;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=q1(r),this.isVariantNode=PY(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&ss(m)&&m.set(l[p],!1)}}mount(t){this.current=t,h1e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),zQ.current||u1e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ij.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),hu(this.notifyUpdate),hu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=pf.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&on.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in hp){const r=hp[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<wV.length;n++){const i=wV[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=p1e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Uy(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(lQ(i)||ZY(i))?i=parseFloat(i):!f1e(i)&&pu.test(r)&&(i=sQ(t,r)),this.setBaseTarget(t,ss(i)?i.get():i)),ss(i)?i.get():i}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=f$(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);a&&(i=a[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ss(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new XO),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class VQ extends m1e{constructor(){super(...arguments),this.KeyframeResolver=fQ}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ss(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function g1e(e){return window.getComputedStyle(e)}class y1e extends VQ{constructor(){super(...arguments),this.type="html",this.renderInstance=LY}readValueFromInstance(t,r){if(pf.has(r))return Cxe(t,r);{const n=g1e(t),i=(i$(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return EQ(t,r)}build(t,r,n){o$(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return h$(t,r,n)}}class v1e extends VQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&RY(this.current,this.renderState)}}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(pf.has(r)){const n=iQ(r);return n&&n.default||0}return r=FY.has(r)?r:n$(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return zY(t,r,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&on.postRender(this.updateDimensions)}build(t,r,n){u$(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,i){BY(t,r,n,i)}mount(t){this.isSVGTag=d$(t.tagName),super.mount(t)}}const _1e=(e,t)=>c$(e)?new v1e(t):new y1e(t,{allowProjection:e!==E.Fragment}),x1e=rxe({...Vbe,...l1e,...Qwe,...c1e},_1e),yt=v0e(x1e);var b1e=E.createContext(void 0);function Y1(e){const t=E.useContext(b1e);return e||t||"ltr"}function w$(e){const t=E.useRef({value:e,previous:e});return E.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var im="NavigationMenu",[T$,UQ,w1e]=r_(im),[sj,T1e,M1e]=r_(im),[M$,Z7e]=df(im,[w1e,M1e]),[k1e,La]=M$(im),[S1e,P1e]=M$(im),WQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:i,defaultValue:s,delayDuration:a=200,skipDelayDuration:o=300,orientation:l="horizontal",dir:c,...d}=e,[u,f]=E.useState(null),p=Or(t,j=>f(j)),m=Y1(c),g=E.useRef(0),x=E.useRef(0),v=E.useRef(0),[y,w]=E.useState(!0),[b="",_]=Ul({prop:n,onChange:j=>{const A=j!=="",R=o>0;A?(window.clearTimeout(v.current),R&&w(!1)):(window.clearTimeout(v.current),v.current=window.setTimeout(()=>w(!0),o)),i==null||i(j)},defaultProp:s}),T=E.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>_(""),150)},[_]),M=E.useCallback(j=>{window.clearTimeout(x.current),_(j)},[_]),k=E.useCallback(j=>{b===j?window.clearTimeout(x.current):g.current=window.setTimeout(()=>{window.clearTimeout(x.current),_(j)},a)},[b,_,a]);return E.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(x.current),window.clearTimeout(v.current)},[]),h.jsx(HQ,{scope:r,isRootMenu:!0,value:b,dir:m,orientation:l,rootNavigationMenu:u,onTriggerEnter:j=>{window.clearTimeout(g.current),y?k(j):M(j)},onTriggerLeave:()=>{window.clearTimeout(g.current),T()},onContentEnter:()=>window.clearTimeout(x.current),onContentLeave:T,onItemSelect:j=>{_(A=>A===j?"":j)},onItemDismiss:()=>_(""),children:h.jsx(Ft.nav,{"aria-label":"Main","data-orientation":l,dir:m,...d,ref:p})})});WQ.displayName=im;var GQ="NavigationMenuSub",E1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",...o}=e,l=La(GQ,r),[c="",d]=Ul({prop:n,onChange:i,defaultProp:s});return h.jsx(HQ,{scope:r,isRootMenu:!1,value:c,dir:l.dir,orientation:a,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:u=>d(u),onItemSelect:u=>d(u),onItemDismiss:()=>d(""),children:h.jsx(Ft.div,{"data-orientation":a,...o,ref:t})})});E1e.displayName=GQ;var HQ=e=>{const{scope:t,isRootMenu:r,rootNavigationMenu:n,dir:i,orientation:s,children:a,value:o,onItemSelect:l,onItemDismiss:c,onTriggerEnter:d,onTriggerLeave:u,onContentEnter:f,onContentLeave:p}=e,[m,g]=E.useState(null),[x,v]=E.useState(new Map),[y,w]=E.useState(null);return h.jsx(k1e,{scope:t,isRootMenu:r,rootNavigationMenu:n,value:o,previousValue:w$(o),baseId:Xo(),dir:i,orientation:s,viewport:m,onViewportChange:g,indicatorTrack:y,onIndicatorTrackChange:w,onTriggerEnter:Xn(d),onTriggerLeave:Xn(u),onContentEnter:Xn(f),onContentLeave:Xn(p),onItemSelect:Xn(l),onItemDismiss:Xn(c),onViewportContentChange:E.useCallback((b,_)=>{v(T=>(T.set(b,_),new Map(T)))},[]),onViewportContentRemove:E.useCallback(b=>{v(_=>_.has(b)?(_.delete(b),new Map(_)):_)},[]),children:h.jsx(T$.Provider,{scope:t,children:h.jsx(S1e,{scope:t,items:x,children:a})})})},KQ="NavigationMenuList",qQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=La(KQ,r),s=h.jsx(Ft.ul,{"data-orientation":i.orientation,...n,ref:t});return h.jsx(Ft.div,{style:{position:"relative"},ref:i.onIndicatorTrackChange,children:h.jsx(T$.Slot,{scope:r,children:i.isRootMenu?h.jsx(iZ,{asChild:!0,children:s}):s})})});qQ.displayName=KQ;var XQ="NavigationMenuItem",[C1e,YQ]=M$(XQ),QQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,...i}=e,s=Xo(),a=n||s||"LEGACY_REACT_AUTO_VALUE",o=E.useRef(null),l=E.useRef(null),c=E.useRef(null),d=E.useRef(()=>{}),u=E.useRef(!1),f=E.useCallback((m="start")=>{if(o.current){d.current();const g=oj(o.current);g.length&&P$(m==="start"?g:g.reverse())}},[]),p=E.useCallback(()=>{if(o.current){const m=oj(o.current);m.length&&(d.current=D1e(m))}},[]);return h.jsx(C1e,{scope:r,value:a,triggerRef:l,contentRef:o,focusProxyRef:c,wasEscapeCloseRef:u,onEntryKeyDown:f,onFocusProxyEnter:f,onRootContentClose:p,onContentFocusOutside:p,children:h.jsx(Ft.li,{...i,ref:t})})});QQ.displayName=XQ;var aj="NavigationMenuTrigger",ZQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,disabled:n,...i}=e,s=La(aj,e.__scopeNavigationMenu),a=YQ(aj,e.__scopeNavigationMenu),o=E.useRef(null),l=Or(o,a.triggerRef,t),c=aZ(s.baseId,a.value),d=oZ(s.baseId,a.value),u=E.useRef(!1),f=E.useRef(!1),p=a.value===s.value;return h.jsxs(h.Fragment,{children:[h.jsx(T$.ItemSlot,{scope:r,value:a.value,children:h.jsx(sZ,{asChild:!0,children:h.jsx(Ft.button,{id:c,disabled:n,"data-disabled":n?"":void 0,"data-state":E$(p),"aria-expanded":p,"aria-controls":d,...i,ref:l,onPointerEnter:xt(e.onPointerEnter,()=>{f.current=!1,a.wasEscapeCloseRef.current=!1}),onPointerMove:xt(e.onPointerMove,Hb(()=>{n||f.current||a.wasEscapeCloseRef.current||u.current||(s.onTriggerEnter(a.value),u.current=!0)})),onPointerLeave:xt(e.onPointerLeave,Hb(()=>{n||(s.onTriggerLeave(),u.current=!1)})),onClick:xt(e.onClick,()=>{s.onItemSelect(a.value),f.current=p}),onKeyDown:xt(e.onKeyDown,m=>{const x={horizontal:"ArrowDown",vertical:s.dir==="rtl"?"ArrowLeft":"ArrowRight"}[s.orientation];p&&m.key===x&&(a.onEntryKeyDown(),m.preventDefault())})})})}),p&&h.jsxs(h.Fragment,{children:[h.jsx(d7,{"aria-hidden":!0,tabIndex:0,ref:a.focusProxyRef,onFocus:m=>{const g=a.contentRef.current,x=m.relatedTarget,v=x===o.current,y=g==null?void 0:g.contains(x);(v||!y)&&a.onFocusProxyEnter(v?"start":"end")}}),s.viewport&&h.jsx("span",{"aria-owns":d})]})]})});ZQ.displayName=aj;var j1e="NavigationMenuLink",TV="navigationMenu.linkSelect",JQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,active:n,onSelect:i,...s}=e;return h.jsx(sZ,{asChild:!0,children:h.jsx(Ft.a,{"data-active":n?"":void 0,"aria-current":n?"page":void 0,...s,ref:t,onClick:xt(e.onClick,a=>{const o=a.target,l=new CustomEvent(TV,{bubbles:!0,cancelable:!0});if(o.addEventListener(TV,c=>i==null?void 0:i(c),{once:!0}),Sb(o,l),!l.defaultPrevented&&!a.metaKey){const c=new CustomEvent(Kx,{bubbles:!0,cancelable:!0});Sb(o,c)}},{checkForDefaultPrevented:!1})})})});JQ.displayName=j1e;var k$="NavigationMenuIndicator",eZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=La(k$,e.__scopeNavigationMenu),s=!!i.value;return i.indicatorTrack?uO.createPortal(h.jsx(Ra,{present:r||s,children:h.jsx(A1e,{...n,ref:t})}),i.indicatorTrack):null});eZ.displayName=k$;var A1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=La(k$,r),s=UQ(r),[a,o]=E.useState(null),[l,c]=E.useState(null),d=i.orientation==="horizontal",u=!!i.value;E.useEffect(()=>{var g;const m=(g=s().find(x=>x.value===i.value))==null?void 0:g.ref.current;m&&o(m)},[s,i.value]);const f=()=>{a&&c({size:d?a.offsetWidth:a.offsetHeight,offset:d?a.offsetLeft:a.offsetTop})};return lj(a,f),lj(i.indicatorTrack,f),l?h.jsx(Ft.div,{"aria-hidden":!0,"data-state":u?"visible":"hidden","data-orientation":i.orientation,...n,ref:t,style:{position:"absolute",...d?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...n.style}}):null}),mp="NavigationMenuContent",tZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=La(mp,e.__scopeNavigationMenu),s=YQ(mp,e.__scopeNavigationMenu),a=Or(s.contentRef,t),o=s.value===i.value,l={value:s.value,triggerRef:s.triggerRef,focusProxyRef:s.focusProxyRef,wasEscapeCloseRef:s.wasEscapeCloseRef,onContentFocusOutside:s.onContentFocusOutside,onRootContentClose:s.onRootContentClose,...n};return i.viewport?h.jsx(O1e,{forceMount:r,...l,ref:a}):h.jsx(Ra,{present:r||o,children:h.jsx(rZ,{"data-state":E$(o),...l,ref:a,onPointerEnter:xt(e.onPointerEnter,i.onContentEnter),onPointerLeave:xt(e.onPointerLeave,Hb(i.onContentLeave)),style:{pointerEvents:!o&&i.isRootMenu?"none":void 0,...l.style}})})});tZ.displayName=mp;var O1e=E.forwardRef((e,t)=>{const r=La(mp,e.__scopeNavigationMenu),{onViewportContentChange:n,onViewportContentRemove:i}=r;return wi(()=>{n(e.value,{ref:t,...e})},[e,t,n]),wi(()=>()=>i(e.value),[e.value,i]),null}),Kx="navigationMenu.rootContentDismiss",rZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,triggerRef:i,focusProxyRef:s,wasEscapeCloseRef:a,onRootContentClose:o,onContentFocusOutside:l,...c}=e,d=La(mp,r),u=E.useRef(null),f=Or(u,t),p=aZ(d.baseId,n),m=oZ(d.baseId,n),g=UQ(r),x=E.useRef(null),{onItemDismiss:v}=d;E.useEffect(()=>{const w=u.current;if(d.isRootMenu&&w){const b=()=>{var _;v(),o(),w.contains(document.activeElement)&&((_=i.current)==null||_.focus())};return w.addEventListener(Kx,b),()=>w.removeEventListener(Kx,b)}},[d.isRootMenu,e.value,i,v,o]);const y=E.useMemo(()=>{const b=g().map(A=>A.value);d.dir==="rtl"&&b.reverse();const _=b.indexOf(d.value),T=b.indexOf(d.previousValue),M=n===d.value,k=T===b.indexOf(n);if(!M&&!k)return x.current;const j=(()=>{if(_!==T){if(M&&T!==-1)return _>T?"from-end":"from-start";if(k&&_!==-1)return _>T?"to-start":"to-end"}return null})();return x.current=j,j},[d.previousValue,d.value,d.dir,g,n]);return h.jsx(iZ,{asChild:!0,children:h.jsx(qp,{id:m,"aria-labelledby":p,"data-motion":y,"data-orientation":d.orientation,...c,ref:f,disableOutsidePointerEvents:!1,onDismiss:()=>{var b;const w=new Event(Kx,{bubbles:!0,cancelable:!0});(b=u.current)==null||b.dispatchEvent(w)},onFocusOutside:xt(e.onFocusOutside,w=>{var _;l();const b=w.target;(_=d.rootNavigationMenu)!=null&&_.contains(b)&&w.preventDefault()}),onPointerDownOutside:xt(e.onPointerDownOutside,w=>{var M;const b=w.target,_=g().some(k=>{var j;return(j=k.ref.current)==null?void 0:j.contains(b)}),T=d.isRootMenu&&((M=d.viewport)==null?void 0:M.contains(b));(_||T||!d.isRootMenu)&&w.preventDefault()}),onKeyDown:xt(e.onKeyDown,w=>{var T;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const M=oj(w.currentTarget),k=document.activeElement,j=M.findIndex(I=>I===k),R=w.shiftKey?M.slice(0,j).reverse():M.slice(j+1,M.length);P$(R)?w.preventDefault():(T=s.current)==null||T.focus()}}),onEscapeKeyDown:xt(e.onEscapeKeyDown,w=>{a.current=!0})})})}),S$="NavigationMenuViewport",nZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=!!La(S$,e.__scopeNavigationMenu).value;return h.jsx(Ra,{present:r||s,children:h.jsx($1e,{...n,ref:t})})});nZ.displayName=S$;var $1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,children:n,...i}=e,s=La(S$,r),a=Or(t,s.onViewportChange),o=P1e(mp,e.__scopeNavigationMenu),[l,c]=E.useState(null),[d,u]=E.useState(null),f=l?(l==null?void 0:l.width)+"px":void 0,p=l?(l==null?void 0:l.height)+"px":void 0,m=!!s.value,g=m?s.value:s.previousValue;return lj(d,()=>{d&&c({width:d.offsetWidth,height:d.offsetHeight})}),h.jsx(Ft.div,{"data-state":E$(m),"data-orientation":s.orientation,...i,ref:a,style:{pointerEvents:!m&&s.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":f,"--radix-navigation-menu-viewport-height":p,...i.style},onPointerEnter:xt(e.onPointerEnter,s.onContentEnter),onPointerLeave:xt(e.onPointerLeave,Hb(s.onContentLeave)),children:Array.from(o.items).map(([v,{ref:y,forceMount:w,...b}])=>{const _=g===v;return h.jsx(Ra,{present:w||_,children:h.jsx(rZ,{...b,ref:fO(y,T=>{_&&T&&u(T)})})},v)})})}),I1e="FocusGroup",iZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=La(I1e,r);return h.jsx(sj.Provider,{scope:r,children:h.jsx(sj.Slot,{scope:r,children:h.jsx(Ft.div,{dir:i.dir,...n,ref:t})})})}),MV=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],N1e="FocusGroupItem",sZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=T1e(r),s=La(N1e,r);return h.jsx(sj.ItemSlot,{scope:r,children:h.jsx(Ft.button,{...n,ref:t,onKeyDown:xt(e.onKeyDown,a=>{if(["Home","End",...MV].includes(a.key)){let l=i().map(u=>u.ref.current);if([s.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(a.key)&&l.reverse(),MV.includes(a.key)){const u=l.indexOf(a.currentTarget);l=l.slice(u+1)}setTimeout(()=>P$(l)),a.preventDefault()}})})})});function oj(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function P$(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}function D1e(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{const r=t.dataset.tabindex;t.setAttribute("tabindex",r)})}}function lj(e,t){const r=Xn(t);wi(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}function E$(e){return e?"open":"closed"}function aZ(e,t){return`${e}-trigger-${t}`}function oZ(e,t){return`${e}-content-${t}`}function Hb(e){return t=>t.pointerType==="mouse"?e(t):void 0}var lZ=WQ,cZ=qQ,R1e=QQ,uZ=ZQ,L1e=JQ,dZ=eZ,fZ=tZ,hZ=nZ;const pZ=E.forwardRef(({className:e,children:t,...r},n)=>h.jsxs(lZ,{ref:n,className:kt("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...r,children:[t,h.jsx(vZ,{})]}));pZ.displayName=lZ.displayName;const mZ=E.forwardRef(({className:e,...t},r)=>h.jsx(cZ,{ref:r,className:kt("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));mZ.displayName=cZ.displayName;const Uf=R1e,Dg=i_("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),gZ=E.forwardRef(({className:e,children:t,...r},n)=>h.jsxs(uZ,{ref:n,className:kt(Dg(),"group",e),...r,children:[t," ",h.jsx(yO,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));gZ.displayName=uZ.displayName;const yZ=E.forwardRef(({className:e,...t},r)=>h.jsx(fZ,{ref:r,className:kt("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",e),...t}));yZ.displayName=fZ.displayName;const q0=L1e,vZ=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{className:kt("absolute left-0 top-full flex justify-center"),children:h.jsx(hZ,{className:kt("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:r,...t})}));vZ.displayName=hZ.displayName;const F1e=E.forwardRef(({className:e,...t},r)=>h.jsx(dZ,{ref:r,className:kt("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:h.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));F1e.displayName=dZ.displayName;const B1e=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(null),[i,s]=E.useState(null),a=E.useCallback(async l=>{t(!0),s(null);try{const c=new Image;return c.crossOrigin="anonymous",new Promise((d,u)=>{c.onload=()=>{try{const f=document.createElement("canvas"),p=f.getContext("2d");if(!p)throw new Error("Could not get canvas context");f.width=c.width,f.height=c.height,p.drawImage(c,0,0);const m=p.getImageData(0,0,f.width,f.height),g=m.data;for(let x=0;x<g.length;x+=4){const v=g[x],y=g[x+1],w=g[x+2],b=Math.abs(v-y)<30&&Math.abs(y-w)<30&&Math.abs(v-w)<30,_=v>180&&y>180&&w>180,T=v<100&&y<100&&w<100,M=v>200&&y>200&&w>200;b&&(_||T)&&!M?g[x+3]=0:M&&(g[x+3]=255)}p.putImageData(m,0,0),f.toBlob(x=>{if(x){const v=URL.createObjectURL(x);n(v),t(!1),d(v)}else t(!1),u(new Error("Failed to create blob"))},"image/png")}catch(f){t(!1);const p=f instanceof Error?f.message:"Processing failed";s(p),u(f)}},c.onerror=()=>{t(!1);const f="Failed to load image";s(f),u(new Error(f))},c.src=l})}catch(c){t(!1);const d=c instanceof Error?c.message:"Unknown error occurred";return s(d),console.error("Background removal failed:",c),null}},[]),o=E.useCallback(()=>{r&&URL.revokeObjectURL(r),n(null),s(null),t(!1)},[r]);return{processImage:a,isProcessing:e,processedImageUrl:r,error:i,reset:o}},z1e=({originalImageUrl:e,alt:t,width:r=40,height:n=40,className:i=""})=>{const{processImage:s,processedImageUrl:a,isProcessing:o,error:l}=B1e(),[c,d]=E.useState(!0);return E.useEffect(()=>{c&&e&&(s(e),d(!1))},[e,s,c]),o?h.jsx("div",{className:`flex items-center justify-center bg-muted/20 rounded ${i}`,style:{width:r,height:n},children:h.jsx("div",{className:"w-4 h-4 border-2 border-white border-r-transparent rounded-full animate-spin"})}):l?(console.error("Logo processing error:",l),h.jsx("img",{src:e,alt:t,width:r,height:n,className:i})):h.jsx("img",{src:a||e,alt:t,width:r,height:n,className:i})},V1e=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(!1),{user:i,signOut:s}=ec();E.useEffect(()=>{const o=()=>{window.scrollY>10?t(!0):t(!1)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const a=()=>{n(!r)};return h.jsxs(yt.nav,{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 w-full",initial:{opacity:1,y:0},animate:{opacity:1,y:0},children:[h.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 mx-auto",children:h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsxs(Xr,{to:i?"/dashboard":"/",className:"flex items-center space-x-3",children:[h.jsx(z1e,{originalImageUrl:"/lovable-uploads/296f9efc-c5a2-4029-bb1d-02f258233174.png",alt:"WiFi Logo",width:40,height:40,className:"flex-shrink-0"}),h.jsx("span",{className:"text-xl font-bold text-white",children:"OmaVerkkoturva"})]})}),h.jsx("div",{className:"hidden md:block",children:i?h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("span",{className:"text-white text-sm",children:i.email}),h.jsx("button",{onClick:s,className:"px-4 py-2 rounded-md transition-colors font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Kirjaudu ulos"})]}):h.jsx(pZ,{className:"text-white",children:h.jsxs(mZ,{children:[h.jsx(Uf,{children:h.jsx(Xr,{to:"/",children:h.jsx(q0,{className:kt(Dg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Etusivu"})})}),h.jsxs(Uf,{children:[h.jsx(gZ,{className:"text-white hover:text-gray-200 bg-transparent hover:bg-white/10",children:"Tuotteet"}),h.jsx(yZ,{children:h.jsx("ul",{className:"grid gap-3 p-4 w-[300px] bg-white shadow-lg border rounded-md",children:h.jsx("li",{children:h.jsxs(Xr,{to:"/identiteettiturva",className:"block p-3 space-y-1 rounded-md hover:bg-gray-100",children:[h.jsx("div",{className:"font-medium text-gray-900",children:"Identiteettiturva"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Suojaa henkilöllisyytesi verkossa"})]})})})})]}),h.jsx(Uf,{children:h.jsx(Xr,{to:"/meista",children:h.jsx(q0,{className:kt(Dg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Meistä"})})}),h.jsx(Uf,{children:h.jsx(Xr,{to:"/artikkelit",children:h.jsx(q0,{className:kt(Dg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Artikkelit"})})}),h.jsx(Uf,{children:h.jsx(Xr,{to:"/ota-yhteytta",children:h.jsx(q0,{className:kt(Dg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Ota yhteyttä"})})}),h.jsx(Uf,{children:h.jsx(Xr,{to:"/kirjaudu",children:h.jsx("button",{className:"px-4 py-2 rounded-md transition-colors font-medium text-white hover:bg-blue-800 border border-white/20 hover:border-white/40",style:{backgroundColor:"#1e3a8a"},children:"Kirjaudu"})})})]})})}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{onClick:a,className:"focus:outline-none text-white",children:r?h.jsx(xO,{size:24}):h.jsx(che,{size:24})})})]})}),h.jsx("div",{className:kt("md:hidden transition-all duration-300 overflow-hidden w-full",r?"max-h-80 opacity-100":"max-h-0 opacity-0"),children:h.jsx("div",{className:"px-3 pt-2 pb-3 space-y-1 shadow-sm overflow-y-auto max-h-80 bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950",children:i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-3 py-2 text-sm text-white",children:i.email}),h.jsx("button",{onClick:()=>{s(),n(!1)},className:"block w-full text-left px-3 py-1.5 rounded-md text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Kirjaudu ulos"})]}):h.jsxs(h.Fragment,{children:[h.jsx(Xr,{to:"/",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Etusivu"}),h.jsx(Xr,{to:"/identiteettiturva",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Identiteettiturva"}),h.jsx(Xr,{to:"/meista",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Meistä"}),h.jsx(Xr,{to:"/artikkelit",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Artikkelit"}),h.jsx(Xr,{to:"/ota-yhteytta",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Ota yhteyttä"}),h.jsx(Xr,{to:"/kirjaudu",className:"block px-3 py-1.5 rounded-md text-sm font-medium text-white hover:bg-blue-800 border border-white/20 hover:border-white/40",style:{backgroundColor:"#1e3a8a"},onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Kirjaudu"})]})})})]})};var ES="focusScope.autoFocusOnMount",CS="focusScope.autoFocusOnUnmount",kV={bubbles:!1,cancelable:!0},U1e="FocusScope",C$=E.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=E.useState(null),c=Xn(i),d=Xn(s),u=E.useRef(null),f=Or(t,g=>l(g)),p=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let g=function(w){if(p.paused||!o)return;const b=w.target;o.contains(b)?u.current=b:Mc(u.current,{select:!0})},x=function(w){if(p.paused||!o)return;const b=w.relatedTarget;b!==null&&(o.contains(b)||Mc(u.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Mc(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const y=new MutationObserver(v);return o&&y.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),y.disconnect()}}},[n,o,p.paused]),E.useEffect(()=>{if(o){PV.add(p);const g=document.activeElement;if(!o.contains(g)){const v=new CustomEvent(ES,kV);o.addEventListener(ES,c),o.dispatchEvent(v),v.defaultPrevented||(W1e(X1e(_Z(o)),{select:!0}),document.activeElement===g&&Mc(o))}return()=>{o.removeEventListener(ES,c),setTimeout(()=>{const v=new CustomEvent(CS,kV);o.addEventListener(CS,d),o.dispatchEvent(v),v.defaultPrevented||Mc(g??document.body,{select:!0}),o.removeEventListener(CS,d),PV.remove(p)},0)}}},[o,c,d,p]);const m=E.useCallback(g=>{if(!r&&!n||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(x&&v){const y=g.currentTarget,[w,b]=G1e(y);w&&b?!g.shiftKey&&v===b?(g.preventDefault(),r&&Mc(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),r&&Mc(b,{select:!0})):v===y&&g.preventDefault()}},[r,n,p.paused]);return h.jsx(Ft.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});C$.displayName=U1e;function W1e(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Mc(n,{select:t}),document.activeElement!==r)return}function G1e(e){const t=_Z(e),r=SV(t,e),n=SV(t.reverse(),e);return[r,n]}function _Z(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function SV(e,t){for(const r of e)if(!H1e(r,{upTo:t}))return r}function H1e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function K1e(e){return e instanceof HTMLInputElement&&"select"in e}function Mc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&K1e(e)&&t&&e.select()}}var PV=q1e();function q1e(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=EV(e,t),e.unshift(t)},remove(t){var r;e=EV(e,t),(r=e[0])==null||r.resume()}}}function EV(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function X1e(e){return e.filter(t=>t.tagName!=="A")}var jS=0;function xZ(){E.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??CV()),document.body.insertAdjacentElement("beforeend",e[1]??CV()),jS++,()=>{jS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jS--}},[])}function CV(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Wo=function(){return Wo=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Wo.apply(this,arguments)};function bZ(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Y1e(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var qx="right-scroll-bar-position",Xx="width-before-scroll-bar",Q1e="with-scroll-bars-hidden",Z1e="--removed-body-scroll-bar-size";function AS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function J1e(e,t){var r=E.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var eTe=typeof window<"u"?E.useLayoutEffect:E.useEffect,jV=new WeakMap;function tTe(e,t){var r=J1e(null,function(n){return e.forEach(function(i){return AS(i,n)})});return eTe(function(){var n=jV.get(r);if(n){var i=new Set(n),s=new Set(e),a=r.current;i.forEach(function(o){s.has(o)||AS(o,null)}),s.forEach(function(o){i.has(o)||AS(o,a)})}jV.set(r,e)},[e]),r}function rTe(e){return e}function nTe(e,t){t===void 0&&(t=rTe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var a=t(s,n);return r.push(a),function(){r=r.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(o){return s(o)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var o=r;r=[],o.forEach(s),a=r}var l=function(){var d=a;a=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(d){a.push(d),c()},filter:function(d){return a=a.filter(d),r}}}};return i}function iTe(e){e===void 0&&(e={});var t=nTe(null);return t.options=Wo({async:!0,ssr:!1},e),t}var wZ=function(e){var t=e.sideCar,r=bZ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,Wo({},r))};wZ.isSideCarExport=!0;function sTe(e,t){return e.useMedium(t),wZ}var TZ=iTe(),OS=function(){},Q1=E.forwardRef(function(e,t){var r=E.useRef(null),n=E.useState({onScrollCapture:OS,onWheelCapture:OS,onTouchMoveCapture:OS}),i=n[0],s=n[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,f=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,y=e.gapMode,w=bZ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,_=tTe([r,t]),T=Wo(Wo({},w),i);return E.createElement(E.Fragment,null,d&&E.createElement(b,{sideCar:TZ,removeScrollBar:c,shards:u,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:y}),a?E.cloneElement(E.Children.only(o),Wo(Wo({},T),{ref:_})):E.createElement(v,Wo({},T,{className:l,ref:_}),o))});Q1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q1.classNames={fullWidth:Xx,zeroRight:qx};var aTe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oTe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=aTe();return t&&e.setAttribute("nonce",t),e}function lTe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function cTe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var uTe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=oTe())&&(lTe(t,r),cTe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dTe=function(){var e=uTe();return function(t,r){E.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},MZ=function(){var e=dTe(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},fTe={left:0,top:0,right:0,gap:0},$S=function(e){return parseInt(e||"",10)||0},hTe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[$S(r),$S(n),$S(i)]},pTe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fTe;var t=hTe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},mTe=MZ(),zh="data-scroll-locked",gTe=function(e,t,r,n){var i=e.left,s=e.top,a=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Q1e,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(zh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qx,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Xx,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(qx," .").concat(qx,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Xx," .").concat(Xx,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(zh,`] {
    `).concat(Z1e,": ").concat(o,`px;
  }
`)},AV=function(){var e=parseInt(document.body.getAttribute(zh)||"0",10);return isFinite(e)?e:0},yTe=function(){E.useEffect(function(){return document.body.setAttribute(zh,(AV()+1).toString()),function(){var e=AV()-1;e<=0?document.body.removeAttribute(zh):document.body.setAttribute(zh,e.toString())}},[])},vTe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;yTe();var s=E.useMemo(function(){return pTe(i)},[i]);return E.createElement(mTe,{styles:gTe(s,!t,i,r?"":"!important")})},cj=!1;if(typeof window<"u")try{var X0=Object.defineProperty({},"passive",{get:function(){return cj=!0,!0}});window.addEventListener("test",X0,X0),window.removeEventListener("test",X0,X0)}catch{cj=!1}var Wf=cj?{passive:!1}:!1,_Te=function(e){return e.tagName==="TEXTAREA"},kZ=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!_Te(e)&&r[t]==="visible")},xTe=function(e){return kZ(e,"overflowY")},bTe=function(e){return kZ(e,"overflowX")},OV=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=SZ(e,n);if(i){var s=PZ(e,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},wTe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},TTe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},SZ=function(e,t){return e==="v"?xTe(t):bTe(t)},PZ=function(e,t){return e==="v"?wTe(t):TTe(t)},MTe=function(e,t){return e==="h"&&t==="rtl"?-1:1},kTe=function(e,t,r,n,i){var s=MTe(e,window.getComputedStyle(t).direction),a=s*n,o=r.target,l=t.contains(o),c=!1,d=a>0,u=0,f=0;do{var p=PZ(e,o),m=p[0],g=p[1],x=p[2],v=g-x-s*m;(m||v)&&SZ(e,o)&&(u+=v,f+=m),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&(Math.abs(u)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(c=!0),c},Y0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$V=function(e){return[e.deltaX,e.deltaY]},IV=function(e){return e&&"current"in e?e.current:e},STe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PTe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ETe=0,Gf=[];function CTe(e){var t=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),i=E.useState(ETe++)[0],s=E.useState(MZ)[0],a=E.useRef(e);E.useEffect(function(){a.current=e},[e]),E.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Y1e([e.lockRef.current],(e.shards||[]).map(IV),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=E.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=Y0(g),y=r.current,w="deltaX"in g?g.deltaX:y[0]-v[0],b="deltaY"in g?g.deltaY:y[1]-v[1],_,T=g.target,M=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in g&&M==="h"&&T.type==="range")return!1;var k=OV(M,T);if(!k)return!0;if(k?_=M:(_=M==="v"?"h":"v",k=OV(M,T)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||b)&&(n.current=_),!_)return!0;var j=n.current||_;return kTe(j,x,g,j==="h"?w:b,!0)},[]),l=E.useCallback(function(g){var x=g;if(!(!Gf.length||Gf[Gf.length-1]!==s)){var v="deltaY"in x?$V(x):Y0(x),y=t.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&STe(_.delta,v)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(IV).filter(Boolean).filter(function(_){return _.contains(x.target)}),b=w.length>0?o(x,w[0]):!a.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),c=E.useCallback(function(g,x,v,y){var w={name:g,delta:x,target:v,should:y,shadowParent:jTe(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(b){return b!==w})},1)},[]),d=E.useCallback(function(g){r.current=Y0(g),n.current=void 0},[]),u=E.useCallback(function(g){c(g.type,$V(g),g.target,o(g,e.lockRef.current))},[]),f=E.useCallback(function(g){c(g.type,Y0(g),g.target,o(g,e.lockRef.current))},[]);E.useEffect(function(){return Gf.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Wf),document.addEventListener("touchmove",l,Wf),document.addEventListener("touchstart",d,Wf),function(){Gf=Gf.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Wf),document.removeEventListener("touchmove",l,Wf),document.removeEventListener("touchstart",d,Wf)}},[]);var p=e.removeScrollBar,m=e.inert;return E.createElement(E.Fragment,null,m?E.createElement(s,{styles:PTe(i)}):null,p?E.createElement(vTe,{gapMode:e.gapMode}):null)}function jTe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ATe=sTe(TZ,CTe);var j$=E.forwardRef(function(e,t){return E.createElement(Q1,Wo({},e,{ref:t,sideCar:ATe}))});j$.classNames=Q1.classNames;var OTe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hf=new WeakMap,Q0=new WeakMap,Z0={},IS=0,EZ=function(e){return e&&(e.host||EZ(e.parentNode))},$Te=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=EZ(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ITe=function(e,t,r,n){var i=$Te(t,Array.isArray(e)?e:[e]);Z0[r]||(Z0[r]=new WeakMap);var s=Z0[r],a=[],o=new Set,l=new Set(i),c=function(u){!u||o.has(u)||(o.add(u),c(u.parentNode))};i.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(f){if(o.has(f))d(f);else try{var p=f.getAttribute(n),m=p!==null&&p!=="false",g=(Hf.get(f)||0)+1,x=(s.get(f)||0)+1;Hf.set(f,g),s.set(f,x),a.push(f),g===1&&m&&Q0.set(f,!0),x===1&&f.setAttribute(r,"true"),m||f.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(t),o.clear(),IS++,function(){a.forEach(function(u){var f=Hf.get(u)-1,p=s.get(u)-1;Hf.set(u,f),s.set(u,p),f||(Q0.has(u)||u.removeAttribute(n),Q0.delete(u)),p||u.removeAttribute(r)}),IS--,IS||(Hf=new WeakMap,Hf=new WeakMap,Q0=new WeakMap,Z0={})}},CZ=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=OTe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),ITe(n,i,r,"aria-hidden")):function(){return null}},A$="Dialog",[jZ,J7e]=df(A$),[NTe,Po]=jZ(A$),AZ=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=E.useRef(null),l=E.useRef(null),[c=!1,d]=Ul({prop:n,defaultProp:i,onChange:s});return h.jsx(NTe,{scope:t,triggerRef:o,contentRef:l,contentId:Xo(),titleId:Xo(),descriptionId:Xo(),open:c,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(u=>!u),[d]),modal:a,children:r})};AZ.displayName=A$;var OZ="DialogTrigger",$Z=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Po(OZ,r),s=Or(t,i.triggerRef);return h.jsx(Ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":I$(i.open),...n,ref:s,onClick:xt(e.onClick,i.onOpenToggle)})});$Z.displayName=OZ;var O$="DialogPortal",[DTe,IZ]=jZ(O$,{forceMount:void 0}),NZ=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=Po(O$,t);return h.jsx(DTe,{scope:t,forceMount:r,children:E.Children.map(n,a=>h.jsx(Ra,{present:r||s.open,children:h.jsx(P1,{asChild:!0,container:i,children:a})}))})};NZ.displayName=O$;var Kb="DialogOverlay",DZ=E.forwardRef((e,t)=>{const r=IZ(Kb,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Po(Kb,e.__scopeDialog);return s.modal?h.jsx(Ra,{present:n||s.open,children:h.jsx(RTe,{...i,ref:t})}):null});DZ.displayName=Kb;var RTe=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Po(Kb,r);return h.jsx(j$,{as:lu,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(Ft.div,{"data-state":I$(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Yd="DialogContent",RZ=E.forwardRef((e,t)=>{const r=IZ(Yd,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Po(Yd,e.__scopeDialog);return h.jsx(Ra,{present:n||s.open,children:s.modal?h.jsx(LTe,{...i,ref:t}):h.jsx(FTe,{...i,ref:t})})});RZ.displayName=Yd;var LTe=E.forwardRef((e,t)=>{const r=Po(Yd,e.__scopeDialog),n=E.useRef(null),i=Or(t,r.contentRef,n);return E.useEffect(()=>{const s=n.current;if(s)return CZ(s)},[]),h.jsx(LZ,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xt(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xt(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:xt(e.onFocusOutside,s=>s.preventDefault())})}),FTe=E.forwardRef((e,t)=>{const r=Po(Yd,e.__scopeDialog),n=E.useRef(!1),i=E.useRef(!1);return h.jsx(LZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=r.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),LZ=E.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=Po(Yd,r),l=E.useRef(null),c=Or(t,l);return xZ(),h.jsxs(h.Fragment,{children:[h.jsx(C$,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(qp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":I$(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(BTe,{titleId:o.titleId}),h.jsx(VTe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),$$="DialogTitle",FZ=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Po($$,r);return h.jsx(Ft.h2,{id:i.titleId,...n,ref:t})});FZ.displayName=$$;var BZ="DialogDescription",zZ=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Po(BZ,r);return h.jsx(Ft.p,{id:i.descriptionId,...n,ref:t})});zZ.displayName=BZ;var VZ="DialogClose",UZ=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Po(VZ,r);return h.jsx(Ft.button,{type:"button",...n,ref:t,onClick:xt(e.onClick,()=>i.onOpenChange(!1))})});UZ.displayName=VZ;function I$(e){return e?"open":"closed"}var WZ="DialogTitleWarning",[eXe,GZ]=nfe(WZ,{contentName:Yd,titleName:$$,docsSlug:"dialog"}),BTe=({titleId:e})=>{const t=GZ(WZ),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return E.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},zTe="DialogDescriptionWarning",VTe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GZ(zTe).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},UTe=AZ,WTe=$Z,GTe=NZ,HZ=DZ,KZ=RZ,qZ=FZ,XZ=zZ,HTe=UZ;const YZ=UTe,QZ=WTe,KTe=GTe,ZZ=E.forwardRef(({className:e,...t},r)=>h.jsx(HZ,{ref:r,className:kt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ZZ.displayName=HZ.displayName;const N$=E.forwardRef(({className:e,children:t,...r},n)=>h.jsxs(KTe,{children:[h.jsx(ZZ,{}),h.jsxs(KZ,{ref:n,className:kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,h.jsxs(HTe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(xO,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));N$.displayName=KZ.displayName;const D$=({className:e,...t})=>h.jsx("div",{className:kt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});D$.displayName="DialogHeader";const R$=E.forwardRef(({className:e,...t},r)=>h.jsx(qZ,{ref:r,className:kt("text-lg font-semibold leading-none tracking-tight",e),...t}));R$.displayName=qZ.displayName;const JZ=E.forwardRef(({className:e,...t},r)=>h.jsx(XZ,{ref:r,className:kt("text-sm text-muted-foreground",e),...t}));JZ.displayName=XZ.displayName;const qTe=i_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zn=E.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},s)=>{const a=n?lu:"button";return h.jsx(a,{className:kt(qTe({variant:t,size:r,className:e})),ref:s,...i})});zn.displayName="Button";const bn=E.forwardRef(({className:e,type:t,...r},n)=>h.jsx("input",{type:t,className:kt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));bn.displayName="Input";var XTe="Label",eJ=E.forwardRef((e,t)=>h.jsx(Ft.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));eJ.displayName=XTe;var tJ=eJ;const YTe=i_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Li=E.forwardRef(({className:e,...t},r)=>h.jsx(tJ,{ref:r,className:kt(YTe(),e),...t}));Li.displayName=tJ.displayName;const QTe=()=>{const[e,t]=E.useState(""),[r,n]=E.useState(""),[i,s]=E.useState(!1),{signIn:a,signOut:o,user:l,loading:c,isAdmin:d}=ec(),{toast:u}=So(),f=async m=>{m.preventDefault();const{error:g}=await a(e,r);g||(s(!1),t(""),n(""))},p=async()=>{await o()};return h.jsx("footer",{className:"bg-gradient-to-b from-white via-blue-200 to-blue-900 text-black pt-16 pb-8 w-full",style:{position:"relative",zIndex:10},children:h.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-8 mb-8",children:[h.jsxs("div",{className:"lg:w-1/2 lg:pr-8",children:[h.jsx("h2",{className:"text-xl font-bold mb-3 text-black",children:"OmaVerkkoturva"}),h.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-black",children:[h.jsx("p",{children:"OmaVerkkoturva on suomalainen yritys, joka on erikoistunut identiteettisuojaan ja verkkoturvallisuuteen. Missiomme on suojata ihmisten henkilötietoja ja estää identiteettivarkauksia ennen kuin ne ehtivät tapahtua."}),h.jsx("p",{children:"Yrityksemme perustuu vahvaan suomalaiseen osaamiseen tietoturvassa ja asiakaspalvelussa. Kaikki asiakkaiden tiedot käsitellään Suomessa, ja noudatamme tiukkoja EU:n tietosuoja-asetuksen (GDPR) vaatimuksia."})]})]}),h.jsx("div",{className:"lg:self-end",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-6 lg:gap-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:h.jsx(N7,{className:"w-4 h-4 text-blue-900"})}),h.jsx("h3",{className:"text-sm font-semibold text-black",children:"Yhteystiedot"})]}),h.jsxs("p",{className:"text-black text-xs ml-10",children:["tuki@omaverkkoturva.fi",h.jsx("br",{}),"0451211663"]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:h.jsx(lhe,{className:"w-4 h-4 text-blue-900"})}),h.jsx("h3",{className:"text-sm font-semibold text-black",children:"Toimisto"})]}),h.jsxs("p",{className:"text-black text-xs ml-10",children:["Yliopistonkatu 4",h.jsx("br",{}),"0100 Jyväskylä",h.jsx("br",{}),"Suomi"]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:h.jsx(_O,{className:"w-4 h-4 text-blue-900"})}),h.jsx("h3",{className:"text-sm font-semibold text-black",children:"Asiakaspalvelu"})]}),h.jsxs("p",{className:"text-black text-xs ml-10",children:["Ma-Pe 10:00-16:00",h.jsx("br",{}),"Suomenkielinen palvelu",h.jsx("br",{}),"Nopea vastaus"]})]})]})})]}),h.jsx("div",{className:"border-t border-gray-300 pt-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("p",{className:"text-black text-sm mb-4 md:mb-0",children:["© ",new Date().getFullYear()," OmaVerkkoturva. Kaikki oikeudet pidätetään."]}),h.jsxs("div",{className:"flex space-x-6",children:[l?h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-sm text-black",children:["Kirjautunut: ",l.email]}),d&&h.jsx(Xr,{to:"/admin",children:h.jsxs(zn,{variant:"ghost",size:"sm",className:"text-black hover:text-blue-900",children:[h.jsx(qd,{className:"w-4 h-4 mr-1"}),"Admin"]})}),h.jsxs(zn,{variant:"ghost",size:"sm",onClick:p,className:"text-black hover:text-blue-900",children:[h.jsx(ohe,{className:"w-4 h-4 mr-1"}),"Kirjaudu ulos"]})]}):h.jsxs(YZ,{open:i,onOpenChange:s,children:[h.jsx(QZ,{asChild:!0,children:h.jsx("button",{className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Portaali"})}),h.jsxs(N$,{className:"sm:max-w-[425px]",children:[h.jsxs(D$,{children:[h.jsx(R$,{children:"Kirjaudu sisään"}),h.jsx(JZ,{children:"Syötä sähköpostiosoitteesi ja salasanasi portaaliin kirjautuaksesi"})]}),h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Li,{htmlFor:"email",children:"Sähköposti"}),h.jsx(bn,{id:"email",type:"email",value:e,onChange:m=>t(m.target.value),placeholder:"Syötä sähköpostiosoitteesi",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Li,{htmlFor:"password",children:"Salasana"}),h.jsx(bn,{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),placeholder:"Syötä salasanasi",required:!0})]}),h.jsx(zn,{type:"submit",className:"w-full",disabled:c,children:c?"Kirjaudutaan...":"Kirjaudu sisään"}),h.jsx("div",{className:"text-center",children:h.jsx("a",{href:"#",className:"text-sm text-primary hover:underline",onClick:m=>{m.preventDefault(),u({title:"Salasanan palautus",description:"Ota yhteyttä asiakaspalveluun salasanan palautusta varten."})},children:"Unohditko salasanasi?"})})]})]})]}),h.jsx(Xr,{to:"/privacy-policy",className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Tietosuojaseloste"}),h.jsx(Xr,{to:"/terms",className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Käyttöehdot"})]})]})})]})})},ZTe=({cartItems:e,onCartClick:t})=>h.jsx("div",{className:"fixed top-16 left-0 right-0 z-40 bg-white border-b border-gray-200 shadow-sm",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsx("div",{className:"flex justify-end items-center h-12",children:h.jsxs("button",{onClick:t,className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center space-x-2",children:[h.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"})}),h.jsx("span",{className:"text-sm text-gray-700",children:"Ostoskori"}),e.length>0&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.length})]})})})}),JTe=({items:e,onContinueOrder:t,onClose:r,onUpdateQuantity:n,onRemoveItem:i})=>{const s=e.reduce((a,o)=>{const l=parseFloat(o.price.replace(/[^0-9.,]/g,"").replace(",","."));return a+l*o.quantity},0);return h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full space-y-6 max-h-[80vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Ostoskori"}),h.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.length===0?h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-muted-foreground",children:"Ostoskori on tyhjä"})}):h.jsx("div",{className:"space-y-4",children:e.map(a=>h.jsxs("div",{className:"border border-border rounded-lg p-4",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-foreground whitespace-pre-line",children:a.title}),h.jsx("p",{className:"font-bold text-primary",children:a.price})]}),h.jsx("button",{onClick:()=>i(a.id),className:"text-red-500 hover:text-red-700 p-1",title:"Poista tuote",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Määrä:"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>n(a.id,a.quantity-1),className:"w-8 h-8 rounded-full border border-border flex items-center justify-center hover:bg-accent",children:"-"}),h.jsx("span",{className:"w-8 text-center font-semibold",children:a.quantity}),h.jsx("button",{onClick:()=>n(a.id,a.quantity+1),className:"w-8 h-8 rounded-full border border-border flex items-center justify-center hover:bg-accent",children:"+"})]})]})]},a.id))}),e.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"border-t border-border pt-4",children:h.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[h.jsx("span",{children:"Yhteensä:"}),h.jsxs("span",{className:"text-primary",children:[s.toFixed(2).replace(".",",")," €/kk"]})]})}),h.jsx(zn,{onClick:t,className:"w-full",style:{background:"var(--gradient-navy)"},children:"Jatka tilausta"})]})]})})};var L$="Checkbox",[eMe,tXe]=df(L$),[tMe,rMe]=eMe(L$),rJ=E.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[f,p]=E.useState(null),m=Or(t,b=>p(b)),g=E.useRef(!1),x=f?d||!!f.closest("form"):!0,[v=!1,y]=Ul({prop:i,defaultProp:s,onChange:c}),w=E.useRef(v);return E.useEffect(()=>{const b=f==null?void 0:f.form;if(b){const _=()=>y(w.current);return b.addEventListener("reset",_),()=>b.removeEventListener("reset",_)}},[f,y]),h.jsxs(tMe,{scope:r,state:v,disabled:o,children:[h.jsx(Ft.button,{type:"button",role:"checkbox","aria-checked":nu(v)?"mixed":v,"aria-required":a,"data-state":sJ(v),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onKeyDown:xt(e.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:xt(e.onClick,b=>{y(_=>nu(_)?!0:!_),x&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),x&&h.jsx(nMe,{control:f,bubbles:!g.current,name:n,value:l,checked:v,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:nu(s)?!1:s})]})});rJ.displayName=L$;var nJ="CheckboxIndicator",iJ=E.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,s=rMe(nJ,r);return h.jsx(Ra,{present:n||nu(s.state)||s.state===!0,children:h.jsx(Ft.span,{"data-state":sJ(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});iJ.displayName=nJ;var nMe=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:i,...s}=e,a=E.useRef(null),o=w$(r),l=nX(t);E.useEffect(()=>{const d=a.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&p){const m=new Event("click",{bubbles:n});d.indeterminate=nu(r),p.call(d,nu(r)?!1:r),d.dispatchEvent(m)}},[o,r,n]);const c=E.useRef(nu(r)?!1:r);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...s,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function nu(e){return e==="indeterminate"}function sJ(e){return nu(e)?"indeterminate":e?"checked":"unchecked"}var aJ=rJ,iMe=iJ;const Z1=E.forwardRef(({className:e,...t},r)=>h.jsx(aJ,{ref:r,className:kt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(iMe,{className:kt("flex items-center justify-center text-current"),children:h.jsx(gO,{className:"h-4 w-4"})})}));Z1.displayName=aJ.displayName;const sMe=({onClose:e,onSubmit:t})=>{const[r,n]=E.useState(!1),[i,s]=E.useState(!1),{user:a}=ec(),{cartItems:o,clearCart:l}=UO(),{toast:c}=So(),d=async u=>{if(u.preventDefault(),!r){c({title:"Hyväksy ehdot",description:"Sinun täytyy hyväksyä kaikki ehdot jatkaaksesi tilausta.",variant:"destructive"});return}if(!a){c({title:"Virhe",description:"Sinun täytyy olla kirjautunut sisään tilataksesi.",variant:"destructive"});return}if(o.length===0){c({title:"Tyhjä ostoskori",description:"Ostoskorisi on tyhjä. Lisää tuotteita ennen tilaamista.",variant:"destructive"});return}s(!0);try{const f=new FormData(u.target),p=Object.fromEntries(f.entries()),m=o.reduce((_,T)=>{const M=parseFloat(T.price.replace("€","").replace(",","."));return _+M*T.quantity},0),g={address:p.address,postalCode:p.postalCode,city:p.city},{data:x,error:v}=await Bn.from("orders").insert({user_id:a.id,total_amount:m,customer_email:p.email,customer_name:p.firstName,customer_phone:p.phone,billing_address:g,status:"pending"}).select().single();if(v)throw v;const y=o.map(_=>({order_id:x.id,package_title:_.title,package_price:parseFloat(_.price.replace("€","").replace(",",".")),quantity:_.quantity})),{error:w}=await Bn.from("order_items").insert(y);if(w)throw w;const{error:b}=await Bn.functions.invoke("send-order-confirmation",{body:{orderId:x.id,customerEmail:p.email,customerName:p.firstName,confirmationToken:x.confirmation_token,packages:o,totalAmount:m}});b&&console.error("Failed to send email:",b),l(),e(),c({title:"Tilaus lähetetty!",description:"Saat pian vahvistussähköpostin. Muista vahvistaa tilaus sähköpostista!"}),t(p)}catch(f){console.error("Error submitting order:",f),c({title:"Virhe",description:"Tilauksen lähettämisessä tapahtui virhe. Yritä uudelleen.",variant:"destructive"})}finally{s(!1)}};return h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full my-8 space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Tilaustiedot"}),h.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("form",{onSubmit:d,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"firstName",children:"Etu- ja sukunimi *"}),h.jsx(bn,{id:"firstName",name:"firstName",placeholder:"Etu- ja sukunimi",required:!0})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"email",children:"Sähköpostiosoite *"}),h.jsx(bn,{id:"email",name:"email",type:"email",placeholder:"Sähköpostiosoite",required:!0})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"phone",children:"Puhelinnumero *"}),h.jsx(bn,{id:"phone",name:"phone",type:"tel",placeholder:"Puhelinnumero",required:!0})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"birthdate",children:"Syntymäaika *"}),h.jsx(bn,{id:"birthdate",name:"birthdate",type:"date",defaultValue:"1990-01-01",required:!0})]})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"address",children:"Laskutusosoite *"}),h.jsx(bn,{id:"address",name:"address",placeholder:"Esimerkkikatu 1 A 2",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"postalCode",children:"Postinumero *"}),h.jsx(bn,{id:"postalCode",name:"postalCode",placeholder:"40100",required:!0})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"city",children:"Postitoimipaikka *"}),h.jsx(bn,{id:"city",name:"city",placeholder:"JYVÄSKYLÄ",required:!0})]})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"promoCode",children:"Tarjouskoodi"}),h.jsx(bn,{id:"promoCode",name:"promoCode",placeholder:"Kirjoita koodi tähän"})]}),h.jsxs("div",{className:"space-y-4 pt-4",children:[h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(Z1,{id:"privacy",checked:r,onCheckedChange:u=>n(u),className:"mt-1"}),h.jsx(Li,{htmlFor:"privacy",className:"text-sm text-muted-foreground leading-relaxed",children:"Lähettämällä tämän lomakkeen vakuutan, että antamani tiedot ovat oikein. Lisäksi hyväksyn henkilötietojeni käsittelyn OmaVerkkoturvan tietosuojaselosteen mukaisesti."})]})}),h.jsx(zn,{type:"submit",className:"w-full",style:{background:"var(--gradient-navy)"},disabled:!r||i,children:i?h.jsxs(h.Fragment,{children:[h.jsx(I7,{className:"mr-2 h-4 w-4 animate-spin"}),"Lähetetään..."]}):"Lähetä tilaus"})]})]})]})})},Qr=({children:e,showContact:t=!0})=>{const r=al(),{user:n}=ec(),{cartItems:i,updateQuantity:s,removeFromCart:a,clearCart:o}=UO(),[l,c]=E.useState(!1),[d,u]=E.useState(!1),{toast:f}=So();E.useEffect(()=>{window.scrollTo(0,0)},[r]);const p=()=>{c(!1),u(!0)},m=g=>{console.log("Order submitted:",g),u(!1),o(),f({title:"Tilaus lähetetty!",description:"Kiitos tilauksestasi. Saat pian vahvistuksen sähköpostiin."})};return h.jsxs("div",{className:"min-h-screen bg-transparent w-full max-w-[100vw] overflow-x-hidden",children:[h.jsx(V1e,{}),n&&r.pathname!=="/dashboard"&&h.jsx(ZTe,{cartItems:i,onCartClick:()=>c(!0)}),e,!n&&h.jsx(QTe,{}),l&&h.jsx(JTe,{items:i,onContinueOrder:p,onClose:()=>c(!1),onUpdateQuantity:s,onRemoveItem:a}),d&&h.jsx(sMe,{onClose:()=>u(!1),onSubmit:m})]})},NS=768;function oJ(){const[e,t]=E.useState(void 0);return E.useEffect(()=>{const r=window.matchMedia(`(max-width: ${NS-1}px)`),n=()=>{t(window.innerWidth<NS)};return r.addEventListener("change",n),t(window.innerWidth<NS),()=>r.removeEventListener("change",n)},[]),!!e}const lJ=E.memo(()=>{const e=oJ();E.useState(!1),E.useState(!1),E.useState(!1),E.useState(!1);const[t,r]=E.useState(""),[n,i]=E.useState(""),[s,a]=E.useState(!1),o=(p,m)=>{i(p),r(m),a(!0)},l=()=>{a(!1),r(""),i("")},c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.8,ease:"easeOut"}}},d={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6,ease:"easeOut"}}},u={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},f={hidden:{},visible:{transition:{staggerChildren:.1,delayChildren:.1}}};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"fixed inset-0 w-full h-full z-0",children:[h.jsx(yt.img,{src:"/lovable-uploads/iStock-2222199654.jpg",alt:"Identity Protection - Secure Digital Life",className:`w-full h-full object-cover ${e?"object-right":"object-center"}`,initial:{scale:1.05},animate:{scale:1},transition:{duration:1,ease:"easeOut"}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/50"})]}),h.jsxs(yt.div,{className:"relative w-full",initial:"hidden",animate:"visible",variants:c,style:{willChange:"transform"},children:[h.jsx(yt.div,{className:"relative h-screen w-full flex items-center",children:h.jsx("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 flex flex-col justify-center h-full",style:{position:"relative",zIndex:20},children:h.jsxs(yt.div,{className:"w-full max-w-2xl text-left ml-8",variants:f,children:[h.jsx(yt.h1,{className:"banner-title text-white",variants:d,children:"Estä identiteettivarkaus ennen kuin se ehtii tapahtua."}),h.jsx(yt.p,{className:"banner-subtitle text-white mt-4 sm:mt-6",variants:d,children:"Yksi helppo keino suojata sekä rahasi että yksityiset tietosi."}),h.jsx(yt.div,{className:"flex justify-start mt-6 sm:mt-8",variants:d,children:h.jsx(yt.button,{className:"w-full sm:w-auto min-h-[44px] px-6 sm:px-8 py-3 bg-gradient-to-r from-blue-900 to-blue-800 text-white rounded-md hover:from-blue-800 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center group text-sm sm:text-base font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},onClick:p=>{p.preventDefault();const m=document.getElementById("projects");m&&m.scrollIntoView({behavior:"smooth"})},children:"Tutustu tästä"})})]})})}),h.jsx(yt.div,{className:"relative w-full bg-gradient-to-b from-white via-blue-100 to-blue-900 py-16 pb-24",style:{position:"relative",zIndex:10},initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:f,children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs(yt.div,{className:"text-center mb-24",variants:u,children:[h.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:["Pidä identiteettisi turvassa",h.jsx("br",{}),"edistyksellisin ratkaisuin"]}),h.jsx("p",{className:"text-lg text-gray-700 mb-16",children:"OmaVerkkoturva tarjoaa kattavan suojan henkilötiedoillesi"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[h.jsxs("div",{className:"space-y-32",children:[h.jsxs("div",{className:"text-left max-w-lg mt-16",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx(Wfe,{className:"w-4 h-4 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reaaliaikainen hälytys"})]}),h.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Saat välittömän ilmoituksen, jos tietosi vuotavat verkkoon. Palvelu suojaa sähköpostisi, henkilötunnuksesi ja maksukorttitietosi sekä valvoo epäilyttäviä luotonhakuja ja osoitteenmuutoksia, jotka voivat viitata huijaukseen."})]}),h.jsxs("div",{className:"text-left max-w-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx(Cb,{className:"w-4 h-4 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Saat ohjeet"})]}),h.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Jos riski havaitaan, saat heti selkeät ohjeet seuraaviin toimiin, kuten kortin sulkemiseen tai salasanan vaihtoon."})]}),h.jsxs("div",{className:"text-left max-w-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx(qd,{className:"w-4 h-4 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Vakuutus"})]}),h.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Kun identiteettisi joutuu vaaraan, tilanteen ratkaiseminen voi kestää viikkoja ja maksaa tuhansia euroja. Tuotteeseen sisältyvä vakuutus tuo mielenrauhaa myös pahimman sattuessa."})]}),h.jsxs("div",{className:"text-left max-w-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx(Pb,{className:"w-4 h-4 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Jatkuva valvonta"})]}),h.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Valvomme automaattisesti Dark Webiä, sosiaalista mediaa ja tietovuototietokantoja, jotta tietosi pysyvät turvassa vuorokauden jokaisena hetkenä."})]})]}),h.jsx("div",{className:"lg:flex lg:items-center lg:justify-center"})]})]})})}),h.jsx("div",{className:"relative w-full bg-gradient-to-b from-blue-900 via-blue-950 to-blue-900 py-32 pb-48",style:{position:"relative",zIndex:10},children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8",children:"Kokeile veloituksetta, ovatko tietosi vaarantuneet"}),h.jsx("p",{className:"text-lg text-white mb-12 max-w-2xl mx-auto",children:"Et jää yksin vahingon sattuessa. Autamme sinua sekä käytännössä että taloudellisesti."}),h.jsx("button",{className:"px-8 py-3 bg-white text-black rounded-md hover:bg-gray-100 transition-all duration-300 shadow-lg hover:shadow-xl font-medium",children:"Tutustu tuotteeseen"})]})})}),h.jsx("div",{className:"relative w-full bg-white py-24",style:{position:"relative",zIndex:10},children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"text-center max-w-4xl mx-auto mb-16",children:h.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-8",children:["Tapauksia, joissa rahaa menetettiin",h.jsx("br",{}),"huijauksessa"]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[h.jsx(yt.div,{className:"bg-gradient-to-br from-blue-900/10 to-blue-800/20 p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut"},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>o("Tietojenkalastelu","Nina sai aidolta näyttävän sähköpostin pankiltaan. Hän klikkasi viestissä ollutta linkkiä ja kirjautui sisään sivulle, joka olikin huijaussivusto. Tietojen avulla rikollinen otti hänen nimissään kolme pikavippiä (yhteensä 11 200€), vaihdatutti hänen postiosoitteensa sekä puhelinnumeronsa ja yritti avata verkkopankkitilejä ja maksukortteja. Palveluun sisältyvä vakuutus korvaa jopa 13 500 € taloudelliset menetykset ja asiantuntijat auttavat asian läpiviennissä."),children:h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:"Tietojenkalastelu"})]})}),h.jsx(yt.div,{className:"bg-gradient-to-br from-blue-900/10 to-blue-800/20 p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.2},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>o("Verkkokauppahuijaus","Timo löysi verkosta edullisen tarjouksen uusista kuulokkeista tunnetulta brändiltä. Hinta oli lähes puolet halvempi kuin muualla, ja verkkosivusto näytti aidolla. Logo, arvostelut ja maksutavat kaikki kunnossa. Hän maksoi 129 € pankkikortilla. Tilauksen jälkeen tuotetta ei koskaan saapunut ja verkkokauppa katosi muutamassa päivässä. Koska ostoksen hinta oli 50-700 € välillä, Timo saa rahansa takaisin verkkokauppahuijaukset kattavan vakuutuksen ansiosta."),children:h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),h.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:"Verkkokauppahuijaus"})]})}),h.jsx(yt.div,{className:"bg-gradient-to-br from-blue-900/10 to-blue-800/20 p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.4},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>o("Sovellushankinnat","Sannan 9-vuotias poika sai pelata hetken äidin puhelimella. Hän latasi vahingossa pelisovelluksen, joka näytti ilmaiselta mutta sisälsi kalliin 112 euron tilauksen. Maksu veloittui heti, koska maksukortti oli tallennettuna puhelimeen. Vakuutus korvaa kulut, jotka liittyvät alle 10-vuotiaan vahingossa tekemiin sovellusostoihin (alle 135 €) suurimmilla alustoilla, kuten mm. App Storessa, Google Playssa tai Steamissa."),children:h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:"Sovellushankinnat"})]})}),h.jsx(yt.div,{className:"bg-gradient-to-br from-blue-900/10 to-blue-800/20 p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.6},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>o("Nettikiusaaminen","Emilia joutui nettikiusaamisen kohteeksi sen jälkeen, kun hänen TikTok-videonsa levisi yllättäen laajalle. Tuntemattomat ihmiset alkoivat kommentoida videoita loukkaavasti ja joku perusti tekaistun tilin hänen nimellään ja profiilikuvallaan. Väärennetyllä tilillä julkaistiin sisältöä, joka sai Emilian näyttämään nololta. Hän saa asiantuntijoilta neuvoja ja apuja (25 h) sisällön poistoon ja tilien palautukseen. Tarvittaessa hänen käytössä on myös oikeudellinen tuki ja psykologinen kriisiapu."),children:h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),h.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:"Nettikiusaaminen"})]})})]})]})}),h.jsx("div",{className:"relative w-full bg-white/80 py-16",style:{position:"relative",zIndex:10},children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-12 mt-16",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Valitse sinulle sopivin turva"}),h.jsx("p",{className:"text-lg text-gray-700 mb-2",children:"Valitse parhaiten sopiva suojaus."}),h.jsx("p",{className:"text-sm text-gray-600",children:"Jokaisessa tilauksessa on 14vrk maksuton peruutusoikeus."})]}),h.jsx("div",{className:"flex justify-center",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl",children:[h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilösuoja Yhdelle"}),h.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"21,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Tietojen monitorointi ja ilmoitus tietovuodoista"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Vakuutus, joka turvaa sinut vahinkojen varalta"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Apu ja tuki"})})]}),h.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Suojaa laite"})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilösuoja Tupla"}),h.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"28,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä läheisellesi"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Vakuutus, joka turvaa sinut ja läheisesi vahinkojen varalta"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Apu ja tuki"})})]}),h.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Suojaa laite"})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilösuoja Perhe"}),h.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"32,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä koko perheellesi"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta"})}),h.jsx("li",{className:"flex items-start",children:h.jsx("span",{className:"text-gray-700",children:"• Apu ja tuki"})})]}),h.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Suojaa laite"})]})]})})]})}),h.jsx("div",{className:"relative w-full bg-gradient-to-b from-white via-blue-50 to-blue-200 py-32",style:{position:"relative",zIndex:10},children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"text-left max-w-2xl mb-12",children:[h.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-black mb-6",children:"Voit myös kokeilla identiteettisuojaa ilman sitoumuksia"}),h.jsx("p",{className:"text-base text-black leading-relaxed mb-6",children:"Kokeiluversio sisältää henkilötietojen tarkastuksen sekä monipuoliset työkalut, joilla voit ehkäistä tietojesi väärinkäyttöä ja havaita mahdollisia uhkia ajoissa. Saat 30 päivän ilmaisen käyttöjakson, jonka aikana voit rauhassa tutustua palvelun hyötyihin ja varmistaa, että tietosi ovat turvassa."}),h.jsxs("button",{className:"px-6 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl font-medium text-sm",children:["Kokeile",h.jsx(Gc,{className:"ml-2 h-3 w-3 inline"})]})]})})}),h.jsx("div",{className:"relative w-full bg-gray-50 py-16",style:{position:"relative",zIndex:10},children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"text-left mb-16",children:h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black",children:"Artikkelit"})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:h.jsx("div",{className:"text-center text-gray-500",children:h.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-block bg-blue-100 text-blue-900 text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Ajankohtaista"}),h.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Ajankohtaisia huijauksia (07/2025)"}),h.jsx("p",{className:"text-sm text-gray-600",children:"4.8.2025"})]})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:h.jsx("div",{className:"text-center text-gray-500",children:h.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-block bg-blue-100 text-blue-900 text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Ajankohtaista"}),h.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Ajankohtaisia huijauksia (06/2025)"}),h.jsx("p",{className:"text-sm text-gray-600",children:"1.7.2025"})]})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:h.jsx("div",{className:"text-center text-gray-500",children:h.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-block bg-blue-900 text-white text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Artikkelit"}),h.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Sähköpostin tietoturvallinen käyttö"}),h.jsx("p",{className:"text-sm text-gray-600",children:"16.6.2025"})]})]})]})]})})]}),s&&h.jsx(yt.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,children:h.jsxs(yt.div,{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:p=>p.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:n}),h.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:"×"})]}),h.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:t})]})})]})});lJ.displayName="Hero";const sm=({title:e="WRLDS",description:t="WRLDS Technologies: Pioneering smart engineering solutions with textile sensors for sports, safety, and performance monitoring.",type:r="website",name:n="WRLDS Technologies",imageUrl:i="/lovable-uploads/48ecf6e2-5a98-4a9d-af6f-ae2265cd4098.png",publishDate:s,modifiedDate:a,author:o,category:l,keywords:c=["smart textiles","wearable technology","textile sensors","sports tech","safety monitoring","performance analytics"],isBlogPost:d=!1})=>{const u=al(),f=`https://wrlds.com${u.pathname}`,p=i.startsWith("http")?i:`https://wrlds.com${i}`,m=u.pathname.includes("smart-ppe-revolution")?[...c,"personal protective equipment","workplace safety solutions","smart safety gear","construction safety technology","industrial safety monitoring","occupational health technology","safety compliance","worker protection systems","smart hard hats","connected safety equipment"]:u.pathname.includes("wearable-safety-tech-protecting-workers-roi")?[...c,"workplace injury costs","safety ROI","workers compensation savings","ergonomic sensors","workplace safety investment","safety technology ROI","industrial wearables","safety cost reduction","occupational safety economics","safety technology partnerships","workplace injury statistics","safety equipment financing","injury prevention technology"]:c,g={"@context":"https://schema.org","@type":"Organization",name:"WRLDS Technologies",url:"https://wrlds.com",logo:"https://wrlds.com/lovable-uploads/14ea3fe0-19d6-425c-b95b-4117bc41f3ca.png",description:"Pioneering smart engineering solutions with textile sensors",contactPoint:{"@type":"ContactPoint",contactType:"customer service",email:"info@wrlds.com"},sameAs:["https://www.linkedin.com/company/wrlds-technologies","https://twitter.com/wrldstechnologies"]},x=d&&s?{"@context":"https://schema.org","@type":"BlogPosting",mainEntityOfPage:{"@type":"WebPage","@id":f},headline:e,image:{"@type":"ImageObject",url:p,width:1200,height:630},datePublished:s,dateModified:a||s,author:{"@type":"Organization",name:o||"WRLDS Technologies",url:"https://wrlds.com"},publisher:{"@type":"Organization",name:"WRLDS Technologies",logo:{"@type":"ImageObject",url:"https://wrlds.com/lovable-uploads/14ea3fe0-19d6-425c-b95b-4117bc41f3ca.png",width:512,height:512},url:"https://wrlds.com"},description:t,keywords:m.join(", "),articleSection:l,inLanguage:"en-US",isAccessibleForFree:!0}:null,v=u.pathname.includes("smart-ppe-revolution")?{"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"What is Smart PPE?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE (Personal Protective Equipment) refers to traditional safety gear enhanced with sensors, connectivity, and intelligence. Unlike ordinary PPE that acts as a passive barrier, smart PPE actively monitors conditions and provides real-time alerts to prevent accidents."}},{"@type":"Question",name:"How does smart PPE improve workplace safety?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE improves safety by providing real-time monitoring of environmental conditions, worker health metrics, and potential hazards. It can detect falls, monitor vital signs, sense toxic gases, and automatically alert emergency responders when needed."}},{"@type":"Question",name:"What industries benefit from smart PPE?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE benefits multiple industries including construction, manufacturing, oil & gas, fire & rescue, healthcare, mining, and any workplace where safety is paramount. Each industry can customize the technology to address specific safety challenges."}}]}:null,y=u.pathname.includes("wearable-safety-tech-protecting-workers-roi")?{"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How much do workplace injuries cost?",acceptedAnswer:{"@type":"Answer",text:"According to the National Safety Council, the average cost for a medically consulted work injury is $43,000 in 2023. With 2.2 injuries per 100 full-time workers, a 200-person site can expect about $215,000 in injury costs annually before accounting for downtime or replacement training."}},{"@type":"Question",name:"What ROI can wearable safety technology deliver?",acceptedAnswer:{"@type":"Answer",text:"Real-world deployments show significant returns: one study found 54% lower OSHA recordables and 88% fewer lost workdays. Another warehouse study showed 62% of workers reduced risky movements by half, with total ergonomic hazards falling 39%."}},{"@type":"Question",name:"Do insurance companies support wearable safety technology?",acceptedAnswer:{"@type":"Answer",text:"Yes, many insurers now bundle wearable device costs into workers compensation premiums. Employers keep the hardware as long as usage stays high because fewer claims leave insurers ahead financially. Regional carriers are expanding similar rebate schemes."}}]}:null,w=l?[...m,l.toLowerCase()].join(", "):m.join(", ");return h.jsxs(Gde,{children:[h.jsx("title",{children:e}),h.jsx("meta",{name:"description",content:t}),h.jsx("link",{rel:"canonical",href:f}),h.jsx("meta",{name:"keywords",content:w}),h.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),h.jsx("meta",{property:"og:type",content:d?"article":r}),h.jsx("meta",{property:"og:url",content:f}),h.jsx("meta",{property:"og:title",content:e}),h.jsx("meta",{property:"og:description",content:t}),h.jsx("meta",{property:"og:image",content:p}),h.jsx("meta",{property:"og:image:width",content:"1200"}),h.jsx("meta",{property:"og:image:height",content:"630"}),h.jsx("meta",{property:"og:site_name",content:"WRLDS Technologies"}),h.jsx("meta",{property:"og:locale",content:"en_US"}),d&&l&&h.jsx("meta",{property:"article:section",content:l}),d&&s&&h.jsx("meta",{property:"article:published_time",content:s}),d&&a&&h.jsx("meta",{property:"article:modified_time",content:a}),d&&h.jsx("meta",{property:"article:publisher",content:"https://wrlds.com"}),h.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),h.jsx("meta",{name:"twitter:url",content:f}),h.jsx("meta",{name:"twitter:title",content:e}),h.jsx("meta",{name:"twitter:description",content:t}),h.jsx("meta",{name:"twitter:image",content:p}),h.jsx("meta",{name:"twitter:site",content:"@wrldstechnologies"}),h.jsx("meta",{name:"twitter:creator",content:"@wrldstechnologies"}),h.jsx("meta",{property:"og:image:secure_url",content:p}),h.jsx("meta",{name:"author",content:o||n}),h.jsx("meta",{name:"pinterest:description",content:t}),h.jsx("meta",{name:"pinterest:image",content:p}),h.jsx("meta",{name:"theme-color",content:"#000000"}),h.jsx("meta",{name:"msapplication-TileColor",content:"#000000"}),h.jsx("script",{type:"application/ld+json",children:JSON.stringify(g)}),x&&h.jsx("script",{type:"application/ld+json",children:JSON.stringify(x)}),v&&h.jsx("script",{type:"application/ld+json",children:JSON.stringify(v)}),y&&h.jsx("script",{type:"application/ld+json",children:JSON.stringify(y)})]})},aMe=()=>(E.useEffect(()=>{const e=document.querySelectorAll('[id="contact"]');e.length>1&&(e[1].id="contact-footer")},[]),h.jsxs(Qr,{children:[h.jsx(sm,{title:"OmaVerkkoturva - Suojaa identiteettisi verkossa",description:"OmaVerkkoturva: Estä identiteettivarkaus ennen kuin se ehtii tapahtua. Suojaa rahasi ja henkilötietosi helposti yhdellä ratkaisulla.",imageUrl:"/lovable-uploads/8e39c5ba-0ce6-4338-9dbb-3c3c9b33cbb7.png",keywords:["identiteettisuoja","verkkoturva","identiteettivarkaus","henkilötietojen suoja","tietoturva","verkkohuijaukset","puhelinhuijaukset"]}),h.jsx(lJ,{})]})),oMe=()=>{const e=al();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),h.jsx(Qr,{children:h.jsx("div",{className:"min-h-[50vh] flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),h.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})})},h_=({children:e,title:t,subtitle:r,imageUrl:n,brandName:i,darkMode:s=!1})=>{E.useEffect(()=>{window.scrollTo(0,0)},[]);const a=s?"text-white":"text-gray-900";return h.jsx(Qr,{children:h.jsxs("div",{className:"pt-16 pb-16",children:[h.jsxs("div",{className:"relative w-full h-[40vh] md:h-[50vh] overflow-hidden flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n})`}}),h.jsx("div",{className:`absolute inset-0 ${s?"bg-black/70":"bg-white/70"}`}),h.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 z-10",children:h.jsxs(yt.div,{className:"flex flex-col items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[h.jsx(yt.h1,{className:`text-4xl md:text-5xl font-bold mb-4 text-center ${a}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:t}),h.jsx(yt.div,{className:`w-20 h-1 ${s?"bg-white":"bg-gray-800"} mb-6`,initial:{width:0},animate:{width:80},transition:{duration:.8,delay:.3}}),h.jsx(yt.p,{className:`text-xl text-center max-w-2xl ${s?"text-white":"text-gray-700"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:r})]})})]}),h.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 md:px-8 mt-8",children:h.jsxs(Xr,{to:"/#projects",className:"inline-flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),h.jsx("span",{children:"Back to Projects"})]})}),h.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 md:px-8 py-12",children:h.jsx(yt.div,{className:"prose prose-lg max-w-none",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e})})]})})},lMe=()=>h.jsxs(h_,{title:"FireCat's 6th SENSE",subtitle:"Advanced safety system for high-risk environments",imageUrl:"/lovable-uploads/93ab0638-8190-4ccf-897f-21fda7f4f5ad.png",brandName:"FireCat Group",darkMode:!0,children:[h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: FireCat's 6th SENSE by WRLDS Technologies"}),h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),h.jsx("p",{children:"FireCat Group aimed to enhance the safety and operational effectiveness of personnel in high-risk environments such as law enforcement, military operations, and firefighting. They required an advanced, integrated sensor solution that could provide critical real-time data for risk management and decision-making."})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),h.jsx("p",{children:"Traditional approaches lacked comprehensive real-time tracking and situational awareness, leaving personnel vulnerable and decision-making delayed. The market required a robust solution capable of capturing essential data while being resilient enough for extreme conditions."}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),h.jsx("p",{children:"WRLDS Technologies provided an end-to-end solution called the 6th SENSE, combining sophisticated AI-driven sensors seamlessly integrated into uniforms. The solution features:"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(qd,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Main Unit"}),h.jsx("p",{children:"Secure real-time data transmission with encrypted communication."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(hhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"High-Quality Sensors"}),h.jsx("p",{children:"Durable sensors resistant to dust, water, and extreme temperatures."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(Hfe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Integrated Clothing"}),h.jsx("p",{children:"Customized shirts embedding AI-powered sensors, maintaining user comfort."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx($7,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Control Unit"}),h.jsx("p",{children:"Centralized AI interface providing transparent data visualization and management via an intuitive supervisor app."})]})]})]}),h.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Critical Features"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[h.jsx("li",{children:"Man Down Alarm for immediate alerts"}),h.jsx("li",{children:"Precise GPS positioning for location tracking"}),h.jsx("li",{children:"Real-time monitoring of vital signs"}),h.jsx("li",{children:"Easily accessible Panic Button for emergencies"})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits"}),h.jsxs("div",{className:"space-y-6 mb-8",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Life-saving technology"}),h.jsx("p",{children:"Rapid data acquisition facilitates quicker responses in emergencies."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Technological advancement"}),h.jsx("p",{children:"Machine learning prevents false alarms by adapting to individual behavioral baselines."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Long-lasting and secure"}),h.jsx("p",{children:"Durable hardware with extended lifespan, robust encryption, and full GDPR compliance."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Easy Maintenance"}),h.jsx("p",{children:"Sensors are fully washable and require minimal maintenance."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"User-Friendly"}),h.jsx("p",{children:"Plug & Play installation within minutes, providing hours of continuous operation per charge."})]})]})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),h.jsx("p",{children:"FireCat successfully implemented the 6th SENSE solution, significantly enhancing situational awareness, safety, and operational efficiency of high-risk personnel. WRLDS' innovative platform and specialized knowledge allowed for rapid deployment, immediate positive impact, and a scalable model for future expansions."})]}),cMe=()=>h.jsxs(h_,{title:"Performance Athletic Footwear",subtitle:"Revolutionary R&D for next-generation athletic footwear",imageUrl:"/lovable-uploads/b0622048-17b4-4c75-a3f0-6c9e17de1d09.png",brandName:"Global Sports Retail Leader",children:[h.jsx(sm,{title:"WRLDS - Performance Athletic Footwear Project",description:"Revolutionary R&D for next-generation athletic footwear with embedded textile sensors for real-time performance analytics and personalized footwear.",type:"article"}),h.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 flex items-center",children:[h.jsx(vO,{className:"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0"}),h.jsx("p",{className:"text-yellow-700 font-medium text-sm",children:"Ongoing R&D Project — Currently in Prototyping Phase"})]}),h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Smart Footwear Development"}),h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),h.jsx("p",{children:"A global sports retail leader approached WRLDS Technologies with a vision to revolutionize the development, fitting, and testing of athletic footwear. Their goal was to create a data-driven approach to footwear design that would enhance athlete performance while reducing development cycles."})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),h.jsx("p",{children:"Traditional footwear development relied heavily on subjective feedback and limited quantitative testing. The company needed a precise way to measure actual performance metrics, foot movements, and pressure distribution in real-world athletic scenarios. Additionally, they wanted to personalize footwear recommendations based on individual biomechanics."}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),h.jsx("p",{children:"WRLDS Technologies developed a comprehensive smart footwear R&D platform that includes:"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(ihe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Embedded Sensors"}),h.jsx("p",{children:"Textile-based pressure and motion sensors integrated directly into prototype footwear."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(bO,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Real-time Analysis"}),h.jsx("p",{children:"Instant feedback on gait, pressure points, and energy transfer during athletic movements."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(Xfe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Performance Metrics"}),h.jsx("p",{children:"Comprehensive data collection on acceleration, stability, and energy return across different sports movements."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(Vfe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Athlete Cloud Platform"}),h.jsx("p",{children:"AI-powered analytics comparing performance across prototype iterations and athlete profiles."})]})]})]}),h.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Key Features"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[h.jsx("li",{children:"Machine washable sensor technology for extended testing periods"}),h.jsx("li",{children:"Low-profile design that doesn't interfere with natural movement"}),h.jsx("li",{children:"Cross-platform mobile app for real-time coaching and feedback"}),h.jsx("li",{children:"Materials testing module to evaluate durability and performance longevity"})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Preliminary Results"}),h.jsx("p",{children:"The smart footwear prototype platform has shown promising results in initial testing phases. The data-driven approach has not only provided valuable insights for product development but also opened new possibilities for personalized product recommendations in retail environments. Patent applications have been filed based on innovations developed during this ongoing project."}),h.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[h.jsx(yhe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Development Roadmap"}),h.jsx("p",{children:"WRLDS Technologies continues to partner with this client on this R&D initiative to refine the prototype and develop potential consumer versions of this technology, which could enable everyday athletes to benefit from professional-grade footwear analysis and recommendations."})]})]})]}),uMe=()=>h.jsxs(h_,{title:"Workwear Climate Control",subtitle:"Intelligent temperature regulation for extreme work environments",imageUrl:"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",brandName:"European Multinational Textile Producer",children:[h.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 flex items-center",children:[h.jsx(vO,{className:"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0"}),h.jsx("p",{className:"text-yellow-700 font-medium text-sm",children:"Ongoing R&D Project — Currently in Prototyping Phase"})]}),h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Advanced Climate Control Workwear"}),h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),h.jsx("p",{children:"A leading European textile manufacturer sought to create next-generation workwear for professionals operating in extreme temperature environments. From arctic construction workers to foundry operators, they needed a solution that could actively regulate body temperature without compromising mobility or safety compliance."})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),h.jsx("p",{children:"Traditional approaches to temperature regulation in workwear were either passive (insulation) or bulky active systems with external power sources and limited zoning capabilities. The client needed a fully integrated solution that could adapt to changing conditions, worker activity levels, and provide targeted temperature control while maintaining all safety certifications."}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),h.jsx("p",{children:"WRLDS Technologies developed a comprehensive climate control workwear platform featuring:"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(vhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Adaptive Heating/Cooling"}),h.jsx("p",{children:"Textile-integrated heating and cooling elements with multi-zone temperature control."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(Eb,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Smart Control System"}),h.jsx("p",{children:"AI-driven controller that learns user preferences and optimizes power usage based on conditions."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(mhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Safety Integration"}),h.jsx("p",{children:"Systems designed to maintain all industry safety certifications including flame resistance and electrical safety."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(dhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Extreme Durability"}),h.jsx("p",{children:"Components rated for operation in extreme temperatures with full washability and construction durability."})]})]})]}),h.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Technical Specifications"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[h.jsx("li",{children:"Modular design supporting full-body integration or focused application"}),h.jsx("li",{children:"Extended battery life depending on conditions and settings"}),h.jsx("li",{children:"Smartphone app for manual control and environmental monitoring"}),h.jsx("li",{children:"Washable for multiple industrial cleaning cycles without performance degradation"}),h.jsx("li",{children:"Compliance with industry-specific safety standards"})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Preliminary Results"}),h.jsx("p",{children:"The prototype climate-controlled workwear has shown promising results in controlled testing environments. The technology is being evaluated by select industrial clients across Northern Europe and Canada, focusing on oil & gas, mining, and construction sectors operating in extreme climates. Initial feedback indicates significant potential for reducing cold-related work disruptions."}),h.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[h.jsx(rhe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Ongoing Development"}),h.jsx("p",{children:"Current R&D efforts are focused on refining the prototypes, improving power efficiency, and exploring the potential to include environmental hazard detection capabilities and integration with wider workplace safety systems."})]})]})]}),dMe=()=>h.jsxs(h_,{title:"Ice Hockey Elite Skill Tracker",subtitle:"Advanced motion analysis for optimal performance",imageUrl:"/lovable-uploads/c30e0487-2fa0-41d1-9a0b-699cb2855388.png",brandName:"Mars Blades",children:[h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Hockey Performance Analysis System"}),h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),h.jsx("p",{children:"Mars Blades, a leading innovator in hockey training equipment, sought to develop a system for quantifying and analyzing the specific movements that contribute to elite hockey performance. They approached WRLDS Technologies to create a solution that could capture detailed metrics during real skating sessions and translate that data into actionable insights for player development."})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),h.jsx("p",{children:"Previous attempts to measure hockey performance relied on multiple external sensors or camera systems that were cumbersome, expensive, and limited to controlled environments. Mars Blades needed a solution that was simple enough for daily use but sophisticated enough to capture the nuanced movements that differentiate elite players, particularly focusing on acceleration, speed transitions, and maneuverability on ice."}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),h.jsx("p",{children:"WRLDS Technologies developed a specialized single-point IMU (Inertial Measurement Unit) system embedded directly in hockey footwear that could:"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx($7,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Motion Pattern Recognition"}),h.jsx("p",{children:"Identify and categorize specific skating movements from crossovers to tight turns."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(yC,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Performance Metrics"}),h.jsx("p",{children:"Measure acceleration forces, edge angles, weight distribution, and power output in real-time."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(nhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Benchmark Comparisons"}),h.jsx("p",{children:"Compare athlete's movements to established elite player patterns and historical personal bests."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(jb,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Coach Integration"}),h.jsx("p",{children:"Provide coaches with detailed skill development metrics across team members."})]})]})]}),h.jsx("h4",{className:"text-xl font-semibold mb-4",children:"System Components"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[h.jsx("li",{children:"Embedded sensors designed to withstand the harsh conditions of ice hockey"}),h.jsx("li",{children:"Bluetooth connectivity with real-time data streaming to rinkside devices"}),h.jsx("li",{children:"Athlete-facing mobile app with immediate performance feedback"}),h.jsx("li",{children:"Coach dashboard for tracking player development and team trends"}),h.jsx("li",{children:"Machine learning algorithm that improves pattern recognition over time"})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits"}),h.jsxs("div",{className:"space-y-6 mb-8",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Skill Development"}),h.jsx("p",{children:"Players using the system showed faster improvement in targeted skating skills."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Injury Prevention"}),h.jsx("p",{children:"Early detection of asymmetrical movements helped reduce strain-related injuries."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Elite Performance Insights"}),h.jsx("p",{children:"Identified specific movement patterns that correlate with elite acceleration and agility."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Coaching Efficiency"}),h.jsx("p",{children:"Reduced subjective assessment with quantifiable metrics for player development."})]})]})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),h.jsx("p",{children:"The Ice Hockey Elite Skill Tracker has been successfully adopted by professional teams and elite hockey academies across North America and Europe. Mars Blades has integrated the technology into their premium training products, creating a new standard for performance analysis in ice hockey. The data collected has also led to improvements in skate design and training methodologies based on the scientific insights provided."}),h.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[h.jsx(qfe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Research Impact"}),h.jsx("p",{children:"The data gathered from this project has contributed to academic research on elite athletic performance and has been cited in sports science publications focused on optimizing movement efficiency in winter sports."})]})]})]}),fMe=()=>h.jsxs(h_,{title:"Dog Activity Counter",subtitle:"Smart monitoring for canine health and insurance",imageUrl:"/lovable-uploads/d5ce901e-2ce0-4f2a-bce1-f0ca5d6192df.png",brandName:"UK Insurance Giant",children:[h.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-6 flex items-center",children:[h.jsx(vO,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}),h.jsx("p",{className:"text-green-700 font-medium text-sm",children:"Completed Prototype Project"})]}),h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Smart Pet Monitoring System"}),h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),h.jsx("p",{children:"A leading UK insurance provider identified an opportunity to transform their pet insurance offerings by incorporating real-time health monitoring. They sought to develop a smart collar system that could track activity levels and vital signs, providing data for both preventative care and more accurate policy pricing."})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),h.jsx("p",{children:"Existing pet activity trackers suffered from short battery life, inaccurate data, and poor durability. Additionally, most lacked the comprehensive health monitoring capabilities needed to generate truly useful veterinary insights. The client needed a robust solution that pet owners would consistently use while providing reliable data for insurance assessments."}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),h.jsx("p",{children:"WRLDS Technologies developed a specialized smart collar system that incorporates:"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(fhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Advanced Activity Tracking"}),h.jsx("p",{children:"Precise step counting with behavior pattern recognition (walking, running, playing, sleeping)."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(she,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Health Monitoring"}),h.jsx("p",{children:"Non-invasive sensors that detect resting heart rate, respiration patterns, and sleep quality."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(vC,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Owner Application"}),h.jsx("p",{children:"User-friendly app providing health insights, activity recommendations, and preventative care alerts."})]})]}),h.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[h.jsx(Iy,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Veterinary Dashboard"}),h.jsx("p",{children:"Clinical interface for veterinarians to review longitudinal health data and identify early warning signs."})]})]})]}),h.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Technical Specifications"}),h.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[h.jsx("li",{children:"Waterproof design for active dogs"}),h.jsx("li",{children:"Extended battery life with wireless charging capability"}),h.jsx("li",{children:"Lightweight with adjustable sizing for all breeds"}),h.jsx("li",{children:"Cellular and Bluetooth connectivity for continuous data transmission"}),h.jsx("li",{children:"Machine learning algorithms that adapt to individual pet patterns"})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits for Insurance Provider"}),h.jsxs("div",{className:"space-y-6 mb-8",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Risk Assessment"}),h.jsx("p",{children:"More accurate risk profiling for policy pricing based on actual activity levels."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Preventative Care"}),h.jsx("p",{children:"Early detection algorithms reduced costly emergency treatments."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Customer Engagement"}),h.jsx("p",{children:"Increased policy renewal rates among pet owners using the system."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Data Insights"}),h.jsx("p",{children:"Created valuable breed-specific health benchmarks from aggregated anonymous data."})]})]})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits for Pet Owners"}),h.jsxs("div",{className:"space-y-6 mb-8",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Premium Discounts"}),h.jsx("p",{children:"Active pets qualify for reduction in insurance premiums."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Health Insights"}),h.jsx("p",{children:"Personalized health recommendations based on breed, age, and activity levels."})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:"✓"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Peace of Mind"}),h.jsx("p",{children:"Real-time alerts for concerning changes in behavior or vital signs."})]})]})]}),h.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),h.jsx("p",{children:"The prototype program was successfully implemented with a select group of pet owners across the UK, demonstrating the concept's viability and potential benefits. The insurance provider reported significant preliminary improvements in customer satisfaction and engagement metrics, while veterinary partners provided positive feedback on the system's ability to detect potential health issues earlier than conventional methods."}),h.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[h.jsx(Ufe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Industry Potential"}),h.jsx("p",{children:"This prototype demonstrated how a data-driven approach to pet insurance could represent a paradigm shift in the industry, where preventative care and real-time monitoring have the potential to transform the traditional reactive insurance model into a proactive health partnership between insurers, pet owners, and veterinarians."})]})]})]}),hMe=()=>h.jsxs("div",{className:"w-full relative",children:[h.jsxs(yt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:[h.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4",children:"Product"}),h.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-600 max-w-4xl",children:"5 years invested into tech focused end-to-end platform allowing customer brand to own pricing, branding, marketing and sales. Wrlds can help with all aspects of product creation, certification, initial production and app development."})]}),h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[h.jsx(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1",children:h.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-center mb-1",children:"Physical Devices"}),h.jsx("p",{className:"text-xs sm:text-sm text-center mb-4",children:"Data input"}),h.jsx("div",{className:"space-y-3",children:[{icon:h.jsx(yC,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Motion Sensors"},{icon:h.jsx(Eb,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Heart Rate Sensors"},{icon:h.jsx(Gfe,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Wireless Connectivity"},{icon:h.jsx(c4,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Power Management"},{icon:h.jsx(Iy,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Local Storage"},{icon:h.jsx(f4,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Cellular Connection"}].map((e,t)=>h.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 flex items-center",children:[h.jsx("div",{className:"mr-3 sm:mr-4 flex-shrink-0",children:e.icon}),h.jsx("span",{className:"text-gray-800 font-medium text-xs sm:text-sm",children:e.text})]},t))}),h.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["The hardware that collects data",h.jsx("br",{}),"from the physical world"]})]})}),h.jsx(yt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"hidden lg:flex items-center justify-center",children:h.jsx(Gc,{className:"text-black w-8 h-8"})}),h.jsx("div",{className:"flex lg:hidden items-center justify-center my-2",children:h.jsx(Gc,{className:"text-black w-6 h-6 rotate-90"})}),h.jsx(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex-[1.5]",children:h.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[h.jsxs("div",{className:"flex flex-col items-center mb-3 sm:mb-4",children:[h.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-center mb-0",children:"wrlds"}),h.jsx("p",{className:"text-lg sm:text-xl font-medium text-center",children:"Platform"})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:[{icon:h.jsx(Iy,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Cloud Storage"},{icon:h.jsx(yC,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Data Processing"},{icon:h.jsx(Eb,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"AI & ML"},{icon:h.jsx(c4,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Power Opt."},{icon:h.jsx(yh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Software"},{icon:h.jsx(vC,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Demo Apps"},{icon:h.jsx(f4,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Real-time Data"},{icon:h.jsx(u4,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Edge Compute"},{icon:h.jsx(yh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"APIs"},{icon:h.jsx(u4,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Infrastructure"},{icon:h.jsx(Jfe,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Cloud"},{icon:h.jsx(yh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Dev Tools"}].map((e,t)=>h.jsxs("div",{className:"bg-white rounded-lg p-2 sm:p-3 text-center flex flex-col items-center justify-center",children:[h.jsx("div",{className:"mb-1 sm:mb-2",children:e.icon}),h.jsx("div",{className:"text-[10px] sm:text-xs",children:e.name})]},t))}),h.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["Our platform processes data and",h.jsx("br",{}),"powers intelligent applications"]})]})}),h.jsx(yt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"hidden lg:flex items-center justify-center",children:h.jsx(Gc,{className:"text-black w-8 h-8"})}),h.jsx("div",{className:"flex lg:hidden items-center justify-center my-2",children:h.jsx(Gc,{className:"text-black w-6 h-6 rotate-90"})}),h.jsx(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"flex-1",children:h.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-center mb-1",children:"User Applications"}),h.jsx("p",{className:"text-xs sm:text-sm text-center mb-4",children:"Data output"}),h.jsx("div",{className:"space-y-3",children:[{icon:h.jsx(uhe,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Analytics Dashboard"},{icon:h.jsx(vC,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Mobile Applications"},{icon:h.jsx(Cb,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Customized Reports"},{icon:h.jsx(yh,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Third-party Integration"}].map((e,t)=>h.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 flex items-center",children:[h.jsx("div",{className:"mr-3 sm:mr-4 flex-shrink-0",children:e.icon}),h.jsx("span",{className:"text-gray-800 font-medium text-xs sm:text-sm",children:e.text})]},t))}),h.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["How people interact with and",h.jsx("br",{}),"benefit from the collected data"]})]})})]})]}),yi=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{ref:r,className:kt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));yi.displayName="Card";const Lo=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{ref:r,className:kt("flex flex-col space-y-1.5 p-6",e),...t}));Lo.displayName="CardHeader";const Fo=E.forwardRef(({className:e,...t},r)=>h.jsx("h3",{ref:r,className:kt("text-2xl font-semibold leading-none tracking-tight",e),...t}));Fo.displayName="CardTitle";const pMe=E.forwardRef(({className:e,...t},r)=>h.jsx("p",{ref:r,className:kt("text-sm text-muted-foreground",e),...t}));pMe.displayName="CardDescription";const vi=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{ref:r,className:kt("p-6 pt-0",e),...t}));vi.displayName="CardContent";const mMe=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{ref:r,className:kt("flex items-center p-6 pt-0",e),...t}));mMe.displayName="CardFooter";const gMe=()=>{oJ();const[e,t]=E.useState(0);return E.useEffect(()=>{const r=setTimeout(()=>t(100),100);return()=>clearTimeout(r)},[]),E.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx(Qr,{children:h.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"container mx-auto",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsxs(Xr,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),h.jsx(yt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl font-bold mb-6",children:"Technical Deep Dive"}),h.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.jsx(yt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-base sm:text-lg text-gray-600 mb-12",children:"Explore the technical details behind our smart textile sensor technology and learn how our system architecture enables rapid development and deployment."}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(Cb,{className:"w-5 h-5 text-gray-700"}),h.jsx("h2",{className:"text-2xl font-bold",children:"System Architecture"})]}),h.jsx("p",{className:"text-gray-600 mb-8 text-base max-w-3xl",children:"Our platform uses a three-tier architecture connecting physical devices to our cloud services and user applications. The diagram below illustrates how data flows through our system, from sensor collection to user-facing applications."}),h.jsx("div",{className:"w-full mb-6"}),h.jsx(yi,{className:"bg-white rounded-lg mb-10 border border-gray-200 shadow-sm",children:h.jsx(vi,{className:"p-4 lg:p-6",children:h.jsx(hMe,{})})})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(yh,{className:"w-5 h-5 text-gray-700"}),h.jsx("h2",{className:"text-2xl font-bold",children:"Our Approach"})]}),h.jsx("p",{className:"text-gray-600 mb-8 text-base max-w-3xl",children:"At WRLDS, we've developed a systematic approach to creating smart textile solutions that combines technical innovation with practical implementation. Our comprehensive development process ensures that every project moves efficiently from concept to market-ready product."}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[{title:"Discovery",icon:h.jsx(Eb,{className:"w-5 h-5 text-gray-700"}),description:"We begin with thorough market research and requirements gathering to understand your specific needs and opportunities."},{title:"Design & Prototyping",icon:h.jsx(yh,{className:"w-5 h-5 text-gray-700"}),description:"Our teams create initial designs and functional prototypes that allow for early testing and iteration."},{title:"Development & Testing",icon:h.jsx(Cb,{className:"w-5 h-5 text-gray-700"}),description:"We rigorously develop and test all components to ensure they meet performance and reliability standards."}].map((r,n)=>h.jsxs(yt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3+n*.1},className:"bg-gray-50 p-6 rounded-lg border border-gray-100 hover:shadow-md transition-all duration-300",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.icon,h.jsx("h3",{className:"font-semibold text-lg",children:r.title})]}),h.jsx("p",{className:"text-gray-600 text-base",children:r.description})]},r.title))})]})]}),h.jsx("div",{className:"mt-16 pt-8 border-t border-gray-200",children:h.jsxs(Xr,{to:"/development-process",className:"inline-flex items-center px-5 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all group",children:["Explore Our Development Process",h.jsx(Gc,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})})})})},yMe=()=>{const[e,t]=E.useState(1),r=E.useRef(null),n=E.useRef([]);E.useEffect(()=>{window.scrollTo(0,0)},[]);const i=[{id:1,title:"Textile Sensor Design",description:"We begin by designing custom textile sensors specifically for your industry and use case, selecting appropriate conductive materials and sensor types.",steps:["Industry-specific requirement analysis","Sensor type and material selection","Prototype sensor development","Initial testing and calibration"]},{id:2,title:"Garment Integration",description:"Our engineering team seamlessly integrates sensors into clothing and footwear while maintaining comfort, durability, and washability.",steps:["Ergonomic placement optimization","Non-intrusive integration techniques","Durability and washability testing","Comfort and user experience validation"]},{id:3,title:"AI & Data Analytics",description:"We develop specialized algorithms that transform textile sensor data into actionable insights unique to your industry requirements.",steps:["Industry-specific algorithm development","ML model training with domain data","Real-time analytics implementation","Insight delivery optimization"]},{id:4,title:"Production & Certification",description:"We handle manufacturing, quality control, and ensure all textile sensor products meet relevant industry standards and certifications.",steps:["Textile manufacturing partner selection","Quality assurance processes","Industry-specific certification procurement","Initial production supervision"]},{id:5,title:"Deployment & Support",description:"We provide comprehensive training, implementation assistance, and ongoing support to ensure successful adoption and continuous improvement.",steps:["User training and onboarding","Data interpretation guidance","Performance monitoring","Continuous improvement iterations"]}];return E.useEffect(()=>{n.current=i.map((s,a)=>n.current[a]||null)},[]),E.useEffect(()=>{const s=new IntersectionObserver(a=>{a[0].isIntersecting&&(a[0].target.classList.add("animate-fade-in"),a[0].target.style.opacity="1",s.unobserve(a[0].target))},{threshold:.1});return r.current&&s.observe(r.current),()=>s.disconnect()},[]),E.useEffect(()=>{const s=()=>{const o=window.innerHeight/2;let l=null,c=1/0;n.current.forEach((d,u)=>{if(!d)return;const f=d.getBoundingClientRect(),p=f.top+f.height/2,m=Math.abs(p-o);m<c&&(c=m,l=u)}),l!==null&&t(l+1)};return window.addEventListener("scroll",s,{passive:!0}),setTimeout(s,100),()=>window.removeEventListener("scroll",s)},[]),h.jsx(Qr,{children:h.jsx("section",{className:"pt-24 pb-16",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs(Xr,{to:"/",className:"flex items-center text-gray-500 hover:text-gray-700 mb-8",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),h.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Our Structured Development Process"}),h.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.jsx("p",{className:"text-xl text-gray-600 mb-12",children:"We've refined our development methodology to minimize risk and maximize innovation, ensuring your textile sensor project moves efficiently from concept to reality."}),h.jsxs("div",{className:"relative mt-12",ref:r,style:{opacity:0},children:[h.jsx("div",{className:"hidden md:block absolute top-0 left-1/2 w-0.5 h-full bg-gray-200 -translate-x-1/2"}),h.jsx("div",{className:"space-y-10 relative",children:i.map((s,a)=>h.jsxs("div",{ref:o=>n.current[a]=o,className:kt("relative flex flex-col md:flex-row md:items-center gap-6",a%2===0?"md:flex-row":"md:flex-row-reverse text-right"),children:[h.jsxs("div",{className:"md:w-1/2",children:[h.jsx("div",{className:kt("md:absolute top-0 left-1/2 md:-translate-x-1/2 w-12 h-12 rounded-full flex items-center justify-center z-10 transition-all duration-300",e===s.id?"bg-gray-700 text-white scale-110":"bg-white text-gray-700 border border-gray-300"),onClick:()=>t(s.id),children:h.jsx("span",{className:"font-bold",children:s.id})}),h.jsx("h3",{className:"text-xl font-bold mb-2 mt-3 md:mt-0",children:s.title}),h.jsx("p",{className:"text-gray-600 mb-3 text-sm",children:s.description}),h.jsx("button",{onClick:()=>t(s.id),className:kt("text-sm font-medium transition-colors",e===s.id?"text-gray-700":"text-gray-500 hover:text-gray-700"),children:e===s.id?"Currently Viewing":"View Details"})]}),h.jsxs("div",{className:kt("md:w-1/2 bg-white rounded-xl p-5 shadow-sm border border-gray-100 transition-all duration-300",e===s.id?"opacity-100 translate-y-0 shadow-md border-gray-200":"opacity-50 md:opacity-30 hover:opacity-70 cursor-pointer"),onClick:()=>t(s.id),children:[h.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Key Activities:"}),h.jsx("ul",{className:"space-y-2",children:s.steps.map((o,l)=>h.jsxs("li",{className:"flex items-start",children:[h.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-gray-100 flex items-center justify-center mt-0.5 mr-2",children:h.jsx(gO,{className:"w-3 h-3 text-gray-700"})}),h.jsx("span",{className:"text-gray-700 text-sm text-left",children:o})]},l))})]})]},s.id))})]}),h.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg my-12 border border-gray-100",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Our Development Principles"}),h.jsxs("ul",{className:"space-y-3",children:[h.jsxs("li",{className:"flex items-start",children:[h.jsx(Ic,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),h.jsx("span",{children:"Rapid iteration cycles for continuous improvement"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(Ic,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),h.jsx("span",{children:"Transparent communication throughout the development process"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(Ic,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),h.jsx("span",{children:"Modular architecture allowing for flexible and scalable solutions"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(Ic,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),h.jsx("span",{children:"Risk mitigation strategies built into every phase"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(Ic,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),h.jsx("span",{children:"Focus on user experience and practical functionality"})]})]})]})]}),h.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:h.jsxs(Xr,{to:"/tech-details",className:"inline-flex items-center px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all group",children:["Explore Our Technology",h.jsx(vMe,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})})})})},vMe=({className:e="w-4 h-4"})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M5 12h14"}),h.jsx("path",{d:"m12 5 7 7-7 7"})]}),NV=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx(Qr,{children:h.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"container mx-auto",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsx(yt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold mb-36 text-center",children:"Keitä me olemme ja miksi OmaVerkkoturva syntyi?"}),h.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.jsxs(yt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[h.jsx("div",{className:"flex justify-center lg:order-1",children:h.jsx("div",{className:"w-48 h-48 bg-gray-200 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-gray-500",children:"Kuva tulossa"})})}),h.jsxs("div",{className:"lg:order-2",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ketkä me olemme?"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Olemme kaksi nuorta kaveria, Arttu Ruotsalainen ja Arttu Simanainen, ja olemme tehneet uraa tietoliikennepalveluiden parissa, jossa meille realisoitui kuinka paljon nettirikollisuutta oikeasti on. Näemme jatkuvasti, miten ihmiset joutuvat huijauksien ja identiteettivarkauksien uhreiksi, sekä halusimme tehdä asialle jotain konkreettista."})]})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Missiomme"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Meidän tavoite on yksinkertainen: haluamme tehdä suomalaisista turvattuja verkossa. Jokaisella tulisi olla suoja, joka estää identiteettivarkaudet ja auttaa silloin, kun jotain ikävää ehtii jo tapahtua."})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl flex items-center justify-center text-white text-center p-4",children:h.jsx("div",{className:"text-lg font-semibold",children:"Kuvat tulossa"})})})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[h.jsx("div",{className:"flex justify-center lg:order-1",children:h.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center text-white text-center p-4",children:h.jsx("div",{className:"text-lg font-semibold",children:"Kuvat tulossa"})})}),h.jsxs("div",{className:"lg:order-2",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Visiomme"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Haluamme, että jokainen suomalainen voi käyttää nettiä ilman jatkuvaa huolta siitä, mihin omat tiedot päätyvät. Me uskomme, että hyvä digitaalinen turva ei ole vain palomuureja ja salasanoja, vaan mielenrauhaa ja sitä, että jos jotain sattuukin, et jää yksin. Siksi rakennamme palvelua, joka tunnistaa uhat ajoissa, auttaa sinua toimimaan heti ja seisoo rinnallasi, jos vahinko ehtii tapahtua. Meidän unelma on, että verkossa liikkuminen olisi yhtä huoleton asia kuin kävely kotipihalla."})]})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-36",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Mitä OmaVerkkoturva tekee?"}),h.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"Tarjoamme palvelun, joka auttaa ennaltaehkäisemään identiteettivarkauksia ja reagoimaan nopeasti, jos jotain sattuu. Me ymmärrämme, että huijaukset kehittyvät jatkuvasti ja siksi kehitämme myös itseämme sekä teknologiaamme jatkuvasti mukana."}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Palveluumme sisältyy myös vakuutus, joka kattaa kyberrikollisuudesta aiheutuneita taloudellisia menetyksiä. Näin voit liikkua verkossa varmemmin ja tiedät, että sinulla on selusta turvattu."})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Tuki ja turva - aina läsnä"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Osaamisemme ei rajoitu pelkästään tietoturvaan, vaan haluamme olla tukena myös kaikissa tietoliikenteeseen liittyvissä kysymyksissä ja haasteissa, sillä kyse on kokonaisuudessaan laajasta ja toisiinsa linkittyvästä kentästä."})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"w-48 h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:h.jsx("span",{className:"text-gray-500",children:"Kuva tulossa"})})})]}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-12",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Turvallinen verkko kuuluu kaikille"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Verkkorikollisuus kasvaa koko ajan, mutta niin kasvaa myös tietoisuus. Me haluamme olla mukana rakentamassa Suomea, jossa jokainen voi tuntea olonsa turvalliseksi netissä - iästä, taustasta tai teknisestä osaamisesta riippumatta."})]})]})]})})})})),_Me=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx("div",{className:"min-h-screen bg-white",children:h.jsx(Qr,{showContact:!1,children:h.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"container mx-auto",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsxs(Xr,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),h.jsx(yt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold mb-6",children:"Join Our Team"}),h.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.jsx(yt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-xl text-gray-600 mb-4",children:"We're looking for passionate innovators to help us revolutionize the smart textile industry."}),h.jsx(yt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-xl text-gray-600 mb-12",children:"We welcome both full-time professionals and interns who are eager to contribute to groundbreaking technology."}),h.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16",children:[h.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Why Join WRLDS?"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{title:"Innovation",description:"Work on cutting-edge technology that's changing multiple industries."},{title:"Impact",description:"Create solutions that enhance safety, performance, and quality of life."},{title:"Growth",description:"Develop your skills in a rapidly expanding field with diverse challenges."}].map((e,t)=>h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 h-full",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:e.title}),h.jsx("p",{className:"text-gray-600",children:e.description})]},t))}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 shadow-sm mt-12",children:[h.jsx("h3",{className:"font-bold text-xl mb-6",children:"Contact Our COO"}),h.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("img",{src:"/lovable-uploads/a9bb9110-964a-43b0-a5ab-7162140cd133.png",alt:"Love Anderberg",className:"w-32 h-32 rounded-full mb-4 object-cover filter grayscale"}),h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Love Anderberg"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"COO"}),h.jsxs("div",{className:"flex flex-col space-y-3",children:[h.jsxs("a",{href:"mailto:love@wrlds.com",className:"flex items-center text-gray-700 hover:text-blue-600",children:[h.jsx(N7,{className:"w-5 h-5 mr-2"}),"love@wrlds.com"]}),h.jsxs("a",{href:"https://www.linkedin.com/in/love-anderberg-67549a174/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-blue-600",children:[h.jsx(ahe,{className:"w-5 h-5 mr-2"}),"LinkedIn Profile"]}),h.jsxs("a",{href:"tel:+46760149508",className:"flex items-center text-gray-700 hover:text-blue-600",children:[h.jsx(_O,{className:"w-5 h-5 mr-2"}),"076-014 95 08"]})]})]})})]})]})]})]})})})})})),xMe=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx(Qr,{children:h.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"container mx-auto",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs(Xr,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),h.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Privacy Policy"}),h.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.jsx("p",{className:"text-gray-600 mb-6",children:"Last updated: April 11, 2025"}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"1. Introduction"}),h.jsx("p",{className:"text-gray-600 mb-4",children:'At WRLDS Technologies ("we," "our," or "us"), we respect your privacy and are committed to protecting your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website or use our services.'}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"2. Information We Collect"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may collect personal information that you voluntarily provide to us when you:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-600",children:[h.jsx("li",{children:"Contact us through our website"}),h.jsx("li",{children:"Subscribe to our newsletter"}),h.jsx("li",{children:"Register for our services"}),h.jsx("li",{children:"Participate in our surveys or promotions"})]}),h.jsx("p",{className:"text-gray-600 mb-4",children:"This information may include your name, email address, company name, phone number, and any other information you choose to provide."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"3. How We Use Your Information"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may use the information we collect for various purposes, including to:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-600",children:[h.jsx("li",{children:"Provide, operate, and maintain our services"}),h.jsx("li",{children:"Improve, personalize, and expand our services"}),h.jsx("li",{children:"Understand and analyze how you use our services"}),h.jsx("li",{children:"Develop new products, services, features, and functionality"}),h.jsx("li",{children:"Communicate with you about our services, updates, and other information"}),h.jsx("li",{children:"Process transactions and send related information"}),h.jsx("li",{children:"Find and prevent fraud"})]}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"4. Cookies and Tracking Technologies"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may use cookies and similar tracking technologies to track activity on our website and store certain information. Cookies are files with a small amount of data that may include an anonymous unique identifier. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"5. Third-Party Services"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may use third-party services that collect, monitor, and analyze data to improve our services. These third parties have their own privacy policies addressing how they use such information."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"6. Data Retention"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We will retain your personal information only for as long as is necessary for the purposes set out in this Privacy Policy."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"7. Security"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"The security of your data is important to us, but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"8. Your Rights"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Depending on your location, you may have certain rights regarding your personal information, such as the right to access, correct, or delete your personal information."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"9. Changes to This Privacy Policy"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. We will let you know via email and/or a prominent notice on our website prior to the change becoming effective."}),h.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"10. Contact Us"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"If you have any questions about this Privacy Policy, please contact us at hello@wrlds.com"})]})]})})})})),DV=({title:e,excerpt:t,imageUrl:r,date:n,slug:i,category:s})=>h.jsx(Xr,{to:`/blog/${i}`,children:h.jsx(yi,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 h-full",children:h.jsxs("div",{className:"grid grid-rows-[200px,1fr]",children:[h.jsx("div",{className:"bg-cover bg-center",style:{backgroundImage:`url('${r}')`},children:h.jsx("div",{className:"w-full h-full bg-black/20 flex items-center justify-center",children:h.jsx("span",{className:"px-3 py-1 bg-white/10 backdrop-blur-sm rounded-full text-sm font-medium text-white inline-block",children:s})})}),h.jsxs(vi,{className:"p-6",children:[h.jsx("p",{className:"text-gray-500 text-sm mb-2",children:n}),h.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:e}),h.jsx("p",{className:"text-gray-700 mb-4 line-clamp-3",children:t}),h.jsxs(zn,{variant:"outline",className:"group mt-auto",children:["Read more",h.jsx(Gc,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})})}),eh=[{id:"6",title:"Wearable Safety Tech: Protecting Workers While Delivering Real ROI",slug:"wearable-safety-tech-protecting-workers-roi",excerpt:"Discover how wearable safety technology puts worker wellbeing first while delivering measurable business benefits through injury prevention and enhanced workplace safety.",date:"June 12, 2025",author:"WRLDS Technologies",category:"Business",imageUrl:"/lovable-uploads/078a129e-0f98-4d91-af61-873687db1a04.png",keywords:["wearable safety technology","workplace injury prevention","worker safety","safety ROI","ergonomic sensors","workplace safety investment","industrial wearables","occupational safety","safety technology partnerships","worker protection","safety innovation","workplace wellbeing"],metaDescription:"Learn how wearable safety technology prioritizes worker protection while delivering proven business benefits. Real data shows significant injury reduction and improved workplace safety.",content:[{type:"paragraph",content:"Every worker deserves to go home safe at the end of their shift. That fundamental principle drives the evolution of workplace safety technology, where protecting people has always been the primary goal. What's remarkable about today's wearable safety technology is how it achieves this mission while also delivering tangible business benefits."},{type:"stats",statsData:[{value:"2.2",label:"Workplace injuries per 100 workers annually",icon:"Users"},{value:"$43K",label:"Average cost per medically consulted injury",icon:"DollarSign"},{value:"58%",label:"Injury reduction reported by early adopters",icon:"TrendingUp"}]},{type:"heading",content:"The Human Cost Behind the Numbers"},{type:"paragraph",content:"Behind every workplace injury statistic is a person: someone's parent, partner, or child. The data tells a sobering story about workplace safety in America. When we can prevent injuries before they happen, we're not just protecting company assets. We're preserving families and communities."},{type:"heading",content:"Real Results from Wearable Safety Technology"},{type:"paragraph",content:"The effectiveness of wearable safety technology becomes clear when we examine documented case studies and vendor-reported results. These implementations show real workers in demanding environments using technology that helps them stay safe while doing their jobs effectively."},{type:"subheading",content:"Documented Industry Results"},{type:"icon-list",items:["Companies report significant reductions in workplace injuries with consistent wearable device usage","Workers feel more confident and supported knowing technology is monitoring their safety","Safety managers gain real-time insights into workplace hazards and risk patterns","Insurance providers recognize the value with bundled policies for high-adoption organizations"]},{type:"heading",content:"When Safety and Business Align"},{type:"paragraph",content:"Effective safety technology creates a virtuous cycle where prioritizing people leads to positive business outcomes. When injuries decrease, so do workers' compensation claims, replacement worker costs, and operational disruptions."},{type:"table",tableData:{headers:["Safety Outcome","Human Impact","Business Benefit"],rows:[["Fewer back injuries","Workers maintain mobility and quality of life","Reduced comp claims and medical costs"],["Better ergonomic awareness","Less fatigue and chronic pain","Higher productivity and retention"],["Early hazard detection","Prevention of serious accidents","Avoided downtime and investigations"],["Real-time feedback","Workers feel supported and valued","Improved safety culture and morale"]]}},{type:"heading",content:"Growing Market for Worker-Centered Safety"},{type:"paragraph",content:"The market for wearable safety technology is expanding rapidly, reflecting a cultural shift toward prioritizing worker safety and wellbeing. Technology serves as an enabler rather than a replacement for human judgment and care."},{type:"paragraph",content:"Industry analysts project substantial growth in the wearable safety market over the coming years. Starting from a market value of $1.6 billion in 2023, the sector is expected to grow steadily to $2.1 billion in 2024, reaching $2.7 billion by 2025. This growth trajectory continues with projections of $3.3 billion in 2026, $3.8 billion in 2027, and $4.2 billion by 2028. This expansion reflects increasing organizational commitment to worker safety and the proven value of wearable safety solutions."},{type:"heading",content:"How WRLDS Supports Your Safety Mission"},{type:"paragraph",content:"We understand that every organization's safety challenges are unique. That's why we've built a flexible platform that can adapt to your specific needs while maintaining our core focus on worker protection."},{type:"subheading",content:"Our Collaborative Approach"},{type:"icon-list",items:["Flexible integration that works with your existing safety programs and doesn't disrupt worker routines","White-label solutions that let you maintain your brand identity while providing cutting-edge safety technology","Proven supply chain partnerships that ensure reliable, high-quality components for long-term deployment","Data insights that help you understand and improve your safety culture, not just track compliance metrics"]},{type:"heading",content:"Start the Conversation"},{type:"paragraph",content:"We'd love to learn about your safety goals and specific challenges. Whether you're looking to reduce particular types of injuries, improve safety culture, or explore how technology can support your existing programs, we're here to listen and collaborate."},{type:"paragraph",content:"Bring your organization's injury and loss data, and we'll work together to calculate potential benefits using your actual numbers. We can help you explore how wearable technology might fit into your comprehensive safety strategy. No hard sell, no one-size-fits-all solutions: just an honest conversation about protecting the people who make your organization successful."},{type:"quote",content:"Great safety partnerships start with shared values: putting workers first, building trust through transparency, and believing that everyone deserves to work in an environment where they can thrive safely."},{type:"heading",content:"Sources and References"},{type:"bibliography",items:["National Safety Council, Work Injury Costs, Injury Facts, 2024 edition. Available at: injuryfacts.nsc.org","US Bureau of Labor Statistics, Employer-Reported Workplace Injuries and Illnesses, 2023, Table 1. Available at: bls.gov","Occupational Safety and Health Administration, Safety Pays Individual Injury Estimator. Available at: osha.gov",'Digi International, "Kinetic Creates an Innovative Wearable That Reduces Workplace Injuries," customer story, 2024. Available at: digi.com',`"Want Wearable Tech With That Workers' Comp Policy?" Insurance Journal, 2021. Available at: insurancejournal.com`,'"Nationwide, Kinetic Team on Wearable Workplace Safety Technology," Carrier Management, 2021. Available at: carriermanagement.com','Markets and Markets, "Wearable Sensors Market Size, Share, Industry Report," 2024 update. Available at: marketsandmarkets.com']}]},{id:"5",title:"Smart PPE Revolution: How Safety Technology is Transforming Worker Protection",slug:"smart-ppe-revolution-safety-technology",excerpt:"Discover how smart textiles and sensor technology are revolutionizing personal protective equipment, creating safer workplaces and preventing accidents before they happen.",date:"June 5, 2025",author:"WRLDS Technologies",category:"Innovation",imageUrl:"/lovable-uploads/927dae7e-6aaf-4b76-add2-1287a1dd9dc0.png",keywords:["smart PPE","safety technology","personal protective equipment","smart textiles","workplace safety","wearable sensors","construction safety","industrial IoT","worker protection","safety monitoring","smart helmets","connected safety gear","occupational safety","safety innovation","protective equipment technology"],metaDescription:"Learn how smart PPE with integrated sensors is revolutionizing workplace safety. Discover the latest innovations in intelligent personal protective equipment that prevent accidents and save lives.",content:[{type:"paragraph",content:"The realm of personal protective equipment (PPE) is undergoing a significant transformation, driven by advancements in smart textiles and sensor technology. Traditional PPE, designed as a passive barrier against workplace hazards, is evolving into intelligent, interconnected systems that actively monitor conditions and provide real-time alerts. This shift is creating safer work environments and preventing accidents before they occur."},{type:"heading",content:"The Evolution of PPE: From Passive to Proactive"},{type:"paragraph",content:"For decades, PPE has primarily served as a last line of defense, offering limited protection and often failing to address the underlying causes of accidents. However, the integration of smart technology is enabling a proactive approach to safety, where PPE not only protects but also anticipates and mitigates risks."},{type:"subheading",content:"Key Components of Smart PPE"},{type:"list",items:["Embedded Sensors: Detecting environmental conditions, physiological parameters, and potential hazards.","Connectivity: Enabling real-time data transmission and communication between workers, supervisors, and emergency responders.","Data Analytics: Providing insights into worker performance, risk factors, and safety trends.","Alert Systems: Triggering automated warnings and notifications to prevent accidents and ensure timely intervention."]},{type:"heading",content:"Real-World Applications of Smart PPE"},{type:"subheading",content:"Construction Industry"},{type:"paragraph",content:"In construction, smart helmets equipped with sensors can detect falls, monitor head impacts, and alert emergency services. Smart vests can track worker location, monitor vital signs, and detect exposure to hazardous substances."},{type:"subheading",content:"Manufacturing Sector"},{type:"paragraph",content:"In manufacturing, smart gloves can provide real-time feedback on worker movements, preventing repetitive strain injuries. Smart eyewear can offer augmented reality overlays, guiding workers through complex tasks and reducing errors."},{type:"subheading",content:"Healthcare Environment"},{type:"paragraph",content:"In healthcare, smart gowns can monitor patient vital signs, detect infections, and alert medical staff. Smart masks can track air quality, filter out harmful particles, and provide real-time feedback on respiratory function."},{type:"heading",content:"The Future of Worker Protection"},{type:"paragraph",content:"As technology continues to advance, smart PPE is poised to become an indispensable tool for ensuring worker safety and well-being. By providing real-time data, automated alerts, and proactive risk mitigation, smart PPE is transforming the way we approach safety in the workplace."},{type:"quote",content:"Smart PPE is not just about protecting workers; it's about empowering them with the knowledge and tools they need to stay safe and productive."}]},{id:"4",title:"Leveraging Sensor Technology in Product Development: A Strategic Approach",slug:"leveraging-sensor-technology-product-development",excerpt:"Explore how sensor technology is revolutionizing product development across industries, from smart textiles to IoT devices, and learn strategic approaches for implementation.",date:"May 8, 2025",author:"WRLDS Technologies",category:"Technology",imageUrl:"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",keywords:["sensor technology","product development","smart textiles","IoT sensors","wearable technology","textile sensors","manufacturing innovation","embedded sensors","smart fabrics","sensor integration"],metaDescription:"Discover how sensor technology is transforming product development. Learn strategic approaches for integrating sensors into textiles and manufacturing processes.",content:[{type:"paragraph",content:"Sensor technology is rapidly transforming product development across various industries. From smart textiles that monitor vital signs to IoT devices that automate home functions, sensors are enabling a new era of intelligent and responsive products. This article explores how businesses can strategically leverage sensor technology to enhance their product development processes."},{type:"heading",content:"The Shift from Manual Testing to Sensor-Driven Insights"},{type:"paragraph",content:"Traditional product development often relies on manual testing and subjective feedback, which can be time-consuming and prone to errors. Sensor technology offers a more objective and data-driven approach, providing real-time insights into product performance and user behavior. By embedding sensors into prototypes and early-stage products, developers can gather valuable data on usage patterns, environmental conditions, and potential failure points."},{type:"subheading",content:"Key Benefits of Sensor Integration"},{type:"list",items:["Real-time Performance Measurement: Sensors provide continuous data on product performance, allowing developers to identify and address issues quickly.","Automated Testing: Sensors can automate testing processes, reducing the need for manual intervention and accelerating development cycles.","Data-Driven Insights: Sensor data provides valuable insights into user behavior, enabling developers to optimize product design and functionality.","Predictive Maintenance: Sensors can detect early signs of wear and tear, allowing for proactive maintenance and preventing costly downtime."]},{type:"heading",content:"Real-time Performance Measurement Made Easy"},{type:"paragraph",content:"One of the most significant advantages of sensor technology is its ability to provide real-time performance measurement. By embedding sensors into products, developers can continuously monitor key metrics such as temperature, pressure, vibration, and strain. This data can be used to identify potential issues, optimize product performance, and ensure that products meet design specifications."},{type:"heading",content:"Faster Iterations Through Automated Testing and AI"},{type:"paragraph",content:"Sensor technology can also be used to automate testing processes, reducing the need for manual intervention and accelerating development cycles. By integrating sensors with AI algorithms, developers can create intelligent testing systems that automatically identify and diagnose issues. These systems can also be used to predict product failures, allowing for proactive maintenance and preventing costly downtime."},{type:"heading",content:"Key Business Benefits"},{type:"table",tableData:{headers:["Industry","Challenge","Sensor Solution"],rows:[["Construction","Monitoring worker safety on construction sites","Wearable sensors that detect falls, monitor vital signs, and alert emergency services."],["Manufacturing","Preventing equipment failures in manufacturing plants","Embedded sensors that monitor equipment performance, detect early signs of wear and tear, and trigger maintenance alerts."],["Healthcare","Monitoring patient health in hospitals and clinics","Wearable sensors that track vital signs, detect infections, and alert medical staff."]]}},{type:"heading",content:"Ready to Transform Your Product Development?"},{type:"paragraph",content:"Sensor technology is revolutionizing product development across industries, offering a more objective, data-driven, and efficient approach. By strategically leveraging sensor technology, businesses can enhance their product development processes, improve product performance, and gain a competitive edge."}]},{id:"3",title:"From Idea to Launch: Our Smart Product Development Process",slug:"from-idea-to-launch-development-process",excerpt:"Take a behind-the-scenes look at how WRLDS transforms ideas into market-ready smart products through our proven 5-step development process.",date:"May 15, 2025",author:"WRLDS Technologies",category:"Process",imageUrl:"/lovable-uploads/5262afdb-dd24-4d5e-be66-7c6717adbca9.png",keywords:["product development","smart product design","development process","prototyping","manufacturing","product launch","innovation process","textile development","smart textiles"],metaDescription:"Learn about WRLDS proven 5-step process for developing smart products from initial concept to market launch. Discover how we turn ideas into reality.",content:[{type:"paragraph",content:"At WRLDS, we simplify the journey from an idea to a finished smart product. Whether you're starting from scratch or already have a clear concept ready to scale, we're here to support you exactly where you need us."},{type:"paragraph",content:"Let's walk through our process with an example: Imagine you come to us with the idea of a smart glove. This glove automatically senses the outside temperature and adjusts its own warmth accordingly. It also connects to an app where you can control settings and view temperature information."},{type:"heading",content:"Step 1: Understanding Your Idea"},{type:"paragraph",content:"It all starts with a clear conversation. When you bring us your glove idea, we first meet to fully understand your vision and requirements. We'll discuss key points: What problem does the product solve? Who will use it? After that, we set a clear and practical roadmap."},{type:"paragraph",content:"If you already have a basic prototype or idea, we'll quickly identify how we can help scale it effectively."},{type:"heading",content:"Step 2: Building the First Prototype"},{type:"paragraph",content:"Once the plan is set, our team moves quickly to develop the first working prototype. For your smart glove, we design temperature sensors, heating elements, electronics, and the companion app to work seamlessly together."},{type:"paragraph",content:"We use rapid prototyping techniques like 3D printing and quick electronics integration. Within weeks, you get a tangible product to test and gather feedback."},{type:"heading",content:"Step 3: Testing & Refinement"},{type:"paragraph",content:"With your prototype ready, we jump into testing. You'll evaluate the glove under real-world conditions to identify improvements. Together, we'll adjust designs, optimize the heating response, enhance the app, and retest frequently."},{type:"paragraph",content:"This process is quick, iterative, and practical, bringing you closer to a reliable, user-friendly product."},{type:"heading",content:"Step 4: Preparing for Production"},{type:"paragraph",content:"Next, we prepare the glove for large-scale manufacturing. We refine the design for efficient production, select reliable components, and ensure quality at scale."},{type:"paragraph",content:"If you already have a manufacturing partner, we'll work closely with them. If not, we'll help you find the best production solution. In either case, we'll integrate the technology smoothly into the production process."},{type:"heading",content:"Step 5: Product Launch"},{type:"paragraph",content:"Finally, it's launch day. You introduce your smart glove, thoroughly tested and production-ready, to the market. WRLDS provides ongoing support to ensure a smooth launch—from technical documentation to supporting the app's release."},{type:"heading",content:"Why Choose WRLDS?"},{type:"paragraph",content:"Developing smart products can be complex, but we make it simple. Clients choose us because:"},{type:"list",items:["Clear Process: Simple steps, clear timelines, and reduced risks.","Speed & Flexibility: Rapid prototyping and agile iterations get your product to market faster.","Comprehensive Expertise: Hardware, software, and design experts under one roof.","Practical Results: Real-world testing ensures your final product meets user needs."]},{type:"paragraph",content:"Have an idea or ready to scale an existing product? We'd love to hear from you and help bring your vision to life. Reach out and let's get started!"}]},{id:"2",title:"AI-Powered Uniforms: The Future of Emergency Response and Worker Safety",slug:"ai-powered-uniforms-emergency-alerts",excerpt:"Explore how AI-integrated uniforms are revolutionizing emergency response by providing real-time health monitoring and automated alert systems for first responders and industrial workers.",date:"May 8, 2025",author:"WRLDS Technologies",category:"Innovation",imageUrl:"/lovable-uploads/4187f423-ba69-4043-be76-c43098488348.png",keywords:["AI uniforms","emergency response","worker safety","smart uniforms","health monitoring","first responders","safety technology","wearable AI"],metaDescription:"Discover how AI-powered uniforms are transforming emergency response and worker safety with real-time monitoring and automated alerts.",content:[{type:"paragraph",content:"The integration of artificial intelligence (AI) into everyday workwear is no longer a futuristic concept but a rapidly evolving reality. AI-powered uniforms are poised to revolutionize emergency response and worker safety by providing real-time health monitoring and automated alert systems for first responders and industrial workers."},{type:"heading",content:"The Convergence of AI and Wearable Technology"},{type:"paragraph",content:"The convergence of AI and wearable technology has paved the way for the development of smart uniforms capable of collecting and analyzing vast amounts of data. These uniforms are equipped with an array of sensors that monitor vital signs, environmental conditions, and potential hazards."},{type:"subheading",content:"Key Features of AI-Powered Uniforms"},{type:"list",items:["Real-time Health Monitoring: AI-powered uniforms continuously monitor vital signs such as heart rate, body temperature, and blood pressure, providing early warnings of potential health issues.","Automated Alert Systems: In the event of a medical emergency or hazardous situation, AI-powered uniforms can automatically alert emergency responders, providing critical information about the worker's location and condition.","Environmental Monitoring: AI-powered uniforms can detect exposure to hazardous substances, such as toxic gases or radiation, and provide real-time alerts to workers and supervisors.","Performance Optimization: AI-powered uniforms can track worker movements and provide feedback on posture and ergonomics, helping to prevent injuries and improve performance."]},{type:"heading",content:"Transforming Emergency Response"},{type:"paragraph",content:"AI-powered uniforms are particularly valuable in emergency response scenarios, where time is of the essence. By providing real-time health monitoring and automated alert systems, these uniforms can help first responders quickly identify and address medical emergencies, potentially saving lives."},{type:"heading",content:"Enhancing Worker Safety"},{type:"paragraph",content:"AI-powered uniforms can also play a crucial role in enhancing worker safety in industrial settings. By monitoring environmental conditions and worker movements, these uniforms can help prevent accidents and injuries, creating a safer and more productive work environment."},{type:"quote",content:"AI-powered uniforms are not just about protecting workers; they're about empowering them with the knowledge and tools they need to stay safe and healthy."}]},{id:"1",title:"The Rise of Sensor-Integrated Textiles: A New Era in Smart Manufacturing",slug:"sensor-integrated-textiles-trend",excerpt:"Discover how sensor-integrated textiles are transforming industries from healthcare to sports, creating new possibilities for smart, responsive products.",date:"May 2, 2025",author:"WRLDS Technologies",category:"Technology",imageUrl:"/lovable-uploads/48ecf6e2-5a98-4a9d-af6f-ae2265cd4098.png",keywords:["smart textiles","sensor integration","smart manufacturing","wearable technology","textile innovation","smart fabrics","textile sensors"],metaDescription:"Learn about the revolutionary trend of sensor-integrated textiles and how they are creating new possibilities in smart manufacturing.",content:[{type:"paragraph",content:"Sensor-integrated textiles are rapidly emerging as a transformative technology, poised to revolutionize industries ranging from healthcare to sports. By seamlessly embedding sensors into fabrics, these innovative textiles are creating new possibilities for smart, responsive products that can monitor vital signs, track performance, and enhance safety."},{type:"heading",content:"The Convergence of Textiles and Technology"},{type:"paragraph",content:"The convergence of textiles and technology has led to the development of sensor-integrated textiles, which combine the comfort and flexibility of fabrics with the intelligence and connectivity of sensors. These textiles are created by weaving or knitting sensors directly into the fabric structure, allowing them to conform to the body and provide continuous, real-time data."},{type:"subheading",content:"Key Applications of Sensor-Integrated Textiles"},{type:"list",items:["Healthcare: Sensor-integrated textiles can monitor vital signs such as heart rate, body temperature, and blood pressure, providing early warnings of potential health issues.","Sports: Sensor-integrated textiles can track athletic performance, measuring metrics such as speed, distance, and acceleration, helping athletes optimize their training and prevent injuries.","Safety: Sensor-integrated textiles can detect exposure to hazardous substances, such as toxic gases or radiation, providing real-time alerts to workers and supervisors.","Fashion: Sensor-integrated textiles can create interactive and responsive garments that change color, shape, or function based on the wearer's movements or environment."]},{type:"heading",content:"Transforming Industries"},{type:"paragraph",content:"Sensor-integrated textiles are poised to transform a wide range of industries, creating new possibilities for smart, responsive products that enhance health, safety, and performance. As the technology continues to evolve, we can expect to see even more innovative applications emerge, further blurring the lines between textiles and technology."},{type:"quote",content:"Sensor-integrated textiles are not just about creating smart fabrics; they're about creating a new era of smart manufacturing, where textiles are seamlessly integrated with technology to enhance our lives."}]}],bMe=()=>{const e=eh.find(r=>r.id==="6")||eh[0],t=eh.filter(r=>r.id!==(e==null?void 0:e.id));return h.jsxs(Qr,{children:[h.jsx(sm,{title:"WRLDS - News and insights about smart textile technology",description:"Stay updated with the latest news and insights about sensor-integrated textiles and smart technology from WRLDS Technologies.",imageUrl:(e==null?void 0:e.imageUrl)||"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",keywords:["smart textiles","textile technology","industry news","sensor innovation","wearable tech","smart fabrics"],type:"website"}),h.jsx("div",{className:"w-full pt-24 pb-12 bg-gradient-to-b from-black to-gray-900 text-white",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"WRLDS News & Insights"}),h.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"The latest trends and news in sensor-integrated textiles and smart technology"})]})})}),h.jsx("div",{className:"container mx-auto px-4 py-16",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e&&h.jsx(Xr,{to:`/blog/${e.slug}`,className:"col-span-1 md:col-span-2 lg:col-span-3",children:h.jsx(yi,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 h-full",children:h.jsxs("div",{className:"grid md:grid-cols-2 h-full",children:[h.jsx("div",{className:"bg-cover bg-center h-64 md:h-full p-8 flex items-center justify-center",style:{backgroundImage:`url('${e.imageUrl}')`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:h.jsxs("div",{className:"text-white text-center bg-black/30 backdrop-blur-sm p-4 rounded-lg",children:[h.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm font-medium inline-block mb-4",children:"Featured"}),h.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:e.title})]})}),h.jsxs(vi,{className:"p-8",children:[h.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Published: ",e.date]}),h.jsx("p",{className:"text-gray-700 mb-6",children:e.excerpt}),h.jsxs(zn,{variant:"outline",className:"group",children:["Read more",h.jsx(Gc,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})})}),t.map(r=>h.jsx(DV,{title:r.title,excerpt:r.excerpt,imageUrl:r.imageUrl||"/lovable-uploads/48ecf6e2-5a98-4a9d-af6f-ae2265cd4098.png",date:r.date,slug:r.slug,category:r.category},r.id)),eh.length<4&&Array.from({length:Math.max(0,4-eh.length)}).map((r,n)=>h.jsx(DV,{title:"Upcoming article",excerpt:"Stay tuned for more exciting articles about smart textiles and sensor technology.",imageUrl:n%2===0?"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png":"/lovable-uploads/700e27d7-0513-4bfa-8ac4-f7fd6087594c.png",date:"Coming soon",slug:"#",category:"Upcoming"},`placeholder-${n}`))]})})]})};var wMe=Array.isArray,Us=wMe,TMe=typeof is=="object"&&is&&is.Object===Object&&is,cJ=TMe,MMe=cJ,kMe=typeof self=="object"&&self&&self.Object===Object&&self,SMe=MMe||kMe||Function("return this")(),ol=SMe,PMe=ol,EMe=PMe.Symbol,p_=EMe,RV=p_,uJ=Object.prototype,CMe=uJ.hasOwnProperty,jMe=uJ.toString,og=RV?RV.toStringTag:void 0;function AMe(e){var t=CMe.call(e,og),r=e[og];try{e[og]=void 0;var n=!0}catch{}var i=jMe.call(e);return n&&(t?e[og]=r:delete e[og]),i}var OMe=AMe,$Me=Object.prototype,IMe=$Me.toString;function NMe(e){return IMe.call(e)}var DMe=NMe,LV=p_,RMe=OMe,LMe=DMe,FMe="[object Null]",BMe="[object Undefined]",FV=LV?LV.toStringTag:void 0;function zMe(e){return e==null?e===void 0?BMe:FMe:FV&&FV in Object(e)?RMe(e):LMe(e)}var tc=zMe;function VMe(e){return e!=null&&typeof e=="object"}var rc=VMe,UMe=tc,WMe=rc,GMe="[object Symbol]";function HMe(e){return typeof e=="symbol"||WMe(e)&&UMe(e)==GMe}var am=HMe,KMe=Us,qMe=am,XMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,YMe=/^\w*$/;function QMe(e,t){if(KMe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qMe(e)?!0:YMe.test(e)||!XMe.test(e)||t!=null&&e in Object(t)}var F$=QMe;function ZMe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Su=ZMe;const om=Ir(Su);var JMe=tc,eke=Su,tke="[object AsyncFunction]",rke="[object Function]",nke="[object GeneratorFunction]",ike="[object Proxy]";function ske(e){if(!eke(e))return!1;var t=JMe(e);return t==rke||t==nke||t==tke||t==ike}var B$=ske;const lr=Ir(B$);var ake=ol,oke=ake["__core-js_shared__"],lke=oke,DS=lke,BV=function(){var e=/[^.]+$/.exec(DS&&DS.keys&&DS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cke(e){return!!BV&&BV in e}var uke=cke,dke=Function.prototype,fke=dke.toString;function hke(e){if(e!=null){try{return fke.call(e)}catch{}try{return e+""}catch{}}return""}var dJ=hke,pke=B$,mke=uke,gke=Su,yke=dJ,vke=/[\\^$.*+?()[\]{}|]/g,_ke=/^\[object .+?Constructor\]$/,xke=Function.prototype,bke=Object.prototype,wke=xke.toString,Tke=bke.hasOwnProperty,Mke=RegExp("^"+wke.call(Tke).replace(vke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kke(e){if(!gke(e)||mke(e))return!1;var t=pke(e)?Mke:_ke;return t.test(yke(e))}var Ske=kke;function Pke(e,t){return e==null?void 0:e[t]}var Eke=Pke,Cke=Ske,jke=Eke;function Ake(e,t){var r=jke(e,t);return Cke(r)?r:void 0}var mf=Ake,Oke=mf,$ke=Oke(Object,"create"),J1=$ke,zV=J1;function Ike(){this.__data__=zV?zV(null):{},this.size=0}var Nke=Ike;function Dke(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Rke=Dke,Lke=J1,Fke="__lodash_hash_undefined__",Bke=Object.prototype,zke=Bke.hasOwnProperty;function Vke(e){var t=this.__data__;if(Lke){var r=t[e];return r===Fke?void 0:r}return zke.call(t,e)?t[e]:void 0}var Uke=Vke,Wke=J1,Gke=Object.prototype,Hke=Gke.hasOwnProperty;function Kke(e){var t=this.__data__;return Wke?t[e]!==void 0:Hke.call(t,e)}var qke=Kke,Xke=J1,Yke="__lodash_hash_undefined__";function Qke(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xke&&t===void 0?Yke:t,this}var Zke=Qke,Jke=Nke,eSe=Rke,tSe=Uke,rSe=qke,nSe=Zke;function lm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lm.prototype.clear=Jke;lm.prototype.delete=eSe;lm.prototype.get=tSe;lm.prototype.has=rSe;lm.prototype.set=nSe;var iSe=lm;function sSe(){this.__data__=[],this.size=0}var aSe=sSe;function oSe(e,t){return e===t||e!==e&&t!==t}var z$=oSe,lSe=z$;function cSe(e,t){for(var r=e.length;r--;)if(lSe(e[r][0],t))return r;return-1}var eT=cSe,uSe=eT,dSe=Array.prototype,fSe=dSe.splice;function hSe(e){var t=this.__data__,r=uSe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():fSe.call(t,r,1),--this.size,!0}var pSe=hSe,mSe=eT;function gSe(e){var t=this.__data__,r=mSe(t,e);return r<0?void 0:t[r][1]}var ySe=gSe,vSe=eT;function _Se(e){return vSe(this.__data__,e)>-1}var xSe=_Se,bSe=eT;function wSe(e,t){var r=this.__data__,n=bSe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var TSe=wSe,MSe=aSe,kSe=pSe,SSe=ySe,PSe=xSe,ESe=TSe;function cm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}cm.prototype.clear=MSe;cm.prototype.delete=kSe;cm.prototype.get=SSe;cm.prototype.has=PSe;cm.prototype.set=ESe;var tT=cm,CSe=mf,jSe=ol,ASe=CSe(jSe,"Map"),V$=ASe,VV=iSe,OSe=tT,$Se=V$;function ISe(){this.size=0,this.__data__={hash:new VV,map:new($Se||OSe),string:new VV}}var NSe=ISe;function DSe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var RSe=DSe,LSe=RSe;function FSe(e,t){var r=e.__data__;return LSe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var rT=FSe,BSe=rT;function zSe(e){var t=BSe(this,e).delete(e);return this.size-=t?1:0,t}var VSe=zSe,USe=rT;function WSe(e){return USe(this,e).get(e)}var GSe=WSe,HSe=rT;function KSe(e){return HSe(this,e).has(e)}var qSe=KSe,XSe=rT;function YSe(e,t){var r=XSe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var QSe=YSe,ZSe=NSe,JSe=VSe,ePe=GSe,tPe=qSe,rPe=QSe;function um(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}um.prototype.clear=ZSe;um.prototype.delete=JSe;um.prototype.get=ePe;um.prototype.has=tPe;um.prototype.set=rPe;var U$=um,fJ=U$,nPe="Expected a function";function W$(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nPe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(W$.Cache||fJ),r}W$.Cache=fJ;var hJ=W$;const iPe=Ir(hJ);var sPe=hJ,aPe=500;function oPe(e){var t=sPe(e,function(n){return r.size===aPe&&r.clear(),n}),r=t.cache;return t}var lPe=oPe,cPe=lPe,uPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dPe=/\\(\\)?/g,fPe=cPe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(uPe,function(r,n,i,s){t.push(i?s.replace(dPe,"$1"):n||r)}),t}),hPe=fPe;function pPe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var G$=pPe,UV=p_,mPe=G$,gPe=Us,yPe=am,vPe=1/0,WV=UV?UV.prototype:void 0,GV=WV?WV.toString:void 0;function pJ(e){if(typeof e=="string")return e;if(gPe(e))return mPe(e,pJ)+"";if(yPe(e))return GV?GV.call(e):"";var t=e+"";return t=="0"&&1/e==-vPe?"-0":t}var _Pe=pJ,xPe=_Pe;function bPe(e){return e==null?"":xPe(e)}var mJ=bPe,wPe=Us,TPe=F$,MPe=hPe,kPe=mJ;function SPe(e,t){return wPe(e)?e:TPe(e,t)?[e]:MPe(kPe(e))}var gJ=SPe,PPe=am,EPe=1/0;function CPe(e){if(typeof e=="string"||PPe(e))return e;var t=e+"";return t=="0"&&1/e==-EPe?"-0":t}var nT=CPe,jPe=gJ,APe=nT;function OPe(e,t){t=jPe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[APe(t[r++])];return r&&r==n?e:void 0}var H$=OPe,$Pe=H$;function IPe(e,t,r){var n=e==null?void 0:$Pe(e,t);return n===void 0?r:n}var yJ=IPe;const oa=Ir(yJ);function NPe(e){return e==null}var DPe=NPe;const vr=Ir(DPe);var RPe=tc,LPe=Us,FPe=rc,BPe="[object String]";function zPe(e){return typeof e=="string"||!LPe(e)&&FPe(e)&&RPe(e)==BPe}var VPe=zPe;const m_=Ir(VPe);var vJ={exports:{}},Ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K$=Symbol.for("react.element"),q$=Symbol.for("react.portal"),iT=Symbol.for("react.fragment"),sT=Symbol.for("react.strict_mode"),aT=Symbol.for("react.profiler"),oT=Symbol.for("react.provider"),lT=Symbol.for("react.context"),UPe=Symbol.for("react.server_context"),cT=Symbol.for("react.forward_ref"),uT=Symbol.for("react.suspense"),dT=Symbol.for("react.suspense_list"),fT=Symbol.for("react.memo"),hT=Symbol.for("react.lazy"),WPe=Symbol.for("react.offscreen"),_J;_J=Symbol.for("react.module.reference");function Fa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case K$:switch(e=e.type,e){case iT:case aT:case sT:case uT:case dT:return e;default:switch(e=e&&e.$$typeof,e){case UPe:case lT:case cT:case hT:case fT:case oT:return e;default:return t}}case q$:return t}}}Ur.ContextConsumer=lT;Ur.ContextProvider=oT;Ur.Element=K$;Ur.ForwardRef=cT;Ur.Fragment=iT;Ur.Lazy=hT;Ur.Memo=fT;Ur.Portal=q$;Ur.Profiler=aT;Ur.StrictMode=sT;Ur.Suspense=uT;Ur.SuspenseList=dT;Ur.isAsyncMode=function(){return!1};Ur.isConcurrentMode=function(){return!1};Ur.isContextConsumer=function(e){return Fa(e)===lT};Ur.isContextProvider=function(e){return Fa(e)===oT};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===K$};Ur.isForwardRef=function(e){return Fa(e)===cT};Ur.isFragment=function(e){return Fa(e)===iT};Ur.isLazy=function(e){return Fa(e)===hT};Ur.isMemo=function(e){return Fa(e)===fT};Ur.isPortal=function(e){return Fa(e)===q$};Ur.isProfiler=function(e){return Fa(e)===aT};Ur.isStrictMode=function(e){return Fa(e)===sT};Ur.isSuspense=function(e){return Fa(e)===uT};Ur.isSuspenseList=function(e){return Fa(e)===dT};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===iT||e===aT||e===sT||e===uT||e===dT||e===WPe||typeof e=="object"&&e!==null&&(e.$$typeof===hT||e.$$typeof===fT||e.$$typeof===oT||e.$$typeof===lT||e.$$typeof===cT||e.$$typeof===_J||e.getModuleId!==void 0)};Ur.typeOf=Fa;vJ.exports=Ur;var xJ=vJ.exports,GPe=tc,HPe=rc,KPe="[object Number]";function qPe(e){return typeof e=="number"||HPe(e)&&GPe(e)==KPe}var bJ=qPe;const XPe=Ir(bJ);var YPe=bJ;function QPe(e){return YPe(e)&&e!=+e}var ZPe=QPe;const g_=Ir(ZPe);var bs=function(t){return t===0?0:t>0?1:-1},kd=function(t){return m_(t)&&t.indexOf("%")===t.length-1},dt=function(t){return XPe(t)&&!g_(t)},xi=function(t){return dt(t)||m_(t)},JPe=0,y_=function(t){var r=++JPe;return"".concat(t||"").concat(r)},ws=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(t)&&!m_(t))return n;var s;if(kd(t)){var a=t.indexOf("%");s=r*parseFloat(t.slice(0,a))/100}else s=+t;return g_(s)&&(s=n),i&&s>r&&(s=r),s},th=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},eEe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},jc=function(t,r){return dt(t)&&dt(r)?function(n){return t+n*(r-t)}:function(){return r}};function uj(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):oa(n,t))===r})}function Vh(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function dj(e){"@babel/helpers - typeof";return dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dj(e)}var tEe=["viewBox","children"],rEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HV=["points","pathLength"],RS={svg:tEe,polygon:HV,polyline:HV},X$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],qb=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(E.isValidElement(t)&&(n=t.props),!om(n))return null;var i={};return Object.keys(n).forEach(function(s){X$.includes(s)&&(i[s]=r||function(a){return n[s](n,a)})}),i},nEe=function(t,r,n){return function(i){return t(r,n,i),null}},Qd=function(t,r,n){if(!om(t)||dj(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var a=t[s];X$.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=nEe(a,r,n))}),i},iEe=["children"],sEe=["children"];function KV(e,t){if(e==null)return{};var r=aEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qV={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Nl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},XV=null,LS=null,Y$=function e(t){if(t===XV&&Array.isArray(LS))return LS;var r=[];return E.Children.forEach(t,function(n){vr(n)||(xJ.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),LS=r,XV=t,r};function Oa(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Nl(i)}):n=[Nl(t)],Y$(e).forEach(function(i){var s=oa(i,"type.displayName")||oa(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function Qs(e,t){var r=Oa(e,t);return r&&r[0]}var YV=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!dt(n)||n<=0||!dt(i)||i<=0)},oEe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lEe=function(t){return t&&t.type&&m_(t.type)&&oEe.indexOf(t.type)>=0},cEe=function(t,r,n,i){var s,a=(s=RS==null?void 0:RS[i])!==null&&s!==void 0?s:[];return!lr(t)&&(i&&a.includes(r)||rEe.includes(r))||n&&X$.includes(r)},Qt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(E.isValidElement(t)&&(i=t.props),!om(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;cEe((o=i)===null||o===void 0?void 0:o[a],a,r,n)&&(s[a]=i[a])}),s},fj=function e(t,r){if(t===r)return!0;var n=E.Children.count(t);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return QV(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],a=r[i];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!QV(s,a))return!1}return!0},QV=function(t,r){if(vr(t)&&vr(r))return!0;if(!vr(t)&&!vr(r)){var n=t.props||{},i=n.children,s=KV(n,iEe),a=r.props||{},o=a.children,l=KV(a,sEe);return i&&o?Vh(s,l)&&fj(i,o):!i&&!o?Vh(s,l):!1}return!1},ZV=function(t,r){var n=[],i={};return Y$(t).forEach(function(s,a){if(lEe(s))n.push(s);else if(s){var o=Nl(s.type),l=r[o]||{},c=l.handler,d=l.once;if(c&&(!d||!i[o])){var u=c(s,o,a);n.push(u),i[o]=!0}}}),n},uEe=function(t){var r=t&&t.type;return r&&qV[r]?qV[r]:null},dEe=function(t,r){return Y$(r).indexOf(t)},fEe=["children","width","height","viewBox","className","style","title","desc"];function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hj.apply(this,arguments)}function hEe(e,t){if(e==null)return{};var r=pEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pj(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,a=e.style,o=e.title,l=e.desc,c=hEe(e,fEe),d=i||{width:r,height:n,x:0,y:0},u=dr("recharts-surface",s);return se.createElement("svg",hj({},Qt(c,!0,"svg"),{className:u,width:r,height:n,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),se.createElement("title",null,o),se.createElement("desc",null,l),t)}var mEe=["children","className"];function mj(){return mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mj.apply(this,arguments)}function gEe(e,t){if(e==null)return{};var r=yEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var zr=se.forwardRef(function(e,t){var r=e.children,n=e.className,i=gEe(e,mEe),s=dr("recharts-layer",n);return se.createElement("g",mj({className:s},Qt(i,!0),{ref:t}),r)}),Dl=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function vEe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}var _Ee=vEe,xEe=_Ee;function bEe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:xEe(e,t,r)}var wEe=bEe,TEe="\\ud800-\\udfff",MEe="\\u0300-\\u036f",kEe="\\ufe20-\\ufe2f",SEe="\\u20d0-\\u20ff",PEe=MEe+kEe+SEe,EEe="\\ufe0e\\ufe0f",CEe="\\u200d",jEe=RegExp("["+CEe+TEe+PEe+EEe+"]");function AEe(e){return jEe.test(e)}var wJ=AEe;function OEe(e){return e.split("")}var $Ee=OEe,TJ="\\ud800-\\udfff",IEe="\\u0300-\\u036f",NEe="\\ufe20-\\ufe2f",DEe="\\u20d0-\\u20ff",REe=IEe+NEe+DEe,LEe="\\ufe0e\\ufe0f",FEe="["+TJ+"]",gj="["+REe+"]",yj="\\ud83c[\\udffb-\\udfff]",BEe="(?:"+gj+"|"+yj+")",MJ="[^"+TJ+"]",kJ="(?:\\ud83c[\\udde6-\\uddff]){2}",SJ="[\\ud800-\\udbff][\\udc00-\\udfff]",zEe="\\u200d",PJ=BEe+"?",EJ="["+LEe+"]?",VEe="(?:"+zEe+"(?:"+[MJ,kJ,SJ].join("|")+")"+EJ+PJ+")*",UEe=EJ+PJ+VEe,WEe="(?:"+[MJ+gj+"?",gj,kJ,SJ,FEe].join("|")+")",GEe=RegExp(yj+"(?="+yj+")|"+WEe+UEe,"g");function HEe(e){return e.match(GEe)||[]}var KEe=HEe,qEe=$Ee,XEe=wJ,YEe=KEe;function QEe(e){return XEe(e)?YEe(e):qEe(e)}var ZEe=QEe,JEe=wEe,eCe=wJ,tCe=ZEe,rCe=mJ;function nCe(e){return function(t){t=rCe(t);var r=eCe(t)?tCe(t):void 0,n=r?r[0]:t.charAt(0),i=r?JEe(r,1).join(""):t.slice(1);return n[e]()+i}}var iCe=nCe,sCe=iCe,aCe=sCe("toUpperCase"),oCe=aCe;const pT=Ir(oCe);function nn(e){return function(){return e}}const CJ=Math.cos,Xb=Math.sin,Eo=Math.sqrt,Yb=Math.PI,mT=2*Yb,vj=Math.PI,_j=2*vj,dd=1e-6,lCe=_j-dd;function jJ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function cCe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jJ;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class uCe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jJ:cCe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,a){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=n-t,c=i-r,d=a-t,u=o-r,f=d*d+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>dd)if(!(Math.abs(u*l-c*d)>dd)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-a,m=i-o,g=l*l+c*c,x=p*p+m*m,v=Math.sqrt(g),y=Math.sqrt(f),w=s*Math.tan((vj-Math.acos((g+f-x)/(2*v*y)))/2),b=w/y,_=w/v;Math.abs(b-1)>dd&&this._append`L${t+b*d},${r+b*u}`,this._append`A${s},${s},0,0,${+(u*p>d*m)},${this._x1=t+_*l},${this._y1=r+_*c}`}}arc(t,r,n,i,s,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,d=r+l,u=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>dd||Math.abs(this._y1-d)>dd)&&this._append`L${c},${d}`,n&&(f<0&&(f=f%_j+_j),f>lCe?this._append`A${n},${n},0,1,${u},${t-o},${r-l}A${n},${n},0,1,${u},${this._x1=c},${this._y1=d}`:f>dd&&this._append`A${n},${n},0,${+(f>=vj)},${u},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Q$(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new uCe(t)}function Z$(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AJ(e){this._context=e}AJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gT(e){return new AJ(e)}function OJ(e){return e[0]}function $J(e){return e[1]}function IJ(e,t){var r=nn(!0),n=null,i=gT,s=null,a=Q$(o);e=typeof e=="function"?e:e===void 0?OJ:nn(e),t=typeof t=="function"?t:t===void 0?$J:nn(t);function o(l){var c,d=(l=Z$(l)).length,u,f=!1,p;for(n==null&&(s=i(p=a())),c=0;c<=d;++c)!(c<d&&r(u=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(u,c,l),+t(u,c,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:nn(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:nn(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:nn(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),o):n},o}function J0(e,t,r){var n=null,i=nn(!0),s=null,a=gT,o=null,l=Q$(c);e=typeof e=="function"?e:e===void 0?OJ:nn(+e),t=typeof t=="function"?t:nn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$J:nn(+r);function c(u){var f,p,m,g=(u=Z$(u)).length,x,v=!1,y,w=new Array(g),b=new Array(g);for(s==null&&(o=a(y=l())),f=0;f<=g;++f){if(!(f<g&&i(x=u[f],f,u))===v)if(v=!v)p=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=f-1;m>=p;--m)o.point(w[m],b[m]);o.lineEnd(),o.areaEnd()}v&&(w[f]=+e(x,f,u),b[f]=+t(x,f,u),o.point(n?+n(x,f,u):w[f],r?+r(x,f,u):b[f]))}if(y)return o=null,y+""||null}function d(){return IJ().defined(i).curve(a).context(s)}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:nn(+u),n=null,c):e},c.x0=function(u){return arguments.length?(e=typeof u=="function"?u:nn(+u),c):e},c.x1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:nn(+u),c):n},c.y=function(u){return arguments.length?(t=typeof u=="function"?u:nn(+u),r=null,c):t},c.y0=function(u){return arguments.length?(t=typeof u=="function"?u:nn(+u),c):t},c.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:nn(+u),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(u){return arguments.length?(i=typeof u=="function"?u:nn(!!u),c):i},c.curve=function(u){return arguments.length?(a=u,s!=null&&(o=a(s)),c):a},c.context=function(u){return arguments.length?(u==null?s=o=null:o=a(s=u),c):s},c}class NJ{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function dCe(e){return new NJ(e,!0)}function fCe(e){return new NJ(e,!1)}const J$={draw(e,t){const r=Eo(t/Yb);e.moveTo(r,0),e.arc(0,0,r,0,mT)}},hCe={draw(e,t){const r=Eo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},DJ=Eo(1/3),pCe=DJ*2,mCe={draw(e,t){const r=Eo(t/pCe),n=r*DJ;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},gCe={draw(e,t){const r=Eo(t),n=-r/2;e.rect(n,n,r,r)}},yCe=.8908130915292852,RJ=Xb(Yb/10)/Xb(7*Yb/10),vCe=Xb(mT/10)*RJ,_Ce=-CJ(mT/10)*RJ,xCe={draw(e,t){const r=Eo(t*yCe),n=vCe*r,i=_Ce*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const a=mT*s/5,o=CJ(a),l=Xb(a);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},FS=Eo(3),bCe={draw(e,t){const r=-Eo(t/(FS*3));e.moveTo(0,r*2),e.lineTo(-FS*r,-r),e.lineTo(FS*r,-r),e.closePath()}},ya=-.5,va=Eo(3)/2,xj=1/Eo(12),wCe=(xj/2+1)*3,TCe={draw(e,t){const r=Eo(t/wCe),n=r/2,i=r*xj,s=n,a=r*xj+r,o=-s,l=a;e.moveTo(n,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(ya*n-va*i,va*n+ya*i),e.lineTo(ya*s-va*a,va*s+ya*a),e.lineTo(ya*o-va*l,va*o+ya*l),e.lineTo(ya*n+va*i,ya*i-va*n),e.lineTo(ya*s+va*a,ya*a-va*s),e.lineTo(ya*o+va*l,ya*l-va*o),e.closePath()}};function MCe(e,t){let r=null,n=Q$(i);e=typeof e=="function"?e:nn(e||J$),t=typeof t=="function"?t:nn(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:nn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:nn(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Qb(){}function Zb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function LJ(e){this._context=e}LJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kCe(e){return new LJ(e)}function FJ(e){this._context=e}FJ.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SCe(e){return new FJ(e)}function BJ(e){this._context=e}BJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Zb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PCe(e){return new BJ(e)}function zJ(e){this._context=e}zJ.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ECe(e){return new zJ(e)}function JV(e){return e<0?-1:1}function eU(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(JV(s)+JV(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function tU(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function BS(e,t,r){var n=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,i+o*t,s-o,a-o*r,s,a)}function Jb(e){this._context=e}Jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BS(this,this._t0,tU(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BS(this,tU(this,r=eU(this,e,t)),r);break;default:BS(this,this._t0,r=eU(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function VJ(e){this._context=new UJ(e)}(VJ.prototype=Object.create(Jb.prototype)).point=function(e,t){Jb.prototype.point.call(this,t,e)};function UJ(e){this._context=e}UJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function CCe(e){return new Jb(e)}function jCe(e){return new VJ(e)}function WJ(e){this._context=e}WJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=rU(e),i=rU(t),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rU(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function ACe(e){return new WJ(e)}function yT(e,t){this._context=e,this._t=t}yT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function OCe(e){return new yT(e,.5)}function $Ce(e){return new yT(e,0)}function ICe(e){return new yT(e,1)}function gp(e,t){if((a=e.length)>1)for(var r=1,n,i,s=e[t[0]],a,o=s.length;r<a;++r)for(i=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function bj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function NCe(e,t){return e[t]}function DCe(e){const t=[];return t.key=e,t}function RCe(){var e=nn([]),t=bj,r=gp,n=NCe;function i(s){var a=Array.from(e.apply(this,arguments),DCe),o,l=a.length,c=-1,d;for(const u of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+n(u,a[o].key,c,s)]).data=u;for(o=0,d=Z$(t(a));o<l;++o)a[d[o]].index=o;return r(a,d),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:nn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:nn(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?bj:typeof s=="function"?s:nn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??gp,i):r},i}function LCe(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}gp(e,t)}}function FCe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var a=0,o=0;a<i;++a)o+=e[a][r][1]||0;n[r][1]+=n[r][0]=-o/2}gp(e,t)}}function BCe(e,t){if(!(!((a=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[n][1]||0,f=d[n-1][1]||0,p=(u-f)/2,m=0;m<o;++m){var g=e[t[m]],x=g[n][1]||0,v=g[n-1][1]||0;p+=x-v}l+=u,c+=p*u}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,gp(e,t)}}function Yy(e){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(e)}var zCe=["type","size","sizeType"];function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wj.apply(this,arguments)}function nU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(r),!0).forEach(function(n){VCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VCe(e,t,r){return t=UCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UCe(e){var t=WCe(e,"string");return Yy(t)=="symbol"?t:t+""}function WCe(e,t){if(Yy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GCe(e,t){if(e==null)return{};var r=HCe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var GJ={symbolCircle:J$,symbolCross:hCe,symbolDiamond:mCe,symbolSquare:gCe,symbolStar:xCe,symbolTriangle:bCe,symbolWye:TCe},KCe=Math.PI/180,qCe=function(t){var r="symbol".concat(pT(t));return GJ[r]||J$},XCe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*KCe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},YCe=function(t,r){GJ["symbol".concat(pT(t))]=r},eI=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,a=t.sizeType,o=a===void 0?"area":a,l=GCe(t,zCe),c=iU(iU({},l),{},{type:n,size:s,sizeType:o}),d=function(){var x=qCe(n),v=MCe().type(x).size(XCe(s,o,n));return v()},u=c.className,f=c.cx,p=c.cy,m=Qt(c,!0);return f===+f&&p===+p&&s===+s?se.createElement("path",wj({},m,{className:dr("recharts-symbols",u),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};eI.registerSymbol=YCe;function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tj.apply(this,arguments)}function sU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(r),!0).forEach(function(n){Qy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KJ(n.key),n)}}function eje(e,t,r){return t&&JCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tje(e,t,r){return t=ew(t),rje(e,HJ()?Reflect.construct(t,r||[],ew(e).constructor):t.apply(e,r))}function rje(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nje(e)}function nje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HJ=function(){return!!e})()}function ew(e){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ew(e)}function ije(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mj(e,t)}function Mj(e,t){return Mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mj(e,t)}function Qy(e,t,r){return t=KJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KJ(e){var t=sje(e,"string");return yp(t)=="symbol"?t:t+""}function sje(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _a=32,tI=function(e){function t(){return ZCe(this,t),tje(this,t,arguments)}return ije(t,e),eje(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=_a/2,a=_a/6,o=_a/3,l=n.inactive?i:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:_a,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(_a,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_a/8,"h").concat(_a,"v").concat(_a*3/4,"h").concat(-_a,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var c=QCe({},n);return delete c.legendIcon,se.cloneElement(n.legendIcon,c)}return se.createElement(eI,{fill:l,cx:s,cy:s,size:_a,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,d={x:0,y:0,width:_a,height:_a},u={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,m){var g=p.formatter||l,x=dr(Qy(Qy({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=lr(p.value)?null:p.value;Dl(!lr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=p.inactive?c:p.color;return se.createElement("li",Tj({className:x,style:u,key:"legend-item-".concat(m)},Qd(n.props,p,m)),se.createElement(pj,{width:a,height:a,viewBox:d,style:f},n.renderIcon(p)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(v,p,m):v))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,a=n.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(E.PureComponent);Qy(tI,"displayName","Legend");Qy(tI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var aje=tT;function oje(){this.__data__=new aje,this.size=0}var lje=oje;function cje(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var uje=cje;function dje(e){return this.__data__.get(e)}var fje=dje;function hje(e){return this.__data__.has(e)}var pje=hje,mje=tT,gje=V$,yje=U$,vje=200;function _je(e,t){var r=this.__data__;if(r instanceof mje){var n=r.__data__;if(!gje||n.length<vje-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new yje(n)}return r.set(e,t),this.size=r.size,this}var xje=_je,bje=tT,wje=lje,Tje=uje,Mje=fje,kje=pje,Sje=xje;function dm(e){var t=this.__data__=new bje(e);this.size=t.size}dm.prototype.clear=wje;dm.prototype.delete=Tje;dm.prototype.get=Mje;dm.prototype.has=kje;dm.prototype.set=Sje;var qJ=dm,Pje="__lodash_hash_undefined__";function Eje(e){return this.__data__.set(e,Pje),this}var Cje=Eje;function jje(e){return this.__data__.has(e)}var Aje=jje,Oje=U$,$je=Cje,Ije=Aje;function tw(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Oje;++t<r;)this.add(e[t])}tw.prototype.add=tw.prototype.push=$je;tw.prototype.has=Ije;var XJ=tw;function Nje(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var YJ=Nje;function Dje(e,t){return e.has(t)}var QJ=Dje,Rje=XJ,Lje=YJ,Fje=QJ,Bje=1,zje=2;function Vje(e,t,r,n,i,s){var a=r&Bje,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,f=!0,p=r&zje?new Rje:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var m=e[u],g=t[u];if(n)var x=a?n(g,m,u,t,e,s):n(m,g,u,e,t,s);if(x!==void 0){if(x)continue;f=!1;break}if(p){if(!Lje(t,function(v,y){if(!Fje(p,y)&&(m===v||i(m,v,r,n,s)))return p.push(y)})){f=!1;break}}else if(!(m===g||i(m,g,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}var ZJ=Vje,Uje=ol,Wje=Uje.Uint8Array,Gje=Wje;function Hje(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Kje=Hje;function qje(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var rI=qje,aU=p_,oU=Gje,Xje=z$,Yje=ZJ,Qje=Kje,Zje=rI,Jje=1,e2e=2,t2e="[object Boolean]",r2e="[object Date]",n2e="[object Error]",i2e="[object Map]",s2e="[object Number]",a2e="[object RegExp]",o2e="[object Set]",l2e="[object String]",c2e="[object Symbol]",u2e="[object ArrayBuffer]",d2e="[object DataView]",lU=aU?aU.prototype:void 0,zS=lU?lU.valueOf:void 0;function f2e(e,t,r,n,i,s,a){switch(r){case d2e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case u2e:return!(e.byteLength!=t.byteLength||!s(new oU(e),new oU(t)));case t2e:case r2e:case s2e:return Xje(+e,+t);case n2e:return e.name==t.name&&e.message==t.message;case a2e:case l2e:return e==t+"";case i2e:var o=Qje;case o2e:var l=n&Jje;if(o||(o=Zje),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=e2e,a.set(e,t);var d=Yje(o(e),o(t),n,i,s,a);return a.delete(e),d;case c2e:if(zS)return zS.call(e)==zS.call(t)}return!1}var h2e=f2e;function p2e(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var JJ=p2e,m2e=JJ,g2e=Us;function y2e(e,t,r){var n=t(e);return g2e(e)?n:m2e(n,r(e))}var v2e=y2e;function _2e(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var a=e[r];t(a,r,e)&&(s[i++]=a)}return s}var x2e=_2e;function b2e(){return[]}var w2e=b2e,T2e=x2e,M2e=w2e,k2e=Object.prototype,S2e=k2e.propertyIsEnumerable,cU=Object.getOwnPropertySymbols,P2e=cU?function(e){return e==null?[]:(e=Object(e),T2e(cU(e),function(t){return S2e.call(e,t)}))}:M2e,E2e=P2e;function C2e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var j2e=C2e,A2e=tc,O2e=rc,$2e="[object Arguments]";function I2e(e){return O2e(e)&&A2e(e)==$2e}var N2e=I2e,uU=N2e,D2e=rc,eee=Object.prototype,R2e=eee.hasOwnProperty,L2e=eee.propertyIsEnumerable,F2e=uU(function(){return arguments}())?uU:function(e){return D2e(e)&&R2e.call(e,"callee")&&!L2e.call(e,"callee")},nI=F2e,rw={exports:{}};function B2e(){return!1}var z2e=B2e;rw.exports;(function(e,t){var r=ol,n=z2e,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;e.exports=c})(rw,rw.exports);var tee=rw.exports,V2e=9007199254740991,U2e=/^(?:0|[1-9]\d*)$/;function W2e(e,t){var r=typeof e;return t=t??V2e,!!t&&(r=="number"||r!="symbol"&&U2e.test(e))&&e>-1&&e%1==0&&e<t}var iI=W2e,G2e=9007199254740991;function H2e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=G2e}var sI=H2e,K2e=tc,q2e=sI,X2e=rc,Y2e="[object Arguments]",Q2e="[object Array]",Z2e="[object Boolean]",J2e="[object Date]",eAe="[object Error]",tAe="[object Function]",rAe="[object Map]",nAe="[object Number]",iAe="[object Object]",sAe="[object RegExp]",aAe="[object Set]",oAe="[object String]",lAe="[object WeakMap]",cAe="[object ArrayBuffer]",uAe="[object DataView]",dAe="[object Float32Array]",fAe="[object Float64Array]",hAe="[object Int8Array]",pAe="[object Int16Array]",mAe="[object Int32Array]",gAe="[object Uint8Array]",yAe="[object Uint8ClampedArray]",vAe="[object Uint16Array]",_Ae="[object Uint32Array]",pn={};pn[dAe]=pn[fAe]=pn[hAe]=pn[pAe]=pn[mAe]=pn[gAe]=pn[yAe]=pn[vAe]=pn[_Ae]=!0;pn[Y2e]=pn[Q2e]=pn[cAe]=pn[Z2e]=pn[uAe]=pn[J2e]=pn[eAe]=pn[tAe]=pn[rAe]=pn[nAe]=pn[iAe]=pn[sAe]=pn[aAe]=pn[oAe]=pn[lAe]=!1;function xAe(e){return X2e(e)&&q2e(e.length)&&!!pn[K2e(e)]}var bAe=xAe;function wAe(e){return function(t){return e(t)}}var ree=wAe,nw={exports:{}};nw.exports;(function(e,t){var r=cJ,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(nw,nw.exports);var TAe=nw.exports,MAe=bAe,kAe=ree,dU=TAe,fU=dU&&dU.isTypedArray,SAe=fU?kAe(fU):MAe,nee=SAe,PAe=j2e,EAe=nI,CAe=Us,jAe=tee,AAe=iI,OAe=nee,$Ae=Object.prototype,IAe=$Ae.hasOwnProperty;function NAe(e,t){var r=CAe(e),n=!r&&EAe(e),i=!r&&!n&&jAe(e),s=!r&&!n&&!i&&OAe(e),a=r||n||i||s,o=a?PAe(e.length,String):[],l=o.length;for(var c in e)(t||IAe.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||AAe(c,l)))&&o.push(c);return o}var DAe=NAe,RAe=Object.prototype;function LAe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||RAe;return e===r}var FAe=LAe;function BAe(e,t){return function(r){return e(t(r))}}var iee=BAe,zAe=iee,VAe=zAe(Object.keys,Object),UAe=VAe,WAe=FAe,GAe=UAe,HAe=Object.prototype,KAe=HAe.hasOwnProperty;function qAe(e){if(!WAe(e))return GAe(e);var t=[];for(var r in Object(e))KAe.call(e,r)&&r!="constructor"&&t.push(r);return t}var XAe=qAe,YAe=B$,QAe=sI;function ZAe(e){return e!=null&&QAe(e.length)&&!YAe(e)}var vT=ZAe,JAe=DAe,eOe=XAe,tOe=vT;function rOe(e){return tOe(e)?JAe(e):eOe(e)}var aI=rOe,nOe=v2e,iOe=E2e,sOe=aI;function aOe(e){return nOe(e,sOe,iOe)}var oOe=aOe,hU=oOe,lOe=1,cOe=Object.prototype,uOe=cOe.hasOwnProperty;function dOe(e,t,r,n,i,s){var a=r&lOe,o=hU(e),l=o.length,c=hU(t),d=c.length;if(l!=d&&!a)return!1;for(var u=l;u--;){var f=o[u];if(!(a?f in t:uOe.call(t,f)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var g=!0;s.set(e,t),s.set(t,e);for(var x=a;++u<l;){f=o[u];var v=e[f],y=t[f];if(n)var w=a?n(y,v,f,t,e,s):n(v,y,f,e,t,s);if(!(w===void 0?v===y||i(v,y,r,n,s):w)){g=!1;break}x||(x=f=="constructor")}if(g&&!x){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return s.delete(e),s.delete(t),g}var fOe=dOe,hOe=mf,pOe=ol,mOe=hOe(pOe,"DataView"),gOe=mOe,yOe=mf,vOe=ol,_Oe=yOe(vOe,"Promise"),xOe=_Oe,bOe=mf,wOe=ol,TOe=bOe(wOe,"Set"),see=TOe,MOe=mf,kOe=ol,SOe=MOe(kOe,"WeakMap"),POe=SOe,kj=gOe,Sj=V$,Pj=xOe,Ej=see,Cj=POe,aee=tc,fm=dJ,pU="[object Map]",EOe="[object Object]",mU="[object Promise]",gU="[object Set]",yU="[object WeakMap]",vU="[object DataView]",COe=fm(kj),jOe=fm(Sj),AOe=fm(Pj),OOe=fm(Ej),$Oe=fm(Cj),fd=aee;(kj&&fd(new kj(new ArrayBuffer(1)))!=vU||Sj&&fd(new Sj)!=pU||Pj&&fd(Pj.resolve())!=mU||Ej&&fd(new Ej)!=gU||Cj&&fd(new Cj)!=yU)&&(fd=function(e){var t=aee(e),r=t==EOe?e.constructor:void 0,n=r?fm(r):"";if(n)switch(n){case COe:return vU;case jOe:return pU;case AOe:return mU;case OOe:return gU;case $Oe:return yU}return t});var IOe=fd,VS=qJ,NOe=ZJ,DOe=h2e,ROe=fOe,_U=IOe,xU=Us,bU=tee,LOe=nee,FOe=1,wU="[object Arguments]",TU="[object Array]",ex="[object Object]",BOe=Object.prototype,MU=BOe.hasOwnProperty;function zOe(e,t,r,n,i,s){var a=xU(e),o=xU(t),l=a?TU:_U(e),c=o?TU:_U(t);l=l==wU?ex:l,c=c==wU?ex:c;var d=l==ex,u=c==ex,f=l==c;if(f&&bU(e)){if(!bU(t))return!1;a=!0,d=!1}if(f&&!d)return s||(s=new VS),a||LOe(e)?NOe(e,t,r,n,i,s):DOe(e,t,l,r,n,i,s);if(!(r&FOe)){var p=d&&MU.call(e,"__wrapped__"),m=u&&MU.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,x=m?t.value():t;return s||(s=new VS),i(g,x,r,n,s)}}return f?(s||(s=new VS),ROe(e,t,r,n,i,s)):!1}var VOe=zOe,UOe=VOe,kU=rc;function oee(e,t,r,n,i){return e===t?!0:e==null||t==null||!kU(e)&&!kU(t)?e!==e&&t!==t:UOe(e,t,r,n,oee,i)}var oI=oee,WOe=qJ,GOe=oI,HOe=1,KOe=2;function qOe(e,t,r,n){var i=r.length,s=i,a=!n;if(e==null)return!s;for(e=Object(e);i--;){var o=r[i];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){o=r[i];var l=o[0],c=e[l],d=o[1];if(a&&o[2]){if(c===void 0&&!(l in e))return!1}else{var u=new WOe;if(n)var f=n(c,d,l,e,t,u);if(!(f===void 0?GOe(d,c,HOe|KOe,n,u):f))return!1}}return!0}var XOe=qOe,YOe=Su;function QOe(e){return e===e&&!YOe(e)}var lee=QOe,ZOe=lee,JOe=aI;function e$e(e){for(var t=JOe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ZOe(i)]}return t}var t$e=e$e;function r$e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var cee=r$e,n$e=XOe,i$e=t$e,s$e=cee;function a$e(e){var t=i$e(e);return t.length==1&&t[0][2]?s$e(t[0][0],t[0][1]):function(r){return r===e||n$e(r,e,t)}}var o$e=a$e;function l$e(e,t){return e!=null&&t in Object(e)}var c$e=l$e,u$e=gJ,d$e=nI,f$e=Us,h$e=iI,p$e=sI,m$e=nT;function g$e(e,t,r){t=u$e(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var a=m$e(t[n]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&p$e(i)&&h$e(a,i)&&(f$e(e)||d$e(e)))}var y$e=g$e,v$e=c$e,_$e=y$e;function x$e(e,t){return e!=null&&_$e(e,t,v$e)}var b$e=x$e,w$e=oI,T$e=yJ,M$e=b$e,k$e=F$,S$e=lee,P$e=cee,E$e=nT,C$e=1,j$e=2;function A$e(e,t){return k$e(e)&&S$e(t)?P$e(E$e(e),t):function(r){var n=T$e(r,e);return n===void 0&&n===t?M$e(r,e):w$e(t,n,C$e|j$e)}}var O$e=A$e;function $$e(e){return e}var hm=$$e;function I$e(e){return function(t){return t==null?void 0:t[e]}}var N$e=I$e,D$e=H$;function R$e(e){return function(t){return D$e(t,e)}}var L$e=R$e,F$e=N$e,B$e=L$e,z$e=F$,V$e=nT;function U$e(e){return z$e(e)?F$e(V$e(e)):B$e(e)}var W$e=U$e,G$e=o$e,H$e=O$e,K$e=hm,q$e=Us,X$e=W$e;function Y$e(e){return typeof e=="function"?e:e==null?K$e:typeof e=="object"?q$e(e)?H$e(e[0],e[1]):G$e(e):X$e(e)}var Pu=Y$e;function Q$e(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var Z$e=Q$e;function J$e(e){return e!==e}var eIe=J$e;function tIe(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var rIe=tIe,nIe=Z$e,iIe=eIe,sIe=rIe;function aIe(e,t,r){return t===t?sIe(e,t,r):nIe(e,iIe,r)}var oIe=aIe,lIe=oIe;function cIe(e,t){var r=e==null?0:e.length;return!!r&&lIe(e,t,0)>-1}var uIe=cIe;function dIe(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var fIe=dIe;function hIe(){}var pIe=hIe,US=see,mIe=pIe,gIe=rI,yIe=1/0,vIe=US&&1/gIe(new US([,-0]))[1]==yIe?function(e){return new US(e)}:mIe,_Ie=vIe,xIe=XJ,bIe=uIe,wIe=fIe,TIe=QJ,MIe=_Ie,kIe=rI,SIe=200;function PIe(e,t,r){var n=-1,i=bIe,s=e.length,a=!0,o=[],l=o;if(r)a=!1,i=wIe;else if(s>=SIe){var c=t?null:MIe(e);if(c)return kIe(c);a=!1,i=TIe,l=new xIe}else l=t?[]:o;e:for(;++n<s;){var d=e[n],u=t?t(d):d;if(d=r||d!==0?d:0,a&&u===u){for(var f=l.length;f--;)if(l[f]===u)continue e;t&&l.push(u),o.push(d)}else i(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o}var EIe=PIe,CIe=Pu,jIe=EIe;function AIe(e,t){return e&&e.length?jIe(e,CIe(t)):[]}var OIe=AIe;const SU=Ir(OIe);function uee(e,t,r){return t===!0?SU(e,r):lr(t)?SU(e,t):e}function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}var $Ie=["ref"];function PU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PU(Object(r),!0).forEach(function(n){_T(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fee(n.key),n)}}function NIe(e,t,r){return t&&EU(e.prototype,t),r&&EU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DIe(e,t,r){return t=iw(t),RIe(e,dee()?Reflect.construct(t,r||[],iw(e).constructor):t.apply(e,r))}function RIe(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LIe(e)}function LIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dee=function(){return!!e})()}function iw(e){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iw(e)}function FIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jj(e,t)}function jj(e,t){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jj(e,t)}function _T(e,t,r){return t=fee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fee(e){var t=BIe(e,"string");return vp(t)=="symbol"?t:t+""}function BIe(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zIe(e,t){if(e==null)return{};var r=VIe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UIe(e){return e.value}function WIe(e,t){if(se.isValidElement(e))return se.cloneElement(e,t);if(typeof e=="function")return se.createElement(e,t);t.ref;var r=zIe(t,$Ie);return se.createElement(tI,r)}var CU=1,Uh=function(e){function t(){var r;IIe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=DIe(this,t,[].concat(i)),_T(r,"lastBoundingBox",{width:-1,height:-1}),r}return FIe(t,e),NIe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>CU||Math.abs(i.height-this.lastBoundingBox.height)>CU)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?hl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,d=i.chartHeight,u,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();u={left:((c||0)-p.width)/2}}else u=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();f={top:((d||0)-m.height)/2}}else f=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return hl(hl({},u),f)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,d=i.payload,u=hl(hl({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return se.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(p){n.wrapperNode=p}},WIe(s,hl(hl({},this.props),{},{payload:uee(d,c,UIe)})))}}],[{key:"getWithHeight",value:function(n,i){var s=hl(hl({},this.defaultProps),n.props),a=s.layout;return a==="vertical"&&dt(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(E.PureComponent);_T(Uh,"displayName","Legend");_T(Uh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var jU=p_,GIe=nI,HIe=Us,AU=jU?jU.isConcatSpreadable:void 0;function KIe(e){return HIe(e)||GIe(e)||!!(AU&&e&&e[AU])}var qIe=KIe,XIe=JJ,YIe=qIe;function hee(e,t,r,n,i){var s=-1,a=e.length;for(r||(r=YIe),i||(i=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?hee(o,t-1,r,n,i):XIe(i,o):n||(i[i.length]=o)}return i}var pee=hee;function QIe(e){return function(t,r,n){for(var i=-1,s=Object(t),a=n(t),o=a.length;o--;){var l=a[e?o:++i];if(r(s[l],l,s)===!1)break}return t}}var ZIe=QIe,JIe=ZIe,eNe=JIe(),tNe=eNe,rNe=tNe,nNe=aI;function iNe(e,t){return e&&rNe(e,t,nNe)}var mee=iNe,sNe=vT;function aNe(e,t){return function(r,n){if(r==null)return r;if(!sNe(r))return e(r,n);for(var i=r.length,s=t?i:-1,a=Object(r);(t?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var oNe=aNe,lNe=mee,cNe=oNe,uNe=cNe(lNe),lI=uNe,dNe=lI,fNe=vT;function hNe(e,t){var r=-1,n=fNe(e)?Array(e.length):[];return dNe(e,function(i,s,a){n[++r]=t(i,s,a)}),n}var gee=hNe;function pNe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var mNe=pNe,OU=am;function gNe(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,s=OU(e),a=t!==void 0,o=t===null,l=t===t,c=OU(t);if(!o&&!c&&!s&&e>t||s&&a&&l&&!o&&!c||n&&a&&l||!r&&l||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||o&&r&&i||!a&&i||!l)return-1}return 0}var yNe=gNe,vNe=yNe;function _Ne(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,a=i.length,o=r.length;++n<a;){var l=vNe(i[n],s[n]);if(l){if(n>=o)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return e.index-t.index}var xNe=_Ne,WS=G$,bNe=H$,wNe=Pu,TNe=gee,MNe=mNe,kNe=ree,SNe=xNe,PNe=hm,ENe=Us;function CNe(e,t,r){t.length?t=WS(t,function(s){return ENe(s)?function(a){return bNe(a,s.length===1?s[0]:s)}:s}):t=[PNe];var n=-1;t=WS(t,kNe(wNe));var i=TNe(e,function(s,a,o){var l=WS(t,function(c){return c(s)});return{criteria:l,index:++n,value:s}});return MNe(i,function(s,a){return SNe(s,a,r)})}var jNe=CNe;function ANe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ONe=ANe,$Ne=ONe,$U=Math.max;function INe(e,t,r){return t=$U(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=$U(n.length-t,0),a=Array(s);++i<s;)a[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(a),$Ne(e,this,o)}}var NNe=INe;function DNe(e){return function(){return e}}var RNe=DNe,LNe=mf,FNe=function(){try{var e=LNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yee=FNe,BNe=RNe,IU=yee,zNe=hm,VNe=IU?function(e,t){return IU(e,"toString",{configurable:!0,enumerable:!1,value:BNe(t),writable:!0})}:zNe,UNe=VNe,WNe=800,GNe=16,HNe=Date.now;function KNe(e){var t=0,r=0;return function(){var n=HNe(),i=GNe-(n-r);if(r=n,i>0){if(++t>=WNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qNe=KNe,XNe=UNe,YNe=qNe,QNe=YNe(XNe),ZNe=QNe,JNe=hm,eDe=NNe,tDe=ZNe;function rDe(e,t){return tDe(eDe(e,t,JNe),e+"")}var nDe=rDe,iDe=z$,sDe=vT,aDe=iI,oDe=Su;function lDe(e,t,r){if(!oDe(r))return!1;var n=typeof t;return(n=="number"?sDe(r)&&aDe(t,r.length):n=="string"&&t in r)?iDe(r[t],e):!1}var xT=lDe,cDe=pee,uDe=jNe,dDe=nDe,NU=xT,fDe=dDe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&NU(e,t[0],t[1])?t=[]:r>2&&NU(t[0],t[1],t[2])&&(t=[t[0]]),uDe(e,cDe(t,1),[])}),hDe=fDe;const cI=Ir(hDe);function Zy(e){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(e)}function Aj(){return Aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aj.apply(this,arguments)}function pDe(e,t){return vDe(e)||yDe(e,t)||gDe(e,t)||mDe()}function mDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gDe(e,t){if(e){if(typeof e=="string")return DU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DU(e,t)}}function DU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function vDe(e){if(Array.isArray(e))return e}function RU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function GS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(r),!0).forEach(function(n){_De(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _De(e,t,r){return t=xDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xDe(e){var t=bDe(e,"string");return Zy(t)=="symbol"?t:t+""}function bDe(e,t){if(Zy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wDe(e){return Array.isArray(e)&&xi(e[0])&&xi(e[1])?e.join(" ~ "):e}var TDe=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,a=t.itemStyle,o=a===void 0?{}:a,l=t.labelStyle,c=l===void 0?{}:l,d=t.payload,u=t.formatter,f=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,g=t.label,x=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(d&&d.length){var I={padding:0,margin:0},$=(f?cI(d,f):d).map(function(F,V){if(F.type==="none")return null;var G=GS({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},o),H=F.formatter||u||wDe,B=F.value,te=F.name,ae=B,z=te;if(H&&ae!=null&&z!=null){var D=H(B,te,F,V,d);if(Array.isArray(D)){var K=pDe(D,2);ae=K[0],z=K[1]}else ae=D}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:G},xi(z)?se.createElement("span",{className:"recharts-tooltip-item-name"},z):null,xi(z)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},ae),se.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:I},$)}return null},b=GS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),_=GS({margin:0},c),T=!vr(g),M=T?g:"",k=dr("recharts-default-tooltip",p),j=dr("recharts-tooltip-label",m);T&&x&&d!==void 0&&d!==null&&(M=x(g,d));var A=y?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",Aj({className:k,style:b},A),se.createElement("p",{className:j,style:_},se.isValidElement(M)?M:"".concat(M)),w())};function Jy(e){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jy(e)}function tx(e,t,r){return t=MDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MDe(e){var t=kDe(e,"string");return Jy(t)=="symbol"?t:t+""}function kDe(e,t){if(Jy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lg="recharts-tooltip-wrapper",SDe={visibility:"hidden"};function PDe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return dr(lg,tx(tx(tx(tx({},"".concat(lg,"-right"),dt(r)&&t&&dt(t.x)&&r>=t.x),"".concat(lg,"-left"),dt(r)&&t&&dt(t.x)&&r<t.x),"".concat(lg,"-bottom"),dt(n)&&t&&dt(t.y)&&n>=t.y),"".concat(lg,"-top"),dt(n)&&t&&dt(t.y)&&n<t.y))}function LU(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&dt(s[n]))return s[n];var d=r[n]-o-i,u=r[n]+i;if(t[n])return a[n]?d:u;if(a[n]){var f=d,p=l[n];return f<p?Math.max(u,l[n]):Math.max(d,l[n])}var m=u+o,g=l[n]+c;return m>g?Math.max(d,l[n]):Math.max(u,l[n])}function EDe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function CDe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,s=e.reverseDirection,a=e.tooltipBox,o=e.useTranslate3d,l=e.viewBox,c,d,u;return a.height>0&&a.width>0&&r?(d=LU({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),u=LU({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=EDe({translateX:d,translateY:u,useTranslate3d:o})):c=SDe,{cssProperties:c,cssClasses:PDe({translateX:d,translateY:u,coordinate:r})}}function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function FU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(r),!0).forEach(function(n){$j(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ADe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_ee(n.key),n)}}function ODe(e,t,r){return t&&ADe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $De(e,t,r){return t=sw(t),IDe(e,vee()?Reflect.construct(t,r||[],sw(e).constructor):t.apply(e,r))}function IDe(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NDe(e)}function NDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vee=function(){return!!e})()}function sw(e){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sw(e)}function DDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t)}function Oj(e,t){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Oj(e,t)}function $j(e,t,r){return t=_ee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ee(e){var t=RDe(e,"string");return _p(t)=="symbol"?t:t+""}function RDe(e,t){if(_p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zU=1,LDe=function(e){function t(){var r;jDe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=$De(this,t,[].concat(i)),$j(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),$j(r,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&c!==void 0?c:0}})}}),r}return DDe(t,e),ODe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>zU||Math.abs(n.height-this.state.lastBoundingBox.height)>zU)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,d=i.coordinate,u=i.hasPayload,f=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,x=i.useTranslate3d,v=i.viewBox,y=i.wrapperStyle,w=CDe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),b=w.cssClasses,_=w.cssProperties,T=BU(BU({transition:f&&s?"transform ".concat(o,"ms ").concat(l):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&u?"visible":"hidden",position:"absolute",top:0,left:0},y);return se.createElement("div",{tabIndex:-1,className:b,style:T,ref:function(k){n.wrapperNode=k}},c)}}])}(E.PureComponent),FDe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Rl={isSsr:FDe(),get:function(t){return Rl[t]},set:function(t,r){if(typeof t=="string")Rl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(i){Rl[i]=t[i]})}}};function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function VU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(r),!0).forEach(function(n){uI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zDe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bee(n.key),n)}}function VDe(e,t,r){return t&&zDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UDe(e,t,r){return t=aw(t),WDe(e,xee()?Reflect.construct(t,r||[],aw(e).constructor):t.apply(e,r))}function WDe(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GDe(e)}function GDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xee=function(){return!!e})()}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aw(e)}function HDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}function Ij(e,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ij(e,t)}function uI(e,t,r){return t=bee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bee(e){var t=KDe(e,"string");return xp(t)=="symbol"?t:t+""}function KDe(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qDe(e){return e.dataKey}function XDe(e,t){return se.isValidElement(e)?se.cloneElement(e,t):typeof e=="function"?se.createElement(e,t):se.createElement(TDe,t)}var Tl=function(e){function t(){return BDe(this,t),UDe(this,t,arguments)}return HDe(t,e),VDe(t,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,d=i.coordinate,u=i.filterNull,f=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,x=i.position,v=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,b=i.wrapperStyle,_=m??[];u&&_.length&&(_=uee(m.filter(function(M){return M.value!=null&&(M.hide!==!0||n.props.includeHidden)}),g,qDe));var T=_.length>0;return se.createElement(LDe,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:f,active:s,coordinate:d,hasPayload:T,offset:p,position:x,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:b},XDe(c,UU(UU({},this.props),{},{payload:_})))}}])}(E.PureComponent);uI(Tl,"displayName","Tooltip");uI(Tl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Rl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var YDe=ol,QDe=function(){return YDe.Date.now()},ZDe=QDe,JDe=/\s/;function eRe(e){for(var t=e.length;t--&&JDe.test(e.charAt(t)););return t}var tRe=eRe,rRe=tRe,nRe=/^\s+/;function iRe(e){return e&&e.slice(0,rRe(e)+1).replace(nRe,"")}var sRe=iRe,aRe=sRe,WU=Su,oRe=am,GU=NaN,lRe=/^[-+]0x[0-9a-f]+$/i,cRe=/^0b[01]+$/i,uRe=/^0o[0-7]+$/i,dRe=parseInt;function fRe(e){if(typeof e=="number")return e;if(oRe(e))return GU;if(WU(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=WU(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=aRe(e);var r=cRe.test(e);return r||uRe.test(e)?dRe(e.slice(2),r?2:8):lRe.test(e)?GU:+e}var wee=fRe,hRe=Su,HS=ZDe,HU=wee,pRe="Expected a function",mRe=Math.max,gRe=Math.min;function yRe(e,t,r){var n,i,s,a,o,l,c=0,d=!1,u=!1,f=!0;if(typeof e!="function")throw new TypeError(pRe);t=HU(t)||0,hRe(r)&&(d=!!r.leading,u="maxWait"in r,s=u?mRe(HU(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f);function p(T){var M=n,k=i;return n=i=void 0,c=T,a=e.apply(k,M),a}function m(T){return c=T,o=setTimeout(v,t),d?p(T):a}function g(T){var M=T-l,k=T-c,j=t-M;return u?gRe(j,s-k):j}function x(T){var M=T-l,k=T-c;return l===void 0||M>=t||M<0||u&&k>=s}function v(){var T=HS();if(x(T))return y(T);o=setTimeout(v,g(T))}function y(T){return o=void 0,f&&n?p(T):(n=i=void 0,a)}function w(){o!==void 0&&clearTimeout(o),c=0,n=l=i=o=void 0}function b(){return o===void 0?a:y(HS())}function _(){var T=HS(),M=x(T);if(n=arguments,i=this,l=T,M){if(o===void 0)return m(l);if(u)return clearTimeout(o),o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return _.cancel=w,_.flush=b,_}var vRe=yRe,_Re=vRe,xRe=Su,bRe="Expected a function";function wRe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(bRe);return xRe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),_Re(e,t,{leading:n,maxWait:t,trailing:i})}var TRe=wRe;const Tee=Ir(TRe);function ev(e){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}function KU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(r),!0).forEach(function(n){MRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MRe(e,t,r){return t=kRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kRe(e){var t=SRe(e,"string");return ev(t)=="symbol"?t:t+""}function SRe(e,t){if(ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PRe(e,t){return ARe(e)||jRe(e,t)||CRe(e,t)||ERe()}function ERe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CRe(e,t){if(e){if(typeof e=="string")return qU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qU(e,t)}}function qU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function ARe(e){if(Array.isArray(e))return e}var XU=E.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=e.width,a=s===void 0?"100%":s,o=e.height,l=o===void 0?"100%":o,c=e.minWidth,d=c===void 0?0:c,u=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=m===void 0?0:m,x=e.id,v=e.className,y=e.onResize,w=e.style,b=w===void 0?{}:w,_=E.useRef(null),T=E.useRef();T.current=y,E.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var M=E.useState({containerWidth:i.width,containerHeight:i.height}),k=PRe(M,2),j=k[0],A=k[1],R=E.useCallback(function($,F){A(function(V){var G=Math.round($),H=Math.round(F);return V.containerWidth===G&&V.containerHeight===H?V:{containerWidth:G,containerHeight:H}})},[]);E.useEffect(function(){var $=function(te){var ae,z=te[0].contentRect,D=z.width,K=z.height;R(D,K),(ae=T.current)===null||ae===void 0||ae.call(T,D,K)};g>0&&($=Tee($,g,{trailing:!0,leading:!1}));var F=new ResizeObserver($),V=_.current.getBoundingClientRect(),G=V.width,H=V.height;return R(G,H),F.observe(_.current),function(){F.disconnect()}},[R,g]);var I=E.useMemo(function(){var $=j.containerWidth,F=j.containerHeight;if($<0||F<0)return null;Dl(kd(a)||kd(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Dl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var V=kd(a)?$:a,G=kd(l)?F:l;r&&r>0&&(V?G=V/r:G&&(V=G*r),f&&G>f&&(G=f)),Dl(V>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,G,a,l,d,u,r);var H=!Array.isArray(p)&&Nl(p.type).endsWith("Chart");return se.Children.map(p,function(B){return xJ.isElement(B)?E.cloneElement(B,rx({width:V,height:G},H?{style:rx({height:"100%",width:"100%",maxHeight:G,maxWidth:V},B.props.style)}:{})):B})},[r,p,l,f,u,d,j,a]);return se.createElement("div",{id:x?"".concat(x):void 0,className:dr("recharts-responsive-container",v),style:rx(rx({},b),{},{width:a,height:l,minWidth:d,minHeight:u,maxHeight:f}),ref:_},I)}),bT=function(t){return null};bT.displayName="Cell";function tv(e){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tv(e)}function YU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YU(Object(r),!0).forEach(function(n){ORe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ORe(e,t,r){return t=$Re(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Re(e){var t=IRe(e,"string");return tv(t)=="symbol"?t:t+""}function IRe(e,t){if(tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kf={widthCache:{},cacheCount:0},NRe=2e3,DRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QU="recharts_measurement_span";function RRe(e){var t=Nj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var oy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Rl.isSsr)return{width:0,height:0};var n=RRe(r),i=JSON.stringify({text:t,copyStyle:n});if(Kf.widthCache[i])return Kf.widthCache[i];try{var s=document.getElementById(QU);s||(s=document.createElement("span"),s.setAttribute("id",QU),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=Nj(Nj({},DRe),n);Object.assign(s.style,a),s.textContent="".concat(t);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return Kf.widthCache[i]=l,++Kf.cacheCount>NRe&&(Kf.cacheCount=0,Kf.widthCache={}),l}catch{return{width:0,height:0}}},LRe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function rv(e){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function ow(e,t){return VRe(e)||zRe(e,t)||BRe(e,t)||FRe()}function FRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BRe(e,t){if(e){if(typeof e=="string")return ZU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZU(e,t)}}function ZU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function VRe(e){if(Array.isArray(e))return e}function URe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GRe(n.key),n)}}function WRe(e,t,r){return t&&JU(e.prototype,t),r&&JU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GRe(e){var t=HRe(e,"string");return rv(t)=="symbol"?t:t+""}function HRe(e,t){if(rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var e5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qRe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},XRe=Object.keys(Mee),Th="NaN";function YRe(e,t){return e*Mee[t]}var nx=function(){function e(t,r){URe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!KRe.test(r)&&(this.num=NaN,this.unit=""),XRe.includes(r)&&(this.num=YRe(t,r),this.unit="px")}return WRe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=qRe.exec(r))!==null&&n!==void 0?n:[],s=ow(i,3),a=s[1],o=s[2];return new e(parseFloat(a),o??"")}}])}();function kee(e){if(e.includes(Th))return Th;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=e5.exec(t))!==null&&r!==void 0?r:[],i=ow(n,4),s=i[1],a=i[2],o=i[3],l=nx.parse(s??""),c=nx.parse(o??""),d=a==="*"?l.multiply(c):l.divide(c);if(d.isNaN())return Th;t=t.replace(e5,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,f=(u=t5.exec(t))!==null&&u!==void 0?u:[],p=ow(f,4),m=p[1],g=p[2],x=p[3],v=nx.parse(m??""),y=nx.parse(x??""),w=g==="+"?v.add(y):v.subtract(y);if(w.isNaN())return Th;t=t.replace(t5,w.toString())}return t}var r5=/\(([^()]*)\)/;function QRe(e){for(var t=e;t.includes("(");){var r=r5.exec(t),n=ow(r,2),i=n[1];t=t.replace(r5,kee(i))}return t}function ZRe(e){var t=e.replace(/\s+/g,"");return t=QRe(t),t=kee(t),t}function JRe(e){try{return ZRe(e)}catch{return Th}}function KS(e){var t=JRe(e.slice(5,-1));return t===Th?"":t}var eLe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tLe=["dx","dy","angle","className","breakAll"];function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dj.apply(this,arguments)}function n5(e,t){if(e==null)return{};var r=rLe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function i5(e,t){return aLe(e)||sLe(e,t)||iLe(e,t)||nLe()}function nLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iLe(e,t){if(e){if(typeof e=="string")return s5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s5(e,t)}}function s5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function aLe(e){if(Array.isArray(e))return e}var See=/[ \f\n\r\t\v\u2028\u2029]+/,Pee=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var s=[];vr(r)||(n?s=r.toString().split(""):s=r.toString().split(See));var a=s.map(function(l){return{word:l,width:oy(l,i).width}}),o=n?0:oy(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},oLe=function(t,r,n,i,s){var a=t.maxLines,o=t.children,l=t.style,c=t.breakAll,d=dt(a),u=o,f=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(G,H){var B=H.word,te=H.width,ae=G[G.length-1];if(ae&&(i==null||s||ae.width+te+n<Number(i)))ae.words.push(B),ae.width+=te+n;else{var z={words:[B],width:te};G.push(z)}return G},[])},p=f(r),m=function(V){return V.reduce(function(G,H){return G.width>H.width?G:H})};if(!d)return p;for(var g="…",x=function(V){var G=u.slice(0,V),H=Pee({breakAll:c,style:l,children:G+g}).wordsWithComputedWidth,B=f(H),te=B.length>a||m(B).width>Number(i);return[te,B]},v=0,y=u.length-1,w=0,b;v<=y&&w<=u.length-1;){var _=Math.floor((v+y)/2),T=_-1,M=x(T),k=i5(M,2),j=k[0],A=k[1],R=x(_),I=i5(R,1),$=I[0];if(!j&&!$&&(v=_+1),j&&$&&(y=_-1),!j&&$){b=A;break}w++}return b||p},a5=function(t){var r=vr(t)?[]:t.toString().split(See);return[{words:r}]},lLe=function(t){var r=t.width,n=t.scaleToFit,i=t.children,s=t.style,a=t.breakAll,o=t.maxLines;if((r||n)&&!Rl.isSsr){var l,c,d=Pee({breakAll:a,children:i,style:s});if(d){var u=d.wordsWithComputedWidth,f=d.spaceWidth;l=u,c=f}else return a5(i);return oLe({breakAll:a,children:i,maxLines:o,style:s},l,c,r,n)}return a5(i)},o5="#808080",Zd=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,a=t.lineHeight,o=a===void 0?"1em":a,l=t.capHeight,c=l===void 0?"0.71em":l,d=t.scaleToFit,u=d===void 0?!1:d,f=t.textAnchor,p=f===void 0?"start":f,m=t.verticalAnchor,g=m===void 0?"end":m,x=t.fill,v=x===void 0?o5:x,y=n5(t,eLe),w=E.useMemo(function(){return lLe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),b=y.dx,_=y.dy,T=y.angle,M=y.className,k=y.breakAll,j=n5(y,tLe);if(!xi(n)||!xi(s))return null;var A=n+(dt(b)?b:0),R=s+(dt(_)?_:0),I;switch(g){case"start":I=KS("calc(".concat(c,")"));break;case"middle":I=KS("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:I=KS("calc(".concat(w.length-1," * -").concat(o,")"));break}var $=[];if(u){var F=w[0].width,V=y.width;$.push("scale(".concat((dt(V)?V/F:1)/F,")"))}return T&&$.push("rotate(".concat(T,", ").concat(A,", ").concat(R,")")),$.length&&(j.transform=$.join(" ")),se.createElement("text",Dj({},Qt(j,!0),{x:A,y:R,className:dr("recharts-text",M),textAnchor:p,fill:v.includes("url")?o5:v}),w.map(function(G,H){var B=G.words.join(k?"":" ");return se.createElement("tspan",{x:A,dy:H===0?I:o,key:"".concat(B,"-").concat(H)},B)}))};function iu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cLe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dI(e){let t,r,n;e.length!==2?(t=iu,r=(o,l)=>iu(e(o),l),n=(o,l)=>e(o)-l):(t=e===iu||e===cLe?e:uLe,r=e,n=e);function i(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const u=c+d>>>1;r(o[u],l)<0?c=u+1:d=u}while(c<d)}return c}function s(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const u=c+d>>>1;r(o[u],l)<=0?c=u+1:d=u}while(c<d)}return c}function a(o,l,c=0,d=o.length){const u=i(o,l,c,d-1);return u>c&&n(o[u-1],l)>-n(o[u],l)?u-1:u}return{left:i,center:a,right:s}}function uLe(){return 0}function Eee(e){return e===null?NaN:+e}function*dLe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fLe=dI(iu),v_=fLe.right;dI(Eee).center;class l5 extends Map{constructor(t,r=mLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(c5(this,t))}has(t){return super.has(c5(this,t))}set(t,r){return super.set(hLe(this,t),r)}delete(t){return super.delete(pLe(this,t))}}function c5({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function hLe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function pLe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function mLe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gLe(e=iu){if(e===iu)return Cee;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Cee(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const yLe=Math.sqrt(50),vLe=Math.sqrt(10),_Le=Math.sqrt(2);function lw(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=yLe?10:s>=vLe?5:s>=_Le?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?lw(e,t,r*2):[o,l,c]}function Rj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,a]=n?lw(t,e,r):lw(e,t,r);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Lj(e,t,r){return t=+t,e=+e,r=+r,lw(e,t,r)[2]}function Fj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Lj(t,e,r):Lj(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function u5(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function d5(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function jee(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?Cee:gLe(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,d=Math.log(l),u=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*u*(l-u)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*u/l+f)),m=Math.min(n,Math.floor(t+(l-c)*u/l+f));jee(e,t,p,m,i)}const s=e[t];let a=r,o=n;for(cg(e,r,t),i(e[n],s)>0&&cg(e,r,n);a<o;){for(cg(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[r],s)===0?cg(e,r,o):(++o,cg(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function cg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xLe(e,t,r){if(e=Float64Array.from(dLe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return d5(e);if(t>=1)return u5(e);var n,i=(n-1)*t,s=Math.floor(i),a=u5(jee(e,s).subarray(0,s+1)),o=d5(e.subarray(s+1));return a+(o-a)*(i-s)}}function bLe(e,t,r=Eee){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),a=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function wLe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function nc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bj=Symbol("implicit");function fI(){var e=new l5,t=[],r=[],n=Bj;function i(s){let a=e.get(s);if(a===void 0){if(n!==Bj)return n;e.set(s,a=t.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new l5;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return fI(t,r).unknown(n)},Ba.apply(i,arguments),i}function nv(){var e=fI().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,a,o=!1,l=0,c=0,d=.5;delete e.unknown;function u(){var f=t().length,p=i<n,m=p?i:n,g=p?n:i;s=(g-m)/Math.max(1,f-l+c*2),o&&(s=Math.floor(s)),m+=(g-m-s*(f-l))*d,a=s*(1-l),o&&(m=Math.round(m),a=Math.round(a));var x=wLe(f).map(function(v){return m+s*v});return r(p?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,u()):[n,i]},e.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,o=!0,u()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(f){return arguments.length?(o=!!f,u()):o},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),u()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),u()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,u()):c},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),u()):d},e.copy=function(){return nv(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Ba.apply(u(),arguments)}function Aee(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Aee(t())},e}function ly(){return Aee(nv.apply(null,arguments).paddingInner(1))}function hI(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Oee(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function __(){}var iv=.7,cw=1/iv,Wh="\\s*([+-]?\\d+)\\s*",sv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TLe=/^#([0-9a-f]{3,8})$/,MLe=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),kLe=new RegExp(`^rgb\\(${Zo},${Zo},${Zo}\\)$`),SLe=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${sv}\\)$`),PLe=new RegExp(`^rgba\\(${Zo},${Zo},${Zo},${sv}\\)$`),ELe=new RegExp(`^hsl\\(${sv},${Zo},${Zo}\\)$`),CLe=new RegExp(`^hsla\\(${sv},${Zo},${Zo},${sv}\\)$`),f5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hI(__,av,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:h5,formatHex:h5,formatHex8:jLe,formatHsl:ALe,formatRgb:p5,toString:p5});function h5(){return this.rgb().formatHex()}function jLe(){return this.rgb().formatHex8()}function ALe(){return $ee(this).formatHsl()}function p5(){return this.rgb().formatRgb()}function av(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=TLe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?m5(t):r===3?new Fs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ix(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ix(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=MLe.exec(e))?new Fs(t[1],t[2],t[3],1):(t=kLe.exec(e))?new Fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SLe.exec(e))?ix(t[1],t[2],t[3],t[4]):(t=PLe.exec(e))?ix(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ELe.exec(e))?v5(t[1],t[2]/100,t[3]/100,1):(t=CLe.exec(e))?v5(t[1],t[2]/100,t[3]/100,t[4]):f5.hasOwnProperty(e)?m5(f5[e]):e==="transparent"?new Fs(NaN,NaN,NaN,0):null}function m5(e){return new Fs(e>>16&255,e>>8&255,e&255,1)}function ix(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fs(e,t,r,n)}function OLe(e){return e instanceof __||(e=av(e)),e?(e=e.rgb(),new Fs(e.r,e.g,e.b,e.opacity)):new Fs}function zj(e,t,r,n){return arguments.length===1?OLe(e):new Fs(e,t,r,n??1)}function Fs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}hI(Fs,zj,Oee(__,{brighter(e){return e=e==null?cw:Math.pow(cw,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?iv:Math.pow(iv,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fs(Fd(this.r),Fd(this.g),Fd(this.b),uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g5,formatHex:g5,formatHex8:$Le,formatRgb:y5,toString:y5}));function g5(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function $Le(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function y5(){const e=uw(this.opacity);return`${e===1?"rgb(":"rgba("}${Fd(this.r)}, ${Fd(this.g)}, ${Fd(this.b)}${e===1?")":`, ${e})`}`}function uw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sd(e){return e=Fd(e),(e<16?"0":"")+e.toString(16)}function v5(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fo(e,t,r,n)}function $ee(e){if(e instanceof fo)return new fo(e.h,e.s,e.l,e.opacity);if(e instanceof __||(e=av(e)),!e)return new fo;if(e instanceof fo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-t)/o+2:a=(t-r)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new fo(a,o,l,e.opacity)}function ILe(e,t,r,n){return arguments.length===1?$ee(e):new fo(e,t,r,n??1)}function fo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}hI(fo,ILe,Oee(__,{brighter(e){return e=e==null?cw:Math.pow(cw,e),new fo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?iv:Math.pow(iv,e),new fo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Fs(qS(e>=240?e-240:e+120,i,n),qS(e,i,n),qS(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new fo(_5(this.h),sx(this.s),sx(this.l),uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uw(this.opacity);return`${e===1?"hsl(":"hsla("}${_5(this.h)}, ${sx(this.s)*100}%, ${sx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _5(e){return e=(e||0)%360,e<0?e+360:e}function sx(e){return Math.max(0,Math.min(1,e||0))}function qS(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const pI=e=>()=>e;function NLe(e,t){return function(r){return e+r*t}}function DLe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function RLe(e){return(e=+e)==1?Iee:function(t,r){return r-t?DLe(t,r,e):pI(isNaN(t)?r:t)}}function Iee(e,t){var r=t-e;return r?NLe(e,r):pI(isNaN(e)?t:e)}const x5=function e(t){var r=RLe(t);function n(i,s){var a=r((i=zj(i)).r,(s=zj(s)).r),o=r(i.g,s.g),l=r(i.b,s.b),c=Iee(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=l(d),i.opacity=c(d),i+""}}return n.gamma=e,n}(1);function LLe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function FLe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BLe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=pm(e[a],t[a]);for(;a<r;++a)s[a]=t[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function zLe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function dw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function VLe(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=pm(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var Vj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XS=new RegExp(Vj.source,"g");function ULe(e){return function(){return e}}function WLe(e){return function(t){return e(t)+""}}function GLe(e,t){var r=Vj.lastIndex=XS.lastIndex=0,n,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(n=Vj.exec(e))&&(i=XS.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:dw(n,i)})),r=XS.lastIndex;return r<t.length&&(s=t.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?WLe(l[0].x):ULe(t):(t=l.length,function(c){for(var d=0,u;d<t;++d)o[(u=l[d]).i]=u.x(c);return o.join("")})}function pm(e,t){var r=typeof t,n;return t==null||r==="boolean"?pI(t):(r==="number"?dw:r==="string"?(n=av(t))?(t=n,x5):GLe:t instanceof av?x5:t instanceof Date?zLe:FLe(t)?LLe:Array.isArray(t)?BLe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VLe:dw)(e,t)}function mI(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function HLe(e,t){t===void 0&&(t=e,e=pm);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function KLe(e){return function(){return e}}function fw(e){return+e}var b5=[0,1];function Ts(e){return e}function Uj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KLe(isNaN(t)?NaN:.5)}function qLe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function XLe(e,t,r){var n=e[0],i=e[1],s=t[0],a=t[1];return i<n?(n=Uj(i,n),s=r(a,s)):(n=Uj(n,i),s=r(s,a)),function(o){return s(n(o))}}function YLe(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=Uj(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(o){var l=v_(e,o,1,n)-1;return s[l](i[l](o))}}function x_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wT(){var e=b5,t=b5,r=pm,n,i,s,a=Ts,o,l,c;function d(){var f=Math.min(e.length,t.length);return a!==Ts&&(a=qLe(e[0],e[f-1])),o=f>2?YLe:XLe,l=c=null,u}function u(f){return f==null||isNaN(f=+f)?s:(l||(l=o(e.map(n),t,r)))(n(a(f)))}return u.invert=function(f){return a(i((c||(c=o(t,e.map(n),dw)))(f)))},u.domain=function(f){return arguments.length?(e=Array.from(f,fw),d()):e.slice()},u.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},u.rangeRound=function(f){return t=Array.from(f),r=mI,d()},u.clamp=function(f){return arguments.length?(a=f?!0:Ts,d()):a!==Ts},u.interpolate=function(f){return arguments.length?(r=f,d()):r},u.unknown=function(f){return arguments.length?(s=f,u):s},function(f,p){return n=f,i=p,d()}}function gI(){return wT()(Ts,Ts)}function QLe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function bp(e){return e=hw(Math.abs(e)),e?e[1]:NaN}function ZLe(e,t){return function(r,n){for(var i=r.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function JLe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var eFe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ov(e){if(!(t=eFe.exec(e)))throw new Error("invalid format: "+e);var t;return new yI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ov.prototype=yI.prototype;function yI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tFe(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var Nee;function rFe(e,t){var r=hw(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(Nee=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+hw(e,Math.max(0,t+s-1))[0]}function w5(e,t){var r=hw(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const T5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QLe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>w5(e*100,t),r:w5,s:rFe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function M5(e){return e}var k5=Array.prototype.map,S5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nFe(e){var t=e.grouping===void 0||e.thousands===void 0?M5:ZLe(k5.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?M5:JLe(k5.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(u){u=ov(u);var f=u.fill,p=u.align,m=u.sign,g=u.symbol,x=u.zero,v=u.width,y=u.comma,w=u.precision,b=u.trim,_=u.type;_==="n"?(y=!0,_="g"):T5[_]||(w===void 0&&(w=12),b=!0,_="g"),(x||f==="0"&&p==="=")&&(x=!0,f="0",p="=");var T=g==="$"?r:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",M=g==="$"?n:/[%p]/.test(_)?a:"",k=T5[_],j=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(R){var I=T,$=M,F,V,G;if(_==="c")$=k(R)+$,R="";else{R=+R;var H=R<0||1/R<0;if(R=isNaN(R)?l:k(Math.abs(R),w),b&&(R=tFe(R)),H&&+R==0&&m!=="+"&&(H=!1),I=(H?m==="("?m:o:m==="-"||m==="("?"":m)+I,$=(_==="s"?S5[8+Nee/3]:"")+$+(H&&m==="("?")":""),j){for(F=-1,V=R.length;++F<V;)if(G=R.charCodeAt(F),48>G||G>57){$=(G===46?i+R.slice(F+1):R.slice(F))+$,R=R.slice(0,F);break}}}y&&!x&&(R=t(R,1/0));var B=I.length+R.length+$.length,te=B<v?new Array(v-B+1).join(f):"";switch(y&&x&&(R=t(te+R,te.length?v-$.length:1/0),te=""),p){case"<":R=I+R+$+te;break;case"=":R=I+te+R+$;break;case"^":R=te.slice(0,B=te.length>>1)+I+R+$+te.slice(B);break;default:R=te+I+R+$;break}return s(R)}return A.toString=function(){return u+""},A}function d(u,f){var p=c((u=ov(u),u.type="f",u)),m=Math.max(-8,Math.min(8,Math.floor(bp(f)/3)))*3,g=Math.pow(10,-m),x=S5[8+m/3];return function(v){return p(g*v)+x}}return{format:c,formatPrefix:d}}var ax,vI,Dee;iFe({thousands:",",grouping:[3],currency:["$",""]});function iFe(e){return ax=nFe(e),vI=ax.format,Dee=ax.formatPrefix,ax}function sFe(e){return Math.max(0,-bp(Math.abs(e)))}function aFe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bp(t)/3)))*3-bp(Math.abs(e)))}function oFe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bp(t)-bp(e))+1}function Ree(e,t,r,n){var i=Fj(e,t,r),s;switch(n=ov(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=aFe(i,a))&&(n.precision=s),Dee(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=oFe(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=sFe(i))&&(n.precision=s-(n.type==="%")*2);break}}return vI(n)}function Eu(e){var t=e.domain;return e.ticks=function(r){var n=t();return Rj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return Ree(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,a=n[i],o=n[s],l,c,d=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);d-- >0;){if(c=Lj(a,o,r),c===l)return n[i]=a,n[s]=o,t(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function pw(){var e=gI();return e.copy=function(){return x_(e,pw())},Ba.apply(e,arguments),Eu(e)}function Lee(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,fw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Lee(e).unknown(t)},e=arguments.length?Array.from(e,fw):[0,1],Eu(r)}function Fee(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),e[r]=t.floor(i),e[n]=t.ceil(s),e}function P5(e){return Math.log(e)}function E5(e){return Math.exp(e)}function lFe(e){return-Math.log(-e)}function cFe(e){return-Math.exp(-e)}function uFe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dFe(e){return e===10?uFe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fFe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function C5(e){return(t,r)=>-e(-t,r)}function _I(e){const t=e(P5,E5),r=t.domain;let n=10,i,s;function a(){return i=fFe(n),s=dFe(n),r()[0]<0?(i=C5(i),s=C5(s),e(lFe,cFe)):e(P5,E5),t}return t.base=function(o){return arguments.length?(n=+o,a()):n},t.domain=function(o){return arguments.length?(r(o),a()):r()},t.ticks=o=>{const l=r();let c=l[0],d=l[l.length-1];const u=d<c;u&&([c,d]=[d,c]);let f=i(c),p=i(d),m,g;const x=o==null?10:+o;let v=[];if(!(n%1)&&p-f<x){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(m=1;m<n;++m)if(g=f<0?m/s(-f):m*s(f),!(g<c)){if(g>d)break;v.push(g)}}else for(;f<=p;++f)for(m=n-1;m>=1;--m)if(g=f>0?m/s(-f):m*s(f),!(g<c)){if(g>d)break;v.push(g)}v.length*2<x&&(v=Rj(c,d,x))}else v=Rj(f,p,Math.min(p-f,x)).map(s);return u?v.reverse():v},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=ov(l)).precision==null&&(l.trim=!0),l=vI(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return d=>{let u=d/s(Math.round(i(d)));return u*n<n-.5&&(u*=n),u<=c?l(d):""}},t.nice=()=>r(Fee(r(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function Bee(){const e=_I(wT()).domain([1,10]);return e.copy=()=>x_(e,Bee()).base(e.base()),Ba.apply(e,arguments),e}function j5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function A5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xI(e){var t=1,r=e(j5(t),A5(t));return r.constant=function(n){return arguments.length?e(j5(t=+n),A5(t)):t},Eu(r)}function zee(){var e=xI(wT());return e.copy=function(){return x_(e,zee()).constant(e.constant())},Ba.apply(e,arguments)}function O5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hFe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pFe(e){return e<0?-e*e:e*e}function bI(e){var t=e(Ts,Ts),r=1;function n(){return r===1?e(Ts,Ts):r===.5?e(hFe,pFe):e(O5(r),O5(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Eu(t)}function wI(){var e=bI(wT());return e.copy=function(){return x_(e,wI()).exponent(e.exponent())},Ba.apply(e,arguments),e}function mFe(){return wI.apply(null,arguments).exponent(.5)}function $5(e){return Math.sign(e)*e*e}function gFe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Vee(){var e=gI(),t=[0,1],r=!1,n;function i(s){var a=gFe(e(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return e.invert($5(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,fw)).map($5)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Vee(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ba.apply(i,arguments),Eu(i)}function Uee(){var e=[],t=[],r=[],n;function i(){var a=0,o=Math.max(1,t.length);for(r=new Array(o-1);++a<o;)r[a-1]=bLe(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:t[v_(r,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(iu),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Uee().domain(e).range(t).unknown(n)},Ba.apply(s,arguments)}function Wee(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[v_(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return Wee().domain([e,t]).range(i).unknown(s)},Ba.apply(Eu(a),arguments)}function Gee(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[v_(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Gee().domain(e).range(t).unknown(r)},Ba.apply(i,arguments)}const YS=new Date,QS=new Date;function Ti(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),t(s,o),e(s);while(c<s&&s<a);return l},i.filter=s=>Ti(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),r&&(i.count=(s,a)=>(YS.setTime(+s),QS.setTime(+a),e(YS),e(QS),Math.floor(r(YS,QS))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const mw=Ti(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ti(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mw);mw.range;const Cl=1e3,ja=Cl*60,jl=ja*60,Kl=jl*24,TI=Kl*7,I5=Kl*30,ZS=Kl*365,Pd=Ti(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Cl)},(e,t)=>(t-e)/Cl,e=>e.getUTCSeconds());Pd.range;const MI=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cl)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getMinutes());MI.range;const kI=Ti(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getUTCMinutes());kI.range;const SI=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cl-e.getMinutes()*ja)},(e,t)=>{e.setTime(+e+t*jl)},(e,t)=>(t-e)/jl,e=>e.getHours());SI.range;const PI=Ti(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jl)},(e,t)=>(t-e)/jl,e=>e.getUTCHours());PI.range;const b_=Ti(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ja)/Kl,e=>e.getDate()-1);b_.range;const TT=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kl,e=>e.getUTCDate()-1);TT.range;const Hee=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kl,e=>Math.floor(e/Kl));Hee.range;function gf(e){return Ti(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ja)/TI)}const MT=gf(0),gw=gf(1),yFe=gf(2),vFe=gf(3),wp=gf(4),_Fe=gf(5),xFe=gf(6);MT.range;gw.range;yFe.range;vFe.range;wp.range;_Fe.range;xFe.range;function yf(e){return Ti(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/TI)}const kT=yf(0),yw=yf(1),bFe=yf(2),wFe=yf(3),Tp=yf(4),TFe=yf(5),MFe=yf(6);kT.range;yw.range;bFe.range;wFe.range;Tp.range;TFe.range;MFe.range;const EI=Ti(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());EI.range;const CI=Ti(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CI.range;const ql=Ti(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ql.range;const Xl=Ti(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Xl.range;function Kee(e,t,r,n,i,s){const a=[[Pd,1,Cl],[Pd,5,5*Cl],[Pd,15,15*Cl],[Pd,30,30*Cl],[s,1,ja],[s,5,5*ja],[s,15,15*ja],[s,30,30*ja],[i,1,jl],[i,3,3*jl],[i,6,6*jl],[i,12,12*jl],[n,1,Kl],[n,2,2*Kl],[r,1,TI],[t,1,I5],[t,3,3*I5],[e,1,ZS]];function o(c,d,u){const f=d<c;f&&([c,d]=[d,c]);const p=u&&typeof u.range=="function"?u:l(c,d,u),m=p?p.range(c,+d+1):[];return f?m.reverse():m}function l(c,d,u){const f=Math.abs(d-c)/u,p=dI(([,,x])=>x).right(a,f);if(p===a.length)return e.every(Fj(c/ZS,d/ZS,u));if(p===0)return mw.every(Math.max(Fj(c,d,u),1));const[m,g]=a[f/a[p-1][2]<a[p][2]/f?p-1:p];return m.every(g)}return[o,l]}const[kFe,SFe]=Kee(Xl,CI,kT,Hee,PI,kI),[PFe,EFe]=Kee(ql,EI,MT,b_,SI,MI);function JS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function eP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ug(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function CFe(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=dg(i),d=fg(i),u=dg(s),f=fg(s),p=dg(a),m=fg(a),g=dg(o),x=fg(o),v=dg(l),y=fg(l),w={a:H,A:B,b:te,B:ae,c:null,d:B5,e:B5,f:ZFe,g:l3e,G:u3e,H:XFe,I:YFe,j:QFe,L:qee,m:JFe,M:e3e,p:z,q:D,Q:U5,s:W5,S:t3e,u:r3e,U:n3e,V:i3e,w:s3e,W:a3e,x:null,X:null,y:o3e,Y:c3e,Z:d3e,"%":V5},b={a:K,A:oe,b:_e,B:de,c:null,d:z5,e:z5,f:m3e,g:k3e,G:P3e,H:f3e,I:h3e,j:p3e,L:Yee,m:g3e,M:y3e,p:ve,q:Ie,Q:U5,s:W5,S:v3e,u:_3e,U:x3e,V:b3e,w:w3e,W:T3e,x:null,X:null,y:M3e,Y:S3e,Z:E3e,"%":V5},_={a:A,A:R,b:I,B:$,c:F,d:L5,e:L5,f:GFe,g:R5,G:D5,H:F5,I:F5,j:zFe,L:WFe,m:BFe,M:VFe,p:j,q:FFe,Q:KFe,s:qFe,S:UFe,u:IFe,U:NFe,V:DFe,w:$Fe,W:RFe,x:V,X:G,y:R5,Y:D5,Z:LFe,"%":HFe};w.x=T(r,w),w.X=T(n,w),w.c=T(t,w),b.x=T(r,b),b.X=T(n,b),b.c=T(t,b);function T(Se,ge){return function(J){var ee=[],Z=-1,we=0,$e=Se.length,Ce,Pe,Q;for(J instanceof Date||(J=new Date(+J));++Z<$e;)Se.charCodeAt(Z)===37&&(ee.push(Se.slice(we,Z)),(Pe=N5[Ce=Se.charAt(++Z)])!=null?Ce=Se.charAt(++Z):Pe=Ce==="e"?" ":"0",(Q=ge[Ce])&&(Ce=Q(J,Pe)),ee.push(Ce),we=Z+1);return ee.push(Se.slice(we,Z)),ee.join("")}}function M(Se,ge){return function(J){var ee=ug(1900,void 0,1),Z=k(ee,Se,J+="",0),we,$e;if(Z!=J.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ge&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(we=eP(ug(ee.y,0,1)),$e=we.getUTCDay(),we=$e>4||$e===0?yw.ceil(we):yw(we),we=TT.offset(we,(ee.V-1)*7),ee.y=we.getUTCFullYear(),ee.m=we.getUTCMonth(),ee.d=we.getUTCDate()+(ee.w+6)%7):(we=JS(ug(ee.y,0,1)),$e=we.getDay(),we=$e>4||$e===0?gw.ceil(we):gw(we),we=b_.offset(we,(ee.V-1)*7),ee.y=we.getFullYear(),ee.m=we.getMonth(),ee.d=we.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),$e="Z"in ee?eP(ug(ee.y,0,1)).getUTCDay():JS(ug(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-($e+5)%7:ee.w+ee.U*7-($e+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,eP(ee)):JS(ee)}}function k(Se,ge,J,ee){for(var Z=0,we=ge.length,$e=J.length,Ce,Pe;Z<we;){if(ee>=$e)return-1;if(Ce=ge.charCodeAt(Z++),Ce===37){if(Ce=ge.charAt(Z++),Pe=_[Ce in N5?ge.charAt(Z++):Ce],!Pe||(ee=Pe(Se,J,ee))<0)return-1}else if(Ce!=J.charCodeAt(ee++))return-1}return ee}function j(Se,ge,J){var ee=c.exec(ge.slice(J));return ee?(Se.p=d.get(ee[0].toLowerCase()),J+ee[0].length):-1}function A(Se,ge,J){var ee=p.exec(ge.slice(J));return ee?(Se.w=m.get(ee[0].toLowerCase()),J+ee[0].length):-1}function R(Se,ge,J){var ee=u.exec(ge.slice(J));return ee?(Se.w=f.get(ee[0].toLowerCase()),J+ee[0].length):-1}function I(Se,ge,J){var ee=v.exec(ge.slice(J));return ee?(Se.m=y.get(ee[0].toLowerCase()),J+ee[0].length):-1}function $(Se,ge,J){var ee=g.exec(ge.slice(J));return ee?(Se.m=x.get(ee[0].toLowerCase()),J+ee[0].length):-1}function F(Se,ge,J){return k(Se,t,ge,J)}function V(Se,ge,J){return k(Se,r,ge,J)}function G(Se,ge,J){return k(Se,n,ge,J)}function H(Se){return a[Se.getDay()]}function B(Se){return s[Se.getDay()]}function te(Se){return l[Se.getMonth()]}function ae(Se){return o[Se.getMonth()]}function z(Se){return i[+(Se.getHours()>=12)]}function D(Se){return 1+~~(Se.getMonth()/3)}function K(Se){return a[Se.getUTCDay()]}function oe(Se){return s[Se.getUTCDay()]}function _e(Se){return l[Se.getUTCMonth()]}function de(Se){return o[Se.getUTCMonth()]}function ve(Se){return i[+(Se.getUTCHours()>=12)]}function Ie(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var ge=T(Se+="",w);return ge.toString=function(){return Se},ge},parse:function(Se){var ge=M(Se+="",!1);return ge.toString=function(){return Se},ge},utcFormat:function(Se){var ge=T(Se+="",b);return ge.toString=function(){return Se},ge},utcParse:function(Se){var ge=M(Se+="",!0);return ge.toString=function(){return Se},ge}}}var N5={"-":"",_:" ",0:"0"},Oi=/^\s*\d+/,jFe=/^%/,AFe=/[\\^$*+?|[\]().{}]/g;function $r(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function OFe(e){return e.replace(AFe,"\\$&")}function dg(e){return new RegExp("^(?:"+e.map(OFe).join("|")+")","i")}function fg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function $Fe(e,t,r){var n=Oi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function IFe(e,t,r){var n=Oi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function NFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function DFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function RFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function D5(e,t,r){var n=Oi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function R5(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function LFe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function FFe(e,t,r){var n=Oi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function BFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function L5(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function zFe(e,t,r){var n=Oi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function F5(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function VFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function UFe(e,t,r){var n=Oi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function WFe(e,t,r){var n=Oi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function GFe(e,t,r){var n=Oi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function HFe(e,t,r){var n=jFe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function KFe(e,t,r){var n=Oi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function qFe(e,t,r){var n=Oi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function B5(e,t){return $r(e.getDate(),t,2)}function XFe(e,t){return $r(e.getHours(),t,2)}function YFe(e,t){return $r(e.getHours()%12||12,t,2)}function QFe(e,t){return $r(1+b_.count(ql(e),e),t,3)}function qee(e,t){return $r(e.getMilliseconds(),t,3)}function ZFe(e,t){return qee(e,t)+"000"}function JFe(e,t){return $r(e.getMonth()+1,t,2)}function e3e(e,t){return $r(e.getMinutes(),t,2)}function t3e(e,t){return $r(e.getSeconds(),t,2)}function r3e(e){var t=e.getDay();return t===0?7:t}function n3e(e,t){return $r(MT.count(ql(e)-1,e),t,2)}function Xee(e){var t=e.getDay();return t>=4||t===0?wp(e):wp.ceil(e)}function i3e(e,t){return e=Xee(e),$r(wp.count(ql(e),e)+(ql(e).getDay()===4),t,2)}function s3e(e){return e.getDay()}function a3e(e,t){return $r(gw.count(ql(e)-1,e),t,2)}function o3e(e,t){return $r(e.getFullYear()%100,t,2)}function l3e(e,t){return e=Xee(e),$r(e.getFullYear()%100,t,2)}function c3e(e,t){return $r(e.getFullYear()%1e4,t,4)}function u3e(e,t){var r=e.getDay();return e=r>=4||r===0?wp(e):wp.ceil(e),$r(e.getFullYear()%1e4,t,4)}function d3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$r(t/60|0,"0",2)+$r(t%60,"0",2)}function z5(e,t){return $r(e.getUTCDate(),t,2)}function f3e(e,t){return $r(e.getUTCHours(),t,2)}function h3e(e,t){return $r(e.getUTCHours()%12||12,t,2)}function p3e(e,t){return $r(1+TT.count(Xl(e),e),t,3)}function Yee(e,t){return $r(e.getUTCMilliseconds(),t,3)}function m3e(e,t){return Yee(e,t)+"000"}function g3e(e,t){return $r(e.getUTCMonth()+1,t,2)}function y3e(e,t){return $r(e.getUTCMinutes(),t,2)}function v3e(e,t){return $r(e.getUTCSeconds(),t,2)}function _3e(e){var t=e.getUTCDay();return t===0?7:t}function x3e(e,t){return $r(kT.count(Xl(e)-1,e),t,2)}function Qee(e){var t=e.getUTCDay();return t>=4||t===0?Tp(e):Tp.ceil(e)}function b3e(e,t){return e=Qee(e),$r(Tp.count(Xl(e),e)+(Xl(e).getUTCDay()===4),t,2)}function w3e(e){return e.getUTCDay()}function T3e(e,t){return $r(yw.count(Xl(e)-1,e),t,2)}function M3e(e,t){return $r(e.getUTCFullYear()%100,t,2)}function k3e(e,t){return e=Qee(e),$r(e.getUTCFullYear()%100,t,2)}function S3e(e,t){return $r(e.getUTCFullYear()%1e4,t,4)}function P3e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Tp(e):Tp.ceil(e),$r(e.getUTCFullYear()%1e4,t,4)}function E3e(){return"+0000"}function V5(){return"%"}function U5(e){return+e}function W5(e){return Math.floor(+e/1e3)}var qf,Zee,Jee;C3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function C3e(e){return qf=CFe(e),Zee=qf.format,qf.parse,Jee=qf.utcFormat,qf.utcParse,qf}function j3e(e){return new Date(e)}function A3e(e){return e instanceof Date?+e:+new Date(+e)}function jI(e,t,r,n,i,s,a,o,l,c){var d=gI(),u=d.invert,f=d.domain,p=c(".%L"),m=c(":%S"),g=c("%I:%M"),x=c("%I %p"),v=c("%a %d"),y=c("%b %d"),w=c("%B"),b=c("%Y");function _(T){return(l(T)<T?p:o(T)<T?m:a(T)<T?g:s(T)<T?x:n(T)<T?i(T)<T?v:y:r(T)<T?w:b)(T)}return d.invert=function(T){return new Date(u(T))},d.domain=function(T){return arguments.length?f(Array.from(T,A3e)):f().map(j3e)},d.ticks=function(T){var M=f();return e(M[0],M[M.length-1],T??10)},d.tickFormat=function(T,M){return M==null?_:c(M)},d.nice=function(T){var M=f();return(!T||typeof T.range!="function")&&(T=t(M[0],M[M.length-1],T??10)),T?f(Fee(M,T)):d},d.copy=function(){return x_(d,jI(e,t,r,n,i,s,a,o,l,c))},d}function O3e(){return Ba.apply(jI(PFe,EFe,ql,EI,MT,b_,SI,MI,Pd,Zee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $3e(){return Ba.apply(jI(kFe,SFe,Xl,CI,kT,TT,PI,kI,Pd,Jee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ST(){var e=0,t=1,r,n,i,s,a=Ts,o=!1,l;function c(u){return u==null||isNaN(u=+u)?l:a(i===0?.5:(u=(s(u)-r)*i,o?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([e,t]=u,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(u){return arguments.length?(o=!!u,c):o},c.interpolator=function(u){return arguments.length?(a=u,c):a};function d(u){return function(f){var p,m;return arguments.length?([p,m]=f,a=u(p,m),c):[a(0),a(1)]}}return c.range=d(pm),c.rangeRound=d(mI),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return s=u,r=u(e),n=u(t),i=r===n?0:1/(n-r),c}}function Cu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ete(){var e=Eu(ST()(Ts));return e.copy=function(){return Cu(e,ete())},nc.apply(e,arguments)}function tte(){var e=_I(ST()).domain([1,10]);return e.copy=function(){return Cu(e,tte()).base(e.base())},nc.apply(e,arguments)}function rte(){var e=xI(ST());return e.copy=function(){return Cu(e,rte()).constant(e.constant())},nc.apply(e,arguments)}function AI(){var e=bI(ST());return e.copy=function(){return Cu(e,AI()).exponent(e.exponent())},nc.apply(e,arguments)}function I3e(){return AI.apply(null,arguments).exponent(.5)}function nte(){var e=[],t=Ts;function r(n){if(n!=null&&!isNaN(n=+n))return t((v_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(iu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>xLe(e,s/n))},r.copy=function(){return nte(t).domain(e)},nc.apply(r,arguments)}function PT(){var e=0,t=.5,r=1,n=1,i,s,a,o,l,c=Ts,d,u=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-s)*(n*g<n*s?o:l),c(u?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,i=d(e=+e),s=d(t=+t),a=d(r=+r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(u=!!g,p):u},p.interpolator=function(g){return arguments.length?(c=g,p):c};function m(g){return function(x){var v,y,w;return arguments.length?([v,y,w]=x,c=HLe(g,[v,y,w]),p):[c(0),c(.5),c(1)]}}return p.range=m(pm),p.rangeRound=m(mI),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return d=g,i=g(e),s=g(t),a=g(r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,p}}function ite(){var e=Eu(PT()(Ts));return e.copy=function(){return Cu(e,ite())},nc.apply(e,arguments)}function ste(){var e=_I(PT()).domain([.1,1,10]);return e.copy=function(){return Cu(e,ste()).base(e.base())},nc.apply(e,arguments)}function ate(){var e=xI(PT());return e.copy=function(){return Cu(e,ate()).constant(e.constant())},nc.apply(e,arguments)}function OI(){var e=bI(PT());return e.copy=function(){return Cu(e,OI()).exponent(e.exponent())},nc.apply(e,arguments)}function N3e(){return OI.apply(null,arguments).exponent(.5)}const G5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nv,scaleDiverging:ite,scaleDivergingLog:ste,scaleDivergingPow:OI,scaleDivergingSqrt:N3e,scaleDivergingSymlog:ate,scaleIdentity:Lee,scaleImplicit:Bj,scaleLinear:pw,scaleLog:Bee,scaleOrdinal:fI,scalePoint:ly,scalePow:wI,scaleQuantile:Uee,scaleQuantize:Wee,scaleRadial:Vee,scaleSequential:ete,scaleSequentialLog:tte,scaleSequentialPow:AI,scaleSequentialQuantile:nte,scaleSequentialSqrt:I3e,scaleSequentialSymlog:rte,scaleSqrt:mFe,scaleSymlog:zee,scaleThreshold:Gee,scaleTime:O3e,scaleUtc:$3e,tickFormat:Ree},Symbol.toStringTag,{value:"Module"}));var D3e=am;function R3e(e,t,r){for(var n=-1,i=e.length;++n<i;){var s=e[n],a=t(s);if(a!=null&&(o===void 0?a===a&&!D3e(a):r(a,o)))var o=a,l=s}return l}var ET=R3e;function L3e(e,t){return e>t}var ote=L3e,F3e=ET,B3e=ote,z3e=hm;function V3e(e){return e&&e.length?F3e(e,z3e,B3e):void 0}var U3e=V3e;const CT=Ir(U3e);function W3e(e,t){return e<t}var lte=W3e,G3e=ET,H3e=lte,K3e=hm;function q3e(e){return e&&e.length?G3e(e,K3e,H3e):void 0}var X3e=q3e;const jT=Ir(X3e);var Y3e=G$,Q3e=Pu,Z3e=gee,J3e=Us;function eBe(e,t){var r=J3e(e)?Y3e:Z3e;return r(e,Q3e(t))}var tBe=eBe,rBe=pee,nBe=tBe;function iBe(e,t){return rBe(nBe(e,t),1)}var sBe=iBe;const aBe=Ir(sBe);var oBe=oI;function lBe(e,t){return oBe(e,t)}var cBe=lBe;const AT=Ir(cBe);var mm=1e9,uBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},II,Mn=!0,Da="[DecimalError] ",Bd=Da+"Invalid argument: ",$I=Da+"Exponent out of range: ",gm=Math.floor,hd=Math.pow,dBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ra,Ei=1e7,mn=7,cte=9007199254740991,vw=gm(cte/mn),Tt={};Tt.absoluteValue=Tt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Tt.comparedTo=Tt.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Tt.decimalPlaces=Tt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*mn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Tt.dividedBy=Tt.div=function(e){return Ll(this,new this.constructor(e))};Tt.dividedToIntegerBy=Tt.idiv=function(e){var t=this,r=t.constructor;return Yr(Ll(t,new r(e),0,1),r.precision)};Tt.equals=Tt.eq=function(e){return!this.cmp(e)};Tt.exponent=function(){return si(this)};Tt.greaterThan=Tt.gt=function(e){return this.cmp(e)>0};Tt.greaterThanOrEqualTo=Tt.gte=function(e){return this.cmp(e)>=0};Tt.isInteger=Tt.isint=function(){return this.e>this.d.length-2};Tt.isNegative=Tt.isneg=function(){return this.s<0};Tt.isPositive=Tt.ispos=function(){return this.s>0};Tt.isZero=function(){return this.s===0};Tt.lessThan=Tt.lt=function(e){return this.cmp(e)<0};Tt.lessThanOrEqualTo=Tt.lte=function(e){return this.cmp(e)<1};Tt.logarithm=Tt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ra))throw Error(Da+"NaN");if(r.s<1)throw Error(Da+(r.s?"NaN":"-Infinity"));return r.eq(ra)?new n(0):(Mn=!1,t=Ll(lv(r,s),lv(e,s),s),Mn=!0,Yr(t,i))};Tt.minus=Tt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fte(t,e):ute(t,(e.s=-e.s,e))};Tt.modulo=Tt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Da+"NaN");return r.s?(Mn=!1,t=Ll(r,e,0,1).times(e),Mn=!0,r.minus(t)):Yr(new n(r),i)};Tt.naturalExponential=Tt.exp=function(){return dte(this)};Tt.naturalLogarithm=Tt.ln=function(){return lv(this)};Tt.negated=Tt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Tt.plus=Tt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ute(t,e):fte(t,(e.s=-e.s,e))};Tt.precision=Tt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bd+e);if(t=si(i)+1,n=i.d.length-1,r=n*mn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Tt.squareRoot=Tt.sqrt=function(){var e,t,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Da+"NaN")}for(e=si(o),Mn=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Go(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=gm((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=a=r+3;;)if(s=n,n=s.plus(Ll(o,s,a+2)).times(.5),Go(s.d).slice(0,a)===(t=Go(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Yr(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;a+=4}return Mn=!0,Yr(n,r)};Tt.times=Tt.mul=function(e){var t,r,n,i,s,a,o,l,c,d=this,u=d.constructor,f=d.d,p=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,l=f.length,c=p.length,l<c&&(s=f,f=p,p=s,a=l,l=c,c=a),s=[],a=l+c,n=a;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=s[i]+p[n]*f[i-n-1]+t,s[i--]=o%Ei|0,t=o/Ei|0;s[i]=(s[i]+t)%Ei|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Mn?Yr(e,u.precision):e};Tt.toDecimalPlaces=Tt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(rl(e,0,mm),t===void 0?t=n.rounding:rl(t,0,8),Yr(r,e+si(r)+1,t))};Tt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Jd(n,!0):(rl(e,0,mm),t===void 0?t=i.rounding:rl(t,0,8),n=Yr(new i(n),e+1,t),r=Jd(n,!0,e+1)),r};Tt.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Jd(i):(rl(e,0,mm),t===void 0?t=s.rounding:rl(t,0,8),n=Yr(new s(i),e+si(i)+1,t),r=Jd(n.abs(),!1,e+si(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Tt.toInteger=Tt.toint=function(){var e=this,t=e.constructor;return Yr(new t(e),si(e)+1,t.rounding)};Tt.toNumber=function(){return+this};Tt.toPower=Tt.pow=function(e){var t,r,n,i,s,a,o=this,l=o.constructor,c=12,d=+(e=new l(e));if(!e.s)return new l(ra);if(o=new l(o),!o.s){if(e.s<1)throw Error(Da+"Infinity");return o}if(o.eq(ra))return o;if(n=l.precision,e.eq(ra))return Yr(o,n);if(t=e.e,r=e.d.length-1,a=t>=r,s=o.s,a){if((r=d<0?-d:d)<=cte){for(i=new l(ra),t=Math.ceil(n/mn+4),Mn=!1;r%2&&(i=i.times(o),K5(i.d,t)),r=gm(r/2),r!==0;)o=o.times(o),K5(o.d,t);return Mn=!0,e.s<0?new l(ra).div(i):Yr(i,n)}}else if(s<0)throw Error(Da+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Mn=!1,i=e.times(lv(o,n+c)),Mn=!0,i=dte(i),i.s=s,i};Tt.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=si(i),n=Jd(i,r<=s.toExpNeg||r>=s.toExpPos)):(rl(e,1,mm),t===void 0?t=s.rounding:rl(t,0,8),i=Yr(new s(i),e,t),r=si(i),n=Jd(i,e<=r||r<=s.toExpNeg,e)),n};Tt.toSignificantDigits=Tt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(rl(e,1,mm),t===void 0?t=n.rounding:rl(t,0,8)),Yr(new n(r),e,t)};Tt.toString=Tt.valueOf=Tt.val=Tt.toJSON=Tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=si(e),r=e.constructor;return Jd(e,t<=r.toExpNeg||t>=r.toExpPos)};function ute(e,t){var r,n,i,s,a,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Mn?Yr(t,u):t;if(l=e.d,c=t.d,a=e.e,i=t.e,l=l.slice(),s=a-i,s){for(s<0?(n=l,s=-s,o=c.length):(n=c,i=a,o=l.length),a=Math.ceil(u/mn),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/Ei|0,l[s]%=Ei;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,Mn?Yr(t,u):t}function rl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Bd+e)}function Go(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)n=e[t]+"",r=mn-n.length,r&&(s+=Ac(r)),s+=n;a=e[t],n=a+"",r=mn-n.length,r&&(s+=Ac(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ll=function(){function e(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%Ei|0,a=s/Ei|0;return a&&n.unshift(a),n}function t(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Ei+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,l,c,d,u,f,p,m,g,x,v,y,w,b,_,T,M,k,j=n.constructor,A=n.s==i.s?1:-1,R=n.d,I=i.d;if(!n.s)return new j(n);if(!i.s)throw Error(Da+"Division by zero");for(l=n.e-i.e,M=I.length,_=R.length,p=new j(A),m=p.d=[],c=0;I[c]==(R[c]||0);)++c;if(I[c]>(R[c]||0)&&--l,s==null?y=s=j.precision:a?y=s+(si(n)-si(i))+1:y=s,y<0)return new j(0);if(y=y/mn+2|0,c=0,M==1)for(d=0,I=I[0],y++;(c<_||d)&&y--;c++)w=d*Ei+(R[c]||0),m[c]=w/I|0,d=w%I|0;else{for(d=Ei/(I[0]+1)|0,d>1&&(I=e(I,d),R=e(R,d),M=I.length,_=R.length),b=M,g=R.slice(0,M),x=g.length;x<M;)g[x++]=0;k=I.slice(),k.unshift(0),T=I[0],I[1]>=Ei/2&&++T;do d=0,o=t(I,g,M,x),o<0?(v=g[0],M!=x&&(v=v*Ei+(g[1]||0)),d=v/T|0,d>1?(d>=Ei&&(d=Ei-1),u=e(I,d),f=u.length,x=g.length,o=t(u,g,f,x),o==1&&(d--,r(u,M<f?k:I,f))):(d==0&&(o=d=1),u=I.slice()),f=u.length,f<x&&u.unshift(0),r(g,u,x),o==-1&&(x=g.length,o=t(I,g,M,x),o<1&&(d++,r(g,M<x?k:I,x))),x=g.length):o===0&&(d++,g=[0]),m[c++]=d,o&&g[0]?g[x++]=R[b]||0:(g=[R[b]],x=1);while((b++<_||g[0]!==void 0)&&y--)}return m[0]||m.shift(),p.e=l,Yr(p,a?s+si(p)+1:s)}}();function dte(e,t){var r,n,i,s,a,o,l=0,c=0,d=e.constructor,u=d.precision;if(si(e)>16)throw Error($I+si(e));if(!e.s)return new d(ra);for(t==null?(Mn=!1,o=u):o=t,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),c+=5;for(n=Math.log(hd(2,c))/Math.LN10*2+5|0,o+=n,r=i=s=new d(ra),d.precision=o;;){if(i=Yr(i.times(e),o),r=r.times(++l),a=s.plus(Ll(i,r,o)),Go(a.d).slice(0,o)===Go(s.d).slice(0,o)){for(;c--;)s=Yr(s.times(s),o);return d.precision=u,t==null?(Mn=!0,Yr(s,u)):s}s=a}}function si(e){for(var t=e.e*mn,r=e.d[0];r>=10;r/=10)t++;return t}function tP(e,t,r){if(t>e.LN10.sd())throw Mn=!0,r&&(e.precision=r),Error(Da+"LN10 precision limit exceeded");return Yr(new e(e.LN10),t)}function Ac(e){for(var t="";e--;)t+="0";return t}function lv(e,t){var r,n,i,s,a,o,l,c,d,u=1,f=10,p=e,m=p.d,g=p.constructor,x=g.precision;if(p.s<1)throw Error(Da+(p.s?"NaN":"-Infinity"));if(p.eq(ra))return new g(0);if(t==null?(Mn=!1,c=x):c=t,p.eq(10))return t==null&&(Mn=!0),tP(g,c);if(c+=f,g.precision=c,r=Go(m),n=r.charAt(0),s=si(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Go(p.d),n=r.charAt(0),u++;s=si(p),n>1?(p=new g("0."+r),s++):p=new g(n+"."+r.slice(1))}else return l=tP(g,c+2,x).times(s+""),p=lv(new g(n+"."+r.slice(1)),c-f).plus(l),g.precision=x,t==null?(Mn=!0,Yr(p,x)):p;for(o=a=p=Ll(p.minus(ra),p.plus(ra),c),d=Yr(p.times(p),c),i=3;;){if(a=Yr(a.times(d),c),l=o.plus(Ll(a,new g(i),c)),Go(l.d).slice(0,c)===Go(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(tP(g,c+2,x).times(s+""))),o=Ll(o,new g(u),c),g.precision=x,t==null?(Mn=!0,Yr(o,x)):o;o=l,i+=2}}function H5(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=gm(r/mn),e.d=[],n=(r+1)%mn,r<0&&(n+=mn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=mn;n<i;)e.d.push(+t.slice(n,n+=mn));t=t.slice(n),n=mn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Mn&&(e.e>vw||e.e<-vw))throw Error($I+r)}else e.s=0,e.e=0,e.d=[0];return e}function Yr(e,t,r){var n,i,s,a,o,l,c,d,u=e.d;for(a=1,s=u[0];s>=10;s/=10)a++;if(n=t-a,n<0)n+=mn,i=t,c=u[d=0];else{if(d=Math.ceil((n+1)/mn),s=u.length,d>=s)return e;for(c=s=u[d],a=1;s>=10;s/=10)a++;n%=mn,i=n-mn+a}if(r!==void 0&&(s=hd(10,a-i-1),o=c/s%10|0,l=t<0||u[d+1]!==void 0||c%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/hd(10,a-i):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return l?(s=si(e),u.length=1,t=t-s-1,u[0]=hd(10,(mn-t%mn)%mn),e.e=gm(-t/mn)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(n==0?(u.length=d,s=1,d--):(u.length=d+1,s=hd(10,mn-n),u[d]=i>0?(c/hd(10,a-i)%hd(10,i)|0)*s:0),l)for(;;)if(d==0){(u[0]+=s)==Ei&&(u[0]=1,++e.e);break}else{if(u[d]+=s,u[d]!=Ei)break;u[d--]=0,s=1}for(n=u.length;u[--n]===0;)u.pop();if(Mn&&(e.e>vw||e.e<-vw))throw Error($I+si(e));return e}function fte(e,t){var r,n,i,s,a,o,l,c,d,u,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Mn?Yr(t,p):t;if(l=e.d,u=t.d,n=t.e,c=e.e,l=l.slice(),a=c-n,a){for(d=a<0,d?(r=l,a=-a,o=u.length):(r=u,n=c,o=l.length),i=Math.max(Math.ceil(p/mn),o)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=u.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=u[i]){d=l[i]<u[i];break}a=0}for(d&&(r=l,l=u,u=r,t.s=-t.s),o=l.length,i=u.length-o;i>0;--i)l[o++]=0;for(i=u.length;i>a;){if(l[--i]<u[i]){for(s=i;s&&l[--s]===0;)l[s]=Ei-1;--l[s],l[i]+=Ei}l[i]-=u[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Mn?Yr(t,p):t):new f(0)}function Jd(e,t,r){var n,i=si(e),s=Go(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ac(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ac(-i-1)+s,r&&(n=r-a)>0&&(s+=Ac(n))):i>=a?(s+=Ac(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+Ac(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=Ac(n))),e.s<0?"-"+s:s}function K5(e,t){if(e.length>t)return e.length=t,!0}function hte(e){var t,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Bd+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return H5(a,s.toString())}else if(typeof s!="string")throw Error(Bd+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,dBe.test(s))H5(a,s);else throw Error(Bd+s)}if(i.prototype=Tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hte,i.config=i.set=fBe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function fBe(e){if(!e||typeof e!="object")throw Error(Da+"Object expected");var t,r,n,i=["precision",1,mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(gm(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Bd+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bd+r+": "+n);return this}var II=hte(uBe);ra=new II(1);const Gr=II;function hBe(e){return yBe(e)||gBe(e)||mBe(e)||pBe()}function pBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mBe(e,t){if(e){if(typeof e=="string")return Wj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(e,t)}}function gBe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yBe(e){if(Array.isArray(e))return Wj(e)}function Wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vBe=function(t){return t},pte={"@@functional/placeholder":!0},mte=function(t){return t===pte},q5=function(t){return function r(){return arguments.length===0||arguments.length===1&&mte(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},_Be=function e(t,r){return t===1?r:q5(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==pte}).length;return a>=t?r.apply(void 0,i):e(t-a,q5(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=i.map(function(u){return mte(u)?l.shift():u});return r.apply(void 0,hBe(d).concat(l))}))})},OT=function(t){return _Be(t.length,t)},Gj=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},xBe=OT(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),bBe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return vBe;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},Hj=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},gte=function(t){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r&&s.every(function(o,l){return o===r[l]})||(r=s,n=t.apply(void 0,s)),n}};function wBe(e){var t;return e===0?t=1:t=Math.floor(new Gr(e).abs().log(10).toNumber())+1,t}function TBe(e,t,r){for(var n=new Gr(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var MBe=OT(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),kBe=OT(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),SBe=OT(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const $T={rangeStep:TBe,getDigitCount:wBe,interpolateNumber:MBe,uninterpolateNumber:kBe,uninterpolateTruncation:SBe};function Kj(e){return CBe(e)||EBe(e)||yte(e)||PBe()}function PBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EBe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function CBe(e){if(Array.isArray(e))return qj(e)}function cv(e,t){return OBe(e)||ABe(e,t)||yte(e,t)||jBe()}function jBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yte(e,t){if(e){if(typeof e=="string")return qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(e,t)}}function qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ABe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,s=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function OBe(e){if(Array.isArray(e))return e}function vte(e){var t=cv(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function _te(e,t,r){if(e.lte(0))return new Gr(0);var n=$T.getDigitCount(e.toNumber()),i=new Gr(10).pow(n),s=e.div(i),a=n!==1?.05:.1,o=new Gr(Math.ceil(s.div(a).toNumber())).add(r).mul(a),l=o.mul(i);return t?l:new Gr(Math.ceil(l))}function $Be(e,t,r){var n=1,i=new Gr(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new Gr(10).pow($T.getDigitCount(e)-1),i=new Gr(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Gr(Math.floor(e)))}else e===0?i=new Gr(Math.floor((t-1)/2)):r||(i=new Gr(Math.floor(e)));var a=Math.floor((t-1)/2),o=bBe(xBe(function(l){return i.add(new Gr(l-a).mul(n)).toNumber()}),Gj);return o(0,t)}function xte(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Gr(0),tickMin:new Gr(0),tickMax:new Gr(0)};var s=_te(new Gr(t).sub(e).div(r-1),n,i),a;e<=0&&t>=0?a=new Gr(0):(a=new Gr(e).add(t).div(2),a=a.sub(new Gr(a).mod(s)));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new Gr(t).sub(a).div(s).toNumber()),c=o+l+1;return c>r?xte(e,t,r,n,i+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:s,tickMin:a.sub(new Gr(o).mul(s)),tickMax:a.add(new Gr(l).mul(s))})}function IBe(e){var t=cv(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=vte([r,n]),l=cv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0){var u=d===1/0?[c].concat(Kj(Gj(0,i-1).map(function(){return 1/0}))):[].concat(Kj(Gj(0,i-1).map(function(){return-1/0})),[d]);return r>n?Hj(u):u}if(c===d)return $Be(c,i,s);var f=xte(c,d,a,s),p=f.step,m=f.tickMin,g=f.tickMax,x=$T.rangeStep(m,g.add(new Gr(.1).mul(p)),p);return r>n?Hj(x):x}function NBe(e,t){var r=cv(e,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=vte([n,i]),o=cv(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var d=Math.max(t,2),u=_te(new Gr(c).sub(l).div(d-1),s,0),f=[].concat(Kj($T.rangeStep(new Gr(l),new Gr(c).sub(new Gr(.99).mul(u)),u)),[c]);return n>i?Hj(f):f}var DBe=gte(IBe),RBe=gte(NBe),LBe="Invariant failed";function ef(e,t){throw new Error(LBe)}var FBe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_w.apply(this,arguments)}function BBe(e,t){return WBe(e)||UBe(e,t)||VBe(e,t)||zBe()}function zBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VBe(e,t){if(e){if(typeof e=="string")return X5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X5(e,t)}}function X5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UBe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function WBe(e){if(Array.isArray(e))return e}function GBe(e,t){if(e==null)return{};var r=HBe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function KBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tte(n.key),n)}}function XBe(e,t,r){return t&&qBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YBe(e,t,r){return t=xw(t),QBe(e,bte()?Reflect.construct(t,r||[],xw(e).constructor):t.apply(e,r))}function QBe(e,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZBe(e)}function ZBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bte=function(){return!!e})()}function xw(e){return xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xw(e)}function JBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Xj(e,t)}function wte(e,t,r){return t=Tte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tte(e){var t=e4e(e,"string");return Mp(t)=="symbol"?t:t+""}function e4e(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IT=function(e){function t(){return KBe(this,t),YBe(this,t,arguments)}return JBe(t,e),XBe(t,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,a=n.width,o=n.dataKey,l=n.data,c=n.dataPointFormatter,d=n.xAxis,u=n.yAxis,f=GBe(n,FBe),p=Qt(f,!1);this.props.direction==="x"&&d.type!=="number"&&ef();var m=l.map(function(g){var x=c(g,o),v=x.x,y=x.y,w=x.value,b=x.errorVal;if(!b)return null;var _=[],T,M;if(Array.isArray(b)){var k=BBe(b,2);T=k[0],M=k[1]}else T=M=b;if(s==="vertical"){var j=d.scale,A=y+i,R=A+a,I=A-a,$=j(w-T),F=j(w+M);_.push({x1:F,y1:R,x2:F,y2:I}),_.push({x1:$,y1:A,x2:F,y2:A}),_.push({x1:$,y1:R,x2:$,y2:I})}else if(s==="horizontal"){var V=u.scale,G=v+i,H=G-a,B=G+a,te=V(w-T),ae=V(w+M);_.push({x1:H,y1:ae,x2:B,y2:ae}),_.push({x1:G,y1:te,x2:G,y2:ae}),_.push({x1:H,y1:te,x2:B,y2:te})}return se.createElement(zr,_w({className:"recharts-errorBar",key:"bar-".concat(_.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},p),_.map(function(z){return se.createElement("line",_w({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return se.createElement(zr,{className:"recharts-errorBars"},m)}}])}(se.Component);wte(IT,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});wte(IT,"displayName","ErrorBar");function uv(e){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(n){t4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t4e(e,t,r){return t=r4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r4e(e){var t=n4e(e,"string");return uv(t)=="symbol"?t:t+""}function n4e(e,t){if(uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mte=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,a=Qs(r,Uh);if(!a)return null;var o=Uh.defaultProps,l=o!==void 0?ed(ed({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(n||[]).reduce(function(d,u){var f=u.item,p=u.props,m=p.sectors||p.data||[];return d.concat(m.map(function(g){return{type:a.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(n||[]).map(function(d){var u=d.item,f=u.type.defaultProps,p=f!==void 0?ed(ed({},f),u.props):{},m=p.dataKey,g=p.name,x=p.legendType,v=p.hide;return{inactive:v,dataKey:m,type:l.iconType||x||"square",color:NI(u),value:g||m,payload:p}}),ed(ed(ed({},l),Uh.getWithHeight(a,i)),{},{payload:c,item:a})};function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function Q5(e){return o4e(e)||a4e(e)||s4e(e)||i4e()}function i4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s4e(e,t){if(e){if(typeof e=="string")return Yj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yj(e,t)}}function a4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o4e(e){if(Array.isArray(e))return Yj(e)}function Yj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(r),!0).forEach(function(n){Gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gh(e,t,r){return t=l4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l4e(e){var t=c4e(e,"string");return dv(t)=="symbol"?t:t+""}function c4e(e,t){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ns(e,t,r){return vr(e)||vr(t)?r:xi(t)?oa(e,t,r):lr(t)?t(e):r}function cy(e,t,r,n){var i=aBe(e,function(o){return ns(o,t)});if(r==="number"){var s=i.filter(function(o){return dt(o)||parseFloat(o)});return s.length?[jT(s),CT(s)]:[1/0,-1/0]}var a=n?i.filter(function(o){return!vr(o)}):i;return a.map(function(o){return xi(o)||o instanceof Date?o:""})}var u4e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var d=c>0?i[c-1].coordinate:i[o-1].coordinate,u=i[c].coordinate,f=c>=o-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(bs(u-d)!==bs(f-u)){var m=[];if(bs(f-u)===bs(l[1]-l[0])){p=f;var g=u+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{p=d;var x=f+l[1]-l[0];m[0]=Math.min(u,(x+u)/2),m[1]=Math.max(u,(x+u)/2)}var v=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(t>v[0]&&t<=v[1]||t>=m[0]&&t<=m[1]){a=i[c].index;break}}else{var y=Math.min(d,f),w=Math.max(d,f);if(t>(y+u)/2&&t<=(w+u)/2){a=i[c].index;break}}}else for(var b=0;b<o;b++)if(b===0&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<o-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===o-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){a=n[b].index;break}return a},NI=function(t){var r,n=t,i=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},d4e=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var d=s[o[l]].stackGroups,u=Object.keys(d),f=0,p=u.length;f<p;f++){var m=d[u[f]],g=m.items,x=m.cateAxisId,v=g.filter(function(M){return Nl(M.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?Fn(Fn({},y),v[0].props):v[0].props,b=w.barSize,_=w[x];a[_]||(a[_]=[]);var T=vr(b)?r:b;a[_].push({item:v[0],stackList:v.slice(1),barSize:vr(T)?void 0:ws(T,n,0)})}}return a},f4e=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,s=t.sizeList,a=s===void 0?[]:s,o=t.maxBarSize,l=a.length;if(l<1)return null;var c=ws(r,i,0,!0),d,u=[];if(a[0].barSize===+a[0].barSize){var f=!1,p=i/l,m=a.reduce(function(b,_){return b+_.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(f=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,x={offset:g-c,size:0};d=a.reduce(function(b,_){var T={item:_.item,position:{offset:x.offset+x.size+c,size:f?p:_.barSize}},M=[].concat(Q5(b),[T]);return x=M[M.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(k){M.push({item:k,position:x})}),M},u)}else{var v=ws(n,i,0,!0);i-2*v-(l-1)*c<=0&&(c=0);var y=(i-2*v-(l-1)*c)/l;y>1&&(y>>=0);var w=o===+o?Math.min(y,o):y;d=a.reduce(function(b,_,T){var M=[].concat(Q5(b),[{item:_.item,position:{offset:v+(y+c)*T+(y-w)/2,size:w}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(k){M.push({item:k,position:M[M.length-1].position})}),M},u)}return d},h4e=function(t,r,n,i){var s=n.children,a=n.width,o=n.margin,l=a-(o.left||0)-(o.right||0),c=Mte({children:s,legendWidth:l});if(c){var d=i||{},u=d.width,f=d.height,p=c.align,m=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&dt(t[p]))return Fn(Fn({},t),{},Gh({},p,t[p]+(u||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&dt(t[m]))return Fn(Fn({},t),{},Gh({},m,t[m]+(f||0)))}return t},p4e=function(t,r,n){return vr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},kte=function(t,r,n,i,s){var a=r.props.children,o=Oa(a,IT).filter(function(c){return p4e(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return t.reduce(function(c,d){var u=ns(d,n);if(vr(u))return c;var f=Array.isArray(u)?[jT(u),CT(u)]:[u,u],p=l.reduce(function(m,g){var x=ns(d,g,0),v=f[0]-Math.abs(Array.isArray(x)?x[0]:x),y=f[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,m[0]),Math.max(y,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},m4e=function(t,r,n,i,s){var a=r.map(function(o){return kte(t,o,n,s,i)}).filter(function(o){return!vr(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},Ste=function(t,r,n,i,s){var a=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&kte(t,l,c,i)||cy(t,c,n,s)});if(n==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var d=0,u=c.length;d<u;d++)o[c[d]]||(o[c[d]]=!0,l.push(c[d]));return l},[])},Pte=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Ed=function(t,r,n){if(!t)return null;var i=t.scale,s=t.duplicateDomain,a=t.type,o=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?bs(o[0]-o[1])*2*c:c,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(u){var f=s?s.indexOf(u):u;return{coordinate:i(f)+c,value:u,offset:c}});return d.filter(function(u){return!g_(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,f){return{coordinate:i(u)+c,value:u,index:f,offset:c}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(u){return{coordinate:i(u)+c,value:u,offset:c}}):i.domain().map(function(u,f){return{coordinate:i(u)+c,value:s?s[u]:u,index:f,offset:c}})},rP=new WeakMap,ox=function(t,r){if(typeof r!="function")return t;rP.has(t)||rP.set(t,new WeakMap);var n=rP.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},Ete=function(t,r,n){var i=t.scale,s=t.type,a=t.layout,o=t.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:nv(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:pw(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ly(),realScaleType:"point"}:s==="category"?{scale:nv(),realScaleType:"band"}:{scale:pw(),realScaleType:"linear"};if(m_(i)){var l="scale".concat(pT(i));return{scale:(G5[l]||ly)(),realScaleType:G5[l]?l:"point"}}return lr(i)?{scale:i}:{scale:ly(),realScaleType:"point"}},J5=1e-4,Cte=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),s=Math.min(i[0],i[1])-J5,a=Math.max(i[0],i[1])+J5,o=t(r[0]),l=t(r[n-1]);(o<s||o>a||l<s||l>a)&&t.domain([r[0],r[n-1]])}},g4e=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},y4e=function(t,r){if(!r||r.length!==2||!dt(r[0])||!dt(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!dt(t[0])||t[0]<n)&&(s[0]=n),(!dt(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},v4e=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,a=0,o=0;o<r;++o){var l=g_(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1]):(t[o][n][0]=a,t[o][n][1]=a+l,a=t[o][n][1])}},_4e=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,a=0;a<r;++a){var o=g_(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},x4e={sign:v4e,expand:LCe,none:gp,silhouette:FCe,wiggle:BCe,positive:_4e},b4e=function(t,r,n){var i=r.map(function(o){return o.props.dataKey}),s=x4e[n],a=RCe().keys(i).value(function(o,l){return+ns(o,l,0)}).order(bj).offset(s);return a(t)},w4e=function(t,r,n,i,s,a){if(!t)return null;var o=a?r.reverse():r,l={},c=o.reduce(function(u,f){var p,m=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Fn(Fn({},f.type.defaultProps),f.props):f.props,g=m.stackId,x=m.hide;if(x)return u;var v=m[n],y=u[v]||{hasStack:!1,stackGroups:{}};if(xi(g)){var w=y.stackGroups[g]||{numericAxisId:n,cateAxisId:i,items:[]};w.items.push(f),y.hasStack=!0,y.stackGroups[g]=w}else y.stackGroups[y_("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return Fn(Fn({},u),{},Gh({},v,y))},l),d={};return Object.keys(c).reduce(function(u,f){var p=c[f];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,x){var v=p.stackGroups[x];return Fn(Fn({},g),{},Gh({},x,{numericAxisId:n,cateAxisId:i,items:v.items,stackedData:b4e(t,v.items,s)}))},m)}return Fn(Fn({},u),{},Gh({},f,p))},d)},jte=function(t,r){var n=r.realScaleType,i=r.type,s=r.tickCount,a=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=t.domain();if(!c.length)return null;var d=DBe(c,s,o);return t.domain([jT(d),CT(d)]),{niceTicks:d}}if(s&&i==="number"){var u=t.domain(),f=RBe(u,s,o);return{niceTicks:f}}return null},e8=function(t){var r=t.axis,n=t.ticks,i=t.offset,s=t.bandSize,a=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=ns(a,r.dataKey,r.domain[o]);return vr(l)?null:r.scale(l)-s/2+i},T4e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},M4e=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(xi(s)){var a=r[s];if(a){var o=a.items.indexOf(t);return o>=0?a.stackedData[o]:null}}return null},k4e=function(t){return t.reduce(function(r,n){return[jT(n.concat([r[0]]).filter(dt)),CT(n.concat([r[1]]).filter(dt))]},[1/0,-1/0])},Ate=function(t,r,n){return Object.keys(t).reduce(function(i,s){var a=t[s],o=a.stackedData,l=o.reduce(function(c,d){var u=k4e(d.slice(r,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},t8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qj=function(t,r,n){if(lr(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(dt(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(t8.test(t[0])){var s=+t8.exec(t[0])[1];i[0]=r[0]-s}else lr(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(dt(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(r8.test(t[1])){var a=+r8.exec(t[1])[1];i[1]=r[1]+a}else lr(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},bw=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var s=cI(r,function(u){return u.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];a=Math.min((c.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},n8=function(t,r,n){return!t||!t.length||AT(t,oa(n,"type.defaultProps.domain"))?r:t},Ote=function(t,r){var n=t.type.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,i=n.dataKey,s=n.name,a=n.unit,o=n.formatter,l=n.tooltipType,c=n.chartType,d=n.hide;return Fn(Fn({},Qt(t,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:NI(t),value:ns(r,i),type:l,payload:r,chartType:c,hide:d})};function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function i8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(r),!0).forEach(function(n){$te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $te(e,t,r){return t=S4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S4e(e){var t=P4e(e,"string");return fv(t)=="symbol"?t:t+""}function P4e(e,t){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E4e(e,t){return O4e(e)||A4e(e,t)||j4e(e,t)||C4e()}function C4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j4e(e,t){if(e){if(typeof e=="string")return s8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s8(e,t)}}function s8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function O4e(e){if(Array.isArray(e))return e}var ww=Math.PI/180,$4e=function(t){return t*180/Math.PI},an=function(t,r,n,i){return{x:t+Math.cos(-ww*i)*n,y:r+Math.sin(-ww*i)*n}},Ite=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},I4e=function(t,r,n,i,s){var a=t.width,o=t.height,l=t.startAngle,c=t.endAngle,d=ws(t.cx,a,a/2),u=ws(t.cy,o,o/2),f=Ite(a,o,n),p=ws(t.innerRadius,f,0),m=ws(t.outerRadius,f,f*.8),g=Object.keys(r);return g.reduce(function(x,v){var y=r[v],w=y.domain,b=y.reversed,_;if(vr(y.range))i==="angleAxis"?_=[l,c]:i==="radiusAxis"&&(_=[p,m]),b&&(_=[_[1],_[0]]);else{_=y.range;var T=_,M=E4e(T,2);l=M[0],c=M[1]}var k=Ete(y,s),j=k.realScaleType,A=k.scale;A.domain(w).range(_),Cte(A);var R=jte(A,Ml(Ml({},y),{},{realScaleType:j})),I=Ml(Ml(Ml({},y),R),{},{range:_,radius:m,realScaleType:j,scale:A,cx:d,cy:u,innerRadius:p,outerRadius:m,startAngle:l,endAngle:c});return Ml(Ml({},x),{},$te({},v,I))},{})},N4e=function(t,r){var n=t.x,i=t.y,s=r.x,a=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-a,2))},D4e=function(t,r){var n=t.x,i=t.y,s=r.cx,a=r.cy,o=N4e({x:n,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(n-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:$4e(c),angleInRadian:c}},R4e=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),a=Math.min(i,s);return{startAngle:r-a*360,endAngle:n-a*360}},L4e=function(t,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),a=Math.floor(i/360),o=Math.min(s,a);return t+o*360},a8=function(t,r){var n=t.x,i=t.y,s=D4e({x:n,y:i},r),a=s.radius,o=s.angle,l=r.innerRadius,c=r.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var d=R4e(r),u=d.startAngle,f=d.endAngle,p=o,m;if(u<=f){for(;p>f;)p-=360;for(;p<u;)p+=360;m=p>=u&&p<=f}else{for(;p>u;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=u}return m?Ml(Ml({},r),{},{radius:a,angle:L4e(p,r)}):null},Nte=function(t){return!E.isValidElement(t)&&!lr(t)&&typeof t!="boolean"?t.className:""};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}var F4e=["offset"];function B4e(e){return W4e(e)||U4e(e)||V4e(e)||z4e()}function z4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4e(e,t){if(e){if(typeof e=="string")return Zj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zj(e,t)}}function U4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W4e(e){if(Array.isArray(e))return Zj(e)}function Zj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G4e(e,t){if(e==null)return{};var r=H4e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o8(Object(r),!0).forEach(function(n){K4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K4e(e,t,r){return t=q4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q4e(e){var t=X4e(e,"string");return hv(t)=="symbol"?t:t+""}function X4e(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pv.apply(this,arguments)}var Y4e=function(t){var r=t.value,n=t.formatter,i=vr(t.children)?r:t.children;return lr(n)?n(i):i},Q4e=function(t,r){var n=bs(r-t),i=Math.min(Math.abs(r-t),360);return n*i},Z4e=function(t,r,n){var i=t.position,s=t.viewBox,a=t.offset,o=t.className,l=s,c=l.cx,d=l.cy,u=l.innerRadius,f=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,x=(u+f)/2,v=Q4e(p,m),y=v>=0?1:-1,w,b;i==="insideStart"?(w=p+y*a,b=g):i==="insideEnd"?(w=m-y*a,b=!g):i==="end"&&(w=m+y*a,b=g),b=v<=0?b:!b;var _=an(c,d,x,w),T=an(c,d,x,w+(b?1:-1)*359),M="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(b?0:1,`,
    `).concat(T.x,",").concat(T.y),k=vr(t.id)?y_("recharts-radial-line-"):t.id;return se.createElement("text",pv({},n,{dominantBaseline:"central",className:dr("recharts-radial-bar-label",o)}),se.createElement("defs",null,se.createElement("path",{id:k,d:M})),se.createElement("textPath",{xlinkHref:"#".concat(k)},r))},J4e=function(t){var r=t.viewBox,n=t.offset,i=t.position,s=r,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,d=s.startAngle,u=s.endAngle,f=(d+u)/2;if(i==="outside"){var p=an(a,o,c+n,f),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+c)/2,v=an(a,o,x,f),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},eze=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,s=t.position,a=r,o=a.x,l=a.y,c=a.width,d=a.height,u=d>=0?1:-1,f=u*i,p=u>0?"end":"start",m=u>0?"start":"end",g=c>=0?1:-1,x=g*i,v=g>0?"end":"start",y=g>0?"start":"end";if(s==="top"){var w={x:o+c/2,y:l-u*i,textAnchor:"middle",verticalAnchor:p};return pi(pi({},w),n?{height:Math.max(l-n.y,0),width:c}:{})}if(s==="bottom"){var b={x:o+c/2,y:l+d+f,textAnchor:"middle",verticalAnchor:m};return pi(pi({},b),n?{height:Math.max(n.y+n.height-(l+d),0),width:c}:{})}if(s==="left"){var _={x:o-x,y:l+d/2,textAnchor:v,verticalAnchor:"middle"};return pi(pi({},_),n?{width:Math.max(_.x-n.x,0),height:d}:{})}if(s==="right"){var T={x:o+c+x,y:l+d/2,textAnchor:y,verticalAnchor:"middle"};return pi(pi({},T),n?{width:Math.max(n.x+n.width-T.x,0),height:d}:{})}var M=n?{width:c,height:d}:{};return s==="insideLeft"?pi({x:o+x,y:l+d/2,textAnchor:y,verticalAnchor:"middle"},M):s==="insideRight"?pi({x:o+c-x,y:l+d/2,textAnchor:v,verticalAnchor:"middle"},M):s==="insideTop"?pi({x:o+c/2,y:l+f,textAnchor:"middle",verticalAnchor:m},M):s==="insideBottom"?pi({x:o+c/2,y:l+d-f,textAnchor:"middle",verticalAnchor:p},M):s==="insideTopLeft"?pi({x:o+x,y:l+f,textAnchor:y,verticalAnchor:m},M):s==="insideTopRight"?pi({x:o+c-x,y:l+f,textAnchor:v,verticalAnchor:m},M):s==="insideBottomLeft"?pi({x:o+x,y:l+d-f,textAnchor:y,verticalAnchor:p},M):s==="insideBottomRight"?pi({x:o+c-x,y:l+d-f,textAnchor:v,verticalAnchor:p},M):om(s)&&(dt(s.x)||kd(s.x))&&(dt(s.y)||kd(s.y))?pi({x:o+ws(s.x,c),y:l+ws(s.y,d),textAnchor:"end",verticalAnchor:"end"},M):pi({x:o+c/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},M)},tze=function(t){return"cx"in t&&dt(t.cx)};function ji(e){var t=e.offset,r=t===void 0?5:t,n=G4e(e,F4e),i=pi({offset:r},n),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,d=i.className,u=d===void 0?"":d,f=i.textBreakAll;if(!s||vr(o)&&vr(l)&&!E.isValidElement(c)&&!lr(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(lr(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=Y4e(i);var m=tze(s),g=Qt(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Z4e(i,p,g);var x=m?J4e(i):eze(i);return se.createElement(Zd,pv({className:dr("recharts-label",u)},g,x,{breakAll:f}),p)}ji.displayName="Label";var Dte=function(t){var r=t.cx,n=t.cy,i=t.angle,s=t.startAngle,a=t.endAngle,o=t.r,l=t.radius,c=t.innerRadius,d=t.outerRadius,u=t.x,f=t.y,p=t.top,m=t.left,g=t.width,x=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(dt(g)&&dt(x)){if(dt(u)&&dt(f))return{x:u,y:f,width:g,height:x};if(dt(p)&&dt(m))return{x:p,y:m,width:g,height:x}}return dt(u)&&dt(f)?{x:u,y:f,width:0,height:0}:dt(r)&&dt(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:v}:t.viewBox?t.viewBox:{}},rze=function(t,r){return t?t===!0?se.createElement(ji,{key:"label-implicit",viewBox:r}):xi(t)?se.createElement(ji,{key:"label-implicit",viewBox:r,value:t}):E.isValidElement(t)?t.type===ji?E.cloneElement(t,{key:"label-implicit",viewBox:r}):se.createElement(ji,{key:"label-implicit",content:t,viewBox:r}):lr(t)?se.createElement(ji,{key:"label-implicit",content:t,viewBox:r}):om(t)?se.createElement(ji,pv({viewBox:r},t,{key:"label-implicit"})):null:null},nze=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,s=Dte(t),a=Oa(i,ji).map(function(l,c){return E.cloneElement(l,{viewBox:r||s,key:"label-".concat(c)})});if(!n)return a;var o=rze(t.label,r||s);return[o].concat(B4e(a))};ji.parseViewBox=Dte;ji.renderCallByParent=nze;function ize(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var sze=ize;const aze=Ir(sze);function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}var oze=["valueAccessor"],lze=["data","dataKey","clockWise","id","textBreakAll"];function cze(e){return hze(e)||fze(e)||dze(e)||uze()}function uze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dze(e,t){if(e){if(typeof e=="string")return Jj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jj(e,t)}}function fze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hze(e){if(Array.isArray(e))return Jj(e)}function Jj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tw.apply(this,arguments)}function l8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function c8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(r),!0).forEach(function(n){pze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pze(e,t,r){return t=mze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mze(e){var t=gze(e,"string");return mv(t)=="symbol"?t:t+""}function gze(e,t){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u8(e,t){if(e==null)return{};var r=yze(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yze(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vze=function(t){return Array.isArray(t.value)?aze(t.value):t.value};function su(e){var t=e.valueAccessor,r=t===void 0?vze:t,n=u8(e,oze),i=n.data,s=n.dataKey,a=n.clockWise,o=n.id,l=n.textBreakAll,c=u8(n,lze);return!i||!i.length?null:se.createElement(zr,{className:"recharts-label-list"},i.map(function(d,u){var f=vr(s)?r(d,u):ns(d&&d.payload,s),p=vr(o)?{}:{id:"".concat(o,"-").concat(u)};return se.createElement(ji,Tw({},Qt(d,!0),c,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:ji.parseViewBox(vr(a)?d:c8(c8({},d),{},{clockWise:a})),key:"label-".concat(u),index:u}))}))}su.displayName="LabelList";function _ze(e,t){return e?e===!0?se.createElement(su,{key:"labelList-implicit",data:t}):se.isValidElement(e)||lr(e)?se.createElement(su,{key:"labelList-implicit",data:t,content:e}):om(e)?se.createElement(su,Tw({data:t},e,{key:"labelList-implicit"})):null:null}function xze(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=Oa(n,su).map(function(a,o){return E.cloneElement(a,{data:t,key:"labelList-".concat(o)})});if(!r)return i;var s=_ze(e.label,t);return[s].concat(cze(i))}su.renderCallByParent=xze;function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e2.apply(this,arguments)}function d8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function f8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(r),!0).forEach(function(n){bze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bze(e,t,r){return t=wze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wze(e){var t=Tze(e,"string");return gv(t)=="symbol"?t:t+""}function Tze(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mze=function(t,r){var n=bs(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},lx=function(t){var r=t.cx,n=t.cy,i=t.radius,s=t.angle,a=t.sign,o=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,d=l*(o?1:-1)+i,u=Math.asin(l/d)/ww,f=c?s:s+a*u,p=an(r,n,d,f),m=an(r,n,i,f),g=c?s-a*u:s,x=an(r,n,d*Math.cos(u*ww),g);return{center:p,circleTangency:m,lineTangency:x,theta:u}},Rte=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.startAngle,o=t.endAngle,l=Mze(a,o),c=a+l,d=an(r,n,s,a),u=an(r,n,s,c),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(i>0){var p=an(r,n,i,a),m=an(r,n,i,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},kze=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=bs(d-c),f=lx({cx:r,cy:n,radius:s,angle:c,sign:u,cornerRadius:a,cornerIsExternal:l}),p=f.circleTangency,m=f.lineTangency,g=f.theta,x=lx({cx:r,cy:n,radius:s,angle:d,sign:-u,cornerRadius:a,cornerIsExternal:l}),v=x.circleTangency,y=x.lineTangency,w=x.theta,b=l?Math.abs(c-d):Math.abs(c-d)-g-w;if(b<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Rte({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:d});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var T=lx({cx:r,cy:n,radius:i,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),M=T.circleTangency,k=T.lineTangency,j=T.theta,A=lx({cx:r,cy:n,radius:i,angle:d,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=A.circleTangency,I=A.lineTangency,$=A.theta,F=l?Math.abs(c-d):Math.abs(c-d)-j-$;if(F<0&&a===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(F>180),",").concat(+(u>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},Sze={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Lte=function(t){var r=f8(f8({},Sze),t),n=r.cx,i=r.cy,s=r.innerRadius,a=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,u=r.endAngle,f=r.className;if(a<s||d===u)return null;var p=dr("recharts-sector",f),m=a-s,g=ws(o,m,0,!0),x;return g>0&&Math.abs(d-u)<360?x=kze({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):x=Rte({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:u}),se.createElement("path",e2({},Qt(r,!0),{className:p,d:x,role:"img"}))};function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function t2(){return t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t2.apply(this,arguments)}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function p8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(n){Pze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pze(e,t,r){return t=Eze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eze(e){var t=Cze(e,"string");return yv(t)=="symbol"?t:t+""}function Cze(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m8={curveBasisClosed:SCe,curveBasisOpen:PCe,curveBasis:kCe,curveBumpX:dCe,curveBumpY:fCe,curveLinearClosed:ECe,curveLinear:gT,curveMonotoneX:CCe,curveMonotoneY:jCe,curveNatural:ACe,curveStep:OCe,curveStepAfter:ICe,curveStepBefore:$Ce},cx=function(t){return t.x===+t.x&&t.y===+t.y},hg=function(t){return t.x},pg=function(t){return t.y},jze=function(t,r){if(lr(t))return t;var n="curve".concat(pT(t));return(n==="curveMonotone"||n==="curveBump")&&r?m8["".concat(n).concat(r==="vertical"?"Y":"X")]:m8[n]||gT},Aze=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,a=t.baseLine,o=t.layout,l=t.connectNulls,c=l===void 0?!1:l,d=jze(n,o),u=c?s.filter(function(g){return cx(g)}):s,f;if(Array.isArray(a)){var p=c?a.filter(function(g){return cx(g)}):a,m=u.map(function(g,x){return p8(p8({},g),{},{base:p[x]})});return o==="vertical"?f=J0().y(pg).x1(hg).x0(function(g){return g.base.x}):f=J0().x(hg).y1(pg).y0(function(g){return g.base.y}),f.defined(cx).curve(d),f(m)}return o==="vertical"&&dt(a)?f=J0().y(pg).x1(hg).x0(a):dt(a)?f=J0().x(hg).y1(pg).y0(a):f=IJ().x(hg).y(pg),f.defined(cx).curve(d),f(u)},r2=function(t){var r=t.className,n=t.points,i=t.path,s=t.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?Aze(t):i;return se.createElement("path",t2({},Qt(t,!1),qb(t),{className:dr("recharts-curve",r),d:a,ref:s}))},Fte={exports:{}},Oze="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$ze=Oze,Ize=$ze;function Bte(){}function zte(){}zte.resetWarningCache=Bte;var Nze=function(){function e(n,i,s,a,o,l){if(l!==Ize){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zte,resetWarningCache:Bte};return r.PropTypes=r,r};Fte.exports=Nze();var Dze=Fte.exports;const or=Ir(Dze);var Rze=Object.getOwnPropertyNames,Lze=Object.getOwnPropertySymbols,Fze=Object.prototype.hasOwnProperty;function g8(e,t){return function(n,i,s){return e(n,i,s)&&t(n,i,s)}}function ux(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var s=i.cache,a=s.get(r),o=s.get(n);if(a&&o)return a===n&&o===r;s.set(r,n),s.set(n,r);var l=e(r,n,i);return s.delete(r),s.delete(n),l}}function y8(e){return Rze(e).concat(Lze(e))}var Vte=Object.hasOwn||function(e,t){return Fze.call(e,t)};function ym(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Ute="_owner",v8=Object.getOwnPropertyDescriptor,_8=Object.keys;function Bze(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function zze(e,t){return ym(e.getTime(),t.getTime())}function x8(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),s=0,a,o;(a=i.next())&&!a.done;){for(var l=t.entries(),c=!1,d=0;(o=l.next())&&!o.done;){var u=a.value,f=u[0],p=u[1],m=o.value,g=m[0],x=m[1];!c&&!n[d]&&(c=r.equals(f,g,s,d,e,t,r)&&r.equals(p,x,f,g,e,t,r))&&(n[d]=!0),d++}if(!c)return!1;s++}return!0}function Vze(e,t,r){var n=_8(e),i=n.length;if(_8(t).length!==i)return!1;for(var s;i-- >0;)if(s=n[i],s===Ute&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Vte(t,s)||!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function mg(e,t,r){var n=y8(e),i=n.length;if(y8(t).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=n[i],s===Ute&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Vte(t,s)||!r.equals(e[s],t[s],s,s,e,t,r)||(a=v8(e,s),o=v8(t,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function Uze(e,t){return ym(e.valueOf(),t.valueOf())}function Wze(e,t){return e.source===t.source&&e.flags===t.flags}function b8(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),s,a;(s=i.next())&&!s.done;){for(var o=t.values(),l=!1,c=0;(a=o.next())&&!a.done;)!l&&!n[c]&&(l=r.equals(s.value,a.value,s.value,a.value,e,t,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function Gze(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Hze="[object Arguments]",Kze="[object Boolean]",qze="[object Date]",Xze="[object Map]",Yze="[object Number]",Qze="[object Object]",Zze="[object RegExp]",Jze="[object Set]",eVe="[object String]",tVe=Array.isArray,w8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,T8=Object.assign,rVe=Object.prototype.toString.call.bind(Object.prototype.toString);function nVe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,s=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,o=e.areSetsEqual,l=e.areTypedArraysEqual;return function(d,u,f){if(d===u)return!0;if(d==null||u==null||typeof d!="object"||typeof u!="object")return d!==d&&u!==u;var p=d.constructor;if(p!==u.constructor)return!1;if(p===Object)return i(d,u,f);if(tVe(d))return t(d,u,f);if(w8!=null&&w8(d))return l(d,u,f);if(p===Date)return r(d,u,f);if(p===RegExp)return a(d,u,f);if(p===Map)return n(d,u,f);if(p===Set)return o(d,u,f);var m=rVe(d);return m===qze?r(d,u,f):m===Zze?a(d,u,f):m===Xze?n(d,u,f):m===Jze?o(d,u,f):m===Qze?typeof d.then!="function"&&typeof u.then!="function"&&i(d,u,f):m===Hze?i(d,u,f):m===Kze||m===Yze||m===eVe?s(d,u,f):!1}}function iVe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?mg:Bze,areDatesEqual:zze,areMapsEqual:n?g8(x8,mg):x8,areObjectsEqual:n?mg:Vze,arePrimitiveWrappersEqual:Uze,areRegExpsEqual:Wze,areSetsEqual:n?g8(b8,mg):b8,areTypedArraysEqual:n?mg:Gze};if(r&&(i=T8({},i,r(i))),t){var s=ux(i.areArraysEqual),a=ux(i.areMapsEqual),o=ux(i.areObjectsEqual),l=ux(i.areSetsEqual);i=T8({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function sVe(e){return function(t,r,n,i,s,a,o){return e(t,r,o)}}function aVe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(l,c){var d=n(),u=d.cache,f=u===void 0?t?new WeakMap:void 0:u,p=d.meta;return r(l,c,{cache:f,equals:i,meta:p,strict:s})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return r(l,c,a)}}var oVe=ju();ju({strict:!0});ju({circular:!0});ju({circular:!0,strict:!0});ju({createInternalComparator:function(){return ym}});ju({strict:!0,createInternalComparator:function(){return ym}});ju({circular:!0,createInternalComparator:function(){return ym}});ju({circular:!0,createInternalComparator:function(){return ym},strict:!0});function ju(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,s=e.strict,a=s===void 0?!1:s,o=iVe(e),l=nVe(o),c=n?n(l):sVe(l);return aVe({circular:r,comparator:l,createState:i,equals:c,strict:a})}function lVe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function M8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):lVe(i)};requestAnimationFrame(n)}function n2(e){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n2(e)}function cVe(e){return hVe(e)||fVe(e)||dVe(e)||uVe()}function uVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dVe(e,t){if(e){if(typeof e=="string")return k8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k8(e,t)}}function k8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hVe(e){if(Array.isArray(e))return e}function pVe(){var e={},t=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,o=cVe(a),l=o[0],c=o.slice(1);if(typeof l=="number"){M8(i.bind(null,c),l);return}i(l),M8(i.bind(null,c));return}n2(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function P8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){Wte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wte(e,t,r){return t=mVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mVe(e){var t=gVe(e,"string");return vv(t)==="symbol"?t:String(t)}function gVe(e,t){if(vv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yVe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},vVe=function(t){return t},_Ve=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},uy=function(t,r){return Object.keys(r).reduce(function(n,i){return P8(P8({},n),{},Wte({},i,t(i,r[i])))},{})},E8=function(t,r,n){return t.map(function(i){return"".concat(_Ve(i)," ").concat(r,"ms ").concat(n)}).join(",")};function xVe(e,t){return TVe(e)||wVe(e,t)||Gte(e,t)||bVe()}function bVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wVe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function TVe(e){if(Array.isArray(e))return e}function MVe(e){return PVe(e)||SVe(e)||Gte(e)||kVe()}function kVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(e,t){if(e){if(typeof e=="string")return i2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i2(e,t)}}function SVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PVe(e){if(Array.isArray(e))return i2(e)}function i2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mw=1e-4,Hte=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Kte=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},C8=function(t,r){return function(n){var i=Hte(t,r);return Kte(i,n)}},EVe=function(t,r){return function(n){var i=Hte(t,r),s=[].concat(MVe(i.map(function(a,o){return a*o}).slice(1)),[0]);return Kte(s,n)}},j8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],s=r[1],a=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=xVe(c,4);i=d[0],s=d[1],a=d[2],o=d[3]}}}var u=C8(i,a),f=C8(s,o),p=EVe(i,a),m=function(v){return v>1?1:v<0?0:v},g=function(v){for(var y=v>1?1:v,w=y,b=0;b<8;++b){var _=u(w)-y,T=p(w);if(Math.abs(_-y)<Mw||T<Mw)return f(w);w=m(w-_/T)}return f(w)};return g.isStepper=!1,g},CVe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,a=t.dt,o=a===void 0?17:a,l=function(d,u,f){var p=-(d-u)*n,m=f*s,g=f+(p-m)*o/1e3,x=f*o/1e3+d;return Math.abs(x-u)<Mw&&Math.abs(g)<Mw?[u,0]:[x,g]};return l.isStepper=!0,l.dt=o,l},jVe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return j8(i);case"spring":return CVe();default:if(i.split("(")[0]==="cubic-bezier")return j8(i)}return typeof i=="function"?i:null};function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function A8(e){return $Ve(e)||OVe(e)||qte(e)||AVe()}function AVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Ve(e){if(Array.isArray(e))return a2(e)}function O8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(r),!0).forEach(function(n){s2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s2(e,t,r){return t=IVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IVe(e){var t=NVe(e,"string");return _v(t)==="symbol"?t:String(t)}function NVe(e,t){if(_v(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_v(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DVe(e,t){return FVe(e)||LVe(e,t)||qte(e,t)||RVe()}function RVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qte(e,t){if(e){if(typeof e=="string")return a2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(e,t)}}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LVe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function FVe(e){if(Array.isArray(e))return e}var kw=function(t,r,n){return t+(r-t)*n},o2=function(t){var r=t.from,n=t.to;return r!==n},BVe=function e(t,r,n){var i=uy(function(s,a){if(o2(a)){var o=t(a.from,a.to,a.velocity),l=DVe(o,2),c=l[0],d=l[1];return Ni(Ni({},a),{},{from:c,velocity:d})}return a},r);return n<1?uy(function(s,a){return o2(a)?Ni(Ni({},a),{},{velocity:kw(a.velocity,i[s].velocity,n),from:kw(a.from,i[s].from,n)}):a},r):e(t,i,n-1)};const zVe=function(e,t,r,n,i){var s=yVe(e,t),a=s.reduce(function(x,v){return Ni(Ni({},x),{},s2({},v,[e[v],t[v]]))},{}),o=s.reduce(function(x,v){return Ni(Ni({},x),{},s2({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,c,d,u=function(){return null},f=function(){return uy(function(v,y){return y.from},o)},p=function(){return!Object.values(o).filter(o2).length},m=function(v){c||(c=v);var y=v-c,w=y/r.dt;o=BVe(r,o,w),i(Ni(Ni(Ni({},e),t),f())),c=v,p()||(l=requestAnimationFrame(u))},g=function(v){d||(d=v);var y=(v-d)/n,w=uy(function(_,T){return kw.apply(void 0,A8(T).concat([r(y)]))},a);if(i(Ni(Ni(Ni({},e),t),w)),y<1)l=requestAnimationFrame(u);else{var b=uy(function(_,T){return kw.apply(void 0,A8(T).concat([r(1)]))},a);i(Ni(Ni(Ni({},e),t),b))}};return u=r.isStepper?m:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(l)}}};function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}var VVe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function UVe(e,t){if(e==null)return{};var r=WVe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WVe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function nP(e){return qVe(e)||KVe(e)||HVe(e)||GVe()}function GVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HVe(e,t){if(e){if(typeof e=="string")return l2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l2(e,t)}}function KVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qVe(e){if(Array.isArray(e))return l2(e)}function l2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$8(Object(r),!0).forEach(function(n){Rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rg(e,t,r){return t=Xte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YVe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xte(n.key),n)}}function QVe(e,t,r){return t&&YVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xte(e){var t=ZVe(e,"string");return kp(t)==="symbol"?t:String(t)}function ZVe(e,t){if(kp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c2(e,t)}function c2(e,t){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},c2(e,t)}function eUe(e){var t=tUe();return function(){var n=Sw(e),i;if(t){var s=Sw(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return u2(this,i)}}function u2(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2(e)}function d2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sw(e){return Sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sw(e)}var Yl=function(e){JVe(r,e);var t=eUe(r);function r(n,i){var s;XVe(this,r),s=t.call(this,n,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,d=a.to,u=a.steps,f=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(d2(s)),s.changeStyle=s.changeStyle.bind(d2(s)),!o||p<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:d}),u2(s);if(u&&u.length)s.state={style:u[0].style};else if(c){if(typeof f=="function")return s.state={style:c},u2(s);s.state={style:l?Rg({},l,c):c}}else s.state={style:{}};return s}return QVe(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,d=s.to,u=s.from,f=this.state.style;if(o){if(!a){var p={style:l?Rg({},l,d):d};this.state&&f&&(l&&f[l]!==d||!l&&f!==d)&&this.setState(p);return}if(!(oVe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||c?u:i.to;if(this.state&&f){var x={style:l?Rg({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(x)}this.runAnimation(qa(qa({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,d=i.begin,u=i.onAnimationEnd,f=i.onAnimationStart,p=zVe(a,o,jVe(c),l,this.changeStyle),m=function(){s.stopJSAnimation=p()};this.manager.start([f,d,m,l,u])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],d=c.style,u=c.duration,f=u===void 0?0:u,p=function(g,x,v){if(v===0)return g;var y=x.duration,w=x.easing,b=w===void 0?"ease":w,_=x.style,T=x.properties,M=x.onAnimationEnd,k=v>0?a[v-1]:x,j=T||Object.keys(_);if(typeof b=="function"||b==="spring")return[].concat(nP(g),[s.runJSAnimation.bind(s,{from:k.style,to:_,duration:y,easing:b}),y]);var A=E8(j,y,b),R=qa(qa(qa({},k.style),_),{},{transition:A});return[].concat(nP(g),[R,y,M]).filter(vVe)};return this.manager.start([l].concat(nP(a.reduce(p,[d,Math.max(f,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=pVe());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,d=i.onAnimationStart,u=i.onAnimationEnd,f=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=o?Rg({},o,l):l,x=E8(Object.keys(g),a,c);m.start([d,s,qa(qa({},g),{},{transition:x}),a,u])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=UVe(i,VVe),c=E.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!o||c===0||a<=0)return s;var u=function(p){var m=p.props,g=m.style,x=g===void 0?{}:g,v=m.className,y=E.cloneElement(p,qa(qa({},l),{},{style:qa(qa({},x),d),className:v}));return y};return c===1?u(E.Children.only(s)):se.createElement("div",null,E.Children.map(s,function(f){return u(f)}))}}]),r}(E.PureComponent);Yl.displayName="Animate";Yl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yl.propTypes={from:or.oneOfType([or.object,or.string]),to:or.oneOfType([or.object,or.string]),attributeName:or.string,duration:or.number,begin:or.number,easing:or.oneOfType([or.string,or.func]),steps:or.arrayOf(or.shape({duration:or.number.isRequired,style:or.object.isRequired,easing:or.oneOfType([or.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),or.func]),properties:or.arrayOf("string"),onAnimationEnd:or.func})),children:or.oneOfType([or.node,or.func]),isActive:or.bool,canBegin:or.bool,onAnimationEnd:or.func,shouldReAnimate:or.bool,onAnimationStart:or.func,onAnimationReStart:or.func};or.object,or.object,or.object,or.element;or.object,or.object,or.object,or.oneOfType([or.array,or.element]),or.any;function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pw.apply(this,arguments)}function rUe(e,t){return aUe(e)||sUe(e,t)||iUe(e,t)||nUe()}function nUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iUe(e,t){if(e){if(typeof e=="string")return I8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I8(e,t)}}function I8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sUe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function aUe(e){if(Array.isArray(e))return e}function N8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function D8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N8(Object(r),!0).forEach(function(n){oUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oUe(e,t,r){return t=lUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lUe(e){var t=cUe(e,"string");return xv(t)=="symbol"?t:t+""}function cUe(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R8=function(t,r,n,i,s){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),o=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,d;if(a>0&&s instanceof Array){for(var u=[0,0,0,0],f=0,p=4;f<p;f++)u[f]=s[f]>a?a:s[f];d="M".concat(t,",").concat(r+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(t+l*u[0],",").concat(r)),d+="L ".concat(t+n-l*u[1],",").concat(r),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(r+o*u[1])),d+="L ".concat(t+n,",").concat(r+i-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(t+n-l*u[2],",").concat(r+i)),d+="L ".concat(t+l*u[3],",").concat(r+i),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(r+i-o*u[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var m=Math.min(a,s);d="M ".concat(t,",").concat(r+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n,",").concat(r+o*m,`
            L `).concat(t+n,",").concat(r+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n-l*m,",").concat(r+i,`
            L `).concat(t+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t,",").concat(r+i-o*m," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},uUe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,s=r.x,a=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),d=Math.max(s,s+o),u=Math.min(a,a+l),f=Math.max(a,a+l);return n>=c&&n<=d&&i>=u&&i<=f}return!1},dUe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DI=function(t){var r=D8(D8({},dUe),t),n=E.useRef(),i=E.useState(-1),s=rUe(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var l=r.x,c=r.y,d=r.width,u=r.height,f=r.radius,p=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,y=r.isUpdateAnimationActive;if(l!==+l||c!==+c||d!==+d||u!==+u||d===0||u===0)return null;var w=dr("recharts-rectangle",p);return y?se.createElement(Yl,{canBegin:a>0,from:{width:d,height:u,x:l,y:c},to:{width:d,height:u,x:l,y:c},duration:g,animationEasing:m,isActive:y},function(b){var _=b.width,T=b.height,M=b.x,k=b.y;return se.createElement(Yl,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:v,easing:m},se.createElement("path",Pw({},Qt(r,!0),{className:w,d:R8(M,k,_,T,f),ref:n})))}):se.createElement("path",Pw({},Qt(r,!0),{className:w,d:R8(l,c,d,u,f)}))},fUe=["points","className","baseLinePoints","connectNulls"];function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mh.apply(this,arguments)}function hUe(e,t){if(e==null)return{};var r=pUe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pUe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function L8(e){return vUe(e)||yUe(e)||gUe(e)||mUe()}function mUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gUe(e,t){if(e){if(typeof e=="string")return f2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f2(e,t)}}function yUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vUe(e){if(Array.isArray(e))return f2(e)}function f2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F8=function(t){return t&&t.x===+t.x&&t.y===+t.y},_Ue=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){F8(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),F8(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},dy=function(t,r){var n=_Ue(t);r&&(n=[n.reduce(function(s,a){return[].concat(L8(s),L8(a))},[])]);var i=n.map(function(s){return s.reduce(function(a,o,l){return"".concat(a).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},xUe=function(t,r,n){var i=dy(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(dy(r.reverse(),n).slice(1))},bUe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,s=t.connectNulls,a=hUe(t,fUe);if(!r||!r.length)return null;var o=dr("recharts-polygon",n);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=xUe(r,i,s);return se.createElement("g",{className:o},se.createElement("path",Mh({},Qt(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?se.createElement("path",Mh({},Qt(a,!0),{fill:"none",d:dy(r,s)})):null,l?se.createElement("path",Mh({},Qt(a,!0),{fill:"none",d:dy(i,s)})):null)}var d=dy(r,s);return se.createElement("path",Mh({},Qt(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:o,d}))};function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h2.apply(this,arguments)}var RI=function(t){var r=t.cx,n=t.cy,i=t.r,s=t.className,a=dr("recharts-dot",s);return r===+r&&n===+n&&i===+i?se.createElement("circle",h2({},Qt(t,!1),qb(t),{className:a,cx:r,cy:n,r:i})):null};function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}var wUe=["x","y","top","left","width","height","className"];function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p2.apply(this,arguments)}function B8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(r),!0).forEach(function(n){MUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MUe(e,t,r){return t=kUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kUe(e){var t=SUe(e,"string");return bv(t)=="symbol"?t:t+""}function SUe(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PUe(e,t){if(e==null)return{};var r=EUe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EUe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var CUe=function(t,r,n,i,s,a){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},jUe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,a=t.top,o=a===void 0?0:a,l=t.left,c=l===void 0?0:l,d=t.width,u=d===void 0?0:d,f=t.height,p=f===void 0?0:f,m=t.className,g=PUe(t,wUe),x=TUe({x:n,y:s,top:o,left:c,width:u,height:p},g);return!dt(n)||!dt(s)||!dt(u)||!dt(p)||!dt(o)||!dt(c)?null:se.createElement("path",p2({},Qt(x,!0),{className:dr("recharts-cross",m),d:CUe(n,s,u,p,o,c)}))},AUe=ET,OUe=ote,$Ue=Pu;function IUe(e,t){return e&&e.length?AUe(e,$Ue(t),OUe):void 0}var NUe=IUe;const DUe=Ir(NUe);var RUe=ET,LUe=Pu,FUe=lte;function BUe(e,t){return e&&e.length?RUe(e,LUe(t),FUe):void 0}var zUe=BUe;const VUe=Ir(zUe);var UUe=["cx","cy","angle","ticks","axisLine"],WUe=["ticks","tick","angle","tickFormatter","stroke"];function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(this,arguments)}function z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z8(Object(r),!0).forEach(function(n){NT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V8(e,t){if(e==null)return{};var r=GUe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GUe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qte(n.key),n)}}function KUe(e,t,r){return t&&U8(e.prototype,t),r&&U8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qUe(e,t,r){return t=Ew(t),XUe(e,Yte()?Reflect.construct(t,r||[],Ew(e).constructor):t.apply(e,r))}function XUe(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YUe(e)}function YUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yte=function(){return!!e})()}function Ew(e){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ew(e)}function QUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m2(e,t)}function m2(e,t){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},m2(e,t)}function NT(e,t,r){return t=Qte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qte(e){var t=ZUe(e,"string");return Sp(t)=="symbol"?t:t+""}function ZUe(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DT=function(e){function t(){return HUe(this,t),qUe(this,t,arguments)}return QUe(t,e),KUe(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,a=s.angle,o=s.cx,l=s.cy;return an(o,l,i,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,o=n.ticks,l=DUe(o,function(d){return d.coordinate||0}),c=VUe(o,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,o=n.ticks,l=n.axisLine,c=V8(n,UUe),d=o.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),u=an(i,s,d[0],a),f=an(i,s,d[1],a),p=td(td(td({},Qt(c,!1)),{},{fill:"none"},Qt(l,!1)),{},{x1:u.x,y1:u.y,x2:f.x,y2:f.y});return se.createElement("line",fy({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,d=V8(i,WUe),u=this.getTickTextAnchor(),f=Qt(d,!1),p=Qt(a,!1),m=s.map(function(g,x){var v=n.getTickValueCoord(g),y=td(td(td(td({textAnchor:u,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:c},p),{},{index:x},v),{},{payload:g});return se.createElement(zr,fy({className:dr("recharts-polar-radius-axis-tick",Nte(a)),key:"tick-".concat(g.coordinate)},Qd(n.props,g,x)),t.renderTickItem(a,y,l?l(g.value,x):g.value))});return se.createElement(zr,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,a=n.tick;return!i||!i.length?null:se.createElement(zr,{className:dr("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),ji.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return se.isValidElement(n)?a=se.cloneElement(n,i):lr(n)?a=n(i):a=se.createElement(Zd,fy({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(E.PureComponent);NT(DT,"displayName","PolarRadiusAxis");NT(DT,"axisType","radiusAxis");NT(DT,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gd.apply(this,arguments)}function W8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(r),!0).forEach(function(n){RT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jte(n.key),n)}}function e5e(e,t,r){return t&&G8(e.prototype,t),r&&G8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t5e(e,t,r){return t=Cw(t),r5e(e,Zte()?Reflect.construct(t,r||[],Cw(e).constructor):t.apply(e,r))}function r5e(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n5e(e)}function n5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zte=function(){return!!e})()}function Cw(e){return Cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cw(e)}function i5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g2(e,t)}function g2(e,t){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},g2(e,t)}function RT(e,t,r){return t=Jte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jte(e){var t=s5e(e,"string");return Pp(t)=="symbol"?t:t+""}function s5e(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a5e=Math.PI/180,H8=1e-5,LT=function(e){function t(){return JUe(this,t),t5e(this,t,arguments)}return i5e(t,e),e5e(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,a=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,d=c||8,u=an(s,a,o,n.coordinate),f=an(s,a,o+(l==="inner"?-1:1)*d,n.coordinate);return{x1:u.x,y1:u.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*a5e),a;return s>H8?a=i==="outer"?"start":"end":s<-H8?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.radius,o=n.axisLine,l=n.axisLineType,c=rd(rd({},Qt(this.props,!1)),{},{fill:"none"},Qt(o,!1));if(l==="circle")return se.createElement(RI,gd({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:s,r:a}));var d=this.props.ticks,u=d.map(function(f){return an(i,s,a,f.coordinate)});return se.createElement(bUe,gd({className:"recharts-polar-angle-axis-line"},c,{points:u}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,d=Qt(this.props,!1),u=Qt(a,!1),f=rd(rd({},d),{},{fill:"none"},Qt(o,!1)),p=s.map(function(m,g){var x=n.getTickLineCoord(m),v=n.getTickTextAnchor(m),y=rd(rd(rd({textAnchor:v},d),{},{stroke:"none",fill:c},u),{},{index:g,payload:m,x:x.x2,y:x.y2});return se.createElement(zr,gd({className:dr("recharts-polar-angle-axis-tick",Nte(a)),key:"tick-".concat(m.coordinate)},Qd(n.props,m,g)),o&&se.createElement("line",gd({className:"recharts-polar-angle-axis-tick-line"},f,x)),a&&t.renderTickItem(a,y,l?l(m.value,g):m.value))});return se.createElement(zr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!i||!i.length?null:se.createElement(zr,{className:dr("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var a;return se.isValidElement(n)?a=se.cloneElement(n,i):lr(n)?a=n(i):a=se.createElement(Zd,gd({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(E.PureComponent);RT(LT,"displayName","PolarAngleAxis");RT(LT,"axisType","angleAxis");RT(LT,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var o5e=iee,l5e=o5e(Object.getPrototypeOf,Object),c5e=l5e,u5e=tc,d5e=c5e,f5e=rc,h5e="[object Object]",p5e=Function.prototype,m5e=Object.prototype,ere=p5e.toString,g5e=m5e.hasOwnProperty,y5e=ere.call(Object);function v5e(e){if(!f5e(e)||u5e(e)!=h5e)return!1;var t=d5e(e);if(t===null)return!0;var r=g5e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ere.call(r)==y5e}var _5e=v5e;const x5e=Ir(_5e);var b5e=tc,w5e=rc,T5e="[object Boolean]";function M5e(e){return e===!0||e===!1||w5e(e)&&b5e(e)==T5e}var k5e=M5e;const S5e=Ir(k5e);function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function P5e(e,t){return A5e(e)||j5e(e,t)||C5e(e,t)||E5e()}function E5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C5e(e,t){if(e){if(typeof e=="string")return K8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K8(e,t)}}function K8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function A5e(e){if(Array.isArray(e))return e}function q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q8(Object(r),!0).forEach(function(n){O5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O5e(e,t,r){return t=$5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $5e(e){var t=I5e(e,"string");return wv(t)=="symbol"?t:t+""}function I5e(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y8=function(t,r,n,i,s){var a=n-i,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-a/2,",").concat(r+s),o+="L ".concat(t+n-a/2-i,",").concat(r+s),o+="L ".concat(t,",").concat(r," Z"),o},N5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},D5e=function(t){var r=X8(X8({},N5e),t),n=E.useRef(),i=E.useState(-1),s=P5e(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&o(w)}catch{}},[]);var l=r.x,c=r.y,d=r.upperWidth,u=r.lowerWidth,f=r.height,p=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||d!==+d||u!==+u||f!==+f||d===0&&u===0||f===0)return null;var y=dr("recharts-trapezoid",p);return v?se.createElement(Yl,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:d,lowerWidth:u,height:f,x:l,y:c},duration:g,animationEasing:m,isActive:v},function(w){var b=w.upperWidth,_=w.lowerWidth,T=w.height,M=w.x,k=w.y;return se.createElement(Yl,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:m},se.createElement("path",jw({},Qt(r,!0),{className:y,d:Y8(M,k,b,_,T),ref:n})))}):se.createElement("g",null,se.createElement("path",jw({},Qt(r,!0),{className:y,d:Y8(l,c,d,u,f)})))},R5e=["option","shapeType","propTransformer","activeClassName","isActive"];function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function L5e(e,t){if(e==null)return{};var r=F5e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Aw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(n){B5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B5e(e,t,r){return t=z5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z5e(e){var t=V5e(e,"string");return Tv(t)=="symbol"?t:t+""}function V5e(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U5e(e,t){return Aw(Aw({},t),e)}function W5e(e,t){return e==="symbols"}function Z8(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return se.createElement(DI,r);case"trapezoid":return se.createElement(D5e,r);case"sector":return se.createElement(Lte,r);case"symbols":if(W5e(t))return se.createElement(eI,r);break;default:return null}}function G5e(e){return E.isValidElement(e)?e.props:e}function tre(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?U5e:n,s=e.activeClassName,a=s===void 0?"recharts-active-shape":s,o=e.isActive,l=L5e(e,R5e),c;if(E.isValidElement(t))c=E.cloneElement(t,Aw(Aw({},l),G5e(t)));else if(lr(t))c=t(l);else if(x5e(t)&&!S5e(t)){var d=i(t,l);c=se.createElement(Z8,{shapeType:r,elementProps:d})}else{var u=l;c=se.createElement(Z8,{shapeType:r,elementProps:u})}return o?se.createElement(zr,{className:a},c):c}function FT(e,t){return t!=null&&"trapezoids"in e.props}function BT(e,t){return t!=null&&"sectors"in e.props}function Mv(e,t){return t!=null&&"points"in e.props}function H5e(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&s}function K5e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function q5e(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function X5e(e,t){var r;return FT(e,t)?r=H5e:BT(e,t)?r=K5e:Mv(e,t)&&(r=q5e),r}function Y5e(e,t){var r;return FT(e,t)?r="trapezoids":BT(e,t)?r="sectors":Mv(e,t)&&(r="points"),r}function Q5e(e,t){if(FT(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(BT(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Mv(e,t)?t.payload:{}}function Z5e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=Y5e(r,t),s=Q5e(r,t),a=n.filter(function(l,c){var d=AT(s,l),u=r.props[i].filter(function(m){var g=X5e(r,t);return g(m,t)}),f=r.props[i].indexOf(u[u.length-1]),p=c===f;return d&&p}),o=n.indexOf(a[a.length-1]);return o}var Yx;function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(this,arguments)}function J8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(r),!0).forEach(function(n){Pa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nre(n.key),n)}}function e8e(e,t,r){return t&&e6(e.prototype,t),r&&e6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t8e(e,t,r){return t=Ow(t),r8e(e,rre()?Reflect.construct(t,r||[],Ow(e).constructor):t.apply(e,r))}function r8e(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n8e(e)}function n8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rre=function(){return!!e})()}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ow(e)}function i8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y2(e,t)}function y2(e,t){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},y2(e,t)}function Pa(e,t,r){return t=nre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nre(e){var t=s8e(e,"string");return Ep(t)=="symbol"?t:t+""}function s8e(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ic=function(e){function t(r){var n;return J5e(this,t),n=t8e(this,t,[r]),Pa(n,"pieRef",null),Pa(n,"sectorRefs",[]),Pa(n,"id",y_("recharts-pie-")),Pa(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),lr(i)&&i()}),Pa(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),lr(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return i8e(t,e),e8e(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,o=s.labelLine,l=s.dataKey,c=s.valueKey,d=Qt(this.props,!1),u=Qt(a,!1),f=Qt(o,!1),p=a&&a.offsetRadius||20,m=n.map(function(g,x){var v=(g.startAngle+g.endAngle)/2,y=an(g.cx,g.cy,g.outerRadius+p,v),w=rn(rn(rn(rn({},d),g),{},{stroke:"none"},u),{},{index:x,textAnchor:t.getTextAnchor(y.x,g.cx)},y),b=rn(rn(rn(rn({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:x,points:[an(g.cx,g.cy,g.outerRadius,v),y]}),_=l;return vr(l)&&vr(c)?_="value":vr(l)&&(_=c),se.createElement(zr,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},o&&t.renderLabelLineItem(o,b,"line"),t.renderLabelItem(a,w,ns(g,_)))});return se.createElement(zr,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,a=s.activeShape,o=s.blendStroke,l=s.inactiveShape;return n.map(function(c,d){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&n.length!==1)return null;var u=i.isActiveIndex(d),f=l&&i.hasActiveIndex()?l:null,p=u?a:f,m=rn(rn({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return se.createElement(zr,kh({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Qd(i.props,c,d),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(d)}),se.createElement(tre,kh({option:p,isActive:u,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,a=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,d=i.animationId,u=this.state,f=u.prevSectors,p=u.prevIsAnimationActive;return se.createElement(Yl,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,x=[],v=s&&s[0],y=v.startAngle;return s.forEach(function(w,b){var _=f&&f[b],T=b>0?oa(w,"paddingAngle",0):0;if(_){var M=jc(_.endAngle-_.startAngle,w.endAngle-w.startAngle),k=rn(rn({},w),{},{startAngle:y+T,endAngle:y+M(g)+T});x.push(k),y=k.endAngle}else{var j=w.endAngle,A=w.startAngle,R=jc(0,j-A),I=R(g),$=rn(rn({},w),{},{startAngle:y+T,endAngle:y+I+T});x.push($),y=$.endAngle}}),se.createElement(zr,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!AT(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,a=i.sectors,o=i.className,l=i.label,c=i.cx,d=i.cy,u=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(s||!a||!a.length||!dt(c)||!dt(d)||!dt(u)||!dt(f))return null;var g=dr("recharts-pie",o);return se.createElement(zr,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){n.pieRef=v}},this.renderSectors(),l&&this.renderLabels(a),ji.renderCallByParent(this.props,null,!1),(!p||m)&&su.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(se.isValidElement(n))return se.cloneElement(n,i);if(lr(n))return n(i);var a=dr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return se.createElement(r2,kh({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,i,s){if(se.isValidElement(n))return se.cloneElement(n,i);var a=s;if(lr(n)&&(a=n(i),se.isValidElement(a)))return a;var o=dr("recharts-pie-label-text",typeof n!="boolean"&&!lr(n)?n.className:"");return se.createElement(Zd,kh({},i,{alignmentBaseline:"middle",className:o}),a)}}])}(E.PureComponent);Yx=ic;Pa(ic,"displayName","Pie");Pa(ic,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Pa(ic,"parseDeltaAngle",function(e,t){var r=bs(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Pa(ic,"getRealPieData",function(e){var t=e.data,r=e.children,n=Qt(e,!1),i=Oa(r,bT);return t&&t.length?t.map(function(s,a){return rn(rn(rn({payload:s},n),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return rn(rn({},n),s.props)}):[]});Pa(ic,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,s=t.height,a=Ite(i,s),o=n+ws(e.cx,i,i/2),l=r+ws(e.cy,s,s/2),c=ws(e.innerRadius,a,0),d=ws(e.outerRadius,a,a*.8),u=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:d,maxRadius:u}});Pa(ic,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?rn(rn({},t.type.defaultProps),t.props):t.props,i=Yx.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,a=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,d=n.nameKey,u=n.valueKey,f=n.tooltipType,p=Math.abs(n.minAngle),m=Yx.parseCoordinateOfPie(n,r),g=Yx.parseDeltaAngle(a,o),x=Math.abs(g),v=c;vr(c)&&vr(u)?(Dl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):vr(c)&&(Dl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=u);var y=i.filter(function(k){return ns(k,v,0)!==0}).length,w=(x>=360?y:y-1)*l,b=x-y*p-w,_=i.reduce(function(k,j){var A=ns(j,v,0);return k+(dt(A)?A:0)},0),T;if(_>0){var M;T=i.map(function(k,j){var A=ns(k,v,0),R=ns(k,d,j),I=(dt(A)?A:0)/_,$;j?$=M.endAngle+bs(g)*l*(A!==0?1:0):$=a;var F=$+bs(g)*((A!==0?p:0)+I*b),V=($+F)/2,G=(m.innerRadius+m.outerRadius)/2,H=[{name:R,value:A,payload:k,dataKey:v,type:f}],B=an(m.cx,m.cy,G,V);return M=rn(rn(rn({percent:I,cornerRadius:s,name:R,tooltipPayload:H,midAngle:V,middleRadius:G,tooltipPosition:B},k),m),{},{value:ns(k,v),startAngle:$,endAngle:F,payload:k,paddingAngle:bs(g)*l}),M})}return rn(rn({},m),{},{sectors:T,data:i})});var a8e=Math.ceil,o8e=Math.max;function l8e(e,t,r,n){for(var i=-1,s=o8e(a8e((t-e)/(r||1)),0),a=Array(s);s--;)a[n?s:++i]=e,e+=r;return a}var c8e=l8e,u8e=wee,t6=1/0,d8e=17976931348623157e292;function f8e(e){if(!e)return e===0?e:0;if(e=u8e(e),e===t6||e===-t6){var t=e<0?-1:1;return t*d8e}return e===e?e:0}var h8e=f8e,p8e=c8e,m8e=xT,iP=h8e;function g8e(e){return function(t,r,n){return n&&typeof n!="number"&&m8e(t,r,n)&&(r=n=void 0),t=iP(t),r===void 0?(r=t,t=0):r=iP(r),n=n===void 0?t<r?1:-1:iP(n),p8e(t,r,n,e)}}var y8e=g8e,v8e=y8e,_8e=v8e(),x8e=_8e;const $w=Ir(x8e);function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function n6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(n){ire(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ire(e,t,r){return t=b8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b8e(e){var t=w8e(e,"string");return kv(t)=="symbol"?t:t+""}function w8e(e,t){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T8e=["Webkit","Moz","O","ms"],M8e=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=T8e.reduce(function(s,a){return n6(n6({},s),{},ire({},a+n,r))},{});return i[t]=r,i};function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iw.apply(this,arguments)}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){Ks(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,are(n.key),n)}}function S8e(e,t,r){return t&&s6(e.prototype,t),r&&s6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P8e(e,t,r){return t=Nw(t),E8e(e,sre()?Reflect.construct(t,r||[],Nw(e).constructor):t.apply(e,r))}function E8e(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C8e(e)}function C8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sre=function(){return!!e})()}function Nw(e){return Nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nw(e)}function j8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}function v2(e,t){return v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},v2(e,t)}function Ks(e,t,r){return t=are(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function are(e){var t=A8e(e,"string");return Cp(t)=="symbol"?t:t+""}function A8e(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O8e=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,s=t.x,a=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=ly().domain($w(0,l)).range([s,s+a-o]),d=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:d}},a6=function(t){return t.changedTouches&&!!t.changedTouches.length},jp=function(e){function t(r){var n;return k8e(this,t),n=P8e(this,t,[r]),Ks(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Ks(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Ks(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),n.detachDragEndListener()}),Ks(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ks(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ks(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ks(n,"handleSlideDragStart",function(i){var s=a6(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return j8e(t,e),S8e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,d=c.length-1,u=Math.min(i,s),f=Math.max(i,s),p=t.getIndexInRange(a,u),m=t.getIndexInRange(a,f);return{startIndex:p-p%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=ns(s[n],o,n);return lr(a)?a(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,d=l.width,u=l.travellerWidth,f=l.startIndex,p=l.endIndex,m=l.onChange,g=n.pageX-s;g>0?g=Math.min(g,c+d-u-o,c+d-u-a):g<0&&(g=Math.max(g,c-a,c-o));var x=this.getIndex({startX:a+g,endX:o+g});(x.startIndex!==f||x.endIndex!==p)&&m&&m(x),this.setState({startX:a+g,endX:o+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=a6(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],d=this.props,u=d.x,f=d.width,p=d.travellerWidth,m=d.onChange,g=d.gap,x=d.data,v={startX:this.state.startX,endX:this.state.endX},y=n.pageX-s;y>0?y=Math.min(y,u+f-p-c):y<0&&(y=Math.max(y,u-c)),v[a]=c+y;var w=this.getIndex(v),b=w.startIndex,_=w.endIndex,T=function(){var k=x.length-1;return a==="startX"&&(o>l?b%g===0:_%g===0)||o<l&&_===k||a==="endX"&&(o>l?_%g===0:b%g===0)||o>l&&_===k};this.setState(Ks(Ks({},a,c+y),"brushMoveStartX",n.pageX),function(){m&&T()&&m(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,d=this.state[i],u=o.indexOf(d);if(u!==-1){var f=u+n;if(!(f===-1||f>=o.length)){var p=o[f];i==="startX"&&p>=c||i==="endX"&&p<=l||this.setState(Ks({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.fill,c=n.stroke;return se.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.data,c=n.children,d=n.padding,u=E.Children.only(c);return u?se.cloneElement(u,{x:i,y:s,width:a,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,a,o=this,l=this.props,c=l.y,d=l.travellerWidth,u=l.height,f=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,x=l.endIndex,v=Math.max(n,this.props.x),y=sP(sP({},Qt(this.props,!1)),{},{x:v,y:c,width:d,height:u}),w=p||"Min value: ".concat((s=m[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=m[x])===null||a===void 0?void 0:a.name);return se.createElement(zr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),o.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(n,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,d=Math.min(n,i)+c,u=Math.max(Math.abs(i-n)-c,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:a,width:u,height:o})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,a=n.y,o=n.height,l=n.travellerWidth,c=n.stroke,d=this.state,u=d.startX,f=d.endX,p=5,m={pointerEvents:"none",fill:c};return se.createElement(zr,{className:"recharts-brush-texts"},se.createElement(Zd,Iw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,f)-p,y:a+o/2},m),this.getTextOfTick(i)),se.createElement(Zd,Iw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,f)+l+p,y:a+o/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,a=n.children,o=n.x,l=n.y,c=n.width,d=n.height,u=n.alwaysShowText,f=this.state,p=f.startX,m=f.endX,g=f.isTextActive,x=f.isSlideMoving,v=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!dt(o)||!dt(l)||!dt(c)||!dt(d)||c<=0||d<=0)return null;var w=dr("recharts-brush",s),b=se.Children.count(a)===1,_=M8e("userSelect","none");return se.createElement(zr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||x||v||y||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,a=n.width,o=n.height,l=n.stroke,c=Math.floor(s+o/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),se.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,i):lr(n)?s=n(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,a=n.width,o=n.x,l=n.travellerWidth,c=n.updateId,d=n.startIndex,u=n.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return sP({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?O8e({data:s,width:a,x:o,travellerWidth:l,startIndex:d,endIndex:u}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);n[l]>i?o=l:a=l}return i>=n[o]?o:a}}])}(E.PureComponent);Ks(jp,"displayName","Brush");Ks(jp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $8e=lI;function I8e(e,t){var r;return $8e(e,function(n,i,s){return r=t(n,i,s),!r}),!!r}var N8e=I8e,D8e=YJ,R8e=Pu,L8e=N8e,F8e=Us,B8e=xT;function z8e(e,t,r){var n=F8e(e)?D8e:L8e;return r&&B8e(e,t,r)&&(t=void 0),n(e,R8e(t))}var V8e=z8e;const U8e=Ir(V8e);var Jo=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},o6=yee;function W8e(e,t,r){t=="__proto__"&&o6?o6(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var G8e=W8e,H8e=G8e,K8e=mee,q8e=Pu;function X8e(e,t){var r={};return t=q8e(t),K8e(e,function(n,i,s){H8e(r,i,t(n,i,s))}),r}var Y8e=X8e;const Q8e=Ir(Y8e);function Z8e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var J8e=Z8e,e6e=lI;function t6e(e,t){var r=!0;return e6e(e,function(n,i,s){return r=!!t(n,i,s),r}),r}var r6e=t6e,n6e=J8e,i6e=r6e,s6e=Pu,a6e=Us,o6e=xT;function l6e(e,t,r){var n=a6e(e)?n6e:i6e;return r&&o6e(e,t,r)&&(t=void 0),n(e,s6e(t))}var c6e=l6e;const u6e=Ir(c6e);var d6e=["x","y"];function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_2.apply(this,arguments)}function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(r),!0).forEach(function(n){f6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f6e(e,t,r){return t=h6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h6e(e){var t=p6e(e,"string");return Sv(t)=="symbol"?t:t+""}function p6e(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m6e(e,t){if(e==null)return{};var r=g6e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y6e(e,t){var r=e.x,n=e.y,i=m6e(e,d6e),s="".concat(r),a=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),d=parseInt(c,10),u="".concat(t.width||i.width),f=parseInt(u,10);return gg(gg(gg(gg(gg({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function c6(e){return se.createElement(tre,_2({shapeType:"rectangle",propTransformer:y6e,activeClassName:"recharts-active-bar"},e))}var v6e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var s=typeof n=="number";return s?t(n,i):(s||ef(),r)}},_6e=["value","background"],ore;function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function x6e(e,t){if(e==null)return{};var r=b6e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(this,arguments)}function u6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(r),!0).forEach(function(n){Kc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cre(n.key),n)}}function T6e(e,t,r){return t&&d6(e.prototype,t),r&&d6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M6e(e,t,r){return t=Rw(t),k6e(e,lre()?Reflect.construct(t,r||[],Rw(e).constructor):t.apply(e,r))}function k6e(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S6e(e)}function S6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lre=function(){return!!e})()}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rw(e)}function P6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x2(e,t)}function x2(e,t){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x2(e,t)}function Kc(e,t,r){return t=cre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cre(e){var t=E6e(e,"string");return Ap(t)=="symbol"?t:t+""}function E6e(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vf=function(e){function t(){var r;w6e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=M6e(this,t,[].concat(i)),Kc(r,"state",{isAnimationFinished:!1}),Kc(r,"id",y_("recharts-bar-")),Kc(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Kc(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return P6e(t,e),T6e(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,d=Qt(this.props,!1);return n&&n.map(function(u,f){var p=f===l,m=p?c:a,g=ni(ni(ni({},d),u),{},{isActive:p,option:m,index:f,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return se.createElement(zr,Dw({className:"recharts-bar-rectangle"},Qd(i.props,u,f),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),se.createElement(c6,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,u=i.animationId,f=this.state.prevData;return se.createElement(Yl,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=s.map(function(x,v){var y=f&&f[v];if(y){var w=jc(y.x,x.x),b=jc(y.y,x.y),_=jc(y.width,x.width),T=jc(y.height,x.height);return ni(ni({},x),{},{x:w(m),y:b(m),width:_(m),height:T(m)})}if(a==="horizontal"){var M=jc(0,x.height),k=M(m);return ni(ni({},x),{},{y:x.y+x.height-k,height:k})}var j=jc(0,x.width),A=j(m);return ni(ni({},x),{},{width:A})});return se.createElement(zr,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!AT(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=Qt(this.props.background,!1);return s.map(function(c,d){c.value;var u=c.background,f=x6e(c,_6e);if(!u)return null;var p=ni(ni(ni(ni(ni({},f),{},{fill:"#eee"},u),l),Qd(n.props,c,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return se.createElement(c6,Dw({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,d=s.children,u=Oa(d,IT);if(!u)return null;var f=c==="vertical"?a[0].height/2:a[0].width/2,p=function(x,v){var y=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:y,errorVal:ns(x,v)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return se.createElement(zr,m,u.map(function(g){return se.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,a=n.className,o=n.xAxis,l=n.yAxis,c=n.left,d=n.top,u=n.width,f=n.height,p=n.isAnimationActive,m=n.background,g=n.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,v=dr("recharts-bar",a),y=o&&o.allowDataOverflow,w=l&&l.allowDataOverflow,b=y||w,_=vr(g)?this.id:g;return se.createElement(zr,{className:v},y||w?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(_)},se.createElement("rect",{x:y?c:c-u/2,y:w?d:d-f/2,width:y?u:u*2,height:w?f:f*2}))):null,se.createElement(zr,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(_,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,_),(!p||x)&&su.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(E.PureComponent);ore=vf;Kc(vf,"displayName","Bar");Kc(vf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Rl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Kc(vf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,s=e.xAxis,a=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,f=e.offset,p=g4e(n,r);if(!p)return null;var m=t.layout,g=r.type.defaultProps,x=g!==void 0?ni(ni({},g),r.props):r.props,v=x.dataKey,y=x.children,w=x.minPointSize,b=m==="horizontal"?a:s,_=c?b.scale.domain():null,T=T4e({numericAxis:b}),M=Oa(y,bT),k=u.map(function(j,A){var R,I,$,F,V,G;c?R=y4e(c[d+A],_):(R=ns(j,v),Array.isArray(R)||(R=[T,R]));var H=v6e(w,ore.defaultProps.minPointSize)(R[1],A);if(m==="horizontal"){var B,te=[a.scale(R[0]),a.scale(R[1])],ae=te[0],z=te[1];I=e8({axis:s,ticks:o,bandSize:i,offset:p.offset,entry:j,index:A}),$=(B=z??ae)!==null&&B!==void 0?B:void 0,F=p.size;var D=ae-z;if(V=Number.isNaN(D)?0:D,G={x:I,y:a.y,width:F,height:a.height},Math.abs(H)>0&&Math.abs(V)<Math.abs(H)){var K=bs(V||H)*(Math.abs(H)-Math.abs(V));$-=K,V+=K}}else{var oe=[s.scale(R[0]),s.scale(R[1])],_e=oe[0],de=oe[1];if(I=_e,$=e8({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:j,index:A}),F=de-_e,V=p.size,G={x:s.x,y:$,width:s.width,height:V},Math.abs(H)>0&&Math.abs(F)<Math.abs(H)){var ve=bs(F||H)*(Math.abs(H)-Math.abs(F));F+=ve}}return ni(ni(ni({},j),{},{x:I,y:$,width:F,height:V,value:c?R:R[1],payload:j,background:G},M&&M[A]&&M[A].props),{},{tooltipPayload:[Ote(r,j)],tooltipPosition:{x:I+F/2,y:$+V/2}})});return ni({data:k,layout:m},f)});function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function C6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ure(n.key),n)}}function j6e(e,t,r){return t&&f6(e.prototype,t),r&&f6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(n){zT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zT(e,t,r){return t=ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ure(e){var t=A6e(e,"string");return Pv(t)=="symbol"?t:t+""}function A6e(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O6e=function(t,r,n,i,s){var a=t.width,o=t.height,l=t.layout,c=t.children,d=Object.keys(r),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},f=!!Qs(c,vf);return d.reduce(function(p,m){var g=r[m],x=g.orientation,v=g.domain,y=g.padding,w=y===void 0?{}:y,b=g.mirror,_=g.reversed,T="".concat(x).concat(b?"Mirror":""),M,k,j,A,R;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=v[1]-v[0],$=1/0,F=g.categoricalDomain.sort();if(F.forEach(function(oe,_e){_e>0&&($=Math.min((oe||0)-(F[_e-1]||0),$))}),Number.isFinite($)){var V=$/I,G=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(M=V*G/2),g.padding==="no-gap"){var H=ws(t.barCategoryGap,V*G),B=V*G/2;M=B-H-(B-H)/G*H}}}i==="xAxis"?k=[n.left+(w.left||0)+(M||0),n.left+n.width-(w.right||0)-(M||0)]:i==="yAxis"?k=l==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(M||0),n.top+n.height-(w.bottom||0)-(M||0)]:k=g.range,_&&(k=[k[1],k[0]]);var te=Ete(g,s,f),ae=te.scale,z=te.realScaleType;ae.domain(v).range(k),Cte(ae);var D=jte(ae,lo(lo({},g),{},{realScaleType:z}));i==="xAxis"?(R=x==="top"&&!b||x==="bottom"&&b,j=n.left,A=u[T]-R*g.height):i==="yAxis"&&(R=x==="left"&&!b||x==="right"&&b,j=u[T]-R*g.width,A=n.top);var K=lo(lo(lo({},g),D),{},{realScaleType:z,x:j,y:A,scale:ae,width:i==="xAxis"?n.width:g.width,height:i==="yAxis"?n.height:g.height});return K.bandSize=bw(K,D),!g.hide&&i==="xAxis"?u[T]+=(R?-1:1)*K.height:g.hide||(u[T]+=(R?-1:1)*K.width),lo(lo({},p),{},zT({},m,K))},{})},dre=function(t,r){var n=t.x,i=t.y,s=r.x,a=r.y;return{x:Math.min(n,s),y:Math.min(i,a),width:Math.abs(s-n),height:Math.abs(a-i)}},$6e=function(t){var r=t.x1,n=t.y1,i=t.x2,s=t.y2;return dre({x:r,y:n},{x:i,y:s})},fre=function(){function e(t){C6e(this,e),this.scale=t}return j6e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();zT(fre,"EPS",1e-4);var LI=function(t){var r=Object.keys(t).reduce(function(n,i){return lo(lo({},n),{},zT({},i,fre.create(t[i])))},{});return lo(lo({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return Q8e(i,function(l,c){return r[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return u6e(i,function(s,a){return r[a].isInRange(s)})}})};function I6e(e){return(e%180+180)%180}var N6e=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=I6e(i),a=s*Math.PI/180,o=Math.atan(n/r),l=a>o&&a<Math.PI-o?n/Math.sin(a):r/Math.cos(a);return Math.abs(l)},D6e=iPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),hre=E.createContext(void 0),pre=E.createContext(void 0),mre=E.createContext(void 0),R6e=E.createContext({}),gre=E.createContext(void 0),yre=E.createContext(0),vre=E.createContext(0),p6=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,a=t.clipPathId,o=t.children,l=t.width,c=t.height,d=D6e(s);return se.createElement(hre.Provider,{value:n},se.createElement(pre.Provider,{value:i},se.createElement(R6e.Provider,{value:s},se.createElement(mre.Provider,{value:d},se.createElement(gre.Provider,{value:a},se.createElement(yre.Provider,{value:c},se.createElement(vre.Provider,{value:l},o)))))))},L6e=function(){return E.useContext(gre)},_re=function(t){var r=E.useContext(hre);r==null&&ef();var n=r[t];return n==null&&ef(),n},xre=function(t){var r=E.useContext(pre);r==null&&ef();var n=r[t];return n==null&&ef(),n},F6e=function(){var t=E.useContext(mre);return t},bre=function(){return E.useContext(vre)},wre=function(){return E.useContext(yre)};function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function B6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mre(n.key),n)}}function V6e(e,t,r){return t&&z6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U6e(e,t,r){return t=Lw(t),W6e(e,Tre()?Reflect.construct(t,r||[],Lw(e).constructor):t.apply(e,r))}function W6e(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G6e(e)}function G6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tre=function(){return!!e})()}function Lw(e){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lw(e)}function H6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b2(e,t)}function b2(e,t){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b2(e,t)}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function g6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(n){FI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FI(e,t,r){return t=Mre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mre(e){var t=K6e(e,"string");return Op(t)=="symbol"?t:t+""}function K6e(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q6e(e,t){return Z6e(e)||Q6e(e,t)||Y6e(e,t)||X6e()}function X6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6e(e,t){if(e){if(typeof e=="string")return y6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y6(e,t)}}function y6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Z6e(e){if(Array.isArray(e))return e}function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w2.apply(this,arguments)}var J6e=function(t,r){var n;return se.isValidElement(t)?n=se.cloneElement(t,r):lr(t)?n=t(r):n=se.createElement("line",w2({},r,{className:"recharts-reference-line-line"})),n},eWe=function(t,r,n,i,s,a,o,l,c){var d=s.x,u=s.y,f=s.width,p=s.height;if(n){var m=c.y,g=t.y.apply(m,{position:a});if(Jo(c,"discard")&&!t.y.isInRange(g))return null;var x=[{x:d+f,y:g},{x:d,y:g}];return l==="left"?x.reverse():x}if(r){var v=c.x,y=t.x.apply(v,{position:a});if(Jo(c,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:u+p},{x:y,y:u}];return o==="top"?w.reverse():w}if(i){var b=c.segment,_=b.map(function(T){return t.apply(T,{position:a})});return Jo(c,"discard")&&U8e(_,function(T){return!t.isInRange(T)})?null:_}return null};function tWe(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,a=e.shape,o=e.className,l=e.alwaysShow,c=L6e(),d=_re(i),u=xre(s),f=F6e();if(!c||!f)return null;Dl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=LI({x:d.scale,y:u.scale}),m=xi(t),g=xi(r),x=n&&n.length===2,v=eWe(p,m,g,x,f,e.position,d.orientation,u.orientation,e);if(!v)return null;var y=q6e(v,2),w=y[0],b=w.x,_=w.y,T=y[1],M=T.x,k=T.y,j=Jo(e,"hidden")?"url(#".concat(c,")"):void 0,A=g6(g6({clipPath:j},Qt(e,!0)),{},{x1:b,y1:_,x2:M,y2:k});return se.createElement(zr,{className:dr("recharts-reference-line",o)},J6e(a,A),ji.renderCallByParent(e,$6e({x1:b,y1:_,x2:M,y2:k})))}var BI=function(e){function t(){return B6e(this,t),U6e(this,t,arguments)}return H6e(t,e),V6e(t,[{key:"render",value:function(){return se.createElement(tWe,this.props)}}])}(se.Component);FI(BI,"displayName","ReferenceLine");FI(BI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function T2(){return T2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T2.apply(this,arguments)}function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function v6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v6(Object(r),!0).forEach(function(n){VT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sre(n.key),n)}}function iWe(e,t,r){return t&&nWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sWe(e,t,r){return t=Fw(t),aWe(e,kre()?Reflect.construct(t,r||[],Fw(e).constructor):t.apply(e,r))}function aWe(e,t){if(t&&($p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oWe(e)}function oWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kre=function(){return!!e})()}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fw(e)}function lWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M2(e,t)}function M2(e,t){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},M2(e,t)}function VT(e,t,r){return t=Sre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sre(e){var t=cWe(e,"string");return $p(t)=="symbol"?t:t+""}function cWe(e,t){if($p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uWe=function(t){var r=t.x,n=t.y,i=t.xAxis,s=t.yAxis,a=LI({x:i.scale,y:s.scale}),o=a.apply({x:r,y:n},{bandAware:!0});return Jo(t,"discard")&&!a.isInRange(o)?null:o},UT=function(e){function t(){return rWe(this,t),sWe(this,t,arguments)}return lWe(t,e),iWe(t,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,a=n.r,o=n.alwaysShow,l=n.clipPathId,c=xi(i),d=xi(s);if(Dl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!d)return null;var u=uWe(this.props);if(!u)return null;var f=u.x,p=u.y,m=this.props,g=m.shape,x=m.className,v=Jo(this.props,"hidden")?"url(#".concat(l,")"):void 0,y=_6(_6({clipPath:v},Qt(this.props,!0)),{},{cx:f,cy:p});return se.createElement(zr,{className:dr("recharts-reference-dot",x)},t.renderDot(g,y),ji.renderCallByParent(this.props,{x:f-a,y:p-a,width:2*a,height:2*a}))}}])}(se.Component);VT(UT,"displayName","ReferenceDot");VT(UT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});VT(UT,"renderDot",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):lr(e)?r=e(t):r=se.createElement(RI,T2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k2.apply(this,arguments)}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(n){WT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ere(n.key),n)}}function hWe(e,t,r){return t&&fWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pWe(e,t,r){return t=Bw(t),mWe(e,Pre()?Reflect.construct(t,r||[],Bw(e).constructor):t.apply(e,r))}function mWe(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gWe(e)}function gWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pre=function(){return!!e})()}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bw(e)}function yWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S2(e,t)}function S2(e,t){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S2(e,t)}function WT(e,t,r){return t=Ere(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ere(e){var t=vWe(e,"string");return Ip(t)=="symbol"?t:t+""}function vWe(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _We=function(t,r,n,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,d=s.xAxis,u=s.yAxis;if(!d||!u)return null;var f=LI({x:d.scale,y:u.scale}),p={x:t?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:r?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(c,{position:"end"}):f.y.rangeMax};return Jo(s,"discard")&&(!f.isInRange(p)||!f.isInRange(m))?null:dre(p,m)},GT=function(e){function t(){return dWe(this,t),pWe(this,t,arguments)}return yWe(t,e),hWe(t,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,a=n.y1,o=n.y2,l=n.className,c=n.alwaysShow,d=n.clipPathId;Dl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=xi(i),f=xi(s),p=xi(a),m=xi(o),g=this.props.shape;if(!u&&!f&&!p&&!m&&!g)return null;var x=_We(u,f,p,m,this.props);if(!x&&!g)return null;var v=Jo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return se.createElement(zr,{className:dr("recharts-reference-area",l)},t.renderRect(g,b6(b6({clipPath:v},Qt(this.props,!0)),x)),ji.renderCallByParent(this.props,x))}}])}(se.Component);WT(GT,"displayName","ReferenceArea");WT(GT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});WT(GT,"renderRect",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):lr(e)?r=e(t):r=se.createElement(DI,k2({},t,{className:"recharts-reference-area-rect"})),r});function Cre(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function xWe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return N6e(n,r)}function bWe(e,t,r){var n=r==="width",i=e.x,s=e.y,a=e.width,o=e.height;return t===1?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function zw(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function wWe(e,t){return Cre(e,t+1)}function TWe(e,t,r,n,i){for(var s=(n||[]).slice(),a=t.start,o=t.end,l=0,c=1,d=a,u=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:Cre(n,c)};var g=l,x,v=function(){return x===void 0&&(x=r(m,g)),x},y=m.coordinate,w=l===0||zw(e,y,v,d,o);w||(l=0,d=a,c+=1),w&&(d=y+e*(v()/2+i),l+=c)},f;c<=s.length;)if(f=u(),f)return f.v;return[]}function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(n){MWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MWe(e,t,r){return t=kWe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kWe(e){var t=SWe(e,"string");return Ev(t)=="symbol"?t:t+""}function SWe(e,t){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PWe(e,t,r,n,i){for(var s=(n||[]).slice(),a=s.length,o=t.start,l=t.end,c=function(f){var p=s[f],m,g=function(){return m===void 0&&(m=r(p,f)),m};if(f===a-1){var x=e*(p.coordinate+e*g()/2-l);s[f]=p=es(es({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else s[f]=p=es(es({},p),{},{tickCoord:p.coordinate});var v=zw(e,p.tickCoord,g,o,l);v&&(l=p.tickCoord-e*(g()/2+i),s[f]=es(es({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)c(d);return s}function EWe(e,t,r,n,i,s){var a=(n||[]).slice(),o=a.length,l=t.start,c=t.end;if(s){var d=n[o-1],u=r(d,o-1),f=e*(d.coordinate+e*u/2-c);a[o-1]=d=es(es({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var p=zw(e,d.tickCoord,function(){return u},l,c);p&&(c=d.tickCoord-e*(u/2+i),a[o-1]=es(es({},d),{},{isShow:!0}))}for(var m=s?o-1:o,g=function(y){var w=a[y],b,_=function(){return b===void 0&&(b=r(w,y)),b};if(y===0){var T=e*(w.coordinate-e*_()/2-l);a[y]=w=es(es({},w),{},{tickCoord:T<0?w.coordinate-T*e:w.coordinate})}else a[y]=w=es(es({},w),{},{tickCoord:w.coordinate});var M=zw(e,w.tickCoord,_,l,c);M&&(l=w.tickCoord+e*(_()/2+i),a[y]=es(es({},w),{},{isShow:!0}))},x=0;x<m;x++)g(x);return a}function CWe(e,t,r){var n=e.tick,i=e.ticks,s=e.viewBox,a=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!i||!i.length||!n)return[];if(dt(l)||Rl.isSsr)return wWe(i,typeof l=="number"&&dt(l)?l:0);var f=[],p=o==="top"||o==="bottom"?"width":"height",m=d&&p==="width"?oy(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(w,b){var _=lr(c)?c(w.value,b):w.value;return p==="width"?xWe(oy(_,{fontSize:t,letterSpacing:r}),m,u):oy(_,{fontSize:t,letterSpacing:r})[p]},x=i.length>=2?bs(i[1].coordinate-i[0].coordinate):1,v=bWe(s,x,p);return l==="equidistantPreserveStart"?TWe(x,v,g,i,a):(l==="preserveStart"||l==="preserveStartEnd"?f=EWe(x,v,g,i,a,l==="preserveStartEnd"):f=PWe(x,v,g,i,a),f.filter(function(y){return y.isShow}))}var jWe=["viewBox"],AWe=["viewBox"],OWe=["ticks"];function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sh.apply(this,arguments)}function T6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(r),!0).forEach(function(n){zI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aP(e,t){if(e==null)return{};var r=$We(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $We(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function IWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Are(n.key),n)}}function NWe(e,t,r){return t&&M6(e.prototype,t),r&&M6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DWe(e,t,r){return t=Vw(t),RWe(e,jre()?Reflect.construct(t,r||[],Vw(e).constructor):t.apply(e,r))}function RWe(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LWe(e)}function LWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jre=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vw(e)}function FWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P2(e,t)}function P2(e,t){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},P2(e,t)}function zI(e,t,r){return t=Are(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Are(e){var t=BWe(e,"string");return Np(t)=="symbol"?t:t+""}function BWe(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HT=function(e){function t(r){var n;return IWe(this,t),n=DWe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return FWe(t,e),NWe(t,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,a=aP(n,jWe),o=this.props,l=o.viewBox,c=aP(o,AWe);return!Vh(s,l)||!Vh(a,c)||!Vh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,d=i.tickSize,u=i.mirror,f=i.tickMargin,p,m,g,x,v,y,w=u?-1:1,b=n.tickSize||d,_=dt(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":p=m=n.coordinate,x=a+ +!u*l,g=x-w*b,y=g-w*f,v=_;break;case"left":g=x=n.coordinate,m=s+ +!u*o,p=m-w*b,v=p-w*f,y=_;break;case"right":g=x=n.coordinate,m=s+ +u*o,p=m+w*b,v=p+w*f,y=_;break;default:p=m=n.coordinate,x=a+ +u*l,g=x+w*b,y=g+w*f,v=_;break}return{line:{x1:p,y1:g,x2:m,y2:x},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.orientation,c=n.mirror,d=n.axisLine,u=fs(fs(fs({},Qt(this.props,!1)),Qt(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);u=fs(fs({},u),{},{x1:i,y1:s+f*o,x2:i+a,y2:s+f*o})}else{var p=+(l==="left"&&!c||l==="right"&&c);u=fs(fs({},u),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+o})}return se.createElement("line",Sh({},u,{className:dr("recharts-cartesian-axis-line",oa(d,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,d=o.tick,u=o.tickFormatter,f=o.unit,p=CWe(fs(fs({},this.props),{},{ticks:n}),i,s),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=Qt(this.props,!1),v=Qt(d,!1),y=fs(fs({},x),{},{fill:"none"},Qt(l,!1)),w=p.map(function(b,_){var T=a.getTickLineCoord(b),M=T.line,k=T.tick,j=fs(fs(fs(fs({textAnchor:m,verticalAnchor:g},x),{},{stroke:"none",fill:c},v),k),{},{index:_,payload:b,visibleTicksCount:p.length,tickFormatter:u});return se.createElement(zr,Sh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},Qd(a.props,b,_)),l&&se.createElement("line",Sh({},y,M,{className:dr("recharts-cartesian-axis-tick-line",oa(l,"className"))})),d&&t.renderTickItem(d,j,"".concat(lr(u)?u(b.value,_):b.value).concat(f||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,d=i.hide;if(d)return null;var u=this.props,f=u.ticks,p=aP(u,OWe),m=f;return lr(l)&&(m=f&&f.length>0?l(this.props):l(p)),a<=0||o<=0||!m||!m.length?null:se.createElement(zr,{className:dr("recharts-cartesian-axis",c),ref:function(x){n.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),ji.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return se.isValidElement(n)?a=se.cloneElement(n,i):lr(n)?a=n(i):a=se.createElement(Zd,Sh({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(E.Component);zI(HT,"displayName","CartesianAxis");zI(HT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function zWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ire(n.key),n)}}function UWe(e,t,r){return t&&VWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WWe(e,t,r){return t=Uw(t),GWe(e,Ore()?Reflect.construct(t,r||[],Uw(e).constructor):t.apply(e,r))}function GWe(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HWe(e)}function HWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ore(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ore=function(){return!!e})()}function Uw(e){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uw(e)}function KWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E2(e,t)}function E2(e,t){return E2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},E2(e,t)}function $re(e,t,r){return t=Ire(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ire(e){var t=qWe(e,"string");return Dp(t)=="symbol"?t:t+""}function qWe(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C2(){return C2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C2.apply(this,arguments)}function XWe(e){var t=e.xAxisId,r=bre(),n=wre(),i=_re(t);return i==null?null:se.createElement(HT,C2({},i,{className:dr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return Ed(a,!0)}}))}var KT=function(e){function t(){return zWe(this,t),WWe(this,t,arguments)}return KWe(t,e),UWe(t,[{key:"render",value:function(){return se.createElement(XWe,this.props)}}])}(se.Component);$re(KT,"displayName","XAxis");$re(KT,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function YWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rre(n.key),n)}}function ZWe(e,t,r){return t&&QWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JWe(e,t,r){return t=Ww(t),eGe(e,Nre()?Reflect.construct(t,r||[],Ww(e).constructor):t.apply(e,r))}function eGe(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tGe(e)}function tGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nre=function(){return!!e})()}function Ww(e){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ww(e)}function rGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j2(e,t)}function j2(e,t){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},j2(e,t)}function Dre(e,t,r){return t=Rre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rre(e){var t=nGe(e,"string");return Rp(t)=="symbol"?t:t+""}function nGe(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A2.apply(this,arguments)}var iGe=function(t){var r=t.yAxisId,n=bre(),i=wre(),s=xre(r);return s==null?null:se.createElement(HT,A2({},s,{className:dr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return Ed(o,!0)}}))},qT=function(e){function t(){return YWe(this,t),JWe(this,t,arguments)}return rGe(t,e),ZWe(t,[{key:"render",value:function(){return se.createElement(iGe,this.props)}}])}(se.Component);Dre(qT,"displayName","YAxis");Dre(qT,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function k6(e){return lGe(e)||oGe(e)||aGe(e)||sGe()}function sGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aGe(e,t){if(e){if(typeof e=="string")return O2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O2(e,t)}}function oGe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lGe(e){if(Array.isArray(e))return O2(e)}function O2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $2=function(t,r,n,i,s){var a=Oa(t,BI),o=Oa(t,UT),l=[].concat(k6(a),k6(o)),c=Oa(t,GT),d="".concat(i,"Id"),u=i[0],f=r;if(l.length&&(f=l.reduce(function(g,x){if(x.props[d]===n&&Jo(x.props,"extendDomain")&&dt(x.props[u])){var v=x.props[u];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},f)),c.length){var p="".concat(u,"1"),m="".concat(u,"2");f=c.reduce(function(g,x){if(x.props[d]===n&&Jo(x.props,"extendDomain")&&dt(x.props[p])&&dt(x.props[m])){var v=x.props[p],y=x.props[m];return[Math.min(g[0],v,y),Math.max(g[1],v,y)]}return g},f)}return s&&s.length&&(f=s.reduce(function(g,x){return dt(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},f)),f},Lre={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,u,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,u||l,f),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)t.call(d,u)&&c.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=r?r+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,p=u.length,m=new Array(p);f<p;f++)m[f]=u[f].fn;return m},o.prototype.listenerCount=function(c){var d=r?r+c:c,u=this._events[d];return u?u.fn?1:u.length:0},o.prototype.emit=function(c,d,u,f,p,m){var g=r?r+c:c;if(!this._events[g])return!1;var x=this._events[g],v=arguments.length,y,w;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,u),!0;case 4:return x.fn.call(x.context,d,u,f),!0;case 5:return x.fn.call(x.context,d,u,f,p),!0;case 6:return x.fn.call(x.context,d,u,f,p,m),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];x.fn.apply(x.context,y)}else{var b=x.length,_;for(w=0;w<b;w++)switch(x[w].once&&this.removeListener(c,x[w].fn,void 0,!0),v){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,u);break;case 4:x[w].fn.call(x[w].context,d,u,f);break;default:if(!y)for(_=1,y=new Array(v-1);_<v;_++)y[_-1]=arguments[_];x[w].fn.apply(x[w].context,y)}}return!0},o.prototype.on=function(c,d,u){return s(this,c,d,u,!1)},o.prototype.once=function(c,d,u){return s(this,c,d,u,!0)},o.prototype.removeListener=function(c,d,u,f){var p=r?r+c:c;if(!this._events[p])return this;if(!d)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!f||m.once)&&(!u||m.context===u)&&a(this,p);else{for(var g=0,x=[],v=m.length;g<v;g++)(m[g].fn!==d||f&&!m[g].once||u&&m[g].context!==u)&&x.push(m[g]);x.length?this._events[p]=x.length===1?x[0]:x:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Lre);var cGe=Lre.exports;const uGe=Ir(cGe);var oP=new uGe,lP="recharts.syncMouseEvents";function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}function dGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fGe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fre(n.key),n)}}function hGe(e,t,r){return t&&fGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cP(e,t,r){return t=Fre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fre(e){var t=pGe(e,"string");return Cv(t)=="symbol"?t:t+""}function pGe(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mGe=function(){function e(){dGe(this,e),cP(this,"activeIndex",0),cP(this,"coordinateList",[]),cP(this,"layout","horizontal")}return hGe(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,a=r.container,o=a===void 0?null:a,l=r.layout,c=l===void 0?null:l,d=r.offset,u=d===void 0?null:d,f=r.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=s+l+c,f=a+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:u,pageY:f})}}}])}();function gGe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&dt(n)&&dt(i))return!0}return!1}function yGe(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Bre(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle,a=an(t,r,n,i),o=an(t,r,n,s);return{points:[a,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function vGe(e,t,r){var n,i,s,a;if(e==="horizontal")n=t.x,s=n,i=r.top,a=r.top+r.height;else if(e==="vertical")i=t.y,a=i,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,f=an(o,l,c,u),p=an(o,l,d,u);n=f.x,i=f.y,s=p.x,a=p.y}else return Bre(t);return[{x:n,y:i},{x:s,y:a}]}function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function S6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(r),!0).forEach(function(n){_Ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ge(e,t,r){return t=xGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xGe(e){var t=bGe(e,"string");return jv(t)=="symbol"?t:t+""}function bGe(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wGe(e){var t,r,n=e.element,i=e.tooltipEventType,s=e.isActive,a=e.activeCoordinate,o=e.activePayload,l=e.offset,c=e.activeTooltipIndex,d=e.tooltipAxisBandSize,u=e.layout,f=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!s||!a||f!=="ScatterChart"&&i!=="axis")return null;var m,g=r2;if(f==="ScatterChart")m=a,g=jUe;else if(f==="BarChart")m=yGe(u,a,l,d),g=DI;else if(u==="radial"){var x=Bre(a),v=x.cx,y=x.cy,w=x.radius,b=x.startAngle,_=x.endAngle;m={cx:v,cy:y,startAngle:b,endAngle:_,innerRadius:w,outerRadius:w},g=Lte}else m={points:vGe(u,a,l)},g=r2;var T=dx(dx(dx(dx({stroke:"#ccc",pointerEvents:"none"},l),m),Qt(p,!1)),{},{payload:o,payloadIndex:c,className:dr("recharts-tooltip-cursor",p.className)});return E.isValidElement(p)?E.cloneElement(p,T):E.createElement(g,T)}var TGe=["item"],MGe=["children","className","width","height","style","compact","title","desc"];function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}function P6(e,t){return PGe(e)||SGe(e,t)||Vre(e,t)||kGe()}function kGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SGe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function PGe(e){if(Array.isArray(e))return e}function E6(e,t){if(e==null)return{};var r=EGe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EGe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function CGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jGe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ure(n.key),n)}}function AGe(e,t,r){return t&&jGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OGe(e,t,r){return t=Gw(t),$Ge(e,zre()?Reflect.construct(t,r||[],Gw(e).constructor):t.apply(e,r))}function $Ge(e,t){if(t&&(Lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IGe(e)}function IGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zre=function(){return!!e})()}function Gw(e){return Gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gw(e)}function NGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}function I2(e,t){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},I2(e,t)}function Fp(e){return LGe(e)||RGe(e)||Vre(e)||DGe()}function DGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vre(e,t){if(e){if(typeof e=="string")return N2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N2(e,t)}}function RGe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LGe(e){if(Array.isArray(e))return N2(e)}function N2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(n){Xt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xt(e,t,r){return t=Ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ure(e){var t=FGe(e,"string");return Lp(t)=="symbol"?t:t+""}function FGe(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BGe={xAxis:["bottom","top"],yAxis:["left","right"]},zGe={width:"100%",height:"100%"},Wre={x:0,y:0};function fx(e){return e}var VGe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},UGe=function(t,r,n,i){var s=r.find(function(d){return d&&d.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var a=s.coordinate,o=i.radius;return Ve(Ve(Ve({},i),an(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return Ve(Ve(Ve({},i),an(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Wre},XT=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,a=(n??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Fp(o),Fp(c)):o},[]);return a.length>0?a:t&&t.length&&dt(i)&&dt(s)?t.slice(i,s+1):[]};function Gre(e){return e==="number"?[0,"auto"]:void 0}var D2=function(t,r,n,i){var s=t.graphicalItems,a=t.tooltipAxis,o=XT(r,t);return n<0||!s||!s.length||n>=o.length?null:s.reduce(function(l,c){var d,u=(d=c.props.data)!==null&&d!==void 0?d:r;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var p=u===void 0?o:u;f=uj(p,a.dataKey,i)}else f=u&&u[n]||o[n];return f?[].concat(Fp(l),[Ote(c,f)]):l},[])},j6=function(t,r,n,i){var s=i||{x:t.chartX,y:t.chartY},a=VGe(s,n),o=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,d=u4e(a,o,c,l);if(d>=0&&c){var u=c[d]&&c[d].value,f=D2(t,r,d,u),p=UGe(n,o,d,s);return{activeTooltipIndex:d,activeLabel:u,activePayload:f,activeCoordinate:p}}return null},WGe=function(t,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=t.layout,u=t.children,f=t.stackOffset,p=Pte(d,s);return n.reduce(function(m,g){var x,v=g.type.defaultProps!==void 0?Ve(Ve({},g.type.defaultProps),g.props):g.props,y=v.type,w=v.dataKey,b=v.allowDataOverflow,_=v.allowDuplicatedCategory,T=v.scale,M=v.ticks,k=v.includeHidden,j=v[a];if(m[j])return m;var A=XT(t.data,{graphicalItems:i.filter(function(D){var K,oe=a in D.props?D.props[a]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[a];return oe===j}),dataStartIndex:l,dataEndIndex:c}),R=A.length,I,$,F;gGe(v.domain,b,y)&&(I=Qj(v.domain,null,b),p&&(y==="number"||T!=="auto")&&(F=cy(A,w,"category")));var V=Gre(y);if(!I||I.length===0){var G,H=(G=v.domain)!==null&&G!==void 0?G:V;if(w){if(I=cy(A,w,y),y==="category"&&p){var B=eEe(I);_&&B?($=I,I=$w(0,R)):_||(I=n8(H,I,g).reduce(function(D,K){return D.indexOf(K)>=0?D:[].concat(Fp(D),[K])},[]))}else if(y==="category")_?I=I.filter(function(D){return D!==""&&!vr(D)}):I=n8(H,I,g).reduce(function(D,K){return D.indexOf(K)>=0||K===""||vr(K)?D:[].concat(Fp(D),[K])},[]);else if(y==="number"){var te=m4e(A,i.filter(function(D){var K,oe,_e=a in D.props?D.props[a]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[a],de="hide"in D.props?D.props.hide:(oe=D.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return _e===j&&(k||!de)}),w,s,d);te&&(I=te)}p&&(y==="number"||T!=="auto")&&(F=cy(A,w,"category"))}else p?I=$w(0,R):o&&o[j]&&o[j].hasStack&&y==="number"?I=f==="expand"?[0,1]:Ate(o[j].stackGroups,l,c):I=Ste(A,i.filter(function(D){var K=a in D.props?D.props[a]:D.type.defaultProps[a],oe="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return K===j&&(k||!oe)}),y,d,!0);if(y==="number")I=$2(u,I,j,s,M),H&&(I=Qj(H,I,b));else if(y==="category"&&H){var ae=H,z=I.every(function(D){return ae.indexOf(D)>=0});z&&(I=ae)}}return Ve(Ve({},m),{},Xt({},j,Ve(Ve({},v),{},{axisType:s,domain:I,categoricalDomain:F,duplicateDomain:$,originalDomain:(x=v.domain)!==null&&x!==void 0?x:V,isCategorical:p,layout:d})))},{})},GGe=function(t,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=t.layout,u=t.children,f=XT(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=f.length,m=Pte(d,s),g=-1;return n.reduce(function(x,v){var y=v.type.defaultProps!==void 0?Ve(Ve({},v.type.defaultProps),v.props):v.props,w=y[a],b=Gre("number");if(!x[w]){g++;var _;return m?_=$w(0,p):o&&o[w]&&o[w].hasStack?(_=Ate(o[w].stackGroups,l,c),_=$2(u,_,w,s)):(_=Qj(b,Ste(f,n.filter(function(T){var M,k,j=a in T.props?T.props[a]:(M=T.type.defaultProps)===null||M===void 0?void 0:M[a],A="hide"in T.props?T.props.hide:(k=T.type.defaultProps)===null||k===void 0?void 0:k.hide;return j===w&&!A}),"number",d),i.defaultProps.allowDataOverflow),_=$2(u,_,w,s)),Ve(Ve({},x),{},Xt({},w,Ve(Ve({axisType:s},i.defaultProps),{},{hide:!0,orientation:oa(BGe,"".concat(s,".").concat(g%2),null),domain:_,originalDomain:b,isCategorical:m,layout:d})))}return x},{})},HGe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,a=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=t.children,u="".concat(i,"Id"),f=Oa(d,s),p={};return f&&f.length?p=WGe(t,{axes:f,graphicalItems:a,axisType:i,axisIdKey:u,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(p=GGe(t,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:u,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),p},KGe=function(t){var r=th(t),n=Ed(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:cI(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:bw(r,n)}},A6=function(t){var r=t.children,n=t.defaultShowTooltip,i=Qs(r,jp),s=0,a=0;return t.data&&t.data.length!==0&&(a=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},qGe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Nl(r&&r.type);return n&&n.indexOf("Bar")>=0})},O6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XGe=function(t,r){var n=t.props,i=t.graphicalItems,s=t.xAxisMap,a=s===void 0?{}:s,o=t.yAxisMap,l=o===void 0?{}:o,c=n.width,d=n.height,u=n.children,f=n.margin||{},p=Qs(u,jp),m=Qs(u,Uh),g=Object.keys(l).reduce(function(_,T){var M=l[T],k=M.orientation;return!M.mirror&&!M.hide?Ve(Ve({},_),{},Xt({},k,_[k]+M.width)):_},{left:f.left||0,right:f.right||0}),x=Object.keys(a).reduce(function(_,T){var M=a[T],k=M.orientation;return!M.mirror&&!M.hide?Ve(Ve({},_),{},Xt({},k,oa(_,"".concat(k))+M.height)):_},{top:f.top||0,bottom:f.bottom||0}),v=Ve(Ve({},x),g),y=v.bottom;p&&(v.bottom+=p.props.height||jp.defaultProps.height),m&&r&&(v=h4e(v,i,n,r));var w=c-v.left-v.right,b=d-v.top-v.bottom;return Ve(Ve({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(b,0)})},YGe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Hre=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,a=t.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=t.axisComponents,c=t.legendContent,d=t.formatAxisMap,u=t.defaultProps,f=function(x,v){var y=v.graphicalItems,w=v.stackGroups,b=v.offset,_=v.updateId,T=v.dataStartIndex,M=v.dataEndIndex,k=x.barSize,j=x.layout,A=x.barGap,R=x.barCategoryGap,I=x.maxBarSize,$=O6(j),F=$.numericAxisName,V=$.cateAxisName,G=qGe(y),H=[];return y.forEach(function(B,te){var ae=XT(x.data,{graphicalItems:[B],dataStartIndex:T,dataEndIndex:M}),z=B.type.defaultProps!==void 0?Ve(Ve({},B.type.defaultProps),B.props):B.props,D=z.dataKey,K=z.maxBarSize,oe=z["".concat(F,"Id")],_e=z["".concat(V,"Id")],de={},ve=l.reduce(function(fe,ke){var je=v["".concat(ke.axisType,"Map")],me=z["".concat(ke.axisType,"Id")];je&&je[me]||ke.axisType==="zAxis"||ef();var Fe=je[me];return Ve(Ve({},fe),{},Xt(Xt({},ke.axisType,Fe),"".concat(ke.axisType,"Ticks"),Ed(Fe)))},de),Ie=ve[V],Se=ve["".concat(V,"Ticks")],ge=w&&w[oe]&&w[oe].hasStack&&M4e(B,w[oe].stackGroups),J=Nl(B.type).indexOf("Bar")>=0,ee=bw(Ie,Se),Z=[],we=G&&d4e({barSize:k,stackGroups:w,totalSize:YGe(ve,V)});if(J){var $e,Ce,Pe=vr(K)?I:K,Q=($e=(Ce=bw(Ie,Se,!0))!==null&&Ce!==void 0?Ce:Pe)!==null&&$e!==void 0?$e:0;Z=f4e({barGap:A,barCategoryGap:R,bandSize:Q!==ee?Q:ee,sizeList:we[_e],maxBarSize:Pe}),Q!==ee&&(Z=Z.map(function(fe){return Ve(Ve({},fe),{},{position:Ve(Ve({},fe.position),{},{offset:fe.position.offset-Q/2})})}))}var re=B&&B.type&&B.type.getComposedData;re&&H.push({props:Ve(Ve({},re(Ve(Ve({},ve),{},{displayedData:ae,props:x,dataKey:D,item:B,bandSize:ee,barPosition:Z,offset:b,stackedData:ge,layout:j,dataStartIndex:T,dataEndIndex:M}))),{},Xt(Xt(Xt({key:B.key||"item-".concat(te)},F,ve[F]),V,ve[V]),"animationId",_)),childIndex:dEe(B,x.children),item:B})}),H},p=function(x,v){var y=x.props,w=x.dataStartIndex,b=x.dataEndIndex,_=x.updateId;if(!YV({props:y}))return null;var T=y.children,M=y.layout,k=y.stackOffset,j=y.data,A=y.reverseStackOrder,R=O6(M),I=R.numericAxisName,$=R.cateAxisName,F=Oa(T,n),V=w4e(j,F,"".concat(I,"Id"),"".concat($,"Id"),k,A),G=l.reduce(function(z,D){var K="".concat(D.axisType,"Map");return Ve(Ve({},z),{},Xt({},K,HGe(y,Ve(Ve({},D),{},{graphicalItems:F,stackGroups:D.axisType===I&&V,dataStartIndex:w,dataEndIndex:b}))))},{}),H=XGe(Ve(Ve({},G),{},{props:y,graphicalItems:F}),v==null?void 0:v.legendBBox);Object.keys(G).forEach(function(z){G[z]=d(y,G[z],H,z.replace("Map",""),r)});var B=G["".concat($,"Map")],te=KGe(B),ae=f(y,Ve(Ve({},G),{},{dataStartIndex:w,dataEndIndex:b,updateId:_,graphicalItems:F,stackGroups:V,offset:H}));return Ve(Ve({formattedGraphicalItems:ae,graphicalItems:F,offset:H,stackGroups:V},te),G)},m=function(g){function x(v){var y,w,b;return CGe(this,x),b=OGe(this,x,[v]),Xt(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(b,"accessibilityManager",new mGe),Xt(b,"handleLegendBBoxUpdate",function(_){if(_){var T=b.state,M=T.dataStartIndex,k=T.dataEndIndex,j=T.updateId;b.setState(Ve({legendBBox:_},p({props:b.props,dataStartIndex:M,dataEndIndex:k,updateId:j},Ve(Ve({},b.state),{},{legendBBox:_}))))}}),Xt(b,"handleReceiveSyncEvent",function(_,T,M){if(b.props.syncId===_){if(M===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(T)}}),Xt(b,"handleBrushChange",function(_){var T=_.startIndex,M=_.endIndex;if(T!==b.state.dataStartIndex||M!==b.state.dataEndIndex){var k=b.state.updateId;b.setState(function(){return Ve({dataStartIndex:T,dataEndIndex:M},p({props:b.props,dataStartIndex:T,dataEndIndex:M,updateId:k},b.state))}),b.triggerSyncEvent({dataStartIndex:T,dataEndIndex:M})}}),Xt(b,"handleMouseEnter",function(_){var T=b.getMouseInfo(_);if(T){var M=Ve(Ve({},T),{},{isTooltipActive:!0});b.setState(M),b.triggerSyncEvent(M);var k=b.props.onMouseEnter;lr(k)&&k(M,_)}}),Xt(b,"triggeredAfterMouseMove",function(_){var T=b.getMouseInfo(_),M=T?Ve(Ve({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(M),b.triggerSyncEvent(M);var k=b.props.onMouseMove;lr(k)&&k(M,_)}),Xt(b,"handleItemMouseEnter",function(_){b.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Xt(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Xt(b,"handleMouseMove",function(_){_.persist(),b.throttleTriggeredAfterMouseMove(_)}),Xt(b,"handleMouseLeave",function(_){b.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};b.setState(T),b.triggerSyncEvent(T);var M=b.props.onMouseLeave;lr(M)&&M(T,_)}),Xt(b,"handleOuterEvent",function(_){var T=uEe(_),M=oa(b.props,"".concat(T));if(T&&lr(M)){var k,j;/.*touch.*/i.test(T)?j=b.getMouseInfo(_.changedTouches[0]):j=b.getMouseInfo(_),M((k=j)!==null&&k!==void 0?k:{},_)}}),Xt(b,"handleClick",function(_){var T=b.getMouseInfo(_);if(T){var M=Ve(Ve({},T),{},{isTooltipActive:!0});b.setState(M),b.triggerSyncEvent(M);var k=b.props.onClick;lr(k)&&k(M,_)}}),Xt(b,"handleMouseDown",function(_){var T=b.props.onMouseDown;if(lr(T)){var M=b.getMouseInfo(_);T(M,_)}}),Xt(b,"handleMouseUp",function(_){var T=b.props.onMouseUp;if(lr(T)){var M=b.getMouseInfo(_);T(M,_)}}),Xt(b,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Xt(b,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&b.handleMouseDown(_.changedTouches[0])}),Xt(b,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&b.handleMouseUp(_.changedTouches[0])}),Xt(b,"triggerSyncEvent",function(_){b.props.syncId!==void 0&&oP.emit(lP,b.props.syncId,_,b.eventEmitterSymbol)}),Xt(b,"applySyncEvent",function(_){var T=b.props,M=T.layout,k=T.syncMethod,j=b.state.updateId,A=_.dataStartIndex,R=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)b.setState(Ve({dataStartIndex:A,dataEndIndex:R},p({props:b.props,dataStartIndex:A,dataEndIndex:R,updateId:j},b.state)));else if(_.activeTooltipIndex!==void 0){var I=_.chartX,$=_.chartY,F=_.activeTooltipIndex,V=b.state,G=V.offset,H=V.tooltipTicks;if(!G)return;if(typeof k=="function")F=k(H,_);else if(k==="value"){F=-1;for(var B=0;B<H.length;B++)if(H[B].value===_.activeLabel){F=B;break}}var te=Ve(Ve({},G),{},{x:G.left,y:G.top}),ae=Math.min(I,te.x+te.width),z=Math.min($,te.y+te.height),D=H[F]&&H[F].value,K=D2(b.state,b.props.data,F),oe=H[F]?{x:M==="horizontal"?H[F].coordinate:ae,y:M==="horizontal"?z:H[F].coordinate}:Wre;b.setState(Ve(Ve({},_),{},{activeLabel:D,activeCoordinate:oe,activePayload:K,activeTooltipIndex:F}))}else b.setState(_)}),Xt(b,"renderCursor",function(_){var T,M=b.state,k=M.isTooltipActive,j=M.activeCoordinate,A=M.activePayload,R=M.offset,I=M.activeTooltipIndex,$=M.tooltipAxisBandSize,F=b.getTooltipEventType(),V=(T=_.props.active)!==null&&T!==void 0?T:k,G=b.props.layout,H=_.key||"_recharts-cursor";return se.createElement(wGe,{key:H,activeCoordinate:j,activePayload:A,activeTooltipIndex:I,chartName:r,element:_,isActive:V,layout:G,offset:R,tooltipAxisBandSize:$,tooltipEventType:F})}),Xt(b,"renderPolarAxis",function(_,T,M){var k=oa(_,"type.axisType"),j=oa(b.state,"".concat(k,"Map")),A=_.type.defaultProps,R=A!==void 0?Ve(Ve({},A),_.props):_.props,I=j&&j[R["".concat(k,"Id")]];return E.cloneElement(_,Ve(Ve({},I),{},{className:dr(k,I.className),key:_.key||"".concat(T,"-").concat(M),ticks:Ed(I,!0)}))}),Xt(b,"renderPolarGrid",function(_){var T=_.props,M=T.radialLines,k=T.polarAngles,j=T.polarRadius,A=b.state,R=A.radiusAxisMap,I=A.angleAxisMap,$=th(R),F=th(I),V=F.cx,G=F.cy,H=F.innerRadius,B=F.outerRadius;return E.cloneElement(_,{polarAngles:Array.isArray(k)?k:Ed(F,!0).map(function(te){return te.coordinate}),polarRadius:Array.isArray(j)?j:Ed($,!0).map(function(te){return te.coordinate}),cx:V,cy:G,innerRadius:H,outerRadius:B,key:_.key||"polar-grid",radialLines:M})}),Xt(b,"renderLegend",function(){var _=b.state.formattedGraphicalItems,T=b.props,M=T.children,k=T.width,j=T.height,A=b.props.margin||{},R=k-(A.left||0)-(A.right||0),I=Mte({children:M,formattedGraphicalItems:_,legendWidth:R,legendContent:c});if(!I)return null;var $=I.item,F=E6(I,TGe);return E.cloneElement($,Ve(Ve({},F),{},{chartWidth:k,chartHeight:j,margin:A,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Xt(b,"renderTooltip",function(){var _,T=b.props,M=T.children,k=T.accessibilityLayer,j=Qs(M,Tl);if(!j)return null;var A=b.state,R=A.isTooltipActive,I=A.activeCoordinate,$=A.activePayload,F=A.activeLabel,V=A.offset,G=(_=j.props.active)!==null&&_!==void 0?_:R;return E.cloneElement(j,{viewBox:Ve(Ve({},V),{},{x:V.left,y:V.top}),active:G,label:F,payload:G?$:[],coordinate:I,accessibilityLayer:k})}),Xt(b,"renderBrush",function(_){var T=b.props,M=T.margin,k=T.data,j=b.state,A=j.offset,R=j.dataStartIndex,I=j.dataEndIndex,$=j.updateId;return E.cloneElement(_,{key:_.key||"_recharts-brush",onChange:ox(b.handleBrushChange,_.props.onChange),data:k,x:dt(_.props.x)?_.props.x:A.left,y:dt(_.props.y)?_.props.y:A.top+A.height+A.brushBottom-(M.bottom||0),width:dt(_.props.width)?_.props.width:A.width,startIndex:R,endIndex:I,updateId:"brush-".concat($)})}),Xt(b,"renderReferenceElement",function(_,T,M){if(!_)return null;var k=b,j=k.clipPathId,A=b.state,R=A.xAxisMap,I=A.yAxisMap,$=A.offset,F=_.type.defaultProps||{},V=_.props,G=V.xAxisId,H=G===void 0?F.xAxisId:G,B=V.yAxisId,te=B===void 0?F.yAxisId:B;return E.cloneElement(_,{key:_.key||"".concat(T,"-").concat(M),xAxis:R[H],yAxis:I[te],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:j})}),Xt(b,"renderActivePoints",function(_){var T=_.item,M=_.activePoint,k=_.basePoint,j=_.childIndex,A=_.isRange,R=[],I=T.props.key,$=T.item.type.defaultProps!==void 0?Ve(Ve({},T.item.type.defaultProps),T.item.props):T.item.props,F=$.activeDot,V=$.dataKey,G=Ve(Ve({index:j,dataKey:V,cx:M.x,cy:M.y,r:4,fill:NI(T.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},Qt(F,!1)),qb(F));return R.push(x.renderActiveDot(F,G,"".concat(I,"-activePoint-").concat(j))),k?R.push(x.renderActiveDot(F,Ve(Ve({},G),{},{cx:k.x,cy:k.y}),"".concat(I,"-basePoint-").concat(j))):A&&R.push(null),R}),Xt(b,"renderGraphicChild",function(_,T,M){var k=b.filterFormatItem(_,T,M);if(!k)return null;var j=b.getTooltipEventType(),A=b.state,R=A.isTooltipActive,I=A.tooltipAxis,$=A.activeTooltipIndex,F=A.activeLabel,V=b.props.children,G=Qs(V,Tl),H=k.props,B=H.points,te=H.isRange,ae=H.baseLine,z=k.item.type.defaultProps!==void 0?Ve(Ve({},k.item.type.defaultProps),k.item.props):k.item.props,D=z.activeDot,K=z.hide,oe=z.activeBar,_e=z.activeShape,de=!!(!K&&R&&G&&(D||oe||_e)),ve={};j!=="axis"&&G&&G.props.trigger==="click"?ve={onClick:ox(b.handleItemMouseEnter,_.props.onClick)}:j!=="axis"&&(ve={onMouseLeave:ox(b.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:ox(b.handleItemMouseEnter,_.props.onMouseEnter)});var Ie=E.cloneElement(_,Ve(Ve({},k.props),ve));function Se(ke){return typeof I.dataKey=="function"?I.dataKey(ke.payload):null}if(de)if($>=0){var ge,J;if(I.dataKey&&!I.allowDuplicatedCategory){var ee=typeof I.dataKey=="function"?Se:"payload.".concat(I.dataKey.toString());ge=uj(B,ee,F),J=te&&ae&&uj(ae,ee,F)}else ge=B==null?void 0:B[$],J=te&&ae&&ae[$];if(_e||oe){var Z=_.props.activeIndex!==void 0?_.props.activeIndex:$;return[E.cloneElement(_,Ve(Ve(Ve({},k.props),ve),{},{activeIndex:Z})),null,null]}if(!vr(ge))return[Ie].concat(Fp(b.renderActivePoints({item:k,activePoint:ge,basePoint:J,childIndex:$,isRange:te})))}else{var we,$e=(we=b.getItemByXY(b.state.activeCoordinate))!==null&&we!==void 0?we:{graphicalItem:Ie},Ce=$e.graphicalItem,Pe=Ce.item,Q=Pe===void 0?_:Pe,re=Ce.childIndex,fe=Ve(Ve(Ve({},k.props),ve),{},{activeIndex:re});return[E.cloneElement(Q,fe),null,null]}return te?[Ie,null,null]:[Ie,null]}),Xt(b,"renderCustomized",function(_,T,M){return E.cloneElement(_,Ve(Ve({key:"recharts-customized-".concat(M)},b.props),b.state))}),Xt(b,"renderMap",{CartesianGrid:{handler:fx,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:fx},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:fx},YAxis:{handler:fx},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((y=v.id)!==null&&y!==void 0?y:y_("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=Tee(b.triggeredAfterMouseMove,(w=v.throttleDelay)!==null&&w!==void 0?w:1e3/60),b.state={},b}return NGe(x,g),AGe(x,[{key:"componentDidMount",value:function(){var y,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,w=y.children,b=y.data,_=y.height,T=y.layout,M=Qs(w,Tl);if(M){var k=M.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,A=D2(this.state,b,k,j),R=this.state.tooltipTicks[k].coordinate,I=(this.state.offset.top+_)/2,$=T==="horizontal",F=$?{x:R,y:I}:{y:R,x:I},V=this.state.formattedGraphicalItems.find(function(H){var B=H.item;return B.type.name==="Scatter"});V&&(F=Ve(Ve({},F),V.props.points[k].tooltipPosition),A=V.props.points[k].tooltipPayload);var G={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:j,activePayload:A,activeCoordinate:F};this.setState(G),this.renderCursor(M),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var b,_;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(y){fj([Qs(y.children,Tl)],[Qs(this.props.children,Tl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Qs(this.props.children,Tl);if(y&&typeof y.props.shared=="boolean"){var w=y.props.shared?"axis":"item";return o.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var w=this.container,b=w.getBoundingClientRect(),_=LRe(b),T={chartX:Math.round(y.pageX-_.left),chartY:Math.round(y.pageY-_.top)},M=b.width/w.offsetWidth||1,k=this.inRange(T.chartX,T.chartY,M);if(!k)return null;var j=this.state,A=j.xAxisMap,R=j.yAxisMap,I=this.getTooltipEventType();if(I!=="axis"&&A&&R){var $=th(A).scale,F=th(R).scale,V=$&&$.invert?$.invert(T.chartX):null,G=F&&F.invert?F.invert(T.chartY):null;return Ve(Ve({},T),{},{xValue:V,yValue:G})}var H=j6(this.state,this.props.data,this.props.layout,k);return H?Ve(Ve({},T),H):null}},{key:"inRange",value:function(y,w){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,T=y/b,M=w/b;if(_==="horizontal"||_==="vertical"){var k=this.state.offset,j=T>=k.left&&T<=k.left+k.width&&M>=k.top&&M<=k.top+k.height;return j?{x:T,y:M}:null}var A=this.state,R=A.angleAxisMap,I=A.radiusAxisMap;if(R&&I){var $=th(R);return a8({x:T,y:M},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,w=this.getTooltipEventType(),b=Qs(y,Tl),_={};b&&w==="axis"&&(b.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var T=qb(this.props,this.handleOuterEvent);return Ve(Ve({},T),_)}},{key:"addListener",value:function(){oP.on(lP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){oP.removeListener(lP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,w,b){for(var _=this.state.formattedGraphicalItems,T=0,M=_.length;T<M;T++){var k=_[T];if(k.item===y||k.props.key===y.key||w===Nl(k.item.type)&&b===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,w=this.state.offset,b=w.left,_=w.top,T=w.height,M=w.width;return se.createElement("defs",null,se.createElement("clipPath",{id:y},se.createElement("rect",{x:b,y:_,height:T,width:M})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(w,b){var _=P6(b,2),T=_[0],M=_[1];return Ve(Ve({},w),{},Xt({},T,M.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(w,b){var _=P6(b,2),T=_[0],M=_[1];return Ve(Ve({},w),{},Xt({},T,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(y){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(y){var w=this.state,b=w.formattedGraphicalItems,_=w.activeItem;if(b&&b.length)for(var T=0,M=b.length;T<M;T++){var k=b[T],j=k.props,A=k.item,R=A.type.defaultProps!==void 0?Ve(Ve({},A.type.defaultProps),A.props):A.props,I=Nl(A.type);if(I==="Bar"){var $=(j.data||[]).find(function(H){return uUe(y,H)});if($)return{graphicalItem:k,payload:$}}else if(I==="RadialBar"){var F=(j.data||[]).find(function(H){return a8(y,H)});if(F)return{graphicalItem:k,payload:F}}else if(FT(k,_)||BT(k,_)||Mv(k,_)){var V=Z5e({graphicalItem:k,activeTooltipItem:_,itemData:R.data}),G=R.activeIndex===void 0?V:R.activeIndex;return{graphicalItem:Ve(Ve({},k),{},{childIndex:G}),payload:Mv(k,_)?R.data[V]:k.props.data[V]}}}return null}},{key:"render",value:function(){var y=this;if(!YV(this))return null;var w=this.props,b=w.children,_=w.className,T=w.width,M=w.height,k=w.style,j=w.compact,A=w.title,R=w.desc,I=E6(w,MGe),$=Qt(I,!1);if(j)return se.createElement(p6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(pj,hy({},$,{width:T,height:M,title:A,desc:R}),this.renderClipPath(),ZV(b,this.renderMap)));if(this.props.accessibilityLayer){var F,V;$.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,$.role=(V=this.props.role)!==null&&V!==void 0?V:"application",$.onKeyDown=function(H){y.accessibilityManager.keyboardEvent(H)},$.onFocus=function(){y.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return se.createElement(p6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",hy({className:dr("recharts-wrapper",_),style:Ve({position:"relative",cursor:"default",width:T,height:M},k)},G,{ref:function(B){y.container=B}}),se.createElement(pj,hy({},$,{width:T,height:M,title:A,desc:R,style:zGe}),this.renderClipPath(),ZV(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(E.Component);return Xt(m,"displayName",r),Xt(m,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Xt(m,"getDerivedStateFromProps",function(g,x){var v=g.dataKey,y=g.data,w=g.children,b=g.width,_=g.height,T=g.layout,M=g.stackOffset,k=g.margin,j=x.dataStartIndex,A=x.dataEndIndex;if(x.updateId===void 0){var R=A6(g);return Ve(Ve(Ve({},R),{},{updateId:0},p(Ve(Ve({props:g},R),{},{updateId:0}),x)),{},{prevDataKey:v,prevData:y,prevWidth:b,prevHeight:_,prevLayout:T,prevStackOffset:M,prevMargin:k,prevChildren:w})}if(v!==x.prevDataKey||y!==x.prevData||b!==x.prevWidth||_!==x.prevHeight||T!==x.prevLayout||M!==x.prevStackOffset||!Vh(k,x.prevMargin)){var I=A6(g),$={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},F=Ve(Ve({},j6(x,y,T)),{},{updateId:x.updateId+1}),V=Ve(Ve(Ve({},I),$),F);return Ve(Ve(Ve({},V),p(Ve({props:g},V),x)),{},{prevDataKey:v,prevData:y,prevWidth:b,prevHeight:_,prevLayout:T,prevStackOffset:M,prevMargin:k,prevChildren:w})}if(!fj(w,x.prevChildren)){var G,H,B,te,ae=Qs(w,jp),z=ae&&(G=(H=ae.props)===null||H===void 0?void 0:H.startIndex)!==null&&G!==void 0?G:j,D=ae&&(B=(te=ae.props)===null||te===void 0?void 0:te.endIndex)!==null&&B!==void 0?B:A,K=z!==j||D!==A,oe=!vr(y),_e=oe&&!K?x.updateId:x.updateId+1;return Ve(Ve({updateId:_e},p(Ve(Ve({props:g},x),{},{updateId:_e,dataStartIndex:z,dataEndIndex:D}),x)),{},{prevChildren:w,dataStartIndex:z,dataEndIndex:D})}return null}),Xt(m,"renderActiveDot",function(g,x,v){var y;return E.isValidElement(g)?y=E.cloneElement(g,x):lr(g)?y=g(x):y=se.createElement(RI,x),se.createElement(zr,{className:"recharts-active-dot",key:v},y)}),function(x){return se.createElement(m,x)}},QGe=Hre({chartName:"BarChart",GraphicalChild:vf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:KT},{axisType:"yAxis",AxisComp:qT}],formatAxisMap:O6e}),ZGe=Hre({chartName:"PieChart",GraphicalChild:ic,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:LT},{axisType:"radiusAxis",AxisComp:DT}],formatAxisMap:I4e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const JGe={DollarSign:ehe,Users:jb,TrendingUp:R7,Shield:qd,Zap:bO,Settings:D7,Database:Iy},eHe=({content:e})=>{const t=(r,n)=>{var i,s,a,o;switch(r.type){case"heading":return h.jsx("h2",{className:"text-3xl font-bold mb-6 text-black border-b-2 border-black pb-2",children:r.content},n);case"subheading":return h.jsx("h3",{className:"text-2xl font-semibold mb-4 text-black",children:r.content},n);case"paragraph":return h.jsx("p",{className:"text-gray-800 mb-6 leading-relaxed text-lg",children:r.content},n);case"list":return h.jsx("ul",{className:"list-disc list-inside mb-6 space-y-2",children:(i=r.items)==null?void 0:i.map((c,d)=>h.jsx("li",{className:"text-gray-800 leading-relaxed",children:c},d))},n);case"icon-list":return h.jsx("div",{className:"grid gap-4 mb-8",children:(s=r.items)==null?void 0:s.map((c,d)=>{const u=[qd,bO,D7,Iy],f=u[d%u.length];return h.jsx(yi,{className:"border-2 border-black",children:h.jsxs(vi,{className:"p-4 flex items-start space-x-4",children:[h.jsx("div",{className:"bg-black p-2 rounded-lg",children:h.jsx(f,{className:"h-6 w-6 text-white"})}),h.jsx("p",{className:"text-gray-800 leading-relaxed flex-1",children:c})]})},d)})},n);case"bibliography":return h.jsx("div",{className:"mb-8",children:h.jsx("ol",{className:"list-none space-y-3",children:(a=r.items)==null?void 0:a.map((c,d)=>h.jsx("li",{className:"text-gray-800 leading-relaxed text-sm bg-gray-50 p-3 rounded border-l-4 border-black",children:c},d))})},n);case"stats":return h.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:(o=r.statsData)==null?void 0:o.map((c,d)=>{const u=JGe[c.icon]||R7;return h.jsx(yi,{className:"border-2 border-black text-center",children:h.jsxs(vi,{className:"p-6",children:[h.jsx("div",{className:"bg-black p-3 rounded-full inline-block mb-4",children:h.jsx(u,{className:"h-8 w-8 text-white"})}),h.jsx("div",{className:"text-3xl font-bold text-black mb-2",children:c.value}),h.jsx("div",{className:"text-gray-700 font-medium",children:c.label})]})},d)})},n);case"chart":if(!r.chartData)return null;const l=["#000000","#666666","#999999","#CCCCCC"];return h.jsx(yi,{className:"border-2 border-black mb-8",children:h.jsxs(vi,{className:"p-6",children:[h.jsx("h4",{className:"text-xl font-semibold mb-4 text-black text-center",children:r.chartData.title}),h.jsx("div",{className:"h-64 w-full",children:r.chartData.title.includes("Market Growth")?h.jsx(XU,{width:"100%",height:"100%",children:h.jsxs(QGe,{data:r.chartData.data,children:[h.jsx(KT,{dataKey:"name",stroke:"#000"}),h.jsx(qT,{stroke:"#000"}),h.jsx(vf,{dataKey:"value",fill:"#000000"})]})}):h.jsx(XU,{width:"100%",height:"100%",children:h.jsx(ZGe,{children:h.jsx(ic,{data:r.chartData.data,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:c=>`${c.name}: ${c.value}%`,children:r.chartData.data.map((c,d)=>h.jsx(bT,{fill:l[d%l.length]},`cell-${d}`))})})})})]})},n);case"table":return r.tableData?h.jsx(yi,{className:"border-2 border-black mb-8 overflow-hidden",children:h.jsx(vi,{className:"p-0",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-black text-white",children:h.jsx("tr",{children:r.tableData.headers.map((c,d)=>h.jsx("th",{className:"p-4 text-left font-semibold",children:c},d))})}),h.jsx("tbody",{children:r.tableData.rows.map((c,d)=>h.jsx("tr",{className:d%2===0?"bg-gray-50":"bg-white",children:c.map((u,f)=>h.jsx("td",{className:"p-4 border-b border-gray-200",children:u},f))},d))})]})})},n):null;case"quote":return h.jsx(yi,{className:"border-2 border-black bg-black text-white mb-8",children:h.jsx(vi,{className:"p-8 text-center",children:h.jsxs("blockquote",{className:"text-xl italic font-medium",children:['"',r.content,'"']})})},n);default:return null}};return h.jsx("div",{className:"prose prose-lg max-w-none",children:e.map((r,n)=>t(r,n))})},tHe=()=>{const{slug:e}=RX(),t=eh.find(r=>r.slug===e);return t?h.jsxs(Qr,{children:[h.jsx(sm,{title:`${t.title} - WRLDS`,description:t.metaDescription||t.excerpt,imageUrl:t.imageUrl,keywords:t.keywords,isBlogPost:!0,publishDate:new Date(t.date).toISOString(),author:t.author,category:t.category,type:"article"}),h.jsxs("article",{className:"w-full pt-16 pb-16",children:[h.jsxs("div",{className:"banner-container h-96 sm:h-[450px] md:h-[500px] lg:h-[550px] relative",children:[t.imageUrl&&h.jsx("img",{src:t.imageUrl,alt:t.title,className:"absolute inset-0 w-full h-full object-cover filter grayscale"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/60 to-black/80"}),h.jsx("div",{className:"banner-overlay",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 w-full h-full flex items-center justify-start md:justify-center",children:h.jsxs("div",{className:"w-full max-w-4xl mx-auto text-left md:text-center",children:[h.jsxs(Xr,{to:"/blog",className:"inline-flex items-center text-gray-300 hover:text-white mb-4 transition-colors text-sm",children:[h.jsx(Kd,{className:"mr-2 h-3 w-3"}),"Back to Blog"]}),h.jsx("h1",{className:"text-white text-xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 leading-tight break-words max-w-full",children:t.title}),h.jsxs("div",{className:"flex flex-col gap-3 text-gray-300 mb-4 sm:mb-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-start md:justify-center gap-2 sm:gap-6",children:[h.jsxs("div",{className:"flex items-center text-xs sm:text-base",children:[h.jsx(Kfe,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),h.jsx("span",{children:t.date})]}),h.jsxs("div",{className:"flex items-center text-xs sm:text-base",children:[h.jsx(xhe,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),h.jsx("span",{children:t.author})]})]}),h.jsx("div",{className:"flex justify-start md:justify-center",children:h.jsx("div",{className:"px-3 py-1 sm:px-4 sm:py-2 bg-white/15 backdrop-blur-sm rounded-full text-xs sm:text-sm font-medium border border-white/20",children:t.category})})]}),h.jsx("p",{className:"text-gray-200 text-sm sm:text-lg md:text-xl leading-relaxed max-w-3xl mx-auto font-light",children:t.excerpt})]})})})]}),h.jsx("div",{className:"container mx-auto px-4 py-8 sm:py-12 md:py-16",children:h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsx(eHe,{content:t.content})})})]})]}):h.jsx(Qr,{children:h.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Post Not Found"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"The blog post you're looking for doesn't exist."}),h.jsx(Xr,{to:"/blog",children:h.jsxs(zn,{variant:"outline",children:[h.jsx(Kd,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})})},rHe=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState({}),i=E.useRef(null),s=a=>{n(o=>({...o,[a]:!o[a]}))};return E.useEffect(()=>{const a=new IntersectionObserver(o=>{o[0].isIntersecting?t(!0):t(!1)},{threshold:.6,rootMargin:"-50px 0px -50px 0px"});return i.current&&a.observe(i.current),()=>a.disconnect()},[]),h.jsxs(Qr,{children:[h.jsx(sm,{title:"Identiteettiturva - Turvaa rahasi ja henkilötietosi",description:"Kattava identiteettiturva joka havaitsee tietovuodot, tarjoaa vakuutusturvan 13 500 € asti ja suojaa huijauksilta."}),h.jsxs("div",{className:"min-h-screen relative",children:[h.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(
              to bottom,
              transparent 0%,
              transparent 18%,
              rgba(30, 58, 138, 0.2) 23%,
              rgba(30, 58, 138, 0.4) 28%,
              rgba(30, 58, 138, 0.6) 33%,
              rgba(30, 58, 138, 0.8) 38%,
              rgba(30, 58, 138, 0.9) 43%,
              rgba(30, 58, 138, 0.95) 48%,
              rgba(30, 58, 138, 1) 53%,
              rgba(30, 58, 138, 0.7) 58%,
              rgba(30, 58, 138, 0.4) 63%,
              rgba(30, 58, 138, 0.2) 68%,
              rgba(30, 58, 138, 0.1) 73%,
              rgba(30, 58, 138, 0.05) 78%,
              transparent 83%,
              transparent 88%,
              transparent 100%
            )`,zIndex:-1}}),h.jsx("div",{className:"container mx-auto px-4 py-24",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{className:"space-y-8",children:[h.jsx("div",{className:"mb-8",children:h.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Turvaa rahasi ja henkilötietosi helposti yhdellä ratkaisulla"})}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-start space-x-4",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Havaitsee jos tietosi joutuvat vääriin käsiin"}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Palvelu monitoroi ja ilmoittaa, mikäli tietojasi päätyy verkossa vääriin käsiin."})]})}),h.jsx("div",{className:"flex items-start space-x-4",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Vakuutusturva 13 500 € asti"}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Korvaa taloudelliset vahingot ilman omavastuuta."})]})}),h.jsx("div",{className:"flex items-start space-x-4",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Kattaa myös huijaukset"}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Suojaa tietojenkalastelun, petosten ja väärinkäytösten seurauksilta, 0 € omavastuu."})]})})]}),h.jsx("div",{className:"mt-8",children:h.jsx("a",{href:"/verkkokauppa",className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Verkkokauppaan"})})]}),h.jsx("div",{className:"hidden lg:block"})]})}),h.jsxs("div",{className:"container mx-auto px-4 py-24",children:[h.jsx("div",{className:"text-center mb-32",children:h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Kuinka henkilösuoja sitten toimii?"})}),h.jsx("div",{className:"max-w-6xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[h.jsxs("div",{className:"space-y-12",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ympärivuorokautinen tietosuoja"}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Henkilösuoja valvoo tärkeimpiä tietojasi, kuten puhelinnumeroa, sähköpostia, henkilötunnusta, passia ja maksukortteja ympäri vuorokauden."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Hälytys heti, jos tietosi vuotavat"}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Se tarkistaa ne jatkuvasti tietovuototietokannoista ja dark webistä. Jos tietojasi löytyy, saat heti hälytyksen ja selkeät ohjeet vahinkojen estämiseksi."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Taloudellinen turva vahinkotilanteissa"}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Koska nettirikolliset kehittyvät jatkuvasti eikä mikään palvelu ole täysin aukoton, tuotteeseemme sisältyy myös vakuutus, joka tarjoaa taloudellista turvaa vahinkotilanteissa."})]})]}),h.jsx("div",{className:"hidden lg:block"})]})})]}),h.jsx("div",{className:"relative py-24 px-6 lg:px-12",children:h.jsx("div",{className:"relative py-24",children:h.jsx("div",{className:"relative container mx-auto px-4",children:h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Identiteetti on nykyajan valuutta"}),h.jsx("h3",{className:"text-2xl lg:text-3xl font-semibold text-foreground mt-6 mb-8",children:"Yksi tietovuoto voi maksaa tuhansia euroja"}),h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx("p",{className:"text-lg text-foreground leading-relaxed mb-12",children:"Verkkorikollisuus, tietovuodot ja identiteettivarkaudet ovat yleistyneet merkittävästi viime vuosina. Jo pelkän sähköpostiosoitteen ja salasanan avulla rikolliset voivat saada pääsyn henkilökohtaisiin tileihisi, tehdä ostoksia nimissäsi tai hakea lainaa luvattomasti. Digitaalinen identiteetti on nyky-yhteiskunnassa arvokas resurssi ja sen väärinkäyttö voi aiheuttaa vakavia taloudellisia sekä juridisia seurauksia. Siksi yksilön tunnistetietojen suojaaminen tulisi nähdä yhtä tärkeänä kuin pankkitunnusten turvaaminen."}),h.jsxs("div",{className:"flex justify-center space-x-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md",children:[h.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"62,9M €"}),h.jsx("p",{className:"text-white text-sm",children:"Vuonna 2024 suomalaiset menettivät nettihuijauksiin 62,9 miljoonaa euroa, joka on 40 % enemmän kuin vuonna 2023, jolloin summa oli 44,2 miljoonaa euroa."}),h.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md",children:[h.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"107,8M €"}),h.jsx("p",{className:"text-white text-sm",children:"Yritettyjä huijausyrityksiä oli 107,2 milj. euroa vuonna 2024, kun taas pankit onnistuivat estämään ja palauttamaan 44,3 milj. euroa."}),h.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md",children:[h.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"70%"}),h.jsx("p",{className:"text-white text-sm",children:"Lähes 70 % suomalaisista on ollut digihuijausten uhreja tai kohdannut yrityksiä, joissa heitä on yritetty huijata."}),h.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]})]})]})]})})})}),h.jsxs("div",{className:"w-full py-16 mb-16 relative",children:[h.jsxs("div",{className:"absolute inset-0 w-full h-full z-0",children:[h.jsx("img",{src:"/lovable-uploads/pexels-mikhail-nilov-6963045.jpg",alt:"Scam Cases Background",className:"w-full h-full object-cover object-top"}),h.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),h.jsxs("div",{className:"relative z-20",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold text-white leading-tight",children:["Tapauksia, joissa rahaa menetettiin",h.jsx("br",{}),"huijauksessa"]})}),h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 gap-8 items-start",children:[h.jsxs(yt.div,{className:"bg-transparent border border-white/20 p-6 rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut"},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("tietojenkalastelu"),children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Tietojenkalastelu"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.tietojenkalastelu?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h.jsx("div",{className:"overflow-hidden",children:r.tietojenkalastelu&&h.jsx(yt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Nina sai aidolta näyttävän sähköpostin pankiltaan. Hän klikkasi viestissä ollutta linkkiä ja kirjautui sisään sivulle, joka olikin huijaussivusto. Tietojen avulla rikollinen otti hänen nimissään kolme pikavippiä (yhteensä 11 200€), vaihdatutti hänen postiosoitteensa sekä puhelinnumeronsa ja yritti avata verkkopankkitilejä ja maksukortteja. Palveluun sisältyvä vakuutus korvaa jopa 13 500 € taloudelliset menetykset ja asiantuntijat auttavat asian läpiviennissä."})})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 p-6 rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.2},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("verkkokauppahuijaus"),children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Verkkokauppahuijaus"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.verkkokauppahuijaus?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h.jsx("div",{className:"overflow-hidden",children:r.verkkokauppahuijaus&&h.jsx(yt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Timo löysi verkosta edullisen tarjouksen uusista kuulokkeista tunnetulta brändiltä. Hinta oli lähes puolet halvempi kuin muualla, ja verkkosivusto näytti aidolla. Logo, arvostelut ja maksutavat kaikki kunnossa. Hän maksoi 129 € pankkikortilla. Tilauksen jälkeen tuotetta ei koskaan saapunut ja verkkokauppa katosi muutamassa päivässä. Koska ostoksen hinta oli 50-700 € välillä, Timo saa rahansa takaisin verkkokauppahuijaukset kattavan vakuutuksen ansiosta."})})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 p-6 rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.4},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("sovellushankinnat"),children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sovellushankinnat"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.sovellushankinnat?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h.jsx("div",{className:"overflow-hidden",children:r.sovellushankinnat&&h.jsx(yt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Sannan 9-vuotias poika sai pelata hetken äidin puhelimella. Hän latasi vahingossa pelisovelluksen, joka näytti ilmaiselta mutta sisälsi kalliin 112 euron tilauksen. Maksu veloittui heti, koska maksukortti oli tallennettuna puhelimeen. Vakuutus korvaa kulut, jotka liittyvät alle 10-vuotiaan vahingossa tekemiin sovellusostoihin (alle 135 €) suurimmilla alustoilla, kuten mm. App Storessa, Google Playssa tai Steamissa."})})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 p-8 rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.6},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("nettikiusaaminen"),children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Nettikiusaaminen"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.nettikiusaaminen?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h.jsx("div",{className:"overflow-hidden",children:r.nettikiusaaminen&&h.jsx(yt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Emilia joutui nettikiusaaminen kohteeksi sen jälkeen, kun hänen TikTok-videonsa levisi yllättäen laajalle. Tuntemattomat ihmiset alkoivat kommentoida videoita loukkaavasti ja joku perusti tekaistun tilin hänen nimellään ja profiilikuvallaan. Väärennetyllä tilillä julkaistiin sisältöä, joka sai Emilian näyttämään nololta. Hän saa asiantuntijoilta neuvoja ja apuja (25 h) sisällön poistoon ja tilien palautukseen. Tarvittaessa hänen käytössä on myös oikeudellinen tuki ja psykologinen kriisiapu."})})]})]})})]})]}),h.jsxs("div",{className:"container mx-auto px-4 py-24",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white leading-tight",children:"Vakuutus - 0€ omavastuulla"})}),h.jsx("div",{className:"max-w-6xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Taloudelliset tappiot"}),h.jsx("p",{className:"text-white leading-relaxed",children:"Premium-tason vakuutuksemme korvaa kyberhyökkäyksen aiheuttamat taloudelliset vahingot aina 13 500 euroon saakka. Tämä koskee muun muassa huijauksia, kuten sähköpostin, puheluiden tai tekstiviestien kautta tapahtuvaa tietojen kalastelua, sekä tilanteita, joissa sinut on johdettu väärennetylle verkkosivulle. Jos rikollinen on saanut haltuunsa esimerkiksi verkkopankkitunnuksesi, mobiilivarmenteesi tai muita arkaluontoisia tietoja ja käyttänyt niitä rahallisen vahingon aiheuttamiseen, vakuutus auttaa kattamaan menetykset."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Suoja sovellusostoksille"}),h.jsx("p",{className:"text-white leading-relaxed",children:"Jos alle 10-vuotias lapsi kotitaloudessasi tekee vahingossa tai ilman lupaa sovellusten tai sovellusten sisäisiä ostoksia esimerkiksi App Storesta, Google Playsta, Playstation Storesta, Microsoft Storesta tai Steamista, vakuutus korvaa kulut aina 135 euroon asti."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Turva verkko-ostoksille"}),h.jsx("p",{className:"text-white leading-relaxed",children:"Jos ostat tuotteen verkosta tai yksityiseltä myyjältä 50–700 euron hintaluokassa ja saat väärän tuotteen, toimituksesta puuttuu osa tavaroista tai lähetystä ei saavu lainkaan, vakuutus maksaa sinulle korvauksen."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"SIM-kortin väärinkäytön suoja"}),h.jsx("p",{className:"text-white leading-relaxed",children:"Jos puhelimesi tai tablettisi varastetaan ja SIM-korttiasi käytetään luvatta, vakuutus kattaa aiheutuneet kustannukset jopa 135 euroon asti. Suoja on voimassa enintään 48 tuntia varkauden jälkeen."})]})]})})]}),h.jsxs("div",{className:"container mx-auto px-4 py-32",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Saat tukea myös muutenkin kuin taloudellisesti"})}),h.jsx("div",{className:"max-w-6xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Tietojen suoja"}),h.jsx("p",{className:"text-foreground leading-relaxed",children:"Valvo henkilökohtaisia tietojasi ja saa ilmoituksia, jos ne päätyvät luvattomiin käsiin. Se seuraa puhelinnumeroita, sähköposteja, henkilötunnuksia sekä pankki- ja korttitietoja ja ohjeistaa tietovuotojen estämisessä."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Psyykkinen tuki"}),h.jsx("p",{className:"text-foreground leading-relaxed",children:"Kriisiapu kyberhyökkäyksen seurauksena, jopa 1 350 € saakka."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Nettikiusaamistuki"}),h.jsx("p",{className:"text-foreground leading-relaxed",children:"25 h ohjausta ja neuvoja ei-toivotun sisällön leviämisen estämiseen sekä väärennettyjen profiilien ja hakkeroitujen tilien hallinnan palauttamiseen."})]}),h.jsxs(yt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Oikeusapu"}),h.jsx("p",{className:"text-foreground leading-relaxed",children:"Oikeudellinen apu suomalaiselta asianajajalta, vakuutettu 135 000 € saakka tietyissä tilanteissa."})]})]})})]}),h.jsxs("div",{className:"container mx-auto py-24 relative",children:[h.jsxs("div",{className:"absolute inset-0 w-full h-full z-0",children:[h.jsx("img",{src:"/lovable-uploads/iStock-2222199654.jpg",alt:"Identity Protection Background",className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-white/80"})]}),h.jsxs("div",{className:"relative z-20",children:[h.jsxs("div",{className:"text-center mb-16 relative z-10",children:[h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight mb-6",children:"Valitse suojaksesi"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Jokaisessa tilauksessa on 14vrk maksuton peruutosoikeus."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto relative z-10",children:[h.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilösuoja Yhdelle"}),h.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"21,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[h.jsx("li",{children:"• Tietojen monitorointi ja ilmoitus tietovuodoista"}),h.jsx("li",{children:"• Vakuutus, joka turvaa sinut vahinkojen varalta"}),h.jsx("li",{children:"• Apu ja tuki"})]}),h.jsx("a",{href:"/verkkokauppa",className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]}),h.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilösuoja Tupla"}),h.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"28,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[h.jsx("li",{children:"• Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä läheisellesi"}),h.jsx("li",{children:"• Vakuutus, joka turvaa sinut ja läheisesi vahinkojen varalta"}),h.jsx("li",{children:"• Apu ja tuki"})]}),h.jsx("a",{href:"/verkkokauppa",className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]}),h.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilösuoja Perhe"}),h.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"32,99 €/kk"}),h.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[h.jsx("li",{children:"• Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä koko perheellesi"}),h.jsx("li",{children:"• Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta"}),h.jsx("li",{children:"• Apu ja tuki"})]}),h.jsx("a",{href:"/verkkokauppa",className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]})]})]})]}),h.jsxs("div",{className:"container mx-auto px-4 py-24",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Usein kysyttyjä kysymyksiä"})}),h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsxs("div",{className:"space-y-6",children:[h.jsx(yt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},onClick:()=>s("faq1"),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Onko tietosuoja pakollinen?"}),h.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq1?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx("div",{className:"overflow-hidden",children:r.faq1&&h.jsx(yt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Ei, henkilötietojen suojaaminen ei ole lain mukaan pakollista yksityishenkilöille, mutta se on erittäin suositeltavaa, koska tietomurrot ja huijaukset ovat yleistyneet merkittävästi."})})]})}),h.jsx(yt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.1},onClick:()=>s("faq2"),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-foreground",children:"On myös ilmaisia tietoturvapalveluita – miksi maksaisin tästä?"}),h.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq2?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx("div",{className:"overflow-hidden",children:r.faq2&&h.jsx(yt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Ilmaiset palvelut tarjoavat yleensä vain rajallista seurantaa, eivätkä sisällä esimerkiksi vakuutusturvaa, reaaliaikaista hälytystä tai asiantuntijan toimintaohjeita. Maksullinen palvelu tarjoaa laajemman suojan ja konkreettista apua vahinkotilanteissa."})})]})}),h.jsx(yt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.2},onClick:()=>s("faq3"),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Jos tietoni löytyvät verkosta, voitteko poistaa ne?"}),h.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq3?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx("div",{className:"overflow-hidden",children:r.faq3&&h.jsx(yt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Kaikkia tietoja ei valitettavasti voida poistaa, jos ne ovat jo päätyneet rikollisille. Palvelumme kuitenkin opastaa, miten minimoit riskit ja estät tietojen väärinkäytön."})})]})}),h.jsx(yt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.3},onClick:()=>s("faq4"),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Miten usein tietojani tarkastetaan?"}),h.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq4?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx("div",{className:"overflow-hidden",children:r.faq4&&h.jsx(yt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Tietoja seurataan jatkuvasti eri lähteistä, ja mahdollisista havainnoista ilmoitetaan heti."})})]})}),h.jsx(yt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.4},onClick:()=>s("faq5"),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Voiko palvelu estää huijauksen tapahtumasta?"}),h.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq5?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx("div",{className:"overflow-hidden",children:r.faq5&&h.jsx(yt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Palvelu ei voi estää kaikkia hyökkäyksiä, mutta se voi havaita riskit ajoissa ja antaa selkeät ohjeet, joilla voit estää tai minimoida vahingot."})})]})})]})})]})]})]})};var w_=e=>e.type==="checkbox",Cd=e=>e instanceof Date,gs=e=>e==null;const Kre=e=>typeof e=="object";var Qn=e=>!gs(e)&&!Array.isArray(e)&&Kre(e)&&!Cd(e),qre=e=>Qn(e)&&e.target?w_(e.target)?e.target.checked:e.target.value:e,nHe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xre=(e,t)=>e.has(nHe(t)),iHe=e=>{const t=e.constructor&&e.constructor.prototype;return Qn(t)&&t.hasOwnProperty("isPrototypeOf")},VI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $s(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(VI&&(e instanceof Blob||e instanceof FileList))&&(r||Qn(e)))if(t=r?[]:{},!r&&!iHe(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=$s(e[n]));else return e;return t}var YT=e=>Array.isArray(e)?e.filter(Boolean):[],Ln=e=>e===void 0,lt=(e,t,r)=>{if(!t||!Qn(e))return r;const n=YT(t.split(/[,[\].]+?/)).reduce((i,s)=>gs(i)?i:i[s],e);return Ln(n)||n===e?Ln(e[t])?r:e[t]:n},Ma=e=>typeof e=="boolean",UI=e=>/^\w*$/.test(e),Yre=e=>YT(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Lr=(e,t,r)=>{let n=-1;const i=UI(t)?[t]:Yre(t),s=i.length,a=s-1;for(;++n<s;){const o=i[n];let l=r;if(n!==a){const c=e[o];l=Qn(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(o==="__proto__")return;e[o]=l,e=e[o]}return e};const Hw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ho={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qre=se.createContext(null),QT=()=>se.useContext(Qre),sHe=e=>{const{children:t,...r}=e;return se.createElement(Qre.Provider,{value:r},t)};var Zre=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==ho.all&&(t._proxyFormState[a]=!n||ho.all),r&&(r[a]=!0),e[a]}});return i},Is=e=>Qn(e)&&!Object.keys(e).length,Jre=(e,t,r,n)=>{r(e);const{name:i,...s}=e;return Is(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!n||ho.all))},py=e=>Array.isArray(e)?e:[e],ene=(e,t,r)=>!e||!t||e===t||py(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n)));function WI(e){const t=se.useRef(e);t.current=e,se.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function aHe(e){const t=QT(),{control:r=t.control,disabled:n,name:i,exact:s}=e||{},[a,o]=se.useState(r._formState),l=se.useRef(!0),c=se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=se.useRef(i);return d.current=i,WI({disabled:n,next:u=>l.current&&ene(d.current,u.name,s)&&Jre(u,c.current,r._updateFormState)&&o({...r._formState,...u}),subject:r._subjects.state}),se.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),Zre(a,r,c.current,!1)}var Ho=e=>typeof e=="string",tne=(e,t,r,n,i)=>Ho(e)?(n&&t.watch.add(e),lt(r,e,i)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),lt(r,s))):(n&&(t.watchAll=!0),r);function oHe(e){const t=QT(),{control:r=t.control,name:n,defaultValue:i,disabled:s,exact:a}=e||{},o=se.useRef(n);o.current=n,WI({disabled:s,subject:r._subjects.values,next:d=>{ene(o.current,d.name,a)&&c($s(tne(o.current,r._names,d.values||r._formValues,!1,i)))}});const[l,c]=se.useState(r._getWatch(n,i));return se.useEffect(()=>r._removeUnmounted()),l}function lHe(e){const t=QT(),{name:r,disabled:n,control:i=t.control,shouldUnregister:s}=e,a=Xre(i._names.array,r),o=oHe({control:i,name:r,defaultValue:lt(i._formValues,r,lt(i._defaultValues,r,e.defaultValue)),exact:!0}),l=aHe({control:i,name:r,exact:!0}),c=se.useRef(i.register(r,{...e.rules,value:o,...Ma(e.disabled)?{disabled:e.disabled}:{}}));return se.useEffect(()=>{const d=i._options.shouldUnregister||s,u=(f,p)=>{const m=lt(i._fields,f);m&&m._f&&(m._f.mount=p)};if(u(r,!0),d){const f=$s(lt(i._options.defaultValues,r));Lr(i._defaultValues,r,f),Ln(lt(i._formValues,r))&&Lr(i._formValues,r,f)}return()=>{(a?d&&!i._state.action:d)?i.unregister(r):u(r,!1)}},[r,i,a,s]),se.useEffect(()=>{lt(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:lt(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:o,...Ma(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:se.useCallback(d=>c.current.onChange({target:{value:qre(d),name:r},type:Hw.CHANGE}),[r]),onBlur:se.useCallback(()=>c.current.onBlur({target:{value:lt(i._formValues,r),name:r},type:Hw.BLUR}),[r,i]),ref:se.useCallback(d=>{const u=lt(i._fields,r);u&&d&&(u._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:f=>d.setCustomValidity(f),reportValidity:()=>d.reportValidity()})},[i._fields,r])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!lt(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!lt(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!lt(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!lt(l.validatingFields,r)},error:{enumerable:!0,get:()=>lt(l.errors,r)}})}}const cHe=e=>e.render(lHe(e));var rne=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},$6=e=>({isOnSubmit:!e||e===ho.onSubmit,isOnBlur:e===ho.onBlur,isOnChange:e===ho.onChange,isOnAll:e===ho.all,isOnTouch:e===ho.onTouched}),I6=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const my=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const s=lt(e,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],i)&&!n)return!0;if(a.ref&&t(a.ref,a.name)&&!n)return!0;if(my(o,t))break}else if(Qn(o)&&my(o,t))break}}};var uHe=(e,t,r)=>{const n=py(lt(e,r));return Lr(n,"root",t[r]),Lr(e,r,n),e},GI=e=>e.type==="file",Al=e=>typeof e=="function",Kw=e=>{if(!VI)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Qx=e=>Ho(e),HI=e=>e.type==="radio",qw=e=>e instanceof RegExp;const N6={value:!1,isValid:!1},D6={value:!0,isValid:!0};var nne=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ln(e[0].attributes.value)?Ln(e[0].value)||e[0].value===""?D6:{value:e[0].value,isValid:!0}:D6:N6}return N6};const R6={isValid:!1,value:null};var ine=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,R6):R6;function L6(e,t,r="validate"){if(Qx(e)||Array.isArray(e)&&e.every(Qx)||Ma(e)&&!e)return{type:r,message:Qx(e)?e:"",ref:t}}var Xf=e=>Qn(e)&&!qw(e)?e:{value:e,message:""},F6=async(e,t,r,n,i)=>{const{ref:s,refs:a,required:o,maxLength:l,minLength:c,min:d,max:u,pattern:f,validate:p,name:m,valueAsNumber:g,mount:x,disabled:v}=e._f,y=lt(t,m);if(!x||v)return{};const w=a?a[0]:s,b=I=>{n&&w.reportValidity&&(w.setCustomValidity(Ma(I)?"":I||""),w.reportValidity())},_={},T=HI(s),M=w_(s),k=T||M,j=(g||GI(s))&&Ln(s.value)&&Ln(y)||Kw(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,A=rne.bind(null,m,r,_),R=(I,$,F,V=pl.maxLength,G=pl.minLength)=>{const H=I?$:F;_[m]={type:I?V:G,message:H,ref:s,...A(I?V:G,H)}};if(i?!Array.isArray(y)||!y.length:o&&(!k&&(j||gs(y))||Ma(y)&&!y||M&&!nne(a).isValid||T&&!ine(a).isValid)){const{value:I,message:$}=Qx(o)?{value:!!o,message:o}:Xf(o);if(I&&(_[m]={type:pl.required,message:$,ref:w,...A(pl.required,$)},!r))return b($),_}if(!j&&(!gs(d)||!gs(u))){let I,$;const F=Xf(u),V=Xf(d);if(!gs(y)&&!isNaN(y)){const G=s.valueAsNumber||y&&+y;gs(F.value)||(I=G>F.value),gs(V.value)||($=G<V.value)}else{const G=s.valueAsDate||new Date(y),H=ae=>new Date(new Date().toDateString()+" "+ae),B=s.type=="time",te=s.type=="week";Ho(F.value)&&y&&(I=B?H(y)>H(F.value):te?y>F.value:G>new Date(F.value)),Ho(V.value)&&y&&($=B?H(y)<H(V.value):te?y<V.value:G<new Date(V.value))}if((I||$)&&(R(!!I,F.message,V.message,pl.max,pl.min),!r))return b(_[m].message),_}if((l||c)&&!j&&(Ho(y)||i&&Array.isArray(y))){const I=Xf(l),$=Xf(c),F=!gs(I.value)&&y.length>+I.value,V=!gs($.value)&&y.length<+$.value;if((F||V)&&(R(F,I.message,$.message),!r))return b(_[m].message),_}if(f&&!j&&Ho(y)){const{value:I,message:$}=Xf(f);if(qw(I)&&!y.match(I)&&(_[m]={type:pl.pattern,message:$,ref:s,...A(pl.pattern,$)},!r))return b($),_}if(p){if(Al(p)){const I=await p(y,t),$=L6(I,w);if($&&(_[m]={...$,...A(pl.validate,$.message)},!r))return b($.message),_}else if(Qn(p)){let I={};for(const $ in p){if(!Is(I)&&!r)break;const F=L6(await p[$](y,t),w,$);F&&(I={...F,...A($,F.message)},b(F.message),r&&(_[m]=I))}if(!Is(I)&&(_[m]={ref:w,...I},!r))return _}}return b(!0),_};function dHe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ln(e)?n++:e[t[n++]];return e}function fHe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ln(e[t]))return!1;return!0}function mi(e,t){const r=Array.isArray(t)?t:UI(t)?[t]:Yre(t),n=r.length===1?e:dHe(e,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(Qn(n)&&Is(n)||Array.isArray(n)&&fHe(n))&&mi(e,r.slice(0,-1)),e}var uP=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},R2=e=>gs(e)||!Kre(e);function Dc(e,t){if(R2(e)||R2(t))return e===t;if(Cd(e)&&Cd(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const s=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Cd(s)&&Cd(a)||Qn(s)&&Qn(a)||Array.isArray(s)&&Array.isArray(a)?!Dc(s,a):s!==a)return!1}}return!0}var sne=e=>e.type==="select-multiple",hHe=e=>HI(e)||w_(e),dP=e=>Kw(e)&&e.isConnected,ane=e=>{for(const t in e)if(Al(e[t]))return!0;return!1};function Xw(e,t={}){const r=Array.isArray(e);if(Qn(e)||r)for(const n in e)Array.isArray(e[n])||Qn(e[n])&&!ane(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Xw(e[n],t[n])):gs(e[n])||(t[n]=!0);return t}function one(e,t,r){const n=Array.isArray(e);if(Qn(e)||n)for(const i in e)Array.isArray(e[i])||Qn(e[i])&&!ane(e[i])?Ln(t)||R2(r[i])?r[i]=Array.isArray(e[i])?Xw(e[i],[]):{...Xw(e[i])}:one(e[i],gs(t)?{}:t[i],r[i]):r[i]=!Dc(e[i],t[i]);return r}var yg=(e,t)=>one(e,t,Xw(t)),lne=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ln(e)?e:t?e===""?NaN:e&&+e:r&&Ho(e)?new Date(e):n?n(e):e;function fP(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return GI(t)?t.files:HI(t)?ine(e.refs).value:sne(t)?[...t.selectedOptions].map(({value:r})=>r):w_(t)?nne(e.refs).value:lne(Ln(t.value)?e.ref.value:t.value,e)}var pHe=(e,t,r,n)=>{const i={};for(const s of e){const a=lt(t,s);a&&Lr(i,s,a._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},vg=e=>Ln(e)?e:qw(e)?e.source:Qn(e)?qw(e.value)?e.value.source:e.value:e;const B6="AsyncFunction";var mHe=e=>(!e||!e.validate)&&!!(Al(e.validate)&&e.validate.constructor.name===B6||Qn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===B6)),gHe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function z6(e,t,r){const n=lt(e,r);if(n||UI(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),a=lt(t,s),o=lt(e,s);if(a&&!Array.isArray(a)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:r}}var yHe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,vHe=(e,t)=>!YT(lt(e,t)).length&&mi(e,t);const _He={mode:ho.onSubmit,reValidateMode:ho.onChange,shouldFocusError:!0};function xHe(e={}){let t={..._He,...e},r={submitCount:0,isDirty:!1,isLoading:Al(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=Qn(t.defaultValues)||Qn(t.values)?$s(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:$s(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:uP(),array:uP(),state:uP()},f=$6(t.mode),p=$6(t.reValidateMode),m=t.criteriaMode===ho.all,g=Q=>re=>{clearTimeout(c),c=setTimeout(Q,re)},x=async Q=>{if(!e.disabled&&(d.isValid||Q)){const re=t.resolver?Is((await k()).errors):await A(n,!0);re!==r.isValid&&u.state.next({isValid:re})}},v=(Q,re)=>{!e.disabled&&(d.isValidating||d.validatingFields)&&((Q||Array.from(o.mount)).forEach(fe=>{fe&&(re?Lr(r.validatingFields,fe,re):mi(r.validatingFields,fe))}),u.state.next({validatingFields:r.validatingFields,isValidating:!Is(r.validatingFields)}))},y=(Q,re=[],fe,ke,je=!0,me=!0)=>{if(ke&&fe&&!e.disabled){if(a.action=!0,me&&Array.isArray(lt(n,Q))){const Fe=fe(lt(n,Q),ke.argA,ke.argB);je&&Lr(n,Q,Fe)}if(me&&Array.isArray(lt(r.errors,Q))){const Fe=fe(lt(r.errors,Q),ke.argA,ke.argB);je&&Lr(r.errors,Q,Fe),vHe(r.errors,Q)}if(d.touchedFields&&me&&Array.isArray(lt(r.touchedFields,Q))){const Fe=fe(lt(r.touchedFields,Q),ke.argA,ke.argB);je&&Lr(r.touchedFields,Q,Fe)}d.dirtyFields&&(r.dirtyFields=yg(i,s)),u.state.next({name:Q,isDirty:I(Q,re),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Lr(s,Q,re)},w=(Q,re)=>{Lr(r.errors,Q,re),u.state.next({errors:r.errors})},b=Q=>{r.errors=Q,u.state.next({errors:r.errors,isValid:!1})},_=(Q,re,fe,ke)=>{const je=lt(n,Q);if(je){const me=lt(s,Q,Ln(fe)?lt(i,Q):fe);Ln(me)||ke&&ke.defaultChecked||re?Lr(s,Q,re?me:fP(je._f)):V(Q,me),a.mount&&x()}},T=(Q,re,fe,ke,je)=>{let me=!1,Fe=!1;const ze={name:Q};if(!e.disabled){const Je=!!(lt(n,Q)&&lt(n,Q)._f&&lt(n,Q)._f.disabled);if(!fe||ke){d.isDirty&&(Fe=r.isDirty,r.isDirty=ze.isDirty=I(),me=Fe!==ze.isDirty);const He=Je||Dc(lt(i,Q),re);Fe=!!(!Je&&lt(r.dirtyFields,Q)),He||Je?mi(r.dirtyFields,Q):Lr(r.dirtyFields,Q,!0),ze.dirtyFields=r.dirtyFields,me=me||d.dirtyFields&&Fe!==!He}if(fe){const He=lt(r.touchedFields,Q);He||(Lr(r.touchedFields,Q,fe),ze.touchedFields=r.touchedFields,me=me||d.touchedFields&&He!==fe)}me&&je&&u.state.next(ze)}return me?ze:{}},M=(Q,re,fe,ke)=>{const je=lt(r.errors,Q),me=d.isValid&&Ma(re)&&r.isValid!==re;if(e.delayError&&fe?(l=g(()=>w(Q,fe)),l(e.delayError)):(clearTimeout(c),l=null,fe?Lr(r.errors,Q,fe):mi(r.errors,Q)),(fe?!Dc(je,fe):je)||!Is(ke)||me){const Fe={...ke,...me&&Ma(re)?{isValid:re}:{},errors:r.errors,name:Q};r={...r,...Fe},u.state.next(Fe)}},k=async Q=>{v(Q,!0);const re=await t.resolver(s,t.context,pHe(Q||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(Q),re},j=async Q=>{const{errors:re}=await k(Q);if(Q)for(const fe of Q){const ke=lt(re,fe);ke?Lr(r.errors,fe,ke):mi(r.errors,fe)}else r.errors=re;return re},A=async(Q,re,fe={valid:!0})=>{for(const ke in Q){const je=Q[ke];if(je){const{_f:me,...Fe}=je;if(me){const ze=o.array.has(me.name),Je=je._f&&mHe(je._f);Je&&d.validatingFields&&v([ke],!0);const He=await F6(je,s,m,t.shouldUseNativeValidation&&!re,ze);if(Je&&d.validatingFields&&v([ke]),He[me.name]&&(fe.valid=!1,re))break;!re&&(lt(He,me.name)?ze?uHe(r.errors,He,me.name):Lr(r.errors,me.name,He[me.name]):mi(r.errors,me.name))}!Is(Fe)&&await A(Fe,re,fe)}}return fe.valid},R=()=>{for(const Q of o.unMount){const re=lt(n,Q);re&&(re._f.refs?re._f.refs.every(fe=>!dP(fe)):!dP(re._f.ref))&&de(Q)}o.unMount=new Set},I=(Q,re)=>!e.disabled&&(Q&&re&&Lr(s,Q,re),!Dc(z(),i)),$=(Q,re,fe)=>tne(Q,o,{...a.mount?s:Ln(re)?i:Ho(Q)?{[Q]:re}:re},fe,re),F=Q=>YT(lt(a.mount?s:i,Q,e.shouldUnregister?lt(i,Q,[]):[])),V=(Q,re,fe={})=>{const ke=lt(n,Q);let je=re;if(ke){const me=ke._f;me&&(!me.disabled&&Lr(s,Q,lne(re,me)),je=Kw(me.ref)&&gs(re)?"":re,sne(me.ref)?[...me.ref.options].forEach(Fe=>Fe.selected=je.includes(Fe.value)):me.refs?w_(me.ref)?me.refs.length>1?me.refs.forEach(Fe=>(!Fe.defaultChecked||!Fe.disabled)&&(Fe.checked=Array.isArray(je)?!!je.find(ze=>ze===Fe.value):je===Fe.value)):me.refs[0]&&(me.refs[0].checked=!!je):me.refs.forEach(Fe=>Fe.checked=Fe.value===je):GI(me.ref)?me.ref.value="":(me.ref.value=je,me.ref.type||u.values.next({name:Q,values:{...s}})))}(fe.shouldDirty||fe.shouldTouch)&&T(Q,je,fe.shouldTouch,fe.shouldDirty,!0),fe.shouldValidate&&ae(Q)},G=(Q,re,fe)=>{for(const ke in re){const je=re[ke],me=`${Q}.${ke}`,Fe=lt(n,me);(o.array.has(Q)||Qn(je)||Fe&&!Fe._f)&&!Cd(je)?G(me,je,fe):V(me,je,fe)}},H=(Q,re,fe={})=>{const ke=lt(n,Q),je=o.array.has(Q),me=$s(re);Lr(s,Q,me),je?(u.array.next({name:Q,values:{...s}}),(d.isDirty||d.dirtyFields)&&fe.shouldDirty&&u.state.next({name:Q,dirtyFields:yg(i,s),isDirty:I(Q,me)})):ke&&!ke._f&&!gs(me)?G(Q,me,fe):V(Q,me,fe),I6(Q,o)&&u.state.next({...r}),u.values.next({name:a.mount?Q:void 0,values:{...s}})},B=async Q=>{a.mount=!0;const re=Q.target;let fe=re.name,ke=!0;const je=lt(n,fe),me=()=>re.type?fP(je._f):qre(Q),Fe=ze=>{ke=Number.isNaN(ze)||Cd(ze)&&isNaN(ze.getTime())||Dc(ze,lt(s,fe,ze))};if(je){let ze,Je;const He=me(),We=Q.type===Hw.BLUR||Q.type===Hw.FOCUS_OUT,nt=!gHe(je._f)&&!t.resolver&&!lt(r.errors,fe)&&!je._f.deps||yHe(We,lt(r.touchedFields,fe),r.isSubmitted,p,f),ct=I6(fe,o,We);Lr(s,fe,He),We?(je._f.onBlur&&je._f.onBlur(Q),l&&l(0)):je._f.onChange&&je._f.onChange(Q);const Ht=T(fe,He,We,!1),Ut=!Is(Ht)||ct;if(!We&&u.values.next({name:fe,type:Q.type,values:{...s}}),nt)return d.isValid&&(e.mode==="onBlur"?We&&x():x()),Ut&&u.state.next({name:fe,...ct?{}:Ht});if(!We&&ct&&u.state.next({...r}),t.resolver){const{errors:$t}=await k([fe]);if(Fe(He),ke){const yn=z6(r.errors,n,fe),Zr=z6($t,n,yn.name||fe);ze=Zr.error,fe=Zr.name,Je=Is($t)}}else v([fe],!0),ze=(await F6(je,s,m,t.shouldUseNativeValidation))[fe],v([fe]),Fe(He),ke&&(ze?Je=!1:d.isValid&&(Je=await A(n,!0)));ke&&(je._f.deps&&ae(je._f.deps),M(fe,Je,ze,Ht))}},te=(Q,re)=>{if(lt(r.errors,re)&&Q.focus)return Q.focus(),1},ae=async(Q,re={})=>{let fe,ke;const je=py(Q);if(t.resolver){const me=await j(Ln(Q)?Q:je);fe=Is(me),ke=Q?!je.some(Fe=>lt(me,Fe)):fe}else Q?(ke=(await Promise.all(je.map(async me=>{const Fe=lt(n,me);return await A(Fe&&Fe._f?{[me]:Fe}:Fe)}))).every(Boolean),!(!ke&&!r.isValid)&&x()):ke=fe=await A(n);return u.state.next({...!Ho(Q)||d.isValid&&fe!==r.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:fe}:{},errors:r.errors}),re.shouldFocus&&!ke&&my(n,te,Q?je:o.mount),ke},z=Q=>{const re={...a.mount?s:i};return Ln(Q)?re:Ho(Q)?lt(re,Q):Q.map(fe=>lt(re,fe))},D=(Q,re)=>({invalid:!!lt((re||r).errors,Q),isDirty:!!lt((re||r).dirtyFields,Q),error:lt((re||r).errors,Q),isValidating:!!lt(r.validatingFields,Q),isTouched:!!lt((re||r).touchedFields,Q)}),K=Q=>{Q&&py(Q).forEach(re=>mi(r.errors,re)),u.state.next({errors:Q?r.errors:{}})},oe=(Q,re,fe)=>{const ke=(lt(n,Q,{_f:{}})._f||{}).ref,je=lt(r.errors,Q)||{},{ref:me,message:Fe,type:ze,...Je}=je;Lr(r.errors,Q,{...Je,...re,ref:ke}),u.state.next({name:Q,errors:r.errors,isValid:!1}),fe&&fe.shouldFocus&&ke&&ke.focus&&ke.focus()},_e=(Q,re)=>Al(Q)?u.values.subscribe({next:fe=>Q($(void 0,re),fe)}):$(Q,re,!0),de=(Q,re={})=>{for(const fe of Q?py(Q):o.mount)o.mount.delete(fe),o.array.delete(fe),re.keepValue||(mi(n,fe),mi(s,fe)),!re.keepError&&mi(r.errors,fe),!re.keepDirty&&mi(r.dirtyFields,fe),!re.keepTouched&&mi(r.touchedFields,fe),!re.keepIsValidating&&mi(r.validatingFields,fe),!t.shouldUnregister&&!re.keepDefaultValue&&mi(i,fe);u.values.next({values:{...s}}),u.state.next({...r,...re.keepDirty?{isDirty:I()}:{}}),!re.keepIsValid&&x()},ve=({disabled:Q,name:re,field:fe,fields:ke,value:je})=>{if(Ma(Q)&&a.mount||Q){const me=Q?void 0:Ln(je)?fP(fe?fe._f:lt(ke,re)._f):je;Lr(s,re,me),T(re,me,!1,!1,!0)}},Ie=(Q,re={})=>{let fe=lt(n,Q);const ke=Ma(re.disabled)||Ma(e.disabled);return Lr(n,Q,{...fe||{},_f:{...fe&&fe._f?fe._f:{ref:{name:Q}},name:Q,mount:!0,...re}}),o.mount.add(Q),fe?ve({field:fe,disabled:Ma(re.disabled)?re.disabled:e.disabled,name:Q,value:re.value}):_(Q,!0,re.value),{...ke?{disabled:re.disabled||e.disabled}:{},...t.progressive?{required:!!re.required,min:vg(re.min),max:vg(re.max),minLength:vg(re.minLength),maxLength:vg(re.maxLength),pattern:vg(re.pattern)}:{},name:Q,onChange:B,onBlur:B,ref:je=>{if(je){Ie(Q,re),fe=lt(n,Q);const me=Ln(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Fe=hHe(me),ze=fe._f.refs||[];if(Fe?ze.find(Je=>Je===me):me===fe._f.ref)return;Lr(n,Q,{_f:{...fe._f,...Fe?{refs:[...ze.filter(dP),me,...Array.isArray(lt(i,Q))?[{}]:[]],ref:{type:me.type,name:Q}}:{ref:me}}}),_(Q,!1,void 0,me)}else fe=lt(n,Q,{}),fe._f&&(fe._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(Xre(o.array,Q)&&a.action)&&o.unMount.add(Q)}}},Se=()=>t.shouldFocusError&&my(n,te,o.mount),ge=Q=>{Ma(Q)&&(u.state.next({disabled:Q}),my(n,(re,fe)=>{const ke=lt(n,fe);ke&&(re.disabled=ke._f.disabled||Q,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(je=>{je.disabled=ke._f.disabled||Q}))},0,!1))},J=(Q,re)=>async fe=>{let ke;fe&&(fe.preventDefault&&fe.preventDefault(),fe.persist&&fe.persist());let je=$s(s);if(u.state.next({isSubmitting:!0}),t.resolver){const{errors:me,values:Fe}=await k();r.errors=me,je=Fe}else await A(n);if(mi(r.errors,"root"),Is(r.errors)){u.state.next({errors:{}});try{await Q(je,fe)}catch(me){ke=me}}else re&&await re({...r.errors},fe),Se(),setTimeout(Se);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Is(r.errors)&&!ke,submitCount:r.submitCount+1,errors:r.errors}),ke)throw ke},ee=(Q,re={})=>{lt(n,Q)&&(Ln(re.defaultValue)?H(Q,$s(lt(i,Q))):(H(Q,re.defaultValue),Lr(i,Q,$s(re.defaultValue))),re.keepTouched||mi(r.touchedFields,Q),re.keepDirty||(mi(r.dirtyFields,Q),r.isDirty=re.defaultValue?I(Q,$s(lt(i,Q))):I()),re.keepError||(mi(r.errors,Q),d.isValid&&x()),u.state.next({...r}))},Z=(Q,re={})=>{const fe=Q?$s(Q):i,ke=$s(fe),je=Is(Q),me=je?i:ke;if(re.keepDefaultValues||(i=fe),!re.keepValues){if(re.keepDirtyValues){const Fe=new Set([...o.mount,...Object.keys(yg(i,s))]);for(const ze of Array.from(Fe))lt(r.dirtyFields,ze)?Lr(me,ze,lt(s,ze)):H(ze,lt(me,ze))}else{if(VI&&Ln(Q))for(const Fe of o.mount){const ze=lt(n,Fe);if(ze&&ze._f){const Je=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(Kw(Je)){const He=Je.closest("form");if(He){He.reset();break}}}}n={}}s=e.shouldUnregister?re.keepDefaultValues?$s(i):{}:$s(me),u.array.next({values:{...me}}),u.values.next({values:{...me}})}o={mount:re.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!re.keepIsValid||!!re.keepDirtyValues,a.watch=!!e.shouldUnregister,u.state.next({submitCount:re.keepSubmitCount?r.submitCount:0,isDirty:je?!1:re.keepDirty?r.isDirty:!!(re.keepDefaultValues&&!Dc(Q,i)),isSubmitted:re.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:je?{}:re.keepDirtyValues?re.keepDefaultValues&&s?yg(i,s):r.dirtyFields:re.keepDefaultValues&&Q?yg(i,Q):re.keepDirty?r.dirtyFields:{},touchedFields:re.keepTouched?r.touchedFields:{},errors:re.keepErrors?r.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},we=(Q,re)=>Z(Al(Q)?Q(s):Q,re);return{control:{register:Ie,unregister:de,getFieldState:D,handleSubmit:J,setError:oe,_executeSchema:k,_getWatch:$,_getDirty:I,_updateValid:x,_removeUnmounted:R,_updateFieldArray:y,_updateDisabledField:ve,_getFieldArray:F,_reset:Z,_resetDefaultValues:()=>Al(t.defaultValues)&&t.defaultValues().then(Q=>{we(Q,t.resetOptions),u.state.next({isLoading:!1})}),_updateFormState:Q=>{r={...r,...Q}},_disableForm:ge,_subjects:u,_proxyFormState:d,_setErrors:b,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(Q){a=Q},get _defaultValues(){return i},get _names(){return o},set _names(Q){o=Q},get _formState(){return r},set _formState(Q){r=Q},get _options(){return t},set _options(Q){t={...t,...Q}}},trigger:ae,register:Ie,handleSubmit:J,watch:_e,setValue:H,getValues:z,reset:we,resetField:ee,clearErrors:K,unregister:de,setError:oe,setFocus:(Q,re={})=>{const fe=lt(n,Q),ke=fe&&fe._f;if(ke){const je=ke.refs?ke.refs[0]:ke.ref;je.focus&&(je.focus(),re.shouldSelect&&je.select())}},getFieldState:D}}function cne(e={}){const t=se.useRef(),r=se.useRef(),[n,i]=se.useState({isDirty:!1,isValidating:!1,isLoading:Al(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Al(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...xHe(e),formState:n});const s=t.current.control;return s._options=e,WI({subject:s._subjects.state,next:a=>{Jre(a,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),se.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),se.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),se.useEffect(()=>{e.values&&!Dc(e.values,r.current)?(s._reset(e.values,s._options.resetOptions),r.current=e.values,i(a=>({...a}))):s._resetDefaultValues()},[e.values,s]),se.useEffect(()=>{e.errors&&s._setErrors(e.errors)},[e.errors,s]),se.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),se.useEffect(()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[e.shouldUnregister,s]),se.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[n]),t.current.formState=Zre(n,s),t.current}const V6=(e,t,r)=>{if(e&&"reportValidity"in e){const n=lt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},une=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?V6(n.ref,r,e):n&&n.refs&&n.refs.forEach(i=>V6(i,r,e))}},bHe=(e,t)=>{t.shouldUseNativeValidation&&une(e,t);const r={};for(const n in e){const i=lt(t.fields,n),s=Object.assign(e[n]||{},{ref:i&&i.ref});if(wHe(t.names||Object.keys(e),n)){const a=Object.assign({},lt(r,n));Lr(a,"root",s),Lr(r,n,a)}else Lr(r,n,s)}return r},wHe=(e,t)=>{const r=U6(t);return e.some(n=>U6(n).match(`^${r}\\.\\d+`))};function U6(e){return e.replace(/\]|\[/g,"")}function THe(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[a]={message:o.message,type:o.code}}else r[a]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(u){return e.push(u)})}),t){var l=r[a].types,c=l&&l[n.code];r[a]=rne(a,t,r,i,c?[].concat(c,n.message):n.message)}e.shift()}return r}function dne(e,t,r){return r===void 0&&(r={}),function(n,i,s){try{return Promise.resolve(function(a,o){try{var l=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(c){return s.shouldUseNativeValidation&&une({},s),{errors:{},values:r.raw?Object.assign({},n):c}})}catch(c){return o(c)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:bHe(THe(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}}var kr;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(kr||(kr={}));var L2;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(L2||(L2={}));const vt=kr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rc=e=>{switch(typeof e){case"undefined":return vt.undefined;case"string":return vt.string;case"number":return isNaN(e)?vt.nan:vt.number;case"boolean":return vt.boolean;case"function":return vt.function;case"bigint":return vt.bigint;case"symbol":return vt.symbol;case"object":return Array.isArray(e)?vt.array:e===null?vt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vt.promise:typeof Map<"u"&&e instanceof Map?vt.map:typeof Set<"u"&&e instanceof Set?vt.set:typeof Date<"u"&&e instanceof Date?vt.date:vt.object;default:return vt.unknown}},rt=kr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),MHe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class la extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof la))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,kr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}la.create=e=>new la(e);const Bp=(e,t)=>{let r;switch(e.code){case rt.invalid_type:e.received===vt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case rt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,kr.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:r=`Unrecognized key(s) in object: ${kr.joinValues(e.keys,", ")}`;break;case rt.invalid_union:r="Invalid input";break;case rt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${kr.joinValues(e.options)}`;break;case rt.invalid_enum_value:r=`Invalid enum value. Expected ${kr.joinValues(e.options)}, received '${e.received}'`;break;case rt.invalid_arguments:r="Invalid function arguments";break;case rt.invalid_return_type:r="Invalid function return type";break;case rt.invalid_date:r="Invalid date";break;case rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:kr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case rt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case rt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case rt.custom:r="Invalid input";break;case rt.invalid_intersection_types:r="Intersection results could not be merged";break;case rt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case rt.not_finite:r="Number must be finite";break;default:r=t.defaultError,kr.assertNever(e)}return{message:r}};let fne=Bp;function kHe(e){fne=e}function Yw(){return fne}const Qw=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},SHe=[];function mt(e,t){const r=Yw(),n=Qw({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Bp?void 0:Bp].filter(i=>!!i)});e.common.issues.push(n)}class os{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return Yt;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const s=await i.key,a=await i.value;n.push({key:s,value:a})}return os.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return Yt;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:t.value,value:n}}}const Yt=Object.freeze({status:"aborted"}),Ph=e=>({status:"dirty",value:e}),ks=e=>({status:"valid",value:e}),F2=e=>e.status==="aborted",B2=e=>e.status==="dirty",Av=e=>e.status==="valid",Ov=e=>typeof Promise<"u"&&e instanceof Promise;function Zw(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function hne(e,t,r,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var It;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(It||(It={}));var Lg,Fg;class nl{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W6=(e,t)=>{if(Av(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new la(e.common.issues);return this._error=r,this._error}}};function sr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{var l,c;const{message:d}=e;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=d??r)!==null&&c!==void 0?c:o.defaultError}},description:i}}class fr{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Rc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Rc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new os,ctx:{common:t.parent.common,data:t.data,parsedType:Rc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ov(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rc(t)},s=this._parseSync({data:t,path:i.path,parent:i});return W6(i,s)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rc(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(Ov(i)?i:Promise.resolve(i));return W6(n,s)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:rt.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Mo({schema:this,typeName:Gt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return el.create(this,this._def)}nullable(){return vu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _o.create(this,this._def)}promise(){return Vp.create(this,this._def)}or(t){return Dv.create([this,t],this._def)}and(t){return Rv.create(this,t,this._def)}transform(t){return new Mo({...sr(this._def),schema:this,typeName:Gt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Vv({...sr(this._def),innerType:this,defaultValue:r,typeName:Gt.ZodDefault})}brand(){return new KI({typeName:Gt.ZodBranded,type:this,...sr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Uv({...sr(this._def),innerType:this,catchValue:r,typeName:Gt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return T_.create(this,t)}readonly(){return Wv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const PHe=/^c[^\s-]{8,}$/i,EHe=/^[0-9a-z]+$/,CHe=/^[0-9A-HJKMNP-TV-Z]{26}$/,jHe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AHe=/^[a-z0-9_-]{21}$/i,OHe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$He=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IHe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hP;const NHe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DHe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,RHe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pne="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",LHe=new RegExp(`^${pne}$`);function mne(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function FHe(e){return new RegExp(`^${mne(e)}$`)}function gne(e){let t=`${pne}T${mne(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function BHe(e,t){return!!((t==="v4"||!t)&&NHe.test(e)||(t==="v6"||!t)&&DHe.test(e))}class go extends fr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vt.string){const s=this._getOrReturnCtx(t);return mt(s,{code:rt.invalid_type,expected:vt.string,received:s.parsedType}),Yt}const n=new os;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?mt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&mt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")$He.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"email",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")hP||(hP=new RegExp(IHe,"u")),hP.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"emoji",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")jHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"uuid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")AHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"nanoid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")PHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"cuid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")EHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"cuid2",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")CHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"ulid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),mt(i,{validation:"url",code:rt.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"regex",code:rt.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?gne(s).test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?LHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?FHe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?OHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"duration",code:rt.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?BHe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"ip",code:rt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?RHe.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"base64",code:rt.invalid_string,message:s.message}),n.dirty()):kr.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:rt.invalid_string,...It.errToObj(n)})}_addCheck(t){return new go({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...It.errToObj(t)})}url(t){return this._addCheck({kind:"url",...It.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...It.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...It.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...It.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...It.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...It.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...It.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...It.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...It.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...It.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...It.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...It.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...It.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...It.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...It.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...It.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...It.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...It.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...It.errToObj(r)})}nonempty(t){return this.min(1,It.errToObj(t))}trim(){return new go({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}go.create=e=>{var t;return new go({checks:[],typeName:Gt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...sr(e)})};function zHe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),a=parseInt(t.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class mu extends fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vt.number){const s=this._getOrReturnCtx(t);return mt(s,{code:rt.invalid_type,expected:vt.number,received:s.parsedType}),Yt}let n;const i=new os;for(const s of this._def.checks)s.kind==="int"?kr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?zHe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.not_finite,message:s.message}),i.dirty()):kr.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,It.toString(r))}gt(t,r){return this.setLimit("min",t,!1,It.toString(r))}lte(t,r){return this.setLimit("max",t,!0,It.toString(r))}lt(t,r){return this.setLimit("max",t,!1,It.toString(r))}setLimit(t,r,n,i){return new mu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:It.toString(i)}]})}_addCheck(t){return new mu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:It.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:It.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:It.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:It.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:It.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&kr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}mu.create=e=>new mu({checks:[],typeName:Gt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...sr(e)});class gu extends fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==vt.bigint){const s=this._getOrReturnCtx(t);return mt(s,{code:rt.invalid_type,expected:vt.bigint,received:s.parsedType}),Yt}let n;const i=new os;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),mt(n,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):kr.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,It.toString(r))}gt(t,r){return this.setLimit("min",t,!1,It.toString(r))}lte(t,r){return this.setLimit("max",t,!0,It.toString(r))}lt(t,r){return this.setLimit("max",t,!1,It.toString(r))}setLimit(t,r,n,i){return new gu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:It.toString(i)}]})}_addCheck(t){return new gu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:It.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}gu.create=e=>{var t;return new gu({checks:[],typeName:Gt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...sr(e)})};class $v extends fr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vt.boolean){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.boolean,received:n.parsedType}),Yt}return ks(t.data)}}$v.create=e=>new $v({typeName:Gt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...sr(e)});class tf extends fr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vt.date){const s=this._getOrReturnCtx(t);return mt(s,{code:rt.invalid_type,expected:vt.date,received:s.parsedType}),Yt}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return mt(s,{code:rt.invalid_date}),Yt}const n=new os;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:rt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):kr.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new tf({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:It.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:It.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}tf.create=e=>new tf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Gt.ZodDate,...sr(e)});class Jw extends fr{_parse(t){if(this._getType(t)!==vt.symbol){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.symbol,received:n.parsedType}),Yt}return ks(t.data)}}Jw.create=e=>new Jw({typeName:Gt.ZodSymbol,...sr(e)});class Iv extends fr{_parse(t){if(this._getType(t)!==vt.undefined){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.undefined,received:n.parsedType}),Yt}return ks(t.data)}}Iv.create=e=>new Iv({typeName:Gt.ZodUndefined,...sr(e)});class Nv extends fr{_parse(t){if(this._getType(t)!==vt.null){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.null,received:n.parsedType}),Yt}return ks(t.data)}}Nv.create=e=>new Nv({typeName:Gt.ZodNull,...sr(e)});class zp extends fr{constructor(){super(...arguments),this._any=!0}_parse(t){return ks(t.data)}}zp.create=e=>new zp({typeName:Gt.ZodAny,...sr(e)});class zd extends fr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ks(t.data)}}zd.create=e=>new zd({typeName:Gt.ZodUnknown,...sr(e)});class Ql extends fr{_parse(t){const r=this._getOrReturnCtx(t);return mt(r,{code:rt.invalid_type,expected:vt.never,received:r.parsedType}),Yt}}Ql.create=e=>new Ql({typeName:Gt.ZodNever,...sr(e)});class e1 extends fr{_parse(t){if(this._getType(t)!==vt.undefined){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.void,received:n.parsedType}),Yt}return ks(t.data)}}e1.create=e=>new e1({typeName:Gt.ZodVoid,...sr(e)});class _o extends fr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==vt.array)return mt(r,{code:rt.invalid_type,expected:vt.array,received:r.parsedType}),Yt;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(mt(r,{code:a?rt.too_big:rt.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(mt(r,{code:rt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(mt(r,{code:rt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new nl(r,a,r.path,o)))).then(a=>os.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new nl(r,a,r.path,o)));return os.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new _o({...this._def,minLength:{value:t,message:It.toString(r)}})}max(t,r){return new _o({...this._def,maxLength:{value:t,message:It.toString(r)}})}length(t,r){return new _o({...this._def,exactLength:{value:t,message:It.toString(r)}})}nonempty(t){return this.min(1,t)}}_o.create=(e,t)=>new _o({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Gt.ZodArray,...sr(t)});function rh(e){if(e instanceof Pn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=el.create(rh(n))}return new Pn({...e._def,shape:()=>t})}else return e instanceof _o?new _o({...e._def,type:rh(e.element)}):e instanceof el?el.create(rh(e.unwrap())):e instanceof vu?vu.create(rh(e.unwrap())):e instanceof il?il.create(e.items.map(t=>rh(t))):e}class Pn extends fr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=kr.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==vt.object){const c=this._getOrReturnCtx(t);return mt(c,{code:rt.invalid_type,expected:vt.object,received:c.parsedType}),Yt}const{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ql&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const d=s[c],u=i.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new nl(i,u,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ql){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(c==="strict")o.length>0&&(mt(i,{code:rt.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of o){const u=i.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new nl(i,u,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const u=await d.key,f=await d.value;c.push({key:u,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>os.mergeObjectSync(n,c)):os.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return It.errToObj,new Pn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=It.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Pn({...this._def,unknownKeys:"strip"})}passthrough(){return new Pn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Pn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Pn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Gt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Pn({...this._def,catchall:t})}pick(t){const r={};return kr.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Pn({...this._def,shape:()=>r})}omit(t){const r={};return kr.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new Pn({...this._def,shape:()=>r})}deepPartial(){return rh(this)}partial(t){const r={};return kr.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new Pn({...this._def,shape:()=>r})}required(t){const r={};return kr.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof el;)s=s._def.innerType;r[n]=s}}),new Pn({...this._def,shape:()=>r})}keyof(){return yne(kr.objectKeys(this.shape))}}Pn.create=(e,t)=>new Pn({shape:()=>e,unknownKeys:"strip",catchall:Ql.create(),typeName:Gt.ZodObject,...sr(t)});Pn.strictCreate=(e,t)=>new Pn({shape:()=>e,unknownKeys:"strict",catchall:Ql.create(),typeName:Gt.ZodObject,...sr(t)});Pn.lazycreate=(e,t)=>new Pn({shape:e,unknownKeys:"strip",catchall:Ql.create(),typeName:Gt.ZodObject,...sr(t)});class Dv extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new la(o.ctx.common.issues));return mt(r,{code:rt.invalid_union,unionErrors:a}),Yt}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new la(l));return mt(r,{code:rt.invalid_union,unionErrors:o}),Yt}}get options(){return this._def.options}}Dv.create=(e,t)=>new Dv({options:e,typeName:Gt.ZodUnion,...sr(t)});const xl=e=>e instanceof Fv?xl(e.schema):e instanceof Mo?xl(e.innerType()):e instanceof Bv?[e.value]:e instanceof yu?e.options:e instanceof zv?kr.objectValues(e.enum):e instanceof Vv?xl(e._def.innerType):e instanceof Iv?[void 0]:e instanceof Nv?[null]:e instanceof el?[void 0,...xl(e.unwrap())]:e instanceof vu?[null,...xl(e.unwrap())]:e instanceof KI||e instanceof Wv?xl(e.unwrap()):e instanceof Uv?xl(e._def.innerType):[];class ZT extends fr{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.object)return mt(r,{code:rt.invalid_type,expected:vt.object,received:r.parsedType}),Yt;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(mt(r,{code:rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Yt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const s of r){const a=xl(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);i.set(o,s)}}return new ZT({typeName:Gt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...sr(n)})}}function z2(e,t){const r=Rc(e),n=Rc(t);if(e===t)return{valid:!0,data:e};if(r===vt.object&&n===vt.object){const i=kr.objectKeys(t),s=kr.objectKeys(e).filter(o=>i.indexOf(o)!==-1),a={...e,...t};for(const o of s){const l=z2(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===vt.array&&n===vt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],l=z2(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===vt.date&&n===vt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Rv extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(s,a)=>{if(F2(s)||F2(a))return Yt;const o=z2(s.value,a.value);return o.valid?((B2(s)||B2(a))&&r.dirty(),{status:r.value,value:o.data}):(mt(n,{code:rt.invalid_intersection_types}),Yt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Rv.create=(e,t,r)=>new Rv({left:e,right:t,typeName:Gt.ZodIntersection,...sr(r)});class il extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.array)return mt(n,{code:rt.invalid_type,expected:vt.array,received:n.parsedType}),Yt;if(n.data.length<this._def.items.length)return mt(n,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Yt;!this._def.rest&&n.data.length>this._def.items.length&&(mt(n,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new nl(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>os.mergeArray(r,a)):os.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new il({...this._def,rest:t})}}il.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new il({items:e,typeName:Gt.ZodTuple,rest:null,...sr(t)})};class Lv extends fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.object)return mt(n,{code:rt.invalid_type,expected:vt.object,received:n.parsedType}),Yt;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new nl(n,o,n.path,o)),value:a._parse(new nl(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?os.mergeObjectAsync(r,i):os.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof fr?new Lv({keyType:t,valueType:r,typeName:Gt.ZodRecord,...sr(n)}):new Lv({keyType:go.create(),valueType:t,typeName:Gt.ZodRecord,...sr(r)})}}class t1 extends fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.map)return mt(n,{code:rt.invalid_type,expected:vt.map,received:n.parsedType}),Yt;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],c)=>({key:i._parse(new nl(n,o,n.path,[c,"key"])),value:s._parse(new nl(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Yt;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(c.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Yt;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(c.value,d.value)}return{status:r.value,value:o}}}}t1.create=(e,t,r)=>new t1({valueType:t,keyType:e,typeName:Gt.ZodMap,...sr(r)});class rf extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.set)return mt(n,{code:rt.invalid_type,expected:vt.set,received:n.parsedType}),Yt;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(mt(n,{code:rt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(mt(n,{code:rt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Yt;d.status==="dirty"&&r.dirty(),c.add(d.value)}return{status:r.value,value:c}}const o=[...n.data.values()].map((l,c)=>s._parse(new nl(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,r){return new rf({...this._def,minSize:{value:t,message:It.toString(r)}})}max(t,r){return new rf({...this._def,maxSize:{value:t,message:It.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}rf.create=(e,t)=>new rf({valueType:e,minSize:null,maxSize:null,typeName:Gt.ZodSet,...sr(t)});class Hh extends fr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.function)return mt(r,{code:rt.invalid_type,expected:vt.function,received:r.parsedType}),Yt;function n(o,l){return Qw({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Yw(),Bp].filter(c=>!!c),issueData:{code:rt.invalid_arguments,argumentsError:l}})}function i(o,l){return Qw({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Yw(),Bp].filter(c=>!!c),issueData:{code:rt.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Vp){const o=this;return ks(async function(...l){const c=new la([]),d=await o._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(n(l,p)),c}),u=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(u,s).catch(p=>{throw c.addIssue(i(u,p)),c})})}else{const o=this;return ks(function(...l){const c=o._def.args.safeParse(l,s);if(!c.success)throw new la([n(l,c.error)]);const d=Reflect.apply(a,this,c.data),u=o._def.returns.safeParse(d,s);if(!u.success)throw new la([i(d,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Hh({...this._def,args:il.create(t).rest(zd.create())})}returns(t){return new Hh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new Hh({args:t||il.create([]).rest(zd.create()),returns:r||zd.create(),typeName:Gt.ZodFunction,...sr(n)})}}class Fv extends fr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Fv.create=(e,t)=>new Fv({getter:e,typeName:Gt.ZodLazy,...sr(t)});class Bv extends fr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return mt(r,{received:r.data,code:rt.invalid_literal,expected:this._def.value}),Yt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Bv.create=(e,t)=>new Bv({value:e,typeName:Gt.ZodLiteral,...sr(t)});function yne(e,t){return new yu({values:e,typeName:Gt.ZodEnum,...sr(t)})}class yu extends fr{constructor(){super(...arguments),Lg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return mt(r,{expected:kr.joinValues(n),received:r.parsedType,code:rt.invalid_type}),Yt}if(Zw(this,Lg)||hne(this,Lg,new Set(this._def.values)),!Zw(this,Lg).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return mt(r,{received:r.data,code:rt.invalid_enum_value,options:n}),Yt}return ks(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return yu.create(t,{...this._def,...r})}exclude(t,r=this._def){return yu.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Lg=new WeakMap;yu.create=yne;class zv extends fr{constructor(){super(...arguments),Fg.set(this,void 0)}_parse(t){const r=kr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==vt.string&&n.parsedType!==vt.number){const i=kr.objectValues(r);return mt(n,{expected:kr.joinValues(i),received:n.parsedType,code:rt.invalid_type}),Yt}if(Zw(this,Fg)||hne(this,Fg,new Set(kr.getValidEnumValues(this._def.values))),!Zw(this,Fg).has(t.data)){const i=kr.objectValues(r);return mt(n,{received:n.data,code:rt.invalid_enum_value,options:i}),Yt}return ks(t.data)}get enum(){return this._def.values}}Fg=new WeakMap;zv.create=(e,t)=>new zv({values:e,typeName:Gt.ZodNativeEnum,...sr(t)});class Vp extends fr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.promise&&r.common.async===!1)return mt(r,{code:rt.invalid_type,expected:vt.promise,received:r.parsedType}),Yt;const n=r.parsedType===vt.promise?r.data:Promise.resolve(r.data);return ks(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Vp.create=(e,t)=>new Vp({type:e,typeName:Gt.ZodPromise,...sr(t)});class Mo extends fr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Gt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:a=>{mt(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return Yt;const l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?Yt:l.status==="dirty"||r.value==="dirty"?Ph(l.value):l});{if(r.value==="aborted")return Yt;const o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?Yt:o.status==="dirty"||r.value==="dirty"?Ph(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Yt:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?Yt:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Av(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Av(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);kr.assertNever(i)}}Mo.create=(e,t,r)=>new Mo({schema:e,typeName:Gt.ZodEffects,effect:t,...sr(r)});Mo.createWithPreprocess=(e,t,r)=>new Mo({schema:t,effect:{type:"preprocess",transform:e},typeName:Gt.ZodEffects,...sr(r)});class el extends fr{_parse(t){return this._getType(t)===vt.undefined?ks(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}el.create=(e,t)=>new el({innerType:e,typeName:Gt.ZodOptional,...sr(t)});class vu extends fr{_parse(t){return this._getType(t)===vt.null?ks(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}vu.create=(e,t)=>new vu({innerType:e,typeName:Gt.ZodNullable,...sr(t)});class Vv extends fr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===vt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Vv.create=(e,t)=>new Vv({innerType:e,typeName:Gt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...sr(t)});class Uv extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ov(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new la(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new la(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Uv.create=(e,t)=>new Uv({innerType:e,typeName:Gt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...sr(t)});class r1 extends fr{_parse(t){if(this._getType(t)!==vt.nan){const n=this._getOrReturnCtx(t);return mt(n,{code:rt.invalid_type,expected:vt.nan,received:n.parsedType}),Yt}return{status:"valid",value:t.data}}}r1.create=e=>new r1({typeName:Gt.ZodNaN,...sr(e)});const VHe=Symbol("zod_brand");class KI extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class T_ extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Yt:s.status==="dirty"?(r.dirty(),Ph(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Yt:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new T_({in:t,out:r,typeName:Gt.ZodPipeline})}}class Wv extends fr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Av(i)&&(i.value=Object.freeze(i.value)),i);return Ov(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Wv.create=(e,t)=>new Wv({innerType:e,typeName:Gt.ZodReadonly,...sr(t)});function vne(e,t={},r){return e?zp.create().superRefine((n,i)=>{var s,a;if(!e(n)){const o=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...c,fatal:l})}}):zp.create()}const UHe={object:Pn.lazycreate};var Gt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Gt||(Gt={}));const WHe=(e,t={message:`Input not instance of ${e.name}`})=>vne(r=>r instanceof e,t),yd=go.create,_ne=mu.create,GHe=r1.create,HHe=gu.create,qI=$v.create,KHe=tf.create,qHe=Jw.create,XHe=Iv.create,YHe=Nv.create,QHe=zp.create,ZHe=zd.create,JHe=Ql.create,eKe=e1.create,tKe=_o.create,xne=Pn.create,rKe=Pn.strictCreate,nKe=Dv.create,iKe=ZT.create,sKe=Rv.create,aKe=il.create,oKe=Lv.create,lKe=t1.create,cKe=rf.create,uKe=Hh.create,dKe=Fv.create,fKe=Bv.create,hKe=yu.create,pKe=zv.create,mKe=Vp.create,G6=Mo.create,gKe=el.create,yKe=vu.create,vKe=Mo.createWithPreprocess,_Ke=T_.create,xKe=()=>yd().optional(),bKe=()=>_ne().optional(),wKe=()=>qI().optional(),TKe={string:e=>go.create({...e,coerce:!0}),number:e=>mu.create({...e,coerce:!0}),boolean:e=>$v.create({...e,coerce:!0}),bigint:e=>gu.create({...e,coerce:!0}),date:e=>tf.create({...e,coerce:!0})},MKe=Yt;var ml=Object.freeze({__proto__:null,defaultErrorMap:Bp,setErrorMap:kHe,getErrorMap:Yw,makeIssue:Qw,EMPTY_PATH:SHe,addIssueToContext:mt,ParseStatus:os,INVALID:Yt,DIRTY:Ph,OK:ks,isAborted:F2,isDirty:B2,isValid:Av,isAsync:Ov,get util(){return kr},get objectUtil(){return L2},ZodParsedType:vt,getParsedType:Rc,ZodType:fr,datetimeRegex:gne,ZodString:go,ZodNumber:mu,ZodBigInt:gu,ZodBoolean:$v,ZodDate:tf,ZodSymbol:Jw,ZodUndefined:Iv,ZodNull:Nv,ZodAny:zp,ZodUnknown:zd,ZodNever:Ql,ZodVoid:e1,ZodArray:_o,ZodObject:Pn,ZodUnion:Dv,ZodDiscriminatedUnion:ZT,ZodIntersection:Rv,ZodTuple:il,ZodRecord:Lv,ZodMap:t1,ZodSet:rf,ZodFunction:Hh,ZodLazy:Fv,ZodLiteral:Bv,ZodEnum:yu,ZodNativeEnum:zv,ZodPromise:Vp,ZodEffects:Mo,ZodTransformer:Mo,ZodOptional:el,ZodNullable:vu,ZodDefault:Vv,ZodCatch:Uv,ZodNaN:r1,BRAND:VHe,ZodBranded:KI,ZodPipeline:T_,ZodReadonly:Wv,custom:vne,Schema:fr,ZodSchema:fr,late:UHe,get ZodFirstPartyTypeKind(){return Gt},coerce:TKe,any:QHe,array:tKe,bigint:HHe,boolean:qI,date:KHe,discriminatedUnion:iKe,effect:G6,enum:hKe,function:uKe,instanceof:WHe,intersection:sKe,lazy:dKe,literal:fKe,map:lKe,nan:GHe,nativeEnum:pKe,never:JHe,null:YHe,nullable:yKe,number:_ne,object:xne,oboolean:wKe,onumber:bKe,optional:gKe,ostring:xKe,pipeline:_Ke,preprocess:vKe,promise:mKe,record:oKe,set:cKe,strictObject:rKe,string:yd,symbol:qHe,transformer:G6,tuple:aKe,undefined:XHe,union:nKe,unknown:ZHe,void:eKe,NEVER:MKe,ZodIssueCode:rt,quotelessJson:MHe,ZodError:la});const Gv={_origin:"https://api.emailjs.com"},kKe=(e,t="https://api.emailjs.com")=>{Gv._userID=e,Gv._origin=t},bne=(e,t,r)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class H6{constructor(t){this.status=t.status,this.text=t.responseText}}const wne=(e,t,r={})=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:a})=>{const o=new H6(a);o.status===200||o.text==="OK"?n(o):i(o)}),s.addEventListener("error",({target:a})=>{i(new H6(a))}),s.open("POST",Gv._origin+e,!0),Object.keys(r).forEach(a=>{s.setRequestHeader(a,r[a])}),s.send(t)}),SKe=(e,t,r,n)=>{const i=n||Gv._userID;return bne(i,e,t),wne("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},PKe=e=>{let t;if(typeof e=="string"?t=document.querySelector(e):t=e,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},EKe=(e,t,r,n)=>{const i=n||Gv._userID,s=PKe(r);bne(i,e,t);const a=new FormData(s);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),wne("/api/v1.0/email/send-form",a)},Tne={init:kKe,send:SKe,sendForm:EKe},Mne=sHe,kne=E.createContext({}),Ns=({...e})=>h.jsx(kne.Provider,{value:{name:e.name},children:h.jsx(cHe,{...e})}),JT=()=>{const e=E.useContext(kne),t=E.useContext(Sne),{getFieldState:r,formState:n}=QT(),i=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},Sne=E.createContext({}),ys=E.forwardRef(({className:e,...t},r)=>{const n=E.useId();return h.jsx(Sne.Provider,{value:{id:n},children:h.jsx("div",{ref:r,className:kt("space-y-2",e),...t})})});ys.displayName="FormItem";const Js=E.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:i}=JT();return h.jsx(Li,{ref:r,className:kt(n&&"text-destructive",e),htmlFor:i,...t})});Js.displayName="FormLabel";const vs=E.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:s}=JT();return h.jsx(lu,{ref:t,id:n,"aria-describedby":r?`${i} ${s}`:`${i}`,"aria-invalid":!!r,...e})});vs.displayName="FormControl";const CKe=E.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=JT();return h.jsx("p",{ref:r,id:n,className:kt("text-sm text-muted-foreground",e),...t})});CKe.displayName="FormDescription";const ea=E.forwardRef(({className:e,children:t,...r},n)=>{const{error:i,formMessageId:s}=JT(),a=i?String(i==null?void 0:i.message):t;return a?h.jsx("p",{ref:n,id:s,className:kt("text-sm font-medium text-destructive",e),...r,children:a}):null});ea.displayName="FormMessage";function K6(e,[t,r]){return Math.min(r,Math.max(t,e))}var jKe=[" ","Enter","ArrowUp","ArrowDown"],AKe=[" ","Enter"],M_="Select",[eM,tM,OKe]=r_(M_),[vm,rXe]=df(M_,[OKe,$1]),rM=$1(),[$Ke,Au]=vm(M_),[IKe,NKe]=vm(M_),Pne=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:p,form:m}=e,g=rM(t),[x,v]=E.useState(null),[y,w]=E.useState(null),[b,_]=E.useState(!1),T=Y1(c),[M=!1,k]=Ul({prop:n,defaultProp:i,onChange:s}),[j,A]=Ul({prop:a,defaultProp:o,onChange:l}),R=E.useRef(null),I=x?m||!!x.closest("form"):!0,[$,F]=E.useState(new Set),V=Array.from($).map(G=>G.props.value).join(";");return h.jsx(zme,{...g,children:h.jsxs($Ke,{required:p,scope:t,trigger:x,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:b,onValueNodeHasChildrenChange:_,contentId:Xo(),value:j,onValueChange:A,open:M,onOpenChange:k,dir:T,triggerPointerDownPosRef:R,disabled:f,children:[h.jsx(eM.Provider,{scope:t,children:h.jsx(IKe,{scope:e.__scopeSelect,onNativeOptionAdd:E.useCallback(G=>{F(H=>new Set(H).add(G))},[]),onNativeOptionRemove:E.useCallback(G=>{F(H=>{const B=new Set(H);return B.delete(G),B})},[]),children:r})}),I?h.jsxs(Zne,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:j,onChange:G=>A(G.target.value),disabled:f,form:m,children:[j===void 0?h.jsx("option",{value:""}):null,Array.from($)]},V):null]})})};Pne.displayName=M_;var Ene="SelectTrigger",Cne=E.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=rM(r),a=Au(Ene,r),o=a.disabled||n,l=Or(t,a.onTriggerChange),c=tM(r),d=E.useRef("touch"),[u,f,p]=Jne(g=>{const x=c().filter(w=>!w.disabled),v=x.find(w=>w.value===a.value),y=eie(x,g,v);y!==void 0&&a.onValueChange(y.value)}),m=g=>{o||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(hX,{asChild:!0,...s,children:h.jsx(Ft.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Qne(a.value)?"":void 0,...i,ref:l,onClick:xt(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:xt(i.onPointerDown,g=>{d.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:xt(i.onKeyDown,g=>{const x=u.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(x&&g.key===" ")&&jKe.includes(g.key)&&(m(),g.preventDefault())})})})});Cne.displayName=Ene;var jne="SelectValue",Ane=E.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...o}=e,l=Au(jne,r),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,u=Or(t,l.onValueNodeChange);return wi(()=>{c(d)},[c,d]),h.jsx(Ft.span,{...o,ref:u,style:{pointerEvents:"none"},children:Qne(l.value)?h.jsx(h.Fragment,{children:a}):s})});Ane.displayName=jne;var DKe="SelectIcon",One=E.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return h.jsx(Ft.span,{"aria-hidden":!0,...i,ref:t,children:n||"▼"})});One.displayName=DKe;var RKe="SelectPortal",$ne=e=>h.jsx(P1,{asChild:!0,...e});$ne.displayName=RKe;var nf="SelectContent",Ine=E.forwardRef((e,t)=>{const r=Au(nf,e.__scopeSelect),[n,i]=E.useState();if(wi(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?uf.createPortal(h.jsx(Nne,{scope:e.__scopeSelect,children:h.jsx(eM.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),s):null}return h.jsx(Dne,{...e,ref:t})});Ine.displayName=nf;var ro=10,[Nne,Ou]=vm(nf),LKe="SelectContentImpl",Dne=E.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:x,...v}=e,y=Au(nf,r),[w,b]=E.useState(null),[_,T]=E.useState(null),M=Or(t,ve=>b(ve)),[k,j]=E.useState(null),[A,R]=E.useState(null),I=tM(r),[$,F]=E.useState(!1),V=E.useRef(!1);E.useEffect(()=>{if(w)return CZ(w)},[w]),xZ();const G=E.useCallback(ve=>{const[Ie,...Se]=I().map(ee=>ee.ref.current),[ge]=Se.slice(-1),J=document.activeElement;for(const ee of ve)if(ee===J||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===Ie&&_&&(_.scrollTop=0),ee===ge&&_&&(_.scrollTop=_.scrollHeight),ee==null||ee.focus(),document.activeElement!==J))return},[I,_]),H=E.useCallback(()=>G([k,w]),[G,k,w]);E.useEffect(()=>{$&&H()},[$,H]);const{onOpenChange:B,triggerPointerDownPosRef:te}=y;E.useEffect(()=>{if(w){let ve={x:0,y:0};const Ie=ge=>{var J,ee;ve={x:Math.abs(Math.round(ge.pageX)-(((J=te.current)==null?void 0:J.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((ee=te.current)==null?void 0:ee.y)??0))}},Se=ge=>{ve.x<=10&&ve.y<=10?ge.preventDefault():w.contains(ge.target)||B(!1),document.removeEventListener("pointermove",Ie),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Ie),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ie),document.removeEventListener("pointerup",Se,{capture:!0})}}},[w,B,te]),E.useEffect(()=>{const ve=()=>B(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[B]);const[ae,z]=Jne(ve=>{const Ie=I().filter(J=>!J.disabled),Se=Ie.find(J=>J.ref.current===document.activeElement),ge=eie(Ie,ve,Se);ge&&setTimeout(()=>ge.ref.current.focus())}),D=E.useCallback((ve,Ie,Se)=>{const ge=!V.current&&!Se;(y.value!==void 0&&y.value===Ie||ge)&&(j(ve),ge&&(V.current=!0))},[y.value]),K=E.useCallback(()=>w==null?void 0:w.focus(),[w]),oe=E.useCallback((ve,Ie,Se)=>{const ge=!V.current&&!Se;(y.value!==void 0&&y.value===Ie||ge)&&R(ve)},[y.value]),_e=n==="popper"?V2:Rne,de=_e===V2?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:x}:{};return h.jsx(Nne,{scope:r,content:w,viewport:_,onViewportChange:T,itemRefCallback:D,selectedItem:k,onItemLeave:K,itemTextRefCallback:oe,focusSelectedItem:H,selectedItemText:A,position:n,isPositioned:$,searchRef:ae,children:h.jsx(j$,{as:lu,allowPinchZoom:!0,children:h.jsx(C$,{asChild:!0,trapped:y.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:xt(i,ve=>{var Ie;(Ie=y.trigger)==null||Ie.focus({preventScroll:!0}),ve.preventDefault()}),children:h.jsx(qp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:h.jsx(_e,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ve=>ve.preventDefault(),...v,...de,onPlaced:()=>F(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:xt(v.onKeyDown,ve=>{const Ie=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Ie&&ve.key.length===1&&z(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let ge=I().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const J=ve.target,ee=ge.indexOf(J);ge=ge.slice(ee+1)}setTimeout(()=>G(ge)),ve.preventDefault()}})})})})})})});Dne.displayName=LKe;var FKe="SelectItemAlignedPosition",Rne=E.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=Au(nf,r),a=Ou(nf,r),[o,l]=E.useState(null),[c,d]=E.useState(null),u=Or(t,M=>d(M)),f=tM(r),p=E.useRef(!1),m=E.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:v,focusSelectedItem:y}=a,w=E.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&g&&x&&v){const M=s.trigger.getBoundingClientRect(),k=c.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(s.dir!=="rtl"){const J=A.left-k.left,ee=j.left-J,Z=M.left-ee,we=M.width+Z,$e=Math.max(we,k.width),Ce=window.innerWidth-ro,Pe=K6(ee,[ro,Math.max(ro,Ce-$e)]);o.style.minWidth=we+"px",o.style.left=Pe+"px"}else{const J=k.right-A.right,ee=window.innerWidth-j.right-J,Z=window.innerWidth-M.right-ee,we=M.width+Z,$e=Math.max(we,k.width),Ce=window.innerWidth-ro,Pe=K6(ee,[ro,Math.max(ro,Ce-$e)]);o.style.minWidth=we+"px",o.style.right=Pe+"px"}const R=f(),I=window.innerHeight-ro*2,$=g.scrollHeight,F=window.getComputedStyle(c),V=parseInt(F.borderTopWidth,10),G=parseInt(F.paddingTop,10),H=parseInt(F.borderBottomWidth,10),B=parseInt(F.paddingBottom,10),te=V+G+$+B+H,ae=Math.min(x.offsetHeight*5,te),z=window.getComputedStyle(g),D=parseInt(z.paddingTop,10),K=parseInt(z.paddingBottom,10),oe=M.top+M.height/2-ro,_e=I-oe,de=x.offsetHeight/2,ve=x.offsetTop+de,Ie=V+G+ve,Se=te-Ie;if(Ie<=oe){const J=R.length>0&&x===R[R.length-1].ref.current;o.style.bottom="0px";const ee=c.clientHeight-g.offsetTop-g.offsetHeight,Z=Math.max(_e,de+(J?K:0)+ee+H),we=Ie+Z;o.style.height=we+"px"}else{const J=R.length>0&&x===R[0].ref.current;o.style.top="0px";const Z=Math.max(oe,V+g.offsetTop+(J?D:0)+de)+Se;o.style.height=Z+"px",g.scrollTop=Ie-oe+g.offsetTop}o.style.margin=`${ro}px 0`,o.style.minHeight=ae+"px",o.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,o,c,g,x,v,s.dir,n]);wi(()=>w(),[w]);const[b,_]=E.useState();wi(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const T=E.useCallback(M=>{M&&m.current===!0&&(w(),y==null||y(),m.current=!1)},[w,y]);return h.jsx(zKe,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:T,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:h.jsx(Ft.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Rne.displayName=FKe;var BKe="SelectPopperPosition",V2=E.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ro,...s}=e,a=rM(r);return h.jsx(pX,{...a,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});V2.displayName=BKe;var[zKe,XI]=vm(nf,{}),U2="SelectViewport",Lne=E.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=Ou(U2,r),a=XI(U2,r),o=Or(t,s.onViewportChange),l=E.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),h.jsx(eM.Slot,{scope:r,children:h.jsx(Ft.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:xt(i.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&u){const p=Math.abs(l.current-d.scrollTop);if(p>0){const m=window.innerHeight-ro*2,g=parseFloat(u.style.minHeight),x=parseFloat(u.style.height),v=Math.max(g,x);if(v<m){const y=v+p,w=Math.min(m,y),b=y-w;u.style.height=w+"px",u.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Lne.displayName=U2;var Fne="SelectGroup",[VKe,UKe]=vm(Fne),WKe=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Xo();return h.jsx(VKe,{scope:r,id:i,children:h.jsx(Ft.div,{role:"group","aria-labelledby":i,...n,ref:t})})});WKe.displayName=Fne;var Bne="SelectLabel",zne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=UKe(Bne,r);return h.jsx(Ft.div,{id:i.id,...n,ref:t})});zne.displayName=Bne;var n1="SelectItem",[GKe,Vne]=vm(n1),Une=E.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=e,o=Au(n1,r),l=Ou(n1,r),c=o.value===n,[d,u]=E.useState(s??""),[f,p]=E.useState(!1),m=Or(t,y=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,y,n,i)}),g=Xo(),x=E.useRef("touch"),v=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(GKe,{scope:r,value:n,disabled:i,textId:g,isSelected:c,onItemTextChange:E.useCallback(y=>{u(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:h.jsx(eM.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:h.jsx(Ft.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:xt(a.onFocus,()=>p(!0)),onBlur:xt(a.onBlur,()=>p(!1)),onClick:xt(a.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:xt(a.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:xt(a.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:xt(a.onPointerMove,y=>{var w;x.current=y.pointerType,i?(w=l.onItemLeave)==null||w.call(l):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xt(a.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:xt(a.onKeyDown,y=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(AKe.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});Une.displayName=n1;var Bg="SelectItemText",Wne=E.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,a=Au(Bg,r),o=Ou(Bg,r),l=Vne(Bg,r),c=NKe(Bg,r),[d,u]=E.useState(null),f=Or(t,v=>u(v),l.onItemTextChange,v=>{var y;return(y=o.itemTextRefCallback)==null?void 0:y.call(o,v,l.value,l.disabled)}),p=d==null?void 0:d.textContent,m=E.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=c;return wi(()=>(g(m),()=>x(m)),[g,x,m]),h.jsxs(h.Fragment,{children:[h.jsx(Ft.span,{id:l.textId,...s,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?uf.createPortal(s.children,a.valueNode):null]})});Wne.displayName=Bg;var Gne="SelectItemIndicator",Hne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Vne(Gne,r).isSelected?h.jsx(Ft.span,{"aria-hidden":!0,...n,ref:t}):null});Hne.displayName=Gne;var W2="SelectScrollUpButton",Kne=E.forwardRef((e,t)=>{const r=Ou(W2,e.__scopeSelect),n=XI(W2,e.__scopeSelect),[i,s]=E.useState(!1),a=Or(t,n.onScrollButtonChange);return wi(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollTop>0;s(c)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?h.jsx(Xne,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Kne.displayName=W2;var G2="SelectScrollDownButton",qne=E.forwardRef((e,t)=>{const r=Ou(G2,e.__scopeSelect),n=XI(G2,e.__scopeSelect),[i,s]=E.useState(!1),a=Or(t,n.onScrollButtonChange);return wi(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;s(d)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?h.jsx(Xne,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});qne.displayName=G2;var Xne=E.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=Ou("SelectScrollButton",r),a=E.useRef(null),o=tM(r),l=E.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),wi(()=>{var d;const c=o().find(u=>u.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),h.jsx(Ft.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:xt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xt(i.onPointerLeave,()=>{l()})})}),HKe="SelectSeparator",Yne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return h.jsx(Ft.div,{"aria-hidden":!0,...n,ref:t})});Yne.displayName=HKe;var H2="SelectArrow",KKe=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=rM(r),s=Au(H2,r),a=Ou(H2,r);return s.open&&a.position==="popper"?h.jsx(mX,{...i,...n,ref:t}):null});KKe.displayName=H2;function Qne(e){return e===""||e===void 0}var Zne=E.forwardRef((e,t)=>{const{value:r,...n}=e,i=E.useRef(null),s=Or(t,i),a=w$(r);return E.useEffect(()=>{const o=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==r&&d){const u=new Event("change",{bubbles:!0});d.call(o,r),o.dispatchEvent(u)}},[a,r]),h.jsx(n_,{asChild:!0,children:h.jsx("select",{...n,ref:s,defaultValue:r})})});Zne.displayName="BubbleSelect";function Jne(e){const t=Xn(e),r=E.useRef(""),n=E.useRef(0),i=E.useCallback(a=>{const o=r.current+a;t(o),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=E.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function eie(e,t,r){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let a=qKe(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==r));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function qKe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var XKe=Pne,tie=Cne,YKe=Ane,QKe=One,ZKe=$ne,rie=Ine,JKe=Lne,nie=zne,iie=Une,e9e=Wne,t9e=Hne,sie=Kne,aie=qne,oie=Yne;const lie=XKe,cie=YKe,YI=E.forwardRef(({className:e,children:t,...r},n)=>h.jsxs(tie,{ref:n,className:kt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,h.jsx(QKe,{asChild:!0,children:h.jsx(yO,{className:"h-4 w-4 opacity-50"})})]}));YI.displayName=tie.displayName;const uie=E.forwardRef(({className:e,...t},r)=>h.jsx(sie,{ref:r,className:kt("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(Yfe,{className:"h-4 w-4"})}));uie.displayName=sie.displayName;const die=E.forwardRef(({className:e,...t},r)=>h.jsx(aie,{ref:r,className:kt("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(yO,{className:"h-4 w-4"})}));die.displayName=aie.displayName;const QI=E.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>h.jsx(ZKe,{children:h.jsxs(rie,{ref:i,className:kt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[h.jsx(uie,{}),h.jsx(JKe,{className:kt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(die,{})]})}));QI.displayName=rie.displayName;const r9e=E.forwardRef(({className:e,...t},r)=>h.jsx(nie,{ref:r,className:kt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));r9e.displayName=nie.displayName;const Eh=E.forwardRef(({className:e,children:t,...r},n)=>h.jsxs(iie,{ref:n,className:kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(t9e,{children:h.jsx(gO,{className:"h-4 w-4"})})}),h.jsx(e9e,{children:t})]}));Eh.displayName=iie.displayName;const n9e=E.forwardRef(({className:e,...t},r)=>h.jsx(oie,{ref:r,className:kt("-mx-1 my-1 h-px bg-muted",e),...t}));n9e.displayName=oie.displayName;const q6="service_6r9m8wf",X6="template_on07od7",Y6="wRFDBmEPD5mCrpb2a",i9e=xne({name:yd().min(1,"Nimi on pakollinen"),email:yd().email("Virheellinen sähköpostiosoite").min(1,"Sähköpostiosoite on pakollinen"),phone:yd().min(1,"Puhelinnumero on pakollinen"),address:yd().min(1,"Katuosoite on pakollinen"),reason:yd().min(1,"Syy peruutukselle on pakollinen"),confirmation:qI().refine(e=>e===!0,"Vahvistus on pakollinen")}),s9e=()=>{const[e,t]=E.useState(!1),{toast:r}=So(),n=cne({resolver:dne(i9e),defaultValues:{name:"",email:"",phone:"",address:"",reason:"",confirmation:!1}});E.useEffect(()=>{window.scrollTo(0,0)},[]);const i=async a=>{t(!0);try{console.log("EmailJS Configuration:",{SERVICE_ID:q6,TEMPLATE_ID:X6,PUBLIC_KEY:Y6.substring(0,5)+"..."});const o={subject:"Irtisanomislomake",from_name:a.name,phone:a.phone,from_email:a.email,message:`Irtisanomislomake:

Nimi: ${a.name}
Sähköposti: ${a.email}
Puhelinnumero: ${a.phone}
Osoite: ${a.address}
Syy peruutukselle: ${a.reason}
Vahvistus: ${a.confirmation?"Kyllä":"Ei"}`,to_name:"OmaVerkkoturva Team",reply_to:a.email};console.log("Template Parameters:",o);const l=await Tne.send(q6,X6,o,Y6);console.log("EmailJS Success:",l),r({title:"Irtisanomislomake lähetetty",description:"Kiitos irtisanomislomakkeestasi. Käsittelemme sen mahdollisimman pian."}),n.reset()}catch(o){console.error("EmailJS error:",o),r({title:"Virhe",description:"Lomakkeen lähetyksessä tapahtui virhe. Yritä uudelleen.",variant:"destructive"})}finally{t(!1)}},s=["En tarvitse palvelua enää","Palvelu on liian kallis","Löysin paremman vaihtoehdon","Teknisiä ongelmia","Huono asiakaspalvelu","Muu syy"];return h.jsx(Qr,{showContact:!1,children:h.jsx("section",{className:"pt-32 pb-16 px-4 sm:px-6 lg:px-8 bg-gray-50 min-h-screen",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Täältä pystyt irtisanomaan palvelun"})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-24",children:[h.jsxs("div",{className:"flex flex-col justify-center",children:[h.jsx("p",{className:"text-gray-900 text-xl font-semibold leading-relaxed mb-6",children:"Kiitos, että olet ollut mukana turvaamassa verkkoa kanssamme."}),h.jsx("p",{className:"text-gray-900 text-lg leading-relaxed mb-6",children:"Arvostamme sitä, että valitsit OmaVerkkoturvan suojaamaan digitaalisia tietojasi ja identiteettiäsi. Jokainen asiakas on meille tärkeä, ja olemme kiitollisia luottamuksesta, jonka olet meille antanut."}),h.jsx("p",{className:"text-gray-900 text-lg leading-relaxed mb-6",children:"Ymmärrämme, että elämäntilanteet ja tarpeet voivat muuttua. Jos päätät lopettaa palvelun, toivomme, että kokemuksesi on ollut hyödyllinen ja että tarjoamamme turva on tuonut sinulle mielenrauhaa verkossa liikkuessasi."}),h.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:"Jos mielessäsi on kysyttävää irtisanomiseen tai tietoturvaan liittyen, asiakastukemme auttaa mielellään. Ja mikäli joskus tulevaisuudessa haluat palata asiakkaaksemme, toivotamme sinut lämpimästi tervetulleeksi takaisin."})]}),h.jsx("div",{className:"flex items-center justify-center",children:h.jsx("img",{src:"/lovable-uploads/e965541f-fa90-41e5-a251-5e576e0ac7bd.png",alt:"Tiimityö ja yhteistyö",className:"w-full h-auto rounded-lg shadow-lg"})})]}),h.jsx("div",{className:"max-w-2xl mx-auto",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Irtisanomislomake"}),h.jsx(Mne,{...n,children:h.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[h.jsx(Ns,{control:n.control,name:"name",render:({field:a})=>h.jsxs(ys,{children:[h.jsx(Js,{children:"Etu- ja sukunimi"}),h.jsx(vs,{children:h.jsx(bn,{placeholder:"Nimi",...a})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:n.control,name:"email",render:({field:a})=>h.jsxs(ys,{children:[h.jsx(Js,{children:"Sähköpostiosoite *"}),h.jsx(vs,{children:h.jsx(bn,{type:"email",placeholder:"sähköposti@esimerkki.fi",...a})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:n.control,name:"phone",render:({field:a})=>h.jsxs(ys,{children:[h.jsx(Js,{children:"Puhelinnumero *"}),h.jsx(vs,{children:h.jsx(bn,{placeholder:"040 123 4567",...a})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:n.control,name:"address",render:({field:a})=>h.jsxs(ys,{children:[h.jsx(Js,{children:"Katuosoite *"}),h.jsx(vs,{children:h.jsx(bn,{placeholder:"Katuosoite 1, 00100 Helsinki",...a})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:n.control,name:"reason",render:({field:a})=>h.jsxs(ys,{children:[h.jsx(Js,{children:"Syy peruutukselle *"}),h.jsxs(lie,{onValueChange:a.onChange,defaultValue:a.value,children:[h.jsx(vs,{children:h.jsx(YI,{children:h.jsx(cie,{placeholder:"Valitse syy"})})}),h.jsx(QI,{children:s.map(o=>h.jsx(Eh,{value:o,children:o},o))})]}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:n.control,name:"confirmation",render:({field:a})=>h.jsxs(ys,{className:"flex flex-row items-start space-x-3 space-y-0",children:[h.jsx(vs,{children:h.jsx(Z1,{checked:a.value,onCheckedChange:a.onChange})}),h.jsx("div",{className:"space-y-1 leading-none",children:h.jsx(Js,{className:"text-sm",children:"Vahvistan täyttäneeni lomakkeen omilla tiedoillani."})}),h.jsx(ea,{})]})}),h.jsx(zn,{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-blue-900 to-blue-800 hover:from-blue-800 hover:to-blue-700 text-white py-3 px-6 rounded-full transition-all font-medium disabled:opacity-70",children:e?"Lähetetään...":"Lähetä irtisanomislomake"})]})})]})})]})})})},fie=E.forwardRef(({className:e,...t},r)=>h.jsx("textarea",{className:kt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));fie.displayName="Textarea";const a9e=ml.object({subject:ml.string().min(1,"Valitse yhteydenoton aihe"),name:ml.string().min(2,"Nimi on pakollinen"),phone:ml.string().min(5,"Puhelinnumero on pakollinen"),email:ml.string().email("Syötä kelvollinen sähköpostiosoite"),message:ml.string().min(1,"Viesti on pakollinen"),privacy:ml.boolean().refine(e=>e===!0,"Hyväksy henkilötietojenkäsittely"),honeypot:ml.string().max(0,"Bot detected"),timestamp:ml.number()}),o9e="service_6r9m8wf",l9e="template_on07od7",c9e="wRFDBmEPD5mCrpb2a",u9e=()=>{const[e,t]=E.useState(!1),[r]=E.useState(Date.now()),n=ff(),{toast:i}=So(),s=cne({resolver:dne(a9e),defaultValues:{subject:"",name:"",phone:"",email:"",message:"",privacy:!1,honeypot:"",timestamp:r}}),a=async o=>{t(!0);try{if(o.honeypot){i({title:"Virhe",description:"Lomakkeen lähetyksessä tapahtui virhe. Yritä uudelleen.",variant:"destructive"});return}if(Date.now()-o.timestamp<3e3){i({title:"Virhe",description:"Tarkista viestisi ennen lähettämistä.",variant:"destructive"}),t(!1);return}const{honeypot:c,timestamp:d,privacy:u,...f}=o,p={subject:f.subject,from_name:f.name,phone:f.phone,from_email:f.email,message:`Yhteydenotto: ${f.subject}

Lähettäjän tiedot:
Nimi: ${f.name}
Sähköposti: ${f.email}
Puhelinnumero: ${f.phone}

Viesti:
${f.message}`,to_name:"OmaVerkkoturva Team",reply_to:f.email};await Tne.send(o9e,l9e,p,c9e),i({title:"Viesti lähetetty!",description:"Otamme sinuun yhteyttä pian.",variant:"default"}),s.reset({subject:"",name:"",phone:"",email:"",message:"",privacy:!1,honeypot:"",timestamp:Date.now()})}catch(l){console.error("Error sending email:",l),i({title:"Virhe",description:"Viestin lähetyksessä tapahtui virhe. Yritä myöhemmin uudelleen.",variant:"destructive"})}finally{t(!1)}};return h.jsx("section",{id:"contact",className:"pt-32 pb-16 px-4 sm:px-6 lg:px-8 bg-gray-50",children:h.jsx("div",{className:"max-w-6xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[h.jsx("div",{className:"space-y-8",children:h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Ota yhteyttä"}),h.jsx("div",{className:"mb-8",children:h.jsx("a",{href:"mailto:info@omaverkkoturva.fi",className:"text-xl text-black hover:underline font-medium",children:"info@omaverkkoturva.fi"})}),h.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[h.jsx(_O,{className:"w-5 h-5 text-gray-600"}),h.jsxs("div",{children:[h.jsx("a",{href:"tel:01012345",className:"text-xl font-medium text-gray-900 underline hover:no-underline",children:"01012345"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Asiakaspalvelumme palvelee puhelimitse jokaisena arkipäivänä klo. 10:00-16:00. Puhelun hinta: mpm/pvm"})]})]}),h.jsx("div",{className:"space-y-4 text-gray-700",children:h.jsx("p",{children:"Pyrimme aina vastaamaan 1-2 arkipäivän sisällä. Asiakkaanamme olet oikeutettu nopeaan sekä veloituksettomaan apuun ja tukeen."})}),h.jsxs("div",{className:"mt-12",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Haluatko irtisanoa tuotteen?"}),h.jsx("button",{onClick:()=>n("/irtisanomislomake"),className:"px-6 py-3 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-100 transition-colors",children:"Irtisanomislomake"}),h.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[h.jsx("strong",{children:"HUOM:"})," Irtisanomiset käsitellään vain puhelimitse tai irtisanomislomakkeella."]})]})]})}),h.jsx("div",{className:"bg-blue-900 rounded-lg p-8 text-white",children:h.jsx(Mne,{...s,children:h.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-6",children:[h.jsx(Ns,{control:s.control,name:"subject",render:({field:o})=>h.jsxs(ys,{children:[h.jsx(Js,{className:"text-white font-medium",children:"Yhteydenoton aihe *"}),h.jsxs(lie,{onValueChange:o.onChange,defaultValue:o.value,children:[h.jsx(vs,{children:h.jsx(YI,{className:"bg-white text-gray-900",children:h.jsx(cie,{placeholder:"Valitse aihe"})})}),h.jsxs(QI,{children:[h.jsx(Eh,{value:"tuki",children:"Tuki ja apu"}),h.jsx(Eh,{value:"laskutus",children:"Laskutus"}),h.jsx(Eh,{value:"tekninen",children:"Tekninen ongelma"}),h.jsx(Eh,{value:"muu",children:"Muu aihe"})]})]}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:s.control,name:"name",render:({field:o})=>h.jsxs(ys,{children:[h.jsx(Js,{className:"text-white font-medium",children:"Etu- ja sukunimi *"}),h.jsx(vs,{children:h.jsx(bn,{placeholder:"Etu- ja sukunimi",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:s.control,name:"phone",render:({field:o})=>h.jsxs(ys,{children:[h.jsx(Js,{className:"text-white font-medium",children:"Puhelinnumero *"}),h.jsx(vs,{children:h.jsx(bn,{placeholder:"044 123 4567",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:s.control,name:"email",render:({field:o})=>h.jsxs(ys,{children:[h.jsx(Js,{className:"text-white font-medium",children:"Sähköpostiosoite *"}),h.jsx(vs,{children:h.jsx(bn,{type:"email",placeholder:"esimerkki@esimerkki.fi",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:s.control,name:"message",render:({field:o})=>h.jsxs(ys,{children:[h.jsx(Js,{className:"text-white font-medium",children:"Viesti *"}),h.jsx(vs,{children:h.jsx(fie,{placeholder:"Kerro lisätietoja yhteydenottosi liittyen",className:"min-h-[120px] bg-white text-gray-900 placeholder-gray-500 resize-none",...o})}),h.jsx(ea,{})]})}),h.jsx(Ns,{control:s.control,name:"privacy",render:({field:o})=>h.jsxs(ys,{className:"flex flex-row items-start space-x-3 space-y-0",children:[h.jsx(vs,{children:h.jsx(Z1,{checked:o.value,onCheckedChange:o.onChange,className:"bg-white"})}),h.jsxs("div",{className:"space-y-1 leading-none",children:[h.jsxs(Js,{className:"text-sm text-white",children:["Lähettämällä tämän lomakkeen vakuutan, että antamani tiedot ovat oikeita. Lisäksi hyväksyn henkilötietojeni käsittelyn OmaVerkkoturvan"," ",h.jsx("a",{href:"/tietosuojaseloste",className:"underline hover:no-underline",children:"tietosuojaselosteen"})," ","mukaisesti."]}),h.jsx(ea,{})]})]})}),h.jsx(Ns,{control:s.control,name:"honeypot",render:({field:o})=>h.jsx(ys,{className:"hidden",children:h.jsx(vs,{children:h.jsx(bn,{...o,tabIndex:-1})})})}),h.jsx(Ns,{control:s.control,name:"timestamp",render:({field:o})=>h.jsx(ys,{className:"hidden",children:h.jsx(vs,{children:h.jsx(bn,{type:"hidden",...o})})})}),h.jsx("button",{type:"submit",disabled:e,className:"w-full bg-white hover:bg-gray-100 text-black py-3 px-6 rounded-full transition-colors font-medium disabled:opacity-70",children:e?"Lähetetään...":"Lähetä yhteydenotto"})]})})})]})})})},d9e=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx(Qr,{showContact:!1,children:h.jsx(u9e,{})})),Zx=new Map,pd=[],f9e=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=Zx.get(e);if(n===void 0)Zx.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const i=pd.indexOf(e);i!==-1&&pd.splice(i,1);for(let s=0;s<pd.length;s++)if(Zx.get(pd[s]).priority<=r){pd.splice(s,0,e);return}pd.push(e)}return}throw new TypeError("not a valid backend")},h9e=async e=>{const t=Zx.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},p9e=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?pd:r;let i;const s=[],a=new Set;for(const l of n){const c=await h9e(l);typeof c=="string"?s.push({name:l,err:c}):(i||(i=c),i===c&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);const o=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,c)=>c==="executionProviders"?o:Reflect.get(l,c)})]},m9e="1.21.0";let Q6="warning";const xo={wasm:{},webgl:{},webgpu:{},versions:{common:m9e},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Q6=e}},get logLevel(){return Q6}};Object.defineProperty(xo,"logLevel",{enumerable:!0});const g9e=xo,y9e=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let i,s;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);const a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",o=t==null?void 0:t.norm;let l,c;o===void 0||o.mean===void 0?l=[255,255,255,255]:typeof o.mean=="number"?l=[o.mean,o.mean,o.mean,o.mean]:(l=[o.mean[0],o.mean[1],o.mean[2],0],o.mean[3]!==void 0&&(l[3]=o.mean[3])),o===void 0||o.bias===void 0?c=[0,0,0,0]:typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:(c=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(c[3]=o.bias[3]));const d=s*i;let u=0,f=d,p=d*2,m=-1;a==="RGBA"?(u=0,f=d,p=d*2,m=d*3):a==="RGB"?(u=0,f=d,p=d*2):a==="RBG"&&(u=0,p=d,f=d*2);for(let g=0;g<s;g++)for(let x=0;x<i;x++){const v=(e.data[u++]-c[0])*l[0],y=(e.data[f++]-c[1])*l[1],w=(e.data[p++]-c[2])*l[2],b=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+v+","+y+","+w+","+b+")",n.fillRect(x,g,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},v9e=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let i,s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],a=e.dims[3]):(i=e.dims[3],s=e.dims[2],a=e.dims[1]);const o=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm;let c,d;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?d=[0,0,0,0]:typeof l.bias=="number"?d=[l.bias,l.bias,l.bias,l.bias]:(d=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(d[3]=l.bias[3]));const u=s*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const f=4;let p=0,m=1,g=2,x=3,v=0,y=u,w=u*2,b=-1;o==="RGBA"?(v=0,y=u,w=u*2,b=u*3):o==="RGB"?(v=0,y=u,w=u*2):o==="RBG"&&(v=0,w=u,y=u*2),n=r.createImageData(i,s);for(let _=0;_<s*i;p+=f,m+=f,g+=f,x+=f,_++)n.data[p]=(e.data[v++]-d[0])*c[0],n.data[m]=(e.data[y++]-d[1])*c[1],n.data[g]=(e.data[w++]-d[2])*c[2],n.data[x]=b===-1?255:(e.data[b++]-d[3])*c[3]}else throw new Error("Can not access image data");return n},pP=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,i=t.norm??{mean:255,bias:0};let s,a;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];const o=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,d=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3);let u=4,f=0,p=1,m=2,g=3,x=0,v=c,y=c*2,w=-1;o==="RGB"&&(u=3,f=0,p=1,m=2,g=-1),l==="RGBA"?w=c*3:l==="RBG"?(x=0,y=c,v=c*2):l==="BGR"&&(y=0,v=c,x=c*2);for(let _=0;_<c;_++,f+=u,m+=u,p+=u,g+=u)d[x++]=(e[f]+a[0])/s[0],d[v++]=(e[p]+a[1])/s[1],d[y++]=(e[m]+a[2])/s[2],w!==-1&&g!==-1&&(d[w++]=(e[g]+a[3])/s[3]);return l==="RGBA"?new Ea("float32",d,[1,4,r,n]):new Ea("float32",d,[1,3,r,n])},_9e=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string";let a,o=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=d=>typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||d instanceof OffscreenCanvas?d.getContext("2d"):null;if(r){const d=l();d.width=e.width,d.height=e.height;const u=c(d);if(u!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(o=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");o.tensorFormat="RGBA",o.height=f,o.width=p}else o.tensorFormat="RGBA",o.height=f,o.width=p;u.drawImage(e,0,0),a=u.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let d,u;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(d=t.resizedHeight,u=t.resizedWidth):(d=e.height,u=e.width),t!==void 0&&(o=t),o.format="RGBA",o.height=d,o.width=u,t!==void 0){const f=l();f.width=u,f.height=d;const p=c(f);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,u,d).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const d=l();d.width=e.width,d.height=e.height;const u=c(d);if(u!=null){const f=e.height,p=e.width;return u.drawImage(e,0,0,p,f),a=u.getImageData(0,0,p,f).data,o.height=f,o.width=p,pP(a,o)}else throw new Error("Can not access image data")}else{if(s)return new Promise((d,u)=>{const f=l(),p=c(f);if(!e||!p)return u();const m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{f.width=m.width,f.height=m.height,p.drawImage(m,0,0,f.width,f.height);const g=p.getImageData(0,0,f.width,f.height);o.height=f.height,o.width=f.width,d(pP(g.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return pP(a,o);throw new Error("Input data provided is not supported - aborted tensor creation")},x9e=(e,t)=>{const{width:r,height:n,download:i,dispose:s}=t,a=[1,n,r,4];return new Ea({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:s})},b9e=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Ea({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},w9e=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Ea({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},T9e=(e,t,r)=>new Ea({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),Ch=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Jx=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let Z6=!1;const M9e=()=>{if(!Z6){Z6=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(Ch.set("int64",BigInt64Array),Jx.set(BigInt64Array,"int64")),t&&(Ch.set("uint64",BigUint64Array),Jx.set(BigUint64Array,"uint64")),n?(Ch.set("float16",r),Jx.set(r,"float16")):Ch.set("float16",Uint16Array)}},k9e=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},S9e=(e,t)=>{switch(e.location){case"cpu":return new Ea(e.type,e.data,t);case"cpu-pinned":return new Ea({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Ea({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Ea({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Ea({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Ea=class{constructor(t,r,n){M9e();let i,s;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,s=t.dims,t.location){case"cpu-pinned":{const o=Ch.get(i);if(!o)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint64"&&i!=="int8"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,l;if(typeof t=="string")if(i=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");o=r}else{const c=Ch.get(t);if(c===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&c===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${c.name} as data.`);t==="uint64"||t==="int64"?o=c.from(r,BigInt):o=c.from(r)}else if(r instanceof c)o=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")o=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&c!==Uint16Array)o=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${i} tensor's data must be type of ${c}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const c=typeof t[0];if(c==="string")i="string",o=t;else if(c==="boolean")i="bool",o=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${c}.`)}else if(t instanceof Uint8ClampedArray)i="uint8",o=Uint8Array.from(t);else{const c=Jx.get(t.constructor);if(c===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=c,o=t}if(l===void 0)l=[o.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");s=l,this.cpuData=o,this.dataLocation="cpu"}const a=k9e(s);if(this.cpuData&&a!==this.cpuData.length&&!((i==="uint4"||i==="int4")&&Math.ceil(a/2)===this.cpuData.length))throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=s,this.size=a}static async fromImage(t,r){return _9e(t,r)}static fromTexture(t,r){return x9e(t,r)}static fromGpuBuffer(t,r){return b9e(t,r)}static fromMLTensor(t,r){return w9e(t,r)}static fromPinnedBuffer(t,r,n){return T9e(t,r,n)}toDataURL(t){return y9e(this,t)}toImageData(t){return v9e(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return S9e(this,t)}};const nh=Ea,hie=(e,t)=>{(typeof xo.trace>"u"?!xo.wasm.trace:!xo.trace)||console.timeStamp(`${e}::ORT::${t}`)},pie=(e,t)=>{var i;const r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[];let n=!1;for(let s=0;s<r.length;s++){if(n&&!r[s].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[s].trim().split(" ")[1]}`;t&&(a+=`::${t}`),hie("CPU",a);return}r[s].includes("TRACE_FUNC")&&(n=!0)}},K2=e=>{(typeof xo.trace>"u"?!xo.wasm.trace:!xo.trace)||pie("BEGIN",e)},q2=e=>{(typeof xo.trace>"u"?!xo.wasm.trace:!xo.trace)||pie("END",e)};let P9e=class mie{constructor(t){this.handler=t}async run(t,r,n){K2();const i={};let s={};if(typeof t!="object"||t===null||t instanceof nh||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof nh)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(const c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);i[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1;const d=Object.getOwnPropertyNames(r);for(const u of this.outputNames)if(d.indexOf(u)!==-1){const f=r[u];(f===null||f instanceof nh)&&(c=!0,a=!1,i[u]=f)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(a)for(const c of this.outputNames)i[c]=null;const o=await this.handler.run(t,i,s),l={};for(const c in o)if(Object.hasOwnProperty.call(o,c)){const d=o[c];d instanceof nh?l[c]=d:l[c]=new nh(d.type,d.data,d.dims)}return q2(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){K2();let s,a={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const d=t;let u=0,f=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(u=r,!Number.isSafeInteger(u))throw new RangeError("'byteOffset' must be an integer.");if(u<0||u>=d.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${d.byteLength}).`);if(f=t.byteLength-u,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||u+f>d.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${d.byteLength-u}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(d,u,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[o,l]=await p9e(a),c=await o.createInferenceSessionHandler(s,l);return q2(),new mie(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const E9e=P9e,C9e=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:E9e,TRACE:hie,TRACE_FUNC_BEGIN:K2,TRACE_FUNC_END:q2,Tensor:nh,env:g9e,registerBackend:f9e},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.22.0-dev.20250409-89f8206ba4
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var ZI=Object.defineProperty,j9e=Object.getOwnPropertyDescriptor,A9e=Object.getOwnPropertyNames,O9e=Object.prototype.hasOwnProperty,$9e=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Ze=(e,t)=>()=>(e&&(t=e(e=0)),t),_m=(e,t)=>{for(var r in t)ZI(e,r,{get:t[r],enumerable:!0})},I9e=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of A9e(t))!O9e.call(e,i)&&i!==r&&ZI(e,i,{get:()=>t[i],enumerable:!(n=j9e(t,i))||n.enumerable});return e},Hv=e=>I9e(ZI({},"__esModule",{value:!0}),e),_g,vc,jd,J6,gie,yie=Ze(()=>{_g=new Map,vc=[],jd=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=_g.get(e);if(n===void 0)_g.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let i=vc.indexOf(e);i!==-1&&vc.splice(i,1);for(let s=0;s<vc.length;s++)if(_g.get(vc[s]).priority<=r){vc.splice(s,0,e);return}vc.push(e)}return}throw new TypeError("not a valid backend")},J6=async e=>{let t=_g.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},gie=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?vc:r,i,s=[],a=new Set;for(let l of n){let c=await J6(l);typeof c=="string"?s.push({name:l,err:c}):(i||(i=c),i===c&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);let o=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,c)=>c==="executionProviders"?o:Reflect.get(l,c)})]}}),N9e=Ze(()=>{yie()}),vie,D9e=Ze(()=>{vie="1.22.0-dev.20250409-89f8206ba4"}),mP,wa,_ie=Ze(()=>{D9e(),mP="warning",wa={wasm:{},webgl:{},webgpu:{},versions:{common:vie},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);mP=e}},get logLevel(){return mP}},Object.defineProperty(wa,"logLevel",{enumerable:!0})}),qr,R9e=Ze(()=>{_ie(),qr=wa}),xie,bie,L9e=Ze(()=>{xie=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let i,s;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);let a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",o=t==null?void 0:t.norm,l,c;o===void 0||o.mean===void 0?l=[255,255,255,255]:typeof o.mean=="number"?l=[o.mean,o.mean,o.mean,o.mean]:(l=[o.mean[0],o.mean[1],o.mean[2],0],o.mean[3]!==void 0&&(l[3]=o.mean[3])),o===void 0||o.bias===void 0?c=[0,0,0,0]:typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:(c=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(c[3]=o.bias[3]));let d=s*i,u=0,f=d,p=d*2,m=-1;a==="RGBA"?(u=0,f=d,p=d*2,m=d*3):a==="RGB"?(u=0,f=d,p=d*2):a==="RBG"&&(u=0,p=d,f=d*2);for(let g=0;g<s;g++)for(let x=0;x<i;x++){let v=(e.data[u++]-c[0])*l[0],y=(e.data[f++]-c[1])*l[1],w=(e.data[p++]-c[2])*l[2],b=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+v+","+y+","+w+","+b+")",n.fillRect(x,g,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},bie=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],a=e.dims[3]):(i=e.dims[3],s=e.dims[2],a=e.dims[1]);let o=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm,c,d;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?d=[0,0,0,0]:typeof l.bias=="number"?d=[l.bias,l.bias,l.bias,l.bias]:(d=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(d[3]=l.bias[3]));let u=s*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let f=4,p=0,m=1,g=2,x=3,v=0,y=u,w=u*2,b=-1;o==="RGBA"?(v=0,y=u,w=u*2,b=u*3):o==="RGB"?(v=0,y=u,w=u*2):o==="RBG"&&(v=0,w=u,y=u*2),n=r.createImageData(i,s);for(let _=0;_<s*i;p+=f,m+=f,g+=f,x+=f,_++)n.data[p]=(e.data[v++]-d[0])*c[0],n.data[m]=(e.data[y++]-d[1])*c[1],n.data[g]=(e.data[w++]-d[2])*c[2],n.data[x]=b===-1?255:(e.data[b++]-d[3])*c[3]}else throw new Error("Can not access image data");return n}}),hx,wie,Tie,Mie,kie,Sie,F9e=Ze(()=>{JI(),hx=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,i=t.norm??{mean:255,bias:0},s,a;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let o=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,d=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3),u=4,f=0,p=1,m=2,g=3,x=0,v=c,y=c*2,w=-1;o==="RGB"&&(u=3,f=0,p=1,m=2,g=-1),l==="RGBA"?w=c*3:l==="RBG"?(x=0,y=c,v=c*2):l==="BGR"&&(y=0,v=c,x=c*2);for(let b=0;b<c;b++,f+=u,m+=u,p+=u,g+=u)d[x++]=(e[f]+a[0])/s[0],d[v++]=(e[p]+a[1])/s[1],d[y++]=(e[m]+a[2])/s[2],w!==-1&&g!==-1&&(d[w++]=(e[g]+a[3])/s[3]);return l==="RGBA"?new ta("float32",d,[1,4,r,n]):new ta("float32",d,[1,3,r,n])},wie=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",a,o=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=d=>typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||d instanceof OffscreenCanvas?d.getContext("2d"):null;if(r){let d=l();d.width=e.width,d.height=e.height;let u=c(d);if(u!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(o=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");o.tensorFormat="RGBA",o.height=f,o.width=p}else o.tensorFormat="RGBA",o.height=f,o.width=p;u.drawImage(e,0,0),a=u.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let d,u;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(d=t.resizedHeight,u=t.resizedWidth):(d=e.height,u=e.width),t!==void 0&&(o=t),o.format="RGBA",o.height=d,o.width=u,t!==void 0){let f=l();f.width=u,f.height=d;let p=c(f);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,u,d).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let d=l();d.width=e.width,d.height=e.height;let u=c(d);if(u!=null){let f=e.height,p=e.width;return u.drawImage(e,0,0,p,f),a=u.getImageData(0,0,p,f).data,o.height=f,o.width=p,hx(a,o)}else throw new Error("Can not access image data")}else{if(s)return new Promise((d,u)=>{let f=l(),p=c(f);if(!e||!p)return u();let m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{f.width=m.width,f.height=m.height,p.drawImage(m,0,0,f.width,f.height);let g=p.getImageData(0,0,f.width,f.height);o.height=f.height,o.width=f.width,d(hx(g.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return hx(a,o);throw new Error("Input data provided is not supported - aborted tensor creation")},Tie=(e,t)=>{let{width:r,height:n,download:i,dispose:s}=t,a=[1,n,r,4];return new ta({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:s})},Mie=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new ta({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},kie=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new ta({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},Sie=(e,t,r)=>new ta({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),vd,zg,gP,Pie,B9e=Ze(()=>{vd=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),zg=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),gP=!1,Pie=()=>{if(!gP){gP=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(vd.set("int64",BigInt64Array),zg.set(BigInt64Array,"int64")),t&&(vd.set("uint64",BigUint64Array),zg.set(BigUint64Array,"uint64")),n?(vd.set("float16",r),zg.set(r,"float16")):vd.set("float16",Uint16Array)}}}),Eie,Cie,z9e=Ze(()=>{JI(),Eie=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},Cie=(e,t)=>{switch(e.location){case"cpu":return new ta(e.type,e.data,t);case"cpu-pinned":return new ta({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new ta({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new ta({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new ta({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),ta,JI=Ze(()=>{L9e(),F9e(),B9e(),z9e(),ta=class{constructor(e,t,r){Pie();let n,i;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{let a=vd.get(n);if(!a)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,o;if(typeof e=="string")if(n=e,o=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{let l=vd.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?a=l.from(t,BigInt):a=l.from(t)}else if(t instanceof l)a=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")a=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)a=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(o=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",a=e;else if(l==="boolean")n="bool",a=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",a=Uint8Array.from(e);else{let l=zg.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,a=e}if(o===void 0)o=[a.length];else if(!Array.isArray(o))throw new TypeError("A tensor's dims must be a number array");i=o,this.cpuData=a,this.dataLocation="cpu"}let s=Eie(i);if(this.cpuData&&s!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(s/2)===this.cpuData.length))throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=s}static async fromImage(e,t){return wie(e,t)}static fromTexture(e,t){return Tie(e,t)}static fromGpuBuffer(e,t){return Mie(e,t)}static fromMLTensor(e,t){return kie(e,t)}static fromPinnedBuffer(e,t,r){return Sie(e,t,r)}toDataURL(e){return xie(this,e)}toImageData(e){return bie(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Cie(this,e)}}}),po,jie=Ze(()=>{JI(),po=ta}),Kv,yP,ko,$a,Aie=Ze(()=>{_ie(),Kv=(e,t)=>{(typeof wa.trace>"u"?!wa.wasm.trace:!wa.trace)||console.timeStamp(`${e}::ORT::${t}`)},yP=(e,t)=>{var i;let r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[],n=!1;for(let s=0;s<r.length;s++){if(n&&!r[s].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[s].trim().split(" ")[1]}`;t&&(a+=`::${t}`),Kv("CPU",a);return}r[s].includes("TRACE_FUNC")&&(n=!0)}},ko=e=>{(typeof wa.trace>"u"?!wa.wasm.trace:!wa.trace)||yP("BEGIN",e)},$a=e=>{(typeof wa.trace>"u"?!wa.wasm.trace:!wa.trace)||yP("END",e)}}),Oie,V9e=Ze(()=>{yie(),jie(),Aie(),Oie=class $ie{constructor(t){this.handler=t}async run(t,r,n){ko();let i={},s={};if(typeof t!="object"||t===null||t instanceof po||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof po)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(let c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);i[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1,d=Object.getOwnPropertyNames(r);for(let u of this.outputNames)if(d.indexOf(u)!==-1){let f=r[u];(f===null||f instanceof po)&&(c=!0,a=!1,i[u]=f)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(a)for(let c of this.outputNames)i[c]=null;let o=await this.handler.run(t,i,s),l={};for(let c in o)if(Object.hasOwnProperty.call(o,c)){let d=o[c];d instanceof po?l[c]=d:l[c]=new po(d.type,d.data,d.dims)}return $a(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){ko();let s,a={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let d=t,u=0,f=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(u=r,!Number.isSafeInteger(u))throw new RangeError("'byteOffset' must be an integer.");if(u<0||u>=d.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${d.byteLength}).`);if(f=t.byteLength-u,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||u+f>d.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${d.byteLength-u}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(d,u,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[o,l]=await gie(a),c=await o.createInferenceSessionHandler(s,l);return $a(),new $ie(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),eN,U9e=Ze(()=>{V9e(),eN=Oie}),W9e=Ze(()=>{}),G9e=Ze(()=>{}),H9e=Ze(()=>{}),K9e=Ze(()=>{}),Iie={};_m(Iie,{InferenceSession:()=>eN,TRACE:()=>Kv,TRACE_FUNC_BEGIN:()=>ko,TRACE_FUNC_END:()=>$a,Tensor:()=>po,env:()=>qr,registerBackend:()=>jd});var Co=Ze(()=>{N9e(),R9e(),U9e(),jie(),W9e(),G9e(),Aie(),H9e(),K9e()}),tN=Ze(()=>{}),Nie={};_m(Nie,{default:()=>Die});var vP,_P,Die,q9e=Ze(()=>{var e;zoe(),_f(),rN(),vP="ort-wasm-proxy-worker",_P=((e=globalThis.self)==null?void 0:e.name)===vP,_P&&(self.onmessage=t=>{let{type:r,in:n}=t.data;try{switch(r){case"init-wasm":nN(n.wasm).then(()=>{bN(n).then(()=>{postMessage({type:r})},i=>{postMessage({type:r,err:i})})},i=>{postMessage({type:r,err:i})});break;case"init-ep":{let{epName:i,env:s}=n;wN(s,i).then(()=>{postMessage({type:r})},a=>{postMessage({type:r,err:a})});break}case"copy-from":{let{buffer:i}=n,s=u1(i);postMessage({type:r,out:s});break}case"create":{let{model:i,options:s}=n;TN(i,s).then(a=>{postMessage({type:r,out:a})},a=>{postMessage({type:r,err:a})});break}case"release":MN(n),postMessage({type:r});break;case"run":{let{sessionId:i,inputIndices:s,inputs:a,outputIndices:o,options:l}=n;kN(i,s,a,o,new Array(o.length).fill(null),l).then(c=>{c.some(d=>d[3]!=="cpu")?postMessage({type:r,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:r,out:c},PN([...a,...c]))},c=>{postMessage({type:r,err:c})});break}case"end-profiling":SN(n),postMessage({type:r});break;default:}}catch(i){postMessage({type:r,err:i})}}),Die=_P?null:t=>new Worker(t??Hs,{type:"module",name:vP})}),Rie={};_m(Rie,{default:()=>Lie});var xP,bP,Lie,eW,X9e=Ze(()=>{var e,t;bP=(xP=import.meta.url,async function(r={}){var Of;var n,i,s=r,a=new Promise((S,O)=>{n=S,i=O}),o=typeof window=="object",l=typeof WorkerGlobalScope<"u",c=l&&((Of=self.name)==null?void 0:Of.startsWith("em-pthread"));s.mountExternalData=(S,O)=>{S.startsWith("./")&&(S=S.substring(2)),(s.Eb||(s.Eb=new Map)).set(S,O)},s.unmountExternalData=()=>{delete s.Eb};var d=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let u=S=>async(...O)=>{var W;try{if(s.Fb)throw Error("Session already started");let X=s.Fb={dc:O[0],errors:[]},ie=await S(...O);if(s.Fb!==X)throw Error("Session mismatch");(W=s.Jb)==null||W.flush();let be=X.errors;if(0<be.length){let Re=await Promise.all(be);if(Re=Re.filter(Ke=>Ke),0<Re.length)throw Error(Re.join(`
`))}return ie}finally{s.Fb=null}};s.jsepInit=(S,O)=>{if(S==="webgpu"){[s.Jb,s.Ub,s.Yb,s.Kb,s.Xb,s.jb,s.Zb,s.ac,s.Vb,s.Wb,s.$b]=O;let W=s.Jb;s.jsepRegisterBuffer=(X,ie,be,Re)=>W.registerBuffer(X,ie,be,Re),s.jsepGetBuffer=X=>W.getBuffer(X),s.jsepCreateDownloader=(X,ie,be)=>W.createDownloader(X,ie,be),s.jsepOnCreateSession=X=>{W.onCreateSession(X)},s.jsepOnReleaseSession=X=>{W.onReleaseSession(X)},s.jsepOnRunStart=X=>W.onRunStart(X),s.bc=(X,ie)=>{W.upload(X,ie)}}else if(S==="webnn"){let W=O[0];[s.nc,s.Nb,s.webnnEnsureTensor,s.Ob,s.webnnDownloadTensor]=O.slice(1),s.webnnReleaseTensorId=s.Nb,s.webnnUploadTensor=s.Ob,s.webnnOnRunStart=X=>W.onRunStart(X),s.webnnOnRunEnd=W.onRunEnd.bind(W),s.webnnRegisterMLContext=(X,ie)=>{W.registerMLContext(X,ie)},s.webnnOnReleaseSession=X=>{W.onReleaseSession(X)},s.webnnCreateMLTensorDownloader=(X,ie)=>W.createMLTensorDownloader(X,ie),s.webnnRegisterMLTensor=(X,ie,be,Re)=>W.registerMLTensor(X,ie,be,Re),s.webnnCreateMLContext=X=>W.createMLContext(X),s.webnnRegisterMLConstant=(X,ie,be,Re,Ke,st)=>W.registerMLConstant(X,ie,be,Re,Ke,s.Eb,st),s.webnnRegisterGraphInput=W.registerGraphInput.bind(W),s.webnnIsGraphInput=W.isGraphInput.bind(W),s.webnnCreateTemporaryTensor=W.createTemporaryTensor.bind(W),s.webnnIsInt64Supported=W.isInt64Supported.bind(W)}};let f=()=>{let S=(O,W,X)=>(...ie)=>{let be=Wn,Re=W==null?void 0:W();ie=O(...ie);let Ke=W==null?void 0:W();return Re!==Ke&&(O=Ke,X(Re),W=X=null),Wn!=be?new Promise((st,_t)=>{$i={resolve:st,reject:_t}}):ie};(()=>{for(let O of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])s[O]=S(s[O],()=>s[O],W=>s[O]=W)})(),u!==void 0&&(s._OrtRun=u(s._OrtRun),s._OrtRunWithBinding=u(s._OrtRunWithBinding)),f=void 0};s.asyncInit=()=>{f==null||f()};var p,m,g=Object.assign({},s),x=(S,O)=>{throw O},v="";(o||l)&&(l?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),xP&&(v=xP),v=v.startsWith("blob:")?"":v.slice(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(m=S=>{var O=new XMLHttpRequest;return O.open("GET",S,!1),O.responseType="arraybuffer",O.send(null),new Uint8Array(O.response)}),p=async S=>{if(z(S))return new Promise((W,X)=>{var ie=new XMLHttpRequest;ie.open("GET",S,!0),ie.responseType="arraybuffer",ie.onload=()=>{ie.status==200||ie.status==0&&ie.response?W(ie.response):X(ie.status)},ie.onerror=X,ie.send(null)});var O=await fetch(S,{credentials:"same-origin"});if(O.ok)return O.arrayBuffer();throw Error(O.status+" : "+O.url)});var y=console.log.bind(console),w=console.error.bind(console),b=y,_=w;Object.assign(s,g),g=null;var T,M,k,j,A,R,I,$,F,V,G,H,B,te=s.wasmBinary,ae=!1,z=S=>S.startsWith("file://");function D(){return T.buffer!=j.buffer&&ee(),j}function K(){return T.buffer!=j.buffer&&ee(),A}function oe(){return T.buffer!=j.buffer&&ee(),R}function _e(){return T.buffer!=j.buffer&&ee(),I}function de(){return T.buffer!=j.buffer&&ee(),$}function ve(){return T.buffer!=j.buffer&&ee(),F}function Ie(){return T.buffer!=j.buffer&&ee(),V}function Se(){return T.buffer!=j.buffer&&ee(),B}if(c){let S=function(O){try{var W=O.data,X=W.Bb;if(X==="load"){let ie=[];self.onmessage=be=>ie.push(be),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let be of ie)S(be);self.onmessage=S};for(let be of W.Rb)s[be]&&!s[be].proxy||(s[be]=(...Re)=>{postMessage({Bb:"callHandler",Qb:be,args:Re})},be=="print"&&(b=s[be]),be=="printErr"&&(_=s[be]));T=W.kc,ee(),ge(W.lc)}else if(X==="run"){wr(W.Ab),Pf(W.Ab,0,0,1,0,0),Es(),Te(W.Ab),J||(Dm(),J=!0);try{ai(W.fc,W.Hb)}catch(ie){if(ie!="unwind")throw ie}}else W.target!=="setimmediate"&&(X==="checkMailbox"?J&&De():X&&(_(`worker: received unknown command ${X}`),_(W)))}catch(ie){throw Ef(),ie}};var ge,J=!1;_=function(...O){O=O.join(" "),console.error(O)},self.alert=function(...O){postMessage({Bb:"alert",text:O.join(" "),ic:zu()})},self.onunhandledrejection=O=>{throw O.reason||O},self.onmessage=S}function ee(){var S=T.buffer;s.HEAP8=j=new Int8Array(S),s.HEAP16=R=new Int16Array(S),s.HEAPU8=A=new Uint8Array(S),s.HEAPU16=I=new Uint16Array(S),s.HEAP32=$=new Int32Array(S),s.HEAPU32=F=new Uint32Array(S),s.HEAPF32=V=new Float32Array(S),s.HEAPF64=B=new Float64Array(S),s.HEAP64=G=new BigInt64Array(S),s.HEAPU64=H=new BigUint64Array(S)}function Z(){c?startWorker(s):Ct.Ca()}c||(T=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),ee());var we,$e=0,Ce=null;function Pe(){if(--$e==0&&Ce){var S=Ce;Ce=null,S()}}function Q(S){throw _(S="Aborted("+S+")"),ae=!0,S=new WebAssembly.RuntimeError(S+". Build with -sASSERTIONS for more info."),i(S),S}function re(){return{a:{L:je,Aa:ke,b:Ws,$:jo,A:L,pa:ce,X:pe,Z:Oe,qa:Ue,na:ht,ga:Dt,ma:At,J:Wt,Y:pt,V:xr,oa:Sr,W:zi,va:li,E:$o,Q:Wi,O:Gi,D:Ye,u:ut,r:Br,P:cl,z:U,R:ne,ja:he,T:Qe,aa:it,M:ft,F:Lt,ia:Te,sa:br,t:jr,Ba:Un,w:pa,o:_n,l:Ki,c:za,n:bf,j:S_,v:P_,p:E_,f:oc,s:C_,m:j_,e:A_,k:O_,i:$_,g:lc,d:I_,da:N_,ea:Mm,fa:D_,ba:km,ca:wf,N:Pm,xa:Em,ua:R_,h:Mf,C:L_,G:F_,ta:iM,x:B_,ra:z_,U:V_,q:Sm,y:U_,K:W_,S:G_,za:Cm,ya:H_,ka:K_,la:Am,_:Ht,B:q_,I:Om,ha:kf,H:$m,a:T,wa:nt}}}var fe={829644:(S,O,W,X,ie)=>{if(s===void 0||!s.Eb)return 1;if((S=Fr(Number(S>>>0))).startsWith("./")&&(S=S.substring(2)),!(S=s.Eb.get(S)))return 2;if(O=Number(O>>>0),W=Number(W>>>0),X=Number(X>>>0),O+W>S.byteLength)return 3;try{let be=S.subarray(O,O+W);switch(ie){case 0:K().set(be,X>>>0);break;case 1:s.mc?s.mc(X,be):s.bc(X,be);break;default:return 4}return 0}catch{return 4}},830468:(S,O,W)=>{s.Ob(S,K().subarray(O>>>0,O+W>>>0))},830532:()=>s.nc(),830574:S=>{s.Nb(S)},830611:()=>{s.Vb()},830642:()=>{s.Wb()},830671:()=>{s.$b()},830696:S=>s.Ub(S),830729:S=>s.Yb(S),830761:(S,O,W)=>{s.Kb(Number(S),Number(O),Number(W),!0)},830824:(S,O,W)=>{s.Kb(Number(S),Number(O),Number(W))},830881:()=>typeof wasmOffsetConverter<"u",830938:S=>{s.jb("Abs",S,void 0)},830989:S=>{s.jb("Neg",S,void 0)},831040:S=>{s.jb("Floor",S,void 0)},831093:S=>{s.jb("Ceil",S,void 0)},831145:S=>{s.jb("Reciprocal",S,void 0)},831203:S=>{s.jb("Sqrt",S,void 0)},831255:S=>{s.jb("Exp",S,void 0)},831306:S=>{s.jb("Erf",S,void 0)},831357:S=>{s.jb("Sigmoid",S,void 0)},831412:(S,O,W)=>{s.jb("HardSigmoid",S,{alpha:O,beta:W})},831491:S=>{s.jb("Log",S,void 0)},831542:S=>{s.jb("Sin",S,void 0)},831593:S=>{s.jb("Cos",S,void 0)},831644:S=>{s.jb("Tan",S,void 0)},831695:S=>{s.jb("Asin",S,void 0)},831747:S=>{s.jb("Acos",S,void 0)},831799:S=>{s.jb("Atan",S,void 0)},831851:S=>{s.jb("Sinh",S,void 0)},831903:S=>{s.jb("Cosh",S,void 0)},831955:S=>{s.jb("Asinh",S,void 0)},832008:S=>{s.jb("Acosh",S,void 0)},832061:S=>{s.jb("Atanh",S,void 0)},832114:S=>{s.jb("Tanh",S,void 0)},832166:S=>{s.jb("Not",S,void 0)},832217:(S,O,W)=>{s.jb("Clip",S,{min:O,max:W})},832286:S=>{s.jb("Clip",S,void 0)},832338:(S,O)=>{s.jb("Elu",S,{alpha:O})},832396:S=>{s.jb("Gelu",S,void 0)},832448:S=>{s.jb("Relu",S,void 0)},832500:(S,O)=>{s.jb("LeakyRelu",S,{alpha:O})},832564:(S,O)=>{s.jb("ThresholdedRelu",S,{alpha:O})},832634:(S,O)=>{s.jb("Cast",S,{to:O})},832692:S=>{s.jb("Add",S,void 0)},832743:S=>{s.jb("Sub",S,void 0)},832794:S=>{s.jb("Mul",S,void 0)},832845:S=>{s.jb("Div",S,void 0)},832896:S=>{s.jb("Pow",S,void 0)},832947:S=>{s.jb("Equal",S,void 0)},833e3:S=>{s.jb("Greater",S,void 0)},833055:S=>{s.jb("GreaterOrEqual",S,void 0)},833117:S=>{s.jb("Less",S,void 0)},833169:S=>{s.jb("LessOrEqual",S,void 0)},833228:(S,O,W,X,ie)=>{s.jb("ReduceMean",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},833403:(S,O,W,X,ie)=>{s.jb("ReduceMax",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},833577:(S,O,W,X,ie)=>{s.jb("ReduceMin",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},833751:(S,O,W,X,ie)=>{s.jb("ReduceProd",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},833926:(S,O,W,X,ie)=>{s.jb("ReduceSum",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834100:(S,O,W,X,ie)=>{s.jb("ReduceL1",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834273:(S,O,W,X,ie)=>{s.jb("ReduceL2",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834446:(S,O,W,X,ie)=>{s.jb("ReduceLogSum",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834623:(S,O,W,X,ie)=>{s.jb("ReduceSumSquare",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834803:(S,O,W,X,ie)=>{s.jb("ReduceLogSumExp",S,{keepDims:!!O,noopWithEmptyAxes:!!W,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},834983:S=>{s.jb("Where",S,void 0)},835036:(S,O,W)=>{s.jb("Transpose",S,{perm:O?Array.from(de().subarray(Number(O)>>>0,Number(W)>>>0)):[]})},835160:(S,O,W,X)=>{s.jb("DepthToSpace",S,{blocksize:O,mode:Fr(W),format:X?"NHWC":"NCHW"})},835293:(S,O,W,X)=>{s.jb("DepthToSpace",S,{blocksize:O,mode:Fr(W),format:X?"NHWC":"NCHW"})},835426:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn,Io)=>{s.jb("ConvTranspose",S,{format:st?"NHWC":"NCHW",autoPad:O,dilations:[W],group:X,kernelShape:[ie],pads:[be,Re],strides:[Ke],wIsConst:()=>!!D()[_t>>>0],outputPadding:Kt?Array.from(de().subarray(Number(Kt)>>>0,Number(pr)>>>0)):[],outputShape:Ar?Array.from(de().subarray(Number(Ar)>>>0,Number(Jn)>>>0)):[],activation:Fr(Io)})},835859:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("ConvTranspose",S,{format:Ke?"NHWC":"NCHW",autoPad:O,dilations:Array.from(de().subarray(Number(W)>>>0,2+(Number(W)>>>0)>>>0)),group:X,kernelShape:Array.from(de().subarray(Number(ie)>>>0,2+(Number(ie)>>>0)>>>0)),pads:Array.from(de().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(de().subarray(Number(Re)>>>0,2+(Number(Re)>>>0)>>>0)),wIsConst:()=>!!D()[st>>>0],outputPadding:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],outputShape:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[],activation:Fr(Jn)})},836520:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn,Io)=>{s.jb("ConvTranspose",S,{format:st?"NHWC":"NCHW",autoPad:O,dilations:[W],group:X,kernelShape:[ie],pads:[be,Re],strides:[Ke],wIsConst:()=>!!D()[_t>>>0],outputPadding:Kt?Array.from(de().subarray(Number(Kt)>>>0,Number(pr)>>>0)):[],outputShape:Ar?Array.from(de().subarray(Number(Ar)>>>0,Number(Jn)>>>0)):[],activation:Fr(Io)})},836953:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("ConvTranspose",S,{format:Ke?"NHWC":"NCHW",autoPad:O,dilations:Array.from(de().subarray(Number(W)>>>0,2+(Number(W)>>>0)>>>0)),group:X,kernelShape:Array.from(de().subarray(Number(ie)>>>0,2+(Number(ie)>>>0)>>>0)),pads:Array.from(de().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(de().subarray(Number(Re)>>>0,2+(Number(Re)>>>0)>>>0)),wIsConst:()=>!!D()[st>>>0],outputPadding:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],outputShape:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[],activation:Fr(Jn)})},837614:(S,O)=>{s.jb("GlobalAveragePool",S,{format:O?"NHWC":"NCHW"})},837705:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("AveragePool",S,{format:Jn?"NHWC":"NCHW",auto_pad:O,ceil_mode:W,count_include_pad:X,storage_order:ie,dilations:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[],kernel_shape:Ke?Array.from(de().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[]})},838184:(S,O)=>{s.jb("GlobalAveragePool",S,{format:O?"NHWC":"NCHW"})},838275:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("AveragePool",S,{format:Jn?"NHWC":"NCHW",auto_pad:O,ceil_mode:W,count_include_pad:X,storage_order:ie,dilations:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[],kernel_shape:Ke?Array.from(de().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[]})},838754:(S,O)=>{s.jb("GlobalMaxPool",S,{format:O?"NHWC":"NCHW"})},838841:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("MaxPool",S,{format:Jn?"NHWC":"NCHW",auto_pad:O,ceil_mode:W,count_include_pad:X,storage_order:ie,dilations:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[],kernel_shape:Ke?Array.from(de().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[]})},839316:(S,O)=>{s.jb("GlobalMaxPool",S,{format:O?"NHWC":"NCHW"})},839403:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn)=>{s.jb("MaxPool",S,{format:Jn?"NHWC":"NCHW",auto_pad:O,ceil_mode:W,count_include_pad:X,storage_order:ie,dilations:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[],kernel_shape:Ke?Array.from(de().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Ar)>>>0)):[]})},839878:(S,O,W,X,ie)=>{s.jb("Gemm",S,{alpha:O,beta:W,transA:X,transB:ie})},839982:S=>{s.jb("MatMul",S,void 0)},840036:(S,O,W,X)=>{s.jb("ArgMax",S,{keepDims:!!O,selectLastIndex:!!W,axis:X})},840144:(S,O,W,X)=>{s.jb("ArgMin",S,{keepDims:!!O,selectLastIndex:!!W,axis:X})},840252:(S,O)=>{s.jb("Softmax",S,{axis:O})},840315:(S,O)=>{s.jb("Concat",S,{axis:O})},840375:(S,O,W,X,ie)=>{s.jb("Split",S,{axis:O,numOutputs:W,splitSizes:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},840531:S=>{s.jb("Expand",S,void 0)},840585:(S,O)=>{s.jb("Gather",S,{axis:Number(O)})},840656:(S,O)=>{s.jb("GatherElements",S,{axis:Number(O)})},840735:(S,O)=>{s.jb("GatherND",S,{batch_dims:Number(O)})},840814:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt)=>{s.jb("Resize",S,{antialias:O,axes:W?Array.from(de().subarray(Number(W)>>>0,Number(X)>>>0)):[],coordinateTransformMode:Fr(ie),cubicCoeffA:be,excludeOutside:Re,extrapolationValue:Ke,keepAspectRatioPolicy:Fr(st),mode:Fr(_t),nearestMode:Fr(Kt)})},841176:(S,O,W,X,ie,be,Re)=>{s.jb("Slice",S,{starts:O?Array.from(de().subarray(Number(O)>>>0,Number(W)>>>0)):[],ends:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[],axes:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[]})},841440:S=>{s.jb("Tile",S,void 0)},841492:(S,O,W)=>{s.jb("InstanceNormalization",S,{epsilon:O,format:W?"NHWC":"NCHW"})},841606:(S,O,W)=>{s.jb("InstanceNormalization",S,{epsilon:O,format:W?"NHWC":"NCHW"})},841720:S=>{s.jb("Range",S,void 0)},841773:(S,O)=>{s.jb("Einsum",S,{equation:Fr(O)})},841854:(S,O,W,X,ie)=>{s.jb("Pad",S,{mode:O,value:W,pads:X?Array.from(de().subarray(Number(X)>>>0,Number(ie)>>>0)):[]})},841997:(S,O,W,X,ie,be)=>{s.jb("BatchNormalization",S,{epsilon:O,momentum:W,spatial:!!ie,trainingMode:!!X,format:be?"NHWC":"NCHW"})},842166:(S,O,W,X,ie,be)=>{s.jb("BatchNormalization",S,{epsilon:O,momentum:W,spatial:!!ie,trainingMode:!!X,format:be?"NHWC":"NCHW"})},842335:(S,O,W)=>{s.jb("CumSum",S,{exclusive:Number(O),reverse:Number(W)})},842432:(S,O,W)=>{s.jb("DequantizeLinear",S,{axis:O,blockSize:W})},842522:(S,O,W,X,ie)=>{s.jb("GridSample",S,{align_corners:O,mode:Fr(W),padding_mode:Fr(X),format:ie?"NHWC":"NCHW"})},842692:(S,O,W,X,ie)=>{s.jb("GridSample",S,{align_corners:O,mode:Fr(W),padding_mode:Fr(X),format:ie?"NHWC":"NCHW"})},842862:(S,O)=>{s.jb("ScatterND",S,{reduction:Fr(O)})},842947:(S,O,W,X,ie,be,Re,Ke,st)=>{s.jb("Attention",S,{numHeads:O,isUnidirectional:W,maskFilterValue:X,scale:ie,doRotary:be,qkvHiddenSizes:Re?Array.from(de().subarray(Number(Ke)>>>0,Number(Ke)+Re>>>0)):[],pastPresentShareBuffer:!!st})},843219:S=>{s.jb("BiasAdd",S,void 0)},843274:S=>{s.jb("BiasSplitGelu",S,void 0)},843335:S=>{s.jb("FastGelu",S,void 0)},843391:(S,O,W,X,ie,be,Re,Ke,st,_t,Kt,pr,Ar,Jn,Io,Y_)=>{s.jb("Conv",S,{format:pr?"NHWC":"NCHW",auto_pad:O,dilations:W?Array.from(de().subarray(Number(W)>>>0,Number(X)>>>0)):[],group:ie,kernel_shape:be?Array.from(de().subarray(Number(be)>>>0,Number(Re)>>>0)):[],pads:Ke?Array.from(de().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],strides:_t?Array.from(de().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],w_is_const:()=>!!D()[Number(Ar)>>>0],activation:Fr(Jn),activation_params:Io?Array.from(Ie().subarray(Number(Io)>>>0,Number(Y_)>>>0)):[]})},843975:S=>{s.jb("Gelu",S,void 0)},844027:(S,O,W,X,ie,be,Re,Ke,st)=>{s.jb("GroupQueryAttention",S,{numHeads:O,kvNumHeads:W,scale:X,softcap:ie,doRotary:be,rotaryInterleaved:Re,smoothSoftmax:Ke,localWindowSize:st})},844244:(S,O,W,X)=>{s.jb("LayerNormalization",S,{axis:O,epsilon:W,simplified:!!X})},844355:(S,O,W,X)=>{s.jb("LayerNormalization",S,{axis:O,epsilon:W,simplified:!!X})},844466:(S,O,W,X,ie,be)=>{s.jb("MatMulNBits",S,{k:O,n:W,accuracyLevel:X,bits:ie,blockSize:be})},844593:(S,O,W,X,ie,be)=>{s.jb("MultiHeadAttention",S,{numHeads:O,isUnidirectional:W,maskFilterValue:X,scale:ie,doRotary:be})},844752:(S,O)=>{s.jb("QuickGelu",S,{alpha:O})},844816:(S,O,W,X,ie)=>{s.jb("RotaryEmbedding",S,{interleaved:!!O,numHeads:W,rotaryEmbeddingDim:X,scale:ie})},844955:(S,O,W)=>{s.jb("SkipLayerNormalization",S,{epsilon:O,simplified:!!W})},845057:(S,O,W)=>{s.jb("SkipLayerNormalization",S,{epsilon:O,simplified:!!W})},845159:(S,O,W,X)=>{s.jb("GatherBlockQuantized",S,{gatherAxis:O,quantizeAxis:W,blockSize:X})},845280:S=>{s.Zb(S)},845314:(S,O)=>s.ac(Number(S),Number(O),s.Fb.dc,s.Fb.errors)};function ke(S,O,W){return di(async()=>{await s.Xb(Number(S),Number(O),Number(W))})}function je(){return typeof wasmOffsetConverter<"u"}class me{constructor(O){ue(this,"name","ExitStatus");this.message=`Program terminated with exit(${O})`,this.status=O}}var Fe=S=>{S.terminate(),S.onmessage=()=>{}},ze=[],Je=S=>{Ut.length==0&&(er(),gt(Ut[0]));var O=Ut.pop();if(!O)return 6;$t.push(O),Zr[S.Ab]=O,O.Ab=S.Ab;var W={Bb:"run",fc:S.ec,Hb:S.Hb,Ab:S.Ab};return O.postMessage(W,S.Mb),0},He=0,We=(S,O,...W)=>{for(var X=2*W.length,ie=Gu(),be=jf(8*X),Re=be>>>3,Ke=0;Ke<W.length;Ke++){var st=W[Ke];typeof st=="bigint"?(G[Re+2*Ke]=1n,G[Re+2*Ke+1]=st):(G[Re+2*Ke]=0n,Se()[Re+2*Ke+1>>>0]=st)}return S=Rm(S,0,X,be,O),Wu(ie),S};function nt(S){if(c)return We(0,1,S);if(k=S,!(0<He)){for(var O of $t)Fe(O);for(O of Ut)Fe(O);Ut=[],$t=[],Zr={},ae=!0}x(0,new me(S))}function ct(S){if(c)return We(1,0,S);Ht(S)}var Ht=S=>{if(k=S,c)throw ct(S),"unwind";nt(S)},Ut=[],$t=[],yn=[],Zr={},ln=S=>{var O=S.Ab;delete Zr[O],Ut.push(S),$t.splice($t.indexOf(S),1),S.Ab=0,Lm(O)};function Es(){yn.forEach(S=>S())}var gt=S=>new Promise(O=>{S.onmessage=ie=>{var be=(ie=ie.data).Bb;if(ie.Gb&&ie.Gb!=zu()){var Re=Zr[ie.Gb];Re?Re.postMessage(ie,ie.Mb):_(`Internal error! Worker sent a message "${be}" to target pthread ${ie.Gb}, but that thread no longer exists!`)}else be==="checkMailbox"?De():be==="spawnThread"?Je(ie):be==="cleanupThread"?ln(Zr[ie.hc]):be==="loaded"?(S.loaded=!0,O(S)):be==="alert"?alert(`Thread ${ie.ic}: ${ie.text}`):ie.target==="setimmediate"?S.postMessage(ie):be==="callHandler"?s[ie.Qb](...ie.args):be&&_(`worker sent an unknown command ${be}`)},S.onerror=ie=>{throw _(`worker sent an error! ${ie.filename}:${ie.lineno}: ${ie.message}`),ie};var W,X=[];for(W of[])s.propertyIsEnumerable(W)&&X.push(W);S.postMessage({Bb:"load",Rb:X,kc:T,lc:M})});function er(){var S=new Worker((()=>{let O=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new O("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Ut.push(S)}var wr=S=>{ee();var O=ve()[S+52>>>2>>>0];S=ve()[S+56>>>2>>>0],Cf(O,O-S),Wu(O)},ai=(S,O)=>{He=0,S=zm(S,O),0<He?k=S:Uu(S)};class oi{constructor(O){this.Ib=O-24}}function Ws(S,O,W){var X=new oi(S>>>=0);throw O>>>=0,W>>>=0,ve()[X.Ib+16>>>2>>>0]=0,ve()[X.Ib+4>>>2>>>0]=O,ve()[X.Ib+8>>>2>>>0]=W,S}function Pt(S,O,W,X){return c?We(2,1,S,O,W,X):jo(S,O,W,X)}function jo(S,O,W,X){if(S>>>=0,W>>>=0,X>>>=0,d===void 0)return 6;var ie=[];return c&&ie.length===0?Pt(S,O>>>=0,W,X):(S={ec:W,Ab:S,Hb:X,Mb:ie},c?(S.Bb="spawnThread",postMessage(S,ie),0):Je(S))}var Ao=typeof TextDecoder<"u"?new TextDecoder:void 0,tr=(S,O=0,W=NaN)=>{var X=(O>>>=0)+W;for(W=O;S[W]&&!(W>=X);)++W;if(16<W-O&&S.buffer&&Ao)return Ao.decode(S.buffer instanceof ArrayBuffer?S.subarray(O,W):S.slice(O,W));for(X="";O<W;){var ie=S[O++];if(128&ie){var be=63&S[O++];if((224&ie)==192)X+=String.fromCharCode((31&ie)<<6|be);else{var Re=63&S[O++];65536>(ie=(240&ie)==224?(15&ie)<<12|be<<6|Re:(7&ie)<<18|be<<12|Re<<6|63&S[O++])?X+=String.fromCharCode(ie):(ie-=65536,X+=String.fromCharCode(55296|ie>>10,56320|1023&ie))}}else X+=String.fromCharCode(ie)}return X},Fr=(S,O)=>(S>>>=0)?tr(K(),S,O):"";function L(S,O,W){return c?We(3,1,S,O,W):0}function ce(S,O){if(c)return We(4,1,S,O)}var Y=S=>{for(var O=0,W=0;W<S.length;++W){var X=S.charCodeAt(W);127>=X?O++:2047>=X?O+=2:55296<=X&&57343>=X?(O+=4,++W):O+=3}return O},le=(S,O,W)=>{var X=K();if(O>>>=0,0<W){var ie=O;W=O+W-1;for(var be=0;be<S.length;++be){var Re=S.charCodeAt(be);if(55296<=Re&&57343>=Re&&(Re=65536+((1023&Re)<<10)|1023&S.charCodeAt(++be)),127>=Re){if(O>=W)break;X[O++>>>0]=Re}else{if(2047>=Re){if(O+1>=W)break;X[O++>>>0]=192|Re>>6}else{if(65535>=Re){if(O+2>=W)break;X[O++>>>0]=224|Re>>12}else{if(O+3>=W)break;X[O++>>>0]=240|Re>>18,X[O++>>>0]=128|Re>>12&63}X[O++>>>0]=128|Re>>6&63}X[O++>>>0]=128|63&Re}}X[O>>>0]=0,S=O-ie}else S=0;return S};function pe(S,O){if(c)return We(5,1,S,O)}function Oe(S,O,W){if(c)return We(6,1,S,O,W)}function Ue(S,O,W){return c?We(7,1,S,O,W):0}function ht(S,O){if(c)return We(8,1,S,O)}function Dt(S,O,W){if(c)return We(9,1,S,O,W)}function At(S,O,W,X){if(c)return We(10,1,S,O,W,X)}function Wt(S,O,W,X){if(c)return We(11,1,S,O,W,X)}function pt(S,O,W,X){if(c)return We(12,1,S,O,W,X)}function xr(S){if(c)return We(13,1,S)}function Sr(S,O){if(c)return We(14,1,S,O)}function zi(S,O,W){if(c)return We(15,1,S,O,W)}var ls,cn,li=()=>Q(""),ci=S=>{for(var O="";K()[S>>>0];)O+=ls[K()[S++>>>0]];return O},Vi={},ha={};function ui(S,O,W={}){return function(X,ie,be={}){var Re=ie.name;if(!X)throw new cn(`type "${Re}" must have a positive integer typeid pointer`);if(ha.hasOwnProperty(X)){if(be.Sb)return;throw new cn(`Cannot register type '${Re}' twice`)}ha[X]=ie,Vi.hasOwnProperty(X)&&(ie=Vi[X],delete Vi[X],ie.forEach(Ke=>Ke()))}(S,O,W)}var Oo=(S,O,W)=>{switch(O){case 1:return W?X=>D()[X>>>0]:X=>K()[X>>>0];case 2:return W?X=>oe()[X>>>1>>>0]:X=>_e()[X>>>1>>>0];case 4:return W?X=>de()[X>>>2>>>0]:X=>ve()[X>>>2>>>0];case 8:return W?X=>G[X>>>3]:X=>H[X>>>3];default:throw new TypeError(`invalid integer width (${O}): ${S}`)}};function $o(S,O,W){W>>>=0,ui(S>>>=0,{name:O=ci(O>>>0),fromWireType:X=>X,toWireType:function(X,ie){if(typeof ie!="bigint"&&typeof ie!="number")throw ie=ie===null?"null":(X=typeof ie)=="object"||X==="array"||X==="function"?ie.toString():""+ie,new TypeError(`Cannot convert "${ie}" to ${this.name}`);return typeof ie=="number"&&(ie=BigInt(ie)),ie},Cb:Ui,readValueFromPointer:Oo(O,W,O.indexOf("u")==-1),Db:null})}var Ui=8;function Wi(S,O,W,X){ui(S>>>=0,{name:O=ci(O>>>0),fromWireType:function(ie){return!!ie},toWireType:function(ie,be){return be?W:X},Cb:Ui,readValueFromPointer:function(ie){return this.fromWireType(K()[ie>>>0])},Db:null})}var Cs=[],Mi=[];function za(S){9<(S>>>=0)&&--Mi[S+1]==0&&(Mi[S]=void 0,Cs.push(S))}var $n=S=>{if(!S)throw new cn("Cannot use deleted val. handle = "+S);return Mi[S]},Vn=S=>{switch(S){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let O=Cs.pop()||Mi.length;return Mi[O]=S,Mi[O+1]=1,O}};function cs(S){return this.fromWireType(ve()[S>>>2>>>0])}var ll={name:"emscripten::val",fromWireType:S=>{var O=$n(S);return za(S),O},toWireType:(S,O)=>Vn(O),Cb:Ui,readValueFromPointer:cs,Db:null};function Gi(S){return ui(S>>>0,ll)}var Xe=(S,O)=>{switch(O){case 4:return function(W){return this.fromWireType(Ie()[W>>>2>>>0])};case 8:return function(W){return this.fromWireType(Se()[W>>>3>>>0])};default:throw new TypeError(`invalid float width (${O}): ${S}`)}};function Ye(S,O,W){W>>>=0,ui(S>>>=0,{name:O=ci(O>>>0),fromWireType:X=>X,toWireType:(X,ie)=>ie,Cb:Ui,readValueFromPointer:Xe(O,W),Db:null})}function ut(S,O,W,X,ie){if(S>>>=0,W>>>=0,O=ci(O>>>0),ie===-1&&(ie=4294967295),ie=Ke=>Ke,X===0){var be=32-8*W;ie=Ke=>Ke<<be>>>be}var Re=O.includes("unsigned")?function(Ke,st){return st>>>0}:function(Ke,st){return st};ui(S,{name:O,fromWireType:ie,toWireType:Re,Cb:Ui,readValueFromPointer:Oo(O,W,X!==0),Db:null})}function Br(S,O,W){function X(be){var Re=ve()[be>>>2>>>0];return be=ve()[be+4>>>2>>>0],new ie(D().buffer,be,Re)}var ie=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][O];ui(S>>>=0,{name:W=ci(W>>>0),fromWireType:X,Cb:Ui,readValueFromPointer:X},{Sb:!0})}function cl(S,O){ui(S>>>=0,{name:O=ci(O>>>0),fromWireType:function(W){for(var X,ie=ve()[W>>>2>>>0],be=W+4,Re=be,Ke=0;Ke<=ie;++Ke){var st=be+Ke;Ke!=ie&&K()[st>>>0]!=0||(Re=Fr(Re,st-Re),X===void 0?X=Re:(X+="\0",X+=Re),Re=st+1)}return js(W),X},toWireType:function(W,X){X instanceof ArrayBuffer&&(X=new Uint8Array(X));var ie=typeof X=="string";if(!(ie||X instanceof Uint8Array||X instanceof Uint8ClampedArray||X instanceof Int8Array))throw new cn("Cannot pass non-string to std::string");var be=ie?Y(X):X.length,Re=Vu(4+be+1),Ke=Re+4;if(ve()[Re>>>2>>>0]=be,ie)le(X,Ke,be+1);else if(ie)for(ie=0;ie<be;++ie){var st=X.charCodeAt(ie);if(255<st)throw js(Re),new cn("String has UTF-16 code units that do not fit in 8 bits");K()[Ke+ie>>>0]=st}else for(ie=0;ie<be;++ie)K()[Ke+ie>>>0]=X[ie];return W!==null&&W.push(js,Re),Re},Cb:Ui,readValueFromPointer:cs,Db(W){js(W)}})}var Va=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ul=(S,O)=>{for(var W=S>>1,X=W+O/2;!(W>=X)&&_e()[W>>>0];)++W;if(32<(W<<=1)-S&&Va)return Va.decode(K().slice(S,W));for(W="",X=0;!(X>=O/2);++X){var ie=oe()[S+2*X>>>1>>>0];if(ie==0)break;W+=String.fromCharCode(ie)}return W},Ua=(S,O,W)=>{if(W??(W=2147483647),2>W)return 0;var X=O;W=(W-=2)<2*S.length?W/2:S.length;for(var ie=0;ie<W;++ie){var be=S.charCodeAt(ie);oe()[O>>>1>>>0]=be,O+=2}return oe()[O>>>1>>>0]=0,O-X},Iu=S=>2*S.length,Nu=(S,O)=>{for(var W=0,X="";!(W>=O/4);){var ie=de()[S+4*W>>>2>>>0];if(ie==0)break;++W,65536<=ie?(ie-=65536,X+=String.fromCharCode(55296|ie>>10,56320|1023&ie)):X+=String.fromCharCode(ie)}return X},Du=(S,O,W)=>{if(O>>>=0,W??(W=2147483647),4>W)return 0;var X=O;W=X+W-4;for(var ie=0;ie<S.length;++ie){var be=S.charCodeAt(ie);if(55296<=be&&57343>=be&&(be=65536+((1023&be)<<10)|1023&S.charCodeAt(++ie)),de()[O>>>2>>>0]=be,(O+=4)+4>W)break}return de()[O>>>2>>>0]=0,O-X},Me=S=>{for(var O=0,W=0;W<S.length;++W){var X=S.charCodeAt(W);55296<=X&&57343>=X&&++W,O+=4}return O};function U(S,O,W){if(S>>>=0,O>>>=0,W=ci(W>>>=0),O===2)var X=ul,ie=Ua,be=Iu,Re=Ke=>_e()[Ke>>>1>>>0];else O===4&&(X=Nu,ie=Du,be=Me,Re=Ke=>ve()[Ke>>>2>>>0]);ui(S,{name:W,fromWireType:Ke=>{for(var st,_t=ve()[Ke>>>2>>>0],Kt=Ke+4,pr=0;pr<=_t;++pr){var Ar=Ke+4+pr*O;pr!=_t&&Re(Ar)!=0||(Kt=X(Kt,Ar-Kt),st===void 0?st=Kt:(st+="\0",st+=Kt),Kt=Ar+O)}return js(Ke),st},toWireType:(Ke,st)=>{if(typeof st!="string")throw new cn(`Cannot pass non-string to C++ string type ${W}`);var _t=be(st),Kt=Vu(4+_t+O);return ve()[Kt>>>2>>>0]=_t/O,ie(st,Kt+4,_t+O),Ke!==null&&Ke.push(js,Kt),Kt},Cb:Ui,readValueFromPointer:cs,Db(Ke){js(Ke)}})}function ne(S,O){ui(S>>>=0,{Tb:!0,name:O=ci(O>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function he(S){Pf(S>>>0,!l,1,!o,131072,!1),Es()}var xe=S=>{if(!ae)try{if(S(),!(0<He))try{c?Uu(k):Ht(k)}catch(O){O instanceof me||O=="unwind"||x(0,O)}}catch(O){O instanceof me||O=="unwind"||x(0,O)}};function Te(S){S>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(de(),S>>>2,S).value.then(De),S+=128,Atomics.store(de(),S>>>2,1))}var De=()=>{var S=zu();S&&(Te(S),xe(Bm))};function Qe(S,O){(S>>>=0)==O>>>0?setTimeout(De):c?postMessage({Gb:S,Bb:"checkMailbox"}):(S=Zr[S])&&S.postMessage({Bb:"checkMailbox"})}var at=[];function it(S,O,W,X,ie){for(O>>>=0,X/=2,at.length=X,W=ie>>>0>>>3,ie=0;ie<X;ie++)at[ie]=G[W+2*ie]?G[W+2*ie+1]:Se()[W+2*ie+1>>>0];return(O?fe[O]:Sf[S])(...at)}var ft=()=>{He=0};function Lt(S){S>>>=0,c?postMessage({Bb:"cleanupThread",hc:S}):ln(Zr[S])}function br(S){}var mr=(S,O)=>{var W=ha[S];if(W===void 0)throw S=Nm(S),W=ci(S),js(S),new cn(`${O} has unknown type ${W}`);return W},un=(S,O,W)=>{var X=[];return S=S.toWireType(X,W),X.length&&(ve()[O>>>2>>>0]=Vn(X)),S};function jr(S,O,W){return O>>>=0,W>>>=0,S=$n(S>>>0),O=mr(O,"emval::as"),un(O,W,S)}function Un(S,O){return O>>>=0,S=$n(S>>>0),(O=mr(O,"emval::as")).toWireType(null,S)}var Zn=S=>{try{S()}catch(O){Q(O)}},vn=0,Wn=null,ki=0,us=[],Hr={},Gn={},Hi=0,$i=null,Wa=[];function di(S){return function(O){if(!ae){if(vn===0){var W=!1,X=!1;O((ie=0)=>{if(!ae&&(ki=ie,W=!0,X)){vn=2,Zn(()=>Um(Wn)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),ie=!1;try{var be=function(){var st=de()[Wn+8>>>2>>>0];return st=Ct[Gn[st]],--He,st()}()}catch(st){be=st,ie=!0}var Re=!1;if(!Wn){var Ke=$i;Ke&&($i=null,(ie?Ke.reject:Ke.resolve)(be),Re=!0)}if(ie&&!Re)throw be}}),X=!0,W||(vn=1,Wn=function(){var ie=Vu(65548),be=ie+12;ve()[ie>>>2>>>0]=be,ve()[ie+4>>>2>>>0]=be+65536,be=us[0];var Re=Hr[be];return Re===void 0&&(Re=Hi++,Hr[be]=Re,Gn[Re]=be),be=Re,de()[ie+8>>>2>>>0]=be,ie}(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),Zn(()=>Vm(Wn)))}else vn===2?(vn=0,Zn(Wm),js(Wn),Wn=null,Wa.forEach(xe)):Q(`invalid state: ${vn}`);return ki}}(O=>{S().then(O)})}function pa(S){return S>>>=0,di(async()=>{var O=await $n(S);return Vn(O)})}var kn=[];function _n(S,O,W,X){return W>>>=0,X>>>=0,(S=kn[S>>>0])(null,O=$n(O>>>0),W,X)}var In={},dn=S=>{var O=In[S];return O===void 0?ci(S):O};function Ki(S,O,W,X,ie){return W>>>=0,X>>>=0,ie>>>=0,(S=kn[S>>>0])(O=$n(O>>>0),O[W=dn(W)],X,ie)}var dl=()=>typeof globalThis=="object"?globalThis:Function("return this")();function bf(S){return(S>>>=0)==0?Vn(dl()):(S=dn(S),Vn(dl()[S]))}var ac=S=>{var O=kn.length;return kn.push(S),O},k_=(S,O)=>{for(var W=Array(S),X=0;X<S;++X)W[X]=mr(ve()[O+4*X>>>2>>>0],"parameter "+X);return W},xm=(S,O)=>Object.defineProperty(O,"name",{value:S});function S_(S,O,W){var X=(O=k_(S,O>>>0)).shift();S--;var ie=`return function (obj, func, destructorsRef, args) {
`,be=0,Re=[];W===0&&Re.push("obj");for(var Ke=["retType"],st=[X],_t=0;_t<S;++_t)Re.push("arg"+_t),Ke.push("argType"+_t),st.push(O[_t]),ie+=`  var arg${_t} = argType${_t}.readValueFromPointer(args${be?"+"+be:""});
`,be+=O[_t].Cb;return ie+=`  var rv = ${W===1?"new func":"func.call"}(${Re.join(", ")});
`,X.Tb||(Ke.push("emval_returnValue"),st.push(un),ie+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Ke.push(ie+`};
`),S=function(Kt){var pr=Function;if(!(pr instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof pr} which is not a function`);var Ar=xm(pr.name||"unknownFunctionName",function(){});return Ar.prototype=pr.prototype,Ar=new Ar,(Kt=pr.apply(Ar,Kt))instanceof Object?Kt:Ar}(Ke)(...st),W=`methodCaller<(${O.map(Kt=>Kt.name).join(", ")}) => ${X.name}>`,ac(xm(W,S))}function P_(S){return S=dn(S>>>0),Vn(s[S])}function E_(S,O){return O>>>=0,S=$n(S>>>0),O=$n(O),Vn(S[O])}function oc(S){9<(S>>>=0)&&(Mi[S+1]+=1)}function C_(){return Vn([])}function j_(S){S=$n(S>>>0);for(var O=Array(S.length),W=0;W<S.length;W++)O[W]=S[W];return Vn(O)}function A_(S){return Vn(dn(S>>>0))}function O_(){return Vn({})}function $_(S){for(var O=$n(S>>>=0);O.length;){var W=O.pop();O.pop()(W)}za(S)}function lc(S,O,W){O>>>=0,W>>>=0,S=$n(S>>>0),O=$n(O),W=$n(W),S[O]=W}function I_(S,O){return O>>>=0,S=(S=mr(S>>>0,"_emval_take_value")).readValueFromPointer(O),Vn(S)}function N_(S,O){S=-9007199254740992>S||9007199254740992<S?NaN:Number(S),O>>>=0,S=new Date(1e3*S),de()[O>>>2>>>0]=S.getUTCSeconds(),de()[O+4>>>2>>>0]=S.getUTCMinutes(),de()[O+8>>>2>>>0]=S.getUTCHours(),de()[O+12>>>2>>>0]=S.getUTCDate(),de()[O+16>>>2>>>0]=S.getUTCMonth(),de()[O+20>>>2>>>0]=S.getUTCFullYear()-1900,de()[O+24>>>2>>>0]=S.getUTCDay(),S=(S.getTime()-Date.UTC(S.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,de()[O+28>>>2>>>0]=S}var bm=S=>S%4==0&&(S%100!=0||S%400==0),wm=[0,31,60,91,121,152,182,213,244,274,305,335],Tm=[0,31,59,90,120,151,181,212,243,273,304,334];function Mm(S,O){S=-9007199254740992>S||9007199254740992<S?NaN:Number(S),O>>>=0,S=new Date(1e3*S),de()[O>>>2>>>0]=S.getSeconds(),de()[O+4>>>2>>>0]=S.getMinutes(),de()[O+8>>>2>>>0]=S.getHours(),de()[O+12>>>2>>>0]=S.getDate(),de()[O+16>>>2>>>0]=S.getMonth(),de()[O+20>>>2>>>0]=S.getFullYear()-1900,de()[O+24>>>2>>>0]=S.getDay();var W=(bm(S.getFullYear())?wm:Tm)[S.getMonth()]+S.getDate()-1|0;de()[O+28>>>2>>>0]=W,de()[O+36>>>2>>>0]=-60*S.getTimezoneOffset(),W=new Date(S.getFullYear(),6,1).getTimezoneOffset();var X=new Date(S.getFullYear(),0,1).getTimezoneOffset();S=0|(W!=X&&S.getTimezoneOffset()==Math.min(X,W)),de()[O+32>>>2>>>0]=S}function D_(S){S>>>=0;var O=new Date(de()[S+20>>>2>>>0]+1900,de()[S+16>>>2>>>0],de()[S+12>>>2>>>0],de()[S+8>>>2>>>0],de()[S+4>>>2>>>0],de()[S>>>2>>>0],0),W=de()[S+32>>>2>>>0],X=O.getTimezoneOffset(),ie=new Date(O.getFullYear(),6,1).getTimezoneOffset(),be=new Date(O.getFullYear(),0,1).getTimezoneOffset(),Re=Math.min(be,ie);return 0>W?de()[S+32>>>2>>>0]=+(ie!=be&&Re==X):0<W!=(Re==X)&&(ie=Math.max(be,ie),O.setTime(O.getTime()+6e4*((0<W?Re:ie)-X))),de()[S+24>>>2>>>0]=O.getDay(),W=(bm(O.getFullYear())?wm:Tm)[O.getMonth()]+O.getDate()-1|0,de()[S+28>>>2>>>0]=W,de()[S>>>2>>>0]=O.getSeconds(),de()[S+4>>>2>>>0]=O.getMinutes(),de()[S+8>>>2>>>0]=O.getHours(),de()[S+12>>>2>>>0]=O.getDate(),de()[S+16>>>2>>>0]=O.getMonth(),de()[S+20>>>2>>>0]=O.getYear(),S=O.getTime(),BigInt(isNaN(S)?-1:S/1e3)}function km(S,O,W,X,ie,be,Re){return c?We(16,1,S,O,W,X,ie,be,Re):-52}function wf(S,O,W,X,ie,be){if(c)return We(17,1,S,O,W,X,ie,be)}var cc={},Sm=()=>performance.timeOrigin+performance.now();function Pm(S,O){if(c)return We(18,1,S,O);if(cc[S]&&(clearTimeout(cc[S].id),delete cc[S]),!O)return 0;var W=setTimeout(()=>{delete cc[S],xe(()=>Fm(S,performance.timeOrigin+performance.now()))},O);return cc[S]={id:W,qc:O},0}function Em(S,O,W,X){S>>>=0,O>>>=0,W>>>=0,X>>>=0;var ie=new Date().getFullYear(),be=new Date(ie,0,1).getTimezoneOffset();ie=new Date(ie,6,1).getTimezoneOffset();var Re=Math.max(be,ie);ve()[S>>>2>>>0]=60*Re,de()[O>>>2>>>0]=+(be!=ie),S=(O=Ke=>{var st=Math.abs(Ke);return`UTC${0<=Ke?"-":"+"}${String(Math.floor(st/60)).padStart(2,"0")}${String(st%60).padStart(2,"0")}`})(be),O=O(ie),ie<be?(le(S,W,17),le(O,X,17)):(le(S,X,17),le(O,W,17))}var iM=()=>Date.now();function R_(S,O,W){return 0<=S&&3>=S?(S===0?S=Date.now():S=performance.timeOrigin+performance.now(),G[W>>>0>>>3]=BigInt(Math.round(1e6*S)),0):28}var Ru=[],Tf=(S,O)=>{Ru.length=0;for(var W;W=K()[S++>>>0];){var X=W!=105;O+=(X&=W!=112)&&O%8?4:0,Ru.push(W==112?ve()[O>>>2>>>0]:W==106?G[O>>>3]:W==105?de()[O>>>2>>>0]:Se()[O>>>3>>>0]),O+=X?8:4}return Ru};function Mf(S,O,W){return S>>>=0,O=Tf(O>>>0,W>>>0),fe[S](...O)}function L_(S,O,W){return S>>>=0,O=Tf(O>>>0,W>>>0),fe[S](...O)}var F_=()=>{};function B_(S,O){return _(Fr(S>>>0,O>>>0))}var z_=()=>{throw He+=1,"unwind"};function V_(){return 4294901760}var U_=()=>navigator.hardwareConcurrency;function W_(){return Q("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function G_(S){S>>>=0;var O=K().length;if(S<=O||4294901760<S)return!1;for(var W=1;4>=W;W*=2){var X=O*(1+.2/W);X=Math.min(X,S+100663296);e:{X=(Math.min(4294901760,65536*Math.ceil(Math.max(S,X)/65536))-T.buffer.byteLength+65535)/65536|0;try{T.grow(X),ee();var ie=1;break e}catch{}ie=void 0}if(ie)return!0}return!1}var uc=()=>(Q("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),dc={},Lu=S=>{S.forEach(O=>{uc()})};function Cm(){var S=Error().stack.toString().split(`
`);return S[0]=="Error"&&S.shift(),Lu(S),dc.Lb=uc(),dc.cc=S,dc.Lb}function H_(S,O,W){if(S>>>=0,O>>>=0,dc.Lb==S)var X=dc.cc;else(X=Error().stack.toString().split(`
`))[0]=="Error"&&X.shift(),Lu(X);for(var ie=3;X[ie]&&uc()!=S;)++ie;for(S=0;S<W&&X[S+ie];++S)de()[O+4*S>>>2>>>0]=uc();return S}var Fu,Ga={},jm=()=>{if(!Fu){var S,O={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(S in Ga)Ga[S]===void 0?delete O[S]:O[S]=Ga[S];var W=[];for(S in O)W.push(`${S}=${O[S]}`);Fu=W}return Fu};function K_(S,O){if(c)return We(19,1,S,O);S>>>=0,O>>>=0;var W=0;return jm().forEach((X,ie)=>{var be=O+W;for(ie=ve()[S+4*ie>>>2>>>0]=be,be=0;be<X.length;++be)D()[ie++>>>0]=X.charCodeAt(be);D()[ie>>>0]=0,W+=X.length+1}),0}function Am(S,O){if(c)return We(20,1,S,O);S>>>=0,O>>>=0;var W=jm();ve()[S>>>2>>>0]=W.length;var X=0;return W.forEach(ie=>X+=ie.length+1),ve()[O>>>2>>>0]=X,0}function q_(S){return c?We(21,1,S):52}function Om(S,O,W,X){return c?We(22,1,S,O,W,X):52}function kf(S,O,W,X){return c?We(23,1,S,O,W,X):70}var X_=[null,[],[]];function $m(S,O,W,X){if(c)return We(24,1,S,O,W,X);O>>>=0,W>>>=0,X>>>=0;for(var ie=0,be=0;be<W;be++){var Re=ve()[O>>>2>>>0],Ke=ve()[O+4>>>2>>>0];O+=8;for(var st=0;st<Ke;st++){var _t=K()[Re+st>>>0],Kt=X_[S];_t===0||_t===10?((S===1?b:_)(tr(Kt)),Kt.length=0):Kt.push(_t)}ie+=Ke}return ve()[X>>>2>>>0]=ie,0}c||function(){for(var S=s.numThreads-1;S--;)er();ze.unshift(()=>{$e++,function(O){c?O():Promise.all(Ut.map(gt)).then(O)}(()=>Pe())})}();for(var Im=Array(256),Bu=0;256>Bu;++Bu)Im[Bu]=String.fromCharCode(Bu);ls=Im,cn=s.BindingError=class extends Error{constructor(S){super(S),this.name="BindingError"}},s.InternalError=class extends Error{constructor(S){super(S),this.name="InternalError"}},Mi.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=()=>Mi.length/2-5-Cs.length;var Ct,Sf=[nt,ct,Pt,L,ce,pe,Oe,Ue,ht,Dt,At,Wt,pt,xr,Sr,zi,km,wf,Pm,K_,Am,q_,Om,kf,$m];(async function(){function S(X,ie){return Ct=X.exports,Ct=function(){var be=Ct,Re={};for(let[Ke,st]of Object.entries(be))Re[Ke]=typeof st=="function"?(..._t)=>{us.push(Ke);try{return st(..._t)}finally{ae||(us.pop(),Wn&&vn===1&&us.length===0&&(vn=0,He+=1,Zn(Af),typeof Fibers<"u"&&Fibers.rc()))}}:st;return Re}(),Ct=function(){var be=Ct,Re=st=>_t=>st(_t)>>>0,Ke=st=>()=>st()>>>0;return(be=Object.assign({},be)).Da=Re(be.Da),be.fb=Ke(be.fb),be.hb=Re(be.hb),be.tb=Re(be.tb),be.ub=Ke(be.ub),be.__cxa_get_exception_ptr=Re(be.__cxa_get_exception_ptr),be}(),yn.push(Ct.ib),M=ie,Pe(),Ct}$e++;var O=re();if(s.instantiateWasm)return new Promise(X=>{s.instantiateWasm(O,(ie,be)=>{S(ie,be),X(ie.exports)})});if(c)return new Promise(X=>{ge=ie=>{var be=new WebAssembly.Instance(ie,re());X(S(be,ie))}});we??(we=s.locateFile?s.locateFile?s.locateFile("ort-wasm-simd-threaded.jsep.wasm",v):v+"ort-wasm-simd-threaded.jsep.wasm":new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href);try{var W=await async function(X){var ie=we;if(!te&&typeof WebAssembly.instantiateStreaming=="function"&&!z(ie))try{var be=fetch(ie,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(be,X)}catch(Re){_(`wasm streaming compile failed: ${Re}`),_("falling back to ArrayBuffer instantiation")}return async function(Re,Ke){try{var st=await async function(_t){if(!te)try{var Kt=await p(_t);return new Uint8Array(Kt)}catch{}if(_t==we&&te)_t=new Uint8Array(te);else{if(!m)throw"both async and sync fetching of the wasm failed";_t=m(_t)}return _t}(Re);return await WebAssembly.instantiate(st,Ke)}catch(_t){_(`failed to asynchronously prepare wasm: ${_t}`),Q(_t)}}(ie,X)}(O);return S(W.instance,W.module)}catch(X){return i(X),Promise.reject(X)}})();var Nm=S=>(Nm=Ct.Da)(S),Dm=()=>(Dm=Ct.Ea)();s._OrtInit=(S,O)=>(s._OrtInit=Ct.Fa)(S,O),s._OrtGetLastError=(S,O)=>(s._OrtGetLastError=Ct.Ga)(S,O),s._OrtCreateSessionOptions=(S,O,W,X,ie,be,Re,Ke,st,_t)=>(s._OrtCreateSessionOptions=Ct.Ha)(S,O,W,X,ie,be,Re,Ke,st,_t),s._OrtAppendExecutionProvider=(S,O,W,X,ie)=>(s._OrtAppendExecutionProvider=Ct.Ia)(S,O,W,X,ie),s._OrtAddFreeDimensionOverride=(S,O,W)=>(s._OrtAddFreeDimensionOverride=Ct.Ja)(S,O,W),s._OrtAddSessionConfigEntry=(S,O,W)=>(s._OrtAddSessionConfigEntry=Ct.Ka)(S,O,W),s._OrtReleaseSessionOptions=S=>(s._OrtReleaseSessionOptions=Ct.La)(S),s._OrtCreateSession=(S,O,W)=>(s._OrtCreateSession=Ct.Ma)(S,O,W),s._OrtReleaseSession=S=>(s._OrtReleaseSession=Ct.Na)(S),s._OrtGetInputOutputCount=(S,O,W)=>(s._OrtGetInputOutputCount=Ct.Oa)(S,O,W),s._OrtGetInputOutputMetadata=(S,O,W,X)=>(s._OrtGetInputOutputMetadata=Ct.Pa)(S,O,W,X),s._OrtFree=S=>(s._OrtFree=Ct.Qa)(S),s._OrtCreateTensor=(S,O,W,X,ie,be)=>(s._OrtCreateTensor=Ct.Ra)(S,O,W,X,ie,be),s._OrtGetTensorData=(S,O,W,X,ie)=>(s._OrtGetTensorData=Ct.Sa)(S,O,W,X,ie),s._OrtReleaseTensor=S=>(s._OrtReleaseTensor=Ct.Ta)(S),s._OrtCreateRunOptions=(S,O,W,X)=>(s._OrtCreateRunOptions=Ct.Ua)(S,O,W,X),s._OrtAddRunConfigEntry=(S,O,W)=>(s._OrtAddRunConfigEntry=Ct.Va)(S,O,W),s._OrtReleaseRunOptions=S=>(s._OrtReleaseRunOptions=Ct.Wa)(S),s._OrtCreateBinding=S=>(s._OrtCreateBinding=Ct.Xa)(S),s._OrtBindInput=(S,O,W)=>(s._OrtBindInput=Ct.Ya)(S,O,W),s._OrtBindOutput=(S,O,W,X)=>(s._OrtBindOutput=Ct.Za)(S,O,W,X),s._OrtClearBoundOutputs=S=>(s._OrtClearBoundOutputs=Ct._a)(S),s._OrtReleaseBinding=S=>(s._OrtReleaseBinding=Ct.$a)(S),s._OrtRunWithBinding=(S,O,W,X,ie)=>(s._OrtRunWithBinding=Ct.ab)(S,O,W,X,ie),s._OrtRun=(S,O,W,X,ie,be,Re,Ke)=>(s._OrtRun=Ct.bb)(S,O,W,X,ie,be,Re,Ke),s._OrtEndProfiling=S=>(s._OrtEndProfiling=Ct.cb)(S),s._JsepOutput=(S,O,W)=>(s._JsepOutput=Ct.db)(S,O,W),s._JsepGetNodeName=S=>(s._JsepGetNodeName=Ct.eb)(S);var zu=()=>(zu=Ct.fb)(),js=s._free=S=>(js=s._free=Ct.gb)(S),Vu=s._malloc=S=>(Vu=s._malloc=Ct.hb)(S),Pf=(S,O,W,X,ie,be)=>(Pf=Ct.kb)(S,O,W,X,ie,be),Ef=()=>(Ef=Ct.lb)(),Rm=(S,O,W,X,ie)=>(Rm=Ct.mb)(S,O,W,X,ie),Lm=S=>(Lm=Ct.nb)(S),Uu=S=>(Uu=Ct.ob)(S),Fm=(S,O)=>(Fm=Ct.pb)(S,O),Bm=()=>(Bm=Ct.qb)(),Cf=(S,O)=>(Cf=Ct.rb)(S,O),Wu=S=>(Wu=Ct.sb)(S),jf=S=>(jf=Ct.tb)(S),Gu=()=>(Gu=Ct.ub)(),zm=s.dynCall_ii=(S,O)=>(zm=s.dynCall_ii=Ct.vb)(S,O),Vm=S=>(Vm=Ct.wb)(S),Af=()=>(Af=Ct.xb)(),Um=S=>(Um=Ct.yb)(S),Wm=()=>(Wm=Ct.zb)();return s.stackSave=()=>Gu(),s.stackRestore=S=>Wu(S),s.stackAlloc=S=>jf(S),s.setValue=function(S,O,W="i8"){switch(W.endsWith("*")&&(W="*"),W){case"i1":case"i8":D()[S>>>0]=O;break;case"i16":oe()[S>>>1>>>0]=O;break;case"i32":de()[S>>>2>>>0]=O;break;case"i64":G[S>>>3]=BigInt(O);break;case"float":Ie()[S>>>2>>>0]=O;break;case"double":Se()[S>>>3>>>0]=O;break;case"*":ve()[S>>>2>>>0]=O;break;default:Q(`invalid type for setValue: ${W}`)}},s.getValue=function(S,O="i8"){switch(O.endsWith("*")&&(O="*"),O){case"i1":case"i8":return D()[S>>>0];case"i16":return oe()[S>>>1>>>0];case"i32":return de()[S>>>2>>>0];case"i64":return G[S>>>3];case"float":return Ie()[S>>>2>>>0];case"double":return Se()[S>>>3>>>0];case"*":return ve()[S>>>2>>>0];default:Q(`invalid type for getValue: ${O}`)}},s.UTF8ToString=Fr,s.stringToUTF8=le,s.lengthBytesUTF8=Y,function S(){if(0<$e)Ce=S;else if(c)n(s),Z();else{for(;0<ze.length;)ze.shift()(s);0<$e?Ce=S:(s.calledRun=!0,ae||(Z(),n(s)))}}(),s.PTR_SIZE=4,a}),Lie=bP,eW=(t=(e=globalThis.self)==null?void 0:e.name)==null?void 0:t.startsWith("em-pthread"),eW&&bP()}),wP,X2,tW,Hs,Fie,px,rW,nW,TP,iW,MP,Bie,kP,zie,rN=Ze(()=>{tN(),wP=typeof location>"u"?void 0:location.origin,X2=import.meta.url>"file:"&&import.meta.url<"file;",tW=()=>{{if(X2){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,wP).href}return import.meta.url}},Hs=tW(),Fie=()=>{if(Hs&&!Hs.startsWith("blob:"))return Hs.substring(0,Hs.lastIndexOf("/")+1)},px=(e,t)=>{try{let r=t??Hs;return(r?new URL(e,r):new URL(e)).origin===wP}catch{return!1}},rW=(e,t)=>{let r=t??Hs;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},nW=(e,t)=>`${t??"./"}${e}`,TP=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},iW=async e=>(await import(e)).default,MP=(q9e(),Hv(Nie)).default,Bie=async()=>{if(!Hs)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(px(Hs))return[void 0,MP()];let e=await TP(Hs);return[e,MP(e)]},kP=(X9e(),Hv(Rie)).default,zie=async(e,t,r)=>{if(!e&&!t&&kP&&Hs&&px(Hs))return[void 0,kP];{let n="ort-wasm-simd-threaded.jsep.mjs",i=e??rW(n,t),s=r&&i&&!px(i,t),a=s?await TP(i):i??nW(n,t);return[s?a:void 0,await iW(a)]}}}),SP,mx,xg,PP,sW,aW,oW,nN,Wr,_f=Ze(()=>{rN(),mx=!1,xg=!1,PP=!1,sW=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},aW=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},oW=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},nN=async e=>{if(mx)return Promise.resolve();if(xg)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(PP)throw new Error("previous call to 'initializeWebAssembly()' failed.");xg=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!oW())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!aW())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=sW();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let i=e.wasmPaths,s=typeof i=="string"?i:void 0,a=i==null?void 0:i.mjs,o=(a==null?void 0:a.href)??a,l=i==null?void 0:i.wasm,c=(l==null?void 0:l.href)??l,d=e.wasmBinary,[u,f]=await zie(o,s,r>1),p=!1,m=[];if(t>0&&m.push(new Promise(g=>{setTimeout(()=>{p=!0,g()},t)})),m.push(new Promise((g,x)=>{let v={numThreads:r};if(d)v.wasmBinary=d;else if(c||s)v.locateFile=y=>c??s+y;else if(o&&o.indexOf("blob:")!==0)v.locateFile=y=>new URL(y,o).href;else if(u){let y=Fie();y&&(v.locateFile=w=>y+w)}f(v).then(y=>{xg=!1,mx=!0,SP=y,g(),u&&URL.revokeObjectURL(u)},y=>{xg=!1,PP=!0,x(y)})})),await Promise.race(m),p)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Wr=()=>{if(mx&&SP)return SP;throw new Error("WebAssembly is not initialized yet.")}}),uo,i1,Dr,iN=Ze(()=>{_f(),uo=(e,t)=>{let r=Wr(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i},i1=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,s])=>{let a=t?t+i:i;if(typeof s=="object")i1(s,a+".",r,n);else if(typeof s=="string"||typeof s=="number")n(a,s.toString());else if(typeof s=="boolean")n(a,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},Dr=e=>{let t=Wr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetLastError(i,i+n);let s=Number(t.getValue(i,n===4?"i32":"i64")),a=t.getValue(i+n,"*"),o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${s}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}}),Vie,Y9e=Ze(()=>{_f(),iN(),Vie=e=>{let t=Wr(),r=0,n=[],i=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(i.terminate=!1);let s=0;return(e==null?void 0:e.tag)!==void 0&&(s=uo(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,s),r===0&&Dr("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&i1(e.extra,"",new WeakSet,(a,o)=>{let l=uo(a,n),c=uo(o,n);t._OrtAddRunConfigEntry(r,l,c)!==0&&Dr(`Can't set a run config entry: ${a} - ${o}.`)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(a=>t._free(a)),s}}}),lW,cW,uW,bg,dW,Uie,Q9e=Ze(()=>{_f(),iN(),lW=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},cW=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},uW=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},bg=(e,t,r,n)=>{let i=uo(t,n),s=uo(r,n);Wr()._OrtAddSessionConfigEntry(e,i,s)!==0&&Dr(`Can't set a session config entry: ${t} - ${r}.`)},dW=async(e,t,r)=>{for(let n of t){let i=typeof n=="string"?n:n.name,s=[];switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let d=n==null?void 0:n.deviceType;d&&bg(e,"deviceType",d,r)}break;case"webgpu":if(i="JS",typeof n!="string"){let d=n;if(d!=null&&d.preferredLayout){if(d.preferredLayout!=="NCHW"&&d.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${d.preferredLayout}`);bg(e,"preferredLayout",d.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let a=uo(i,r),o=s.length,l=0,c=0;if(o>0){l=Wr()._malloc(o*Wr().PTR_SIZE),r.push(l),c=Wr()._malloc(o*Wr().PTR_SIZE),r.push(c);for(let d=0;d<o;d++)Wr().setValue(l+d*Wr().PTR_SIZE,s[d][0],"*"),Wr().setValue(c+d*Wr().PTR_SIZE,s[d][1],"*")}await Wr()._OrtAppendExecutionProvider(e,a,l,c,o)!==0&&Dr(`Can't append execution provider: ${i}.`)}},Uie=async e=>{let t=Wr(),r=0,n=[],i=e||{};uW(i);try{let s=lW(i.graphOptimizationLevel??"all"),a=cW(i.executionMode??"sequential"),o=typeof i.logId=="string"?uo(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let c=i.logVerbosityLevel??0;if(!Number.isInteger(c)||c<0||c>4)throw new Error(`log verbosity level is not valid: ${c}`);let d=typeof i.optimizedModelFilePath=="string"?uo(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(s,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,o,l,c,d),r===0&&Dr("Can't create session options."),i.executionProviders&&await dW(r,i.executionProviders,n),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);bg(r,"enableGraphCapture",i.enableGraphCapture.toString(),n)}if(i.freeDimensionOverrides)for(let[u,f]of Object.entries(i.freeDimensionOverrides)){if(typeof u!="string")throw new Error(`free dimension override name must be a string: ${u}`);if(typeof f!="number"||!Number.isInteger(f)||f<0)throw new Error(`free dimension override value must be a non-negative integer: ${f}`);let p=uo(u,n);t._OrtAddFreeDimensionOverride(r,p,f)!==0&&Dr(`Can't set a free dimension override: ${u} - ${f}.`)}return i.extra!==void 0&&i1(i.extra,"",new WeakSet,(u,f)=>{bg(r,u,f,n)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&Dr("Can't release session options."),n.forEach(a=>t._free(a)),s}}}),ih,Sl,_d,sN,s1,aN,oN,Y2,Rt=Ze(()=>{ih=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},Sl=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},_d=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((i,s)=>i*s,1);return r>0?Math.ceil(n*r):void 0},sN=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},s1=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},aN=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",oN=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",Y2=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),lN,Wie=Ze(()=>{tN(),lN=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),s;try{s=new ArrayBuffer(n)}catch(o){if(o instanceof RangeError){let l=Math.ceil(n/65536);s=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw o}let a=0;for(;;){let{done:o,value:l}=await i.read();if(o)break;let c=l.byteLength;new Uint8Array(s,a,c).set(l),a+=c}return new Uint8Array(s,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),fW,hW,pW,mW,cN,gW,yr,sc=Ze(()=>{Rt(),fW=["V","I","W","E","F"],hW=(e,t)=>{console.log(`[${fW[e]},${new Date().toISOString()}]${t}`)},cN=(e,t)=>{pW=e,mW=t},gW=(e,t)=>{let r=s1(e),n=s1(pW);r>=n&&hW(r,typeof t=="function"?t():t)},yr=(...e)=>{mW&&gW(...e)}}),yW,Up,Ne,a1,Gie,Hie,Kie,Zt=Ze(()=>{yW=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Up=class{static calcShape(e,t,r=!1){let n=e.length,i=t.length;if(n===0)return t;if(i===0)return e;let s=Math.max(e.length,t.length),a=new Array(s);if(r){if(n<2||i<2)return;let o=yW.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(o===void 0)return;[a[s-2],a[s-1]]=o}for(let o=r?3:1;o<=s;o++){let l=n-o<0?1:e[n-o],c=i-o<0?1:t[i-o];if(l!==c&&l>1&&c>1)return;let d=Math.max(l,c);if(l&&c)a[s-o]=Math.max(l,c);else{if(d>1)return;a[s-o]=0}}return a}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(e[r-i]!==1&&e[r-i]!==t[n-i])return!1;return!0}},Ne=class eb{static size(t){return eb.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let i=new Array(n),s=n-1;for(;s>=0;){if(t[s]%r===0){i[s]=t[s]/r;break}if(r%t[s]!==0)throw new Error("cannot convert shape");i[s]=1,r/=t[s],s--}for(s--;s>=0;s--)i[s]=t[s];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return eb.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return eb.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let i=1;for(let s=r;s<n;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=Number(t[s])}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((i,s)=>i+r[s]+r[s+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,i)=>n===r[i])}},a1=class Vg{static adjustPoolAttributes(t,r,n,i,s,a){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let o=0;o<r.length-2;o++)o>=n.length?n.push(r[o+2]):n[o]=r[o+2];for(let o=0;o<n.length;o++)if(o<i.length){if(i[o]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let o=0;o<n.length;o++)if(o<s.length){if(s[o]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let o=0;o<n.length*2;o++)if(o<a.length){if(a[o]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let o=0;o<n.length;o++){if(n[o]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[o]>=n[o]||a[o+n.length]>=n[o])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,i,s,a,o){if(o){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)Vg.adjustPadAndReturnShape(t[l+(a?1:2)],r[l],n[l],i[l],s,l,l+t.length-2,o)}}static computePoolOutputShape(t,r,n,i,s,a,o){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return Vg.computeShapeHelper(t,r,l,n,i,s,a,o),l}static computeConvOutputShape(t,r,n,i,s,a,o){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return Vg.computeShapeHelper(!1,t,l,n,i,s,a,o),l}static computeShapeHelper(t,r,n,i,s,a,o,l){if(t)for(let c=0;c<r.length-2;c++)n.push(1);else for(let c=0;c<r.length-2;c++)n.push(Vg.adjustPadAndReturnShape(r[c+2],i[c],s[c],a[c],o,c,c+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,i,s,a,o,l){let c=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return s[a]=0,s[o]=0,Math.floor((t-c)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let d=((t+r-1)/r-1)*r+i-t;return s[a]=Math.floor(l==="SAME_LOWER"?(d+1)/2:d/2),s[o]=d-s[a],Math.floor((t+d-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[a]+s[o]-c)/r+1)}},Gie=class{static getShapeOfGemmResult(e,t,r,n,i){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let s,a,o;t?(s=e[1],a=e[0]):(s=e[0],a=e[1]);let l=-1;if(n?(o=r[0],l=1):(o=r[1],l=0),r[l]!==a)throw new Error("dimension mismatch");if(s<=0||o<=0||a<=0)throw new Error("invalid shape specified");if(i&&!Up.isValidBroadcast(i,[s,o]))throw new Error("gemm: invalid bias shape for broadcast");return[s,o,a]}},Hie=-34028234663852886e22,Kie=34028234663852886e22}),uN,qie=Ze(()=>{Rt(),uN=(e,t)=>new(sN(t))(e)}),Q2,EP,vW,CP,_W,jP,AP,OP,xW,Xie,Z9e=Ze(()=>{sc(),Q2=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),i=new Int32Array(r);for(let s=0;s<r;s++){let a=n[s];if(a>2147483647n||a<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${s}: ${a}`);i[s]=Number(a)}return t?new Uint8Array(i.buffer):i},EP=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),i=BigInt64Array.from(n,BigInt);return t?new Uint8Array(i.buffer):i},vW=1,CP=()=>vW++,_W=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),jP=(e,t)=>{let r=_W.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,i)=>n*i)*r/8):0},AP=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:i,shape:s,shouldConvertInt64toInt32:a=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=i,this.tensorShape=s,this.shouldConvertInt64toInt32=a}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return jP(this.dataType,this.tensorShape)}destroy(){yr("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=EP(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,i)=>n===r[i])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},OP=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let i=t,s=this.tensorManager.getMLContext(e),a=i==="int64"&&!s.opSupportLimits().input.dataTypes.includes("int64");if(a&&(i="int32",yr("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(s,i,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==jP(i,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let o=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,i,r,o,!0,!0,a),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=Q2(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else yr("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){var t,r,n;if(this.activeUpload){let i=(t=this.wrapper)!=null&&t.isInt64ToInt32Converted?EP(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(i):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(i);return}else return i.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read((r=this.wrapper)==null?void 0:r.shouldConvertInt64toInt32,e):this.wrapper.read((n=this.wrapper)==null?void 0:n.shouldConvertInt64toInt32)}},xW=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=CP();return this.tensorTrackersById.set(e,new OP(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,i){yr("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${i}}`);let s=this.tensorTrackersById.get(t);if(!s)throw new Error("Tensor not found.");return s.ensureTensor(e,r,n,i)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){yr("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t==null?void 0:t.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let i=this.getMLContext(e),s=CP(),a=new AP({sessionId:e,context:i,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(s,new OP(this,a)),this.externalTensors.add(a),s}async getCachedTensor(e,t,r,n,i,s,a=!1){let o=this.getMLContext(e);for(let[c,d]of this.freeTensors.entries())if(d.canReuseTensor(o,t,r)){yr("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let u=this.freeTensors.splice(c,1)[0];return u.sessionId=e,u}yr("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await o.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:i,readable:s});return new AP({sessionId:e,context:o,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:a})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},Xie=(...e)=>new xW(...e)}),gx,bW,Yie,J9e=Ze(()=>{Rt(),_f(),qie(),Z9e(),sc(),gx=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),bW=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((i,s)=>i===n[s]&&e[i]===t[i])},Yie=class{constructor(e){this.tensorManager=Xie(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,cN(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){yr("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){yr("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)yr("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>bW(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(i=>i.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){yr("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,i){let s=gx.get(r);if(!s)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,s,n,i)}async createTemporaryTensor(e,t,r){yr("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=gx.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let i=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,i,n,r,!1);let s=this.temporarySessionTensorIds.get(e);return s?s.push(i):this.temporarySessionTensorIds.set(e,[i]),i}uploadTensor(e,t){if(!Wr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");yr("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return uN(r,t)}}registerMLTensor(e,t,r,n){let i=gx.get(r);if(!i)throw new Error(`Unsupported ONNX data type: ${r}`);let s=this.tensorManager.registerTensor(e,t,i,n);return yr("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${i}, dimensions: ${n}} -> {tensorId: ${s}}`),s}registerMLConstant(e,t,r,n,i,s,a=!1){if(!s)throw new Error("External mounted files are not available.");let o=e;e.startsWith("./")&&(o=e.substring(2));let l=s.get(o);if(!l)throw new Error(`File with name ${o} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let c=l.slice(t,t+r).buffer,d;switch(i.dataType){case"float32":d=new Float32Array(c);break;case"float16":d=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(c):new Uint16Array(c);break;case"int32":d=new Int32Array(c);break;case"uint32":d=new Uint32Array(c);break;case"int64":a?(d=Q2(new Uint8Array(c),!1),i.dataType="int32"):d=new BigInt64Array(c);break;case"uint64":d=new BigUint64Array(c);break;case"int8":d=new Int8Array(c);break;case"int4":case"uint4":case"uint8":d=new Uint8Array(c);break;default:throw new Error(`Unsupported data type: ${i.dataType} in creating WebNN Constant from external data.`)}return yr("verbose",()=>`[WebNN] registerMLConstant {dataType: ${i.dataType}, shape: ${i.shape}}} ${a?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(i,d)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){var t;return!!((t=this.mlContextBySessionId.get(e))!=null&&t.opSupportLimits().input.dataTypes.includes("int64"))}flush(){}}}),dN=Ze(()=>{}),$P,yx,vx,wW,TW,IP,Z2,MW,Qie,eqe=Ze(()=>{sc(),dN(),$P=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),yx=[],vx=e=>Math.ceil(Number(e)/16)*16,wW=e=>{for(let t=0;t<yx.length;t++){let r=yx[t];if(e<=r)return r}return Math.ceil(e/16)*16},TW=1,IP=()=>TW++,Z2=async(e,t,r,n)=>{let i=vx(r),s=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,s,0,i),e.flush(),await s.mapAsync(GPUMapMode.READ);let o=s.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(o,0,r)),l}else return new Uint8Array(o.slice(0,r))}finally{s.destroy()}},MW=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of $P)yx.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,i=t.byteLength,s=vx(i),a=this.storageCache.get(e);if(!a)throw new Error("gpu data for uploading does not exist");if(Number(a.originalSize)!==i)throw new Error(`inconsistent data size. gpu data size=${a.originalSize}, data size=${i}`);let o=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=o.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,i)),o.unmap();let c=this.backend.device.createCommandEncoder();c.copyBufferToBuffer(o,0,a.gpuData.buffer,0,s),this.backend.device.queue.submit([c.finish()]),o.destroy(),yr("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let i=vx(r.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,i)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return yr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=IP();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),yr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),yr("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=wW(e),n,i=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(i||s){let o=(i?this.freeBuffers:this.freeUniformBuffers).get(r);o?o.length>0?n=o.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let a={id:IP(),type:0,buffer:n};return this.storageCache.set(a.id,{gpuData:a,originalSize:Number(e)}),yr("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${a.id}`),a}get(e){var t;return(t=this.storageCache.get(e))==null?void 0:t.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return yr("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await Z2(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=$P.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(yr("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},Qie=(...e)=>new MW(...e)}),kW,Cr,On=Ze(()=>{kW=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Cr=e=>new kW(e)}),Wp,_x,bi,ts,St,Tn,J2,jh,_u,Mt,wg,Be,bt,Zie,fN,SW,Jie,Jt=Ze(()=>{Rt(),Zt(),Wp=64,_x=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},bi=(e,t=1)=>{let r=_x(e,t);return typeof r=="string"?r:r[0]},ts=(e,t=1)=>{let r=_x(e,t);return typeof r=="string"?r:r[1]},St=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:Ne.computeStrides(r)})}),t},Tn=e=>e%4===0?4:e%2===0?2:1,J2=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,jh=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_u=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,Mt=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,wg=(e,t,r,n,i)=>{let s=typeof r=="number",a=s?r:r.length,o=[...new Array(a).keys()],l=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,c=_x(t,i),d=typeof c=="string"?c:c[1],u=typeof c=="string"?c:c[0],f={indices:l,value:d,storage:u,tensor:t},p=z=>typeof z=="string"?z:`${z}u`,m={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},g=s?"uniforms.":"",x=`${g}${e}_shape`,v=`${g}${e}_strides`,y="";for(let z=0;z<a-1;z++)y+=`
    let dim${z} = current / ${Mt(v,z,a)};
    let rest${z} = current % ${Mt(v,z,a)};
    indices[${z}] = dim${z};
    current = rest${z};
    `;y+=`indices[${a-1}] = current;`;let w=a<2?"":`
  fn o2i_${e}(offset: u32) -> ${f.indices} {
    var indices: ${f.indices};
    var current = offset;
    ${y}
    return indices;
  }`,b=z=>(m.offsetToIndices=!0,a<2?z:`o2i_${e}(${z})`),_=[];if(a>=2)for(let z=a-1;z>=0;z--)_.push(`${Mt(v,z,a)} * (indices[${z}])`);let T=a<2?"":`
  fn i2o_${e}(indices: ${f.indices}) -> u32 {
    return ${_.join("+")};
  }`,M=z=>(m.indicesToOffset=!0,a<2?z:`i2o_${e}(${z})`),k=(...z)=>a===0?"0u":`${f.indices}(${z.map(p).join(",")})`,j=(z,D)=>a<2?`${z}`:`${Mt(z,D,a)}`,A=(z,D,K)=>a<2?`${z}=${K};`:`${Mt(z,D,a)}=${K};`,R={},I=(z,D)=>{m.broadcastedIndicesToOffset=!0;let K=`${D.name}broadcastedIndicesTo${e}Offset`;if(K in R)return`${K}(${z})`;let oe=[];for(let _e=a-1;_e>=0;_e--){let de=D.indicesGet("outputIndices",_e+D.rank-a);oe.push(`${j(v,_e)} * (${de} % ${j(x,_e)})`)}return R[K]=`fn ${K}(outputIndices: ${D.type.indices}) -> u32 {
             return ${oe.length>0?oe.join("+"):"0u"};
           }`,`${K}(${z})`},$=(z,D)=>(()=>{if(f.storage===f.value)return`${e}[${z}]=${D};`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`${e}[${z}]=vec2<u32>(u32(${D}), select(0u, 0xFFFFFFFFu, ${D} < 0));`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`${e}[${z}]=vec2<u32>(u32(${D}), 0u);`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`${e}[${z}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${D}));`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),F=z=>(()=>{if(f.storage===f.value)return`${e}[${z}]`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`i32(${e}[${z}].x)`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`u32(${e}[${z}].x)`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${z}] & 0xFFu), bool(${e}[${z}] & 0xFF00u), bool(${e}[${z}] & 0xFF0000u), bool(${e}[${z}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),V=a<2?"":`
  fn get_${e}ByIndices(indices: ${f.indices}) -> ${d} {
    return ${F(`i2o_${e}(indices)`)};
  }`,G=a<2?"":(()=>{let z=o.map(K=>`d${K}: u32`).join(", "),D=o.map(K=>`d${K}`).join(", ");return`
  fn get_${e}(${z}) -> ${d} {
    return get_${e}ByIndices(${k(D)});
  }`})(),H=(...z)=>{if(z.length!==a)throw new Error(`indices length must be ${a}`);let D=z.map(p).join(",");return a===0?F("0u"):a===1?F(D[0]):(m.get=!0,m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}(${D})`)},B=z=>a<2?F(z):(m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}ByIndices(${z})`),te=a<2?"":`
  fn set_${e}ByIndices(indices: ${f.indices}, value: ${d}) {
    ${$(`i2o_${e}(indices)`,"value")}
  }`,ae=a<2?"":(()=>{let z=o.map(K=>`d${K}: u32`).join(", "),D=o.map(K=>`d${K}`).join(", ");return`
  fn set_${e}(${z}, value: ${d}) {
    set_${e}ByIndices(${k(D)}, value);
  }`})();return{impl:()=>{let z=[],D=!1;return m.offsetToIndices&&(z.push(w),D=!0),m.indicesToOffset&&(z.push(T),D=!0),m.broadcastedIndicesToOffset&&(Object.values(R).forEach(K=>z.push(K)),D=!0),m.set&&(z.push(ae),D=!0),m.setByIndices&&(z.push(te),D=!0),m.get&&(z.push(G),D=!0),m.getByIndices&&(z.push(V),D=!0),!s&&D&&z.unshift(`const ${x} = ${f.indices}(${r.join(",")});`,`const ${v} = ${f.indices}(${Ne.computeStrides(r).join(",")});`),z.join(`
`)},type:f,offsetToIndices:b,indicesToOffset:M,broadcastedIndicesToOffset:I,indices:k,indicesGet:j,indicesSet:A,set:(...z)=>{if(z.length!==a+1)throw new Error(`indices length must be ${a}`);let D=z[a];if(typeof D!="string")throw new Error("value must be string");let K=z.slice(0,a).map(p).join(",");return a===0?$("0u",D):a===1?$(K[0],D):(m.set=!0,m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}(${K}, ${D})`)},setByOffset:$,setByIndices:(z,D)=>a<2?$(z,D):(m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}ByIndices(${z}, ${D});`),get:H,getByOffset:F,getByIndices:B,usage:n,name:e,strides:v,shape:x,rank:a}},Be=(e,t,r,n=1)=>wg(e,t,r,"input",n),bt=(e,t,r,n=1)=>wg(e,t,r,"output",n),Zie=(e,t,r)=>wg(e,t,r,"atomicOutput",1),fN=(e,t,r,n=1)=>wg(e,t,r,"internal",n),SW=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=Wp){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let i=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=i?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,a=i?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${s}) {
    ${a}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let i=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${i}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},Jie=(e,t)=>new SW(e,t)}),PW,NP,EW,CW,jW,AW,ca,ese,tse,$u=Ze(()=>{Rt(),Zt(),On(),Jt(),PW=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},NP=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),EW=(e,t)=>Ne.sortBasedOnPerm(e,NP(e.length,t)),CW=(e,t,r,n)=>{let i=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let s=0;s<t;++s)i+=`a[${e[s]}]=i[${s}];`;return i+="return a;}"},jW=(e,t)=>{let r=[],n=[];for(let i=0;i<e.length;++i)e[i]!==1&&r.push(e[i]),e[t[i]]!==1&&n.push(t[i]);return{newShape:r,newPerm:n}},AW=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},ca=(e,t)=>{let r=e.dataType,n=e.dims.length,i=NP(n,t),s=EW(e.dims,i),a=e.dims,o=s,l=n<2||AW(i,e.dims),c;if(l)return c=m=>{let g=Be("input",r,a,4),x=bt("output",r,o,4);return`
  ${m.registerUniform("output_size","u32").declareVariables(g,x)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let m=Ne.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64/4)},programUniforms:[{type:12,data:Math.ceil(m/4)}]}},getShaderSource:c};let{newShape:d,newPerm:u}=jW(e.dims,i),f=Ne.areEqual(u,[2,3,1]),p=Ne.areEqual(u,[3,1,2]);if(d.length===2||f||p){a=f?[d[0],d[1]*d[2]]:p?[d[0]*d[1],d[2]]:d,o=[a[1],a[0]];let m=16;return c=g=>{let x=Be("a",r,a.length),v=bt("output",r,o.length);return`
  ${g.registerUniform("output_size","u32").declareVariables(x,v)}
  var<workgroup> tile : array<array<${v.type.value}, ${m+1}>, ${m}>;
  ${g.mainStart([m,m,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${m} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${m}u + local_id.x;
    let input_row = workgroup_id_x * ${m}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${x.getByIndices(`${x.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${m}u + local_id.x;
    let output_row = workgroup_id_y * ${m}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${v.setByIndices(`${v.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let g=Ne.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(o[1]/m),y:Math.ceil(o[0]/m)},programUniforms:[{type:12,data:g},...St(a,o)]}},getShaderSource:c}}return c=m=>{let g=Be("a",r,a.length),x=bt("output",r,o.length);return`
  ${m.registerUniform("output_size","u32").declareVariables(g,x)}

  ${CW(i,n,g,x)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${x.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${x.setByOffset("global_idx",g.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let m=Ne.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...St(a,o)]}},getShaderSource:c}},ese=(e,t)=>{PW(e.inputs,t.perm),e.compute(ca(e.inputs[0],t.perm))},tse=e=>Cr({perm:e.perm})}),OW,$W,IW,NW,DW,RW,LW,FW,BW,zW,Xa,rse,nse,ise,sse,ase,ose,lse,cse,use,dse,tqe=Ze(()=>{Rt(),Zt(),Jt(),hN(),$u(),OW={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},$W={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},IW={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},NW={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},DW=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},RW=(e,t)=>{let r=[],n=e.length;for(let s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);let i=t.map(s=>e[s]);return[r,i]},LW=(e,t)=>{let r=e.length+t.length,n=[],i=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?n.push(e[i++]):n.push(1);return n},FW=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},BW=(e,t)=>{let r=[];if(!FW(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},zW=(e,t,r,n,i,s,a)=>{let o=r[0].dims,l=Ne.size(s),c=Ne.size(a),d=Be("_A",r[0].dataType,o),u=bt("output",i,s),f=64;l===1&&(f=256);let p=`
          var<workgroup> aBestValues : array<f32, ${f}>;
       `,m=g=>`
        ${g.registerUniform("reduceSize","u32").declareVariables(d,u)}
        ${p}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${g.mainStart(f)}

          let outputIndex = global_idx / ${f};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${IW[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${f}) {
           let candidate = f32(${d.getByOffset("offset + k")});
           bestValue = ${OW[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${f}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${$W[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${u.setByOffset("outputIndex",`${n==="mean"?`${u.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${u.type.storage}(${NW[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${f}`,inputDependencies:["type"]},getShaderSource:m,getRunData:()=>({outputs:[{dims:s,dataType:i}],dispatchGroup:{x:l},programUniforms:[{type:12,data:c}]})}},Xa=(e,t,r,n)=>{let i=e.inputs.length===1?r:eA(e.inputs,r),s=i.axes;s.length===0&&!i.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((p,m)=>m));let a=Ne.normalizeAxes(s,e.inputs[0].dims.length),o=a,l=e.inputs[0],c=BW(o,e.inputs[0].dims.length);c.length>0&&(l=e.compute(ca(e.inputs[0],c),{inputs:[0],outputs:[-1]})[0],o=DW(o.length,l.dims.length));let[d,u]=RW(l.dims,o),f=d;i.keepDims&&(f=LW(d,a)),e.compute(zW(t,i.cacheKey,[l],n,e.inputs[0].dataType,f,u),{inputs:[l]})},rse=(e,t)=>{Xa(e,"ReduceMeanShared",t,"mean")},nse=(e,t)=>{Xa(e,"ReduceL1Shared",t,"l1")},ise=(e,t)=>{Xa(e,"ReduceL2Shared",t,"l2")},sse=(e,t)=>{Xa(e,"ReduceLogSumExpShared",t,"logSumExp")},ase=(e,t)=>{Xa(e,"ReduceMaxShared",t,"max")},ose=(e,t)=>{Xa(e,"ReduceMinShared",t,"min")},lse=(e,t)=>{Xa(e,"ReduceProdShared",t,"prod")},cse=(e,t)=>{Xa(e,"ReduceSumShared",t,"sum")},use=(e,t)=>{Xa(e,"ReduceSumSquareShared",t,"sumSquare")},dse=(e,t)=>{Xa(e,"ReduceLogSumShared",t,"logSum")}}),Ya,VW,o1,eA,Qa,UW,WW,GW,HW,KW,qW,XW,YW,QW,ZW,Za,fse,hse,pse,mse,gse,yse,vse,_se,xse,bse,hN=Ze(()=>{Rt(),Zt(),On(),Jt(),tqe(),Ya=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},VW=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],o1=(e,t,r,n,i,s,a=!1,o=!1)=>{let l=[],c=r[0].dims,d=c.length,u=Ne.normalizeAxes(i,d),f=!o&&u.length===0;c.forEach((g,x)=>{f||u.indexOf(x)>=0?a&&l.push(1):l.push(g)});let p=l.length,m=Ne.size(l);return{name:e,shaderCache:t,getShaderSource:g=>{let x=[],v=Be("_A",r[0].dataType,d),y=bt("output",s,p),w=n(v,y,u),b=w[2];for(let _=0,T=0;_<d;_++)f||u.indexOf(_)>=0?(a&&T++,b=`for(var j${_}: u32 = 0; j${_} < ${c[_]}; j${_}++) {
                  ${w[2].includes("last_index")?`let last_index = j${_};`:""}
                  ${v.indicesSet("input_indices",_,`j${_}`)}
                  ${b}
                }`):(x.push(`${v.indicesSet("input_indices",_,y.indicesGet("output_indices",T))};`),T++);return`

        ${g.registerUniform("output_size","u32").declareVariables(v,y)}

        ${g.mainStart()}
          ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${v.type.indices};
          let output_indices = ${y.offsetToIndices("global_idx")};

          ${x.join(`
`)}
          ${w[0]}       // init ops for reduce max/min
          ${w[1]}
          ${b}
          ${w[3]}
          ${w.length===4?y.setByOffset("global_idx","value"):w.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:s}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...St(c,l)]})}},eA=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),Cr({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Qa=(e,t,r,n)=>{let i=e.inputs,s=i.length===1?r:eA(i,r);e.compute(o1(t,{hint:s.cacheKey,inputDependencies:["rank"]},[i[0]],s.noopWithEmptyAxes&&s.axes.length===0?VW:n,s.axes,i[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},UW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},WW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},GW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},HW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},KW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceMax",t,(r,n,i)=>{let s=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&s.push(r.indicesSet("input_indices",a,0));return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},qW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceMean",t,(r,n,i)=>{let s=1;for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&(s*=e.inputs[0].dims[a]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${s});`]})},XW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceMin",t,(r,n,i)=>{let s=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&s.push(`input_indices[${a}] = 0;`);return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},YW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},QW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},ZW=(e,t)=>{Ya(e.inputs),Qa(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},Za=(e,t,r)=>{if(t.length===0)return r;let n=1,i=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?n*=e[s]:i*=e[s];return i<32&&n>1024},fse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?qW(e,t):rse(e,t)},hse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?WW(e,t):nse(e,t)},pse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?GW(e,t):ise(e,t)},mse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?HW(e,t):sse(e,t)},gse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?KW(e,t):ase(e,t)},yse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?XW(e,t):ose(e,t)},vse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?YW(e,t):lse(e,t)},_se=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?QW(e,t):cse(e,t)},xse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ZW(e,t):use(e,t)},bse=(e,t)=>{Za(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?UW(e,t):dse(e,t)}}),DP,wse,Tse,tA,rqe=Ze(()=>{Rt(),On(),hN(),DP=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},wse=(e,t)=>{DP(e.inputs);let r=(n,i,s)=>{let a=[];for(let o=0;o<n.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(`input_indices[${o}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(o1("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},Tse=(e,t)=>{DP(e.inputs);let r=(n,i,s)=>{let a=[];for(let o=0;o<n.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(`input_indices[${o}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(o1("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},tA=e=>Cr(e)}),JW,xx,eG,tG,rG,qv,nG,Mse,pN=Ze(()=>{Rt(),Zt(),dN(),Jt(),JW=(e,t)=>{let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5];if(a&&o)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],c=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let u=i.dims[0]/3,f=u,p=f;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let w of t.qkvHiddenSizes)if(w%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");u=t.qkvHiddenSizes[0],f=t.qkvHiddenSizes[1],p=t.qkvHiddenSizes[2]}let m=c;if(u!==f)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==u+f+p)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let g=0;if(a){if(f!==p)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(a.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(a.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(a.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(a.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(a.dims[4]!==f/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(g=a.dims[3])}let x=m+g,v=-1,y=0;if(s)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");if(o){if(o.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(o.dims[0]!==l||o.dims[1]!==t.numHeads||o.dims[2]!==c||o.dims[3]!==x)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:c,pastSequenceLength:g,kvSequenceLength:m,totalSequenceLength:x,maxSequenceLength:v,inputHiddenSize:d,hiddenSize:u,vHiddenSize:p,headSize:Math.floor(u/t.numHeads),vHeadSize:Math.floor(p/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:y,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},xx=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e==null?void 0:e.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,eG=(e,t,r,n,i,s,a,o)=>{let l=Tn(a?1:s),c=64,d=s/l;d<c&&(c=32);let u=Math.ceil(s/l/c),f=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:i},{type:12,data:d},{type:12,data:u}],p=bi(e.dataType,l),m=ts(1,l),g=["type"];a&&g.push("type"),o&&g.push("type");let x=v=>{let y=bt("x",e.dataType,e.dims,l),w=[y],b=a?Be("seq_lens",a.dataType,a.dims):void 0;b&&w.push(b);let _=o?Be("total_sequence_length_input",o.dataType,o.dims):void 0;_&&w.push(_);let T=ts(e.dataType),M=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${c}>;
  var<workgroup> thread_sum: array<f32, ${c}>;
  ${v.registerUniforms(M).declareVariables(...w)}
  ${v.mainStart([c,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${xx(b,_,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${c}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${a?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${m}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${m}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${c}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${m}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${m}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${c}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${y.type.value}(${T}(1.0) / ${T}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${m}(x[offset + i]);
        x[offset + i] = ${y.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${a?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${y.type.value}(${T}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${c};${p};${l}`,inputDependencies:g},getShaderSource:x,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:i,z:t*r},programUniforms:f})}},tG=(e,t,r,n,i,s,a,o,l)=>{let c=a+s.kvSequenceLength,d=[s.batchSize,s.numHeads,s.sequenceLength,c],u=e>1&&n,f=s.kvNumHeads?s.kvNumHeads:s.numHeads,p=u?[s.batchSize,f,c,s.headSize]:void 0,m=s.nReps?s.nReps:1,g=s.scale===0?1/Math.sqrt(s.headSize):s.scale,x=Tn(s.headSize),v=s.headSize/x,y=12,w={x:Math.ceil(c/y),y:Math.ceil(s.sequenceLength/y),z:s.batchSize*s.numHeads},b=[{type:12,data:s.sequenceLength},{type:12,data:v},{type:12,data:c},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:1,data:g},{type:12,data:a},{type:12,data:s.kvSequenceLength},{type:12,data:m}],_=u&&n&&Ne.size(n.dims)>0,T=["type","type"];_&&T.push("type"),i&&T.push("type"),o&&T.push("type"),l&&T.push("type");let M=[{dims:d,dataType:t.dataType,gpuDataType:0}];u&&M.push({dims:p,dataType:t.dataType,gpuDataType:0});let k=j=>{let A=Be("q",t.dataType,t.dims,x),R=Be("key",r.dataType,r.dims,x),I=[A,R];if(_){let te=Be("past_key",n.dataType,n.dims,x);I.push(te)}i&&I.push(Be("attention_bias",i.dataType,i.dims));let $=o?Be("seq_lens",o.dataType,o.dims):void 0;$&&I.push($);let F=l?Be("total_sequence_length_input",l.dataType,l.dims):void 0;F&&I.push(F);let V=bt("output",t.dataType,d),G=[V];u&&G.push(bt("present_key",t.dataType,p,x));let H=ts(1,x),B=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${y}u;

  var<workgroup> tileQ: array<${A.type.storage}, ${y*y}>;
  var<workgroup> tileK: array<${A.type.storage}, ${y*y}>;
  ${j.registerUniforms(B).declareVariables(...I,...G)}
  ${j.mainStart([y,y,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${m===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${m===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${xx($,F,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${_&&u?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${u?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${H}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${_&&u?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${u?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${H}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(x){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${x}`)}})()};
        output[outputIdx] = ${V.type.value} (sum * uniforms.alpha) + ${i?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${x};${i!==void 0};${n!==void 0};${e}`,inputDependencies:T},getRunData:()=>({outputs:M,dispatchGroup:w,programUniforms:b}),getShaderSource:k}},rG=(e,t,r,n,i,s,a=void 0,o=void 0)=>{let l=s+i.kvSequenceLength,c=i.nReps?i.nReps:1,d=i.vHiddenSize*c,u=e>1&&n,f=i.kvNumHeads?i.kvNumHeads:i.numHeads,p=u?[i.batchSize,f,l,i.headSize]:void 0,m=[i.batchSize,i.sequenceLength,d],g=12,x={x:Math.ceil(i.vHeadSize/g),y:Math.ceil(i.sequenceLength/g),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:l},{type:12,data:i.vHeadSize},{type:12,data:i.numHeads},{type:12,data:i.headSize},{type:12,data:d},{type:12,data:s},{type:12,data:i.kvSequenceLength},{type:12,data:c}],y=u&&n&&Ne.size(n.dims)>0,w=["type","type"];y&&w.push("type"),a&&w.push("type"),o&&w.push("type");let b=[{dims:m,dataType:t.dataType,gpuDataType:0}];u&&b.push({dims:p,dataType:t.dataType,gpuDataType:0});let _=T=>{let M=Be("probs",t.dataType,t.dims),k=Be("v",r.dataType,r.dims),j=[M,k];y&&j.push(Be("past_value",n.dataType,n.dims));let A=a?Be("seq_lens",a.dataType,a.dims):void 0;a&&j.push(A);let R=o?Be("total_sequence_length_input",o.dataType,o.dims):void 0;o&&j.push(R);let I=[bt("output",t.dataType,m)];u&&I.push(bt("present_value",t.dataType,p));let $=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${g}u;
  var<workgroup> tileQ: array<${M.type.value}, ${g*g}>;
  var<workgroup> tileV: array<${M.type.value}, ${g*g}>;
  ${T.registerUniforms($).declareVariables(...j,...I)}
  ${T.mainStart([g,g,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${c===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${c===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${xx(A,R,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${y&&u?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${u?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${M.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${y&&u?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${u?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:w},getRunData:()=>({outputs:b,dispatchGroup:x,programUniforms:v}),getShaderSource:_}},qv=(e,t,r,n,i,s,a,o,l,c,d=void 0,u=void 0)=>{let f=Math.min(e.outputCount,1+(a?1:0)+(o?1:0)),p=f>1?c.pastSequenceLength:0,m=p+c.kvSequenceLength,g=l&&Ne.size(l.dims)>0?l:void 0,x=[t,r];f>1&&a&&Ne.size(a.dims)>0&&x.push(a),g&&x.push(g),d&&x.push(d),u&&x.push(u);let v=e.compute(tG(f,t,r,a,g,c,p,d,u),{inputs:x,outputs:f>1?[-1,1]:[-1]})[0];e.compute(eG(v,c.batchSize,c.numHeads,p,c.sequenceLength,m,d,u),{inputs:d&&u?[v,d,u]:[v],outputs:[]});let y=[v,n];f>1&&o&&Ne.size(o.dims)>0&&y.push(o),d&&y.push(d),u&&y.push(u),e.compute(rG(f,v,n,o,c,p,d,u),{inputs:y,outputs:f>1?[0,2]:[0]})},nG=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,i=t.inputHiddenSize,s=t.headSize,a=12,o={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],c=[{type:12,data:n},{type:12,data:i},{type:12,data:s},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=u=>{let f=bt("output_q",l[0].dataType,r),p=bt("output_k",l[0].dataType,r),m=bt("output_v",l[0].dataType,r),g=Be("input",l[0].dataType,l[0].dims),x=Be("weight",l[1].dataType,l[1].dims),v=Be("bias",l[2].dataType,l[2].dims),y=g.type.storage,w=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${a}u;
  var<workgroup> tileInput: array<${y}, ${a*a}>;
  var<workgroup> tileWeightQ: array<${y}, ${a*a}>;
  var<workgroup> tileWeightK: array<${y}, ${a*a}>;
  var<workgroup> tileWeightV: array<${y}, ${a*a}>;
  ${u.registerUniforms(w).declareVariables(g,x,v,f,p,m)}
  ${u.mainStart([a,a,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${y}(0);
    var valueK = ${y}(0);
    var valueV = ${y}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:o,programUniforms:c}),getShaderSource:d},{inputs:l,outputs:[-1,-1,-1]})},Mse=(e,t)=>{let r=JW(e.inputs,t),[n,i,s]=nG(e,r);return qv(e,n,i,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),iG,sG,aG,kse,nqe=Ze(()=>{Co(),Rt(),Zt(),On(),Jt(),iG=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,i,s)=>{let a=i.length;if(a!==n.length)throw new Error(`${s}: num dimensions != ${a}`);i.forEach((o,l)=>{if(o!==n[l])throw new Error(`${s}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},sG=(e,t)=>{let{epsilon:r,spatial:n,format:i}=t,s=e[0].dims,a=n?Tn(s[s.length-1]):1,o=i==="NHWC"&&s.length>1?a:1,l=Ne.size(s)/a,c=n,d=c?s.length:s,u=Be("x",e[0].dataType,e[0].dims,a),f=Be("scale",e[1].dataType,e[1].dims,o),p=Be("bias",e[2].dataType,e[2].dims,o),m=Be("inputMean",e[3].dataType,e[3].dims,o),g=Be("inputVar",e[4].dataType,e[4].dims,o),x=bt("y",e[0].dataType,d,a),v=()=>{let w="";if(n)w=`let cOffset = ${s.length===1?"0u":i==="NHWC"?`outputIndices[${s.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")w=`
            ${x.indicesSet("outputIndices","0","0")}
            let cOffset = ${x.indicesToOffset("outputIndices")};`;else{w=`var cIndices = ${f.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let b=1;b<f.rank;b++)w+=`cIndices[${b}] = outputIndices[${b}];`;w+=`let cOffset = ${f.indicesToOffset("cIndices")};`}return w},y=w=>`
  const epsilon = ${r};
  ${w.registerUniform("outputSize","u32").declareVariables(u,f,p,m,g,x)}
  ${w.mainStart()}
  ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${x.offsetToIndices(`global_idx * ${a}`)};
    ${v()}
    let scale = ${f.getByOffset("cOffset")};
    let bias = ${p.getByOffset("cOffset")};
    let inputMean = ${m.getByOffset("cOffset")};
    let inputVar = ${g.getByOffset("cOffset")};
    let x = ${u.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${x.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${a}`,inputDependencies:c?["rank","type","type","type","type"]:void 0},getShaderSource:y,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c?[{type:12,data:l},...St(s)]:[{type:12,data:l}]})}},aG=e=>Cr(e),kse=(e,t)=>{let{inputs:r,outputCount:n}=e,i=aG({...t,outputCount:n});if(qr.webgpu.validateInputContent&&iG(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(sG(r,i))}}),oG,lG,Sse,iqe=Ze(()=>{Zt(),Jt(),oG=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},lG=e=>{let t=e[0].dims,r=e[0].dims[2],n=Ne.size(t)/4,i=e[0].dataType,s=Be("input",i,t,4),a=Be("bias",i,[r],4),o=Be("residual",i,t,4),l=bt("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:c=>`
  const channels = ${r}u / 4;
  ${c.declareVariables(s,a,o,l)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${s.getByOffset("global_idx")}
      + ${a.getByOffset("global_idx % channels")} + ${o.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},Sse=e=>{oG(e.inputs),e.compute(lG(e.inputs))}}),cG,Mr,Pse,Ese,Cse,jse,Ase,Ose,$se,Ise,Nse,uG,Dse,Rse,Lse,Fse,Ug,Bse,tb,zse,Vse,Use,Wse,Gse,Hse,Kse,qse,Xse,Yse,Qse,Zse,Jse,eae,tae,rae,RP,nae,rA,nA,iae,sae,aae,dG,fG,oae,mN=Ze(()=>{Rt(),Zt(),On(),Jt(),cG=(e,t,r,n,i,s,a)=>{let o=Math.ceil(t/4),l="";typeof i=="string"?l=`${i}(a)`:l=i("a");let c=Be("inputData",r,[o],4),d=bt("outputData",n,[o],4),u=[{name:"vec_size",type:"u32"}];return a&&u.push(...a),`
      ${e.registerUniforms(u).declareVariables(c,d)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${c.getByOffset("global_idx")};
    ${d.setByOffset("global_idx",l)}
  }`},Mr=(e,t,r,n,i,s=e.dataType,a,o)=>{let l=[{type:12,data:Math.ceil(Ne.size(e.dims)/4)}];return a&&l.push(...a),{name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:c=>cG(c,Ne.size(e.dims),e.dataType,s,r,n,o),getRunData:c=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(Ne.size(c[0].dims)/64/4)},programUniforms:l})}},Pse=e=>{e.compute(Mr(e.inputs[0],"Abs","abs"))},Ese=e=>{e.compute(Mr(e.inputs[0],"Acos","acos"))},Cse=e=>{e.compute(Mr(e.inputs[0],"Acosh","acosh"))},jse=e=>{e.compute(Mr(e.inputs[0],"Asin","asin"))},Ase=e=>{e.compute(Mr(e.inputs[0],"Asinh","asinh"))},Ose=e=>{e.compute(Mr(e.inputs[0],"Atan","atan"))},$se=e=>{e.compute(Mr(e.inputs[0],"Atanh","atanh"))},Ise=e=>Cr(e),Nse=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(Mr(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},uG=e=>{let t,r,n=e.length>=2&&e[1].data!==0,i=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=i?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=i?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return Cr({min:t,max:r})},Dse=(e,t)=>{let r=t||uG(e.inputs),n=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Clip",i=>`clamp(${i}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},Rse=e=>{e.compute(Mr(e.inputs[0],"Ceil","ceil"))},Lse=e=>{e.compute(Mr(e.inputs[0],"Cos","cos"))},Fse=e=>{e.compute(Mr(e.inputs[0],"Cosh","cosh"))},Ug=e=>Cr(e),Bse=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},tb=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,zse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,tb(t)))},Vse=e=>{e.compute(Mr(e.inputs[0],"Exp","exp"))},Use=e=>{e.compute(Mr(e.inputs[0],"Floor","floor"))},Wse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,tb(t)))},Gse=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},Hse=e=>{e.compute(Mr(e.inputs[0],"Not",t=>`!${t}`))},Kse=e=>{e.compute(Mr(e.inputs[0],"Neg",t=>`-${t}`))},qse=e=>{e.compute(Mr(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},Xse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Yse=e=>{e.compute(Mr(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},Qse=e=>Cr(e),Zse=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Jse=e=>{e.compute(Mr(e.inputs[0],"Sin","sin"))},eae=e=>{e.compute(Mr(e.inputs[0],"Sinh","sinh"))},tae=e=>{e.compute(Mr(e.inputs[0],"Sqrt","sqrt"))},rae=e=>{e.compute(Mr(e.inputs[0],"Tan","tan"))},RP=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,nae=e=>{e.compute(Mr(e.inputs[0],"Tanh",RP))},rA=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${RP("v")};
}
`,nA=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,iae=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"FastGelu",nA,rA(t),void 0,e.inputs[0].dataType))},sae=(e,t)=>{let r=ts(e.inputs[0].dataType);return e.compute(Mr(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},aae=e=>{e.compute(Mr(e.inputs[0],"Log","log"))},dG=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,fG=e=>`quick_gelu_impl(${e})`,oae=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"QuickGelu",fG,dG(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),hG,pG,lae,sqe=Ze(()=>{Zt(),Jt(),mN(),hG=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},pG=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=Be("input",e[0].dataType,e[0].dims,4),n=Be("bias",e[0].dataType,[e[0].dims[2]],4),i=bt("output",e[0].dataType,t,4),s=Ne.size(t)/4,a=bi(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:o=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${o.declareVariables(r,n,i)}

  ${tb(a)}

  ${o.mainStart()}
    ${o.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${i.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},lae=e=>{hG(e.inputs),e.compute(pG(e.inputs))}}),mG,gG,Ja,cae,uae,dae,fae,hae,pae,mae,gae,yae,vae,aqe=Ze(()=>{Rt(),Zt(),Jt(),mG=(e,t,r,n,i,s,a,o,l,c,d,u)=>{let f,p;typeof o=="string"?f=p=(y,w)=>`${o}((${y}),(${w}))`:typeof o=="function"?f=p=o:(f=o.scalar,p=o.vector);let m=bt("outputData",d,n.length,4),g=Be("aData",l,t.length,4),x=Be("bData",c,r.length,4),v;if(i)if(s){let y=Ne.size(t)===1,w=Ne.size(r)===1,b=t.length>0&&t[t.length-1]%4===0,_=r.length>0&&r[r.length-1]%4===0;y||w?v=m.setByOffset("global_idx",p(y?`${g.type.value}(${g.getByOffset("0")}.x)`:g.getByOffset("global_idx"),w?`${x.type.value}(${x.getByOffset("0")}.x)`:x.getByOffset("global_idx"))):v=`
            let outputIndices = ${m.offsetToIndices("global_idx * 4u")};
            let offsetA = ${g.broadcastedIndicesToOffset("outputIndices",m)};
            let offsetB = ${x.broadcastedIndicesToOffset("outputIndices",m)};
            ${m.setByOffset("global_idx",p(a||b?g.getByOffset("offsetA / 4u"):`${g.type.value}(${g.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||_?x.getByOffset("offsetB / 4u"):`${x.type.value}(${x.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else v=m.setByOffset("global_idx",p(g.getByOffset("global_idx"),x.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let y=(w,b,_="")=>{let T=`aData[indexA${b}][componentA${b}]`,M=`bData[indexB${b}][componentB${b}]`;return`
            let outputIndices${b} = ${m.offsetToIndices(`global_idx * 4u + ${b}u`)};
            let offsetA${b} = ${g.broadcastedIndicesToOffset(`outputIndices${b}`,m)};
            let offsetB${b} = ${x.broadcastedIndicesToOffset(`outputIndices${b}`,m)};
            let indexA${b} = offsetA${b} / 4u;
            let indexB${b} = offsetB${b} / 4u;
            let componentA${b} = offsetA${b} % 4u;
            let componentB${b} = offsetB${b} % 4u;
            ${w}[${b}] = ${_}(${f(T,M)});
          `};d===9?v=`
            var data = vec4<u32>(0);
            ${y("data",0,"u32")}
            ${y("data",1,"u32")}
            ${y("data",2,"u32")}
            ${y("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:v=`
            ${y("outputData[global_idx]",0)}
            ${y("outputData[global_idx]",1)}
            ${y("outputData[global_idx]",2)}
            ${y("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(g,x,m)}

        ${u??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${v}
      }`},gG=(e,t,r,n,i,s,a=r.dataType)=>{let o=r.dims.map(g=>Number(g)??1),l=n.dims.map(g=>Number(g)??1),c=!Ne.areEqual(o,l),d=o,u=Ne.size(o),f=!1,p=!1,m=[c];if(c){let g=Up.calcShape(o,l,!1);if(!g)throw new Error("Can't perform binary op on the given tensors");d=g.slice(),u=Ne.size(d);let x=Ne.size(o)===1,v=Ne.size(l)===1,y=o.length>0&&o[o.length-1]%4===0,w=l.length>0&&l[l.length-1]%4===0;m.push(x),m.push(v),m.push(y),m.push(w);let b=1;for(let _=1;_<d.length;_++){let T=o[o.length-_],M=l[l.length-_];if(T===M)b*=T;else break}b%4===0?(p=!0,f=!0):(x||v||y||w)&&(f=!0)}else f=!0;return m.push(f),{name:e,shaderCache:{hint:t+m.map(g=>g.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:g=>mG(g,o,l,d,f,c,p,i,r.dataType,n.dataType,a,s),getRunData:()=>({outputs:[{dims:d,dataType:a}],dispatchGroup:{x:Math.ceil(u/64/4)},programUniforms:[{type:12,data:Math.ceil(Ne.size(d)/4)},...St(o,l,d)]})}},Ja=(e,t,r,n,i,s)=>{e.compute(gG(t,i??"",e.inputs[0],e.inputs[1],r,n,s))},cae=e=>{Ja(e,"Add",(t,r)=>`${t}+${r}`)},uae=e=>{Ja(e,"Div",(t,r)=>`${t}/${r}`)},dae=e=>{Ja(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},fae=e=>{Ja(e,"Mul",(t,r)=>`${t}*${r}`)},hae=e=>{let t=Be("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ja(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},pae=e=>{Ja(e,"Sub",(t,r)=>`${t}-${r}`)},mae=e=>{Ja(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},gae=e=>{Ja(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},yae=e=>{Ja(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},vae=e=>{Ja(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),yG,vG,_G,xG,_ae,xae,oqe=Ze(()=>{Rt(),Zt(),On(),Jt(),yG=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],i=n.dataType,s=n.dims.length;e.forEach((a,o)=>{if(o!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==s)throw new Error("input tensors should have the same shape");a.dims.forEach((l,c)=>{if(c!==t&&l!==n.dims[c])throw new Error("non concat dimensions must match")})}})},vG=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,_G=(e,t)=>{let r=e.length,n=[];for(let i=0;i<r;++i){let s=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?n.push(s):i===0?n.push(`if (inputIndex == ${i}u) { ${s} }`):i===r-1?n.push(`else { ${s} }`):n.push(`else if (inputIndex == ${i}) { ${s} }`)}return n.join(`
`)},xG=(e,t,r,n)=>{let i=Ne.size(r),s=new Array(e.length),a=new Array(e.length),o=0,l=[],c=[],d=[{type:12,data:i}];for(let g=0;g<e.length;++g)o+=e[g].dims[t],s[g]=o,c.push(e[g].dims.length),a[g]=Be(`input${g}`,n,c[g]),l.push("rank"),d.push({type:12,data:s[g]});for(let g=0;g<e.length;++g)d.push(...St(e[g].dims));d.push(...St(r));let u=bt("output",n,r.length),f=u.indicesGet("indices",t),p=Array.from(Array(s.length).keys()).map(g=>`uniforms.sizeInConcatAxis${g}`).join(","),m=g=>`

  ${(()=>{g.registerUniform("outputSize","u32");for(let x=0;x<e.length;x++)g.registerUniform(`sizeInConcatAxis${x}`,"u32");return g.declareVariables(...a,u)})()}

  ${vG(s.length,p)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${u.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${f});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${p});
      ${f} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${_G(a,u)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:m}},_ae=(e,t)=>{let r=e.inputs,n=r[0].dims,i=Ne.normalizeAxis(t.axis,n.length);yG(r,i);let s=n.slice();s[i]=r.reduce((o,l)=>o+(l.dims.length>i?l.dims[i]:0),0);let a=r.filter(o=>Ne.size(o.dims)>0);e.compute(xG(a,i,s,r[0].dataType),{inputs:a})},xae=e=>Cr({axis:e.axis})}),sf,af,of,gN,xf=Ze(()=>{Rt(),Zt(),sf=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},af=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},of=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},gN=e=>{let t=(e==null?void 0:e.activation)||"";if(t==="HardSigmoid"){let[r,n]=(e==null?void 0:e.activation_params)||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=(e==null?void 0:e.activation_params)||[Hie,Kie];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=(e==null?void 0:e.activation_params)||[.01];return{activation:t,alpha:r}}return{activation:t}}}),Pi,bae,yN=Ze(()=>{Pi=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},bae=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),wae,lqe=Ze(()=>{wae=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),gy,vN,_N=Ze(()=>{Rt(),Zt(),Jt(),xf(),gy=(e,t,r,n,i)=>{let s=n-r;return`
      ${Array.from({length:r}).map((a,o)=>`
      if (${Mt(t.shape,o,t.rank)} != 1) {
        ${t.indicesSet(e,o,Mt(i,o+s,n))}
      } else {
        ${t.indicesSet(e,o,0)}
      }`).join("")}
`},vN=(e,t,r,n,i=!1,s)=>{let a=e[0].dims,o=e[1].dims,l=a[a.length-2],c=o[o.length-1],d=a[a.length-1],u=Tn(c),f=Tn(d),p=Tn(l),m=Ne.size(r)/u/p,g=e.length>2,x=n?n.slice(0,-2):r.slice(0,-2),v=[Ne.size(x),l,c],y=[{type:12,data:m},{type:12,data:l},{type:12,data:c},{type:12,data:d}];af(t,y),y.push(...St(x,a,o)),g&&y.push(...St(e[2].dims)),y.push(...St(v));let w=b=>{let _=fN("batch_dims",e[0].dataType,x.length),T=Be("a",e[0].dataType,a.length,f),M=Be("b",e[1].dataType,o.length,u),k=bt("output",e[0].dataType,v.length,u),j=bi(k.type.tensor),A=sf(t,k.type.value,j),R=[T,M],I="";if(g){let V=i?u:1;R.push(Be("bias",e[2].dataType,e[2].dims.length,V)),I=`${i?`value += bias[col / ${V}];`:`value += ${k.type.value}(bias[row + i]);`}`}let $=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];of(t,$);let F=()=>{let V=`var a_data: ${T.type.value};`;for(let G=0;G<f;G++)V+=`
              let b_data${G} = b[(b_offset + (k + ${G}) * uniforms.N + col) / ${u}];`;for(let G=0;G<p;G++){V+=`a_data = a[(a_offset + (row + ${G}) * uniforms.K + k) / ${f}];`;for(let H=0;H<f;H++)V+=`
            values[${G}] = fma(${M.type.value}(a_data${f===1?"":`[${H}]`}), b_data${H}, values[${G}]);
`}return V};return`
  ${b.registerUniforms($).registerInternalVariables(_).declareVariables(...R,k)}
  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${u})) * ${u};
    var index1 = global_idx / (uniforms.N / ${u});
    let stride1 = uniforms.M / ${p};
    let row = (index1 % stride1) * ${p};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${_.offsetToIndices("batch")};`}

    var a_indices: ${T.type.indices};
    ${gy("a_indices",T,T.rank-2,_.rank,"batch_indices")}
    ${T.indicesSet("a_indices",T.rank-2,0)}
    ${T.indicesSet("a_indices",T.rank-1,0)}
    let a_offset = ${T.indicesToOffset("a_indices")};

    var b_indices: ${M.type.indices};
    ${gy("b_indices",M,M.rank-2,_.rank,"batch_indices")}
    ${M.indicesSet("b_indices",M.rank-2,0)}
    ${M.indicesSet("b_indices",M.rank-1,0)}
    let b_offset = ${M.indicesToOffset("b_indices")};
    var values: array<${k.type.value}, ${p}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${f}) {
      ${F()}
    }
    for (var i = 0u; i < ${p}u; i++) {
      var value = values[i];
      ${I}
      ${A}
      let cur_indices = ${k.type.indices}(batch, row + i, col);
      let offset = ${k.indicesToOffset("cur_indices")};
      ${k.setByOffset(`offset / ${u}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${u};${f};${p};${i}`,inputDependencies:g?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:y}),getShaderSource:w}}}),bG,wG,iA,LP,TG,sA,MG,l1,xN=Ze(()=>{Rt(),Zt(),Jt(),xf(),_N(),yN(),bG=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,wG=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,iA=(e,t,r="f32",n,i=!1,s=32,a=!1,o=32)=>{let l=t[1]*e[1],c=t[0]*e[0],d=i?l:s,u=i?s:l,f=d/t[0],p=s/t[1];if(!((i&&f===4&&e[1]===4||!i&&(f===3||f===4))&&d%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${f} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${f} must be 3 or 4.
  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${f}<${r}>, ${d/f}>, ${u}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${c/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${f};
const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${a?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${a?`${Math.ceil(o/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${p};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${bG(i,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${f===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wG(i,f)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},LP=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,TG=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",sA=(e,t,r="f32",n,i=!1,s=32,a=!1,o=32,l=!1)=>{let c=e[1]*t[1],d=e[0]*t[0],u=i?c:s,f=i?s:c;if(!(f%t[1]===0&&u%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${f} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${u} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let p=f/t[1],m=u/t[0],g=s/t[1],x=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${c};
    let globalColStart = i32(workgroupId.x) * ${d};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${f}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${u}; inputCol = inputCol + ${t[0]}) {
          ${LP(i,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${c};

let tileRowA = i32(localId.y) * ${p};
let tileColA = i32(localId.x) * ${m};
let tileRowB = i32(localId.y) * ${g};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${m}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${LP(i,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${g}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${TG(i)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${u}>, ${f}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${a?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${a?`${Math.ceil(o/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${x}
  }
`},MG=(e,t,r,n,i=!1)=>{let[s,a,o,l]=n,c=bi(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Pi(e,c)} {
      var value = ${Pi(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${a.type.indices};
        ${gy("aIndices",a,a.rank-2,s.rank,"batchIndices")}
        ${a.indicesSet("aIndices",a.rank-2,"u32(row)")}
        ${a.indicesSet("aIndices",a.rank-1,"u32(colIn)")}
        value = ${a.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Pi(e,c)} {
      var value = ${Pi(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${o.type.indices};
        ${gy("bIndices",o,o.rank-2,s.rank,"batchIndices")}
        ${o.indicesSet("bIndices",o.rank-2,"u32(row)")}
        ${o.indicesSet("bIndices",o.rank-1,"u32(colIn)")}
        value = ${o.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${Pi(e,c)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${i?"bias[colIn]":`${Pi(e,c)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},l1=(e,t,r,n,i=!1,s)=>{let a=e[0].dims,o=e[1].dims,l=a.slice(0,-2),c=o.slice(0,-2),d=n?n.slice(0,-2):r.slice(0,-2),u=Ne.size(d),f=a[a.length-2],p=a[a.length-1],m=o[o.length-1],g=p%4===0&&m%4===0,x=f<=8?[4,1,1]:[4,4,1],v=[8,8,1],y=[Math.ceil(m/v[0]/x[0]),Math.ceil(f/v[1]/x[1]),Math.ceil(u/v[2]/x[2])],w=g?4:1,b=[...l,f,p/w],_=b.length,T=[...c,p,m/w],M=T.length,k=[u,f,m/w],j=[{type:6,data:f},{type:6,data:m},{type:6,data:p}];af(t,j),j.push(...St(d,b,T));let A=["rank","rank"],R=e.length>2;R&&(j.push(...St(e[2].dims)),A.push("rank")),j.push(...St(k));let I=$=>{let F=d.length,V=fN("batchDims",e[0].dataType,F,1),G=bi(e[0].dataType),H=Be("a",e[0].dataType,_,w),B=Be("b",e[1].dataType,M,w),te=bt("result",e[0].dataType,k.length,w),ae=[H,B];if(R){let _e=i?w:1;ae.push(Be("bias",e[2].dataType,e[2].dims.length,_e))}let z=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];of(t,z);let D=bi(te.type.tensor),K=sf(t,te.type.value,D),oe=MG(w,R,K,[V,H,B,te],i);return`
  ${$.registerUniforms(z).registerInternalVariables(V).declareVariables(...ae,te)}
  ${oe}
  ${g?iA(x,v,G,V):sA(x,v,G,V)}
                   `};return{name:"MatMul",shaderCache:{hint:`${x};${t.activation};${g};${i}`,inputDependencies:A},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:y[0],y:y[1],z:y[2]},programUniforms:j}),getShaderSource:I}}}),kG,Tae,cqe=Ze(()=>{Rt(),sc(),Jt(),xf(),yN(),lqe(),xN(),kG=(e,t,r,n,i=!1,s,a=4,o=4,l=4,c="f32")=>{let d=j=>{switch(j){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${c}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${j} is not supported.`)}},u=j=>{switch(j){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${j} is not supported.`)}},f=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,p=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,m=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",g=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",x=e?"row":"col",v=e?"col":"row",y=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${x} / outWidth;
    let outCol = ${x} % outWidth;

    let WRow = ${v} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${v} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${v} % inChannels;
    var resData = ${Pi(a,c)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${m} && xCol >= 0 && xCol < ${g}) {
      ${f}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${d(a)}
    }
    return resData;`,w=e?t&&n?`
    let col = colIn * ${a};
    ${y}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${y}
    }
    return ${Pi(a,c)}(0.0);`:n&&r?`
    let col = colIn * ${a};
    ${y}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${y}
    }
    return ${Pi(a,c)}(0.0);`,b=e?n&&r?u(o):`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${u(o)}
    }
    return ${Pi(o,c)}(0.0);`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${u(o)}
    }
    return ${Pi(o,c)}(0.0);`,_=Pi(l,c),T=Pi(e?a:o,c),M=Pi(e?o:a,c),k=sf(s,_,c);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${T} {
      ${e?w:b}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${M} {
      ${e?b:w}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${_}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${p}
      ${bae(i)}
      ${k}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Tae=(e,t,r,n,i,s,a,o,l)=>{let c=t.format==="NHWC",d=c?e[0].dims[3]:e[0].dims[1],u=r[0],f=c?r[2]:r[3],p=c?r[1]:r[2],m=c?r[3]:r[1],g=c&&(d%4===0||d%3===0)&&m%4===0,x=c?m:f*p,v=c?f*p:m,y=[8,8,1],w=n<=8?[4,1,1]:[4,4,1],b=[Math.ceil(x/y[0]/w[0]),Math.ceil(v/y[1]/w[1]),Math.ceil(u/y[2]/w[2])];yr("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${b}`);let _=g?c&&d%4!==0?3:4:1,T=y[1]*w[1],M=y[0]*w[0],k=Math.max(y[0]*_,y[1]),j=n%T===0,A=i%M===0,R=s%k===0,I=g?[_,4,4]:[1,1,1],$=[{type:6,data:n},{type:6,data:i},{type:6,data:s},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];af(t,$),$.push(...St(e[0].dims,e[1].dims));let F=["rank","rank"];a&&($.push(...St(e[2].dims)),F.push("rank")),$.push(...St(r));let V=G=>{let H=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];of(t,H);let B=g?4:1,te=bi(e[0].dataType),ae=`
      fn setOutputAtIndex(flatIndex : i32, value : ${g?`vec4<${te}>`:te}) {
        result[flatIndex] = ${g?`vec4<${te}>`:te}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${g?`vec4<${te}>`:te}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${g?"/ 4":""}, value);
      }`,z=Be("x",e[0].dataType,e[0].dims.length,_===3?1:_),D=Be("w",e[1].dataType,e[1].dims.length,B),K=[z,D],oe=bt("result",e[0].dataType,r.length,B);if(a){let _e=Be("bias",e[2].dataType,e[2].dims.length,B);K.push(_e),ae+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${g?`vec4<${te}>`:te} {
          return bias[coords.${c?"w":"y"}${g?"/ 4":""}];
        }`}return`
        ${wae("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${G.registerUniforms(H).declareVariables(...K,oe)}
        ${ae}
        ${kG(c,j,A,R,a,t,I[0],I[1],I[2],te)}
        ${g?iA(w,y,te,void 0,!c,k):sA(w,y,te,void 0,!c,k,!1,void 0,o)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${_};${g};${j};${A};${R};${T};${M};${k}`,inputDependencies:F},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:b[0],y:b[1],z:b[2]},programUniforms:$}),getShaderSource:V}}}),SG,FP,Tg,PG,BP,EG,Mae,kae,uqe=Ze(()=>{Rt(),sc(),Zt(),Jt(),xf(),yN(),SG=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},FP=e=>typeof e=="number"?[e,e,e]:e,Tg=(e,t)=>t<=1?e:e+(e-1)*(t-1),PG=(e,t,r,n=1)=>{let i=Tg(t,n);return Math.floor((e[0]*(r-1)-r+i)/2)},BP=(e,t,r,n,i)=>{i==null&&(i=PG(e,t[0],n[0]));let s=[0,0,0,r];for(let a=0;a<3;a++)e[a]+2*i>=t[a]&&(s[a]=Math.trunc((e[a]-t[a]+2*i)/n[a]+1));return s},EG=(e,t,r,n,i,s,a,o,l,c)=>{let d,u,f,p;if(e==="VALID"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e};let m=BP([t,r,n,1],[o,l,c],1,[i,s,a],e);u=m[0],f=m[1],p=m[2]}else if(Array.isArray(e)){if(!e.every((g,x,v)=>g===v[0]))throw Error(`Unsupported padding parameter: ${e}`);d={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let m=BP([t,r,n,1],[o,l,c],1,[i,s,a],e[0]);u=m[0],f=m[1],p=m[2]}else if(e==="SAME_UPPER"){u=Math.ceil(t/i),f=Math.ceil(r/s),p=Math.ceil(n/a);let m=(u-1)*i+o-t,g=(f-1)*s+l-r,x=(p-1)*a+c-n,v=Math.floor(m/2),y=m-v,w=Math.floor(g/2),b=g-w,_=Math.floor(x/2),T=x-_;d={top:w,bottom:b,left:_,right:T,front:v,back:y}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:u,outHeight:f,outWidth:p}},Mae=(e,t,r,n,i,s=!1,a="channelsLast")=>{let o,l,c,d,u;if(a==="channelsLast")[o,l,c,d,u]=e;else if(a==="channelsFirst")[o,u,l,c,d]=e;else throw new Error(`Unknown dataFormat ${a}`);let[f,,p,m,g]=t,[x,v,y]=FP(r),[w,b,_]=FP(n),T=Tg(p,w),M=Tg(m,b),k=Tg(g,_),{padInfo:j,outDepth:A,outHeight:R,outWidth:I}=EG(i,l,c,d,x,v,y,T,M,k),$=s?f*u:f,F=[0,0,0,0,0];return a==="channelsFirst"?F=[o,$,A,R,I]:a==="channelsLast"&&(F=[o,A,R,I,$]),{batchSize:o,dataFormat:a,inDepth:l,inHeight:c,inWidth:d,inChannels:u,outDepth:A,outHeight:R,outWidth:I,outChannels:$,padInfo:j,strideDepth:x,strideHeight:v,strideWidth:y,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:T,effectiveFilterHeight:M,effectiveFilterWidth:k,dilationDepth:w,dilationHeight:b,dilationWidth:_,inShape:e,outShape:F,filterShape:t}},kae=(e,t,r,n,i,s)=>{let a=s==="channelsLast";a?e[0].dims[3]:e[0].dims[1];let o=[64,1,1],l={x:r.map((x,v)=>v)},c=[Math.ceil(SG(l.x.map(x=>r[x]))/o[0]),1,1];yr("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${c}`);let d=1,u=Ne.size(r),f=[{type:12,data:u},{type:12,data:n},{type:12,data:i},{type:12,data:t.strides},{type:12,data:t.dilations}];af(t,f),f.push(...St(e[0].dims,e[1].dims));let p=["rank","rank"],m=e.length===3;m&&(f.push(...St(e[2].dims)),p.push("rank")),f.push(...St(r));let g=x=>{let v=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:i.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];of(t,v);let y=1,w=bi(e[0].dataType),b=Be("x",e[0].dataType,e[0].dims.length,d),_=Be("W",e[1].dataType,e[1].dims.length,y),T=[b,_],M=bt("result",e[0].dataType,r.length,y),k="";if(m){let R=Be("bias",e[2].dataType,e[2].dims.length,y);T.push(R),k+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${w} {
          return bias[${a?Mt("coords",4,5):Mt("coords",1,5)}];
        }`}let j=Pi(d,w),A=sf(t,j,w);return`
            ${k}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${b.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${_.getByIndices("aIndices")};
            }
          ${x.registerUniforms(v).declareVariables(...T,M)}
          ${x.mainStart()}
          ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${M.offsetToIndices("global_idx")};
              let batch = ${Mt("coords",0,b.rank)};
              let d2 = ${a?Mt("coords",b.rank-1,b.rank):Mt("coords",1,b.rank)};
              let xFRCCorner = vec3<u32>(${a?Mt("coords",1,b.rank):Mt("coords",2,b.rank)},
              ${a?Mt("coords",2,b.rank):Mt("coords",3,b.rank)},
              ${a?Mt("coords",3,b.rank):Mt("coords",4,b.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${a?Mt("uniforms.x_shape",1,b.rank):Mt("uniforms.x_shape",2,b.rank)};
              let xShapeZ = ${a?Mt("uniforms.x_shape",2,b.rank):Mt("uniforms.x_shape",3,b.rank)};
              let xShapeW = ${a?Mt("uniforms.x_shape",3,b.rank):Mt("uniforms.x_shape",4,b.rank)};
              let xShapeU = ${a?Mt("uniforms.x_shape",4,b.rank):Mt("uniforms.x_shape",1,b.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${a?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${a?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${a?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${a?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${m?"value = value + getBiasByOutputCoords(coords)":""};
              ${A}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${a};${d};${m}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:c[0],y:c[1],z:c[2]},programUniforms:f}),getShaderSource:g}}}),Sae,Pae,dqe=Ze(()=>{Rt(),Zt(),Jt(),xf(),Sae=(e,t,r,n)=>{let i=e.length>2,s=i?"value += b[output_channel];":"",a=e[0].dims,o=e[1].dims,l=t.format==="NHWC",c=l?r[3]:r[1],d=c/t.group,u=l&&d>=4?Tn(c):1,f=Ne.size(r)/u,p=[{type:12,data:f},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:d}];af(t,p),p.push(...St(a,[o[0],o[1],o[2],o[3]/u]));let m=i?["rank","rank","rank"]:["rank","rank"];p.push(...St([r[0],r[1],r[2],r[3]/u]));let g=x=>{let v=bt("output",e[0].dataType,r.length,u),y=bi(v.type.tensor),w=sf(t,v.type.value,y),b=Be("x",e[0].dataType,a.length),_=Be("w",e[1].dataType,o.length,u),T=[b,_];i&&T.push(Be("b",e[2].dataType,e[2].dims,u));let M=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];of(t,M);let k=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${b.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${_.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${b.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${_.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${x.registerUniforms(M).declareVariables(...T,v)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${v.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${u} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${v.type.value} = ${v.type.value}(0);
    ${k}
    ${s}
    ${w}
    ${v.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${u}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:g}},Pae=(e,t,r,n)=>{let i=e.length>2,s=Tn(r[3]),a=Tn(r[2]),o=Ne.size(r)/s/a,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/s],c=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/s],d=[r[0],r[1],r[2],r[3]/s],u=[{type:12,data:o},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];af(t,u),u.push(...St(l,c,d));let f=(a-1)*t.strides[1]+c[1],p=m=>{let g=bt("output",e[0].dataType,d.length,s),x=bi(g.type.tensor),v=sf(t,g.type.value,x),y=Be("x",e[0].dataType,l.length,s),w=Be("w",e[1].dataType,c.length,s),b=[y,w];i&&b.push(Be("b",e[2].dataType,e[2].dims,s));let _=i?"value += b[output_channel];":"",T=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return of(t,T),`
  ${m.registerUniforms(T).declareVariables(...b,g)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${a}u;
    let col = (index1 % width1) * ${a}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${y.type.value}, ${f}>;
    var values: array<${g.type.value}, ${a}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${c[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${f}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${y.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${y.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${c[1]}; w_width++) {
          let w_val = ${w.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${a}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${a}u; i++) {
      var value = values[i];
      ${_}
      ${v}
      ${g.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${s};${a};${f};${c[0]};${c[1]}`,inputDependencies:i?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:u}),getShaderSource:p}}}),CG,bx,jG,wx,aA,zP,AG,OG,oA,fqe=Ze(()=>{Zt(),cqe(),uqe(),xN(),dqe(),xf(),_N(),$u(),CG=(e,t,r,n,i,s)=>{let a=e[0],o=e.slice(s?1:2,s?3:4),l=o.length,c=t[0],d=t.slice(2).map((f,p)=>f+(f-1)*(r[p]-1)),u=o.map((f,p)=>f+n[p]+n[p+l]).map((f,p)=>Math.floor((f-d[p]+i[p])/i[p]));return u.splice(0,0,a),u.splice(s?3:1,0,c),u},bx=[2,3,1,0],jG=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},wx=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let s=2;s<t[1].dims.length;++s)r[s-2]===0&&(r[s-2]=t[1].dims[s]);let n=e.pads.slice();a1.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n}),i},aA=e=>{let t=gN(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,s=e.group,a=e.kernel_shape,o=e.pads,l=e.strides,c=e.w_is_const();return{autoPad:n,format:r,dilations:i,group:s,kernelShape:a,pads:o,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},zP=(e,t,r,n)=>{let i=r.format==="NHWC",s=CG(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,i);if(r.group!==1){let T=[t[0]];if(i){let M=e.kernelCustomData.wT??e.compute(ca(t[1],bx),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=M),T.push(M)}else T.push(t[1]);t.length===3&&T.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(Pae(T,r,s,n),{inputs:T}):e.compute(Sae(T,r,s,n),{inputs:T});return}let a=t.length===3,o=t[0].dims[i?1:2],l=t[0].dims[i?2:3],c=t[0].dims[i?3:1],d=t[1].dims[2],u=t[1].dims[3],f=s[i?1:2],p=s[i?2:3],m=s[i?3:1],g=i&&d===o&&u===l&&r.pads[0]===0&&r.pads[1]===0;if(g||d===1&&u===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let T=s[0],M,k,j,A=[];if(i){let $=e.kernelCustomData.wT??e.compute(ca(t[1],bx),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=$),g){let F=o*l*c;M=t[0].reshape([1,T,F]),k=$.reshape([1,F,m]),j=[1,T,m]}else M=t[0].reshape([T,o*l,c]),k=$.reshape([1,c,m]),j=[T,f*p,m];A.push(M),A.push(k)}else M=t[0].reshape([T,c,o*l]),k=t[1].reshape([1,m,c]),j=[T,m,f*p],A.push(k),A.push(M);a&&A.push(t[2]);let R=j[2],I=A[0].dims[A[0].dims.length-1];R<8&&I<8?e.compute(vN(A,r,s,j,i,n),{inputs:A}):e.compute(l1(A,r,s,j,i,n),{inputs:A});return}let x=!0,v=e.kernelCustomData.wT??e.compute(ca(t[1],bx),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=v);let y=[t[0],v];a&&y.push(t[2]);let w=i?f*p:m,b=i?m:f*p,_=d*u*c;e.compute(Tae(y,r,s,w,b,_,a,x,n),{inputs:y})},AG=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),a=[1].concat(t.dilations),o=[1].concat(t.kernelShape),l=wx({...t,pads:i,strides:s,dilations:a,kernelShape:o},n);zP(e,n,l,c=>r?[c[0],c[2],c[3]]:[c[0],c[1],c[3]])},OG=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",i=wx(r,t),s=r.autoPad==="NOTSET"?r.pads:r.autoPad,a=Mae(t[0].dims,t[1].dims,r.strides,r.dilations,s,!1,n);e.compute(kae(t,i,a.outShape,[a.filterDepth,a.filterHeight,a.filterWidth],[a.padInfo.front,a.padInfo.top,a.padInfo.left],n))},oA=(e,t)=>{if(jG(e.inputs,t),e.inputs[0].dims.length===3)AG(e,t);else if(e.inputs[0].dims.length===5)OG(e,e.inputs,t);else{let r=wx(t,e.inputs);zP(e,e.inputs,r)}}}),Eae,hqe=Ze(()=>{Rt(),sc(),Zt(),Jt(),Eae=(e,t,r)=>{let n=e.length>2,i=t.outputShape,s=t.format==="NHWC",a=t.group,o=e[1].dims,l=o[2]/a,c=o[3],d=s?Tn(l):1,u=s&&c===1&&l>=4,f=u?Math.floor(l/4)*4:Math.floor(l/d)*d,p=l-f,m=s?Tn(c):1,g=s?c===1?d:m:1,x=Ne.size(i)/m,v=[Math.ceil(x/64),1,1];yr("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${v}`);let y=["rank","rank"],w=[t.strides[0],t.strides[1]],b=[t.kernelShape[s?1:2],t.kernelShape[s?2:3]],_=[t.dilations[0],t.dilations[1]],T=[b[0]+(t.dilations[0]<=1?0:(t.kernelShape[s?1:2]-1)*(t.dilations[0]-1)),b[1]+(t.dilations[1]<=1?0:(t.kernelShape[s?2:3]-1)*(t.dilations[1]-1))],M=[T[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),T[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],k=[{type:12,data:x},{type:12,data:w},{type:12,data:b},{type:12,data:_},{type:12,data:T},{type:6,data:M},{type:12,data:f},{type:12,data:l},{type:12,data:c},...St(e[0].dims,e[1].dims)];n&&(k.push(...St(e[2].dims)),y.push("rank")),k.push(...St(i));let j=A=>{let R=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:w.length},{name:"filter_dims",type:"u32",length:b.length},{name:"dilations",type:"u32",length:b.length},{name:"effective_filter_dims",type:"u32",length:T.length},{name:"pads",type:"i32",length:M.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],I=bi(e[0].dataType),$=s?1:2,F=s?2:3,V=s?3:1,G=Be("W",e[1].dataType,e[1].dims.length,g),H=Be("Dy",e[0].dataType,e[0].dims.length,d),B=[H,G];n&&B.push(Be("bias",e[2].dataType,[i[V]].length,m));let te=bt("result",e[0].dataType,i.length,m),ae=()=>{let K="";if(u)d===4?K+=`
        let xValue = ${H.getByOffset("x_offset")};
        let wValue = ${G.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:d===2?K+=`
          dotProd = dotProd + dot(vec4<${I}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}), vec4<${I}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:d===1&&(K+=`
          dotProd = dotProd + dot(vec4<${I}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}, ${H.getByOffset("x_offset + 2u")}, ${H.getByOffset("x_offset + 3u")}), vec4<${I}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}, ${G.getByOffset("w_offset + 2u")}, ${G.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(K+=`
                  let xValue = ${s?H.getByOffset(`${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${d}`):H.get("batch","inputChannel","idyR","idyC")};
        `,d===1)K+=`
          let w_offset = ${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${G.getByOffset(`w_offset / ${g}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let oe=0;oe<d;oe++)K+=`
            let wValue${oe} = ${G.getByOffset(`${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${oe}, wOutChannel)`)} / ${g}`)};
            dotProd = dotProd + xValue[${oe}] * wValue${oe};`;return K},z=()=>{if(p===0)return"";if(!u)throw new Error(`packInputAs4 ${u} is not true.`);let K="";if(d===1){K+="dotProd = dotProd";for(let oe=0;oe<p;oe++)K+=`
            + ${H.getByOffset(`x_offset + ${oe}`)} * ${G.getByOffset(`w_offset + ${oe}`)}`;K+=";"}else if(d===2){if(p!==2)throw new Error(`Invalid inputChannelsRemainder ${p}.`);K+=`
          let xValue = ${H.getByOffset("x_offset")};
          let wValue = ${G.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return K},D=`
            let outputIndices = ${te.offsetToIndices(`global_idx * ${m}`)};
            let batch = ${te.indicesGet("outputIndices",0)};
            let d1 = ${te.indicesGet("outputIndices",V)};
            let r = ${te.indicesGet("outputIndices",$)};
            let c = ${te.indicesGet("outputIndices",F)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${te.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${I}(dyRCorner) + ${I}(wR)) / ${I}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${I}(uniforms.Dy_shape[${$}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${I}(dyCCorner) + ${I}(wC)) / ${I}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${I}(uniforms.Dy_shape[${F}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${u?`
                var x_offset = ${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${d};
                var w_offset = ${G.indicesToOffset(`${G.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${g};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${u?4:d}) {
                  ${ae()}
                  inputChannel = inputChannel + ${u?4:d};
                }
                ${z()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${m}]`:""};
            ${te.setByOffset("global_idx","value")};
          `;return`
    ${A.registerUniforms(R).declareVariables(...B,te)}
      ${A.mainStart()}
      ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${D}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${d}${g}${m}${u}${p}`,inputDependencies:y},getRunData:()=>({dispatchGroup:{x:v[0],y:v[1],z:v[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:k}),getShaderSource:j}}}),$G,IG,NG,VP,Cae,DG,UP,RG,jae,pqe=Ze(()=>{hqe(),xf(),$u(),$G=(e,t,r,n,i,s)=>(e-1)*t+r+(n-1)*i+1-s,IG=(e,t,r,n,i)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=s,r[i]=e-s):t==="SAME_LOWER"&&(r[n]=e-s,r[i]=s)},NG=(e,t,r,n,i,s,a,o,l,c)=>{let d=e.length-2,u=c.length===0;l.length<d&&l.push(...Array(d-l.length).fill(0));let f=e[0],p=t[o?3:1]*i;for(let m=0,g=e.length-d-(o?1:0);m<d;++m,++g){let x=e[g],v=u?x*a[m]:c[m],y=$G(x,a[m],s[m],t[g],r[m],v);IG(y,n,s,m,m+d),u&&c.push(a[m]*(x-1)+l[m]+(t[g]-1)*r[m]+1-s[m]-s[m+d])}c.splice(0,0,f),c.splice(o?3:1,0,p)},VP=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((u,f)=>u*f,1)===0){r.length=0;for(let u=2;u<t[1].dims.length;++u)r.push(t[1].dims[u])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let i=e.pads.slice(),s=e.outputShape.slice(),a=e.outputPadding.slice(),o=t[0].dims,l=e.dilations.slice();if(l.reduce((u,f)=>u+f,0)===0){let u=t[0].dims.length-2;l=new Array(u).fill(1)}let c=e.strides.slice();if(c.reduce((u,f)=>u+f,0)===0){let u=t[0].dims.length-2;c=new Array(u).fill(1)}NG(o,r,l,e.autoPad,e.group,i,c,n,a,s);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:s,dilations:l,strides:c}),d},Cae=e=>{let t=gN(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,s=e.group,a=e.kernelShape,o=e.pads,l=e.strides,c=e.wIsConst(),d=e.outputPadding,u=e.outputShape;return{autoPad:n,format:r,dilations:i,group:s,kernelShape:a,outputPadding:d,outputShape:u,pads:o,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},DG=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((a,o)=>a+o,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((a,o)=>a+o,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((a,o)=>a+o,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((a,o)=>a+o,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},UP=(e,t,r,n)=>{let i=e.kernelCustomData.wT??e.compute(ca(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=i);let s=[t[0],i];t.length===3&&s.push(t[2]),e.compute(Eae(s,r,n),{inputs:s})},RG=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let o=t.pads;o.length===0&&(o=[0,0]),o=[0,o[0],0,o[1]],a=[1].concat(a),s=[1].concat(s),i=[1].concat(i);let l=t.outputPadding;l=[0].concat(l);let c=VP({...t,pads:o,strides:a,dilations:s,kernelShape:i,outputPadding:l},n);UP(e,n,c,d=>r?[d[0],d[2],d[3]]:[d[0],d[1],d[3]])},jae=(e,t)=>{if(DG(e.inputs,t),e.inputs[0].dims.length===3)RG(e,t);else{let r=VP(t,e.inputs);UP(e,e.inputs,r)}}}),LG,Aae,Oae,mqe=Ze(()=>{Rt(),Zt(),On(),Jt(),LG=(e,t,r,n)=>{let i=Ne.size(t),s=t.length,a=Be("input",e,s),o=bt("output",e,s),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),c=Ne.normalizeAxis(l,s),d=u=>{let f=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,p=Mt("uniforms.input_shape","uniforms.axis",s),m=n.reverse?f+(n.exclusive?" + 1":""):"0",g=n.reverse?p:f+(n.exclusive?"":" + 1");return`
                ${u.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,o)}
                ${u.mainStart()}
                  ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${o.offsetToIndices("global_idx")};
                  var sum = ${o.type.value}(0);
                  let first : i32 = ${m};
                  let last : i32 = ${g};
                  for (var i : i32 = first; i < last; i++) {
                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${a.getByIndices("inputIndices")};
                  }
                  ${o.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:c},...St(t,t)]}),getShaderSource:d}},Aae=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,i=e.inputs[1];e.compute(LG(n,r,i,t),{inputs:[0]})},Oae=e=>{let t=e.exclusive===1,r=e.reverse===1;return Cr({exclusive:t,reverse:r})}}),FG,BG,zG,$ae,Iae,gqe=Ze(()=>{Rt(),Zt(),On(),Jt(),FG=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},BG=(e,t,r,n)=>{let i=[];i.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let s=0;s<t;++s)i.push(r.indicesSet("a",e[s],`i[${s}]`));return i.push("return a;}"),i.join(`
`)},zG=(e,t)=>{let r,n,i,s,a,o,l=t.format==="NHWC",c=t.blocksize,d=t.mode==="DCR";l?([r,n,i,s]=e.dims,a=d?[r,n,i,c,c,s/c**2]:[r,n,i,s/c**2,c,c],o=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,i,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,c,c,s/c**2,n,i]:[r,s/c**2,c,c,n,i],o=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let u=e.reshape(a),f=u.dims.length,p=e.dataType,m=Be("a",p,f),g=bt("output",p,f),x=v=>`
  ${v.registerUniform("output_size","u32").declareVariables(m,g)}

  ${BG(o,f,m,g)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${g.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${g.setByOffset("global_idx",m.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:v=>{let y=l?[r,n*c,i*c,s/c**2]:[r,s/c**2,n*c,i*c],w=Ne.size(y),b=u.dims,_=Ne.sortBasedOnPerm(b,o);return{outputs:[{dims:y,dataType:v[0].dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},...St(b,_)]}},getShaderSource:x}},$ae=(e,t)=>{FG(e.inputs),e.compute(zG(e.inputs[0],t))},Iae=e=>Cr({blocksize:e.blocksize,mode:e.mode,format:e.format})}),Tx,Mg,WP,VG,UG,WG,GG,GP,HG,Nae,Dae,yqe=Ze(()=>{Rt(),Zt(),On(),Jt(),Tx="[a-zA-Z]|\\.\\.\\.",Mg="("+Tx+")+",WP="^"+Mg+"$",VG="("+Mg+",)*"+Mg,UG="^"+VG+"$",WG=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},GG=class{constructor(e,t){var i;this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp(UG)))throw new Error("Invalid LHS term");if(r.split(",").forEach((s,a)=>{let o=e[a].dims.slice();if(!s.match(RegExp(WP)))throw new Error("Invalid LHS term");let l=this.processTerm(s,!0,o,a);this.lhs.push(l)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([s,a])=>a.count===1||s==="...").map(([s])=>s).join("");else if(!n.match(RegExp(Mg)))throw new Error("Invalid RHS");(i=n.match(RegExp(Tx,"g")))==null||i.forEach(s=>{if(s==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let a=this.symbolToInfo.get(s);if(a===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(a.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let i=r.length,s=!1,a=[],o=0;if(!e.match(RegExp(WP))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(Tx,"g")),c=new WG(n);return l==null||l.forEach((d,u)=>{if(d==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let f=i-l.length+1;if(f<0)throw new Error("Ellipsis out of bounds");if(a=r.slice(o,o+f),this.hasEllipsis){if(this.ellipsisDims.length!==a.length||this.ellipsisDims.toString()!==a.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=a;else throw new Error("Ellipsis must be specified in the LHS");for(let p=0;p<a.length;p++){let m=String.fromCharCode(48+p);c.addSymbol(m,u+p),this.addSymbol(m,r[o++],n)}}else c.addSymbol(d,u+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(d,r[o++],n)}),c}},GP=e=>e+"_max",HG=(e,t,r,n)=>{let i=e.map(c=>c.length).map((c,d)=>Be(`input${d}`,t,c)),s=Ne.size(n),a=bt("output",t,n.length),o=[...r.symbolToInfo.keys()].filter(c=>!r.rhs.symbolToIndices.has(c)),l=c=>{let d=[],u="var prod = 1.0;",f="var sum = 0.0;",p="sum += prod;",m=[],g=[],x=[],v=[],y=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((b,_)=>{var T;if(r.rhs.symbolToIndices.has(_)){let M=(T=r.rhs.symbolToIndices.get(_))==null?void 0:T[0];M!==void 0&&r.lhs.forEach((k,j)=>{if(b.inputIndices.includes(j)){let A=k.symbolToIndices.get(_);if(A===void 0)throw new Error("Invalid symbol error");A.forEach(R=>{d.push(`${i[j].indicesSet(`input${j}Indices`,R,a.indicesGet("outputIndices",M))}`)})}})}else r.lhs.forEach((M,k)=>{if(b.inputIndices.includes(k)){let j=M.symbolToIndices.get(_);if(j===void 0)throw new Error("Invalid symbol error");j.forEach(A=>{m.push(`${i[k].indicesSet(`input${k}Indices`,A,`${_}`)}`)}),v.push(`prod *= ${i[k].getByIndices(`input${k}Indices`)};`)}}),g.push(`for(var ${_}: u32 = 0; ${_} < uniforms.${GP(_)}; ${_}++) {`),x.push("}")});let w=y?[...d,`let sum = ${i.map((b,_)=>b.getByIndices(`input${_}Indices`)).join(" * ")};`]:[...d,f,...g,...m,u,...v,p,...x];return`
            ${c.registerUniforms(o.map(b=>({name:`${GP(b)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...i,a)}

            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${a.offsetToIndices("global_idx")};
            ${i.map((b,_)=>`var input${_}Indices: ${i[_].type.indices};`).join(`
`)}
            ${w.join(`
`)};
            ${a.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let c=o.filter(u=>r.symbolToInfo.has(u)).map(u=>{var f;return{type:12,data:((f=r.symbolToInfo.get(u))==null?void 0:f.dimValue)||0}});c.push({type:12,data:s});let d=e.map((u,f)=>[...St(u)]).reduce((u,f)=>u.concat(f),c);return d.push(...St(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:d}},getShaderSource:l}},Nae=(e,t)=>{let r=new GG(e.inputs,t.equation),n=r.outputDims,i=e.inputs.map((s,a)=>s.dims);e.compute(HG(i,e.inputs[0].dataType,r,n))},Dae=e=>{let t=e.equation.replace(/\s+/g,"");return Cr({equation:t})}}),KG,HP,qG,XG,Rae,vqe=Ze(()=>{Rt(),Zt(),Jt(),KG=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;n<r.length&&i<t.length;++n,++i)if(r[n]!==t[i]&&r[n]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},HP=(e,t)=>{let r=e.length-t.length,n=[];for(let i=0;i<r;++i)n.push(e[i]);for(let i=0;i<t.length;++i)n.push(t[i]===1?e[i+r]:t[i]);return n},qG=(e,t)=>e.length>t.length?HP(e,t):HP(t,e),XG=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=qG(t,r),i=e[0].dataType,s=i===9||Ne.size(t)===1,a=i===9||t.length>0&&t[t.length-1]%4===0?4:1,o=s||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(Ne.size(n)/o),c=u=>{let f=Be("input",i,t.length,a),p=bt("output",i,n.length,o),m;if(i===9){let g=(x,v,y="")=>`
          let outputIndices${v} = ${p.offsetToIndices(`outputOffset + ${v}u`)};
          let offset${v} = ${f.broadcastedIndicesToOffset(`outputIndices${v}`,p)};
          let index${v} = offset${v} / 4u;
          let component${v} = offset${v} % 4u;
          ${x}[${v}] = ${y}(${f.getByOffset(`index${v}`)}[component${v}]);
        `;m=`
        let outputOffset = global_idx * ${o};
        var data = vec4<u32>(0);
        ${g("data",0,"u32")}
        ${g("data",1,"u32")}
        ${g("data",2,"u32")}
        ${g("data",3,"u32")}
        ${p.setByOffset("global_idx","data")}
      }`}else m=`
        let outputIndices = ${p.offsetToIndices(`global_idx * ${o}`)};
        let inputOffset = ${f.broadcastedIndicesToOffset("outputIndices",p)};
        let data = ${p.type.value}(${f.getByOffset(`inputOffset / ${a}`)});
        ${p.setByOffset("global_idx","data")}
      }`;return`
    ${u.registerUniform("vec_size","u32").declareVariables(f,p)}
    ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${m}`},d=[{type:12,data:l},...St(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${a}${o}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d})}},Rae=e=>{KG(e.inputs),e.compute(XG(e.inputs),{inputs:[0]})}}),YG,Lae,_qe=Ze(()=>{Rt(),Zt(),Jt(),mN(),YG=e=>{let t=e[0].dataType,r=Ne.size(e[0].dims),n=Ne.size(e[1].dims),i=n%4===0,s=a=>{let o=Be("x",t,[1],4),l=Be("bias",t,[1],4),c=bt("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],u=p=>`
      let bias${p}_offset: u32 = (global_idx * 4 + ${p}) % uniforms.bias_size;
      let bias${p} = ${l.getByOffset(`bias${p}_offset / 4`)}[bias${p}_offset % 4];`,f=i?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${u(0)}${u(1)}${u(2)}${u(3)}
      let bias = ${o.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(o,l,c)}

    ${rA(ts(t))}

    ${a.mainStart(Wp)}
      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${o.getByOffset("global_idx")};
      ${f}
      let x_in = x + bias;
      ${c.setByOffset("global_idx",nA("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/Wp/4)}})}},Lae=e=>{e.inputs.length<2||Ne.size(e.inputs[1].dims)===0?iae(e):e.compute(YG(e.inputs))}}),QG,ZG,Fae,Bae,xqe=Ze(()=>{Rt(),Zt(),On(),Jt(),QG=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},ZG=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ne.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(s,1,...n);let o=r[s],l=e[0].dataType===9?4:1,c=Math.ceil(Ne.size(a)/l),d=[{type:12,data:c},{type:6,data:o},{type:12,data:s},...St(e[0].dims,e[1].dims,a)],u=f=>{let p=Be("data",e[0].dataType,e[0].dims.length,l),m=Be("inputIndices",e[1].dataType,e[1].dims.length),g=bt("output",e[0].dataType,a.length,l),x=y=>{let w=n.length,b=`var indicesIndices${y}  = ${m.type.indices}(0);`;for(let _=0;_<w;_++)b+=`${w>1?`indicesIndices${y}[${_}]`:`indicesIndices${y}`} = ${a.length>1?`outputIndices${y}[uniforms.axis + ${_}]`:`outputIndices${y}`};`;b+=`
          var idx${y} = ${m.getByIndices(`indicesIndices${y}`)};
          if (idx${y} < 0) {
            idx${y} = idx${y} + uniforms.axisDimLimit;
          }
          var dataIndices${y} : ${p.type.indices};
        `;for(let _=0,T=0;_<i;_++)_===s?(b+=`${i>1?`dataIndices${y}[${_}]`:`dataIndices${y}`} = u32(idx${y});`,T+=w):(b+=`${i>1?`dataIndices${y}[${_}]`:`dataIndices${y}`} = ${a.length>1?`outputIndices${y}[${T}]`:`outputIndices${y}`};`,T++);return b},v;if(e[0].dataType===9){let y=(w,b,_="")=>`
          let outputIndices${b} = ${g.offsetToIndices(`outputOffset + ${b}u`)};
          ${x(b)};
          let offset${b} = ${p.indicesToOffset(`dataIndices${b}`)};
          let index${b} = offset${b} / 4u;
          let component${b} = offset${b} % 4u;
          ${w}[${b}] = ${_}(${p.getByOffset(`index${b}`)}[component${b}]);
        `;v=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${y("value",0,"u32")}
        ${y("value",1,"u32")}
        ${y("value",2,"u32")}
        ${y("value",3,"u32")}
        ${g.setByOffset("global_idx","value")}
      `}else v=`
      let outputIndices = ${g.offsetToIndices("global_idx")};
      ${x("")};
      let value = ${p.getByIndices("dataIndices")};
      ${g.setByOffset("global_idx","value")};
      `;return`
      ${f.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(p,m,g)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${v}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:d}),getShaderSource:u}},Fae=e=>Cr({axis:e.axis}),Bae=(e,t)=>{let r=e.inputs;QG(r),e.compute(ZG(e.inputs,t))}}),JG,zae,Vae,bqe=Ze(()=>{Rt(),Zt(),Jt(),JG=(e,t,r,n,i,s,a,o,l)=>{let c=[{type:12,data:s},{type:12,data:n},{type:12,data:i},{type:12,data:r},{type:12,data:a},{type:12,data:o},{type:12,data:l}],d=[s];c.push(...St(t.dims,d));let u=f=>{let p=Be("indices_data",t.dataType,t.dims.length),m=bt("input_slice_offsets_data",12,1,1),g=[p,m],x=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:i.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${f.registerUniforms(x).declareVariables(...g)}
  ${f.mainStart()}
    ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${i.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${i.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:d,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:c}),getShaderSource:u},{inputs:[t],outputs:[-1]})[0]},zae=(e,t)=>{let r=e.inputs,n=r[0].dims,i=r[0].dataType,s=r[1].dims,a=s[s.length-1],o=Ne.sizeToDimension(s,s.length-1),l=Ne.sizeFromDimension(n,t.batchDims+a),c=Ne.sizeToDimension(n,t.batchDims),d=Ne.sizeFromDimension(n,t.batchDims),u=o/c,f=new Array(a),p=l;for(let b=0;b<a;++b)f[a-1-b]=p,p*=n[t.batchDims+a-1-b];let m=JG(e,r[1],f,t.batchDims,n,o,u,d,a),g=t.batchDims+a;if(g>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let x=s.slice(0,-1).concat(n.slice(g)),v=Ne.size(x),y=[{type:12,data:v},{type:12,data:l},...St(r[0].dims,m.dims,x)],w=b=>{let _=Be("data",r[0].dataType,r[0].dims.length),T=Be("slice_offsets",12,m.dims.length),M=bt("output",r[0].dataType,x.length);return`
          ${b.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(_,T,M)}
            ${b.mainStart()}
            ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:x,dataType:i}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:y}),getShaderSource:w},{inputs:[r[0],m]})},Vae=e=>({batchDims:e.batch_dims,cacheKey:""})}),eH,tH,Uae,Wae,wqe=Ze(()=>{Rt(),Zt(),On(),Jt(),eH=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=Ne.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,i=e[0],s=e[2],a=e.length===4?e[3]:void 0;if(s.dims.length!==i.dims.length||!i.dims.map((o,l)=>l===r?Math.ceil(o/n)===s.dims[l]:o===s.dims[l]).reduce((o,l)=>o&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(a){if(a.dataType!==i.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(a.dims.length!==s.dims.length||!a.dims.map((o,l)=>o===s.dims[l]).reduce((o,l)=>o&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},tH=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ne.normalizeAxis(t.gatherAxis,i),a=Ne.normalizeAxis(t.quantizeAxis,i),o=r.slice(0);o.splice(s,1,...n);let l=Ne.size(o),c=e[2].dataType,d=e[0].dataType===22,u=[{type:12,data:l},{type:12,data:a},{type:12,data:s},{type:12,data:t.blockSize},...St(...e.map((p,m)=>p.dims),o)],f=p=>{let m=Be("data",e[0].dataType,e[0].dims.length),g=Be("inputIndices",e[1].dataType,e[1].dims.length),x=Be("scales",e[2].dataType,e[2].dims.length),v=e.length>3?Be("zeroPoint",e[3].dataType,e[3].dims.length):void 0,y=bt("output",c,o.length),w=[m,g,x];v&&w.push(v);let b=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${p.registerUniforms(b).declareVariables(...w,y)}
        ${p.mainStart()}
        let output_indices = ${y.offsetToIndices("global_idx")};
        var indices_indices = ${g.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${y.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${g.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${y.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${m.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${y.indicesGet("output_indices","i")};
          ${m.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${g.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[s]};
        }
        ${m.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${o.length}; i++) {
          let index = ${y.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${m.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${m.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${m.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${d?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${x.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${x.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${x.getByIndices("scale_indices")};
        ${v?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${v.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${v.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${d?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${ts(c)}(quantized_data - zero_point) * scale;
        ${y.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((p,m)=>m!==1).map(p=>p.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(p,m)=>"rank")},getRunData:()=>({outputs:[{dims:o,dataType:c}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u}),getShaderSource:f}},Uae=(e,t)=>{let r=e.inputs;eH(r,t),e.compute(tH(e.inputs,t))},Wae=e=>Cr({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),rH,nH,Gae,Hae,Tqe=Ze(()=>{Rt(),Zt(),On(),Jt(),rH=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},nH=(e,t)=>{let r=e[0].dims,n=e[0].dataType,i=r.length,s=e[1].dims,a=e[1].dataType,o=Ne.normalizeAxis(t.axis,i),l=r[o],c=s.slice(0),d=Ne.size(c),u=Be("input",n,i),f=Be("indicesInput",a,s.length),p=bt("output",n,c.length),m=[{type:12,data:d},{type:6,data:l},{type:12,data:o}];return m.push(...St(r,s,c)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:m}),getShaderSource:g=>`
      ${g.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(u,f,p)}
      ${g.mainStart()}
      ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${p.offsetToIndices("global_idx")};

      var idx = ${f.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${u.type.indices}(outputIndices);
      ${u.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${u.getByIndices("inputIndices")};

      ${p.setByOffset("global_idx","value")};
  }`}},Gae=e=>Cr({axis:e.axis}),Hae=(e,t)=>{let r=e.inputs;rH(r),e.compute(nH(e.inputs,t))}}),iH,sH,Kae,qae,Mqe=Ze(()=>{Rt(),Zt(),Jt(),iH=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},sH=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[i,s,a]=Gie.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),o=[i,s];if(!o)throw new Error("Can't use gemm on the given tensors");let l=16,c=Math.ceil(s/l),d=Math.ceil(i/l),u=!0,f=Ne.size(o),p=[{type:12,data:u?c:f},{type:12,data:i},{type:12,data:s},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],m=["type","type"];e.length===3&&(p.push(...St(e[2].dims)),m.push("rank")),p.push(...St(o));let g=v=>{let y="";t.transA&&t.transB?y="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?y="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?y="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(y="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let w=t.alpha===1?"":"value *= uniforms.alpha;",b=Be("a",e[0].dataType,e[0].dims),_=Be("b",e[1].dataType,e[1].dims),T=b.type.value,M=null,k=[b,_];e.length===3&&(M=Be("c",e[2].dataType,e[2].dims.length),k.push(M));let j=bt("output",e[0].dataType,o.length);k.push(j);let A=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${v.registerUniforms(A).declareVariables(...k)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${T}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${y}
    }

    ${w}
    ${M!=null?`let cOffset = ${M.broadcastedIndicesToOffset("vec2(m, n)",j)}; value += ${T}(uniforms.beta) * ${M.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},x=v=>{let y=Be("a",e[0].dataType,e[0].dims),w=Be("b",e[1].dataType,e[1].dims),b=null,_=[y,w];e.length===3&&(b=Be("c",e[2].dataType,e[2].dims.length),_.push(b));let T=bt("output",e[0].dataType,o.length);_.push(T);let M=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],k="",j="";t.transA&&t.transB?(j=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${y.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${w.type.value}(0);
      }
      `,k="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(j=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${y.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${w.type.value}(0);
      }
      `,k="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(j=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${y.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${w.type.value}(0);
      }
      `,k="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(j=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${y.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${w.type.value}(0);
      }
      `,k="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let A=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${v.registerUniforms(M).declareVariables(..._)}
  var<workgroup> tile_a: array<array<${y.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${w.type.storage}, ${l}>, ${l}>;
  ${v.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${T.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${j}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${k}
      }
      workgroupBarrier();
    }

    ${A}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${b!=null?`let cOffset = ${b.broadcastedIndicesToOffset("vec2(m, n)",T)}; value += ${T.type.value}(uniforms.beta) * ${b.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return u?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:c*d},programUniforms:p}),getShaderSource:x}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:g}},Kae=e=>{let t=e.transA,r=e.transB,n=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:n,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},qae=(e,t)=>{iH(e.inputs),e.compute(sH(e.inputs,t))}}),Do,gl,nd,id,aH,oH,lH,cH,uH,dH,fH,hH,Xae,Yae,kqe=Ze(()=>{Rt(),Zt(),On(),Jt(),[Do,gl,nd,id]=[0,1,2,3],aH=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},oH=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,lH=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,cH=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,uH=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,dH=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Do}] = batch;
     indices[${gl}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${nd}] = u32(r);
            indices[${id}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${nd}] = u32(clamp(r, 0, H - 1));
          indices[${id}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${nd}] = gs_reflect(r, border[1], border[3]);
          indices[${id}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,fH=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Do}], indices[${gl}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Do}], indices[${gl}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Do}], indices[${gl}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Do}], indices[${gl}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Do}], indices[${gl}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Do}], indices[${gl}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,hH=(e,t)=>{let r=Be("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],i=Be("grid",e[1].dataType,n.length,2),s=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(s=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Do,gl,nd,id]=[0,3,1,2]);let a=bt("output",e[0].dataType,s.length),o=r.type.value,l=Ne.size(s),c=[{type:12,data:l},...St(e[0].dims,n,s)],d=u=>`
  ${u.registerUniform("output_size","u32").declareVariables(r,i,a)}
  ${oH}
  ${lH(o)}
  ${cH(t)}
  ${uH(t)}
  ${dH(r,o,t)}

  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${nd}]);
      let W_in = i32(uniforms.x_shape[${id}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${a.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Do}], indices[${nd}], indices[${id}]);
      let nxy = ${i.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${fH(a,o,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:u=>{let f=Ne.size(s);return{outputs:[{dims:s,dataType:u[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:c}},getShaderSource:d}},Xae=(e,t)=>{aH(e.inputs),e.compute(hH(e.inputs,t))},Yae=e=>Cr({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),hs,pH,Qae,KP,mH,Wg,Zae,Jae=Ze(()=>{Rt(),Zt(),On(),dN(),pN(),Jt(),$u(),hs=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,pH=(e,t)=>{let r=e[0],n=hs(e,1),i=hs(e,2),s=hs(e,3),a=hs(e,4),o=hs(e,5),l=hs(e,6),c=hs(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=r.dims[0],u=r.dims[1],f=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],p=u,m=0,g=0,x=Math.floor(f/t.numHeads);if(l&&c&&Ne.size(l.dims)&&Ne.size(c.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==d||l.dims[1]!==t.numHeads||l.dims[3]!==x)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(c.dims[0]!==d||c.dims[1]!==t.numHeads||c.dims[3]!==x)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==c.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(c.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=l.dims[2],g=l.dims[2]}else if(l&&Ne.size(l.dims)||c&&Ne.size(c.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let v;if(n&&Ne.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');v=2,p=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==x)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');v=5,p=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==x)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');v=0,p=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');v=3}if(s&&Ne.size(s.dims)>0){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let y=m+p,w=0;if(a&&Ne.size(a.dims)>0){w=8;let M=a.dims;throw M.length===1?M[0]===d?w=1:M[0]===3*d+2&&(w=3):M.length===2&&M[0]===d&&M[1]===y&&(w=5),w===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let b=!1,_=f;if(i&&Ne.size(i.dims)>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(p!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');_=i.dims[2]}else{if(p!==i.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');_=i.dims[1]*i.dims[3],b=!0}}let T=!1;if(a&&Ne.size(a.dims)>0)throw new Error("Key padding mask is not supported");if(o&&Ne.size(o.dims)>0){if(o.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(o.dims[0]!==d||o.dims[1]!==t.numHeads||o.dims[2]!==u||o.dims[3]!==y)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:d,sequenceLength:u,pastSequenceLength:m,kvSequenceLength:p,totalSequenceLength:y,maxSequenceLength:g,inputHiddenSize:0,hiddenSize:f,vHiddenSize:_,headSize:x,vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:w,scale:t.scale,broadcastResPosBias:T,passPastInKv:b,qkvFormat:v}},Qae=e=>Cr({...e}),KP=Cr({perm:[0,2,1,3]}),mH=(e,t,r,n,i,s,a)=>{let o=[n,i,s],l=Ne.size(o),c=[{type:12,data:l},{type:12,data:a},{type:12,data:s}],d=u=>{let f=bt("qkv_with_bias",t.dataType,o),p=Be("qkv",t.dataType,o),m=Be("bias",r.dataType,o),g=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${u.registerUniforms(g).declareVariables(p,m,f)}
  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Wg=(e,t,r,n,i,s,a,o)=>{let l=s;if(a&&Ne.size(a.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=mH(e,s,a,t,n,r*i,o),l=l.reshape([t,n,r,i]),r===1||n===1?l:e.compute(ca(l,KP.perm),{inputs:[l],outputs:[-1]})[0]}else return s.dims.length===3&&(l=s.reshape([t,n,r,i])),r===1||n===1?l:e.compute(ca(l,KP.perm),{inputs:[l],outputs:[-1]})[0]},Zae=(e,t)=>{let r=pH(e.inputs,t),n=e.inputs[0],i=hs(e.inputs,1),s=hs(e.inputs,2),a=hs(e.inputs,3),o=hs(e.inputs,4),l=hs(e.inputs,5),c=hs(e.inputs,6),d=hs(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if((i==null?void 0:i.dims.length)===5)throw new Error("Packed KV is not implemented");let u=i&&s&&i.dims.length===4&&s.dims.length===4,f=Wg(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,a,0);if(u)return qv(e,f,i,s,o,void 0,c,d,l,r);if(!i||!s)throw new Error("key and value must be provided");let p=Wg(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),m=Wg(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,s,a,2*r.hiddenSize);qv(e,f,p,m,o,void 0,c,d,l,r)}}),gH,yH,vH,_H,lA,eoe,toe,roe=Ze(()=>{Rt(),Zt(),On(),Jt(),gH=e=>{if(!e||e.length<1)throw new Error("too few inputs")},yH=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),n=r.length),Cr({numOutputs:n,axis:t.axis,splitSizes:r})},vH=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${Mt("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,_H=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let i=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(i):n===0?r.push(`if (output_number == ${n}u) { ${i} }`):n===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${n}) { ${i} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},lA=(e,t)=>{let r=e[0].dims,n=Ne.size(r),i=e[0].dataType,s=Ne.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),o=Be("input",i,r.length),l=new Array(t.numOutputs),c=[],d=[],u=0,f=[{type:12,data:n}];for(let m=0;m<t.numOutputs;m++){u+=t.splitSizes[m],l[m]=u;let g=r.slice();g[s]=t.splitSizes[m],d.push(g),a[m]=bt(`output${m}`,i,g.length),c.push({dims:d[m],dataType:e[0].dataType})}f.push({type:12,data:l},...St(r,...d));let p=m=>`
  ${m.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(o,...a)}
  ${vH(l.length)}
  ${_H(a)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${o.offsetToIndices("global_idx")};
    var index = ${o.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${Mt("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${o.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:p,getRunData:()=>({outputs:c,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:f})}},eoe=(e,t)=>{gH(e.inputs);let r=e.inputs.length===1?t:yH(e.inputs,t);e.compute(lA(e.inputs,r),{inputs:[0]})},toe=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return Cr({axis:t,numOutputs:n,splitSizes:r})}}),xH,c1,noe,ioe=Ze(()=>{Rt(),Zt(),On(),Jt(),xH=(e,t)=>{let[r,n,i,s]=e,{numHeads:a,rotaryEmbeddingDim:o}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!Ne.areEqual(n.dims,[])&&!Ne.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(i.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${i.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!Ne.areEqual(i.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(o>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],c=r.dims[r.dims.length-2],d=i.dims[0],u=Ne.sizeFromDimension(r.dims,1)/c,f=o===0?i.dims[1]*2:u/a;if(o>f)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(c!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(f/2!==i.dims[1]&&o/2!==i.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(c>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},c1=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:i,scale:s}=t,a=e[0].dims[0],o=Ne.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],c=o/l,d=e[2].dims[1],u=i===0?d*2:c/n,f=new Array(a,l,c/u,u-d),p=Ne.computeStrides(f),m=[{type:1,data:s},{type:12,data:f},{type:12,data:p},...e[0].dims.length===3?new Array({type:12,data:[o,c,u,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[o,u,l*u,1]}):[],...St(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],g=x=>{let v=Be("input",e[0].dataType,e[0].dims.length),y=Be("position_ids",e[1].dataType,e[1].dims.length),w=Be("cos_cache",e[2].dataType,e[2].dims.length),b=Be("sin_cache",e[3].dataType,e[3].dims.length),_=bt("output",e[0].dataType,e[0].dims.length);return x.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:f.length},{name:"global_strides",type:"u32",length:p.length},{name:"input_output_strides",type:"u32",length:p.length}]),`
        ${x.declareVariables(v,y,w,b,_)}

        ${x.mainStart(Wp)}
          let half_rotary_emb_dim = uniforms.${w.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${x.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${y.broadcastedIndicesToOffset("bsnh.xy",bt("",y.type.tensor,2))};
            let position_id =
                u32(${y.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${v.getByOffset("i")} * ${w.get("position_id","bsnh[3]")} -
                ${v.getByOffset("j")} * ${b.get("position_id","bsnh[3]")};
            ${_.setByOffset("i","re")}
            let im = ${v.getByOffset("i")} * ${b.get("position_id","bsnh[3]")} +
                ${v.getByOffset("j")} * ${w.get("position_id","bsnh[3]")};
            ${_.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${_.setByOffset("k",v.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:Cr({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:g,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ne.size(f)/Wp)},programUniforms:m})}},noe=(e,t)=>{xH(e.inputs,t),e.compute(c1(e.inputs,t))}}),bH,wH,qP,TH,soe,Sqe=Ze(()=>{On(),Rt(),pN(),Jae(),roe(),$u(),ioe(),Jt(),bH=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let o=!1,l=r.dims[0],c=r.dims[1],d=r.dims.length===3?o?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],u=c,f=0,p=!n||n.dims.length===0,m=Math.floor(p?d/(t.numHeads+2*t.kvNumHeads):d/t.numHeads);p&&(d=m*t.numHeads);let g=s&&s.dims.length!==0,x=a&&a.dims.length!==0;if(g&&s.dims.length===4&&s.dims[0]===l&&s.dims[1]!==t.kvNumHeads&&s.dims[2]===t.kvNumHeads&&s.dims[3]===m)throw new Error("BSNH pastKey/pastValue is not supported");if(g&&x){if(s.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(a.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');f=s.dims[2]}else if(g||x)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let v=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');u=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==m)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');u=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==m)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');u=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');v=3}let y=0,w=!1,b=t.kvNumHeads?m*t.kvNumHeads:d;if(i&&i.dims.length>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(u!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');b=i.dims[2]}else{if(u!==i.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');b=i.dims[1]*i.dims[3],w=!0}}let _=e.length>4?e[5]:void 0;if(_&&_.dims.length!==1&&_.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:c,pastSequenceLength:f,kvSequenceLength:u,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:d,vHiddenSize:b,headSize:m,vHeadSize:Math.floor(b/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:y,scale:t.scale,broadcastResPosBias:!1,passPastInKv:w,qkvFormat:v}},wH=Cr({perm:[0,2,1,3]}),qP=(e,t,r)=>{let n=t,i=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,i,r.headSize]),n=e.compute(ca(n,wH.perm),{inputs:[n],outputs:[-1]})[0]),n},TH=(e,t,r,n)=>{let i=7,s=["type","type"],a=[e*t],o=e*t,l=[{type:12,data:o},{type:12,data:t},{type:12,data:e}],c=d=>{let u=Be("seq_lens",r.dataType,r.dims),f=Be("total_seq_lens",n.dataType,n.dims),p=bt("pos_ids",i,a),m=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${d.registerUniforms(m).declareVariables(u,f,p)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${f.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${u.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${p.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:l}),getShaderSource:c}},soe=(e,t)=>{var b;let r=bH(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(((b=e.inputs[1])==null?void 0:b.dims.length)===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],i=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,s=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,a=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,o=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,c=e.inputs.length>5?e.inputs[6]:void 0,d=r.kvNumHeads?r.kvNumHeads:r.numHeads,u=Cr({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,d*r.headSize,d*r.headSize]}),[f,p,m]=!i&&!s?e.compute(lA([n],u),{inputs:[n],outputs:[-1,-1,-1]}):[n,i,s],g,x;if(t.doRotary){let _=e.compute(TH(r.batchSize,r.sequenceLength,l,c),{inputs:[l,c],outputs:[-1]})[0],T=e.inputs[7],M=e.inputs[8],k=Cr({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),j=[f,_,T,M],A=[-1];g=e.compute(c1(j,k),{inputs:j,outputs:A})[0],j.splice(0,1,p);let R=Cr({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});x=e.compute(c1(j,R),{inputs:j,outputs:A})[0]}let v=Wg(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?g:f,void 0,0),y=qP(e,t.doRotary?x:p,r),w=qP(e,m,r);qv(e,v,y,w,void 0,void 0,a,o,void 0,r,l,c)}}),XP,MH,kH,aoe,Pqe=Ze(()=>{Rt(),Zt(),$u(),Jt(),XP=(e,t,r,n,i,s,a,o)=>{let l=Tn(s),c=l===1?"f32":`vec${l}f`,d=l===1?"vec2f":`mat2x${l}f`,u=i*a,f=64;u===1&&(f=256);let p=[i,a,s/l],m=[i,a,2],g=["rank","type","type"],x=[];x.push(...St(p,m));let v=y=>{let w=Be("x",t.dataType,3,l),b=Be("scale",r.dataType,r.dims),_=Be("bias",n.dataType,n.dims),T=bt("output",1,3,2),M=[w,b,_,T];return`
  var<workgroup> workgroup_shared : array<${d}, ${f}>;
  const workgroup_size = ${f}u;
  ${y.declareVariables(...M)}
  ${y.mainStart(f)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${c}(0);
    var squared_sum = ${c}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${c}(${w.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${d}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${_u("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${_u("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${o}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${o};${f}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:m,dataType:1}],dispatchGroup:{x:u},programUniforms:x}),getShaderSource:v},{inputs:[t,r,n],outputs:[-1]})[0]},MH=(e,t,r)=>{let n=t[0].dims,i=n,s=2,a=n[0],o=n[1],l=Ne.sizeFromDimension(n,s),c=Tn(l),d=Ne.size(i)/c,u=XP(e,t[0],t[1],t[2],a,l,o,r.epsilon),f=[a,o,l/c],p=[a,o],m=["type","none"],g=x=>{let v=Be("x",t[0].dataType,f.length,c),y=Be("scale_shift",1,p.length,2),w=bt("output",t[0].dataType,f.length,c),b=[v,y,w];return`
  ${x.registerUniform("output_size","u32").declareVariables(...b)}
  ${x.mainStart()}
  ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${w.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${y.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${v.getByOffset("global_idx")} * ${w.type.value}(scale_shift.x) + ${w.type.value}(scale_shift.y);
      ${w.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${c}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...St(f,p,f)]}),getShaderSource:g},{inputs:[t[0],u]})},kH=(e,t,r)=>{let n=t[0].dims,i=n,s=n[0],a=n[n.length-1],o=Ne.sizeFromDimension(n,1)/a,l=Tn(a),c=Ne.size(i)/l,d=[{type:12,data:o},{type:12,data:Math.floor(a/l)}],u=["type","type"],f=!1,p=[0,n.length-1];for(let v=0;v<n.length-2;v++)f=f||n[v+1]!==1,p.push(v+1);f=f&&n[n.length-1]!==1;let m=f?e.compute(ca(e.inputs[0],p),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(v,y)=>n[p[y]])),g=XP(e,m,t[1],t[2],s,o,a,r.epsilon),x=v=>{let y=bi(t[0].dataType),w=l===1?"vec2f":`mat${l}x2f`,b=M=>{let k=M===0?"x":"y",j=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${y}(${j}(scale.${k}))`;case 2:return`vec2<${y}>(${j}(scale[0].${k}, scale[1].${k}))`;case 4:return`vec4<${y}>(${j}(scale[0].${k}, scale[1].${k}, scale[2].${k}, scale[3].${k}))`;default:throw new Error(`Not supported compoents ${l}`)}},_=Be("input",t[0].dataType,t[0].dims,l),T=bt("output",t[0].dataType,i,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${_.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${w}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${T.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${v.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${b(0)}, ${b(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:d}),getShaderSource:x},{inputs:[t[0],g]})},aoe=(e,t)=>{t.format==="NHWC"?kH(e,e.inputs,t):MH(e,e.inputs,t)}}),SH,PH,ooe,Eqe=Ze(()=>{Rt(),Zt(),Jt(),SH=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},PH=(e,t,r)=>{let n=t.simplified,i=e[0].dims,s=e[1],a=!n&&e[2],o=i,l=Ne.normalizeAxis(t.axis,i.length),c=Ne.sizeToDimension(i,l),d=Ne.sizeFromDimension(i,l),u=Ne.size(s.dims),f=a?Ne.size(a.dims):0;if(u!==d||a&&f!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${u} and bias size of ${f}`);let p=[];for(let _=0;_<i.length;++_)_<l?p.push(i[_]):p.push(1);let m=Tn(d),g=["type","type"],x=[{type:12,data:c},{type:1,data:d},{type:12,data:Math.floor(d/m)},{type:1,data:t.epsilon}];a&&g.push("type");let v=r>1,y=r>2,w=_=>{let T=bi(e[0].dataType),M=[Be("x",e[0].dataType,e[0].dims,m),Be("scale",s.dataType,s.dims,m)];a&&M.push(Be("bias",a.dataType,a.dims,m)),M.push(bt("output",e[0].dataType,o,m)),v&&M.push(bt("mean_data_output",1,p)),y&&M.push(bt("inv_std_output",1,p));let k=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${_.registerUniforms(k).declareVariables(...M)}
  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${J2("f32",m)};
    var mean_square_vector = ${J2("f32",m)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${jh(T,m,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${_u("mean_vector",m)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${_u("mean_square_vector",m)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${jh(T,m,"x[j + offset]")};
      let f32scale = ${jh(T,m,"scale[j]")};
      output[j + offset] = ${M[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${a?`+ ${jh(T,m,"bias[j]")}`:""}
      );
    }

    ${v?"mean_data_output[global_idx] = mean":""};
    ${y?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},b=[{dims:o,dataType:e[0].dataType}];return v&&b.push({dims:p,dataType:1}),y&&b.push({dims:p,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${m};${r};${n}`,inputDependencies:g},getRunData:()=>({outputs:b,dispatchGroup:{x:Math.ceil(c/64)},programUniforms:x}),getShaderSource:w}},ooe=(e,t)=>{SH(e.inputs),e.compute(PH(e.inputs,t,e.outputCount))}}),EH,loe,Cqe=Ze(()=>{Zt(),_N(),xN(),EH=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},loe=e=>{EH(e.inputs);let t=Up.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(vN(e.inputs,{activation:""},t));else{let i=t[t.length-2],s=Ne.size(e.inputs[0].dims.slice(0,-2)),a=Ne.size(e.inputs[1].dims.slice(0,-2));if(s!==1&&i===1&&a===1){let o=e.inputs[0].reshape([1,s,n]),l=e.inputs[1].reshape([1,n,r]),c=[1,s,r],d=[o,l];e.compute(l1(d,{activation:""},t,c),{inputs:d})}else e.compute(l1(e.inputs,{activation:""},t))}}}),CH,jH,AH,coe,uoe,jqe=Ze(()=>{Rt(),Zt(),On(),Jt(),CH=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),s=t.blockSize/8*t.bits,a=e[1];if(!Ne.areEqual(a.dims,[t.n,i,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let o=e[2].dims;if(Ne.size(o)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,c=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(Ne.size(l)!==c)throw new Error("zeroPoints input size error.")}},jH=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,a=t.n,o=r.slice(0,n-2),l=Ne.size(o),c=e[1].dims[2]/4,d=e[0].dataType,u=Tn(t.k),f=Tn(c),p=Tn(a),m=o.concat([i,a]),g=i>1&&a/p%2===0?2:1,x=Ne.size(m)/p/g,v=64,y=[],w=[l,i,s/u],b=Ne.convertShape(e[1].dims).slice();b.splice(-1,1,c/f),y.push(...St(w)),y.push(...St(b)),y.push(...St(e[2].dims)),e.length===4&&y.push(...St(Ne.convertShape(e[3].dims)));let _=[l,i,a/p];y.push(...St(_));let T=M=>{let k=w.length,j=Be("a",e[0].dataType,k,u),A=Be("b",12,b.length,f),R=Be("scales",e[2].dataType,e[2].dims.length),I=[j,A,R],$=e.length===4?Be("zero_points",12,e[3].dims.length):void 0;$&&I.push($);let F=_.length,V=bt("output",e[0].dataType,F,p),G=bi(e[0].dataType),H=(()=>{switch(u){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${u}-component is not supported.`)}})(),B=()=>{let z=`
          // reuse a data
            var input_offset = ${j.indicesToOffset(`${j.type.indices}(batch, row, word_offset)`)};
            var a_data: ${H};
            for (var j: u32 = 0; j < ${8/u}; j++) {
              a_data[j] = ${j.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let D=0;D<p*g;D++)z+=`
            b_value = ${f===1?`b${D}_data`:`b${D}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${H}(${Array.from({length:4},(K,oe)=>`${G}(b_value_lower[${oe}]), ${G}(b_value_upper[${oe}])`).join(", ")});
            b_dequantized_values = ${u===1?`${H}(${Array.from({length:8},(K,oe)=>`(b_quantized_values[${oe}] - ${$?`zero_point${D}`:"zero_point"}) * scale${D}`).join(", ")});`:`(b_quantized_values - ${H}(${Array(8).fill(`${$?`zero_point${D}`:"zero_point"}`).join(",")})) * scale${D};`};
            workgroup_shared[local_id.x * ${g} + ${Math.floor(D/p)}]${p>1?`[${D%p}]`:""} += ${Array.from({length:8/u},(K,oe)=>`${u===1?`a_data[${oe}] * b_dequantized_values[${oe}]`:`dot(a_data[${oe}], b_dequantized_values[${oe}])`}`).join(" + ")};
          `;return z},te=()=>{let z=`
            var col_index = col * ${p};
            ${$?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${G}(8);`}
            `;for(let D=0;D<p*g;D++)z+=`
            let scale${D} = ${R.getByOffset("col_index * nBlocksPerCol + block")};
            ${$?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${$.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${D} = ${G}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return z},ae=()=>{let z=`col_index = col * ${p};`;for(let D=0;D<p*g;D++)z+=`
            let b${D}_data = ${A.getByIndices(`${A.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return z+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${H};
            var b_dequantized_values: ${H};`,z};return`
        var<workgroup> workgroup_shared: array<${V.type.value}, ${g*v}>;
        ${M.declareVariables(...I,V)}
        ${M.mainStart([v,1,1])}
          let output_indices = ${V.offsetToIndices(`(global_idx / ${v}) * ${g}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${v}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/u};
            ${te()}
            for (var word: u32 = 0; word < ${c}; word += ${f}) {
              ${ae()}
              for (var i: u32 = 0; i < ${f}; i++) {
                ${B()}
                word_offset += ${8/u};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${g}) {
            var output_value: ${V.type.value} = ${V.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${v}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${g};
            }
            ${V.setByIndices(`${V.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${u};${f};${p};${g};${v}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:m,dataType:d}],dispatchGroup:{x},programUniforms:y}),getShaderSource:T}},AH=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,a=t.n,o=r.slice(0,n-2),l=Ne.size(o),c=e[1].dims[2]/4,d=e[0].dataType,u=Tn(t.k),f=Tn(c),p=o.concat([i,a]),m=128,g=a%8===0?8:a%4===0?4:1,x=m/g,v=x*f*8,y=v/u,w=v/t.blockSize,b=Ne.size(p)/g,_=[],T=[l,i,s/u],M=Ne.convertShape(e[1].dims).slice();M.splice(-1,1,c/f),_.push(...St(T)),_.push(...St(M)),_.push(...St(e[2].dims)),e.length===4&&_.push(...St(Ne.convertShape(e[3].dims)));let k=[l,i,a];_.push(...St(k));let j=A=>{let R=T.length,I=Be("a",e[0].dataType,R,u),$=Be("b",12,M.length,f),F=Be("scales",e[2].dataType,e[2].dims.length),V=[I,$,F],G=e.length===4?Be("zero_points",12,e[3].dims.length):void 0;G&&V.push(G);let H=k.length,B=bt("output",e[0].dataType,H),te=bi(e[0].dataType),ae=()=>{switch(u){case 1:return`
          let a_data0 = vec4<${te}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${te}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${te}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${te}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${u}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${I.type.value}, ${y}>;
        var<workgroup> inter_results: array<array<${B.type.value}, ${x}>, ${g}>;
        ${A.declareVariables(...V,B)}
        ${A.mainStart([x,g,1])}
          let output_indices = ${B.offsetToIndices(`workgroup_index * ${g}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${w} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${y};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${y}; a_offset += ${m})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${I.getByIndices(`${I.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${I.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${w} + local_id.x;
            ${G?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${G.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${te}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${te}(8);`}
            let scale = ${F.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${$.getByIndices(`${$.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/u};
            for (var i: u32 = 0; i < ${f}; i++) {
              ${ae()}
              let b_value = ${f===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${te}>(${Array.from({length:4},(z,D)=>`${te}(b_value_lower[${D}]), ${te}(b_value_upper[${D}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${te}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(z,D)=>`${`dot(a_data${D}, b_dequantized_values[${D}])`}`).join(" + ")};
              word_offset += ${8/u};
            }
            workgroupBarrier();
          }

          if (local_idx < ${g}) {
            var output_value: ${B.type.value} = ${B.type.value}(0);
            for (var b = 0u; b < ${x}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${B.setByIndices(`${B.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${u};${f};${x};${g}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:p,dataType:d}],dispatchGroup:{x:b},programUniforms:_}),getShaderSource:j}},coe=(e,t)=>{CH(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(AH(e.inputs,t)):e.compute(jH(e.inputs,t))},uoe=e=>Cr(e)}),OH,$H,IH,NH,DH,RH,LH,FH,doe,Aqe=Ze(()=>{Rt(),Zt(),Jt(),OH=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},$H=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
            k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
              break;
            }
            offset += k * i32(${Mt("uniforms.x_strides",i,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},IH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${Mt("uniforms.x_shape",i,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},NH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                  k = i32(${Mt("uniforms.x_shape",i,t)}) - 1;
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},DH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0)  {
                  k += i32(${Mt("uniforms.x_shape",i,t)}]);
                }
                if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                  k -= i32(${Mt("uniforms.x_shape",i,t)});
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},RH=(e,t,r)=>{switch(r.mode){case 0:return $H(e,t,r.pads.length);case 1:return IH(e,t,r.pads.length);case 2:return NH(e,t,r.pads.length);case 3:return DH(e,t,r.pads.length);default:throw new Error("Invalid mode")}},LH=(e,t)=>{let r=Ne.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,i=Ne.size(r),s=[{type:12,data:i},{type:6,data:t.pads}],a=e.length>=3&&e[2].data;t.mode===0&&s.push({type:a?e[2].dataType:1,data:t.value}),s.push(...St(e[0].dims,r));let o=["rank"],l=c=>{let d=bt("output",e[0].dataType,r.length),u=Be("x",e[0].dataType,n.length),f=u.type.value,p=RH(d,n.length,t),m=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&m.push({name:"constant_value",type:a?f:"f32"}),`
            ${c.registerUniforms(m).declareVariables(u,d)}
            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${d.offsetToIndices("global_idx")};

            var value = ${f}(0);
            ${p}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${a}`,inputDependencies:o},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ne.size(r)/64)},programUniforms:s}),getShaderSource:l}},FH=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,i=e[0].dims.length,s=new Int32Array(2*i).fill(0);if(e.length>=4){let o=e[3].getBigInt64Array();for(let l=0;l<o.length;l++)s[Number(o[l])]=Number(r[l]),s[Number(o[l])+i]=Number(r[l+o.length])}else r.forEach((o,l)=>s[Number(l)]=Number(o));let a=[];return s.forEach(o=>a.push(o)),{mode:t.mode,value:n,pads:a}}else return t},doe=(e,t)=>{OH(e.inputs);let r=FH(e.inputs,t);e.compute(LH(e.inputs,r),{inputs:[0]})}}),kg,YP,QP,ZP,JP,BH,zH,eE,tE,foe,hoe,rE,poe,moe,nE,goe,yoe,voe,_oe,Oqe=Ze(()=>{Co(),Rt(),Zt(),Jt(),kg=e=>{if(qr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},YP=(e,t,r)=>{let n=t.format==="NHWC",i=e.dims.slice();n&&i.splice(1,0,i.pop());let s=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),o=t.strides.slice(),l=s?t.dilations.slice():[],c=t.pads.slice();a1.adjustPoolAttributes(r,i,a,o,l,c);let d=a1.computePoolOutputShape(r,i,o,l,a,c,t.autoPad),u=Object.assign({},t);s?Object.assign(u,{kernelShape:a,strides:o,pads:c,dilations:l,cacheKey:t.cacheKey}):Object.assign(u,{kernelShape:a,strides:o,pads:c,cacheKey:t.cacheKey});let f=d.slice();return f.push(f.splice(1,1)[0]),[u,n?f:d]},QP=(e,t)=>{let r=t.format==="NHWC",n=Ne.size(e),i=Ne.size(t.kernelShape),s=[{type:12,data:n},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let o=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],c=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],u=!!(c+d);s.push({type:12,data:o},{type:12,data:l},{type:12,data:c},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let f=!1;if(t.kernelShape.length===2){let p=t.kernelShape[t.kernelShape.length-2],m=t.strides[t.strides.length-2],g=t.pads[t.pads.length/2-2],x=t.pads[t.pads.length-2];f=!!(g+x),s.push({type:12,data:p},{type:12,data:m},{type:12,data:g},{type:12,data:x}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,a,!0,u,f]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let o=Ne.computeStrides(t.kernelShape);s.push({type:12,data:o},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:o.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((c,d)=>c+d);return[s,a,!!l,!1,!1]}},ZP=(e,t,r,n,i,s,a,o,l,c,d,u)=>{let f=i.format==="NHWC",p=t.type.value,m=bt("output",t.type.tensor,n);if(i.kernelShape.length<=2){let g="",x="",v="",y=r-(f?2:1);if(d?g=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${y}] = indices[${y}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${y}] < 0 || xIndices[${y}]
                      >= uniforms.x_shape[${y}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`:g=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${y}] = indices[${y}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`,i.kernelShape.length===2){let w=r-(f?3:2);u?x=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${w}] = indices[${w}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${w}] < 0 || xIndices[${w}] >= uniforms.x_shape[${w}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:x=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${w}] = indices[${w}] * uniforms.sh - uniforms.phStart + j;
                `,v=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var value = ${p}(${o});
              var pad = 0;
              ${x}
              ${g}
              ${v}
              ${a}

              output[global_idx] = value;
            }`}else{if(f)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let g=i.kernelShape.length,x=i.pads.length,v="";return c?v=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${s}
              }`:v=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var offsets: array<u32, ${g}>;

              var value = ${p}(${o});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${g-1}u; j++) {
                  offsets[j] = offset / ${Mt("uniforms.kernelStrides","j",g)};
                  offset -= offsets[j] * ${Mt("uniforms.kernelStrides","j",g)};
                }
                offsets[${g-1}] = offset;

                isPad = false;
                for (var j = ${r-g}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${Mt("uniforms.strides",`j - ${r-g}u`,g)}
                    + offsets[j - ${r-g}u] - ${Mt("uniforms.pads","j - 2u",x)};
                  ${v}
              }
              ${a}

              output[global_idx] = value;
            }`}},JP=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,BH=e=>`${JP(e)};${e.countIncludePad}`,zH=e=>`${JP(e)};${e.storageOrder};${e.dilations}`,eE=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),tE=(e,t,r,n)=>{let[i,s]=YP(t,n,r),a=Be("x",t.dataType,t.dims.length),o=a.type.value,l="value += x_val;",c="";i.countIncludePad?c+=`value /= ${o}(uniforms.kernelSize);`:c+=`value /= ${o}(i32(uniforms.kernelSize) - pad);`;let[d,u,f,p,m]=QP(s,i);d.push(...St(t.dims,s));let g=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${m}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ne.size(s)/64)},programUniforms:d}),getShaderSource:x=>ZP(x,a,t.dims.length,s.length,i,l,c,0,u,f,p,m)}},foe=e=>{let t=e.count_include_pad!==0,r=eE(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:BH(n)}},hoe=(e,t)=>{kg(e.inputs),e.compute(tE("AveragePool",e.inputs[0],!1,t))},rE={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},poe=e=>{let t=e.format;return{format:t,...rE,cacheKey:t}},moe=(e,t)=>{kg(e.inputs),e.compute(tE("GlobalAveragePool",e.inputs[0],!0,t))},nE=(e,t,r,n)=>{let[i,s]=YP(t,n,r),a=`
      value = max(x_val, value);
    `,o="",l=Be("x",t.dataType,t.dims.length),c=["rank"],[d,u,f,p,m]=QP(s,i);return d.push(...St(t.dims,s)),{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${m}`,inputDependencies:c},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ne.size(s)/64)},programUniforms:d}),getShaderSource:g=>ZP(g,l,t.dims.length,s.length,i,a,o,t.dataType===10?-65504:-1e5,u,f,p,m)}},goe=(e,t)=>{kg(e.inputs),e.compute(nE("MaxPool",e.inputs[0],!1,t))},yoe=e=>{let t=e.storage_order,r=e.dilations,n=eE(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...n,cacheKey:""};return{...i,cacheKey:zH(i)}},voe=e=>{let t=e.format;return{format:t,...rE,cacheKey:t}},_oe=(e,t)=>{kg(e.inputs),e.compute(nE("GlobalMaxPool",e.inputs[0],!0,t))}}),VH,UH,xoe,boe,$qe=Ze(()=>{Rt(),Zt(),On(),Jt(),VH=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((i,s)=>s===t.axis||i===e[0].dims[s]).reduce((i,s)=>i&&s,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},UH=(e,t)=>{let r=Ne.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,i=n===3,s=e[0].dims,a=e[1].dataType,o=Ne.size(s),l=n===3||n===2,c=l?[Math.ceil(Ne.size(e[0].dims)/4)]:e[0].dims,d=e[1].dims,u=e.length>2?e[2]:void 0,f=u?l?[Math.ceil(Ne.size(u.dims)/4)]:u.dims:void 0,p=d.length===0||d.length===1&&d[0]===1,m=p===!1&&d.length===1,g=Tn(o),x=p&&(!l||g===4),v=x?g:1,y=x&&!l?g:1,w=Be("input",l?12:n,c.length,y),b=Be("scale",a,d.length),_=u?Be("zero_point",l?12:n,f.length):void 0,T=bt("output",a,s.length,v),M=[w,b];_&&M.push(_);let k=[c,d];u&&k.push(f);let j=[{type:12,data:o/v},{type:12,data:r},{type:12,data:t.blockSize},...St(...k,s)],A=R=>{let I=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${R.registerUniforms(I).declareVariables(...M,T)}
      ${R.mainStart()}
          ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${T.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${w.getByOffset("global_idx / 4")};
            let x_vec = ${i?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${v===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${w.getByOffset("global_idx")};`};

          // Set scale input
          ${p?`let scale_value= ${b.getByOffset("0")}`:m?`
            let scale_index = ${T.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${b.getByOffset("scale_index")};`:`
            var scale_indices: ${b.type.indices} = output_indices;
            let index = ${b.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${b.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${b.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${_?p?l?`
                let zero_point_input = ${_.getByOffset("0")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${_.getByOffset("0")}`:m?l?`
                let zero_point_index = ${T.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${_.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${T.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${_.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${b.indicesToOffset("scale_indices")};
                let zero_point_input = ${_.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${_.getByIndices("scale_indices")};`:`let zero_point_value = ${l?i?"i32":"u32":w.type.value}(0);`};
      // Compute and write output
      ${T.setByOffset("global_idx",`${T.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:_?["rank","rank","rank"]:["rank","rank"]},getShaderSource:A,getRunData:()=>({outputs:[{dims:s,dataType:a}],dispatchGroup:{x:Math.ceil(o/v/64),y:1,z:1},programUniforms:j})}},xoe=(e,t)=>{VH(e.inputs,t),e.compute(UH(e.inputs,t))},boe=e=>Cr({axis:e.axis,blockSize:e.blockSize})}),WH,GH,woe,Iqe=Ze(()=>{Co(),Rt(),Jt(),WH=(e,t,r)=>{let n=e===t,i=e<t&&r<0,s=e>t&&r>0;if(n||i||s)throw new Error("Range these inputs' contents are invalid.")},GH=(e,t,r,n)=>{let i=Math.abs(Math.ceil((t-e)/r)),s=[i],a=i,o=[{type:12,data:a},{type:n,data:e},{type:n,data:r},...St(s)],l=c=>{let d=bt("output",n,s.length),u=d.type.value,f=[{name:"outputSize",type:"u32"},{name:"start",type:u},{name:"delta",type:u}];return`
        ${c.registerUniforms(f).declareVariables(d)}
        ${c.mainStart()}
        ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${u}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:s,dataType:n}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:o})}},woe=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),qr.webgpu.validateInputContent&&WH(t,r,n),e.compute(GH(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),HH,iE,sE,KH,Toe,Moe,Nqe=Ze(()=>{Rt(),Zt(),On(),Jt(),HH=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let i=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,s=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${i}bitcast<${n}>(oldValue) + (${r})${s}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${i}max(bitcast<f32>(oldValue), (${r}))${s}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${i}min(bitcast<${n}>(oldValue), (${r}))${s}`;case"mul":return`${i}(bitcast<${n}>(oldValue) * (${r}))${s}`;default:throw new Error(`Reduction ${e} is not supported.`)}},iE=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,sE=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${HH(e.reduction,"output[data_offset + i]","value",t)}
      }`,KH=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r,s=1,a=Math.ceil(Ne.size(n)/s),o=n[n.length-1],l=Ne.sizeFromDimension(r,o),c=Ne.sizeFromDimension(n,0)/o,d=[{type:12,data:a},{type:12,data:o},{type:12,data:l},...St(e[1].dims,e[2].dims,i)],u=f=>{let p=Be("indices",e[1].dataType,e[1].dims.length),m=Be("updates",e[2].dataType,e[2].dims.length,s),g=t.reduction!=="none"&&t.reduction!==""?Zie("output",e[0].dataType,i.length):bt("output",e[0].dataType,i.length,s);return`
      ${f.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(p,m,g)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${c}; i = i + 1) {
      for (var j = i + 1; j < ${c}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${c}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${iE(r.length,!1)}
      }
      ${sE(t,g.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${iE(r.length,!0)}
  }
  ${sE(t,g.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:u}},Toe=e=>Cr({reduction:e.reduction}),Moe=(e,t)=>{e.compute(KH(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),qH,XH,YH,aE,QH,ZH,JH,eK,tK,rK,nK,iK,oE,sK,aK,oK,lK,cK,koe,Soe,Dqe=Ze(()=>{Rt(),Zt(),On(),Jt(),qH=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},XH=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((i,s)=>n[i]=e[s]),n},YH=(e,t,r,n,i,s)=>{let[a,o,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],c=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>s.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(o>0&&e.length>o&&e[o].dims.length===1&&e[o].dims[0]>0){if(e[o].getFloat32Array().forEach(d=>n.push(d)),n.length!==0&&n.length!==c&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");qH(n,t),t.axes.length>0&&XH(n,t.axes,c).forEach((d,u)=>n[u]=d)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==0&&i.length!==c&&r>=18&&i.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(i.length!==0&&i.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof i<"u"&&n.length>0&&i.length>c)throw new Error("Resize requires only of scales or sizes to be specified")},aE=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,QH=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${aE("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${aE("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",ZH=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",JH=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?n:e.slice();return t.length>0?(t.forEach((s,a)=>{n[s]=i[a],n[a+r]=i[t.length+a]}),n):i},eK=(e,t,r,n)=>{let i=[];if(r.length>0)if(n.length>0){if(e.forEach(s=>i.push(s)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((s,a)=>i[s]=r[a])}else r.forEach(s=>i.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((s,a)=>Math.round(s*t[a]))}return i},tK=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(s=>t[s]=n),r.axes.forEach(s=>i[s]=Math.round(e[s]*t[s]))):(t.fill(n,0,t.length),i.forEach((s,a)=>i[a]=Math.round(s*t[a]))),i},rK=(e,t,r,n,i)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${Mt("uniforms.scales","i",n)};
        var roi_low = ${Mt("uniforms.roi","i",i)};
        var roi_hi = ${Mt("uniforms.roi",`i + ${t.length}`,i)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${Mt("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${Mt("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,nK=(e,t,r,n,i,s,a)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${Mt("uniforms.scales","i",i)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${Mt("uniforms.roi","i",s)};
          var roi_hi = ${Mt("uniforms.roi",`i + ${r.length}`,s)};
          var input_shape_i = ${Mt("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${Mt("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,iK=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${Mt("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,oE=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",sK=(e,t,r,n,i)=>{let[s,a,o,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],c=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${c} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(row, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",o,`max(0, min(col, ${r[o]} - 1))`)};
      ${oE(e,l,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${c} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${c} = originalIndices[${a}];
      var col:${c} = originalIndices[${o}];
      ${n?`if (row < 0 || row > (${r[a]} - 1) || col < 0 || col > (${r[o]} - 1)) {
        return ${i};
      }`:""};
      row = max(0, min(row, ${r[a]} - 1));
      col = max(0, min(col, ${r[o]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${c} = getInputValue(batch, channel, row1, col1);
      var x12: ${c} = getInputValue(batch, channel, row1, col2);
      var x21: ${c} = getInputValue(batch, channel, row2, col1);
      var x22: ${c} = getInputValue(batch, channel, row2, col2);
      var dx1: ${c} = abs(row - ${c}(row1));
      var dx2: ${c} = abs(${c}(row2) - row);
      var dy1: ${c} = abs(col - ${c}(col1));
      var dy2: ${c} = abs(${c}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},aK=(e,t,r,n,i,s,a,o,l,c)=>{let d=r.length===2,[u,f]=d?[0,1]:[2,3],p=e.type.value,m=g=>{let x=g===u?"row":"col";return`
      fn ${x}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${p} {
        var output_index = ${t.indicesGet("output_indices",g)};
        var originalIdx: ${p} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[g]},
        ${n[g]}, ${r[g]}, ${s[g]}, ${s[g]} + ${r.length});
        var fractOriginalIdx: ${p} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${o} && (originalIdx < 0 || originalIdx > (${r[g]} - 1))) {
          return ${l};
        }
        var data: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${x}: ${p} = originalIdx + ${p}(i);
          if (${x} < 0 || ${x} >= ${r[g]}) {
            ${c?`coefs[i + 1] = 0.0;
                        continue;`:o?`return ${l};`:`${x} = max(0, min(${x}, ${r[g]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",g,`u32(${x})`)};
          data[i + 1] = ${g===u?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${m(u)};
    ${m(f)};
  fn getCubicInterpolationCoefs(s: ${p}) -> array<${p}, 4> {
    var absS = abs(s);
    var coeffs: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${p} = 1.0 - absS;
    var twoMinusAbsS: ${p} = 2.0 - absS;
    var onePlusAbsS: ${p} = 1.0 + absS;
    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};
    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;
    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${p}, 4>, coefs: array<${p}, 4>) -> ${p} {
    var coefsSum: ${p} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${p} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},oK=(e,t,r,n,i)=>{let[s,a,o,l,c]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],d=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${d} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(depth, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",o,`max(0, min(height, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${oE(e,c,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${d} = originalIndices[${a}];
      var height:${d} = originalIndices[${o}];
      var width:${d} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[a]} - 1) || height < 0 || height > (${r[o]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${i};
        }`:""};

    depth = max(0, min(depth, ${r[a]} - 1));
      height = max(0, min(height, ${r[o]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${c}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${d} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${d} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${d} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${d} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${d} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${d} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${d} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${d} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${d} = abs(depth - ${d}(depth1));
      var dx2: ${d} = abs(${d}(depth2) - depth);
      var dy1: ${d} = abs(height - ${d}(height1));
      var dy2: ${d} = abs(${d}(height2) - height);
      var dz1: ${d} = abs(width - ${d}(width1));
      var dz2: ${d} = abs(${d}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},lK=(e,t,r,n,i,s)=>{let a=e.dims,o=JH(s,t.axes,a.length),l=eK(a,n,i,t.axes),c=n.slice();n.length===0&&(c=a.map((y,w)=>y===0?1:l[w]/y),t.keepAspectRatioPolicy!=="stretch"&&(l=tK(a,c,t)));let d=bt("output",e.dataType,l.length),u=Be("input",e.dataType,a.length),f=Ne.size(l),p=a.length===l.length&&a.every((y,w)=>y===l[w]),m=t.coordinateTransformMode==="tf_crop_and_resize",g=t.extrapolationValue,x=u.type.value,v=y=>`
      ${p?"":`
      ${QH(t.coordinateTransformMode,x)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${iK(u,a)};
              ${ZH(t.nearestMode,r,x)};
              ${nK(u,d,a,l,c.length,o.length,m)};
              `;case"linear":return`
              ${rK(d,a,l,c.length,o.length)};
              ${(()=>{if(a.length===2||a.length===4)return`${sK(u,d,a,m,g)}`;if(a.length===3||a.length===5)return`${oK(u,d,a,m,g)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(a.length===2||a.length===4)return`${aK(u,d,a,l,c,o,t.cubicCoeffA,m,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${y.registerUniform("output_size","u32").registerUniform("scales","f32",c.length).registerUniform("roi","f32",o.length).declareVariables(u,d)}
      ${y.mainStart()}
        ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${p?"output[global_idx] = input[global_idx];":`
        let output_indices = ${d.offsetToIndices("global_idx")};
        var input_indices: ${u.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${u.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${c.length>0?t.mode==="cubic"?c:c.length:""}|${i.length>0?i:""}|${o.length>0?o:""}|${p}|${t.mode==="nearest"?a.length:a}`,inputDependencies:["rank"]},getShaderSource:v,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},{type:1,data:c},{type:1,data:o},...St(a,l)]})}},cK=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},koe=(e,t)=>{let r=[],n=[],i=[],s=cK(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");YH(e.inputs,t,s,r,n,i),e.compute(lK(e.inputs[0],t,s,r,n,i),{inputs:[0]})},Soe=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,i=e.cubicCoeffA,s=e.excludeOutside!==0,a=e.extrapolationValue,o=e.keepAspectRatioPolicy,l=e.mode,c=e.nearestMode===""?"simple":e.nearestMode;return Cr({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:i,excludeOutside:s,extrapolationValue:a,keepAspectRatioPolicy:o,mode:l,nearestMode:c})}}),uK,dK,Poe,Rqe=Ze(()=>{Rt(),Zt(),Jt(),uK=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},dK=(e,t,r,n)=>{let i=t.simplified,s=e[0].dims,a=Ne.size(s),o=s,l=a,c=s.slice(-1)[0],d=n?s.slice(0,-1).concat(1):[],u=!i&&e.length>3,f=e.length>4,p=n&&r>1,m=n&&r>2,g=r>3,x=64,v=Tn(c),y=[{type:12,data:l},{type:12,data:v},{type:12,data:c},{type:1,data:t.epsilon}],w=_=>{let T=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],M=[Be("x",e[0].dataType,e[0].dims,v),Be("skip",e[1].dataType,e[1].dims,v),Be("gamma",e[2].dataType,e[2].dims,v)];u&&M.push(Be("beta",e[3].dataType,e[3].dims,v)),f&&M.push(Be("bias",e[4].dataType,e[4].dims,v)),M.push(bt("output",e[0].dataType,o,v)),p&&M.push(bt("mean_output",1,d)),m&&M.push(bt("inv_std_output",1,d)),g&&M.push(bt("input_skip_bias_sum",e[0].dataType,o,v));let k=bi(e[0].dataType),j=bi(1,v);return`

      ${_.registerUniforms(T).declareVariables(...M)}
      var<workgroup> sum_shared : array<${j}, ${x}>;
      var<workgroup> sum_squared_shared : array<${j}, ${x}>;

      ${_.mainStart([x,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${x};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${x};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${x-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${f?"bias[offset1d + i]":k+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${g?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${jh(k,v,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${x};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${_u("sum",v)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${_u("square_sum",v)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);
        ${p?"mean_output[global_idx] = mean;":""}
        ${m?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${i?"":`- ${k}(mean)`}) *
            ${k}(inv_std_dev) * gamma[offset1d + i]
            ${u?"+ beta[offset1d + i]":""};
        }
      }`},b=[{dims:o,dataType:e[0].dataType}];return r>1&&b.push({dims:d,dataType:1}),r>2&&b.push({dims:d,dataType:1}),r>3&&b.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${v};${p};${m};${g}`,inputDependencies:e.map((_,T)=>"type")},getShaderSource:w,getRunData:()=>({outputs:b,dispatchGroup:{x:Math.ceil(l/c)},programUniforms:y})}},Poe=(e,t)=>{uK(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(dK(e.inputs,t,e.outputCount,!1),{outputs:r})}}),fK,Sg,hK,lE,pK,mK,Eoe,Coe,Lqe=Ze(()=>{Rt(),Zt(),On(),Jt(),fK=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},Sg=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},hK=(e,t)=>{if(e.length>1){let r=Sg(e,1),n=Sg(e,2),i=Sg(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),Cr({starts:r,ends:n,axes:i})}else return t},lE=(e,t,r,n,i)=>{let s=e;return e<0&&(s+=r[n[t]]),i[t]<0?Math.max(0,Math.min(s,r[n[t]]-1)):Math.max(0,Math.min(s,r[n[t]]))},pK=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${Mt("uniforms.input_shape","i",r.length)};
            let steps_i = ${Mt("uniforms.steps","i",r.length)};
            let signs_i = ${Mt("uniforms.signs","i",r.length)};
            let starts_i = ${Mt("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,mK=(e,t)=>{let r=e[0].dims,n=Ne.size(r),i=t.axes.length>0?Ne.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],s=Sg(e,4);s.forEach(v=>v!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(i.length).fill(1));let a=t.starts.map((v,y)=>lE(v,y,r,i,s)),o=t.ends.map((v,y)=>lE(v,y,r,i,s));if(i.length!==a.length||i.length!==o.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let v=0;v<r.length;++v)i.includes(v)||(a.splice(v,0,0),o.splice(v,0,r[v]),s.splice(v,0,1));let l=s.map(v=>Math.sign(v));s.forEach((v,y,w)=>{if(v<0){let b=(o[y]-a[y])/v,_=a[y],T=_+b*s[y];a[y]=T,o[y]=_,w[y]=-v}});let c=r.slice(0);i.forEach((v,y)=>{c[v]=Math.ceil((o[v]-a[v])/s[v])});let d={dims:c,dataType:e[0].dataType},u=bt("output",e[0].dataType,c.length),f=Be("input",e[0].dataType,e[0].dims.length),p=Ne.size(c),m=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:s.length}],g=[{type:12,data:p},{type:12,data:a},{type:6,data:l},{type:12,data:s},...St(e[0].dims,c)],x=v=>`
      ${v.registerUniforms(m).declareVariables(f,u)}
        ${pK(f,u,r)}
        ${v.mainStart()}
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${u.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${u.setByOffset("global_idx",f.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${a.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:x,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:g})}},Eoe=(e,t)=>{fK(e.inputs,t);let r=hK(e.inputs,t);e.compute(mK(e.inputs,r),{inputs:[0]})},Coe=e=>{let t=e.starts,r=e.ends,n=e.axes;return Cr({starts:t,ends:r,axes:n})}}),gK,yK,joe,Aoe,Fqe=Ze(()=>{Rt(),Zt(),On(),$u(),Jt(),gK=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},yK=(e,t)=>{let r=e.inputs[0],n=r.dims,i=Ne.size(n),s=n.length,a=Ne.normalizeAxis(t.axis,s),o=a<n.length-1,l,c=[];o?(c=Array.from({length:s},(M,k)=>k),c[a]=s-1,c[s-1]=a,l=e.compute(ca(r,c),{inputs:[r],outputs:[-1]})[0]):l=r;let d=l.dims,u=d[s-1],f=i/u,p=Tn(u),m=u/p,g=64;f===1&&(g=256);let x=(M,k)=>k===4?`max(max(${M}.x, ${M}.y), max(${M}.z, ${M}.w))`:k===2?`max(${M}.x, ${M}.y)`:k===3?`max(max(${M}.x, ${M}.y), ${M}.z)`:M,v=Be("x",l.dataType,l.dims,p),y=bt("result",l.dataType,l.dims,p),w=v.type.value,b=bi(l.dataType)==="f32"?`var threadMax = ${w}(-3.402823e+38f);`:`var threadMax = ${w}(-65504.0h);`,_=M=>`
      var<workgroup> rowMaxShared : ${w};
      var<workgroup> rowSumShared : ${w};
      var<workgroup> threadShared : array<${w}, ${g}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${w} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${w}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${M.registerUniform("packedCols","i32").declareVariables(v,y)}
      ${M.mainStart(g)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${g};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${b}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${w}(${x("threadShared[0]",p)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${w}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${w}(${_u("threadShared[0]",p)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,T=e.compute({name:"Softmax",shaderCache:{hint:`${p};${g}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:d,dataType:l.dataType}],dispatchGroup:{x:f},programUniforms:[{type:6,data:m}]}),getShaderSource:_},{inputs:[l],outputs:[o?-1:0]})[0];o&&e.compute(ca(T,c),{inputs:[T]})},joe=(e,t)=>{gK(e.inputs),yK(e,t)},Aoe=e=>Cr({axis:e.axis})}),cE,vK,_K,xK,Ooe,Bqe=Ze(()=>{Rt(),Zt(),Jt(),cE=e=>Array.from(e.getBigInt64Array(),Number),vK=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(cE(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},_K=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},xK=(e,t)=>{let r=e[0].dims,n=t??cE(e[1]),i=_K(r,n),s=Ne.size(i),a=e[0].dataType,o=Be("input",a,r.length),l=bt("output",a,i.length),c=d=>`
      const inputShape = ${o.indices(...r)};
      ${d.registerUniform("output_size","u32").declareVariables(o,l)}
      ${d.mainStart()}
      ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${o.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${o.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${o.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",o.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},...St(e[0].dims,i)]}),getShaderSource:c}},Ooe=e=>{vK(e.inputs),e.compute(xK(e.inputs),{inputs:[0]})}}),bK,wK,$oe,zqe=Ze(()=>{Rt(),Zt(),Jt(),bK=(e,t,r,n,i)=>{let s=bt("output_data",i,r.length,4),a=Be("a_data",t[1].dataType,t[1].dims.length,4),o=Be("b_data",t[2].dataType,t[2].dims.length,4),l=Be("c_data",t[0].dataType,t[0].dims.length,4),c,d=(u,f,p)=>`select(${f}, ${u}, ${p})`;if(!n)c=s.setByOffset("global_idx",d(a.getByOffset("global_idx"),o.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let u=(f,p,m="")=>{let g=`a_data[index_a${p}][component_a${p}]`,x=`b_data[index_b${p}][component_b${p}]`,v=`bool(c_data[index_c${p}] & (0xffu << (component_c${p} * 8)))`;return`
            let output_indices${p} = ${s.offsetToIndices(`global_idx * 4u + ${p}u`)};
            let offset_a${p} = ${a.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_b${p} = ${o.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_c${p} = ${l.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let index_a${p} = offset_a${p} / 4u;
            let index_b${p} = offset_b${p} / 4u;
            let index_c${p} = offset_c${p} / 4u;
            let component_a${p} = offset_a${p} % 4u;
            let component_b${p} = offset_b${p} % 4u;
            let component_c${p} = offset_c${p} % 4u;
            ${f}[${p}] = ${m}(${d(g,x,v)});
          `};i===9?c=`
            var data = vec4<u32>(0);
            ${u("data",0,"u32")}
            ${u("data",1,"u32")}
            ${u("data",2,"u32")}
            ${u("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:c=`
            ${u("output_data[global_idx]",0)}
            ${u("output_data[global_idx]",1)}
            ${u("output_data[global_idx]",2)}
            ${u("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,a,o,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${c}
      }`},wK=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,i=e[1].dataType,s=!(Ne.areEqual(t,r)&&Ne.areEqual(r,n)),a=t,o=Ne.size(t);if(s){let c=Up.calcShape(Up.calcShape(t,r,!1),n,!1);if(!c)throw new Error("Can't perform where op on the given tensors");a=c,o=Ne.size(a)}let l=Math.ceil(o/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:c=>bK(c,e,a,s,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(o/64/4)},programUniforms:[{type:12,data:l},...St(n,t,r,a)]})}},$oe=e=>{e.compute(wK(e.inputs))}}),Ioe,Vqe=Ze(()=>{rqe(),pN(),nqe(),iqe(),sqe(),aqe(),oqe(),fqe(),pqe(),mqe(),gqe(),yqe(),vqe(),_qe(),xqe(),bqe(),wqe(),Tqe(),Mqe(),kqe(),Sqe(),Pqe(),Eqe(),Cqe(),jqe(),Jae(),Aqe(),Oqe(),$qe(),Iqe(),Nqe(),hN(),Dqe(),ioe(),Rqe(),Lqe(),Fqe(),roe(),Bqe(),$u(),mN(),zqe(),Ioe=new Map([["Abs",[Pse]],["Acos",[Ese]],["Acosh",[Cse]],["Add",[cae]],["ArgMax",[Tse,tA]],["ArgMin",[wse,tA]],["Asin",[jse]],["Asinh",[Ase]],["Atan",[Ose]],["Atanh",[$se]],["Attention",[Mse]],["AveragePool",[hoe,foe]],["BatchNormalization",[kse]],["BiasAdd",[Sse]],["BiasSplitGelu",[lae]],["Cast",[Nse,Ise]],["Ceil",[Rse]],["Clip",[Dse]],["Concat",[_ae,xae]],["Conv",[oA,aA]],["ConvTranspose",[jae,Cae]],["Cos",[Lse]],["Cosh",[Fse]],["CumSum",[Aae,Oae]],["DepthToSpace",[$ae,Iae]],["DequantizeLinear",[xoe,boe]],["Div",[uae]],["Einsum",[Nae,Dae]],["Elu",[Bse,Ug]],["Equal",[dae]],["Erf",[zse]],["Exp",[Vse]],["Expand",[Rae]],["FastGelu",[Lae]],["Floor",[Use]],["FusedConv",[oA,aA]],["Gather",[Bae,Fae]],["GatherElements",[Hae,Gae]],["GatherBlockQuantized",[Uae,Wae]],["GatherND",[zae,Vae]],["Gelu",[Wse]],["Gemm",[qae,Kae]],["GlobalAveragePool",[moe,poe]],["GlobalMaxPool",[_oe,voe]],["Greater",[mae]],["GreaterOrEqual",[yae]],["GridSample",[Xae,Yae]],["GroupQueryAttention",[soe]],["HardSigmoid",[Zse,Qse]],["InstanceNormalization",[aoe]],["LayerNormalization",[ooe]],["LeakyRelu",[Gse,Ug]],["Less",[gae]],["LessOrEqual",[vae]],["Log",[aae]],["MatMul",[loe]],["MatMulNBits",[coe,uoe]],["MaxPool",[goe,yoe]],["Mul",[fae]],["MultiHeadAttention",[Zae,Qae]],["Neg",[Kse]],["Not",[Hse]],["Pad",[doe]],["Pow",[hae]],["QuickGelu",[oae,Ug]],["Range",[woe]],["Reciprocal",[qse]],["ReduceMin",[yse]],["ReduceMean",[fse]],["ReduceMax",[gse]],["ReduceSum",[_se]],["ReduceProd",[vse]],["ReduceL1",[hse]],["ReduceL2",[pse]],["ReduceLogSum",[bse]],["ReduceLogSumExp",[mse]],["ReduceSumSquare",[xse]],["Relu",[Xse]],["Resize",[koe,Soe]],["RotaryEmbedding",[noe]],["ScatterND",[Moe,Toe]],["Sigmoid",[Yse]],["Sin",[Jse]],["Sinh",[eae]],["Slice",[Eoe,Coe]],["SkipLayerNormalization",[Poe]],["Split",[eoe,toe]],["Sqrt",[tae]],["Softmax",[joe,Aoe]],["Sub",[pae]],["Tan",[rae]],["Tanh",[nae]],["ThresholdedRelu",[sae,Ug]],["Tile",[Ooe]],["Transpose",[ese,tse]],["Where",[$oe]]])}),Noe,Uqe=Ze(()=>{Co(),sc(),Jt(),Noe=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,i){ko(e.programInfo.name);let s=this.backend.device,a=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let o=[];for(let c of t)o.push({binding:o.length,resource:{buffer:c.buffer}});for(let c of r)o.push({binding:o.length,resource:{buffer:c.buffer}});i&&o.push({binding:o.length,resource:i});let l=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:o,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let c={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(c)}a.setPipeline(e.computePipeline),a.setBindGroup(0,l),a.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),$a(e.programInfo.name)}dispose(){}build(e,t){ko(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(c=>{r.features.has(c.feature)&&n.push(`enable ${c.extension};`)});let i=Jie(t,this.backend.device.limits),s=e.getShaderSource(i),a=`${n.join(`
`)}
${i.additionalImplementations}
${s}`,o=r.createShaderModule({code:a,label:e.name});yr("verbose",()=>`[WebGPU] ${e.name} shader code: ${a}`);let l=r.createComputePipeline({compute:{module:o,entryPoint:"main"},layout:"auto",label:e.name});return $a(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:i.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,i=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=i&&r<=i&&n<=i)return[t,r,n];let s=t*r*n,a=Math.ceil(Math.sqrt(s));if(a>i){if(a=Math.ceil(Math.cbrt(s)),a>i)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a]}else return[a,a,1]}}}),Doe={};_m(Doe,{WebGpuBackend:()=>Roe});var TK,MK,kK,Roe,Wqe=Ze(()=>{Co(),Rt(),sc(),qie(),eqe(),Vqe(),Uqe(),TK=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let i=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let s=e[n].dims.length;r.push(`${i};${s}`);break}case"dims":{let s=e[n].dims.join(",");r.push(`${i};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},MK=(e,t,r)=>{var i,s;let n=e.name;return(i=e.shaderCache)!=null&&i.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${TK(t,((s=e.shaderCache)==null?void 0:s.inputDependencies)??new Array(t.length).fill("dims"))}`,n},kK=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},Roe=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},i=s=>t.features.has(s)&&r.push(s)&&!0;i("chromium-experimental-timestamp-query-inside-passes")||i("timestamp-query"),i("shader-f16"),i("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new kK(t.info||await t.requestAdapterInfo()),this.gpuDataManager=Qie(this),this.programManager=new Noe(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,cN(e.logLevel,!!e.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;ko(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{var n;let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let i=0;i<t.length/2;i++){let s=r[i],a=s.kernelId,o=this.kernels.get(a),l=o.kernelType,c=o.kernelName,d=s.programName,u=s.inputTensorViews,f=s.outputTensorViews,p=t[i*2],m=t[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=p);let g=Number(p-this.queryTimeBase),x=Number(m-this.queryTimeBase);if(!Number.isSafeInteger(g)||!Number.isSafeInteger(x))throw new RangeError("incorrect timestamp range");if((n=this.env.webgpu.profiling)!=null&&n.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:u.map(v=>({dims:v.dims,dataType:Sl(v.dataType)})),outputsMetadata:f.map(v=>({dims:v.dims,dataType:Sl(v.dataType)})),kernelId:a,kernelType:l,kernelName:c,programName:d,startTime:g,endTime:x});else{let v="";u.forEach((w,b)=>{v+=`input[${b}]: [${w.dims}] | ${Sl(w.dataType)}, `});let y="";f.forEach((w,b)=>{y+=`output[${b}]: [${w.dims}] | ${Sl(w.dataType)}, `}),console.log(`[profiling] kernel "${a}|${l}|${c}|${d}" ${v}${y}execution time: ${x-g} ns`)}Kv("GPU",`${d}::${p}::${m}`)}e.unmap(),this.pendingQueries.delete(e)}),$a()}run(e,t,r,n,i,s){ko(e.name);let a=[];for(let y=0;y<t.length;++y){let w=t[y].data;if(w===0)continue;let b=this.gpuDataManager.get(w);if(!b)throw new Error(`no GPU data for input: ${w}`);a.push(b)}let{outputs:o,dispatchGroup:l,programUniforms:c}=e.getRunData(t),d=r.length===0?o.map((y,w)=>w):r;if(d.length!==o.length)throw new Error(`Output size ${d.length} must be equal to ${o.length}.`);let u=[],f=[];for(let y=0;y<o.length;++y){if(!Number.isInteger(d[y])||d[y]<-3||d[y]>=s)throw new Error(`Invalid output index: ${d[y]}`);if(d[y]===-3)continue;let w=d[y]===-1,b=d[y]===-2,_=w||b?i(o[y].dataType,o[y].dims):n(d[y],o[y].dataType,o[y].dims);if(u.push(_),_.data===0)continue;let T=this.gpuDataManager.get(_.data);if(!T)throw new Error(`no GPU data for output: ${_.data}`);if(w&&this.temporaryData.push(T),b){let M=this.kernelPersistentData.get(this.currentKernelId);M||(M=[],this.kernelPersistentData.set(this.currentKernelId,M)),M.push(T)}f.push(T)}if(a.length!==t.length||f.length!==u.length){if(f.length===0)return $a(e.name),u;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let p;if(c){let y=0,w=[];c.forEach(M=>{let k=typeof M.data=="number"?[M.data]:M.data;if(k.length===0)return;let j=M.type===10?2:4,A,R;M.type===10?(R=k.length>4?16:k.length>2?8:k.length*j,A=k.length>4?16:j*k.length):(R=k.length<=2?k.length*j:16,A=16),y=Math.ceil(y/R)*R,w.push(y);let I=M.type===10?8:4;y+=k.length>4?Math.ceil(k.length/I)*A:k.length*j});let b=16;y=Math.ceil(y/b)*b;let _=new ArrayBuffer(y);c.forEach((M,k)=>{let j=w[k],A=typeof M.data=="number"?[M.data]:M.data;if(M.type===6)new Int32Array(_,j,A.length).set(A);else if(M.type===12)new Uint32Array(_,j,A.length).set(A);else if(M.type===10)new Uint16Array(_,j,A.length).set(A);else if(M.type===1)new Float32Array(_,j,A.length).set(A);else throw new Error(`Unsupported uniform type: ${Sl(M.type)}`)});let T=this.gpuDataManager.create(y,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(T.buffer,0,_,0,y),this.gpuDataManager.release(T.id),p={offset:0,size:y,buffer:T.buffer}}let m=this.programManager.normalizeDispatchGroupSize(l),g=m[1]===1&&m[2]===1,x=MK(e,t,g),v=this.programManager.getArtifact(x);if(v||(v=this.programManager.build(e,m),this.programManager.setArtifact(x,v),yr("info",()=>`[artifact] key: ${x}, programName: ${e.name}`)),c&&v.uniformVariablesInfo){if(c.length!==v.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${v.uniformVariablesInfo.length}, got ${c.length} in program "${v.programInfo.name}".`);for(let y=0;y<c.length;y++){let w=c[y],b=w.type,_=typeof w.data=="number"?1:w.data.length,[T,M]=v.uniformVariablesInfo[y];if(b!==T||_!==M)throw new Error(`Uniform variable ${y} mismatch: expect type ${T} with size ${M}, got type ${b} with size ${_} in program "${v.programInfo.name}".`)}}if(yr("info",()=>`[ProgramManager] run "${e.name}" (key=${x}) with ${m[0]}x${m[1]}x${m[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let y={kernelId:this.currentKernelId,programName:v.programInfo.name,inputTensorViews:t,outputTensorViews:u};this.pendingKernels.push(y),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(y)}return this.programManager.run(v,a,f,m,p),$a(e.name),u}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let i=Ioe.get(e);if(!i)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:n,kernelEntry:i[0],attributes:[i[1],r]};this.kernels.set(t,s)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let i=n.kernelType,s=n.kernelName,a=n.kernelEntry,o=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${i}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,o[0]&&(o[1]=o[0](o[1]),o[0]=void 0),yr("info",()=>`[WebGPU] Start to run kernel "[${i}] ${s}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),a(t,o[1]),0}catch(c){return r.push(Promise.resolve(`[WebGPU] Kernel "[${i}] ${s}" failed. ${c}`)),1}finally{l&&r.push(this.device.popErrorScope().then(c=>c?`GPU validation error for kernel "[${i}] ${s}": ${c.message}`:null));for(let c of this.temporaryData)this.gpuDataManager.release(c.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let i=this.sessionExternalDataMapping.get(e);i||(i=new Map,this.sessionExternalDataMapping.set(e,i));let s=i.get(t),a=this.gpuDataManager.registerExternalBuffer(r,n,s);return i.set(t,[a,r]),a}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await Z2(this,e,t);return uN(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){var e;this.queryType="none",(((e=this.env.webgpu.profiling)==null?void 0:e.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){yr("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){yr("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){yr("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let i=this.getComputePassEncoder(),s=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),i.setPipeline(s.computePipeline),i.setBindGroup(0,s.bindGroup),i.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),Loe={};_m(Loe,{init:()=>Foe});var Mx,SK,Foe,Gqe=Ze(()=>{Rt(),sc(),Zt(),J9e(),Mx=class Boe{constructor(t,r,n,i){this.module=t,this.dataType=r,this.data=n,this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Ne.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Ne.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Ne.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Ne.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Ne.size(t)!==Ne.size(this.dims))throw new Error("Invalid new shape");return new Boe(this.module,this.dataType,this.data,t)}},SK=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,i=r/e.PTR_SIZE,s=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*i++,s));let a=Number(e.getValue(n*i++,s));this.outputCount=Number(e.getValue(n*i++,s)),this.customDataOffset=Number(e.getValue(n*i++,"*")),this.customDataSize=Number(e.getValue(n*i++,s));let o=[];for(let l=0;l<a;l++){let c=Number(e.getValue(n*i++,s)),d=Number(e.getValue(n*i++,"*")),u=Number(e.getValue(n*i++,s)),f=[];for(let p=0;p<u;p++)f.push(Number(e.getValue(n*i++,s)));o.push(new Mx(e,c,d,f))}this.inputs=o}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){var a;let r=((a=t==null?void 0:t.inputs)==null?void 0:a.map(o=>typeof o=="number"?this.inputs[o]:o))??this.inputs,n=(t==null?void 0:t.outputs)??[],i=(o,l,c)=>new Mx(this.module,l,this.output(o,c),c),s=(o,l)=>{let c=_d(o,l);if(!c)throw new Error(`Unsupported data type: ${o}`);let d=c>0?this.backend.gpuDataManager.create(c).id:0;return new Mx(this.module,o,d,l)};return this.backend.run(e,r,n,i,s,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,i=n===4?"i32":"i64",s=this.module.stackAlloc((1+t.length)*n);this.module.setValue(s,t.length,i);for(let a=0;a<t.length;a++)this.module.setValue(s+n*(a+1),t[a],i);return this.module._JsepOutput(this.opKernelContext,e,s)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},Foe=async(e,t,r,n)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=(Wqe(),Hv(Doe)).WebGpuBackend,a=new s;await a.initialize(r,n),i("webgpu",[a,o=>a.alloc(Number(o)),o=>a.free(o),(o,l,c,d=!1)=>{if(d)yr("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(o)}, dst=${Number(l)}, size=${Number(c)}`),a.memcpy(Number(o),Number(l));else{yr("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(o)}, gpuDataId=${Number(l)}, size=${Number(c)}`);let u=t.HEAPU8.subarray(Number(o>>>0),Number(o>>>0)+Number(c));a.upload(Number(l),u)}},async(o,l,c)=>{yr("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${o}, dataOffset=${l}, size=${c}`),await a.download(Number(o),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+c)>>>0))},(o,l,c)=>a.createKernel(o,Number(l),c,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),o=>a.releaseKernel(o),(o,l,c,d)=>{yr("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${c}, kernel=${o}, contextDataOffset=${l}`);let u=new SK(t,a,Number(l));return a.computeKernel(Number(o),u,d)},()=>a.captureBegin(),()=>a.captureEnd(),()=>a.replay()])}else{let s=new Yie(r);i("webnn",[s,()=>s.reserveTensorId(),a=>s.releaseTensorId(a),async(a,o,l,c,d)=>s.ensureTensor(a,o,l,c,d),(a,o)=>{s.uploadTensor(a,o)},async(a,o)=>s.downloadTensor(a,o)])}}}),PK,bN,wN,_c,EK,uE,u1,TN,MN,dE,kN,SN,PN,zoe=Ze(()=>{Y9e(),Q9e(),Rt(),_f(),iN(),Wie(),PK=(e,t)=>{Wr()._OrtInit(e,t)!==0&&Dr("Can't initialize onnxruntime.")},bN=async e=>{PK(e.wasm.numThreads,s1(e.logLevel))},wN=async(e,t)=>{var r,n;(n=(r=Wr()).asyncInit)==null||n.call(r);{let i=(Gqe(),Hv(Loe)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let s=e.webgpu.adapter;if(s){if(typeof s.limits!="object"||typeof s.features!="object"||typeof s.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let a=e.webgpu.powerPreference;if(a!==void 0&&a!=="low-power"&&a!=="high-performance")throw new Error(`Invalid powerPreference setting: "${a}"`);let o=e.webgpu.forceFallbackAdapter;if(o!==void 0&&typeof o!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${o}"`);if(s=await navigator.gpu.requestAdapter({powerPreference:a,forceFallbackAdapter:o}),!s)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await i("webgpu",Wr(),e,s)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await i("webnn",Wr(),e)}}},_c=new Map,EK=e=>{let t=Wr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,i,i+n)!==0&&Dr("Can't get session input/output count.");let s=n===4?"i32":"i64";return[Number(t.getValue(i,s)),Number(t.getValue(i+n,s))]}finally{t.stackRestore(r)}},uE=(e,t)=>{let r=Wr(),n=r.stackSave(),i=0;try{let s=r.PTR_SIZE,a=r.stackAlloc(2*s);r._OrtGetInputOutputMetadata(e,t,a,a+s)!==0&&Dr("Can't get session input/output metadata.");let o=Number(r.getValue(a,"*"));i=Number(r.getValue(a+s,"*"));let l=r.HEAP32[i/4];if(l===0)return[o,0];let c=r.HEAPU32[i/4+1],d=[];for(let u=0;u<c;u++){let f=Number(r.getValue(i+8+u*s,"*"));d.push(f!==0?r.UTF8ToString(f):Number(r.getValue(i+8+(u+c)*s,"*")))}return[o,l,d]}finally{r.stackRestore(n),i!==0&&r._OrtFree(i)}},u1=e=>{let t=Wr(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},TN=async(e,t)=>{var u,f,p,m;let r,n,i=Wr();Array.isArray(e)?[r,n]=e:e.buffer===i.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=u1(e);let s=0,a=0,o=0,l=[],c=[],d=[];try{if([a,l]=await Uie(t),(t==null?void 0:t.externalData)&&i.mountExternalData){let k=[];for(let j of t.externalData){let A=typeof j=="string"?j:j.path;k.push(lN(typeof j=="string"?j:j.data).then(R=>{i.mountExternalData(A,R)}))}await Promise.all(k)}for(let k of(t==null?void 0:t.executionProviders)??[])if((typeof k=="string"?k:k.name)==="webnn"){if(i.shouldTransferToMLTensor=!1,typeof k!="string"){let j=k,A=j==null?void 0:j.context,R=j==null?void 0:j.gpuDevice,I=j==null?void 0:j.deviceType,$=j==null?void 0:j.powerPreference;A?i.currentContext=A:R?i.currentContext=await i.webnnCreateMLContext(R):i.currentContext=await i.webnnCreateMLContext({deviceType:I,powerPreference:$})}else i.currentContext=await i.webnnCreateMLContext();break}s=await i._OrtCreateSession(r,n,a),(u=i.webgpuOnCreateSession)==null||u.call(i,s),s===0&&Dr("Can't create a session."),(f=i.jsepOnCreateSession)==null||f.call(i),i.currentContext&&(i.webnnRegisterMLContext(s,i.currentContext),i.currentContext=void 0,i.shouldTransferToMLTensor=!0);let[g,x]=EK(s),v=!!(t!=null&&t.enableGraphCapture),y=[],w=[],b=[],_=[],T=[];for(let k=0;k<g;k++){let[j,A,R]=uE(s,k);j===0&&Dr("Can't get an input name."),c.push(j);let I=i.UTF8ToString(j);y.push(I),b.push(A===0?{name:I,isTensor:!1}:{name:I,isTensor:!0,type:Sl(A),shape:R})}for(let k=0;k<x;k++){let[j,A,R]=uE(s,k+g);j===0&&Dr("Can't get an output name."),d.push(j);let I=i.UTF8ToString(j);w.push(I),_.push(A===0?{name:I,isTensor:!1}:{name:I,isTensor:!0,type:Sl(A),shape:R});{if(v&&(t==null?void 0:t.preferredOutputLocation)===void 0){T.push("gpu-buffer");continue}let $=typeof(t==null?void 0:t.preferredOutputLocation)=="string"?t.preferredOutputLocation:((p=t==null?void 0:t.preferredOutputLocation)==null?void 0:p[I])??"cpu";if($!=="cpu"&&$!=="cpu-pinned"&&$!=="gpu-buffer"&&$!=="ml-tensor")throw new Error(`Not supported preferred output location: ${$}.`);if(v&&$!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${$}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);T.push($)}}let M=null;return T.some(k=>k==="gpu-buffer"||k==="ml-tensor")&&(o=i._OrtCreateBinding(s),o===0&&Dr("Can't create IO binding."),M={handle:o,outputPreferredLocations:T,outputPreferredLocationsEncoded:T.map(k=>Y2(k))}),_c.set(s,[s,c,d,M,v,!1]),[s,y,w,b,_]}catch(g){throw c.forEach(x=>i._OrtFree(x)),d.forEach(x=>i._OrtFree(x)),o!==0&&i._OrtReleaseBinding(o)!==0&&Dr("Can't release IO binding."),s!==0&&i._OrtReleaseSession(s)!==0&&Dr("Can't release session."),g}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a)!==0&&Dr("Can't release session options."),l.forEach(g=>i._free(g)),(m=i.unmountExternalData)==null||m.call(i)}},MN=e=>{var l,c,d;let t=Wr(),r=_c.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,i,s,a,o]=r;a&&(o&&t._OrtClearBoundOutputs(a.handle)!==0&&Dr("Can't clear bound outputs."),t._OrtReleaseBinding(a.handle)!==0&&Dr("Can't release IO binding.")),(l=t.jsepOnReleaseSession)==null||l.call(t,e),(c=t.webnnOnReleaseSession)==null||c.call(t,e),(d=t.webgpuOnReleaseSession)==null||d.call(t,e),i.forEach(u=>t._OrtFree(u)),s.forEach(u=>t._OrtFree(u)),t._OrtReleaseSession(n)!==0&&Dr("Can't release session."),_c.delete(e)},dE=async(e,t,r,n,i,s,a=!1)=>{if(!e){t.push(0);return}let o=Wr(),l=o.PTR_SIZE,c=e[0],d=e[1],u=e[3],f=u,p,m;if(c==="string"&&(u==="gpu-buffer"||u==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(a&&u!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${s} when enableGraphCapture is true.`);if(u==="gpu-buffer"){let v=e[2].gpuBuffer;m=_d(ih(c),d);{let y=o.jsepRegisterBuffer;if(!y)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');p=y(n,s,v,m)}}else if(u==="ml-tensor"){let v=e[2].mlTensor;m=_d(ih(c),d);let y=o.webnnRegisterMLTensor;if(!y)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');p=y(n,v,ih(c),d)}else{let v=e[2];if(Array.isArray(v)){m=l*v.length,p=o._malloc(m),r.push(p);for(let y=0;y<v.length;y++){if(typeof v[y]!="string")throw new TypeError(`tensor data at index ${y} is not a string`);o.setValue(p+y*l,uo(v[y],r),"*")}}else{let y=o.webnnIsGraphInput;if(c!=="string"&&y){let w=o.UTF8ToString(i);if(y(n,w)){let b=ih(c);m=_d(b,d),f="ml-tensor";let _=o.webnnCreateTemporaryTensor,T=o.webnnUploadTensor;if(!_||!T)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let M=await _(n,b,d);T(M,new Uint8Array(v.buffer,v.byteOffset,v.byteLength)),p=M}else m=v.byteLength,p=o._malloc(m),r.push(p),o.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,m),p)}else m=v.byteLength,p=o._malloc(m),r.push(p),o.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,m),p)}}let g=o.stackSave(),x=o.stackAlloc(4*d.length);try{d.forEach((y,w)=>o.setValue(x+w*l,y,l===4?"i32":"i64"));let v=o._OrtCreateTensor(ih(c),p,m,x,d.length,Y2(f));v===0&&Dr(`Can't create tensor for input/output. session=${n}, index=${s}.`),t.push(v)}finally{o.stackRestore(g)}},kN=async(e,t,r,n,i,s)=>{var R,I,$,F;let a=Wr(),o=a.PTR_SIZE,l=_c.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let c=l[0],d=l[1],u=l[2],f=l[3],p=l[4],m=l[5],g=t.length,x=n.length,v=0,y=[],w=[],b=[],_=[],T=a.stackSave(),M=a.stackAlloc(g*o),k=a.stackAlloc(g*o),j=a.stackAlloc(x*o),A=a.stackAlloc(x*o);try{[v,y]=Vie(s);for(let H=0;H<g;H++)await dE(r[H],w,_,e,d[t[H]],t[H],p);for(let H=0;H<x;H++)await dE(i[H],b,_,e,u[n[H]],g+n[H],p);for(let H=0;H<g;H++)a.setValue(M+H*o,w[H],"*"),a.setValue(k+H*o,d[t[H]],"*");for(let H=0;H<x;H++)a.setValue(j+H*o,b[H],"*"),a.setValue(A+H*o,u[n[H]],"*");if(f&&!m){let{handle:H,outputPreferredLocations:B,outputPreferredLocationsEncoded:te}=f;if(d.length!==g)throw new Error(`input count from feeds (${g}) is expected to be always equal to model's input count (${d.length}).`);for(let ae=0;ae<g;ae++){let z=t[ae];await a._OrtBindInput(H,d[z],w[ae])!==0&&Dr(`Can't bind input[${ae}] for session=${e}.`)}for(let ae=0;ae<x;ae++){let z=n[ae];(R=i[ae])!=null&&R[3]?a._OrtBindOutput(H,u[z],b[ae],0)!==0&&Dr(`Can't bind pre-allocated output[${ae}] for session=${e}.`):a._OrtBindOutput(H,u[z],0,te[z])!==0&&Dr(`Can't bind output[${ae}] to ${B[ae]} for session=${e}.`)}_c.set(e,[c,d,u,f,p,!0])}(I=a.jsepOnRunStart)==null||I.call(a,c),($=a.webnnOnRunStart)==null||$.call(a,c);let V;f?V=await a._OrtRunWithBinding(c,f.handle,x,j,v):V=await a._OrtRun(c,k,M,g,A,x,j,v),V!==0&&Dr("failed to call OrtRun().");let G=[];for(let H=0;H<x;H++){let B=Number(a.getValue(j+H*o,"*"));if(B===b[H]){G.push(i[H]);continue}let te=a.stackSave(),ae=a.stackAlloc(4*o),z=!1,D,K=0;try{a._OrtGetTensorData(B,ae,ae+o,ae+2*o,ae+3*o)!==0&&Dr(`Can't access output tensor data on index ${H}.`);let oe=o===4?"i32":"i64",_e=Number(a.getValue(ae,oe));K=a.getValue(ae+o,"*");let de=a.getValue(ae+o*2,"*"),ve=Number(a.getValue(ae+o*3,oe)),Ie=[];for(let J=0;J<ve;J++)Ie.push(Number(a.getValue(de+J*o,oe)));a._OrtFree(de)!==0&&Dr("Can't free memory for tensor dims.");let Se=Ie.reduce((J,ee)=>J*ee,1);D=Sl(_e);let ge=f==null?void 0:f.outputPreferredLocations[n[H]];if(D==="string"){if(ge==="gpu-buffer"||ge==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let J=[];for(let ee=0;ee<Se;ee++){let Z=a.getValue(K+ee*o,"*"),we=a.getValue(K+(ee+1)*o,"*"),$e=ee===Se-1?void 0:we-Z;J.push(a.UTF8ToString(Z,$e))}G.push([D,Ie,J,"cpu"])}else if(ge==="gpu-buffer"&&Se>0){let J=a.jsepGetBuffer;if(!J)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let ee=J(K),Z=_d(_e,Se);if(Z===void 0||!aN(D))throw new Error(`Unsupported data type: ${D}`);z=!0,G.push([D,Ie,{gpuBuffer:ee,download:a.jsepCreateDownloader(ee,Z,D),dispose:()=>{a._OrtReleaseTensor(B)!==0&&Dr("Can't release tensor.")}},"gpu-buffer"])}else if(ge==="ml-tensor"&&Se>0){let J=a.webnnEnsureTensor,ee=a.webnnIsInt64Supported;if(!J||!ee)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(_d(_e,Se)===void 0||!oN(D))throw new Error(`Unsupported data type: ${D}`);if(D==="int64"&&!ee(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let Z=await J(e,K,_e,Ie,!1);z=!0,G.push([D,Ie,{mlTensor:Z,download:a.webnnCreateMLTensorDownloader(K,D),dispose:()=>{a.webnnReleaseTensorId(K),a._OrtReleaseTensor(B)}},"ml-tensor"])}else{let J=sN(D),ee=new J(Se);new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength).set(a.HEAPU8.subarray(K,K+ee.byteLength)),G.push([D,Ie,ee,"cpu"])}}finally{a.stackRestore(te),D==="string"&&K&&a._free(K),z||a._OrtReleaseTensor(B),(F=a.webnnOnRunEnd)==null||F.call(a,c)}}return f&&!p&&(a._OrtClearBoundOutputs(f.handle)!==0&&Dr("Can't clear bound outputs."),_c.set(e,[c,d,u,f,p,!1])),G}finally{a.stackRestore(T),w.forEach(V=>a._OrtReleaseTensor(V)),b.forEach(V=>a._OrtReleaseTensor(V)),_.forEach(V=>a._free(V)),v!==0&&a._OrtReleaseRunOptions(v),y.forEach(V=>a._free(V))}},SN=e=>{let t=Wr(),r=_c.get(e);if(!r)throw new Error("invalid session id");let n=r[0],i=t._OrtEndProfiling(n);i===0&&Dr("Can't get an profile file name."),t._OrtFree(i)},PN=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),xc,Os,Yf,Pg,Eg,kx,fE,Sx,sd,ad,CK,Voe,Uoe,Woe,Goe,Hoe,Koe,qoe,Xoe=Ze(()=>{Co(),zoe(),_f(),rN(),xc=()=>!!qr.wasm.proxy&&typeof document<"u",Yf=!1,Pg=!1,Eg=!1,Sx=new Map,sd=(e,t)=>{let r=Sx.get(e);r?r.push(t):Sx.set(e,[t])},ad=()=>{if(Yf||!Pg||Eg||!Os)throw new Error("worker not ready")},CK=e=>{switch(e.data.type){case"init-wasm":Yf=!1,e.data.err?(Eg=!0,fE[1](e.data.err)):(Pg=!0,fE[0]()),kx&&(URL.revokeObjectURL(kx),kx=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=Sx.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},Voe=async()=>{if(!Pg){if(Yf)throw new Error("multiple calls to 'initWasm()' detected.");if(Eg)throw new Error("previous call to 'initWasm()' failed.");if(Yf=!0,xc())return new Promise((e,t)=>{Os==null||Os.terminate(),Bie().then(([r,n])=>{try{Os=n,Os.onerror=s=>t(s),Os.onmessage=CK,fE=[e,t];let i={type:"init-wasm",in:qr};!i.in.wasm.wasmPaths&&(r||X2)&&(i.in.wasm.wasmPaths={wasm:new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),Os.postMessage(i),kx=r}catch(i){t(i)}},t)});try{await nN(qr.wasm),await bN(qr),Pg=!0}catch(e){throw Eg=!0,e}finally{Yf=!1}}},Uoe=async e=>{if(xc())return ad(),new Promise((t,r)=>{sd("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:qr}};Os.postMessage(n)});await wN(qr,e)},Woe=async e=>xc()?(ad(),new Promise((t,r)=>{sd("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};Os.postMessage(n,[e.buffer])})):u1(e),Goe=async(e,t)=>{if(xc()){if(t!=null&&t.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ad(),new Promise((r,n)=>{sd("create",[r,n]);let i={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),Os.postMessage(i,s)})}else return TN(e,t)},Hoe=async e=>{if(xc())return ad(),new Promise((t,r)=>{sd("release",[t,r]);let n={type:"release",in:e};Os.postMessage(n)});MN(e)},Koe=async(e,t,r,n,i,s)=>{if(xc()){if(r.some(a=>a[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(a=>a))throw new Error("pre-allocated output tensor is not supported for proxy.");return ad(),new Promise((a,o)=>{sd("run",[a,o]);let l=r,c={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:s}};Os.postMessage(c,PN(l))})}else return kN(e,t,r,n,i,s)},qoe=async e=>{if(xc())return ad(),new Promise((t,r)=>{sd("end-profiling",[t,r]);let n={type:"end-profiling",in:e};Os.postMessage(n)});SN(e)}}),hE,jK,Yoe,Hqe=Ze(()=>{Co(),Xoe(),Rt(),tN(),Wie(),hE=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},jK=e=>{switch(e[3]){case"cpu":return new po(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!aN(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=e[2];return po.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:i})}case"ml-tensor":{let t=e[0];if(!oN(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:i}=e[2];return po.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${e[3]}`)}},Yoe=class{async fetchModelAndCopyToWasmMemory(e){return Woe(await lN(e))}async loadModel(e,t){ko();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await Goe(r,t),$a()}async dispose(){return Hoe(this.sessionId)}async run(e,t,r){ko();let n=[],i=[];Object.entries(e).forEach(u=>{let f=u[0],p=u[1],m=this.inputNames.indexOf(f);if(m===-1)throw new Error(`invalid input '${f}'`);n.push(p),i.push(m)});let s=[],a=[];Object.entries(t).forEach(u=>{let f=u[0],p=u[1],m=this.outputNames.indexOf(f);if(m===-1)throw new Error(`invalid output '${f}'`);s.push(p),a.push(m)});let o=n.map((u,f)=>hE(u,()=>`input "${this.inputNames[i[f]]}"`)),l=s.map((u,f)=>u?hE(u,()=>`output "${this.outputNames[a[f]]}"`):null),c=await Koe(this.sessionId,i,o,a,l,r),d={};for(let u=0;u<c.length;u++)d[this.outputNames[a[u]]]=s[u]??jK(c[u]);return $a(),d}startProfiling(){}endProfiling(){qoe(this.sessionId)}}}),Qoe={};_m(Qoe,{OnnxruntimeWebAssemblyBackend:()=>uA,initializeFlags:()=>cA,wasmBackend:()=>Zoe});var cA,uA,Zoe,Kqe=Ze(()=>{Co(),Xoe(),Hqe(),cA=()=>{(typeof qr.wasm.initTimeout!="number"||qr.wasm.initTimeout<0)&&(qr.wasm.initTimeout=0);let e=qr.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),qr.wasm.simd=!1),typeof qr.wasm.proxy!="boolean"&&(qr.wasm.proxy=!1),typeof qr.wasm.trace!="boolean"&&(qr.wasm.trace=!1),typeof qr.wasm.numThreads!="number"||!Number.isInteger(qr.wasm.numThreads)||qr.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)qr.wasm.numThreads=1;else{let t=typeof navigator>"u"?$9e("node:os").cpus().length:navigator.hardwareConcurrency;qr.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},uA=class{async init(e){cA(),await Voe(),await Uoe(e)}async createInferenceSessionHandler(e,t){let r=new Yoe;return await r.loadModel(e,t),r}},Zoe=new uA});Co();Co();Co();var qqe="1.22.0-dev.20250409-89f8206ba4",Xqe=Iie;{let e=(Kqe(),Hv(Qoe)).wasmBackend;jd("webgpu",e,5),jd("webnn",e,5),jd("cpu",e,10),jd("wasm",e,10)}Object.defineProperty(qr.versions,"web",{value:qqe,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yqe=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return eN},get TRACE(){return Kv},get TRACE_FUNC_BEGIN(){return ko},get TRACE_FUNC_END(){return $a},get Tensor(){return po},default:Xqe,get env(){return qr},get registerBackend(){return jd}},Symbol.toStringTag,{value:"Module"}));var yl={},Qqe={"onnxruntime-common":e=>{e.exports=C9e},"onnxruntime-web":e=>{e.exports=Yqe},"?2ce3":()=>{},"?7992":()=>{},"?5af5":()=>{},"?2b25":()=>{},"?db59":()=>{},"?383f":()=>{},"?fa4b":()=>{},"./node_modules/@huggingface/jinja/dist/index.js":(e,t,r)=>{r.r(t),r.d(t,{Environment:()=>We,Interpreter:()=>ct,Template:()=>Fr,parse:()=>de,tokenize:()=>d});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),i=class{constructor(L,ce){this.value=L,this.type=ce}};function s(L){return/\w/.test(L)}function a(L){return/[0-9]/.test(L)}var o=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["~",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],l=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function c(L,ce={}){return L.endsWith(`
`)&&(L=L.slice(0,-1)),ce.lstrip_blocks&&(L=L.replace(/^[ \t]*({[#%-])/gm,"$1")),ce.trim_blocks&&(L=L.replace(/([#%-]})\n/g,"$1")),L.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}function d(L,ce={}){var ht,Dt;const Y=[],le=c(L,ce);let pe=0,Oe=0;const Ue=At=>{let Wt="";for(;At(le[pe]);){if(le[pe]==="\\"){if(++pe,pe>=le.length)throw new SyntaxError("Unexpected end of input");const pt=le[pe++],xr=l.get(pt);if(xr===void 0)throw new SyntaxError(`Unexpected escaped character: ${pt}`);Wt+=xr;continue}if(Wt+=le[pe++],pe>=le.length)throw new SyntaxError("Unexpected end of input")}return Wt};e:for(;pe<le.length;){const At=(ht=Y.at(-1))==null?void 0:ht.type;if(At===void 0||At===n.CloseStatement||At===n.CloseExpression||At===n.Comment){let pt="";for(;pe<le.length&&!(le[pe]==="{"&&(le[pe+1]==="%"||le[pe+1]==="{"||le[pe+1]==="#"));)pt+=le[pe++];if(pt.length>0){Y.push(new i(pt,n.Text));continue}}if(le[pe]==="{"&&le[pe+1]==="#"){pe+=2;let pt="";for(;le[pe]!=="#"||le[pe+1]!=="}";){if(pe+2>=le.length)throw new SyntaxError("Missing end of comment tag");pt+=le[pe++]}Y.push(new i(pt,n.Comment)),pe+=2;continue}Ue(pt=>/\s/.test(pt));const Wt=le[pe];if(Wt==="-"||Wt==="+"){const pt=(Dt=Y.at(-1))==null?void 0:Dt.type;if(pt===n.Text||pt===void 0)throw new SyntaxError(`Unexpected character: ${Wt}`);switch(pt){case n.Identifier:case n.NumericLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++pe;const xr=Ue(a);Y.push(new i(`${Wt}${xr}`,xr.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[pt,xr]of o){if(pt==="}}"&&Oe>0)continue;if(le.slice(pe,pe+pt.length)===pt){Y.push(new i(pt,xr)),xr===n.OpenExpression?Oe=0:xr===n.OpenCurlyBracket?++Oe:xr===n.CloseCurlyBracket&&--Oe,pe+=pt.length;continue e}}if(Wt==="'"||Wt==='"'){++pe;const pt=Ue(xr=>xr!==Wt);Y.push(new i(pt,n.StringLiteral)),++pe;continue}if(a(Wt)){let pt=Ue(a);if(le[pe]==="."&&a(le[pe+1])){++pe;const xr=Ue(a);pt=`${pt}.${xr}`}Y.push(new i(pt,n.NumericLiteral));continue}if(s(Wt)){const pt=Ue(s);Y.push(new i(pt,n.Identifier));continue}throw new SyntaxError(`Unexpected character: ${Wt}`)}return Y}var u=class{constructor(){ue(this,"type","Statement")}},f=class extends u{constructor(ce){super();ue(this,"type","Program");this.body=ce}},p=class extends u{constructor(ce,Y,le){super();ue(this,"type","If");this.test=ce,this.body=Y,this.alternate=le}},m=class extends u{constructor(ce,Y,le,pe){super();ue(this,"type","For");this.loopvar=ce,this.iterable=Y,this.body=le,this.defaultBlock=pe}},g=class extends u{constructor(){super(...arguments);ue(this,"type","Break")}},x=class extends u{constructor(){super(...arguments);ue(this,"type","Continue")}},v=class extends u{constructor(ce,Y,le){super();ue(this,"type","Set");this.assignee=ce,this.value=Y,this.body=le}},y=class extends u{constructor(ce,Y,le){super();ue(this,"type","Macro");this.name=ce,this.args=Y,this.body=le}},w=class extends u{constructor(ce){super();ue(this,"type","Comment");this.value=ce}},b=class extends u{constructor(){super(...arguments);ue(this,"type","Expression")}},_=class extends b{constructor(ce,Y,le){super();ue(this,"type","MemberExpression");this.object=ce,this.property=Y,this.computed=le}},T=class extends b{constructor(ce,Y){super();ue(this,"type","CallExpression");this.callee=ce,this.args=Y}},M=class extends b{constructor(ce){super();ue(this,"type","Identifier");this.value=ce}},k=class extends b{constructor(ce){super();ue(this,"type","Literal");this.value=ce}},j=class extends k{constructor(){super(...arguments);ue(this,"type","IntegerLiteral")}},A=class extends k{constructor(){super(...arguments);ue(this,"type","FloatLiteral")}},R=class extends k{constructor(){super(...arguments);ue(this,"type","StringLiteral")}},I=class extends k{constructor(){super(...arguments);ue(this,"type","ArrayLiteral")}},$=class extends k{constructor(){super(...arguments);ue(this,"type","TupleLiteral")}},F=class extends k{constructor(){super(...arguments);ue(this,"type","ObjectLiteral")}},V=class extends b{constructor(ce,Y,le){super();ue(this,"type","BinaryExpression");this.operator=ce,this.left=Y,this.right=le}},G=class extends b{constructor(ce,Y){super();ue(this,"type","FilterExpression");this.operand=ce,this.filter=Y}},H=class extends u{constructor(ce,Y){super();ue(this,"type","FilterStatement");this.filter=ce,this.body=Y}},B=class extends b{constructor(ce,Y){super();ue(this,"type","SelectExpression");this.lhs=ce,this.test=Y}},te=class extends b{constructor(ce,Y,le){super();ue(this,"type","TestExpression");this.operand=ce,this.negate=Y,this.test=le}},ae=class extends b{constructor(ce,Y){super();ue(this,"type","UnaryExpression");this.operator=ce,this.argument=Y}},z=class extends b{constructor(ce=void 0,Y=void 0,le=void 0){super();ue(this,"type","SliceExpression");this.start=ce,this.stop=Y,this.step=le}},D=class extends b{constructor(ce,Y){super();ue(this,"type","KeywordArgumentExpression");this.key=ce,this.value=Y}},K=class extends b{constructor(ce){super();ue(this,"type","SpreadExpression");this.argument=ce}},oe=class extends u{constructor(ce,Y,le){super();ue(this,"type","CallStatement");this.call=ce,this.callerArgs=Y,this.body=le}},_e=class extends b{constructor(ce,Y,le){super();ue(this,"type","Ternary");this.condition=ce,this.trueExpr=Y,this.falseExpr=le}};function de(L){const ce=new f([]);let Y=0;function le(Xe,Ye){const ut=L[Y++];if(!ut||ut.type!==Xe)throw new Error(`Parser Error: ${Ye}. ${ut.type} !== ${Xe}.`);return ut}function pe(Xe){if(!Dt(Xe))throw new SyntaxError(`Expected ${Xe}`);++Y}function Oe(){switch(L[Y].type){case n.Comment:return new w(L[Y++].value);case n.Text:return At();case n.OpenStatement:return Wt();case n.OpenExpression:return pt();default:throw new SyntaxError(`Unexpected token type: ${L[Y].type}`)}}function Ue(...Xe){return Y+Xe.length<=L.length&&Xe.every((Ye,ut)=>Ye===L[Y+ut].type)}function ht(...Xe){var Ye,ut,Br;return((Ye=L[Y])==null?void 0:Ye.type)===n.OpenStatement&&((ut=L[Y+1])==null?void 0:ut.type)===n.Identifier&&Xe.includes((Br=L[Y+1])==null?void 0:Br.value)}function Dt(...Xe){return Y+Xe.length<=L.length&&Xe.every((Ye,ut)=>L[Y+ut].type==="Identifier"&&Ye===L[Y+ut].value)}function At(){return new R(le(n.Text,"Expected text token").value)}function Wt(){if(le(n.OpenStatement,"Expected opening statement token"),L[Y].type!==n.Identifier)throw new SyntaxError(`Unknown statement, got ${L[Y].type}`);const Xe=L[Y].value;let Ye;switch(Xe){case"set":++Y,Ye=xr();break;case"if":++Y,Ye=Sr(),le(n.OpenStatement,"Expected {% token"),pe("endif"),le(n.CloseStatement,"Expected %} token");break;case"macro":++Y,Ye=zi(),le(n.OpenStatement,"Expected {% token"),pe("endmacro"),le(n.CloseStatement,"Expected %} token");break;case"for":++Y,Ye=cn(),le(n.OpenStatement,"Expected {% token"),pe("endfor"),le(n.CloseStatement,"Expected %} token");break;case"call":{++Y;let ut=null;Ue(n.OpenParen)&&(ut=Cs());const Br=Gi();if(Br.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const cl=Cs();le(n.CloseStatement,"Expected closing statement token");const Va=[];for(;!ht("endcall");)Va.push(Oe());le(n.OpenStatement,"Expected '{%'"),pe("endcall"),le(n.CloseStatement,"Expected closing statement token");const ul=new T(Br,cl);Ye=new oe(ul,ut,Va);break}case"break":++Y,le(n.CloseStatement,"Expected closing statement token"),Ye=new g;break;case"continue":++Y,le(n.CloseStatement,"Expected closing statement token"),Ye=new x;break;case"filter":{++Y;let ut=Gi();ut instanceof M&&Ue(n.OpenParen)&&(ut=Wi(ut)),le(n.CloseStatement,"Expected closing statement token");const Br=[];for(;!ht("endfilter");)Br.push(Oe());le(n.OpenStatement,"Expected '{%'"),pe("endfilter"),le(n.CloseStatement,"Expected '%}'"),Ye=new H(ut,Br);break}default:throw new SyntaxError(`Unknown statement type: ${Xe}`)}return Ye}function pt(){le(n.OpenExpression,"Expected opening expression token");const Xe=li();return le(n.CloseExpression,"Expected closing expression token"),Xe}function xr(){const Xe=ls();let Ye=null;const ut=[];if(Ue(n.Equals))++Y,Ye=ls();else{for(le(n.CloseStatement,"Expected %} token");!ht("endset");)ut.push(Oe());le(n.OpenStatement,"Expected {% token"),pe("endset")}return le(n.CloseStatement,"Expected closing statement token"),new v(Xe,Ye,ut)}function Sr(){const Xe=li();le(n.CloseStatement,"Expected closing statement token");const Ye=[],ut=[];for(;!ht("elif","else","endif");)Ye.push(Oe());if(ht("elif")){++Y,++Y;const Br=Sr();ut.push(Br)}else if(ht("else"))for(++Y,++Y,le(n.CloseStatement,"Expected closing statement token");!ht("endif");)ut.push(Oe());return new p(Xe,Ye,ut)}function zi(){const Xe=Gi();if(Xe.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Ye=Cs();le(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!ht("endmacro");)ut.push(Oe());return new y(Xe,Ye,ut)}function ls(Xe=!1){const Ye=Xe?Gi:li,ut=[Ye()],Br=Ue(n.Comma);for(;Br&&(++Y,ut.push(Ye()),!!Ue(n.Comma)););return Br?new $(ut):ut[0]}function cn(){const Xe=ls(!0);if(!(Xe instanceof M||Xe instanceof $))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Xe.type} instead`);if(!Dt("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++Y;const Ye=li();le(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!ht("endfor","else");)ut.push(Oe());const Br=[];if(ht("else"))for(++Y,++Y,le(n.CloseStatement,"Expected closing statement token");!ht("endfor");)Br.push(Oe());return new m(Xe,Ye,ut,Br)}function li(){return ci()}function ci(){const Xe=Vi();if(Dt("if")){++Y;const Ye=Vi();if(Dt("else")){++Y;const ut=ci();return new _e(Ye,Xe,ut)}else return new B(Xe,Ye)}return Xe}function Vi(){let Xe=ha();for(;Dt("or");){const Ye=L[Y];++Y;const ut=ha();Xe=new V(Ye,Xe,ut)}return Xe}function ha(){let Xe=ui();for(;Dt("and");){const Ye=L[Y];++Y;const ut=ui();Xe=new V(Ye,Xe,ut)}return Xe}function ui(){let Xe;for(;Dt("not");){const Ye=L[Y];++Y;const ut=ui();Xe=new ae(Ye,ut)}return Xe??Oo()}function Oo(){let Xe=$o();for(;;){let Ye;if(Dt("not","in"))Ye=new i("not in",n.Identifier),Y+=2;else if(Dt("in"))Ye=L[Y++];else if(Ue(n.ComparisonBinaryOperator))Ye=L[Y++];else break;const ut=$o();Xe=new V(Ye,Xe,ut)}return Xe}function $o(){let Xe=Vn();for(;Ue(n.AdditiveBinaryOperator);){const Ye=L[Y];++Y;const ut=Vn();Xe=new V(Ye,Xe,ut)}return Xe}function Ui(){const Xe=$n(Gi());return Ue(n.OpenParen)?Wi(Xe):Xe}function Wi(Xe){let Ye=new T(Xe,Cs());return Ye=$n(Ye),Ue(n.OpenParen)&&(Ye=Wi(Ye)),Ye}function Cs(){le(n.OpenParen,"Expected opening parenthesis for arguments list");const Xe=Mi();return le(n.CloseParen,"Expected closing parenthesis for arguments list"),Xe}function Mi(){const Xe=[];for(;!Ue(n.CloseParen);){let Ye;if(L[Y].type===n.MultiplicativeBinaryOperator&&L[Y].value==="*"){++Y;const ut=li();Ye=new K(ut)}else if(Ye=li(),Ue(n.Equals)){if(++Y,!(Ye instanceof M))throw new SyntaxError("Expected identifier for keyword argument");const ut=li();Ye=new D(Ye,ut)}Xe.push(Ye),Ue(n.Comma)&&++Y}return Xe}function za(){const Xe=[];let Ye=!1;for(;!Ue(n.CloseSquareBracket);)Ue(n.Colon)?(Xe.push(void 0),++Y,Ye=!0):(Xe.push(li()),Ue(n.Colon)&&(++Y,Ye=!0));if(Xe.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ye){if(Xe.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new z(...Xe)}return Xe[0]}function $n(Xe){for(;Ue(n.Dot)||Ue(n.OpenSquareBracket);){const Ye=L[Y];++Y;let ut;const Br=Ye.type===n.OpenSquareBracket;if(Br)ut=za(),le(n.CloseSquareBracket,"Expected closing square bracket");else if(ut=Gi(),ut.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Xe=new _(Xe,ut,Br)}return Xe}function Vn(){let Xe=cs();for(;Ue(n.MultiplicativeBinaryOperator);){const Ye=L[Y++],ut=cs();Xe=new V(Ye,Xe,ut)}return Xe}function cs(){let Xe=ll();for(;Dt("is");){++Y;const Ye=Dt("not");Ye&&++Y;const ut=Gi();if(!(ut instanceof M))throw new SyntaxError("Expected identifier for the test");Xe=new te(Xe,Ye,ut)}return Xe}function ll(){let Xe=Ui();for(;Ue(n.Pipe);){++Y;let Ye=Gi();if(!(Ye instanceof M))throw new SyntaxError("Expected identifier for the filter");Ue(n.OpenParen)&&(Ye=Wi(Ye)),Xe=new G(Xe,Ye)}return Xe}function Gi(){const Xe=L[Y++];switch(Xe.type){case n.NumericLiteral:{const Ye=Xe.value;return Ye.includes(".")?new A(Number(Ye)):new j(Number(Ye))}case n.StringLiteral:{let Ye=Xe.value;for(;Ue(n.StringLiteral);)Ye+=L[Y++].value;return new R(Ye)}case n.Identifier:return new M(Xe.value);case n.OpenParen:{const Ye=ls();return le(n.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Ye}case n.OpenSquareBracket:{const Ye=[];for(;!Ue(n.CloseSquareBracket);)Ye.push(li()),Ue(n.Comma)&&++Y;return++Y,new I(Ye)}case n.OpenCurlyBracket:{const Ye=new Map;for(;!Ue(n.CloseCurlyBracket);){const ut=li();le(n.Colon,"Expected colon between key and value in object literal");const Br=li();Ye.set(ut,Br),Ue(n.Comma)&&++Y}return++Y,new F(Ye)}default:throw new SyntaxError(`Unexpected token: ${Xe.type}`)}}for(;Y<L.length;)ce.body.push(Oe());return ce}function ve(L,ce,Y=1){ce===void 0&&(ce=L,L=0);const le=[];for(let pe=L;pe<ce;pe+=Y)le.push(pe);return le}function Ie(L,ce,Y,le=1){const pe=Math.sign(le);pe>=0?(ce=(ce??(ce=0))<0?Math.max(L.length+ce,0):Math.min(ce,L.length),Y=(Y??(Y=L.length))<0?Math.max(L.length+Y,0):Math.min(Y,L.length)):(ce=(ce??(ce=L.length-1))<0?Math.max(L.length+ce,-1):Math.min(ce,L.length-1),Y=(Y??(Y=-1))<-1?Math.max(L.length+Y,-1):Math.min(Y,L.length-1));const Oe=[];for(let Ue=ce;pe*Ue<pe*Y;Ue+=le)Oe.push(L[Ue]);return Oe}function Se(L){return L.replace(/\b\w/g,ce=>ce.toUpperCase())}function ge(L){return J(new Date,L)}function J(L,ce){const Y=new Intl.DateTimeFormat(void 0,{month:"long"}),le=new Intl.DateTimeFormat(void 0,{month:"short"}),pe=Oe=>Oe<10?"0"+Oe:Oe.toString();return ce.replace(/%[YmdbBHM%]/g,Oe=>{switch(Oe){case"%Y":return L.getFullYear().toString();case"%m":return pe(L.getMonth()+1);case"%d":return pe(L.getDate());case"%b":return le.format(L);case"%B":return Y.format(L);case"%H":return pe(L.getHours());case"%M":return pe(L.getMinutes());case"%%":return"%";default:return Oe}})}function ee(L){return L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Z(L,ce,Y,le){if(le===0)return L;let pe=le==null||le<0?1/0:le;const Oe=ce.length===0?new RegExp("(?=)","gu"):new RegExp(ee(ce),"gu");return L.replaceAll(Oe,Ue=>pe>0?(--pe,Y):Ue)}var we=class extends Error{},$e=class extends Error{},Ce=class{constructor(L=void 0){ue(this,"type","RuntimeValue");ue(this,"value");ue(this,"builtins",new Map);this.value=L}__bool__(){return new fe(!!this.value)}toString(){return String(this.value)}},Pe=class extends Ce{constructor(){super(...arguments);ue(this,"type","IntegerValue")}},Q=class extends Ce{constructor(){super(...arguments);ue(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},re=class extends Ce{constructor(){super(...arguments);ue(this,"type","StringValue");ue(this,"builtins",new Map([["upper",new ze(()=>new re(this.value.toUpperCase()))],["lower",new ze(()=>new re(this.value.toLowerCase()))],["strip",new ze(()=>new re(this.value.trim()))],["title",new ze(()=>new re(Se(this.value)))],["capitalize",new ze(()=>new re(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new Pe(this.value.length)],["rstrip",new ze(()=>new re(this.value.trimEnd()))],["lstrip",new ze(()=>new re(this.value.trimStart()))],["startswith",new ze(ce=>{if(ce.length===0)throw new Error("startswith() requires at least one argument");const Y=ce[0];if(Y instanceof re)return new fe(this.value.startsWith(Y.value));if(Y instanceof me){for(const le of Y.value){if(!(le instanceof re))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(le.value))return new fe(!0)}return new fe(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new ze(ce=>{if(ce.length===0)throw new Error("endswith() requires at least one argument");const Y=ce[0];if(Y instanceof re)return new fe(this.value.endsWith(Y.value));if(Y instanceof me){for(const le of Y.value){if(!(le instanceof re))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(le.value))return new fe(!0)}return new fe(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new ze(ce=>{const Y=ce[0]??new Je;if(!(Y instanceof re||Y instanceof Je))throw new Error("sep argument must be a string or null");const le=ce[1]??new Pe(-1);if(!(le instanceof Pe))throw new Error("maxsplit argument must be a number");let pe=[];if(Y instanceof Je){const Oe=this.value.trimStart();for(const{0:Ue,index:ht}of Oe.matchAll(/\S+/g)){if(le.value!==-1&&pe.length>=le.value&&ht!==void 0){pe.push(Ue+Oe.slice(ht+Ue.length));break}pe.push(Ue)}}else{if(Y.value==="")throw new Error("empty separator");pe=this.value.split(Y.value),le.value!==-1&&pe.length>le.value&&pe.push(pe.splice(le.value).join(Y.value))}return new me(pe.map(Oe=>new re(Oe)))})],["replace",new ze(ce=>{if(ce.length<2)throw new Error("replace() requires at least two arguments");const Y=ce[0],le=ce[1];if(!(Y instanceof re&&le instanceof re))throw new Error("replace() arguments must be strings");let pe;if(ce.length>2?ce[2].type==="KeywordArgumentsValue"?pe=ce[2].value.get("count")??new Je:pe=ce[2]:pe=new Je,!(pe instanceof Pe||pe instanceof Je))throw new Error("replace() count argument must be a number or null");return new re(Z(this.value,Y.value,le.value,pe.value))})]]))}},fe=class extends Ce{constructor(){super(...arguments);ue(this,"type","BooleanValue")}},ke=class extends Ce{constructor(){super(...arguments);ue(this,"type","ObjectValue");ue(this,"builtins",new Map([["get",new ze(([ce,Y])=>{if(!(ce instanceof re))throw new Error(`Object key must be a string: got ${ce.type}`);return this.value.get(ce.value)??Y??new Je})],["items",new ze(()=>this.items())],["keys",new ze(()=>this.keys())],["values",new ze(()=>this.values())]]))}__bool__(){return new fe(this.value.size>0)}items(){return new me(Array.from(this.value.entries()).map(([ce,Y])=>new me([new re(ce),Y])))}keys(){return new me(Array.from(this.value.keys()).map(ce=>new re(ce)))}values(){return new me(Array.from(this.value.values()))}},je=class extends ke{constructor(){super(...arguments);ue(this,"type","KeywordArgumentsValue")}},me=class extends Ce{constructor(){super(...arguments);ue(this,"type","ArrayValue");ue(this,"builtins",new Map([["length",new Pe(this.value.length)]]))}__bool__(){return new fe(this.value.length>0)}},Fe=class extends me{constructor(){super(...arguments);ue(this,"type","TupleValue")}},ze=class extends Ce{constructor(){super(...arguments);ue(this,"type","FunctionValue")}},Je=class extends Ce{constructor(){super(...arguments);ue(this,"type","NullValue")}},He=class extends Ce{constructor(){super(...arguments);ue(this,"type","UndefinedValue")}},We=class{constructor(L){ue(this,"variables",new Map([["namespace",new ze(L=>{if(L.length===0)return new ke(new Map);if(L.length!==1||!(L[0]instanceof ke))throw new Error("`namespace` expects either zero arguments or a single object argument");return L[0]})]]));ue(this,"tests",new Map([["boolean",L=>L.type==="BooleanValue"],["callable",L=>L instanceof ze],["odd",L=>{if(!(L instanceof Pe))throw new Error(`cannot odd on ${L.type}`);return L.value%2!==0}],["even",L=>{if(!(L instanceof Pe))throw new Error(`cannot even on ${L.type}`);return L.value%2===0}],["false",L=>L.type==="BooleanValue"&&!L.value],["true",L=>L.type==="BooleanValue"&&L.value],["none",L=>L.type==="NullValue"],["string",L=>L.type==="StringValue"],["number",L=>L instanceof Pe||L instanceof Q],["integer",L=>L instanceof Pe],["iterable",L=>L.type==="ArrayValue"||L.type==="StringValue"],["mapping",L=>L.type==="ObjectValue"],["lower",L=>{const ce=L.value;return L.type==="StringValue"&&ce===ce.toLowerCase()}],["upper",L=>{const ce=L.value;return L.type==="StringValue"&&ce===ce.toUpperCase()}],["none",L=>L.type==="NullValue"],["defined",L=>L.type!=="UndefinedValue"],["undefined",L=>L.type==="UndefinedValue"],["equalto",(L,ce)=>L.value===ce.value],["eq",(L,ce)=>L.value===ce.value]]));this.parent=L}set(L,ce){return this.declareVariable(L,Ht(ce))}declareVariable(L,ce){if(this.variables.has(L))throw new SyntaxError(`Variable already declared: ${L}`);return this.variables.set(L,ce),ce}setVariable(L,ce){return this.variables.set(L,ce),ce}resolve(L){if(this.variables.has(L))return this;if(this.parent)return this.parent.resolve(L);throw new Error(`Unknown variable: ${L}`)}lookupVariable(L){try{return this.resolve(L).variables.get(L)??new He}catch{return new He}}};function nt(L){L.set("false",!1),L.set("true",!0),L.set("none",null),L.set("raise_exception",ce=>{throw new Error(ce)}),L.set("range",ve),L.set("strftime_now",ge),L.set("True",!0),L.set("False",!1),L.set("None",null)}var ct=class{constructor(L){ue(this,"global");this.global=L??new We}run(L){return this.evaluate(L,this.global)}evaluateBinaryExpression(L,ce){const Y=this.evaluate(L.left,ce);switch(L.operator.value){case"and":return Y.__bool__().value?this.evaluate(L.right,ce):Y;case"or":return Y.__bool__().value?Y:this.evaluate(L.right,ce)}const le=this.evaluate(L.right,ce);switch(L.operator.value){case"==":return new fe(Y.value==le.value);case"!=":return new fe(Y.value!=le.value)}if(Y instanceof He||le instanceof He){if(le instanceof He&&["in","not in"].includes(L.operator.value))return new fe(L.operator.value==="not in");throw new Error(`Cannot perform operation ${L.operator.value} on undefined values`)}else{if(Y instanceof Je||le instanceof Je)throw new Error("Cannot perform operation on null values");if(L.operator.value==="~")return new re(Y.value.toString()+le.value.toString());if((Y instanceof Pe||Y instanceof Q)&&(le instanceof Pe||le instanceof Q)){const pe=Y.value,Oe=le.value;switch(L.operator.value){case"+":case"-":case"*":{const Ue=L.operator.value==="+"?pe+Oe:L.operator.value==="-"?pe-Oe:pe*Oe;return Y instanceof Q||le instanceof Q?new Q(Ue):new Pe(Ue)}case"/":return new Q(pe/Oe);case"%":{const Ue=pe%Oe;return Y instanceof Q||le instanceof Q?new Q(Ue):new Pe(Ue)}case"<":return new fe(pe<Oe);case">":return new fe(pe>Oe);case">=":return new fe(pe>=Oe);case"<=":return new fe(pe<=Oe)}}else if(Y instanceof me&&le instanceof me)switch(L.operator.value){case"+":return new me(Y.value.concat(le.value))}else if(le instanceof me){const pe=le.value.find(Oe=>Oe.value===Y.value)!==void 0;switch(L.operator.value){case"in":return new fe(pe);case"not in":return new fe(!pe)}}}if(Y instanceof re||le instanceof re)switch(L.operator.value){case"+":return new re(Y.value.toString()+le.value.toString())}if(Y instanceof re&&le instanceof re)switch(L.operator.value){case"in":return new fe(le.value.includes(Y.value));case"not in":return new fe(!le.value.includes(Y.value))}if(Y instanceof re&&le instanceof ke)switch(L.operator.value){case"in":return new fe(le.value.has(Y.value));case"not in":return new fe(!le.value.has(Y.value))}throw new SyntaxError(`Unknown operator "${L.operator.value}" between ${Y.type} and ${le.type}`)}evaluateArguments(L,ce){const Y=[],le=new Map;for(const pe of L)if(pe.type==="SpreadExpression"){const Oe=pe,Ue=this.evaluate(Oe.argument,ce);if(!(Ue instanceof me))throw new Error(`Cannot unpack non-iterable type: ${Ue.type}`);for(const ht of Ue.value)Y.push(ht)}else if(pe.type==="KeywordArgumentExpression"){const Oe=pe;le.set(Oe.key.value,this.evaluate(Oe.value,ce))}else{if(le.size>0)throw new Error("Positional arguments must come before keyword arguments");Y.push(this.evaluate(pe,ce))}return[Y,le]}applyFilter(L,ce,Y){if(ce.type==="Identifier"){const le=ce;if(le.value==="tojson")return new re(Ut(L));if(L instanceof me)switch(le.value){case"list":return L;case"first":return L.value[0];case"last":return L.value[L.value.length-1];case"length":return new Pe(L.value.length);case"reverse":return new me(L.value.reverse());case"sort":return new me(L.value.sort((pe,Oe)=>{if(pe.type!==Oe.type)throw new Error(`Cannot compare different types: ${pe.type} and ${Oe.type}`);switch(pe.type){case"IntegerValue":case"FloatValue":return pe.value-Oe.value;case"StringValue":return pe.value.localeCompare(Oe.value);default:throw new Error(`Cannot compare type: ${pe.type}`)}}));case"join":return new re(L.value.map(pe=>pe.value).join(""));case"string":return new re(Ut(L));case"unique":{const pe=new Set,Oe=[];for(const Ue of L.value)pe.has(Ue.value)||(pe.add(Ue.value),Oe.push(Ue));return new me(Oe)}default:throw new Error(`Unknown ArrayValue filter: ${le.value}`)}else if(L instanceof re)switch(le.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const pe=L.builtins.get(le.value);if(pe instanceof ze)return pe.value([],Y);if(pe instanceof Pe)return pe;throw new Error(`Unknown StringValue filter: ${le.value}`)}case"trim":return new re(L.value.trim());case"indent":return new re(L.value.split(`
`).map((pe,Oe)=>Oe===0||pe.length===0?pe:"    "+pe).join(`
`));case"join":case"string":return L;case"int":{const pe=parseInt(L.value,10);return new Pe(isNaN(pe)?0:pe)}case"float":{const pe=parseFloat(L.value);return new Q(isNaN(pe)?0:pe)}default:throw new Error(`Unknown StringValue filter: ${le.value}`)}else if(L instanceof Pe||L instanceof Q)switch(le.value){case"abs":return L instanceof Pe?new Pe(Math.abs(L.value)):new Q(Math.abs(L.value));case"int":return new Pe(Math.floor(L.value));case"float":return new Q(L.value);default:throw new Error(`Unknown NumericValue filter: ${le.value}`)}else if(L instanceof ke)switch(le.value){case"items":return new me(Array.from(L.value.entries()).map(([pe,Oe])=>new me([new re(pe),Oe])));case"length":return new Pe(L.value.size);default:throw new Error(`Unknown ObjectValue filter: ${le.value}`)}else if(L instanceof fe)switch(le.value){case"bool":return new fe(L.value);case"int":return new Pe(L.value?1:0);case"float":return new Q(L.value?1:0);case"string":return new re(L.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${le.value}`)}throw new Error(`Cannot apply filter "${le.value}" to type: ${L.type}`)}else if(ce.type==="CallExpression"){const le=ce;if(le.callee.type!=="Identifier")throw new Error(`Unknown filter: ${le.callee.type}`);const pe=le.callee.value;if(pe==="tojson"){const[,Oe]=this.evaluateArguments(le.args,Y),Ue=Oe.get("indent")??new Je;if(!(Ue instanceof Pe||Ue instanceof Je))throw new Error("If set, indent must be a number");return new re(Ut(L,Ue.value))}else if(pe==="join"){let Oe;if(L instanceof re)Oe=Array.from(L.value);else if(L instanceof me)Oe=L.value.map(At=>At.value);else throw new Error(`Cannot apply filter "${pe}" to type: ${L.type}`);const[Ue,ht]=this.evaluateArguments(le.args,Y),Dt=Ue.at(0)??ht.get("separator")??new re("");if(!(Dt instanceof re))throw new Error("separator must be a string");return new re(Oe.join(Dt.value))}else if(pe==="int"||pe==="float"){const[Oe,Ue]=this.evaluateArguments(le.args,Y),ht=Oe.at(0)??Ue.get("default")??(pe==="int"?new Pe(0):new Q(0));if(L instanceof re){const Dt=pe==="int"?parseInt(L.value,10):parseFloat(L.value);return isNaN(Dt)?ht:pe==="int"?new Pe(Dt):new Q(Dt)}else{if(L instanceof Pe||L instanceof Q)return L;if(L instanceof fe)return pe==="int"?new Pe(L.value?1:0):new Q(L.value?1:0);throw new Error(`Cannot apply filter "${pe}" to type: ${L.type}`)}}else if(pe==="default"){const[Oe,Ue]=this.evaluateArguments(le.args,Y),ht=Oe[0]??new re(""),Dt=Oe[1]??Ue.get("boolean")??new fe(!1);if(!(Dt instanceof fe))throw new Error("`default` filter flag must be a boolean");return L instanceof He||Dt.value&&!L.__bool__().value?ht:L}if(L instanceof me){switch(pe){case"selectattr":case"rejectattr":{const Oe=pe==="selectattr";if(L.value.some(pt=>!(pt instanceof ke)))throw new Error(`\`${pe}\` can only be applied to array of objects`);if(le.args.some(pt=>pt.type!=="StringLiteral"))throw new Error(`arguments of \`${pe}\` must be strings`);const[Ue,ht,Dt]=le.args.map(pt=>this.evaluate(pt,Y));let At;if(ht){const pt=Y.tests.get(ht.value);if(!pt)throw new Error(`Unknown test: ${ht.value}`);At=pt}else At=(...pt)=>pt[0].__bool__().value;const Wt=L.value.filter(pt=>{const xr=pt.value.get(Ue.value),Sr=xr?At(xr,Dt):!1;return Oe?Sr:!Sr});return new me(Wt)}case"map":{const[,Oe]=this.evaluateArguments(le.args,Y);if(Oe.has("attribute")){const Ue=Oe.get("attribute");if(!(Ue instanceof re))throw new Error("attribute must be a string");const ht=Oe.get("default"),Dt=L.value.map(At=>{if(!(At instanceof ke))throw new Error("items in map must be an object");return At.value.get(Ue.value)??ht??new He});return new me(Dt)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${pe}`)}else if(L instanceof re){switch(pe){case"indent":{const[Oe,Ue]=this.evaluateArguments(le.args,Y),ht=Oe.at(0)??Ue.get("width")??new Pe(4);if(!(ht instanceof Pe))throw new Error("width must be a number");const Dt=Oe.at(1)??Ue.get("first")??new fe(!1),At=Oe.at(2)??Ue.get("blank")??new fe(!1),Wt=L.value.split(`
`),pt=" ".repeat(ht.value),xr=Wt.map((Sr,zi)=>!Dt.value&&zi===0||!At.value&&Sr.length===0?Sr:pt+Sr);return new re(xr.join(`
`))}case"replace":{const Oe=L.builtins.get("replace");if(!(Oe instanceof ze))throw new Error("replace filter not available");const[Ue,ht]=this.evaluateArguments(le.args,Y);return Oe.value([...Ue,new je(ht)],Y)}}throw new Error(`Unknown StringValue filter: ${pe}`)}else throw new Error(`Cannot apply filter "${pe}" to type: ${L.type}`)}throw new Error(`Unknown filter: ${ce.type}`)}evaluateFilterExpression(L,ce){const Y=this.evaluate(L.operand,ce);return this.applyFilter(Y,L.filter,ce)}evaluateTestExpression(L,ce){const Y=this.evaluate(L.operand,ce),le=ce.tests.get(L.test.value);if(!le)throw new Error(`Unknown test: ${L.test.value}`);const pe=le(Y);return new fe(L.negate?!pe:pe)}evaluateSelectExpression(L,ce){return this.evaluate(L.test,ce).__bool__().value?this.evaluate(L.lhs,ce):new He}evaluateUnaryExpression(L,ce){const Y=this.evaluate(L.argument,ce);switch(L.operator.value){case"not":return new fe(!Y.value);default:throw new SyntaxError(`Unknown operator: ${L.operator.value}`)}}evaluateTernaryExpression(L,ce){return this.evaluate(L.condition,ce).__bool__().value?this.evaluate(L.trueExpr,ce):this.evaluate(L.falseExpr,ce)}evalProgram(L,ce){return this.evaluateBlock(L.body,ce)}evaluateBlock(L,ce){let Y="";for(const le of L){const pe=this.evaluate(le,ce);pe.type!=="NullValue"&&pe.type!=="UndefinedValue"&&(Y+=pe.toString())}return new re(Y)}evaluateIdentifier(L,ce){return ce.lookupVariable(L.value)}evaluateCallExpression(L,ce){const[Y,le]=this.evaluateArguments(L.args,ce);le.size>0&&Y.push(new je(le));const pe=this.evaluate(L.callee,ce);if(pe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${pe.type}`);return pe.value(Y,ce)}evaluateSliceExpression(L,ce,Y){if(!(L instanceof me||L instanceof re))throw new Error("Slice object must be an array or string");const le=this.evaluate(ce.start,Y),pe=this.evaluate(ce.stop,Y),Oe=this.evaluate(ce.step,Y);if(!(le instanceof Pe||le instanceof He))throw new Error("Slice start must be numeric or undefined");if(!(pe instanceof Pe||pe instanceof He))throw new Error("Slice stop must be numeric or undefined");if(!(Oe instanceof Pe||Oe instanceof He))throw new Error("Slice step must be numeric or undefined");return L instanceof me?new me(Ie(L.value,le.value,pe.value,Oe.value)):new re(Ie(Array.from(L.value),le.value,pe.value,Oe.value).join(""))}evaluateMemberExpression(L,ce){const Y=this.evaluate(L.object,ce);let le;if(L.computed){if(L.property.type==="SliceExpression")return this.evaluateSliceExpression(Y,L.property,ce);le=this.evaluate(L.property,ce)}else le=new re(L.property.value);let pe;if(Y instanceof ke){if(!(le instanceof re))throw new Error(`Cannot access property with non-string: got ${le.type}`);pe=Y.value.get(le.value)??Y.builtins.get(le.value)}else if(Y instanceof me||Y instanceof re)if(le instanceof Pe)pe=Y.value.at(le.value),Y instanceof re&&(pe=new re(Y.value.at(le.value)));else if(le instanceof re)pe=Y.builtins.get(le.value);else throw new Error(`Cannot access property with non-string/non-number: got ${le.type}`);else{if(!(le instanceof re))throw new Error(`Cannot access property with non-string: got ${le.type}`);pe=Y.builtins.get(le.value)}return pe instanceof Ce?pe:new He}evaluateSet(L,ce){const Y=L.value?this.evaluate(L.value,ce):this.evaluateBlock(L.body,ce);if(L.assignee.type==="Identifier"){const le=L.assignee.value;ce.setVariable(le,Y)}else if(L.assignee.type==="TupleLiteral"){const le=L.assignee;if(!(Y instanceof me))throw new Error(`Cannot unpack non-iterable type in set: ${Y.type}`);const pe=Y.value;if(pe.length!==le.value.length)throw new Error(`Too ${le.value.length>pe.length?"few":"many"} items to unpack in set`);for(let Oe=0;Oe<le.value.length;++Oe){const Ue=le.value[Oe];if(Ue.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${Ue.type}`);ce.setVariable(Ue.value,pe[Oe])}}else if(L.assignee.type==="MemberExpression"){const le=L.assignee,pe=this.evaluate(le.object,ce);if(!(pe instanceof ke))throw new Error("Cannot assign to member of non-object");if(le.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");pe.value.set(le.property.value,Y)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(L.assignee)}`);return new Je}evaluateIf(L,ce){const Y=this.evaluate(L.test,ce);return this.evaluateBlock(Y.__bool__().value?L.body:L.alternate,ce)}evaluateFor(L,ce){const Y=new We(ce);let le,pe;if(L.iterable.type==="SelectExpression"){const At=L.iterable;pe=this.evaluate(At.lhs,Y),le=At.test}else pe=this.evaluate(L.iterable,Y);if(!(pe instanceof me||pe instanceof ke))throw new Error(`Expected iterable or object type in for loop: got ${pe.type}`);pe instanceof ke&&(pe=pe.keys());const Oe=[],Ue=[];for(let At=0;At<pe.value.length;++At){const Wt=new We(Y),pt=pe.value[At];let xr;if(L.loopvar.type==="Identifier")xr=Sr=>Sr.setVariable(L.loopvar.value,pt);else if(L.loopvar.type==="TupleLiteral"){const Sr=L.loopvar;if(pt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${pt.type}`);const zi=pt;if(Sr.value.length!==zi.value.length)throw new Error(`Too ${Sr.value.length>zi.value.length?"few":"many"} items to unpack`);xr=ls=>{for(let cn=0;cn<Sr.value.length;++cn){if(Sr.value[cn].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${Sr.value[cn].type}`);ls.setVariable(Sr.value[cn].value,zi.value[cn])}}}else throw new Error(`Invalid loop variable(s): ${L.loopvar.type}`);le&&(xr(Wt),!this.evaluate(le,Wt).__bool__().value)||(Oe.push(pt),Ue.push(xr))}let ht="",Dt=!0;for(let At=0;At<Oe.length;++At){const Wt=new Map([["index",new Pe(At+1)],["index0",new Pe(At)],["revindex",new Pe(Oe.length-At)],["revindex0",new Pe(Oe.length-At-1)],["first",new fe(At===0)],["last",new fe(At===Oe.length-1)],["length",new Pe(Oe.length)],["previtem",At>0?Oe[At-1]:new He],["nextitem",At<Oe.length-1?Oe[At+1]:new He]]);Y.setVariable("loop",new ke(Wt)),Ue[At](Y);try{const pt=this.evaluateBlock(L.body,Y);ht+=pt.value}catch(pt){if(pt instanceof $e)continue;if(pt instanceof we)break;throw pt}Dt=!1}if(Dt){const At=this.evaluateBlock(L.defaultBlock,Y);ht+=At.value}return new re(ht)}evaluateMacro(L,ce){return ce.setVariable(L.name.value,new ze((Y,le)=>{var Ue;const pe=new We(le);Y=Y.slice();let Oe;((Ue=Y.at(-1))==null?void 0:Ue.type)==="KeywordArgumentsValue"&&(Oe=Y.pop());for(let ht=0;ht<L.args.length;++ht){const Dt=L.args[ht],At=Y[ht];if(Dt.type==="Identifier"){const Wt=Dt;if(!At)throw new Error(`Missing positional argument: ${Wt.value}`);pe.setVariable(Wt.value,At)}else if(Dt.type==="KeywordArgumentExpression"){const Wt=Dt,pt=At??(Oe==null?void 0:Oe.value.get(Wt.key.value))??this.evaluate(Wt.value,pe);pe.setVariable(Wt.key.value,pt)}else throw new Error(`Unknown argument type: ${Dt.type}`)}return this.evaluateBlock(L.body,pe)})),new Je}evaluateCallStatement(L,ce){const Y=new ze((ht,Dt)=>{const At=new We(Dt);if(L.callerArgs)for(let Wt=0;Wt<L.callerArgs.length;++Wt){const pt=L.callerArgs[Wt];if(pt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${pt.type}`);At.setVariable(pt.value,ht[Wt]??new He)}return this.evaluateBlock(L.body,At)}),[le,pe]=this.evaluateArguments(L.call.args,ce);le.push(new je(pe));const Oe=this.evaluate(L.call.callee,ce);if(Oe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Oe.type}`);const Ue=new We(ce);return Ue.setVariable("caller",Y),Oe.value(le,Ue)}evaluateFilterStatement(L,ce){const Y=this.evaluateBlock(L.body,ce);return this.applyFilter(Y,L.filter,ce)}evaluate(L,ce){if(!L)return new He;switch(L.type){case"Program":return this.evalProgram(L,ce);case"Set":return this.evaluateSet(L,ce);case"If":return this.evaluateIf(L,ce);case"For":return this.evaluateFor(L,ce);case"Macro":return this.evaluateMacro(L,ce);case"CallStatement":return this.evaluateCallStatement(L,ce);case"Break":throw new we;case"Continue":throw new $e;case"IntegerLiteral":return new Pe(L.value);case"FloatLiteral":return new Q(L.value);case"StringLiteral":return new re(L.value);case"ArrayLiteral":return new me(L.value.map(Y=>this.evaluate(Y,ce)));case"TupleLiteral":return new Fe(L.value.map(Y=>this.evaluate(Y,ce)));case"ObjectLiteral":{const Y=new Map;for(const[le,pe]of L.value){const Oe=this.evaluate(le,ce);if(!(Oe instanceof re))throw new Error(`Object keys must be strings: got ${Oe.type}`);Y.set(Oe.value,this.evaluate(pe,ce))}return new ke(Y)}case"Identifier":return this.evaluateIdentifier(L,ce);case"CallExpression":return this.evaluateCallExpression(L,ce);case"MemberExpression":return this.evaluateMemberExpression(L,ce);case"UnaryExpression":return this.evaluateUnaryExpression(L,ce);case"BinaryExpression":return this.evaluateBinaryExpression(L,ce);case"FilterExpression":return this.evaluateFilterExpression(L,ce);case"FilterStatement":return this.evaluateFilterStatement(L,ce);case"TestExpression":return this.evaluateTestExpression(L,ce);case"SelectExpression":return this.evaluateSelectExpression(L,ce);case"Ternary":return this.evaluateTernaryExpression(L,ce);case"Comment":return new Je;default:throw new SyntaxError(`Unknown node type: ${L.type}`)}}};function Ht(L){switch(typeof L){case"number":return Number.isInteger(L)?new Pe(L):new Q(L);case"string":return new re(L);case"boolean":return new fe(L);case"undefined":return new He;case"object":return L===null?new Je:Array.isArray(L)?new me(L.map(Ht)):new ke(new Map(Object.entries(L).map(([ce,Y])=>[ce,Ht(Y)])));case"function":return new ze((ce,Y)=>{const le=L(...ce.map(pe=>pe.value))??null;return Ht(le)});default:throw new Error(`Cannot convert to runtime value: ${L}`)}}function Ut(L,ce,Y){const le=Y??0;switch(L.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(L.value);case"ArrayValue":case"ObjectValue":{const pe=ce?" ".repeat(ce):"",Oe=`
`+pe.repeat(le),Ue=Oe+pe;if(L.type==="ArrayValue"){const ht=L.value.map(Dt=>Ut(Dt,ce,le+1));return ce?`[${Ue}${ht.join(`,${Ue}`)}${Oe}]`:`[${ht.join(", ")}]`}else{const ht=Array.from(L.value.entries()).map(([Dt,At])=>{const Wt=`"${Dt}": ${Ut(At,ce,le+1)}`;return ce?`${Ue}${Wt}`:Wt});return ce?`{${ht.join(",")}${Oe}}`:`{${ht.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${L.type}`)}}var $t=`
`,yn="{%- ",Zr=" -%}";function ln(L){switch(L.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return L.operator.value==="and"?1:L.operator.value==="in"||L.operator.value==="not in"?2:0}return 0}function Es(L,ce="	"){const Y=typeof ce=="number"?" ".repeat(ce):ce;return er(L.body,0,Y).replace(/\n$/,"")}function gt(...L){return yn+L.join(" ")+Zr}function er(L,ce,Y){return L.map(le=>wr(le,ce,Y)).join($t)}function wr(L,ce,Y){const le=Y.repeat(ce);switch(L.type){case"Program":return er(L.body,ce,Y);case"If":return ai(L,ce,Y);case"For":return oi(L,ce,Y);case"Set":return Ws(L,ce,Y);case"Macro":return Pt(L,ce,Y);case"Break":return le+gt("break");case"Continue":return le+gt("continue");case"CallStatement":return jo(L,ce,Y);case"FilterStatement":return Ao(L,ce,Y);case"Comment":return le+"{# "+L.value+" #}";default:return le+"{{- "+tr(L)+" -}}"}}function ai(L,ce,Y){const le=Y.repeat(ce),pe=[];let Oe=L;for(;Oe&&(pe.push({test:Oe.test,body:Oe.body}),Oe.alternate.length===1&&Oe.alternate[0].type==="If");)Oe=Oe.alternate[0];let Ue=le+gt("if",tr(pe[0].test))+$t+er(pe[0].body,ce+1,Y);for(let ht=1;ht<pe.length;++ht)Ue+=$t+le+gt("elif",tr(pe[ht].test))+$t+er(pe[ht].body,ce+1,Y);return Oe&&Oe.alternate.length>0&&(Ue+=$t+le+gt("else")+$t+er(Oe.alternate,ce+1,Y)),Ue+=$t+le+gt("endif"),Ue}function oi(L,ce,Y){const le=Y.repeat(ce);let pe="";if(L.iterable.type==="SelectExpression"){const Ue=L.iterable;pe=`${tr(Ue.lhs)} if ${tr(Ue.test)}`}else pe=tr(L.iterable);let Oe=le+gt("for",tr(L.loopvar),"in",pe)+$t+er(L.body,ce+1,Y);return L.defaultBlock.length>0&&(Oe+=$t+le+gt("else")+$t+er(L.defaultBlock,ce+1,Y)),Oe+=$t+le+gt("endfor"),Oe}function Ws(L,ce,Y){const le=Y.repeat(ce),pe=tr(L.assignee),Oe=L.value?tr(L.value):"",Ue=le+gt("set",`${pe}${L.value?" = "+Oe:""}`);return L.body.length===0?Ue:Ue+$t+er(L.body,ce+1,Y)+$t+le+gt("endset")}function Pt(L,ce,Y){const le=Y.repeat(ce),pe=L.args.map(tr).join(", ");return le+gt("macro",`${L.name.value}(${pe})`)+$t+er(L.body,ce+1,Y)+$t+le+gt("endmacro")}function jo(L,ce,Y){const le=Y.repeat(ce),pe=L.callerArgs&&L.callerArgs.length>0?`(${L.callerArgs.map(tr).join(", ")})`:"",Oe=tr(L.call);let Ue=le+gt(`call${pe}`,Oe)+$t;return Ue+=er(L.body,ce+1,Y)+$t,Ue+=le+gt("endcall"),Ue}function Ao(L,ce,Y){const le=Y.repeat(ce),pe=L.filter.type==="Identifier"?L.filter.value:tr(L.filter);let Oe=le+gt("filter",pe)+$t;return Oe+=er(L.body,ce+1,Y)+$t,Oe+=le+gt("endfilter"),Oe}function tr(L,ce=-1){switch(L.type){case"SpreadExpression":return`*${tr(L.argument)}`;case"Identifier":return L.value;case"IntegerLiteral":return`${L.value}`;case"FloatLiteral":return`${L.value}`;case"StringLiteral":return JSON.stringify(L.value);case"BinaryExpression":{const Y=L,le=ln(Y),pe=tr(Y.left,le),Oe=tr(Y.right,le+1),Ue=`${pe} ${Y.operator.value} ${Oe}`;return le<ce?`(${Ue})`:Ue}case"UnaryExpression":{const Y=L;return Y.operator.value+(Y.operator.value==="not"?" ":"")+tr(Y.argument,1/0)}case"CallExpression":{const Y=L,le=Y.args.map(tr).join(", ");return`${tr(Y.callee)}(${le})`}case"MemberExpression":{const Y=L;let le=tr(Y.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(Y.object.type)||(le=`(${le})`);let pe=tr(Y.property);return!Y.computed&&Y.property.type!=="Identifier"&&(pe=`(${pe})`),Y.computed?`${le}[${pe}]`:`${le}.${pe}`}case"FilterExpression":{const Y=L,le=tr(Y.operand,1/0);return Y.filter.type==="CallExpression"?`${le} | ${tr(Y.filter)}`:`${le} | ${Y.filter.value}`}case"SelectExpression":{const Y=L;return`${tr(Y.lhs)} if ${tr(Y.test)}`}case"TestExpression":{const Y=L;return`${tr(Y.operand)} is${Y.negate?" not":""} ${Y.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const Y=L.value.map(tr),le=L.type==="ArrayLiteral"?"[]":"()";return`${le[0]}${Y.join(", ")}${le[1]}`}case"ObjectLiteral":return`{${Array.from(L.value.entries()).map(([le,pe])=>`${tr(le)}: ${tr(pe)}`).join(", ")}}`;case"SliceExpression":{const Y=L,le=Y.start?tr(Y.start):"",pe=Y.stop?tr(Y.stop):"",Oe=Y.step?`:${tr(Y.step)}`:"";return`${le}:${pe}${Oe}`}case"KeywordArgumentExpression":{const Y=L;return`${Y.key.value}=${tr(Y.value)}`}case"Ternary":{const Y=L,le=`${tr(Y.trueExpr)} if ${tr(Y.condition,0)} else ${tr(Y.falseExpr)}`;return ce>-1?`(${le})`:le}default:throw new Error(`Unknown expression type: ${L.type}`)}}var Fr=class{constructor(L){ue(this,"parsed");const ce=d(L,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=de(ce)}render(L){const ce=new We;if(nt(ce),L)for(const[pe,Oe]of Object.entries(L))ce.set(pe,Oe);return new ct(ce).run(this.parsed).value}format(L){return Es(this.parsed,(L==null?void 0:L.indent)||"	")}}},"./src/backends/onnx.js":(e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>o.Tensor,createInferenceSession:()=>x,deviceToExecutionProviders:()=>m,isONNXProxy:()=>w,isONNXTensor:()=>v});var i=r("./src/env.js"),s=r("?2ce3"),a=r("onnxruntime-web"),o=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),c=[];let d,u;const f=Symbol.for("onnxruntime");if(f in globalThis)u=globalThis[f];else if(i.apis.IS_NODE_ENV){switch(u=s??(n||(n=r.t(s,2))),process.platform){case"win32":c.push("dml");break;case"linux":process.arch==="x64"&&c.push("cuda");break}c.push("cpu"),d=["cpu"]}else u=a,i.apis.IS_WEBNN_AVAILABLE&&c.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),i.apis.IS_WEBGPU_AVAILABLE&&c.push("webgpu"),c.push("wasm"),d=["wasm"];const p=u.InferenceSession;function m(b=null){if(!b)return d;switch(b){case"auto":return c;case"gpu":return c.filter(_=>["webgpu","cuda","dml","webnn-gpu"].includes(_))}if(c.includes(b))return[l[b]??b];throw new Error(`Unsupported device: "${b}". Should be one of: ${c.join(", ")}.`)}let g=null;async function x(b,_,T){g&&await g;const M=p.create(b,_);g??(g=M);const k=await M;return k.config=T,k}function v(b){return b instanceof u.Tensor}const y=u==null?void 0:u.env;y!=null&&y.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!y.wasm.wasmPaths&&(y.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${i.env.version}/dist/`),y.wasm.proxy=!1),y!=null&&y.webgpu&&(y.webgpu.powerPreference="high-performance");function w(){var b;return(b=y==null?void 0:y.wasm)==null?void 0:b.proxy}i.env.backends.onnx=y},"./src/base/feature_extraction_utils.js":(e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>a,validate_audio_inputs:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends i.Callable{constructor(c){super(),this.config=c}static async from_pretrained(c,d={}){const u=await(0,s.getModelJSON)(c,n.FEATURE_EXTRACTOR_NAME,!0,d);return new this(u)}}function o(l,c){var d;if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${c} expects input to be a Float32Array or a Float64Array, but got ${((d=l==null?void 0:l.constructor)==null?void 0:d.name)??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}},"./src/base/image_processors_utils.js":(e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>b,center_to_corners_format:()=>u,post_process_instance_segmentation:()=>w,post_process_object_detection:()=>f,post_process_panoptic_segmentation:()=>y,post_process_semantic_segmentation:()=>p});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/utils/image.js");var a=r("./src/utils/core.js"),o=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function c(_,T,M=0,k=null){const j=_/T;let A=(0,s.bankers_round)(j)*T;return k!==null&&A>k&&(A=Math.floor(j)*T),A<M&&(A=Math.ceil(j)*T),A}function d([_,T],M){return[Math.max(Math.floor(_/M),1)*M,Math.max(Math.floor(T/M),1)*M]}function u([_,T,M,k]){return[_-M/2,T-k/2,_+M/2,T+k/2]}function f(_,T=.5,M=null,k=!1){const j=_.logits,A=_.pred_boxes,[R,I,$]=j.dims;if(M!==null&&M.length!==R)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let F=[];for(let V=0;V<R;++V){let G=M!==null?M[V]:null,H={boxes:[],classes:[],scores:[]},B=j[V],te=A[V];for(let ae=0;ae<I;++ae){let z=B[ae],D=[],K;if(k){K=z.sigmoid().data;for(let oe=0;oe<K.length;++oe)K[oe]>T&&D.push(oe)}else{let oe=(0,s.max)(z.data)[1];if(oe===$-1||(K=(0,s.softmax)(z.data),K[oe]<T))continue;D.push(oe)}for(const oe of D){let _e=te[ae].data;_e=u(_e),G!==null&&(_e=_e.map((de,ve)=>de*G[(ve+1)%2])),H.boxes.push(_e),H.classes.push(oe),H.scores.push(K[oe])}}F.push(H)}return F}function p(_,T=null){const M=_.logits,k=M.dims[0];if(T!==null&&T.length!==k)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const j=[];for(let A=0;A<k;++A){const R=T!==null?T[A]:null;let I=M[A];R!==null&&(I=(0,i.interpolate)(I,R,"bilinear",!1));const[$,F]=R??I.dims.slice(-2),V=new i.Tensor("int32",new Int32Array($*F),[$,F]),G=I[0].data,H=V.data;for(let ae=1;ae<I.dims[0];++ae){const z=I[ae].data;for(let D=0;D<z.length;++D)z[D]>G[D]&&(G[D]=z[D],H[D]=ae)}const B=new Array(I.dims[0]);for(let ae=0;ae<H.length;++ae){const z=H[ae];B[z]=z}const te=B.filter(ae=>ae!==void 0);j.push({segmentation:V,labels:te})}return j}function m(_,T,M,k){const j=[],A=[],R=[];for(let I=0;I<_.dims[0];++I){const $=_[I],F=T[I],V=(0,s.max)($.data)[1];if(V===k)continue;const H=(0,s.softmax)($.data)[V];H>M&&(j.push(F),A.push(H),R.push(V))}return[j,A,R]}function g(_,T,M,k=.5,j=.8){const A=[];let R=0,I=0;const $=T[M].data;for(let V=0;V<_.length;++V)_[V]===M&&(A.push(V),++R),$[V]>=k&&++I;let F=R>0&&I>0;return F&&(F=R/I>j),[F,A]}function x(_,T,M,k,j,A=null,R=null){const[I,$]=R??_[0].dims,F=new i.Tensor("int32",new Int32Array(I*$),[I,$]),V=[];if(R!==null)for(let ae=0;ae<_.length;++ae)_[ae]=(0,i.interpolate)(_[ae],R,"bilinear",!1);const G=new Int32Array(_[0].data.length),H=new Float32Array(_[0].data.length);for(let ae=0;ae<_.length;++ae){let z=T[ae];const D=_[ae].data;for(let K=0;K<D.length;++K)D[K]*=z,D[K]>H[K]&&(G[K]=ae,H[K]=D[K])}let B=0;const te=F.data;for(let ae=0;ae<M.length;++ae){const z=M[ae],[D,K]=g(G,_,ae,k,j);if(D){++B;for(const oe of K)te[oe]=B;V.push({id:B,label_id:z,score:T[ae]})}}return[F,V]}function v(_,T,M=28,k=56*56,j=14*14*4*1280){if(_<M||T<M)throw new Error(`height:${_} or width:${T} must be larger than factor:${M}`);if(Math.max(_,T)/Math.min(_,T)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(_,T)/Math.min(_,T)}`);let A=Math.round(_/M)*M,R=Math.round(T/M)*M;if(A*R>j){const I=Math.sqrt(_*T/j);A=Math.floor(_/I/M)*M,R=Math.floor(T/I/M)*M}else if(A*R<k){const I=Math.sqrt(k/(_*T));A=Math.ceil(_*I/M)*M,R=Math.ceil(T*I/M)*M}return[A,R]}function y(_,T=.5,M=.5,k=.8,j=null,A=null){j===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),j=new Set);const R=_.class_queries_logits??_.logits,$=(_.masks_queries_logits??_.pred_masks).sigmoid();let[F,V,G]=R.dims;if(G-=1,A!==null&&A.length!==F)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let H=[];for(let B=0;B<F;++B){let te=A!==null?A[B]:null,ae=R[B],z=$[B],[D,K,oe]=m(ae,z,T,G);if(oe.length===0){let[ve,Ie]=te??z.dims.slice(-2),Se=new i.Tensor("int32",new Int32Array(ve*Ie).fill(-1),[ve,Ie]);H.push({segmentation:Se,segments_info:[]});continue}let[_e,de]=x(D,K,oe,M,k,j,te);H.push({segmentation:_e,segments_info:de})}return H}function w(_,T=.5,M=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class b extends n.Callable{constructor(T){super(),this.image_mean=T.image_mean??T.mean,this.image_std=T.image_std??T.std,this.resample=T.resample??2,this.do_rescale=T.do_rescale??!0,this.rescale_factor=T.rescale_factor??1/255,this.do_normalize=T.do_normalize,this.do_thumbnail=T.do_thumbnail,this.size=T.size??T.image_size,this.do_resize=T.do_resize??this.size!==void 0,this.size_divisibility=T.size_divisibility??T.size_divisor,this.do_center_crop=T.do_center_crop,this.crop_size=T.crop_size,this.do_convert_rgb=T.do_convert_rgb??!0,this.do_crop_margin=T.do_crop_margin,this.pad_size=T.pad_size,this.do_pad=T.do_pad,this.min_pixels=T.min_pixels,this.max_pixels=T.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=T.do_flip_channel_order??!1,this.config=T}async thumbnail(T,M,k=2){const j=T.height,A=T.width,R=M.height,I=M.width;let $=Math.min(j,R),F=Math.min(A,I);return $===j&&F===A?T:(j>A?F=Math.floor(A*$/j):A>j&&($=Math.floor(j*F/A)),await T.resize(F,$,{resample:k}))}async crop_margin(T,M=200){const k=T.clone().grayscale(),j=(0,s.min)(k.data)[0],R=(0,s.max)(k.data)[0]-j;if(R===0)return T;const I=M/255;let $=k.width,F=k.height,V=0,G=0;const H=k.data;for(let B=0;B<k.height;++B){const te=B*k.width;for(let ae=0;ae<k.width;++ae)(H[te+ae]-j)/R<I&&($=Math.min($,ae),F=Math.min(F,B),V=Math.max(V,ae),G=Math.max(G,B))}return T=await T.crop([$,F,V,G]),T}pad_image(T,M,k,{mode:j="constant",center:A=!1,constant_values:R=0}={}){const[I,$,F]=M;let V,G;if(typeof k=="number"?(V=k,G=k):k==="square"?V=G=Math.max(I,$):(V=k.width,G=k.height),V!==$||G!==I){const H=new Float32Array(V*G*F);if(Array.isArray(R))for(let ae=0;ae<H.length;++ae)H[ae]=R[ae%F];else R!==0&&H.fill(R);const[B,te]=A?[Math.floor((V-$)/2),Math.floor((G-I)/2)]:[0,0];for(let ae=0;ae<I;++ae){const z=(ae+te)*V,D=ae*$;for(let K=0;K<$;++K){const oe=(z+K+B)*F,_e=(D+K)*F;for(let de=0;de<F;++de)H[oe+de]=T[_e+de]}}if(j==="symmetric"){if(A)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ae=I-1,z=$-1;for(let D=0;D<G;++D){const K=D*V,oe=(0,a.calculateReflectOffset)(D,ae)*$;for(let _e=0;_e<V;++_e){if(D<I&&_e<$)continue;const de=(K+_e)*F,ve=(oe+(0,a.calculateReflectOffset)(_e,z))*F;for(let Ie=0;Ie<F;++Ie)H[de+Ie]=T[ve+Ie]}}}T=H,M=[G,V,F]}return[T,M]}rescale(T){for(let M=0;M<T.length;++M)T[M]=this.rescale_factor*T[M]}get_resize_output_image_size(T,M){const[k,j]=T.size;let A,R;if(this.do_thumbnail){const{height:I,width:$}=M;A=Math.min(I,$)}else Number.isInteger(M)?(A=M,R=this.config.max_size??A):M!==void 0&&(A=M.shortest_edge,R=M.longest_edge);if(A!==void 0||R!==void 0){const I=A===void 0?1:Math.max(A/k,A/j),$=k*I,F=j*I,V=R===void 0?1:Math.min(R/$,R/F);let G=Math.floor(Number(($*V).toFixed(2))),H=Math.floor(Number((F*V).toFixed(2)));return this.size_divisibility!==void 0&&([G,H]=d([G,H],this.size_divisibility)),[G,H]}else if(M!==void 0&&M.width!==void 0&&M.height!==void 0){let I=M.width,$=M.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let F=$/j,V=I/k;Math.abs(1-V)<Math.abs(1-F)?F=V:V=F,$=c(F*j,this.config.ensure_multiple_of),I=c(V*k,this.config.ensure_multiple_of)}return[I,$]}else{if(this.size_divisibility!==void 0)return d([k,j],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const I=this.config.patch_size*this.config.merge_size;return v(j,k,I,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(M)}`)}}async resize(T){const[M,k]=this.get_resize_output_image_size(T,this.size);return await T.resize(M,k,{resample:this.resample})}async preprocess(T,{do_normalize:M=null,do_pad:k=null,do_convert_rgb:j=null,do_convert_grayscale:A=null,do_flip_channel_order:R=null}={}){this.do_crop_margin&&(T=await this.crop_margin(T));const[I,$]=T.size;if(j??this.do_convert_rgb?T=T.rgb():A&&(T=T.grayscale()),this.do_resize&&(T=await this.resize(T)),this.do_thumbnail&&(T=await this.thumbnail(T,this.size,this.resample)),this.do_center_crop){let B,te;Number.isInteger(this.crop_size)?(B=this.crop_size,te=this.crop_size):(B=this.crop_size.width,te=this.crop_size.height),T=await T.center_crop(B,te)}const F=[T.height,T.width];let V=Float32Array.from(T.data),G=[T.height,T.width,T.channels];if(this.do_rescale&&this.rescale(V),M??this.do_normalize){let B=this.image_mean;Array.isArray(this.image_mean)||(B=new Array(T.channels).fill(B));let te=this.image_std;if(Array.isArray(this.image_std)||(te=new Array(T.channels).fill(B)),B.length!==T.channels||te.length!==T.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${B.length}) and \`image_std\` (${te.length}) must match the number of channels in the image (${T.channels}).`);for(let ae=0;ae<V.length;ae+=T.channels)for(let z=0;z<T.channels;++z)V[ae+z]=(V[ae+z]-B[z])/te[z]}if(k??this.do_pad){if(this.pad_size)[V,G]=this.pad_image(V,[T.height,T.width,T.channels],this.pad_size);else if(this.size_divisibility){const[B,te]=d([G[1],G[0]],this.size_divisibility);[V,G]=this.pad_image(V,G,{width:B,height:te})}}if(R??this.do_flip_channel_order){if(G[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let B=0;B<V.length;B+=3){const te=V[B];V[B]=V[B+2],V[B+2]=te}}const H=new i.Tensor("float32",V,G).permute(2,0,1);return{original_size:[$,I],reshaped_input_size:F,pixel_values:H}}async _call(T,...M){Array.isArray(T)||(T=[T]);const k=await Promise.all(T.map(A=>this.preprocess(A)));return{pixel_values:(0,i.stack)(k.map(A=>A.pixel_values),0),original_sizes:k.map(A=>A.original_size),reshaped_input_sizes:k.map(A=>A.reshaped_input_size)}}static async from_pretrained(T,M={}){const k=await(0,o.getModelJSON)(T,l.IMAGE_PROCESSOR_NAME,!0,M);return new this(k)}}},"./src/base/processing_utils.js":(e,t,r)=>{r.r(t),r.d(t,{Processor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends i.Callable{constructor(l,c,d){super(),this.config=l,this.components=c,this.chat_template=d}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,c={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...c})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...c){for(const d of[this.image_processor,this.feature_extractor,this.tokenizer])if(d)return d(l,...c);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,c={}){const[d,u,f]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(l,n.PROCESSOR_NAME,!0,c):{},Promise.all(this.classes.filter(p=>p in this).map(async p=>{const m=await this[p].from_pretrained(l,c);return[p.replace(/_class$/,""),m]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,c):null]);return new this(d,u,f)}}ue(a,"classes",["image_processor_class","tokenizer_class","feature_extractor_class"]),ue(a,"uses_processor_config",!1),ue(a,"uses_chat_template_file",!1)},"./src/configs.js":(e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>d,PretrainedConfig:()=>c,getCacheShapes:()=>o});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js");async function s(u,f){return await(0,i.getModelJSON)(u,"config.json",!0,f)}function a(u){const f={};let p={};switch(u.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":p=a(u.text_config);break;case"moondream1":p=a(u.phi_config);break;case"musicgen":p=a(u.decoder);break;case"multi_modality":p=a(u.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":f.num_heads="num_attention_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size";break;case"llama":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size",f.num_attention_heads="num_attention_heads",f.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.dim_kv="head_dim";break;case"openelm":f.num_heads="num_kv_heads",f.num_layers="num_transformer_layers",f.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":f.num_heads="num_heads",f.num_layers="num_layers",f.hidden_size="hidden_size";break;case"bloom":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="hidden_size";break;case"mpt":f.num_heads="n_heads",f.num_layers="n_layers",f.hidden_size="d_model";break;case"exaone":f.num_heads="num_key_value_heads",f.num_layers="num_layers",f.dim_kv="head_dim",f.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":f.num_decoder_layers="num_decoder_layers",f.num_decoder_heads="num_heads",f.decoder_dim_kv="d_kv",f.num_encoder_layers="num_layers",f.num_encoder_heads="num_heads",f.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="d_model",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="d_model";break;case"speecht5":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="hidden_size",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="hidden_size";break;case"trocr":f.num_encoder_layers=f.num_decoder_layers="decoder_layers",f.num_encoder_heads=f.num_decoder_heads="decoder_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="d_model";break;case"musicgen_decoder":f.num_encoder_layers=f.num_decoder_layers="num_hidden_layers",f.num_encoder_heads=f.num_decoder_heads="num_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"moonshine":f.num_decoder_layers="decoder_num_hidden_layers",f.num_decoder_heads="decoder_num_key_value_heads",f.num_encoder_layers="encoder_num_hidden_layers",f.num_encoder_heads="encoder_num_key_value_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const g=a(u.decoder),x="num_decoder_layers"in g,v=(0,n.pick)(u,["model_type","is_encoder_decoder"]);return x?(v.num_decoder_layers=g.num_decoder_layers,v.num_decoder_heads=g.num_decoder_heads,v.decoder_hidden_size=g.decoder_hidden_size,v.num_encoder_layers=g.num_encoder_layers,v.num_encoder_heads=g.num_encoder_heads,v.encoder_hidden_size=g.encoder_hidden_size):(v.num_layers=g.num_layers,v.num_heads=g.num_heads,v.hidden_size=g.hidden_size),v}const m={...p,...(0,n.pick)(u,["model_type","multi_query","is_encoder_decoder"])};for(const g in f)m[g]=u[f[g]];return m}function o(u,f){if(u.model_type==="lfm2"){const p=(f==null?void 0:f.prefix)??"past_key_values",m=p==="present"?"present":"past",g={},{layer_types:x,num_attention_heads:v,num_key_value_heads:y,hidden_size:w,conv_L_cache:b}=u,_=w/v,T=(f==null?void 0:f.batch_size)??1;for(let M=0;M<x.length;++M)if(x[M]==="full_attention")for(const k of["key","value"])g[`${p}.${M}.${k}`]=[T,y,0,_];else if(x[M]==="conv")g[`${m}_conv.${M}`]=[T,w,b];else throw new Error(`Unsupported layer type: ${x[M]}`);return g}return l(u,f)}function l(u,{prefix:f="past_key_values",batch_size:p=1}={}){const m={},g=u.normalized_config;if(g.is_encoder_decoder&&"num_encoder_heads"in g&&"num_decoder_heads"in g){const x=g.encoder_dim_kv??g.encoder_hidden_size/g.num_encoder_heads,v=g.decoder_dim_kv??g.decoder_hidden_size/g.num_decoder_heads,y=[p,g.num_encoder_heads,0,x],w=[p,g.num_decoder_heads,0,v];for(let b=0;b<g.num_decoder_layers;++b)m[`${f}.${b}.encoder.key`]=y,m[`${f}.${b}.encoder.value`]=y,m[`${f}.${b}.decoder.key`]=w,m[`${f}.${b}.decoder.value`]=w}else{const x=g.num_heads,v=g.num_layers,y=g.dim_kv??g.hidden_size/(g.num_attention_heads??x);if(g.model_type==="falcon"){const w=[p*x,0,y];for(let b=0;b<v;++b)m[`${f}.${b}.key`]=w,m[`${f}.${b}.value`]=w}else if(g.multi_query){const w=[p*x,0,2*y];for(let b=0;b<v;++b)m[`${f}.${b}.key_value`]=w}else if(g.model_type==="bloom"){const w=[p*x,y,0],b=[p*x,0,y];for(let _=0;_<v;++_)m[`${f}.${_}.key`]=w,m[`${f}.${_}.value`]=b}else if(g.model_type==="openelm")for(let w=0;w<v;++w){const b=[p,x[w],0,y];m[`${f}.${w}.key`]=b,m[`${f}.${w}.value`]=b}else{const w=[p,x,0,y];for(let b=0;b<v;++b)m[`${f}.${b}.key`]=w,m[`${f}.${b}.value`]=w}}return m}class c{constructor(f){ue(this,"model_type",null);ue(this,"is_encoder_decoder",!1);ue(this,"max_position_embeddings");ue(this,"transformers.js_config");Object.assign(this,f),this.normalized_config=a(this)}static async from_pretrained(f,{progress_callback:p=null,config:m=null,cache_dir:g=null,local_files_only:x=!1,revision:v="main"}={}){m&&!(m instanceof c)&&(m=new c(m));const y=m??await s(f,{progress_callback:p,config:m,cache_dir:g,local_files_only:x,revision:v});return new this(y)}}class d{static async from_pretrained(...f){return c.from_pretrained(...f)}}},"./src/env.js":(e,t,r)=>{var j,A;r.r(t),r.d(t,{apis:()=>v,env:()=>M});var n=r("?db59"),i=r("?383f"),s=r("?fa4b");const a="3.7.0",o=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes((j=self.constructor)==null?void 0:j.name),c=typeof self<"u"&&"caches"in self,d=typeof navigator<"u"&&"gpu"in navigator,u=typeof navigator<"u"&&"ml"in navigator,f=typeof process<"u",p=f&&((A=process==null?void 0:process.release)==null?void 0:A.name)==="node",m=!k(n),g=!k(i),x=typeof globalThis.Deno<"u",v=Object.freeze({IS_BROWSER_ENV:o,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:c,IS_WEBGPU_AVAILABLE:d,IS_WEBNN_AVAILABLE:u,IS_PROCESS_AVAILABLE:f,IS_NODE_ENV:p,IS_FS_AVAILABLE:m,IS_PATH_AVAILABLE:g}),y=m&&g;let w="./";if(y){const R=Object(import.meta).url;R?w=i.dirname(i.dirname(s.fileURLToPath(R))):typeof __dirname<"u"&&(w=i.dirname(__dirname))}const b=y?i.join(w,"/.cache/"):null,_="/models/",T=y?i.join(w,_):_,M={version:a,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(o||l),localModelPath:T,useFS:m,useBrowserCache:c&&!x,useFSCache:m,cacheDir:b,useCustomCache:!1,customCache:null};function k(R){return Object.keys(R).length===0}},"./src/generation/configuration_utils.js":(e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>i});var n=r("./src/utils/core.js");class i{constructor(a){ue(this,"max_length",20);ue(this,"max_new_tokens",null);ue(this,"min_length",0);ue(this,"min_new_tokens",null);ue(this,"early_stopping",!1);ue(this,"max_time",null);ue(this,"do_sample",!1);ue(this,"num_beams",1);ue(this,"num_beam_groups",1);ue(this,"penalty_alpha",null);ue(this,"use_cache",!0);ue(this,"temperature",1);ue(this,"top_k",50);ue(this,"top_p",1);ue(this,"typical_p",1);ue(this,"epsilon_cutoff",0);ue(this,"eta_cutoff",0);ue(this,"diversity_penalty",0);ue(this,"repetition_penalty",1);ue(this,"encoder_repetition_penalty",1);ue(this,"length_penalty",1);ue(this,"no_repeat_ngram_size",0);ue(this,"bad_words_ids",null);ue(this,"force_words_ids",null);ue(this,"renormalize_logits",!1);ue(this,"constraints",null);ue(this,"forced_bos_token_id",null);ue(this,"forced_eos_token_id",null);ue(this,"remove_invalid_values",!1);ue(this,"exponential_decay_length_penalty",null);ue(this,"suppress_tokens",null);ue(this,"streamer",null);ue(this,"begin_suppress_tokens",null);ue(this,"forced_decoder_ids",null);ue(this,"guidance_scale",null);ue(this,"num_return_sequences",1);ue(this,"output_attentions",!1);ue(this,"output_hidden_states",!1);ue(this,"output_scores",!1);ue(this,"return_dict_in_generate",!1);ue(this,"pad_token_id",null);ue(this,"bos_token_id",null);ue(this,"eos_token_id",null);ue(this,"encoder_no_repeat_ngram_size",0);ue(this,"decoder_start_token_id",null);ue(this,"generation_kwargs",{});Object.assign(this,(0,n.pick)(a,Object.getOwnPropertyNames(this)))}}},"./src/generation/logits_process.js":(e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>v,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>c,LogitsProcessor:()=>s,LogitsProcessorList:()=>o,LogitsWarper:()=>a,MinLengthLogitsProcessor:()=>m,MinNewTokensLengthLogitsProcessor:()=>g,NoBadWordsLogitsProcessor:()=>x,NoRepeatNGramLogitsProcessor:()=>f,RepetitionPenaltyLogitsProcessor:()=>p,SuppressTokensAtBeginLogitsProcessor:()=>d,TemperatureLogitsWarper:()=>y,TopKLogitsWarper:()=>b,TopPLogitsWarper:()=>w,WhisperTimeStampLogitsProcessor:()=>u});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var i=r("./src/utils/maths.js");class s extends n.Callable{_call(T,M){throw Error("`_call` should be implemented in a subclass")}}class a extends n.Callable{_call(T,M){throw Error("`_call` should be implemented in a subclass")}}class o extends n.Callable{constructor(){super(),this.processors=[]}push(T){this.processors.push(T)}extend(T){this.processors.push(...T)}_call(T,M){let k=M;for(const j of this.processors)k=j(T,k);return k}[Symbol.iterator](){return this.processors.values()}}class l extends s{constructor(T){super(),this.bos_token_id=T}_call(T,M){for(let k=0;k<T.length;++k)if(T[k].length===1){const j=M[k].data;j.fill(-1/0),j[this.bos_token_id]=0}return M}}class c extends s{constructor(T,M){super(),this.max_length=T,this.eos_token_id=Array.isArray(M)?M:[M]}_call(T,M){for(let k=0;k<T.length;++k)if(T[k].length===this.max_length-1){const j=M[k].data;j.fill(-1/0);for(const A of this.eos_token_id)j[A]=0}return M}}class d extends s{constructor(T,M){super(),this.begin_suppress_tokens=T,this.begin_index=M}_call(T,M){for(let k=0;k<T.length;++k)if(T[k].length===this.begin_index){const j=M[k].data;for(const A of this.begin_suppress_tokens)j[A]=-1/0}return M}}class u extends s{constructor(T,M){super(),this.eos_token_id=Array.isArray(T.eos_token_id)?T.eos_token_id[0]:T.eos_token_id,this.no_timestamps_token_id=T.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=M.length,M.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=T.max_initial_timestamp_index}_call(T,M){for(let k=0;k<T.length;++k){const j=M[k].data;if(j[this.no_timestamps_token_id]=-1/0,T[k].length===this.begin_index-1){j.fill(-1/0),j[this.timestamp_begin]=0;continue}const A=T[k].slice(this.begin_index),R=A.length>=1&&A[A.length-1]>=this.timestamp_begin,I=A.length<2||A[A.length-2]>=this.timestamp_begin;if(R&&(I?j.subarray(this.timestamp_begin).fill(-1/0):j.subarray(0,this.eos_token_id).fill(-1/0)),T[k].length===this.begin_index&&this.max_initial_timestamp_index!==null){const G=this.timestamp_begin+this.max_initial_timestamp_index;j.subarray(G+1).fill(-1/0)}const $=(0,i.log_softmax)(j),F=Math.log($.subarray(this.timestamp_begin).map(Math.exp).reduce((G,H)=>G+H)),V=(0,i.max)($.subarray(0,this.timestamp_begin))[0];F>V&&j.subarray(0,this.timestamp_begin).fill(-1/0)}return M}}class f extends s{constructor(T){super(),this.no_repeat_ngram_size=T}getNgrams(T){const M=T.length,k=[];for(let A=0;A<M+1-this.no_repeat_ngram_size;++A){const R=[];for(let I=0;I<this.no_repeat_ngram_size;++I)R.push(T[A+I]);k.push(R.map(Number))}const j=new Map;for(const A of k){const R=A.slice(0,A.length-1),I=JSON.stringify(R),$=j.get(I)??[];$.push(A[A.length-1]),j.set(I,$)}return j}getGeneratedNgrams(T,M){const k=M.slice(M.length+1-this.no_repeat_ngram_size,M.length);return T.get(JSON.stringify(k.map(Number)))??[]}calcBannedNgramTokens(T){const M=[];if(T.length+1<this.no_repeat_ngram_size)return M;{const k=this.getNgrams(T);return this.getGeneratedNgrams(k,T)}}_call(T,M){for(let k=0;k<T.length;++k){const j=M[k].data,A=this.calcBannedNgramTokens(T[k]);for(const R of A)j[R]=-1/0}return M}}class p extends s{constructor(T){super(),this.penalty=T}_call(T,M){for(let k=0;k<T.length;++k){const j=M[k].data;for(const A of new Set(T[k])){const R=Number(A);j[R]<0?j[R]*=this.penalty:j[R]/=this.penalty}}return M}}class m extends s{constructor(T,M){super(),this.min_length=T,this.eos_token_id=Array.isArray(M)?M:[M]}_call(T,M){for(let k=0;k<T.length;++k)if(T[k].length<this.min_length){const j=M[k].data;for(const A of this.eos_token_id)j[A]=-1/0}return M}}class g extends s{constructor(T,M,k){super(),this.prompt_length_to_skip=T,this.min_new_tokens=M,this.eos_token_id=Array.isArray(k)?k:[k]}_call(T,M){for(let k=0;k<T.length;++k)if(T[k].length-this.prompt_length_to_skip<this.min_new_tokens){const A=M[k].data;for(const R of this.eos_token_id)A[R]=-1/0}return M}}class x extends s{constructor(T,M){super(),this.bad_words_ids=T,this.eos_token_id=Array.isArray(M)?M:[M]}_call(T,M){for(let k=0;k<T.length;++k){const j=M[k].data,A=T[k];for(const R of this.bad_words_ids){if(A.length<R.length-1)continue;let I=!0;for(let $=1;$<=R.length-1;++$)if(R.at(-$-1)!=A.at(-$)){I=!1;break}I&&(j[R.at(-1)]=-1/0)}}return M}}class v extends s{constructor(T){if(super(),T<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${T}.`);this.guidance_scale=T}_call(T,M){if(M.dims[0]!==2*T.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${M.dims[0]} for the logits and ${T.length} for the input ids.`);const k=T.length,j=M.slice([0,k],null),A=M.slice([k,M.dims[0]],null);for(let R=0;R<A.data.length;++R)A.data[R]+=(j.data[R]-A.data[R])*this.guidance_scale;return A}}class y extends a{constructor(T){super(),this.temperature=T}_call(T,M){const k=M.data;for(let j=0;j<k.length;++j)k[j]/=this.temperature;return M}}class w extends a{constructor(T,{filter_value:M=-1/0,min_tokens_to_keep:k=1}={}){if(super(),T<0||T>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${T}`);if(!Number.isInteger(k)||k<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${k}`);this.top_p=T,this.filter_value=M,this.min_tokens_to_keep=k}}class b extends a{constructor(T,{filter_value:M=-1/0,min_tokens_to_keep:k=1}={}){if(super(),!Number.isInteger(T)||T<0)throw new Error(`\`top_k\` must be a positive integer, but is ${T}`);this.top_k=Math.max(T,k),this.filter_value=M}}},"./src/generation/logits_sampler.js":(e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>a});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class a extends n.Callable{constructor(u){super(),this.generation_config=u}async _call(u){return this.sample(u)}async sample(u){throw Error("sample should be implemented in subclasses.")}getLogits(u,f){let p=u.dims.at(-1),m=u.data;if(f===-1)m=m.slice(-p);else{let g=f*p;m=m.slice(g,g+p)}return m}randomSelect(u){let f=0;for(let m=0;m<u.length;++m)f+=u[m];let p=Math.random()*f;for(let m=0;m<u.length;++m)if(p-=u[m],p<=0)return m;return 0}static getSampler(u){if(u.do_sample)return new l(u);if(u.num_beams>1)return new c(u);if(u.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${u.num_return_sequences}.`);return new o(u)}}class o extends a{async sample(u){const f=(0,s.max)(u.data)[1];return[[BigInt(f),0]]}}class l extends a{async sample(u){let f=u.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,m]=await(0,i.topk)(u,f),g=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},()=>{const x=this.randomSelect(g);return[m.data[x],Math.log(g[x])]})}}class c extends a{async sample(u){let f=u.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,m]=await(0,i.topk)(u,f),g=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},(x,v)=>[m.data[v],Math.log(g[v])])}}},"./src/generation/stopping_criteria.js":(e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>o,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>a,StoppingCriteria:()=>i,StoppingCriteriaList:()=>s});var n=r("./src/utils/generic.js");class i extends n.Callable{_call(d,u){throw Error("StoppingCriteria needs to be subclassed")}}class s extends n.Callable{constructor(){super(),this.criteria=[]}push(d){this.criteria.push(d)}extend(d){d instanceof s?d=d.criteria:d instanceof i&&(d=[d]),this.criteria.push(...d)}_call(d,u){const f=new Array(d.length).fill(!1);for(const p of this.criteria){const m=p(d,u);for(let g=0;g<f.length;++g)f[g]||(f[g]=m[g])}return f}[Symbol.iterator](){return this.criteria.values()}}class a extends i{constructor(d,u=null){super(),this.max_length=d,this.max_position_embeddings=u}_call(d){return d.map(u=>u.length>=this.max_length)}}class o extends i{constructor(d){super(),Array.isArray(d)||(d=[d]),this.eos_token_id=d}_call(d,u){return d.map(f=>{const p=f.at(-1);return this.eos_token_id.some(m=>p==m)})}}class l extends i{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(d,u){return new Array(d.length).fill(this.interrupted)}}},"./src/generation/streamers.js":(e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>a,TextStreamer:()=>l,WhisperTextStreamer:()=>c});var n=r("./src/utils/core.js"),i=r("./src/tokenizers.js"),s=r("./src/env.js");class a{put(u){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const o=s.apis.IS_PROCESS_AVAILABLE?d=>process.stdout.write(d):d=>console.log(d);class l extends a{constructor(u,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:m=null,skip_special_tokens:g=!0,decode_kwargs:x={},...v}={}){super(),this.tokenizer=u,this.skip_prompt=f,this.callback_function=p??o,this.token_callback_function=m,this.decode_kwargs={skip_special_tokens:g,...x,...v},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(u){var x;if(u.length>1)throw Error("TextStreamer only supports batch size of 1");const f=this.next_tokens_are_prompt;if(f&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const p=u[0];(x=this.token_callback_function)==null||x.call(this,p),this.token_cache=(0,n.mergeArrays)(this.token_cache,p);const m=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let g;f||m.endsWith(`
`)?(g=m.slice(this.print_len),this.token_cache=[],this.print_len=0):m.length>0&&(0,i.is_chinese_char)(m.charCodeAt(m.length-1))?(g=m.slice(this.print_len),this.print_len+=g.length):(g=m.slice(this.print_len,m.lastIndexOf(" ")+1),this.print_len+=g.length),this.on_finalized_text(g,!1)}end(){let u;this.token_cache.length>0?(u=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):u="",this.next_tokens_are_prompt=!0,this.on_finalized_text(u,!0)}on_finalized_text(u,f){var p,m;u.length>0&&((p=this.callback_function)==null||p.call(this,u)),f&&this.callback_function===o&&s.apis.IS_PROCESS_AVAILABLE&&((m=this.callback_function)==null||m.call(this,`
`))}}class c extends l{constructor(u,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:m=null,on_chunk_start:g=null,on_chunk_end:x=null,on_finalize:v=null,time_precision:y=.02,skip_special_tokens:w=!0,decode_kwargs:b={}}={}){super(u,{skip_prompt:f,skip_special_tokens:w,callback_function:p,token_callback_function:m,decode_kwargs:b}),this.timestamp_begin=u.timestamp_begin,this.on_chunk_start=g,this.on_chunk_end=x,this.on_finalize=v,this.time_precision=y,this.waiting_for_timestamp=!1}put(u){var p,m,g;if(u.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const f=u[0];if(f.length===1){const x=Number(f[0])-this.timestamp_begin;if(x>=0){const v=x*this.time_precision;this.waiting_for_timestamp?(p=this.on_chunk_end)==null||p.call(this,v):(m=this.on_chunk_start)==null||m.call(this,v),this.waiting_for_timestamp=!this.waiting_for_timestamp,(g=this.token_callback_function)==null||g.call(this,f);return}}return super.put(u)}end(){var u;super.end(),(u=this.on_finalize)==null||u.call(this)}}},"./src/models.js":(e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>km,ASTModel:()=>D_,ASTPreTrainedModel:()=>Mm,AlbertForMaskedLM:()=>Lt,AlbertForQuestionAnswering:()=>ft,AlbertForSequenceClassification:()=>it,AlbertModel:()=>at,AlbertPreTrainedModel:()=>Qe,AutoModel:()=>yk,AutoModelForAudioClassification:()=>S3,AutoModelForAudioFrameClassification:()=>E3,AutoModelForAudioTextToText:()=>R3,AutoModelForCTC:()=>k3,AutoModelForCausalLM:()=>p3,AutoModelForDepthEstimation:()=>O3,AutoModelForDocumentQuestionAnswering:()=>C3,AutoModelForImageClassification:()=>v3,AutoModelForImageFeatureExtraction:()=>N3,AutoModelForImageMatting:()=>j3,AutoModelForImageSegmentation:()=>_3,AutoModelForImageTextToText:()=>D3,AutoModelForImageToImage:()=>A3,AutoModelForMaskGeneration:()=>M3,AutoModelForMaskedLM:()=>m3,AutoModelForNormalEstimation:()=>$3,AutoModelForObjectDetection:()=>w3,AutoModelForPoseEstimation:()=>I3,AutoModelForQuestionAnswering:()=>g3,AutoModelForSemanticSegmentation:()=>x3,AutoModelForSeq2SeqLM:()=>u3,AutoModelForSequenceClassification:()=>l3,AutoModelForSpeechSeq2Seq:()=>d3,AutoModelForTextToSpectrogram:()=>f3,AutoModelForTextToWaveform:()=>h3,AutoModelForTokenClassification:()=>c3,AutoModelForUniversalSegmentation:()=>b3,AutoModelForVision2Seq:()=>y3,AutoModelForXVector:()=>P3,AutoModelForZeroShotObjectDetection:()=>T3,BartForConditionalGeneration:()=>Gn,BartForSequenceClassification:()=>Hi,BartModel:()=>Hr,BartPretrainedModel:()=>us,BaseModelOutput:()=>$e,BeitForImageClassification:()=>VD,BeitModel:()=>zD,BeitPreTrainedModel:()=>OM,BertForMaskedLM:()=>Q,BertForQuestionAnswering:()=>ke,BertForSequenceClassification:()=>re,BertForTokenClassification:()=>fe,BertModel:()=>Pe,BertPreTrainedModel:()=>Ce,BlenderbotForConditionalGeneration:()=>dn,BlenderbotModel:()=>In,BlenderbotPreTrainedModel:()=>_n,BlenderbotSmallForConditionalGeneration:()=>bf,BlenderbotSmallModel:()=>dl,BlenderbotSmallPreTrainedModel:()=>Ki,BloomForCausalLM:()=>uD,BloomModel:()=>cD,BloomPreTrainedModel:()=>xM,CLIPModel:()=>jm,CLIPPreTrainedModel:()=>Ga,CLIPSegForImageSegmentation:()=>Pf,CLIPSegModel:()=>Vu,CLIPSegPreTrainedModel:()=>js,CLIPTextModel:()=>K_,CLIPTextModelWithProjection:()=>Am,CLIPVisionModel:()=>q_,CLIPVisionModelWithProjection:()=>Om,CamembertForMaskedLM:()=>At,CamembertForQuestionAnswering:()=>xr,CamembertForSequenceClassification:()=>Wt,CamembertForTokenClassification:()=>pt,CamembertModel:()=>Dt,CamembertPreTrainedModel:()=>ht,CausalLMOutput:()=>Hu,CausalLMOutputWithPast:()=>Rle,ChineseCLIPModel:()=>Ct,ChineseCLIPPreTrainedModel:()=>Bu,ClapAudioModelWithProjection:()=>WL,ClapModel:()=>VL,ClapPreTrainedModel:()=>n0,ClapTextModelWithProjection:()=>UL,CodeGenForCausalLM:()=>ie,CodeGenModel:()=>X,CodeGenPreTrainedModel:()=>W,CohereForCausalLM:()=>WN,CohereModel:()=>UN,CoherePreTrainedModel:()=>dM,ConvBertForMaskedLM:()=>Ao,ConvBertForQuestionAnswering:()=>L,ConvBertForSequenceClassification:()=>tr,ConvBertForTokenClassification:()=>Fr,ConvBertModel:()=>jo,ConvBertPreTrainedModel:()=>Pt,ConvNextForImageClassification:()=>DR,ConvNextModel:()=>NR,ConvNextPreTrainedModel:()=>KM,ConvNextV2ForImageClassification:()=>LR,ConvNextV2Model:()=>RR,ConvNextV2PreTrainedModel:()=>qM,DFineForObjectDetection:()=>tR,DFineModel:()=>eR,DFinePreTrainedModel:()=>LM,DPTForDepthEstimation:()=>yR,DPTModel:()=>gR,DPTPreTrainedModel:()=>WM,DacDecoderModel:()=>OF,DacDecoderOutput:()=>CF,DacEncoderModel:()=>AF,DacEncoderOutput:()=>EF,DacModel:()=>jF,DacPreTrainedModel:()=>u0,DebertaForMaskedLM:()=>ls,DebertaForQuestionAnswering:()=>ci,DebertaForSequenceClassification:()=>cn,DebertaForTokenClassification:()=>li,DebertaModel:()=>zi,DebertaPreTrainedModel:()=>Sr,DebertaV2ForMaskedLM:()=>ui,DebertaV2ForQuestionAnswering:()=>Ui,DebertaV2ForSequenceClassification:()=>Oo,DebertaV2ForTokenClassification:()=>$o,DebertaV2Model:()=>ha,DebertaV2PreTrainedModel:()=>Vi,DecisionTransformerModel:()=>dF,DecisionTransformerPreTrainedModel:()=>uF,DeiTForImageClassification:()=>aR,DeiTModel:()=>sR,DeiTPreTrainedModel:()=>BM,DepthAnythingForDepthEstimation:()=>_R,DepthAnythingPreTrainedModel:()=>vR,DepthProForDepthEstimation:()=>MR,DepthProPreTrainedModel:()=>TR,DetrForObjectDetection:()=>WD,DetrForSegmentation:()=>$M,DetrModel:()=>UD,DetrObjectDetectionOutput:()=>IM,DetrPreTrainedModel:()=>Q_,DetrSegmentationOutput:()=>GD,Dinov2ForImageClassification:()=>BR,Dinov2Model:()=>FR,Dinov2PreTrainedModel:()=>XM,Dinov2WithRegistersForImageClassification:()=>VR,Dinov2WithRegistersModel:()=>zR,Dinov2WithRegistersPreTrainedModel:()=>YM,DistilBertForMaskedLM:()=>Vn,DistilBertForQuestionAnswering:()=>$n,DistilBertForSequenceClassification:()=>Mi,DistilBertForTokenClassification:()=>za,DistilBertModel:()=>Cs,DistilBertPreTrainedModel:()=>Wi,DonutSwinModel:()=>IR,DonutSwinPreTrainedModel:()=>$R,EfficientNetForImageClassification:()=>QL,EfficientNetModel:()=>YL,EfficientNetPreTrainedModel:()=>ok,ElectraForMaskedLM:()=>le,ElectraForQuestionAnswering:()=>Ue,ElectraForSequenceClassification:()=>pe,ElectraForTokenClassification:()=>Oe,ElectraModel:()=>Y,ElectraPreTrainedModel:()=>ce,Ernie4_5_ForCausalLM:()=>RL,Ernie4_5_Model:()=>DL,Ernie4_5_PretrainedModel:()=>rk,EsmForMaskedLM:()=>Gi,EsmForSequenceClassification:()=>Xe,EsmForTokenClassification:()=>Ye,EsmModel:()=>ll,EsmPreTrainedModel:()=>cs,ExaoneForCausalLM:()=>IN,ExaoneModel:()=>$N,ExaonePreTrainedModel:()=>aM,FalconForCausalLM:()=>zL,FalconModel:()=>BL,FalconPreTrainedModel:()=>ik,FastViTForImageClassification:()=>jD,FastViTModel:()=>CD,FastViTPreTrainedModel:()=>PM,Florence2ForConditionalGeneration:()=>z_,Florence2PreTrainedModel:()=>B_,GLPNForDepthEstimation:()=>OR,GLPNModel:()=>AR,GLPNPreTrainedModel:()=>HM,GPT2LMHeadModel:()=>Lm,GPT2Model:()=>Rm,GPT2PreTrainedModel:()=>Ef,GPTBigCodeForCausalLM:()=>O,GPTBigCodeModel:()=>S,GPTBigCodePreTrainedModel:()=>Of,GPTJForCausalLM:()=>Wm,GPTJModel:()=>Um,GPTJPreTrainedModel:()=>Af,GPTNeoForCausalLM:()=>jf,GPTNeoModel:()=>Wu,GPTNeoPreTrainedModel:()=>Cf,GPTNeoXForCausalLM:()=>Vm,GPTNeoXModel:()=>zm,GPTNeoXPreTrainedModel:()=>Gu,Gemma2ForCausalLM:()=>qN,Gemma2Model:()=>KN,Gemma2PreTrainedModel:()=>hM,Gemma3ForCausalLM:()=>YN,Gemma3Model:()=>XN,Gemma3PreTrainedModel:()=>pM,Gemma3nForConditionalGeneration:()=>uc,Gemma3nPreTrainedModel:()=>G_,GemmaForCausalLM:()=>HN,GemmaModel:()=>GN,GemmaPreTrainedModel:()=>fM,GlmForCausalLM:()=>ON,GlmModel:()=>AN,GlmPreTrainedModel:()=>sM,GraniteForCausalLM:()=>VN,GraniteModel:()=>zN,GranitePreTrainedModel:()=>uM,GroundingDinoForObjectDetection:()=>WR,GroundingDinoPreTrainedModel:()=>UR,GroupViTModel:()=>ED,GroupViTPreTrainedModel:()=>PD,HeliumForCausalLM:()=>jN,HeliumModel:()=>Y_,HeliumPreTrainedModel:()=>Io,HieraForImageClassification:()=>lR,HieraModel:()=>oR,HieraPreTrainedModel:()=>zM,HubertForCTC:()=>xL,HubertForSequenceClassification:()=>bL,HubertModel:()=>_L,HubertPreTrainedModel:()=>Tle,IJepaForImageClassification:()=>vD,IJepaModel:()=>yD,IJepaPreTrainedModel:()=>MM,Idefics3ForConditionalGeneration:()=>Lu,Idefics3PreTrainedModel:()=>dc,ImageMattingOutput:()=>F3,JAISLMHeadModel:()=>Bm,JAISModel:()=>Fm,JAISPreTrainedModel:()=>Uu,JinaCLIPModel:()=>Nm,JinaCLIPPreTrainedModel:()=>Sf,JinaCLIPTextModel:()=>Dm,JinaCLIPVisionModel:()=>zu,Lfm2ForCausalLM:()=>Kt,Lfm2Model:()=>_t,Lfm2PreTrainedModel:()=>st,LiteWhisperForConditionalGeneration:()=>Pm,LlamaForCausalLM:()=>Ke,LlamaModel:()=>Re,LlamaPreTrainedModel:()=>be,LlavaForConditionalGeneration:()=>Mf,LlavaOnevisionForConditionalGeneration:()=>L_,LlavaPreTrainedModel:()=>Tf,LlavaQwen2ForCausalLM:()=>W_,LongT5ForConditionalGeneration:()=>Zn,LongT5Model:()=>Un,LongT5PreTrainedModel:()=>jr,M2M100ForConditionalGeneration:()=>eL,M2M100Model:()=>JR,M2M100PreTrainedModel:()=>JM,MBartForCausalLM:()=>kn,MBartForConditionalGeneration:()=>di,MBartForSequenceClassification:()=>pa,MBartModel:()=>Wa,MBartPreTrainedModel:()=>$i,MPNetForMaskedLM:()=>Nu,MPNetForQuestionAnswering:()=>U,MPNetForSequenceClassification:()=>Du,MPNetForTokenClassification:()=>Me,MPNetModel:()=>Iu,MPNetPreTrainedModel:()=>Ua,MT5ForConditionalGeneration:()=>ki,MT5Model:()=>Wn,MT5PreTrainedModel:()=>vn,MarianMTModel:()=>ZR,MarianModel:()=>QR,MarianPreTrainedModel:()=>ZM,MaskFormerForInstanceSegmentation:()=>jR,MaskFormerModel:()=>CR,MaskFormerPreTrainedModel:()=>GM,MaskedLMOutput:()=>fi,Metric3DForDepthEstimation:()=>SR,Metric3DPreTrainedModel:()=>kR,Metric3Dv2ForDepthEstimation:()=>ER,Metric3Dv2PreTrainedModel:()=>PR,MgpstrForSceneTextRecognition:()=>gF,MgpstrModelOutput:()=>pF,MgpstrPreTrainedModel:()=>mF,MimiDecoderModel:()=>PF,MimiDecoderOutput:()=>MF,MimiEncoderModel:()=>SF,MimiEncoderOutput:()=>TF,MimiModel:()=>kF,MimiPreTrainedModel:()=>c0,MistralForCausalLM:()=>NL,MistralModel:()=>IL,MistralPreTrainedModel:()=>tk,MobileBertForMaskedLM:()=>cl,MobileBertForQuestionAnswering:()=>ul,MobileBertForSequenceClassification:()=>Va,MobileBertModel:()=>Br,MobileBertPreTrainedModel:()=>ut,MobileLLMForCausalLM:()=>DN,MobileLLMModel:()=>NN,MobileLLMPreTrainedModel:()=>oM,MobileNetV1ForImageClassification:()=>JL,MobileNetV1ForSemanticSegmentation:()=>eF,MobileNetV1Model:()=>ZL,MobileNetV1PreTrainedModel:()=>s0,MobileNetV2ForImageClassification:()=>rF,MobileNetV2ForSemanticSegmentation:()=>nF,MobileNetV2Model:()=>tF,MobileNetV2PreTrainedModel:()=>a0,MobileNetV3ForImageClassification:()=>sF,MobileNetV3ForSemanticSegmentation:()=>aF,MobileNetV3Model:()=>iF,MobileNetV3PreTrainedModel:()=>o0,MobileNetV4ForImageClassification:()=>lF,MobileNetV4ForSemanticSegmentation:()=>cF,MobileNetV4Model:()=>oF,MobileNetV4PreTrainedModel:()=>l0,MobileViTForImageClassification:()=>ID,MobileViTModel:()=>$D,MobileViTPreTrainedModel:()=>EM,MobileViTV2ForImageClassification:()=>DD,MobileViTV2Model:()=>ND,MobileViTV2PreTrainedModel:()=>CM,ModelOutput:()=>we,ModernBertDecoderForCausalLM:()=>Zr,ModernBertDecoderModel:()=>yn,ModernBertDecoderPreTrainedModel:()=>$t,ModernBertForMaskedLM:()=>ct,ModernBertForSequenceClassification:()=>Ht,ModernBertForTokenClassification:()=>Ut,ModernBertModel:()=>nt,ModernBertPreTrainedModel:()=>We,Moondream1ForConditionalGeneration:()=>F_,MoonshineForConditionalGeneration:()=>R_,MoonshineModel:()=>iM,MoonshinePreTrainedModel:()=>Em,MptForCausalLM:()=>fD,MptModel:()=>dD,MptPreTrainedModel:()=>bM,MultiModalityCausalLM:()=>hF,MultiModalityPreTrainedModel:()=>fF,MusicgenForCausalLM:()=>Ple,MusicgenForConditionalGeneration:()=>ck,MusicgenModel:()=>Sle,MusicgenPreTrainedModel:()=>lk,NeoBertForMaskedLM:()=>Fe,NeoBertForQuestionAnswering:()=>He,NeoBertForSequenceClassification:()=>ze,NeoBertForTokenClassification:()=>Je,NeoBertModel:()=>me,NeoBertPreTrainedModel:()=>je,NomicBertModel:()=>Es,NomicBertPreTrainedModel:()=>ln,OPTForCausalLM:()=>pD,OPTModel:()=>hD,OPTPreTrainedModel:()=>wM,Olmo2ForCausalLM:()=>BN,Olmo2Model:()=>FN,Olmo2PreTrainedModel:()=>cM,OlmoForCausalLM:()=>LN,OlmoModel:()=>RN,OlmoPreTrainedModel:()=>lM,OpenELMForCausalLM:()=>ZN,OpenELMModel:()=>QN,OpenELMPreTrainedModel:()=>mM,OwlViTForObjectDetection:()=>LD,OwlViTModel:()=>RD,OwlViTPreTrainedModel:()=>jM,Owlv2ForObjectDetection:()=>BD,Owlv2Model:()=>FD,Owlv2PreTrainedModel:()=>AM,PaliGemmaForConditionalGeneration:()=>U_,PaliGemmaPreTrainedModel:()=>V_,PatchTSMixerForPrediction:()=>xF,PatchTSMixerModel:()=>_F,PatchTSMixerPreTrainedModel:()=>dk,PatchTSTForPrediction:()=>vF,PatchTSTModel:()=>yF,PatchTSTPreTrainedModel:()=>uk,Phi3ForCausalLM:()=>lD,Phi3Model:()=>oD,Phi3PreTrainedModel:()=>_M,Phi3VForCausalLM:()=>Fu,Phi3VPreTrainedModel:()=>H_,PhiForCausalLM:()=>aD,PhiModel:()=>sD,PhiPreTrainedModel:()=>vM,PreTrainedModel:()=>Z,PretrainedMixin:()=>Tr,PvtForImageClassification:()=>wD,PvtModel:()=>bD,PvtPreTrainedModel:()=>kM,PyAnnoteForAudioFrameClassification:()=>aL,PyAnnoteModel:()=>sL,PyAnnotePreTrainedModel:()=>ek,QuestionAnsweringModelOutput:()=>Ii,Qwen2ForCausalLM:()=>eD,Qwen2Model:()=>JN,Qwen2PreTrainedModel:()=>gM,Qwen2VLForConditionalGeneration:()=>iD,Qwen2VLPreTrainedModel:()=>nD,Qwen3ForCausalLM:()=>rD,Qwen3Model:()=>tD,Qwen3PreTrainedModel:()=>yM,RFDetrForObjectDetection:()=>ZD,RFDetrModel:()=>QD,RFDetrObjectDetectionOutput:()=>JD,RFDetrPreTrainedModel:()=>RM,RTDetrForObjectDetection:()=>KD,RTDetrModel:()=>HD,RTDetrObjectDetectionOutput:()=>Gm,RTDetrPreTrainedModel:()=>NM,RTDetrV2ForObjectDetection:()=>XD,RTDetrV2Model:()=>qD,RTDetrV2ObjectDetectionOutput:()=>YD,RTDetrV2PreTrainedModel:()=>DM,ResNetForImageClassification:()=>uR,ResNetModel:()=>cR,ResNetPreTrainedModel:()=>VM,RoFormerForMaskedLM:()=>wr,RoFormerForQuestionAnswering:()=>Ws,RoFormerForSequenceClassification:()=>ai,RoFormerForTokenClassification:()=>oi,RoFormerModel:()=>er,RoFormerPreTrainedModel:()=>gt,RobertaForMaskedLM:()=>xm,RobertaForQuestionAnswering:()=>E_,RobertaForSequenceClassification:()=>S_,RobertaForTokenClassification:()=>P_,RobertaModel:()=>k_,RobertaPreTrainedModel:()=>ac,SamImageSegmentationOutput:()=>YR,SamModel:()=>XR,SamPreTrainedModel:()=>qR,SapiensForDepthEstimation:()=>bR,SapiensForNormalEstimation:()=>wR,SapiensForSemanticSegmentation:()=>xR,SapiensPreTrainedModel:()=>J_,SegformerForImageClassification:()=>HL,SegformerForSemanticSegmentation:()=>KL,SegformerModel:()=>kle,SegformerPreTrainedModel:()=>i0,Seq2SeqLMOutput:()=>Dle,SequenceClassifierOutput:()=>qt,SiglipModel:()=>X_,SiglipPreTrainedModel:()=>kf,SiglipTextModel:()=>$m,SiglipVisionModel:()=>Im,SmolLM3ForCausalLM:()=>Jn,SmolLM3Model:()=>Ar,SmolLM3PreTrainedModel:()=>pr,SmolVLMForConditionalGeneration:()=>Cm,SnacDecoderModel:()=>NF,SnacEncoderModel:()=>IF,SnacModel:()=>$F,SnacPreTrainedModel:()=>d0,SpeechT5ForSpeechToText:()=>CL,SpeechT5ForTextToSpeech:()=>jL,SpeechT5HifiGan:()=>AL,SpeechT5Model:()=>Mle,SpeechT5PreTrainedModel:()=>r0,SqueezeBertForMaskedLM:()=>xe,SqueezeBertForQuestionAnswering:()=>De,SqueezeBertForSequenceClassification:()=>Te,SqueezeBertModel:()=>he,SqueezeBertPreTrainedModel:()=>ne,StableLmForCausalLM:()=>XL,StableLmModel:()=>qL,StableLmPreTrainedModel:()=>ak,Starcoder2ForCausalLM:()=>FL,Starcoder2Model:()=>LL,Starcoder2PreTrainedModel:()=>nk,StyleTextToSpeech2Model:()=>EL,StyleTextToSpeech2PreTrainedModel:()=>PL,Swin2SRForImageSuperResolution:()=>mR,Swin2SRModel:()=>pR,Swin2SRPreTrainedModel:()=>UM,SwinForImageClassification:()=>fR,SwinForSemanticSegmentation:()=>hR,SwinModel:()=>dR,SwinPreTrainedModel:()=>Z_,T5ForConditionalGeneration:()=>un,T5Model:()=>mr,T5PreTrainedModel:()=>br,TableTransformerForObjectDetection:()=>nR,TableTransformerModel:()=>rR,TableTransformerObjectDetectionOutput:()=>iR,TableTransformerPreTrainedModel:()=>FM,TokenClassifierOutput:()=>ei,TrOCRForCausalLM:()=>$L,TrOCRPreTrainedModel:()=>OL,UltravoxModel:()=>fk,UltravoxPreTrainedModel:()=>bF,UniSpeechForCTC:()=>uL,UniSpeechForSequenceClassification:()=>dL,UniSpeechModel:()=>cL,UniSpeechPreTrainedModel:()=>e0,UniSpeechSatForAudioFrameClassification:()=>mL,UniSpeechSatForCTC:()=>hL,UniSpeechSatForSequenceClassification:()=>pL,UniSpeechSatModel:()=>fL,UniSpeechSatPreTrainedModel:()=>Hm,ViTForImageClassification:()=>gD,ViTMAEModel:()=>MD,ViTMAEPreTrainedModel:()=>TD,ViTMSNForImageClassification:()=>SD,ViTMSNModel:()=>kD,ViTMSNPreTrainedModel:()=>SM,ViTModel:()=>mD,ViTPreTrainedModel:()=>TM,VisionEncoderDecoderModel:()=>Ru,VitMatteForImageMatting:()=>OD,VitMattePreTrainedModel:()=>AD,VitPoseForPoseEstimation:()=>xD,VitPosePreTrainedModel:()=>_D,VitsModel:()=>sk,VitsModelOutput:()=>B3,VitsPreTrainedModel:()=>GL,VoxtralForConditionalGeneration:()=>wF,Wav2Vec2BertForCTC:()=>yL,Wav2Vec2BertForSequenceClassification:()=>vL,Wav2Vec2BertModel:()=>gL,Wav2Vec2BertPreTrainedModel:()=>t0,Wav2Vec2ForAudioFrameClassification:()=>iL,Wav2Vec2ForCTC:()=>rL,Wav2Vec2ForSequenceClassification:()=>nL,Wav2Vec2Model:()=>tL,Wav2Vec2PreTrainedModel:()=>fc,WavLMForAudioFrameClassification:()=>SL,WavLMForCTC:()=>TL,WavLMForSequenceClassification:()=>ML,WavLMForXVector:()=>kL,WavLMModel:()=>wL,WavLMPreTrainedModel:()=>$f,WeSpeakerResNetModel:()=>lL,WeSpeakerResNetPreTrainedModel:()=>oL,WhisperForConditionalGeneration:()=>Sm,WhisperModel:()=>cc,WhisperPreTrainedModel:()=>wf,XLMForQuestionAnswering:()=>$_,XLMForSequenceClassification:()=>A_,XLMForTokenClassification:()=>O_,XLMModel:()=>C_,XLMPreTrainedModel:()=>oc,XLMRobertaForMaskedLM:()=>N_,XLMRobertaForQuestionAnswering:()=>Tm,XLMRobertaForSequenceClassification:()=>bm,XLMRobertaForTokenClassification:()=>wm,XLMRobertaModel:()=>I_,XLMRobertaPreTrainedModel:()=>lc,XLMWithLMHeadModel:()=>j_,XVectorOutput:()=>L3,YolosForObjectDetection:()=>HR,YolosModel:()=>GR,YolosObjectDetectionOutput:()=>KR,YolosPreTrainedModel:()=>QM});var n=r("./src/configs.js"),i=r("./src/backends/onnx.js"),s=r("./src/utils/dtypes.js"),a=r("./src/utils/generic.js"),o=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),c=r("./src/utils/constants.js"),d=r("./src/generation/logits_process.js"),u=r("./src/generation/configuration_utils.js"),f=r("./src/utils/tensor.js"),p=r("./src/utils/image.js"),m=r("./src/utils/maths.js"),g=r("./src/generation/stopping_criteria.js"),x=r("./src/generation/logits_sampler.js"),v=r("./src/env.js"),y=r("./src/models/whisper/generation_whisper.js"),w=r("./src/models/whisper/common_whisper.js");const b={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12},_=new Map,T=new Map,M=new Map;async function k(C,N,q){var hi;let ye=((hi=q.config)==null?void 0:hi["transformers.js_config"])??{},Ae=q.device??ye.device;Ae&&typeof Ae!="string"&&(Ae.hasOwnProperty(N)?Ae=Ae[N]:(console.warn(`device not specified for "${N}". Using the default device.`),Ae=null));const Ee=Ae??(v.apis.IS_NODE_ENV?"cpu":"wasm"),Le=(0,i.deviceToExecutionProviders)(Ee),qe=ye.device_config??{};qe.hasOwnProperty(Ee)&&(ye={...ye,...qe[Ee]});let tt=q.dtype??ye.dtype;if(typeof tt!="string"&&(tt&&tt.hasOwnProperty(N)?tt=tt[N]:(tt=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ee]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${N}". Using the default dtype (${tt}) for this device (${Ee}).`))),tt===s.DATA_TYPES.auto){let nr=ye.dtype;typeof nr!="string"&&(nr=nr==null?void 0:nr[N]),nr&&nr!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(nr)?tt=nr:tt=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ee]??s.DATA_TYPES.fp32}const ot=tt;if(s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(ot)){if(ot===s.DATA_TYPES.fp16&&Ee==="webgpu"&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${Ee}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${ot}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);const Ot=ye.kv_cache_dtype,Bt=Ot?typeof Ot=="string"?Ot:Ot[ot]??"float32":void 0;if(Bt&&!["float32","float16"].includes(Bt))throw new Error(`Invalid kv_cache_dtype: ${Bt}. Should be one of: float32, float16`);const zt={dtype:ot,kv_cache_dtype:Bt,device:Ee},hr=s.DEFAULT_DTYPE_SUFFIX_MAPPING[ot],Nt=`${N}${hr}.onnx`,rr=`${q.subfolder??""}/${Nt}`,Et={...q.session_options};Et.executionProviders??(Et.executionProviders=Le);const cr=ye.free_dimension_overrides;cr?Et.freeDimensionOverrides??(Et.freeDimensionOverrides=cr):Ee.startsWith("webnn")&&!Et.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${Ee}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const Nr=v.apis.IS_NODE_ENV&&v.env.useFSCache,Jr=(0,l.getModelFile)(C,rr,!0,q,Nr),Sn=q.use_external_data_format??ye.use_external_data_format;let xn=[];if(Sn){let nr;typeof Sn=="object"?Sn.hasOwnProperty(Nt)?nr=Sn[Nt]:Sn.hasOwnProperty(N)?nr=Sn[N]:nr=!1:nr=Sn;const ti=+nr;if(ti>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${ti}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let Gs=0;Gs<ti;++Gs){const Ku=`${Nt}_data${Gs===0?"":"_"+Gs}`,ds=`${q.subfolder??""}/${Ku}`;xn.push(new Promise(async(ma,f0)=>{const qu=await(0,l.getModelFile)(C,ds,!0,q,Nr);ma(qu instanceof Uint8Array?{path:Ku,data:qu}:Ku)}))}}else Et.externalData!==void 0&&(xn=Et.externalData.map(async nr=>{if(typeof nr.data=="string"){const ti=await(0,l.getModelFile)(C,nr.data,!0,q);return{...nr,data:ti}}return nr}));if(xn.length>0){const nr=await Promise.all(xn);v.apis.IS_NODE_ENV||(Et.externalData=nr)}if(Ee==="webgpu"){const nr=(0,n.getCacheShapes)(q.config,{prefix:"present"});if(Object.keys(nr).length>0&&!(0,i.isONNXProxy)()){const ti={};for(const Gs in nr)ti[Gs]="gpu-buffer";Et.preferredOutputLocation=ti}}return{buffer_or_path:await Jr,session_options:Et,session_config:zt}}async function j(C,N,q){return Object.fromEntries(await Promise.all(Object.keys(N).map(async ye=>{const{buffer_or_path:Ae,session_options:Ee,session_config:Le}=await k(C,N[ye],q),qe=await(0,i.createInferenceSession)(Ae,Ee,Le);return[ye,qe]})))}async function A(C,N,q){return Object.fromEntries(await Promise.all(Object.keys(N).map(async ye=>{const Ae=await(0,l.getModelJSON)(C,N[ye],!1,q);return[ye,Ae]})))}function R(C,N){const q=Object.create(null),ye=[];for(const Le of C.inputNames){const qe=N[Le];if(!(qe instanceof f.Tensor)){ye.push(Le);continue}q[Le]=(0,i.isONNXProxy)()?qe.clone():qe}if(ye.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${ye.join(", ")}.`);const Ae=Object.keys(N).length,Ee=C.inputNames.length;if(Ae>Ee){let Le=Object.keys(N).filter(qe=>!C.inputNames.includes(qe));console.warn(`WARNING: Too many inputs were provided (${Ae} > ${Ee}). The following inputs will be ignored: "${Le.join(", ")}".`)}return q}let I=Promise.resolve();async function $(C,N){const q=R(C,N);try{const ye=Object.fromEntries(Object.entries(q).map(([Le,qe])=>[Le,qe.ort_tensor])),Ae=()=>C.run(ye),Ee=await(v.apis.IS_BROWSER_ENV||v.apis.IS_WEBWORKER_ENV?I=I.then(Ae):Ae());return F(Ee)}catch(ye){const Ae=Object.fromEntries(Object.entries(q).map(([Ee,Le])=>{const qe={type:Le.type,dims:Le.dims,location:Le.location};return qe.location!=="gpu-buffer"&&(qe.data=Le.data),[Ee,qe]}));throw console.error(`An error occurred during model execution: "${ye}".`),console.error("Inputs given to model:",Ae),ye}}function F(C){for(let N in C)(0,i.isONNXTensor)(C[N])?C[N]=new f.Tensor(C[N]):typeof C[N]=="object"&&F(C[N]);return C}function V(C){if(C instanceof f.Tensor)return C;if(C.length===0)throw Error("items must be non-empty");if(Array.isArray(C[0])){if(C.some(N=>N.length!==C[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new f.Tensor("int64",BigInt64Array.from(C.flat().map(N=>BigInt(N))),[C.length,C[0].length])}else return new f.Tensor("int64",BigInt64Array.from(C.map(N=>BigInt(N))),[1,C.length])}function G(C){return new f.Tensor("bool",[C],[1])}async function H(C,N){let{encoder_outputs:q,input_ids:ye,decoder_input_ids:Ae,...Ee}=N;if(!q){const qe=(0,o.pick)(N,C.sessions.model.inputNames);q=(await B(C,qe)).last_hidden_state}return Ee.input_ids=Ae,Ee.encoder_hidden_states=q,C.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(Ee.encoder_attention_mask=N.attention_mask),await ae(C,Ee,!0)}async function B(C,N){const q=C.sessions.model,ye=(0,o.pick)(N,q.inputNames);if(q.inputNames.includes("inputs_embeds")&&!ye.inputs_embeds){if(!N.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");ye.inputs_embeds=await C.encode_text({input_ids:N.input_ids})}if(q.inputNames.includes("token_type_ids")&&!ye.token_type_ids){if(!ye.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");ye.token_type_ids=(0,f.zeros_like)(ye.input_ids)}if(q.inputNames.includes("pixel_mask")&&!ye.pixel_mask){if(!ye.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Ae=ye.pixel_values.dims;ye.pixel_mask=(0,f.ones)([Ae[0],Ae[2],Ae[3]])}return await $(q,ye)}async function te(C,N){const q=await C.encode(N);return await C.decode(q)}async function ae(C,N,q=!1){const ye=C.sessions[q?"decoder_model_merged":"model"],{past_key_values:Ae,...Ee}=N;if(ye.inputNames.includes("use_cache_branch")&&(Ee.use_cache_branch=G(!!Ae)),ye.inputNames.includes("position_ids")&&Ee.attention_mask&&!Ee.position_ids){const qe=["paligemma","gemma3_text","gemma3"].includes(C.config.model_type)?1:0;Ee.position_ids=Ie(Ee,Ae,qe)}C.addPastKeyValues(Ee,Ae);const Le=(0,o.pick)(Ee,ye.inputNames);return await $(ye,Le)}function z({modality_token_id:C,inputs_embeds:N,modality_features:q,input_ids:ye,attention_mask:Ae}){const Ee=ye.tolist().map(ot=>ot.reduce((Ot,Bt,zt)=>(Bt==C&&Ot.push(zt),Ot),[])),Le=Ee.reduce((ot,Ot)=>ot+Ot.length,0),qe=q.dims[0];if(Le!==qe)throw new Error(`Number of tokens and features do not match: tokens: ${Le}, features ${qe}`);let tt=0;for(let ot=0;ot<Ee.length;++ot){const Ot=Ee[ot],Bt=N[ot];for(let zt=0;zt<Ot.length;++zt)Bt[Ot[zt]].data.set(q[tt++].data)}return{inputs_embeds:N,attention_mask:Ae}}function D({image_token_id:C,inputs_embeds:N,image_features:q,input_ids:ye,attention_mask:Ae}){return z({modality_token_id:C,inputs_embeds:N,modality_features:q,input_ids:ye,attention_mask:Ae})}function K({audio_token_id:C,inputs_embeds:N,audio_features:q,input_ids:ye,attention_mask:Ae}){return z({modality_token_id:C,inputs_embeds:N,modality_features:q,input_ids:ye,attention_mask:Ae})}async function oe(C,{encode_function:N,merge_function:q,modality_input_name:ye,modality_output_name:Ae,input_ids:Ee=null,attention_mask:Le=null,position_ids:qe=null,inputs_embeds:tt=null,past_key_values:ot=null,generation_config:Ot=null,logits_processor:Bt=null,...zt}){const hr=zt[ye];if(!tt){if(tt=await C.encode_text({input_ids:Ee,...zt}),hr&&Ee.dims[1]!==1){const rr=await N({[ye]:hr,...zt});({inputs_embeds:tt,attention_mask:Le}=q({[Ae]:rr,inputs_embeds:tt,input_ids:Ee,attention_mask:Le}))}else if(ot&&hr&&Ee.dims[1]===1){const rr=Ee.dims[1],Et=Object.values(ot)[0].dims.at(-2);Le=(0,f.cat)([(0,f.ones)([Ee.dims[0],Et]),Le.slice(null,[Le.dims[1]-rr,Le.dims[1]])],1)}}if(!qe&&C.config.model_type==="qwen2_vl"){const{image_grid_thw:rr,video_grid_thw:Et}=zt;[qe]=C.get_rope_index(Ee,rr,Et,Le)}return await ae(C,{inputs_embeds:tt,past_key_values:ot,attention_mask:Le,position_ids:qe,generation_config:Ot,logits_processor:Bt},!0)}async function _e(C,N){return await oe(C,{...N,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:C.encode_audio.bind(C),merge_function:C._merge_input_ids_with_audio_features.bind(C)})}async function de(C,N){return await oe(C,{...N,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:C.encode_image.bind(C),merge_function:C._merge_input_ids_with_image_features.bind(C)})}function ve(C,N=0){const[q,ye]=C.dims,Ae=C.data,Ee=new BigInt64Array(Ae.length);for(let Le=0;Le<q;++Le){const qe=Le*ye;let tt=BigInt(N);for(let ot=0;ot<ye;++ot){const Ot=qe+ot;Ae[Ot]===0n?Ee[Ot]=BigInt(1):(Ee[Ot]=tt,tt+=Ae[Ot])}}return{data:Ee,dims:C.dims}}function Ie(C,N=null,q=0){const{input_ids:ye,inputs_embeds:Ae,attention_mask:Ee}=C,{data:Le,dims:qe}=ve(Ee,q);let tt=new f.Tensor("int64",Le,qe);if(N){const ot=-(ye??Ae).dims.at(1);tt=tt.slice(null,[ot,null])}return tt}function Se(C,N,q,ye){const Ae=q.past_key_values?Object.values(q.past_key_values)[0].dims.at(-2):0;if(!q.attention_mask){let Ee;for(const Le of["input_ids","inputs_embeds","position_ids"])if(q[Le]){Ee=q[Le].dims;break}if(!Ee)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");q.attention_mask=(0,f.ones)([Ee[0],Ae+Ee[1]])}if(q.past_key_values){const{input_ids:Ee,attention_mask:Le}=q;Le&&Le.dims[1]>Ee.dims[1]||Ae<Ee.dims[1]&&(q.input_ids=Ee.slice(null,[Ae,null]))}return q}function ge(C,N,q,ye){return q.past_key_values&&(N=N.map(Ae=>[Ae.at(-1)])),{...q,decoder_input_ids:V(N)}}function J(C,...N){return C.config.is_encoder_decoder?ge(C,...N):Se(C,...N)}function ee(C,N,q,ye){const Ae=!!q.past_key_values;return ye.guidance_scale!==null&&ye.guidance_scale>1&&(Ae?q.input_ids=(0,f.cat)([q.input_ids,q.input_ids],0):(q.input_ids=(0,f.cat)([q.input_ids,(0,f.full_like)(q.input_ids,BigInt(ye.pad_token_id))],0),q.attention_mask=(0,f.cat)([q.attention_mask,(0,f.full_like)(q.attention_mask,0n)],0))),(Ae||!q.pixel_values)&&(q.pixel_values=(0,f.full)([0,0,3,384,384],1)),Ae&&(q.images_seq_mask=new f.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),q.images_emb_mask=new f.Tensor("bool",new Array(0).fill(!1),[1,1,0])),q}class Z extends a.Callable{constructor(q,ye,Ae){super();ue(this,"main_input_name","input_ids");ue(this,"forward_params",["input_ids","attention_mask"]);this.config=q,this.sessions=ye,this.configs=Ae;const Ee=M.get(this.constructor),Le=_.get(Ee);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,Le){case b.DecoderOnly:this.can_generate=!0,this._forward=ae,this._prepare_inputs_for_generation=Se;break;case b.Seq2Seq:case b.Vision2Seq:case b.Musicgen:this.can_generate=!0,this._forward=H,this._prepare_inputs_for_generation=ge;break;case b.EncoderDecoder:this._forward=H;break;case b.ImageTextToText:this.can_generate=!0,this._forward=de,this._prepare_inputs_for_generation=J;break;case b.AudioTextToText:this.can_generate=!0,this._forward=_e,this._prepare_inputs_for_generation=J;break;case b.Phi3V:case b.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=J;break;case b.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=ee;break;case b.AutoEncoder:this._forward=te;break;default:this._forward=B;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){var ye;const q=[];for(const Ae of Object.values(this.sessions))(ye=Ae==null?void 0:Ae.handler)!=null&&ye.dispose&&q.push(Ae.handler.dispose());return await Promise.all(q)}static async from_pretrained(q,{progress_callback:ye=null,config:Ae=null,cache_dir:Ee=null,local_files_only:Le=!1,revision:qe="main",model_file_name:tt=null,subfolder:ot="onnx",device:Ot=null,dtype:Bt=null,use_external_data_format:zt=null,session_options:hr={}}={}){let Nt={progress_callback:ye,config:Ae,cache_dir:Ee,local_files_only:Le,revision:qe,model_file_name:tt,subfolder:ot,device:Ot,dtype:Bt,use_external_data_format:zt,session_options:hr};const rr=M.get(this),Et=_.get(rr);Ae=Nt.config=await n.AutoConfig.from_pretrained(q,Nt);let cr;if(Et===b.DecoderOnly)cr=await Promise.all([j(q,{model:Nt.model_file_name??"model"},Nt),A(q,{generation_config:"generation_config.json"},Nt)]);else if(Et===b.Seq2Seq||Et===b.Vision2Seq)cr=await Promise.all([j(q,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Nt),A(q,{generation_config:"generation_config.json"},Nt)]);else if(Et===b.MaskGeneration)cr=await Promise.all([j(q,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},Nt)]);else if(Et===b.EncoderDecoder)cr=await Promise.all([j(q,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Nt)]);else if(Et===b.ImageTextToText){const Nr={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Ae.is_encoder_decoder&&(Nr.model="encoder_model"),cr=await Promise.all([j(q,Nr,Nt),A(q,{generation_config:"generation_config.json"},Nt)])}else if(Et===b.AudioTextToText){const Nr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};cr=await Promise.all([j(q,Nr,Nt),A(q,{generation_config:"generation_config.json"},Nt)])}else if(Et===b.ImageAudioTextToText){const Nr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};cr=await Promise.all([j(q,Nr,Nt),A(q,{generation_config:"generation_config.json"},Nt)])}else if(Et===b.Musicgen)cr=await Promise.all([j(q,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},Nt),A(q,{generation_config:"generation_config.json"},Nt)]);else if(Et===b.MultiModality)cr=await Promise.all([j(q,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},Nt),A(q,{generation_config:"generation_config.json"},Nt)]);else if(Et===b.Phi3V)cr=await Promise.all([j(q,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},Nt),A(q,{generation_config:"generation_config.json"},Nt)]);else if(Et===b.AutoEncoder)cr=await Promise.all([j(q,{encoder_model:"encoder_model",decoder_model:"decoder_model"},Nt)]);else{if(Et!==b.EncoderOnly){const Nr=rr??(Ae==null?void 0:Ae.model_type);Nr!=="custom"&&console.warn(`Model type for '${Nr}' not found, assuming encoder-only architecture. Please report this at ${c.GITHUB_ISSUE_URL}.`)}cr=await Promise.all([j(q,{model:Nt.model_file_name??"model"},Nt)])}return new this(Ae,...cr)}async _call(q){return await this.forward(q)}async forward(q){return await this._forward(this,q)}get generation_config(){var q;return((q=this.configs)==null?void 0:q.generation_config)??null}_get_logits_warper(q){const ye=new d.LogitsProcessorList;return q.temperature!==null&&q.temperature!==1&&ye.push(new d.TemperatureLogitsWarper(q.temperature)),q.top_k!==null&&q.top_k!==0&&ye.push(new d.TopKLogitsWarper(q.top_k)),q.top_p!==null&&q.top_p<1&&ye.push(new d.TopPLogitsWarper(q.top_p)),ye}_get_logits_processor(q,ye,Ae=null){const Ee=new d.LogitsProcessorList;if(q.repetition_penalty!==null&&q.repetition_penalty!==1&&Ee.push(new d.RepetitionPenaltyLogitsProcessor(q.repetition_penalty)),q.no_repeat_ngram_size!==null&&q.no_repeat_ngram_size>0&&Ee.push(new d.NoRepeatNGramLogitsProcessor(q.no_repeat_ngram_size)),q.bad_words_ids!==null&&Ee.push(new d.NoBadWordsLogitsProcessor(q.bad_words_ids,q.eos_token_id)),q.min_length!==null&&q.eos_token_id!==null&&q.min_length>0&&Ee.push(new d.MinLengthLogitsProcessor(q.min_length,q.eos_token_id)),q.min_new_tokens!==null&&q.eos_token_id!==null&&q.min_new_tokens>0&&Ee.push(new d.MinNewTokensLengthLogitsProcessor(ye,q.min_new_tokens,q.eos_token_id)),q.forced_bos_token_id!==null&&Ee.push(new d.ForcedBOSTokenLogitsProcessor(q.forced_bos_token_id)),q.forced_eos_token_id!==null&&Ee.push(new d.ForcedEOSTokenLogitsProcessor(q.max_length,q.forced_eos_token_id)),q.begin_suppress_tokens!==null){const Le=ye>1||q.forced_bos_token_id===null?ye:ye+1;Ee.push(new d.SuppressTokensAtBeginLogitsProcessor(q.begin_suppress_tokens,Le))}return q.guidance_scale!==null&&q.guidance_scale>1&&Ee.push(new d.ClassifierFreeGuidanceLogitsProcessor(q.guidance_scale)),Ae!==null&&Ee.extend(Ae),Ee}_prepare_generation_config(q,ye,Ae=u.GenerationConfig){const Ee={...this.config};for(const qe of["decoder","generator","text_config"])qe in Ee&&Object.assign(Ee,Ee[qe]);const Le=new Ae(Ee);return Object.assign(Le,this.generation_config??{}),q&&Object.assign(Le,q),ye&&Object.assign(Le,(0,o.pick)(ye,Object.getOwnPropertyNames(Le))),Le}_get_stopping_criteria(q,ye=null){const Ae=new g.StoppingCriteriaList;return q.max_length!==null&&Ae.push(new g.MaxLengthCriteria(q.max_length,this.config.max_position_embeddings??null)),q.eos_token_id!==null&&Ae.push(new g.EosTokenCriteria(q.eos_token_id)),ye&&Ae.extend(ye),Ae}_validate_model_class(){if(!this.can_generate){const q=[mk,gk,pk,hk],ye=M.get(this.constructor),Ae=new Set,Ee=this.config.model_type;for(const qe of q){const tt=qe.get(Ee);tt&&Ae.add(tt[0])}let Le=`The current model class (${ye}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw Ae.size>0&&(Le+=` Please use the following class instead: ${[...Ae].join(", ")}`),Error(Le)}}prepare_inputs_for_generation(...q){return this._prepare_inputs_for_generation(this,...q)}_update_model_kwargs_for_generation({generated_input_ids:q,outputs:ye,model_inputs:Ae,is_encoder_decoder:Ee}){return Ae.past_key_values=this.getPastKeyValues(ye,Ae.past_key_values),Ae.input_ids=new f.Tensor("int64",q.flat(),[q.length,1]),Ee||(Ae.attention_mask=(0,f.cat)([Ae.attention_mask,(0,f.ones)([Ae.attention_mask.dims[0],1])],1)),Ae.position_ids=null,Ae}_prepare_model_inputs({inputs:q,bos_token_id:ye,model_kwargs:Ae}){const Ee=(0,o.pick)(Ae,this.forward_params),Le=this.main_input_name;if(Le in Ee){if(q)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else Ee[Le]=q;return{inputs_tensor:Ee[Le],model_inputs:Ee,model_input_name:Le}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:q,model_inputs:ye,model_input_name:Ae,generation_config:Ee}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!ye.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:qe,pixel_values:tt,attention_mask:ot,...Ot}=ye,Bt=await this._prepare_inputs_embeds(ye);ye={...Ot,...(0,o.pick)(Bt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:Le}=await B(this,ye);if(Ee.guidance_scale!==null&&Ee.guidance_scale>1)Le=(0,f.cat)([Le,(0,f.full_like)(Le,0)],0),"attention_mask"in ye&&(ye.attention_mask=(0,f.cat)([ye.attention_mask,(0,f.zeros_like)(ye.attention_mask)],0));else if(ye.decoder_input_ids){const qe=V(ye.decoder_input_ids).dims[0];if(qe!==Le.dims[0]){if(Le.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${Le.dims[0]}) than the decoder inputs (${qe}).`);Le=(0,f.cat)(Array.from({length:qe},()=>Le),0)}}return ye.encoder_outputs=Le,ye}_prepare_decoder_input_ids_for_generation({batch_size:q,model_input_name:ye,model_kwargs:Ae,decoder_start_token_id:Ee,bos_token_id:Le,generation_config:qe}){let{decoder_input_ids:tt,...ot}=Ae;if(!(tt instanceof f.Tensor)){if(tt)Array.isArray(tt[0])||(tt=Array.from({length:q},()=>tt));else if(Ee??(Ee=Le),this.config.model_type==="musicgen")tt=Array.from({length:q*this.config.decoder.num_codebooks},()=>[Ee]);else if(Array.isArray(Ee)){if(Ee.length!==q)throw new Error(`\`decoder_start_token_id\` expcted to have length ${q} but got ${Ee.length}`);tt=Ee}else tt=Array.from({length:q},()=>[Ee]);tt=V(tt)}return Ae.decoder_attention_mask=(0,f.ones_like)(tt),{input_ids:tt,model_inputs:ot}}async generate({inputs:q=null,generation_config:ye=null,logits_processor:Ae=null,stopping_criteria:Ee=null,streamer:Le=null,...qe}){this._validate_model_class(),ye=this._prepare_generation_config(ye,qe);let{inputs_tensor:tt,model_inputs:ot,model_input_name:Ot}=this._prepare_model_inputs({inputs:q,model_kwargs:qe});const Bt=this.config.is_encoder_decoder;Bt&&("encoder_outputs"in ot||(ot=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:tt,model_inputs:ot,model_input_name:Ot,generation_config:ye})));let zt;Bt?{input_ids:zt,model_inputs:ot}=this._prepare_decoder_input_ids_for_generation({batch_size:ot[Ot].dims.at(0),model_input_name:Ot,model_kwargs:ot,decoder_start_token_id:ye.decoder_start_token_id,bos_token_id:ye.bos_token_id,generation_config:ye}):zt=ot[Ot];let hr=zt.dims.at(-1);ye.max_new_tokens!==null&&(ye.max_length=hr+ye.max_new_tokens);const Nt=this._get_logits_processor(ye,hr,Ae),rr=this._get_stopping_criteria(ye,Ee),Et=ot[Ot].dims.at(0),cr=x.LogitsSampler.getSampler(ye),Nr=new Array(Et).fill(0),Jr=zt.tolist();Le&&Le.put(Jr);let Sn,xn={};for(;;){if(ot=this.prepare_inputs_for_generation(Jr,ot,ye),Sn=await this.forward(ot),ye.output_attentions&&ye.return_dict_in_generate){const ds=this.getAttentions(Sn);for(const ma in ds)ma in xn||(xn[ma]=[]),xn[ma].push(ds[ma])}const nr=Sn.logits.slice(null,-1,null),ti=Nt(Jr,nr),Gs=[];for(let ds=0;ds<ti.dims.at(0);++ds){const ma=ti[ds],f0=await cr(ma);for(const[qu,h0]of f0){const p0=BigInt(qu);Nr[ds]+=h0,Jr[ds].push(p0),Gs.push([p0]);break}}if(Le&&Le.put(Gs),rr(Jr).every(ds=>ds))break;ot=this._update_model_kwargs_for_generation({generated_input_ids:Gs,outputs:Sn,model_inputs:ot,is_encoder_decoder:Bt})}Le&&Le.end();const Hn=this.getPastKeyValues(Sn,ot.past_key_values,!0),hi=new f.Tensor("int64",Jr.flat(),[Jr.length,Jr[0].length]);if(ye.return_dict_in_generate)return{sequences:hi,past_key_values:Hn,...xn};for(const nr of Object.values(Sn))nr.location==="gpu-buffer"&&nr.dispose();return hi}getPastKeyValues(q,ye,Ae=!1){const Ee=Object.create(null);for(const Le in q)if(Le.startsWith("present")){const qe=Le.replace("present_conv","past_conv").replace("present","past_key_values"),tt=Le.includes("encoder");if(tt&&ye?Ee[qe]=ye[qe]:Ee[qe]=q[Le],ye&&(!tt||Ae)){const ot=ye[qe];ot.location==="gpu-buffer"&&ot.dispose()}}return Ee}getAttentions(q){const ye={};for(const Ae of["cross_attentions","encoder_attentions","decoder_attentions"])for(const Ee in q)Ee.startsWith(Ae)&&(Ae in ye||(ye[Ae]=[]),ye[Ae].push(q[Ee]));return ye}addPastKeyValues(q,ye){var Ae,Ee,Le;if(ye)Object.assign(q,ye);else{const qe=this.sessions.decoder_model_merged??this.sessions.model,tt=((Ee=(Ae=q[this.main_input_name]??q.attention_mask)==null?void 0:Ae.dims)==null?void 0:Ee[0])??1,ot=((Le=qe==null?void 0:qe.config)==null?void 0:Le.kv_cache_dtype)??"float32",Ot=ot==="float16"?f.DataTypeMap.float16:f.DataTypeMap.float32,Bt=(0,n.getCacheShapes)(this.config,{batch_size:tt});for(const zt in Bt){const hr=Bt[zt].reduce((Nt,rr)=>Nt*rr,1);q[zt]=new f.Tensor(ot,new Ot(hr),Bt[zt])}}}async encode_image({pixel_values:q}){return(await $(this.sessions.vision_encoder,{pixel_values:q})).image_features}async encode_text({input_ids:q}){return(await $(this.sessions.embed_tokens,{input_ids:q})).inputs_embeds}async encode_audio({audio_values:q}){return(await $(this.sessions.audio_encoder,{audio_values:q})).audio_features}}class we{}class $e extends we{constructor({last_hidden_state:N,hidden_states:q=null,attentions:ye=null}){super(),this.last_hidden_state=N,this.hidden_states=q,this.attentions=ye}}class Ce extends Z{}class Pe extends Ce{}class Q extends Ce{async _call(N){return new fi(await super._call(N))}}class re extends Ce{async _call(N){return new qt(await super._call(N))}}class fe extends Ce{async _call(N){return new ei(await super._call(N))}}class ke extends Ce{async _call(N){return new Ii(await super._call(N))}}class je extends Z{}class me extends je{}class Fe extends je{async _call(N){return new fi(await super._call(N))}}class ze extends je{async _call(N){return new qt(await super._call(N))}}class Je extends je{async _call(N){return new ei(await super._call(N))}}class He extends je{async _call(N){return new Ii(await super._call(N))}}class We extends Z{}class nt extends We{}class ct extends We{async _call(N){return new fi(await super._call(N))}}class Ht extends We{async _call(N){return new qt(await super._call(N))}}class Ut extends We{async _call(N){return new ei(await super._call(N))}}class $t extends Z{}class yn extends $t{}class Zr extends $t{}class ln extends Z{}class Es extends ln{}class gt extends Z{}class er extends gt{}class wr extends gt{async _call(N){return new fi(await super._call(N))}}class ai extends gt{async _call(N){return new qt(await super._call(N))}}class oi extends gt{async _call(N){return new ei(await super._call(N))}}class Ws extends gt{async _call(N){return new Ii(await super._call(N))}}class Pt extends Z{}class jo extends Pt{}class Ao extends Pt{async _call(N){return new fi(await super._call(N))}}class tr extends Pt{async _call(N){return new qt(await super._call(N))}}class Fr extends Pt{async _call(N){return new ei(await super._call(N))}}class L extends Pt{async _call(N){return new Ii(await super._call(N))}}class ce extends Z{}class Y extends ce{}class le extends ce{async _call(N){return new fi(await super._call(N))}}class pe extends ce{async _call(N){return new qt(await super._call(N))}}class Oe extends ce{async _call(N){return new ei(await super._call(N))}}class Ue extends ce{async _call(N){return new Ii(await super._call(N))}}class ht extends Z{}class Dt extends ht{}class At extends ht{async _call(N){return new fi(await super._call(N))}}class Wt extends ht{async _call(N){return new qt(await super._call(N))}}class pt extends ht{async _call(N){return new ei(await super._call(N))}}class xr extends ht{async _call(N){return new Ii(await super._call(N))}}class Sr extends Z{}class zi extends Sr{}class ls extends Sr{async _call(N){return new fi(await super._call(N))}}class cn extends Sr{async _call(N){return new qt(await super._call(N))}}class li extends Sr{async _call(N){return new ei(await super._call(N))}}class ci extends Sr{async _call(N){return new Ii(await super._call(N))}}class Vi extends Z{}class ha extends Vi{}class ui extends Vi{async _call(N){return new fi(await super._call(N))}}class Oo extends Vi{async _call(N){return new qt(await super._call(N))}}class $o extends Vi{async _call(N){return new ei(await super._call(N))}}class Ui extends Vi{async _call(N){return new Ii(await super._call(N))}}class Wi extends Z{}class Cs extends Wi{}class Mi extends Wi{async _call(N){return new qt(await super._call(N))}}class za extends Wi{async _call(N){return new ei(await super._call(N))}}class $n extends Wi{async _call(N){return new Ii(await super._call(N))}}class Vn extends Wi{async _call(N){return new fi(await super._call(N))}}class cs extends Z{}class ll extends cs{}class Gi extends cs{async _call(N){return new fi(await super._call(N))}}class Xe extends cs{async _call(N){return new qt(await super._call(N))}}class Ye extends cs{async _call(N){return new ei(await super._call(N))}}class ut extends Z{}class Br extends ut{}class cl extends ut{async _call(N){return new fi(await super._call(N))}}class Va extends ut{async _call(N){return new qt(await super._call(N))}}class ul extends ut{async _call(N){return new Ii(await super._call(N))}}class Ua extends Z{}class Iu extends Ua{}class Nu extends Ua{async _call(N){return new fi(await super._call(N))}}class Du extends Ua{async _call(N){return new qt(await super._call(N))}}class Me extends Ua{async _call(N){return new ei(await super._call(N))}}class U extends Ua{async _call(N){return new Ii(await super._call(N))}}class ne extends Z{}class he extends ne{}class xe extends ne{async _call(N){return new fi(await super._call(N))}}class Te extends ne{async _call(N){return new qt(await super._call(N))}}class De extends ne{async _call(N){return new Ii(await super._call(N))}}class Qe extends Z{}class at extends Qe{}class it extends Qe{async _call(N){return new qt(await super._call(N))}}class ft extends Qe{async _call(N){return new Ii(await super._call(N))}}class Lt extends Qe{async _call(N){return new fi(await super._call(N))}}class br extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class mr extends br{}class un extends br{}class jr extends Z{}class Un extends jr{}class Zn extends jr{}class vn extends Z{}class Wn extends vn{}class ki extends vn{}class us extends Z{}class Hr extends us{}class Gn extends us{}class Hi extends us{async _call(N){return new qt(await super._call(N))}}class $i extends Z{}class Wa extends $i{}class di extends $i{}class pa extends $i{async _call(N){return new qt(await super._call(N))}}class kn extends $i{}class _n extends Z{}class In extends _n{}class dn extends _n{}class Ki extends Z{}class dl extends Ki{}class bf extends Ki{}class ac extends Z{}class k_ extends ac{}class xm extends ac{async _call(N){return new fi(await super._call(N))}}class S_ extends ac{async _call(N){return new qt(await super._call(N))}}class P_ extends ac{async _call(N){return new ei(await super._call(N))}}class E_ extends ac{async _call(N){return new Ii(await super._call(N))}}class oc extends Z{}class C_ extends oc{}class j_ extends oc{async _call(N){return new fi(await super._call(N))}}class A_ extends oc{async _call(N){return new qt(await super._call(N))}}class O_ extends oc{async _call(N){return new ei(await super._call(N))}}class $_ extends oc{async _call(N){return new Ii(await super._call(N))}}class lc extends Z{}class I_ extends lc{}class N_ extends lc{async _call(N){return new fi(await super._call(N))}}class bm extends lc{async _call(N){return new qt(await super._call(N))}}class wm extends lc{async _call(N){return new ei(await super._call(N))}}class Tm extends lc{async _call(N){return new Ii(await super._call(N))}}class Mm extends Z{}class D_ extends Mm{}class km extends Mm{}class wf extends Z{constructor(){super(...arguments);ue(this,"requires_attention_mask",!1);ue(this,"main_input_name","input_features");ue(this,"forward_params",["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class cc extends wf{}class Sm extends wf{_prepare_generation_config(N,q){return super._prepare_generation_config(N,q,y.WhisperGenerationConfig)}_retrieve_init_tokens(N){const q=[N.decoder_start_token_id];let ye=N.language;const Ae=N.task;if(N.is_multilingual){ye||(console.warn("No language specified - defaulting to English (en)."),ye="en");const Le=`<|${(0,w.whisper_language_to_code)(ye)}|>`;q.push(N.lang_to_id[Le]),q.push(N.task_to_id[Ae??"transcribe"])}else if(ye||Ae)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!N.return_timestamps&&N.no_timestamps_token_id&&q.at(-1)!==N.no_timestamps_token_id?q.push(N.no_timestamps_token_id):N.return_timestamps&&q.at(-1)===N.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),q.pop()),q.filter(Ee=>Ee!=null)}async generate({inputs:N=null,generation_config:q=null,logits_processor:ye=null,stopping_criteria:Ae=null,...Ee}){q=this._prepare_generation_config(q,Ee);const Le=Ee.decoder_input_ids??this._retrieve_init_tokens(q);if(q.return_timestamps&&(ye??(ye=new d.LogitsProcessorList),ye.push(new d.WhisperTimeStampLogitsProcessor(q,Le))),q.begin_suppress_tokens&&(ye??(ye=new d.LogitsProcessorList),ye.push(new d.SuppressTokensAtBeginLogitsProcessor(q.begin_suppress_tokens,Le.length))),q.return_token_timestamps){if(!q.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");q.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),q.output_attentions=!0,q.return_dict_in_generate=!0}const qe=await super.generate({inputs:N,generation_config:q,logits_processor:ye,decoder_input_ids:Le,...Ee});return q.return_token_timestamps&&(qe.token_timestamps=this._extract_token_timestamps(qe,q.alignment_heads,q.num_frames)),qe}_extract_token_timestamps(N,q,ye=null,Ae=.02){if(!N.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");ye==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let Ee=this.config.median_filter_width;Ee===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Ee=7);const Le=N.cross_attentions,qe=Array.from({length:this.config.decoder_layers},(rr,Et)=>(0,f.cat)(Le.map(cr=>cr[Et]),2)),tt=(0,f.stack)(q.map(([rr,Et])=>{if(rr>=qe.length)throw new Error(`Layer index ${rr} is out of bounds for cross attentions (length ${qe.length}).`);return ye?qe[rr].slice(null,Et,null,[0,ye]):qe[rr].slice(null,Et)})).transpose(1,0,2,3),[ot,Ot]=(0,f.std_mean)(tt,-2,0,!0),Bt=tt.clone();for(let rr=0;rr<Bt.dims[0];++rr){const Et=Bt[rr];for(let cr=0;cr<Et.dims[0];++cr){const Nr=Et[cr],Jr=ot[rr][cr][0].data,Sn=Ot[rr][cr][0].data;for(let xn=0;xn<Nr.dims[0];++xn){let Hn=Nr[xn].data;for(let hi=0;hi<Hn.length;++hi)Hn[hi]=(Hn[hi]-Sn[hi])/Jr[hi];Hn.set((0,m.medianFilter)(Hn,Ee))}}}const zt=[(0,f.mean)(Bt,1)],hr=N.sequences.dims,Nt=new f.Tensor("float32",new Float32Array(hr[0]*hr[1]),hr);for(let rr=0;rr<hr[0];++rr){const Et=zt[rr].neg().squeeze_(0),[cr,Nr]=(0,m.dynamic_time_warping)(Et.tolist()),Jr=Array.from({length:cr.length-1},(Hn,hi)=>cr[hi+1]-cr[hi]),Sn=(0,o.mergeArrays)([1],Jr).map(Hn=>!!Hn),xn=[];for(let Hn=0;Hn<Sn.length;++Hn)Sn[Hn]&&xn.push(Nr[Hn]*Ae);Nt[rr].data.set(xn,1)}return Nt}}class Pm extends Sm{}class Em extends Z{constructor(){super(...arguments);ue(this,"requires_attention_mask",!1);ue(this,"main_input_name","input_values");ue(this,"forward_params",["input_values","decoder_input_ids","past_key_values"])}}class iM extends Em{}class R_ extends Em{}class Ru extends Z{constructor(){super(...arguments);ue(this,"main_input_name","pixel_values");ue(this,"forward_params",["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"])}}class Tf extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class Mf extends Tf{_merge_input_ids_with_image_features(N){const q=N.image_features.dims.at(-1),ye=N.image_features.view(-1,q);return D({image_token_id:this.config.image_token_index,...N,image_features:ye})}}class L_ extends Mf{}class F_ extends Mf{}class B_ extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"]);ue(this,"main_input_name","inputs_embeds")}}class z_ extends B_{_merge_input_ids_with_image_features({inputs_embeds:N,image_features:q,input_ids:ye,attention_mask:Ae}){return{inputs_embeds:(0,f.cat)([q,N],1),attention_mask:(0,f.cat)([(0,f.ones)(q.dims.slice(0,2)),Ae],1)}}async _prepare_inputs_embeds({input_ids:N,pixel_values:q,inputs_embeds:ye,attention_mask:Ae}){if(!N&&!q)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let Ee,Le;return N&&(Ee=await this.encode_text({input_ids:N})),q&&(Le=await this.encode_image({pixel_values:q})),Ee&&Le?{inputs_embeds:ye,attention_mask:Ae}=this._merge_input_ids_with_image_features({inputs_embeds:Ee,image_features:Le,input_ids:N,attention_mask:Ae}):ye=Ee||Le,{inputs_embeds:ye,attention_mask:Ae}}async forward({input_ids:N,pixel_values:q,attention_mask:ye,decoder_input_ids:Ae,decoder_attention_mask:Ee,encoder_outputs:Le,past_key_values:qe,inputs_embeds:tt,decoder_inputs_embeds:ot}){if(tt||({inputs_embeds:tt,attention_mask:ye}=await this._prepare_inputs_embeds({input_ids:N,pixel_values:q,inputs_embeds:tt,attention_mask:ye})),!Le){let{last_hidden_state:zt}=await B(this,{inputs_embeds:tt,attention_mask:ye});Le=zt}if(!ot){if(!Ae)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");ot=await this.encode_text({input_ids:Ae})}return await ae(this,{inputs_embeds:ot,attention_mask:Ee,encoder_attention_mask:ye,encoder_hidden_states:Le,past_key_values:qe},!0)}}class V_ extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class U_ extends V_{_merge_input_ids_with_image_features(N){const q=N.image_features.dims.at(-1),ye=N.image_features.view(-1,q);return D({image_token_id:this.config.image_token_index,...N,image_features:ye})}}class W_ extends Tf{_merge_input_ids_with_image_features(N){const q=N.image_features.dims.at(-1),ye=N.image_features.view(-1,q);return D({image_token_id:this.config.image_token_index,...N,image_features:ye})}}class G_ extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"])}}class uc extends G_{async forward({input_ids:N=null,attention_mask:q=null,pixel_values:ye=null,input_features:Ae=null,input_features_mask:Ee=null,position_ids:Le=null,inputs_embeds:qe=null,per_layer_inputs:tt=null,past_key_values:ot=null,generation_config:Ot=null,logits_processor:Bt=null,...zt}){if((!qe||!tt)&&({inputs_embeds:qe,per_layer_inputs:tt}=await $(this.sessions.embed_tokens,{input_ids:N}),N.dims[1]!==1)){if(ye){const{image_features:Nt}=await $(this.sessions.vision_encoder,{pixel_values:ye});({inputs_embeds:qe,attention_mask:q}=this._merge_input_ids_with_image_features({image_features:Nt,inputs_embeds:qe,input_ids:N,attention_mask:q}))}if(Ae){const{audio_features:Nt}=await $(this.sessions.audio_encoder,{input_features:Ae,input_features_mask:Ee});({inputs_embeds:qe,attention_mask:q}=this._merge_input_ids_with_audio_features({audio_features:Nt,inputs_embeds:qe,input_ids:N,attention_mask:q}))}}return await ae(this,{inputs_embeds:qe,per_layer_inputs:tt,past_key_values:ot,attention_mask:q,position_ids:Le,generation_config:Ot,logits_processor:Bt},!0)}_merge_input_ids_with_image_features(N){const q=N.image_features.dims.at(-1),ye=N.image_features.view(-1,q);return D({image_token_id:this.config.image_token_id,...N,image_features:ye})}_merge_input_ids_with_audio_features(N){const q=N.audio_features.dims.at(-1),ye=N.audio_features.view(-1,q);return K({audio_token_id:this.config.audio_token_id,...N,audio_features:ye})}}class dc extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"])}}class Lu extends dc{async encode_image({pixel_values:N,pixel_attention_mask:q}){return(await $(this.sessions.vision_encoder,{pixel_values:N,pixel_attention_mask:q})).image_features}_merge_input_ids_with_image_features(N){const q=N.image_features.dims.at(-1),ye=N.image_features.view(-1,q);return D({image_token_id:this.config.image_token_id,...N,image_features:ye})}}class Cm extends Lu{}class H_ extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"])}}class Fu extends H_{async forward({input_ids:N=null,attention_mask:q=null,pixel_values:ye=null,image_sizes:Ae=null,position_ids:Ee=null,inputs_embeds:Le=null,past_key_values:qe=null,generation_config:tt=null,logits_processor:ot=null,...Ot}){if(!Le){let zt;if(ye&&N.dims[1]!==1){if(!Ae)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:zt}=await $(this.sessions.vision_encoder,{pixel_values:ye,image_sizes:Ae}))}else{const hr=this.config.normalized_config.hidden_size;zt=new f.Tensor("float32",[],[0,hr])}({inputs_embeds:Le}=await $(this.sessions.prepare_inputs_embeds,{input_ids:N,image_features:zt}))}return await ae(this,{inputs_embeds:Le,past_key_values:qe,attention_mask:q,position_ids:Ee,generation_config:tt,logits_processor:ot},!1)}}class Ga extends Z{}class jm extends Ga{}class K_ extends Ga{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"text_model"})}}class Am extends Ga{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"text_model"})}}class q_ extends Ga{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"vision_model"})}}class Om extends Ga{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"vision_model"})}}class kf extends Z{}class X_ extends kf{}class $m extends kf{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"text_model"})}}class Im extends Ga{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"vision_model"})}}class Bu extends Z{}class Ct extends Bu{}class Sf extends Z{}class Nm extends Sf{async forward(N){const q=!N.input_ids,ye=!N.pixel_values;if(q&&ye)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(q&&(N.input_ids=(0,f.ones)([N.pixel_values.dims[0],1])),ye){const{image_size:ot}=this.config.vision_config;N.pixel_values=(0,f.full)([0,3,ot,ot],0)}const{text_embeddings:Ae,image_embeddings:Ee,l2norm_text_embeddings:Le,l2norm_image_embeddings:qe}=await super.forward(N),tt={};return q||(tt.text_embeddings=Ae,tt.l2norm_text_embeddings=Le),ye||(tt.image_embeddings=Ee,tt.l2norm_image_embeddings=qe),tt}}class Dm extends Sf{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"text_model"})}}class zu extends Sf{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"vision_model"})}}class js extends Z{}class Vu extends js{}class Pf extends js{}class Ef extends Z{}class Rm extends Ef{}class Lm extends Ef{}class Uu extends Z{}class Fm extends Uu{}class Bm extends Uu{}class Cf extends Z{}class Wu extends Cf{}class jf extends Cf{}class Gu extends Z{}class zm extends Gu{}class Vm extends Gu{}class Af extends Z{}class Um extends Af{}class Wm extends Af{}class Of extends Z{}class S extends Of{}class O extends Of{}class W extends Z{}class X extends W{}class ie extends W{}class be extends Z{}class Re extends be{}class Ke extends be{}class st extends Z{}class _t extends st{}class Kt extends st{}class pr extends Z{}class Ar extends pr{}class Jn extends pr{}class Io extends Z{}class Y_ extends Io{}class jN extends Io{}class sM extends Z{}class AN extends sM{}class ON extends sM{}class aM extends Z{}class $N extends aM{}class IN extends aM{}class oM extends Z{}class NN extends oM{}class DN extends oM{}class lM extends Z{}class RN extends lM{}class LN extends lM{}class cM extends Z{}class FN extends cM{}class BN extends cM{}class uM extends Z{}class zN extends uM{}class VN extends uM{}class dM extends Z{}class UN extends dM{}class WN extends dM{}class fM extends Z{}class GN extends fM{}class HN extends fM{}class hM extends Z{}class KN extends hM{}class qN extends hM{}class pM extends Z{}class XN extends pM{}class YN extends pM{}class mM extends Z{}class QN extends mM{}class ZN extends mM{}class gM extends Z{}class JN extends gM{}class eD extends gM{}class yM extends Z{}class tD extends yM{}class rD extends yM{}class nD extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"])}}class iD extends nD{get_rope_index(N,q,ye,Ae){const{vision_config:Ee,image_token_id:Le,video_token_id:qe,vision_start_token_id:tt}=this.config,ot=Ee.spatial_merge_size??2,Ot=[];if(q||ye){let Bt=N.tolist();Ae||(Ae=(0,f.ones_like)(N));const zt=Ae.tolist(),hr=Array.from({length:3},Nr=>Array.from({length:N.dims[0]},Jr=>Array.from({length:N.dims[1]},Sn=>1))),Nt=q?q.tolist():[],rr=ye?ye.tolist():[];let Et=0,cr=0;for(let Nr=0;Nr<Bt.length;++Nr){const Jr=Bt[Nr].filter((en,ri)=>zt[Nr][ri]==1),xn=Jr.reduce((en,ri,hc)=>(ri==tt&&en.push(hc),en),[]).map(en=>Jr[en+1]),Hn=xn.filter(en=>en==Le).length,hi=xn.filter(en=>en==qe).length;let nr=[],ti=0,Gs=Hn,Ku=hi;for(let en=0;en<xn.length;++en){const ri=Jr.findIndex((Yu,Ha)=>Ha>ti&&Yu==Le),hc=Jr.findIndex((Yu,Ha)=>Ha>ti&&Yu==qe),Xu=Gs>0&&ri!==-1?ri:Jr.length+1,Nf=Ku>0&&hc!==-1?hc:Jr.length+1;let m0,vk,_k,xk;Xu<Nf?([vk,_k,xk]=Nt[Et],++Et,--Gs,m0=Xu):([vk,_k,xk]=rr[cr],++cr,--Ku,m0=Nf);const[Lle,bk,g0]=[Number(vk),Math.floor(Number(_k)/ot),Math.floor(Number(xk)/ot)],wk=m0-ti,z3=nr.length>0?(0,m.max)(nr.at(-1))[0]+1:0;nr.push(Array.from({length:3*wk},(Yu,Ha)=>z3+Ha%wk));const Tk=wk+z3,y0=Lle*bk*g0,Fle=Array.from({length:y0},(Yu,Ha)=>Tk+Math.floor(Ha/(bk*g0))),Ble=Array.from({length:y0},(Yu,Ha)=>Tk+Math.floor(Ha/g0)%bk),zle=Array.from({length:y0},(Yu,Ha)=>Tk+Ha%g0);nr.push([Fle,Ble,zle].flat()),ti=m0+y0}if(ti<Jr.length){const en=nr.length>0?(0,m.max)(nr.at(-1))[0]+1:0,ri=Jr.length-ti;nr.push(Array.from({length:3*ri},(hc,Xu)=>en+Xu%ri))}const ds=nr.reduce((en,ri)=>en+ri.length,0),ma=new Array(ds);let f0=0;for(let en=0;en<3;++en)for(let ri=0;ri<nr.length;++ri){const hc=nr[ri],Xu=hc.length/3;for(let Nf=en*Xu;Nf<(en+1)*Xu;++Nf)ma[f0++]=hc[Nf]}let qu=0;const h0=zt[Nr];for(let en=0;en<h0.length;++en)if(h0[en]==1){for(let ri=0;ri<3;++ri)hr[ri][Nr][en]=ma[ri*ds/3+qu];++qu}const p0=(0,m.max)(ma)[0];Ot.push(p0+1-Bt[Nr].length)}return[new f.Tensor("int64",hr.flat(1/0),[3,N.dims[0],N.dims[1]]),new f.Tensor("int64",Ot,[Ot.length,1])]}else if(Ae){const{data:Bt,dims:zt}=ve(Ae),hr=BigInt64Array.from({length:3*Bt.length},(rr,Et)=>Bt[Et%Bt.length]),Nt=Array.from({length:zt[0]},(rr,Et)=>(0,m.max)(Bt.subarray(zt[1]*Et,zt[1]*(Et+1)))[0]+1n+BigInt(zt[1]));return[new f.Tensor("int64",hr,[3,...zt]),new f.Tensor("int64",Nt,[Nt.length,1])]}else{const[Bt,zt]=N.dims,hr=BigInt64Array.from({length:3*Bt*zt},(Nt,rr)=>BigInt(Math.floor(rr%zt/Bt)));return[new f.Tensor("int64",hr,[3,...N.dims]),(0,f.zeros)([Bt,1])]}}async encode_image({pixel_values:N,image_grid_thw:q}){return(await $(this.sessions.vision_encoder,{pixel_values:N,grid_thw:q})).image_features}_merge_input_ids_with_image_features(N){return D({image_token_id:this.config.image_token_id,...N})}prepare_inputs_for_generation(N,q,ye){if(q.attention_mask&&!q.position_ids)if(!q.past_key_values)[q.position_ids,q.rope_deltas]=this.get_rope_index(q.input_ids,q.image_grid_thw,q.video_grid_thw,q.attention_mask);else{q.pixel_values=null;const Ae=BigInt(Object.values(q.past_key_values)[0].dims.at(-2)),Ee=q.rope_deltas.map(Le=>Ae+Le);q.position_ids=(0,f.stack)([Ee,Ee,Ee],0)}return q}}class vM extends Z{}class sD extends vM{}class aD extends vM{}class _M extends Z{}class oD extends _M{}class lD extends _M{}class xM extends Z{}class cD extends xM{}class uD extends xM{}class bM extends Z{}class dD extends bM{}class fD extends bM{}class wM extends Z{}class hD extends wM{}class pD extends wM{}class TM extends Z{}class mD extends TM{}class gD extends TM{async _call(N){return new qt(await super._call(N))}}class MM extends Z{}class yD extends MM{}class vD extends MM{async _call(N){return new qt(await super._call(N))}}class _D extends Z{}class xD extends _D{}class kM extends Z{}class bD extends kM{}class wD extends kM{async _call(N){return new qt(await super._call(N))}}class TD extends Z{}class MD extends TD{}class SM extends Z{}class kD extends SM{}class SD extends SM{async _call(N){return new qt(await super._call(N))}}class PD extends Z{}class ED extends PD{}class PM extends Z{}class CD extends PM{}class jD extends PM{async _call(N){return new qt(await super._call(N))}}class AD extends Z{}class OD extends AD{async _call(N){return new F3(await super._call(N))}}class EM extends Z{}class $D extends EM{}class ID extends EM{async _call(N){return new qt(await super._call(N))}}class CM extends Z{}class ND extends CM{}class DD extends CM{async _call(N){return new qt(await super._call(N))}}class jM extends Z{}class RD extends jM{}class LD extends jM{}class AM extends Z{}class FD extends AM{}class BD extends AM{}class OM extends Z{}class zD extends OM{}class VD extends OM{async _call(N){return new qt(await super._call(N))}}class Q_ extends Z{}class UD extends Q_{}class WD extends Q_{async _call(N){return new IM(await super._call(N))}}class $M extends Q_{async _call(N){return new GD(await super._call(N))}}class IM extends we{constructor({logits:N,pred_boxes:q}){super(),this.logits=N,this.pred_boxes=q}}class GD extends we{constructor({logits:N,pred_boxes:q,pred_masks:ye}){super(),this.logits=N,this.pred_boxes=q,this.pred_masks=ye}}class NM extends Z{}class HD extends NM{}class KD extends NM{async _call(N){return new Gm(await super._call(N))}}class Gm extends we{constructor({logits:N,pred_boxes:q}){super(),this.logits=N,this.pred_boxes=q}}class DM extends Z{}class qD extends DM{}class XD extends DM{async _call(N){return new YD(await super._call(N))}}class YD extends Gm{}class RM extends Z{}class QD extends RM{}class ZD extends RM{async _call(N){return new JD(await super._call(N))}}class JD extends Gm{}class LM extends Z{}class eR extends LM{}class tR extends LM{async _call(N){return new Gm(await super._call(N))}}class FM extends Z{}class rR extends FM{}class nR extends FM{async _call(N){return new iR(await super._call(N))}}class iR extends IM{}class BM extends Z{}class sR extends BM{}class aR extends BM{async _call(N){return new qt(await super._call(N))}}class zM extends Z{}class oR extends zM{}class lR extends zM{async _call(N){return new qt(await super._call(N))}}class VM extends Z{}class cR extends VM{}class uR extends VM{async _call(N){return new qt(await super._call(N))}}class Z_ extends Z{}class dR extends Z_{}class fR extends Z_{async _call(N){return new qt(await super._call(N))}}class hR extends Z_{}class UM extends Z{}class pR extends UM{}class mR extends UM{}class WM extends Z{}class gR extends WM{}class yR extends WM{}class vR extends Z{}class _R extends vR{}class J_ extends Z{}class xR extends J_{}class bR extends J_{}class wR extends J_{}class TR extends Z{}class MR extends TR{}class kR extends Z{}class SR extends kR{}class PR extends Z{}class ER extends PR{}class GM extends Z{}class CR extends GM{}class jR extends GM{}class HM extends Z{}class AR extends HM{}class OR extends HM{}class $R extends Z{}class IR extends $R{}class KM extends Z{}class NR extends KM{}class DR extends KM{async _call(N){return new qt(await super._call(N))}}class qM extends Z{}class RR extends qM{}class LR extends qM{async _call(N){return new qt(await super._call(N))}}class XM extends Z{}class FR extends XM{}class BR extends XM{async _call(N){return new qt(await super._call(N))}}class YM extends Z{}class zR extends YM{}class VR extends YM{async _call(N){return new qt(await super._call(N))}}class UR extends Z{}class WR extends UR{}class QM extends Z{}class GR extends QM{}class HR extends QM{async _call(N){return new KR(await super._call(N))}}class KR extends we{constructor({logits:N,pred_boxes:q}){super(),this.logits=N,this.pred_boxes=q}}class qR extends Z{}class XR extends qR{async get_image_embeddings({pixel_values:N}){return await B(this,{pixel_values:N})}async forward(N){if((!N.image_embeddings||!N.image_positional_embeddings)&&(N={...N,...await this.get_image_embeddings(N)}),!N.input_labels&&N.input_points){const ye=N.input_points.dims.slice(0,-1),Ae=ye.reduce((Ee,Le)=>Ee*Le,1);N.input_labels=new f.Tensor("int64",new BigInt64Array(Ae).fill(1n),ye)}const q={image_embeddings:N.image_embeddings,image_positional_embeddings:N.image_positional_embeddings};return N.input_points&&(q.input_points=N.input_points),N.input_labels&&(q.input_labels=N.input_labels),N.input_boxes&&(q.input_boxes=N.input_boxes),await $(this.sessions.prompt_encoder_mask_decoder,q)}async _call(N){return new YR(await super._call(N))}}class YR extends we{constructor({iou_scores:N,pred_masks:q}){super(),this.iou_scores=N,this.pred_masks=q}}class ZM extends Z{}class QR extends ZM{}class ZR extends ZM{}class JM extends Z{}class JR extends JM{}class eL extends JM{}class fc extends Z{}class tL extends fc{}class rL extends fc{async _call(N){return new Hu(await super._call(N))}}class nL extends fc{async _call(N){return new qt(await super._call(N))}}class iL extends fc{async _call(N){return new ei(await super._call(N))}}class ek extends Z{}class sL extends ek{}class aL extends ek{async _call(N){return new ei(await super._call(N))}}class oL extends Z{}class lL extends oL{}class e0 extends Z{}class cL extends e0{}class uL extends e0{async _call(N){return new Hu(await super._call(N))}}class dL extends e0{async _call(N){return new qt(await super._call(N))}}class Hm extends Z{}class fL extends Hm{}class hL extends Hm{async _call(N){return new Hu(await super._call(N))}}class pL extends Hm{async _call(N){return new qt(await super._call(N))}}class mL extends Hm{async _call(N){return new ei(await super._call(N))}}class t0 extends Z{}class gL extends t0{}class yL extends t0{async _call(N){return new Hu(await super._call(N))}}class vL extends t0{async _call(N){return new qt(await super._call(N))}}class Tle extends Z{}class _L extends fc{}class xL extends fc{async _call(N){return new Hu(await super._call(N))}}class bL extends fc{async _call(N){return new qt(await super._call(N))}}class $f extends Z{}class wL extends $f{}class TL extends $f{async _call(N){return new Hu(await super._call(N))}}class ML extends $f{async _call(N){return new qt(await super._call(N))}}class kL extends $f{async _call(N){return new L3(await super._call(N))}}class SL extends $f{async _call(N){return new ei(await super._call(N))}}class PL extends Z{}class EL extends PL{}class r0 extends Z{}class Mle extends r0{}class CL extends r0{}class jL extends r0{async generate_speech(N,q,{threshold:ye=.5,minlenratio:Ae=0,maxlenratio:Ee=20,vocoder:Le=null}={}){const qe={input_ids:N},{encoder_outputs:tt,encoder_attention_mask:ot}=await B(this,qe),Ot=tt.dims[1]/this.config.reduction_factor,Bt=Math.floor(Ot*Ee),zt=Math.floor(Ot*Ae),hr=this.config.num_mel_bins;let Nt=[],rr=null,Et=null,cr=0;for(;;){++cr;const Sn=G(!!Et);let xn;Et?xn=Et.output_sequence_out:xn=new f.Tensor("float32",new Float32Array(hr),[1,1,hr]);let Hn={use_cache_branch:Sn,output_sequence:xn,encoder_attention_mask:ot,speaker_embeddings:q,encoder_hidden_states:tt};this.addPastKeyValues(Hn,rr),Et=await $(this.sessions.decoder_model_merged,Hn),rr=this.getPastKeyValues(Et,rr);const{prob:hi,spectrum:nr}=Et;if(Nt.push(nr),cr>=zt&&(Array.from(hi.data).filter(ti=>ti>=ye).length>0||cr>=Bt))break}const Nr=(0,f.cat)(Nt),{waveform:Jr}=await $(Le.sessions.model,{spectrogram:Nr});return{spectrogram:Nr,waveform:Jr}}}class AL extends Z{constructor(){super(...arguments);ue(this,"main_input_name","spectrogram")}}class OL extends Z{}class $L extends OL{}class tk extends Z{}class IL extends tk{}class NL extends tk{}class rk extends Z{}class DL extends rk{}class RL extends rk{}class nk extends Z{}class LL extends nk{}class FL extends nk{}class ik extends Z{}class BL extends ik{}class zL extends ik{}class n0 extends Z{}class VL extends n0{}class UL extends n0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"text_model"})}}class WL extends n0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"audio_model"})}}class GL extends Z{}class sk extends GL{async _call(N){return new B3(await super._call(N))}}class i0 extends Z{}class kle extends i0{}class HL extends i0{}class KL extends i0{}class ak extends Z{}class qL extends ak{}class XL extends ak{}class ok extends Z{}class YL extends ok{}class QL extends ok{async _call(N){return new qt(await super._call(N))}}class lk extends Z{}class Sle extends lk{}class Ple extends lk{}class ck extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}_apply_and_filter_by_delay_pattern_mask(q){const[ye,Ae]=q.dims,Ee=this.config.decoder.num_codebooks,Le=Ae-Ee;let qe=0;for(let Ot=0;Ot<q.size;++Ot){if(q.data[Ot]===this.config.decoder.pad_token_id)continue;const Bt=Ot%Ae,zt=Math.floor(Ot/Ae)%Ee,hr=Bt-zt;hr>0&&hr<=Le&&(q.data[qe++]=q.data[Ot])}const tt=Math.floor(ye/Ee),ot=qe/(tt*Ee);return new f.Tensor(q.type,q.data.slice(0,qe),[tt,Ee,ot])}prepare_inputs_for_generation(q,ye,Ae){let Ee=structuredClone(q);for(let qe=0;qe<Ee.length;++qe)for(let tt=0;tt<Ee[qe].length;++tt)qe%this.config.decoder.num_codebooks>=tt&&(Ee[qe][tt]=BigInt(this.config.decoder.pad_token_id));return Ae.guidance_scale!==null&&Ae.guidance_scale>1&&(Ee=Ee.concat(Ee)),super.prepare_inputs_for_generation(Ee,ye,Ae)}async generate(q){const ye=await super.generate(q),Ae=this._apply_and_filter_by_delay_pattern_mask(ye).unsqueeze_(0),{audio_values:Ee}=await $(this.sessions.encodec_decode,{audio_codes:Ae});return Ee}}class s0 extends Z{}class ZL extends s0{}class JL extends s0{async _call(N){return new qt(await super._call(N))}}class eF extends s0{}class a0 extends Z{}class tF extends a0{}class rF extends a0{async _call(N){return new qt(await super._call(N))}}class nF extends a0{}class o0 extends Z{}class iF extends o0{}class sF extends o0{async _call(N){return new qt(await super._call(N))}}class aF extends o0{}class l0 extends Z{}class oF extends l0{}class lF extends l0{async _call(N){return new qt(await super._call(N))}}class cF extends l0{}class uF extends Z{}class dF extends uF{}class fF extends Z{}class hF extends fF{constructor(...q){super(...q);ue(this,"forward_params",["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"]);this._generation_mode="text"}async forward(q){const ye=this._generation_mode??"text";let Ae;if(ye==="text"||!q.past_key_values){const ot=this.sessions.prepare_inputs_embeds,Ot=(0,o.pick)(q,ot.inputNames);Ae=await $(ot,Ot)}else{const ot=this.sessions.gen_img_embeds,Ot=(0,o.pick)({image_ids:q.input_ids},ot.inputNames);Ae=await $(ot,Ot)}const Ee={...q,...Ae},Le=await ae(this,Ee),qe=this.sessions[ye==="text"?"lm_head":"gen_head"];if(!qe)throw new Error(`Unable to find "${qe}" generation head`);const tt=await $(qe,(0,o.pick)(Le,qe.inputNames));return{...Ae,...Le,...tt}}async generate(q){return this._generation_mode="text",super.generate(q)}async generate_images(q){this._generation_mode="image";const ye=(q.inputs??q[this.main_input_name]).dims[1],Ee=(await super.generate(q)).slice(null,[ye,null]),Le=this.sessions.image_decode,{decoded_image:qe}=await $(Le,{generated_tokens:Ee}),tt=qe.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),ot=[];for(const Ot of tt){const Bt=p.RawImage.fromTensor(Ot);ot.push(Bt)}return ot}}class pF extends we{constructor({char_logits:N,bpe_logits:q,wp_logits:ye}){super(),this.char_logits=N,this.bpe_logits=q,this.wp_logits=ye}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class mF extends Z{}class gF extends mF{async _call(N){return new pF(await super._call(N))}}class uk extends Z{}class yF extends uk{}class vF extends uk{}class dk extends Z{}class _F extends dk{}class xF extends dk{}class bF extends Z{constructor(){super(...arguments);ue(this,"forward_params",["input_ids","attention_mask","position_ids","audio_values","past_key_values"])}}class fk extends bF{_merge_input_ids_with_audio_features(N){const q=N.audio_features.dims.at(-1),ye=N.audio_features.view(-1,q);return K({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...N,audio_features:ye})}}class wF extends fk{}class c0 extends Z{constructor(){super(...arguments);ue(this,"main_input_name","input_values");ue(this,"forward_params",["input_values"])}}class TF extends we{constructor({audio_codes:N}){super(),this.audio_codes=N}}class MF extends we{constructor({audio_values:N}){super(),this.audio_values=N}}class kF extends c0{async encode(N){return new TF(await $(this.sessions.encoder_model,N))}async decode(N){return new MF(await $(this.sessions.decoder_model,N))}}class SF extends c0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class PF extends c0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class u0 extends Z{constructor(){super(...arguments);ue(this,"main_input_name","input_values");ue(this,"forward_params",["input_values"])}}class EF extends we{constructor({audio_codes:N}){super(),this.audio_codes=N}}class CF extends we{constructor({audio_values:N}){super(),this.audio_values=N}}class jF extends u0{async encode(N){return new EF(await $(this.sessions.encoder_model,N))}async decode(N){return new CF(await $(this.sessions.decoder_model,N))}}class AF extends u0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class OF extends u0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class d0 extends Z{constructor(){super(...arguments);ue(this,"main_input_name","input_values");ue(this,"forward_params",["input_values"])}}class $F extends d0{async encode(N){return await $(this.sessions.encoder_model,N)}async decode(N){return await $(this.sessions.decoder_model,N)}}class IF extends d0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class NF extends d0{static async from_pretrained(N,q={}){return super.from_pretrained(N,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class Tr{static async from_pretrained(N,{progress_callback:q=null,config:ye=null,cache_dir:Ae=null,local_files_only:Ee=!1,revision:Le="main",model_file_name:qe=null,subfolder:tt="onnx",device:ot=null,dtype:Ot=null,use_external_data_format:Bt=null,session_options:zt={}}={}){const hr={progress_callback:q,config:ye,cache_dir:Ae,local_files_only:Ee,revision:Le,model_file_name:qe,subfolder:tt,device:ot,dtype:Ot,use_external_data_format:Bt,session_options:zt};if(hr.config=await n.AutoConfig.from_pretrained(N,hr),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const Nt=hr.config.model_type;for(const rr of this.MODEL_CLASS_MAPPINGS){let Et=rr.get(Nt);if(!Et){for(const cr of rr.values())if(cr[0]===Nt){Et=cr;break}if(!Et)continue}return await Et[1].from_pretrained(N,hr)}if(this.BASE_IF_FAIL)return o3.has(Nt)||console.warn(`Unknown model class "${Nt}", attempting to construct from base class.`),await Z.from_pretrained(N,hr);throw Error(`Unsupported model type: ${Nt}`)}}ue(Tr,"MODEL_CLASS_MAPPINGS",null),ue(Tr,"BASE_IF_FAIL",!1);const Ele=new Map([["bert",["BertModel",Pe]],["neobert",["NeoBertModel",me]],["modernbert",["ModernBertModel",nt]],["nomic_bert",["NomicBertModel",Es]],["roformer",["RoFormerModel",er]],["electra",["ElectraModel",Y]],["esm",["EsmModel",ll]],["convbert",["ConvBertModel",jo]],["camembert",["CamembertModel",Dt]],["deberta",["DebertaModel",zi]],["deberta-v2",["DebertaV2Model",ha]],["mpnet",["MPNetModel",Iu]],["albert",["AlbertModel",at]],["distilbert",["DistilBertModel",Cs]],["roberta",["RobertaModel",k_]],["xlm",["XLMModel",C_]],["xlm-roberta",["XLMRobertaModel",I_]],["clap",["ClapModel",VL]],["clip",["CLIPModel",jm]],["clipseg",["CLIPSegModel",Vu]],["chinese_clip",["ChineseCLIPModel",Ct]],["siglip",["SiglipModel",X_]],["jina_clip",["JinaCLIPModel",Nm]],["mobilebert",["MobileBertModel",Br]],["squeezebert",["SqueezeBertModel",he]],["wav2vec2",["Wav2Vec2Model",tL]],["wav2vec2-bert",["Wav2Vec2BertModel",gL]],["unispeech",["UniSpeechModel",cL]],["unispeech-sat",["UniSpeechSatModel",fL]],["hubert",["HubertModel",_L]],["wavlm",["WavLMModel",wL]],["audio-spectrogram-transformer",["ASTModel",D_]],["vits",["VitsModel",sk]],["pyannote",["PyAnnoteModel",sL]],["wespeaker-resnet",["WeSpeakerResNetModel",lL]],["detr",["DetrModel",UD]],["rt_detr",["RTDetrModel",HD]],["rt_detr_v2",["RTDetrV2Model",qD]],["rf_detr",["RFDetrModel",QD]],["d_fine",["DFineModel",eR]],["table-transformer",["TableTransformerModel",rR]],["vit",["ViTModel",mD]],["ijepa",["IJepaModel",yD]],["pvt",["PvtModel",bD]],["vit_msn",["ViTMSNModel",kD]],["vit_mae",["ViTMAEModel",MD]],["groupvit",["GroupViTModel",ED]],["fastvit",["FastViTModel",CD]],["mobilevit",["MobileViTModel",$D]],["mobilevitv2",["MobileViTV2Model",ND]],["owlvit",["OwlViTModel",RD]],["owlv2",["Owlv2Model",FD]],["beit",["BeitModel",zD]],["deit",["DeiTModel",sR]],["hiera",["HieraModel",oR]],["convnext",["ConvNextModel",NR]],["convnextv2",["ConvNextV2Model",RR]],["dinov2",["Dinov2Model",FR]],["dinov2_with_registers",["Dinov2WithRegistersModel",zR]],["resnet",["ResNetModel",cR]],["swin",["SwinModel",dR]],["swin2sr",["Swin2SRModel",pR]],["donut-swin",["DonutSwinModel",IR]],["yolos",["YolosModel",GR]],["dpt",["DPTModel",gR]],["glpn",["GLPNModel",AR]],["hifigan",["SpeechT5HifiGan",AL]],["efficientnet",["EfficientNetModel",YL]],["decision_transformer",["DecisionTransformerModel",dF]],["patchtst",["PatchTSTForPrediction",yF]],["patchtsmixer",["PatchTSMixerForPrediction",_F]],["mobilenet_v1",["MobileNetV1Model",ZL]],["mobilenet_v2",["MobileNetV2Model",tF]],["mobilenet_v3",["MobileNetV3Model",iF]],["mobilenet_v4",["MobileNetV4Model",oF]],["maskformer",["MaskFormerModel",CR]],["mgp-str",["MgpstrForSceneTextRecognition",gF]],["style_text_to_speech_2",["StyleTextToSpeech2Model",EL]]]),Cle=new Map([["t5",["T5Model",mr]],["longt5",["LongT5Model",Un]],["mt5",["MT5Model",Wn]],["bart",["BartModel",Hr]],["mbart",["MBartModel",Wa]],["marian",["MarianModel",QR]],["whisper",["WhisperModel",cc]],["m2m_100",["M2M100Model",JR]],["blenderbot",["BlenderbotModel",In]],["blenderbot-small",["BlenderbotSmallModel",dl]]]),jle=new Map([["mimi",["MimiModel",kF]],["dac",["DacModel",jF]],["snac",["SnacModel",$F]]]),Ale=new Map([["bloom",["BloomModel",cD]],["jais",["JAISModel",Fm]],["gpt2",["GPT2Model",Rm]],["gptj",["GPTJModel",Um]],["gpt_bigcode",["GPTBigCodeModel",S]],["gpt_neo",["GPTNeoModel",Wu]],["gpt_neox",["GPTNeoXModel",zm]],["codegen",["CodeGenModel",X]],["llama",["LlamaModel",Re]],["lfm2",["Lfm2Model",_t]],["smollm3",["SmolLM3Model",Ar]],["exaone",["ExaoneModel",$N]],["olmo",["OlmoModel",RN]],["olmo2",["Olmo2Model",FN]],["mobilellm",["MobileLLMModel",NN]],["granite",["GraniteModel",zN]],["cohere",["CohereModel",UN]],["gemma",["GemmaModel",GN]],["gemma2",["Gemma2Model",KN]],["gemma3_text",["Gemma3Model",XN]],["helium",["HeliumModel",Y_]],["glm",["GlmModel",AN]],["openelm",["OpenELMModel",QN]],["qwen2",["Qwen2Model",JN]],["qwen3",["Qwen3Model",tD]],["phi",["PhiModel",sD]],["phi3",["Phi3Model",oD]],["mpt",["MptModel",dD]],["opt",["OPTModel",hD]],["mistral",["MistralModel",IL]],["ernie4_5",["Ernie4_5_Model",DL]],["starcoder2",["Starcoder2Model",LL]],["falcon",["FalconModel",BL]],["stablelm",["StableLmModel",qL]],["modernbert-decoder",["ModernBertDecoderModel",yn]]]),hk=new Map([["speecht5",["SpeechT5ForSpeechToText",CL]],["whisper",["WhisperForConditionalGeneration",Sm]],["lite-whisper",["LiteWhisperForConditionalGeneration",Pm]],["moonshine",["MoonshineForConditionalGeneration",R_]]]),DF=new Map([["speecht5",["SpeechT5ForTextToSpeech",jL]]]),RF=new Map([["vits",["VitsModel",sk]],["musicgen",["MusicgenForConditionalGeneration",ck]]]),LF=new Map([["bert",["BertForSequenceClassification",re]],["neobert",["NeoBertForSequenceClassification",ze]],["modernbert",["ModernBertForSequenceClassification",Ht]],["roformer",["RoFormerForSequenceClassification",ai]],["electra",["ElectraForSequenceClassification",pe]],["esm",["EsmForSequenceClassification",Xe]],["convbert",["ConvBertForSequenceClassification",tr]],["camembert",["CamembertForSequenceClassification",Wt]],["deberta",["DebertaForSequenceClassification",cn]],["deberta-v2",["DebertaV2ForSequenceClassification",Oo]],["mpnet",["MPNetForSequenceClassification",Du]],["albert",["AlbertForSequenceClassification",it]],["distilbert",["DistilBertForSequenceClassification",Mi]],["roberta",["RobertaForSequenceClassification",S_]],["xlm",["XLMForSequenceClassification",A_]],["xlm-roberta",["XLMRobertaForSequenceClassification",bm]],["bart",["BartForSequenceClassification",Hi]],["mbart",["MBartForSequenceClassification",pa]],["mobilebert",["MobileBertForSequenceClassification",Va]],["squeezebert",["SqueezeBertForSequenceClassification",Te]]]),FF=new Map([["bert",["BertForTokenClassification",fe]],["neobert",["NeoBertForTokenClassification",Je]],["modernbert",["ModernBertForTokenClassification",Ut]],["roformer",["RoFormerForTokenClassification",oi]],["electra",["ElectraForTokenClassification",Oe]],["esm",["EsmForTokenClassification",Ye]],["convbert",["ConvBertForTokenClassification",Fr]],["camembert",["CamembertForTokenClassification",pt]],["deberta",["DebertaForTokenClassification",li]],["deberta-v2",["DebertaV2ForTokenClassification",$o]],["mpnet",["MPNetForTokenClassification",Me]],["distilbert",["DistilBertForTokenClassification",za]],["roberta",["RobertaForTokenClassification",P_]],["xlm",["XLMForTokenClassification",O_]],["xlm-roberta",["XLMRobertaForTokenClassification",wm]]]),pk=new Map([["t5",["T5ForConditionalGeneration",un]],["longt5",["LongT5ForConditionalGeneration",Zn]],["mt5",["MT5ForConditionalGeneration",ki]],["bart",["BartForConditionalGeneration",Gn]],["mbart",["MBartForConditionalGeneration",di]],["marian",["MarianMTModel",ZR]],["m2m_100",["M2M100ForConditionalGeneration",eL]],["blenderbot",["BlenderbotForConditionalGeneration",dn]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",bf]]]),mk=new Map([["bloom",["BloomForCausalLM",uD]],["gpt2",["GPT2LMHeadModel",Lm]],["jais",["JAISLMHeadModel",Bm]],["gptj",["GPTJForCausalLM",Wm]],["gpt_bigcode",["GPTBigCodeForCausalLM",O]],["gpt_neo",["GPTNeoForCausalLM",jf]],["gpt_neox",["GPTNeoXForCausalLM",Vm]],["codegen",["CodeGenForCausalLM",ie]],["llama",["LlamaForCausalLM",Ke]],["lfm2",["Lfm2ForCausalLM",Kt]],["smollm3",["SmolLM3ForCausalLM",Jn]],["exaone",["ExaoneForCausalLM",IN]],["olmo",["OlmoForCausalLM",LN]],["olmo2",["Olmo2ForCausalLM",BN]],["mobilellm",["MobileLLMForCausalLM",DN]],["granite",["GraniteForCausalLM",VN]],["cohere",["CohereForCausalLM",WN]],["gemma",["GemmaForCausalLM",HN]],["gemma2",["Gemma2ForCausalLM",qN]],["gemma3_text",["Gemma3ForCausalLM",YN]],["helium",["HeliumForCausalLM",jN]],["glm",["GlmForCausalLM",ON]],["openelm",["OpenELMForCausalLM",ZN]],["qwen2",["Qwen2ForCausalLM",eD]],["qwen3",["Qwen3ForCausalLM",rD]],["phi",["PhiForCausalLM",aD]],["phi3",["Phi3ForCausalLM",lD]],["mpt",["MptForCausalLM",fD]],["opt",["OPTForCausalLM",pD]],["mbart",["MBartForCausalLM",kn]],["mistral",["MistralForCausalLM",NL]],["ernie4_5",["Ernie4_5_ForCausalLM",RL]],["starcoder2",["Starcoder2ForCausalLM",FL]],["falcon",["FalconForCausalLM",zL]],["trocr",["TrOCRForCausalLM",$L]],["stablelm",["StableLmForCausalLM",XL]],["modernbert-decoder",["ModernBertDecoderForCausalLM",Zr]],["phi3_v",["Phi3VForCausalLM",Fu]]]),Ole=new Map([["multi_modality",["MultiModalityCausalLM",hF]]]),BF=new Map([["bert",["BertForMaskedLM",Q]],["neobert",["NeoBertForMaskedLM",Fe]],["modernbert",["ModernBertForMaskedLM",ct]],["roformer",["RoFormerForMaskedLM",wr]],["electra",["ElectraForMaskedLM",le]],["esm",["EsmForMaskedLM",Gi]],["convbert",["ConvBertForMaskedLM",Ao]],["camembert",["CamembertForMaskedLM",At]],["deberta",["DebertaForMaskedLM",ls]],["deberta-v2",["DebertaV2ForMaskedLM",ui]],["mpnet",["MPNetForMaskedLM",Nu]],["albert",["AlbertForMaskedLM",Lt]],["distilbert",["DistilBertForMaskedLM",Vn]],["roberta",["RobertaForMaskedLM",xm]],["xlm",["XLMWithLMHeadModel",j_]],["xlm-roberta",["XLMRobertaForMaskedLM",N_]],["mobilebert",["MobileBertForMaskedLM",cl]],["squeezebert",["SqueezeBertForMaskedLM",xe]]]),zF=new Map([["bert",["BertForQuestionAnswering",ke]],["neobert",["NeoBertForQuestionAnswering",He]],["roformer",["RoFormerForQuestionAnswering",Ws]],["electra",["ElectraForQuestionAnswering",Ue]],["convbert",["ConvBertForQuestionAnswering",L]],["camembert",["CamembertForQuestionAnswering",xr]],["deberta",["DebertaForQuestionAnswering",ci]],["deberta-v2",["DebertaV2ForQuestionAnswering",Ui]],["mpnet",["MPNetForQuestionAnswering",U]],["albert",["AlbertForQuestionAnswering",ft]],["distilbert",["DistilBertForQuestionAnswering",$n]],["roberta",["RobertaForQuestionAnswering",E_]],["xlm",["XLMForQuestionAnswering",$_]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Tm]],["mobilebert",["MobileBertForQuestionAnswering",ul]],["squeezebert",["SqueezeBertForQuestionAnswering",De]]]),gk=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Ru]],["idefics3",["Idefics3ForConditionalGeneration",Lu]],["smolvlm",["SmolVLMForConditionalGeneration",Cm]]]),VF=new Map([["llava",["LlavaForConditionalGeneration",Mf]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",L_]],["moondream1",["Moondream1ForConditionalGeneration",F_]],["florence2",["Florence2ForConditionalGeneration",z_]],["qwen2-vl",["Qwen2VLForConditionalGeneration",iD]],["idefics3",["Idefics3ForConditionalGeneration",Lu]],["smolvlm",["SmolVLMForConditionalGeneration",Cm]],["paligemma",["PaliGemmaForConditionalGeneration",U_]],["llava_qwen2",["LlavaQwen2ForCausalLM",W_]],["gemma3n",["Gemma3nForConditionalGeneration",uc]]]),UF=new Map([["ultravox",["UltravoxModel",fk]],["voxtral",["VoxtralForConditionalGeneration",wF]]]),$le=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Ru]]]),WF=new Map([["vit",["ViTForImageClassification",gD]],["ijepa",["IJepaForImageClassification",vD]],["pvt",["PvtForImageClassification",wD]],["vit_msn",["ViTMSNForImageClassification",SD]],["fastvit",["FastViTForImageClassification",jD]],["mobilevit",["MobileViTForImageClassification",ID]],["mobilevitv2",["MobileViTV2ForImageClassification",DD]],["beit",["BeitForImageClassification",VD]],["deit",["DeiTForImageClassification",aR]],["hiera",["HieraForImageClassification",lR]],["convnext",["ConvNextForImageClassification",DR]],["convnextv2",["ConvNextV2ForImageClassification",LR]],["dinov2",["Dinov2ForImageClassification",BR]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",VR]],["resnet",["ResNetForImageClassification",uR]],["swin",["SwinForImageClassification",fR]],["segformer",["SegformerForImageClassification",HL]],["efficientnet",["EfficientNetForImageClassification",QL]],["mobilenet_v1",["MobileNetV1ForImageClassification",JL]],["mobilenet_v2",["MobileNetV2ForImageClassification",rF]],["mobilenet_v3",["MobileNetV3ForImageClassification",sF]],["mobilenet_v4",["MobileNetV4ForImageClassification",lF]]]),GF=new Map([["detr",["DetrForObjectDetection",WD]],["rt_detr",["RTDetrForObjectDetection",KD]],["rt_detr_v2",["RTDetrV2ForObjectDetection",XD]],["rf_detr",["RFDetrForObjectDetection",ZD]],["d_fine",["DFineForObjectDetection",tR]],["table-transformer",["TableTransformerForObjectDetection",nR]],["yolos",["YolosForObjectDetection",HR]]]),HF=new Map([["owlvit",["OwlViTForObjectDetection",LD]],["owlv2",["Owlv2ForObjectDetection",BD]],["grounding-dino",["GroundingDinoForObjectDetection",WR]]]),If=new Map([["detr",["DetrForSegmentation",$M]],["clipseg",["CLIPSegForImageSegmentation",Pf]]]),KF=new Map([["segformer",["SegformerForSemanticSegmentation",KL]],["sapiens",["SapiensForSemanticSegmentation",xR]],["swin",["SwinForSemanticSegmentation",hR]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",eF]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",nF]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",aF]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",cF]]]),qF=new Map([["detr",["DetrForSegmentation",$M]],["maskformer",["MaskFormerForInstanceSegmentation",jR]]]),XF=new Map([["sam",["SamModel",XR]]]),YF=new Map([["wav2vec2",["Wav2Vec2ForCTC",rL]],["wav2vec2-bert",["Wav2Vec2BertForCTC",yL]],["unispeech",["UniSpeechForCTC",uL]],["unispeech-sat",["UniSpeechSatForCTC",hL]],["wavlm",["WavLMForCTC",TL]],["hubert",["HubertForCTC",xL]]]),QF=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",nL]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",vL]],["unispeech",["UniSpeechForSequenceClassification",dL]],["unispeech-sat",["UniSpeechSatForSequenceClassification",pL]],["wavlm",["WavLMForSequenceClassification",ML]],["hubert",["HubertForSequenceClassification",bL]],["audio-spectrogram-transformer",["ASTForAudioClassification",km]]]),ZF=new Map([["wavlm",["WavLMForXVector",kL]]]),JF=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",mL]],["wavlm",["WavLMForAudioFrameClassification",SL]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",iL]],["pyannote",["PyAnnoteForAudioFrameClassification",aL]]]),e3=new Map([["vitmatte",["VitMatteForImageMatting",OD]]]),Ile=new Map([["patchtst",["PatchTSTForPrediction",vF]],["patchtsmixer",["PatchTSMixerForPrediction",xF]]]),t3=new Map([["swin2sr",["Swin2SRForImageSuperResolution",mR]]]),r3=new Map([["dpt",["DPTForDepthEstimation",yR]],["depth_anything",["DepthAnythingForDepthEstimation",_R]],["glpn",["GLPNForDepthEstimation",OR]],["sapiens",["SapiensForDepthEstimation",bR]],["depth_pro",["DepthProForDepthEstimation",MR]],["metric3d",["Metric3DForDepthEstimation",SR]],["metric3dv2",["Metric3Dv2ForDepthEstimation",ER]]]),n3=new Map([["sapiens",["SapiensForNormalEstimation",wR]]]),i3=new Map([["vitpose",["VitPoseForPoseEstimation",xD]]]),s3=new Map([["clip",["CLIPVisionModelWithProjection",Om]],["siglip",["SiglipVisionModel",Im]],["jina_clip",["JinaCLIPVisionModel",zu]]]),a3=[[Ele,b.EncoderOnly],[Cle,b.EncoderDecoder],[Ale,b.DecoderOnly],[jle,b.AutoEncoder],[LF,b.EncoderOnly],[FF,b.EncoderOnly],[pk,b.Seq2Seq],[hk,b.Seq2Seq],[mk,b.DecoderOnly],[Ole,b.MultiModality],[BF,b.EncoderOnly],[zF,b.EncoderOnly],[gk,b.Vision2Seq],[VF,b.ImageTextToText],[UF,b.AudioTextToText],[WF,b.EncoderOnly],[If,b.EncoderOnly],[qF,b.EncoderOnly],[KF,b.EncoderOnly],[e3,b.EncoderOnly],[Ile,b.EncoderOnly],[t3,b.EncoderOnly],[r3,b.EncoderOnly],[n3,b.EncoderOnly],[i3,b.EncoderOnly],[GF,b.EncoderOnly],[HF,b.EncoderOnly],[XF,b.MaskGeneration],[YF,b.EncoderOnly],[QF,b.EncoderOnly],[DF,b.Seq2Seq],[RF,b.EncoderOnly],[ZF,b.EncoderOnly],[JF,b.EncoderOnly],[s3,b.EncoderOnly]];for(const[C,N]of a3)for(const[q,ye]of C.values())_.set(q,N),M.set(ye,q),T.set(q,ye);const Nle=[["MusicgenForConditionalGeneration",ck,b.Musicgen],["Phi3VForCausalLM",Fu,b.Phi3V],["CLIPTextModelWithProjection",Am,b.EncoderOnly],["SiglipTextModel",$m,b.EncoderOnly],["JinaCLIPTextModel",Dm,b.EncoderOnly],["ClapTextModelWithProjection",UL,b.EncoderOnly],["ClapAudioModelWithProjection",WL,b.EncoderOnly],["DacEncoderModel",AF,b.EncoderOnly],["DacDecoderModel",OF,b.EncoderOnly],["MimiEncoderModel",SF,b.EncoderOnly],["MimiDecoderModel",PF,b.EncoderOnly],["SnacEncoderModel",IF,b.EncoderOnly],["SnacDecoderModel",NF,b.EncoderOnly],["Gemma3nForConditionalGeneration",uc,b.ImageAudioTextToText]];for(const[C,N,q]of Nle)_.set(C,q),M.set(N,C),T.set(C,N);const o3=new Map([["modnet",If],["birefnet",If],["isnet",If],["ben",If]]);for(const[C,N]of o3.entries())N.set(C,["PreTrainedModel",Z]),_.set(C,b.EncoderOnly),M.set(Z,C),T.set(C,Z);class yk extends Tr{}ue(yk,"MODEL_CLASS_MAPPINGS",a3.map(N=>N[0])),ue(yk,"BASE_IF_FAIL",!0);class l3 extends Tr{}ue(l3,"MODEL_CLASS_MAPPINGS",[LF]);class c3 extends Tr{}ue(c3,"MODEL_CLASS_MAPPINGS",[FF]);class u3 extends Tr{}ue(u3,"MODEL_CLASS_MAPPINGS",[pk]);class d3 extends Tr{}ue(d3,"MODEL_CLASS_MAPPINGS",[hk]);class f3 extends Tr{}ue(f3,"MODEL_CLASS_MAPPINGS",[DF]);class h3 extends Tr{}ue(h3,"MODEL_CLASS_MAPPINGS",[RF]);class p3 extends Tr{}ue(p3,"MODEL_CLASS_MAPPINGS",[mk]);class m3 extends Tr{}ue(m3,"MODEL_CLASS_MAPPINGS",[BF]);class g3 extends Tr{}ue(g3,"MODEL_CLASS_MAPPINGS",[zF]);class y3 extends Tr{}ue(y3,"MODEL_CLASS_MAPPINGS",[gk]);class v3 extends Tr{}ue(v3,"MODEL_CLASS_MAPPINGS",[WF]);class _3 extends Tr{}ue(_3,"MODEL_CLASS_MAPPINGS",[If]);class x3 extends Tr{}ue(x3,"MODEL_CLASS_MAPPINGS",[KF]);class b3 extends Tr{}ue(b3,"MODEL_CLASS_MAPPINGS",[qF]);class w3 extends Tr{}ue(w3,"MODEL_CLASS_MAPPINGS",[GF]);class T3 extends Tr{}ue(T3,"MODEL_CLASS_MAPPINGS",[HF]);class M3 extends Tr{}ue(M3,"MODEL_CLASS_MAPPINGS",[XF]);class k3 extends Tr{}ue(k3,"MODEL_CLASS_MAPPINGS",[YF]);class S3 extends Tr{}ue(S3,"MODEL_CLASS_MAPPINGS",[QF]);class P3 extends Tr{}ue(P3,"MODEL_CLASS_MAPPINGS",[ZF]);class E3 extends Tr{}ue(E3,"MODEL_CLASS_MAPPINGS",[JF]);class C3 extends Tr{}ue(C3,"MODEL_CLASS_MAPPINGS",[$le]);class j3 extends Tr{}ue(j3,"MODEL_CLASS_MAPPINGS",[e3]);class A3 extends Tr{}ue(A3,"MODEL_CLASS_MAPPINGS",[t3]);class O3 extends Tr{}ue(O3,"MODEL_CLASS_MAPPINGS",[r3]);class $3 extends Tr{}ue($3,"MODEL_CLASS_MAPPINGS",[n3]);class I3 extends Tr{}ue(I3,"MODEL_CLASS_MAPPINGS",[i3]);class N3 extends Tr{}ue(N3,"MODEL_CLASS_MAPPINGS",[s3]);class D3 extends Tr{}ue(D3,"MODEL_CLASS_MAPPINGS",[VF]);class R3 extends Tr{}ue(R3,"MODEL_CLASS_MAPPINGS",[UF]);class Dle extends we{constructor({logits:N,past_key_values:q,encoder_outputs:ye,decoder_attentions:Ae=null,cross_attentions:Ee=null}){super(),this.logits=N,this.past_key_values=q,this.encoder_outputs=ye,this.decoder_attentions=Ae,this.cross_attentions=Ee}}class qt extends we{constructor({logits:N,...q}){super(),this.logits=N;const ye=Object.values(q);ye.length>0&&(this.attentions=ye)}}class L3 extends we{constructor({logits:N,embeddings:q}){super(),this.logits=N,this.embeddings=q}}class ei extends we{constructor({logits:N}){super(),this.logits=N}}class fi extends we{constructor({logits:N}){super(),this.logits=N}}class Ii extends we{constructor({start_logits:N,end_logits:q}){super(),this.start_logits=N,this.end_logits=q}}class Hu extends we{constructor({logits:N}){super(),this.logits=N}}class Rle extends we{constructor({logits:N,past_key_values:q}){super(),this.logits=N,this.past_key_values=q}}class F3 extends we{constructor({alphas:N}){super(),this.alphas=N}}class B3 extends we{constructor({waveform:N,spectrogram:q}){super(),this.waveform=N,this.spectrogram=q}}},"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o);const l=this.config.sampling_rate,c=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,i.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(o,l){return(0,i.spectrogram)(o,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(o){(0,n.validate_audio_inputs)(o,"ASTFeatureExtractor");const l=await this._extract_fbank_features(o,this.config.max_length);if(this.config.do_normalize){const c=this.std*2,d=l.data;for(let u=0;u<d.length;++u)d[u]=(d[u]-this.mean)/c}return{input_values:l.unsqueeze_(0)}}}},"./src/models/auto/feature_extraction_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var s=r("./src/models/feature_extractors.js");class a{static async from_pretrained(l,c={}){const d=await(0,i.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,c),u=d.feature_extractor_type,f=s[u];if(!f)throw new Error(`Unknown feature_extractor_type: '${u}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new f(d)}}},"./src/models/auto/image_processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/image_processors_utils.js"),a=r("./src/models/image_processors.js");class o{static async from_pretrained(c,d={}){const u=await(0,i.getModelJSON)(c,n.IMAGE_PROCESSOR_NAME,!0,d),f=u.image_processor_type??u.feature_extractor_type;let p=a[f==null?void 0:f.replace(/Fast$/,"")];return p||(f!==void 0&&console.warn(`Image processor type '${f}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),p=s.ImageProcessor),new p(u)}}},"./src/models/auto/processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>c});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/processing_utils.js"),a=r("./src/models/processors.js"),o=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class c{static async from_pretrained(u,f={}){const p=await(0,i.getModelJSON)(u,n.IMAGE_PROCESSOR_NAME,!0,f),{image_processor_type:m,feature_extractor_type:g,processor_class:x}=p;if(x&&a[x])return a[x].from_pretrained(u,f);if(!m&&!g)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const v={};if(m){const w=o[m.replace(/Fast$/,"")];if(!w)throw new Error(`Unknown image_processor_type: '${m}'.`);v.image_processor=new w(p)}if(g){const w=o[g];if(w)v.image_processor=new w(p);else{const b=l[g];if(!b)throw new Error(`Unknown feature_extractor_type: '${g}'.`);v.feature_extractor=new b(p)}}const y={};return new s.Processor(y,v,null)}}},"./src/models/beit/image_processing_beit.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/bit/image_processing_bit.js":(e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/chinese_clip/image_processing_chinese_clip.js":(e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/clap/feature_extraction_clap.js":(e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o),this.mel_filters=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,i.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(o,l,c,d){let u;const f=o.length-l;if(f>0)if(c==="rand_trunc"){const p=Math.floor(Math.random()*(f+1));o=o.subarray(p,p+l),u=await this._extract_fbank_features(o,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${c}" not implemented`);else{if(f<0){let p=new Float64Array(l);if(p.set(o),d==="repeat")for(let m=o.length;m<l;m+=o.length)p.set(o.subarray(0,Math.min(o.length,l-m)),m);else if(d==="repeatpad")for(let m=o.length;m<-f;m+=o.length)p.set(o,m);o=p}if(c==="fusion")throw new Error(`Truncation strategy "${c}" not implemented`);u=await this._extract_fbank_features(o,this.mel_filters_slaney,this.config.nb_max_samples)}return u.unsqueeze_(0)}async _extract_fbank_features(o,l,c=null){return(0,i.spectrogram)(o,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:c,do_pad:!1,transpose:!0})}async _call(o,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(o,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(o,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}},"./src/models/clip/image_processing_clip.js":(e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/convnext/image_processing_convnext.js":(e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(o){super(o),this.crop_pct=this.config.crop_pct??224/256}async resize(o){var c;const l=(c=this.size)==null?void 0:c.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const d=Math.floor(l/this.crop_pct),[u,f]=this.get_resize_output_image_size(o,{shortest_edge:d});o=await o.resize(u,f,{resample:this.resample}),o=await o.center_crop(l,l)}else o=await o.resize(l,l,{resample:this.resample});return o}}class s extends i{}},"./src/models/dac/feature_extraction_dac.js":(e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>i});var n=r("./src/models/encodec/feature_extraction_encodec.js");class i extends n.EncodecFeatureExtractor{}},"./src/models/deit/image_processing_deit.js":(e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/detr/image_processing_detr.js":(e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>a,DetrImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(l){const c=await super._call(l),d=[c.pixel_values.dims[0],64,64],u=(0,i.full)(d,1n);return{...c,pixel_mask:u}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class a extends s{}},"./src/models/donut/image_processing_donut.js":(e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(o,l,c,d={}){const[u,f,p]=l;let m=this.image_mean;Array.isArray(this.image_mean)||(m=new Array(p).fill(m));let g=this.image_std;Array.isArray(g)||(g=new Array(p).fill(m));const x=m.map((v,y)=>-v/g[y]);return super.pad_image(o,l,c,{center:!0,constant_values:x,...d})}}class s extends i{}},"./src/models/dpt/image_processing_dpt.js":(e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/efficientnet/image_processing_efficientnet.js":(e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super(a),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(o=>o*o))}}},"./src/models/encodec/feature_extraction_encodec.js":(e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(o){(0,n.validate_audio_inputs)(o,"EncodecFeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));const l=this.config.feature_size;if(o.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const c=[1,l,o.length/l];return{input_values:new i.Tensor("float32",o,c)}}}},"./src/models/feature_extractors.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>a.DacFeatureExtractor,EncodecFeatureExtractor:()=>i.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>o.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>x.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>c.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>d.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>u.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>f.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>p.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>m.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>g.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),i=r("./src/models/encodec/feature_extraction_encodec.js"),s=r("./src/models/clap/feature_extraction_clap.js"),a=r("./src/models/dac/feature_extraction_dac.js"),o=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),c=r("./src/models/pyannote/feature_extraction_pyannote.js"),d=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),u=r("./src/models/snac/feature_extraction_snac.js"),f=r("./src/models/speecht5/feature_extraction_speecht5.js"),p=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),m=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),g=r("./src/models/whisper/feature_extraction_whisper.js"),x=r("./src/base/image_processors_utils.js")},"./src/models/florence2/processing_florence2.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{constructor(l,c,d){super(l,c,d);const{tasks_answer_post_processing_type:u,task_prompts_without_inputs:f,task_prompts_with_input:p}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(u??{})),this.task_prompts_without_inputs=new Map(Object.entries(f??{})),this.task_prompts_with_input=new Map(Object.entries(p??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const c=[];for(const d of l)if(this.task_prompts_without_inputs.has(d))c.push(this.task_prompts_without_inputs.get(d));else{for(const[u,f]of this.task_prompts_with_input)if(d.includes(u)){c.push(f.replaceAll("{input}",d).replaceAll(u,""));break}c.length!==l.length&&c.push(d)}return c}post_process_generation(l,c,d){const u=this.tasks_answer_post_processing_type.get(c)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let f;switch(u){case"pure_text":f=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const p=u==="ocr"?"quad_boxes":"bboxes",m=l.matchAll(this.regexes[p]),g=[],x=[];for(const[v,y,...w]of m)g.push(y?y.trim():g.at(-1)??""),x.push(w.map((b,_)=>(Number(b)+.5)/this.size_per_bin*d[_%2]));f={labels:g,[p]:x};break;default:throw new Error(`Task "${c}" (of type "${u}") not yet implemented.`)}return{[c]:f}}async _call(l,c=null,d={}){if(!l&&!c)throw new Error("Either text or images must be provided");const u=await this.image_processor(l,d),f=c?this.tokenizer(this.construct_prompts(c),d):{};return{...u,...f}}}ue(a,"tokenizer_class",s.AutoTokenizer),ue(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/gemma3n/feature_extraction_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:c,feature_size:d,min_frequency:u,max_frequency:f,sampling_rate:p,frame_length:m}=this.config,g=(0,s.mel_filter_bank)(Math.floor(1+c/2),d,u,f,p,null,"htk",!1);this.mel_filters=g,this.window=(0,s.window_function)(m,"hann")}async _extract_fbank_features(l,c){return(0,s.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:c=48e4,truncation:d=!0,padding:u=!0,pad_to_multiple_of:f=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),d&&l.length>c&&(l=l.slice(0,c)),u&&l.length%f!==0){const g=f-l.length%f,x=new Float64Array(l.length+g);x.set(l),this.config.padding_value!==0&&x.fill(this.config.padding_value,l.length),l=x}const p=await this._extract_fbank_features(l,this.config.max_length),m=(0,i.full)([1,p.dims[0]],!0);return{input_features:p.unsqueeze_(0),input_features_mask:m}}}},"./src/models/gemma3n/processing_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class o extends n.Processor{constructor(c,d,u){super(c,d,u),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:f,boa_token:p,audio_token:m,eoa_token:g,image_token_id:x,boi_token:v,image_token:y,eoi_token:w}=this.tokenizer.config;this.audio_token_id=f,this.boa_token=p,this.audio_token=m;const b=m.repeat(this.audio_seq_length);this.full_audio_sequence=`

${p}${b}${g}

`,this.image_token_id=x,this.boi_token=v,this.image_token=y;const _=y.repeat(this.image_seq_length);this.full_image_sequence=`

${v}${_}${w}

`}async _call(c,d=null,u=null,f={}){typeof c=="string"&&(c=[c]);let p;u&&(p=await this.feature_extractor(u,f),c=c.map(x=>x.replaceAll(this.audio_token,this.full_audio_sequence)));let m;return d&&(m=await this.image_processor(d,f),c=c.map(x=>x.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(c,f),...m,...p}}}ue(o,"image_processor_class",i.AutoImageProcessor),ue(o,"feature_extractor_class",s.AutoFeatureExtractor),ue(o,"tokenizer_class",a.AutoTokenizer),ue(o,"uses_processor_config",!0),ue(o,"uses_chat_template_file",!0)},"./src/models/glpn/image_processing_glpn.js":(e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/grounding_dino/image_processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o){const l=await super._call(o),c=l.pixel_values.dims,d=(0,i.ones)([c[0],c[2],c[3]]);return{...l,pixel_mask:d}}}},"./src/models/grounding_dino/processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/image_processors_utils.js");function o(c,d){const f=c.dims.at(-1)-1,p=c.tolist();p.fill(!1,0,1),p.fill(!1,f);const m=d.tolist();return p.map((g,x)=>g?x:null).filter(g=>g!==null).map(g=>m[g])}class l extends n.Processor{async _call(d,u,f={}){const p=d?await this.image_processor(d,f):{};return{...u?this.tokenizer(u,f):{},...p}}post_process_grounded_object_detection(d,u,{box_threshold:f=.25,text_threshold:p=.25,target_sizes:m=null}={}){const{logits:g,pred_boxes:x}=d,v=g.dims[0];if(m!==null&&m.length!==v)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const y=g.dims.at(1),w=g.sigmoid(),b=w.max(-1).tolist(),_=x.tolist().map(M=>M.map(k=>(0,a.center_to_corners_format)(k))),T=[];for(let M=0;M<v;++M){const k=m!==null?m[M]:null;k!==null&&(_[M]=_[M].map($=>$.map((F,V)=>F*k[(V+1)%2])));const j=b[M],A=[],R=[],I=[];for(let $=0;$<y;++$){const F=j[$];if(F<=f)continue;const V=_[M][$],G=w[M][$];A.push(F),I.push(V);const H=o(G.gt(p),u[M]);R.push(H)}T.push({scores:A,boxes:I,labels:this.batch_decode(R)})}return T}}ue(l,"tokenizer_class",s.AutoTokenizer),ue(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/idefics3/image_processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{constructor(o){super(o),this.do_image_splitting=o.do_image_splitting??!0,this.max_image_size=o.max_image_size}get_resize_for_vision_encoder(o,l){let[c,d]=o.dims.slice(-2);const u=d/c;return d>=c?(d=Math.ceil(d/l)*l,c=Math.floor(d/u),c=Math.ceil(c/l)*l):(c=Math.ceil(c/l)*l,d=Math.floor(c*u),d=Math.ceil(d/l)*l),{height:c,width:d}}async _call(o,{do_image_splitting:l=null,return_row_col_info:c=!1}={}){let d;if(!Array.isArray(o))d=[[o]];else{if(o.length===0||!o[0])throw new Error("No images provided.");Array.isArray(o[0])?d=o:d=[o]}let u=[],f=[],p=[];const m=[],g=[];for(const M of d){let k=await Promise.all(M.map(R=>this.preprocess(R)));m.push(...k.map(R=>R.original_size)),g.push(...k.map(R=>R.reshaped_input_size)),k.forEach(R=>R.pixel_values.unsqueeze_(0));const{longest_edge:j}=this.max_image_size;let A;if(l??this.do_image_splitting){let R=new Array(k.length),I=new Array(k.length);A=await Promise.all(k.map(async($,F)=>{const V=this.get_resize_for_vision_encoder($.pixel_values,j),G=await(0,i.interpolate_4d)($.pixel_values,{size:[V.height,V.width]}),{frames:H,num_splits_h:B,num_splits_w:te}=await this.split_image(G,this.max_image_size);return R[F]=B,I[F]=te,(0,i.cat)(H,0)})),f.push(R),p.push(I)}else{const R=[j,j];A=await Promise.all(k.map(I=>(0,i.interpolate_4d)(I.pixel_values,{size:R}))),f.push(new Array(k.length).fill(0)),p.push(new Array(k.length).fill(0))}u.push((0,i.cat)(A,0))}const x=u.length,[v,y,w,b]=u[0].dims;let _,T;if(x===1)_=u[0].unsqueeze_(0),T=(0,i.full)([x,v,w,b],!0);else{const M=Math.max(...u.map(A=>A.dims.at(0)));T=(0,i.full)([x,M,w,b],!0);const k=T.data,j=M*w*b;for(let A=0;A<x;++A){const R=u[A].dims[0];if(R<M){u[A]=(0,i.cat)([u[A],(0,i.full)([M-R,y,w,b],0)],0);const I=A*j+R*w*b,$=(A+1)*j;k.fill(!1,I,$)}}_=(0,i.stack)(u,0)}return{pixel_values:_,pixel_attention_mask:T,original_sizes:m,reshaped_input_sizes:g,...c?{rows:f,cols:p}:{}}}async split_image(o,{longest_edge:l}){const c=l,d=l,u=[],[f,p]=o.dims.slice(-2);let m=0,g=0;if(f>c||p>d){m=Math.ceil(f/c),g=Math.ceil(p/d);const x=Math.ceil(f/m),v=Math.ceil(p/g);for(let b=0;b<m;++b)for(let _=0;_<g;++_){let T,M,k,j;b===m-1?(M=f-x,j=f):(M=b*x,j=(b+1)*x),_===g-1?(T=p-v,k=p):(T=_*v,k=(_+1)*v);const A=[M,T],R=[j,k],I=await(0,i.slice)(o,A,R,[2,3]);u.push(I)}const y=c,w=d;(f!==y||p!==w)&&(o=await(0,i.interpolate_4d)(o,{size:[y,w]}))}return u.push(o),{frames:u,num_splits_h:m,num_splits_w:g}}}},"./src/models/idefics3/processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>d});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");var a=r("./src/utils/core.js");function o(u,f,p,m,g,x){let v="";for(let y=0;y<f;++y){for(let w=0;w<p;++w)v+=m+`<row_${y+1}_col_${w+1}>`+g.repeat(u);v+=`
`}return v+=`
${m}${x}`+g.repeat(u)+`${m}`,v}function l(u,f,p,m){return`${f}${m}`+p.repeat(u)+`${f}`}function c(u,f,p,m,g,x){return u===0&&f===0?l(p,m,g,x):o(p,u,f,m,g,x)}class d extends n.Processor{constructor(){super(...arguments);ue(this,"fake_image_token","<fake_token_around_image>");ue(this,"image_token","<image>");ue(this,"global_img_token","<global-img>")}async _call(p,m=null,g={}){g.return_row_col_info??(g.return_row_col_info=!0);let x;m&&(x=await this.image_processor(m,g)),Array.isArray(p)||(p=[p]);const v=x.rows??[new Array(p.length).fill(0)],y=x.cols??[new Array(p.length).fill(0)],w=this.config.image_seq_len,b=[],_=[];for(let M=0;M<p.length;++M){const k=p[M],j=v[M],A=y[M];b.push((0,a.count)(k,this.image_token));const R=j.map((F,V)=>c(F,A[V],w,this.fake_image_token,this.image_token,this.global_img_token)),I=k.split(this.image_token);if(I.length===0)throw new Error("The image token should be present in the text.");let $=I[0];for(let F=0;F<R.length;++F)$+=R[F]+I[F+1];_.push($)}return{...this.tokenizer(_),...x}}}ue(d,"image_processor_class",i.AutoImageProcessor),ue(d,"tokenizer_class",s.AutoTokenizer),ue(d,"uses_processor_config",!0)},"./src/models/image_processors.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>i.BitImageProcessor,CLIPFeatureExtractor:()=>a.CLIPFeatureExtractor,CLIPImageProcessor:()=>a.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>o.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>o.ConvNextImageProcessor,DPTFeatureExtractor:()=>u.DPTFeatureExtractor,DPTImageProcessor:()=>u.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>c.DetrFeatureExtractor,DetrImageProcessor:()=>c.DetrImageProcessor,DonutFeatureExtractor:()=>d.DonutFeatureExtractor,DonutImageProcessor:()=>d.DonutImageProcessor,EfficientNetImageProcessor:()=>f.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>p.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>m.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>g.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>v.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>y.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>w.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>b.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>b.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>_.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>_.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>T.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>T.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>M.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>M.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>k.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>k.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>j.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>j.MobileViTImageProcessor,NougatImageProcessor:()=>A.NougatImageProcessor,OwlViTFeatureExtractor:()=>I.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>I.OwlViTImageProcessor,Owlv2ImageProcessor:()=>R.Owlv2ImageProcessor,Phi3VImageProcessor:()=>$.Phi3VImageProcessor,PvtImageProcessor:()=>F.PvtImageProcessor,Qwen2VLImageProcessor:()=>V.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>G.RTDetrImageProcessor,SamImageProcessor:()=>H.SamImageProcessor,SegformerFeatureExtractor:()=>B.SegformerFeatureExtractor,SegformerImageProcessor:()=>B.SegformerImageProcessor,SiglipImageProcessor:()=>te.SiglipImageProcessor,SmolVLMImageProcessor:()=>ae.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>z.Swin2SRImageProcessor,VLMImageProcessor:()=>x.VLMImageProcessor,ViTFeatureExtractor:()=>D.ViTFeatureExtractor,ViTImageProcessor:()=>D.ViTImageProcessor,VitMatteImageProcessor:()=>K.VitMatteImageProcessor,VitPoseImageProcessor:()=>oe.VitPoseImageProcessor,YolosFeatureExtractor:()=>_e.YolosFeatureExtractor,YolosImageProcessor:()=>_e.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),i=r("./src/models/bit/image_processing_bit.js"),s=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),a=r("./src/models/clip/image_processing_clip.js"),o=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),c=r("./src/models/detr/image_processing_detr.js"),d=r("./src/models/donut/image_processing_donut.js"),u=r("./src/models/dpt/image_processing_dpt.js"),f=r("./src/models/efficientnet/image_processing_efficientnet.js"),p=r("./src/models/glpn/image_processing_glpn.js"),m=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),g=r("./src/models/idefics3/image_processing_idefics3.js"),x=r("./src/models/janus/image_processing_janus.js"),v=r("./src/models/jina_clip/image_processing_jina_clip.js"),y=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),w=r("./src/models/mask2former/image_processing_mask2former.js"),b=r("./src/models/maskformer/image_processing_maskformer.js"),_=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),T=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),M=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),k=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),j=r("./src/models/mobilevit/image_processing_mobilevit.js"),A=r("./src/models/nougat/image_processing_nougat.js"),R=r("./src/models/owlv2/image_processing_owlv2.js"),I=r("./src/models/owlvit/image_processing_owlvit.js"),$=r("./src/models/phi3_v/image_processing_phi3_v.js"),F=r("./src/models/pvt/image_processing_pvt.js"),V=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),G=r("./src/models/rt_detr/image_processing_rt_detr.js"),H=r("./src/models/sam/image_processing_sam.js"),B=r("./src/models/segformer/image_processing_segformer.js"),te=r("./src/models/siglip/image_processing_siglip.js"),ae=r("./src/models/smolvlm/image_processing_smolvlm.js"),z=r("./src/models/swin2sr/image_processing_swin2sr.js"),D=r("./src/models/vit/image_processing_vit.js"),K=r("./src/models/vitmatte/image_processing_vitmatte.js"),oe=r("./src/models/vitpose/image_processing_vitpose.js"),_e=r("./src/models/yolos/image_processing_yolos.js")},"./src/models/janus/image_processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super({do_pad:!0,pad_size:{width:a.image_size,height:a.image_size},...a}),this.constant_values=this.config.background_color.map(o=>o*this.rescale_factor)}pad_image(a,o,l,c){return super.pad_image(a,o,l,{constant_values:this.constant_values,center:!0,...c})}}},"./src/models/janus/processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>c});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/core.js"),o=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class c extends n.Processor{constructor(u,f,p){super(u,f,p),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(u,{images:f=null,chat_template:p="default"}={}){f?Array.isArray(f)||(f=[f]):f=await Promise.all(u.filter(A=>A.images).flatMap(A=>A.images).map(A=>l.RawImage.read(A)));const m=this.tokenizer,g=m.apply_chat_template(u,{tokenize:!1,add_generation_prompt:!0,chat_template:p}),x=A=>m.encode(A,{add_special_tokens:!1}),v=g.split(this.image_tag),y=v.length-1;if(f.length!==y)throw new Error(`Number of images provided (${f.length}) does not match number of "${this.image_tag}" image tags (${y})`);const[w,b,_]=m.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let T=x(v[0]),M=new Array(T.length).fill(!1);for(let A=1;A<v.length;++A){const R=new Array(this.num_image_tokens).fill(w),I=x(v[A]);T=(0,a.mergeArrays)(T,[b],R,[_],I);const $=new Array(this.num_image_tokens).fill(!0);M=(0,a.mergeArrays)(M,[!1],$,[!1],new Array(I.length).fill(!1))}const k=[1,T.length],j={input_ids:new o.Tensor("int64",T,k),attention_mask:new o.Tensor("int64",new Array(T.length).fill(1),k),images_seq_mask:new o.Tensor("bool",M,k),images_emb_mask:new o.Tensor("bool",new Array(y*this.num_image_tokens).fill(!0),[1,y,this.num_image_tokens])};if(f&&f.length>0){const A=await this.image_processor(f);return A.pixel_values.unsqueeze_(0),{...j,...A}}return j}}ue(c,"image_processor_class",i.AutoImageProcessor),ue(c,"tokenizer_class",s.AutoTokenizer),ue(c,"uses_processor_config",!0)},"./src/models/jina_clip/image_processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){const{resize_mode:o,fill_color:l,interpolation:c,size:d,...u}=a,f=o==="squash"?{width:d,height:d}:o==="shortest"?{shortest_edge:d}:{longest_edge:d},p=c==="bicubic"?3:2;super({...u,size:f,resample:p,do_center_crop:!0,crop_size:d,do_normalize:!0})}}},"./src/models/jina_clip/processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{async _call(l=null,c=null,d={}){if(!l&&!c)throw new Error("Either text or images must be provided");const u=l?this.tokenizer(l,d):{},f=c?await this.image_processor(c,d):{};return{...u,...f}}}ue(a,"tokenizer_class",s.AutoTokenizer),ue(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/llava/processing_llava.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{async _call(l,c=null,d={}){const u=await this.image_processor(l,d);if(c){const[p,m]=u.pixel_values.dims.slice(-2),{image_token:g,patch_size:x,num_additional_image_tokens:v}=this.config,y=Math.floor(p/x)*Math.floor(m/x)+v;c=structuredClone(c),Array.isArray(c)||(c=[c]);for(let w=0;w<c.length;++w)c[w]=c[w].replace(g,g.repeat(y))}const f=c?this.tokenizer(c,d):{};return{...u,...f}}}ue(a,"tokenizer_class",s.AutoTokenizer),ue(a,"image_processor_class",i.AutoImageProcessor),ue(a,"uses_processor_config",!0)},"./src/models/llava_onevision/image_processing_llava_onevision.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/mask2former/image_processing_mask2former.js":(e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>i});var n=r("./src/models/maskformer/image_processing_maskformer.js");class i extends n.MaskFormerImageProcessor{}},"./src/models/maskformer/image_processing_maskformer.js":(e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_panoptic_segmentation(...o){return(0,n.post_process_panoptic_segmentation)(...o)}post_process_instance_segmentation(...o){return(0,n.post_process_instance_segmentation)(...o)}}class s extends i{}},"./src/models/mgp_str/processing_mgp_str.js":(e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/maths.js");const o={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(d,u){if(!o.hasOwnProperty(u))throw new Error(`Format ${u} is not supported.`);const[f,p]=o[u],m=this[f].bind(this),[g,x]=d.dims,v=[],y=[],w=d.tolist();for(let _=0;_<g;++_){const T=w[_],M=[],k=[];for(let A=1;A<x;++A){const[R,I]=(0,a.max)((0,a.softmax)(T[A]));if(k.push(R),I==p)break;M.push(I)}const j=k.length>0?k.reduce((A,R)=>A*R,1):0;y.push(M),v.push(j)}return[m(y),v]}char_decode(d){return this.char_tokenizer.batch_decode(d).map(u=>u.replaceAll(" ",""))}bpe_decode(d){return this.bpe_tokenizer.batch_decode(d)}wp_decode(d){return this.wp_tokenizer.batch_decode(d).map(u=>u.replaceAll(" ",""))}batch_decode([d,u,f]){const[p,m]=this._decode_helper(d,"char"),[g,x]=this._decode_helper(u,"bpe"),[v,y]=this._decode_helper(f,"wp"),w=[],b=[];for(let _=0;_<p.length;++_){const[T,M]=(0,a.max)([m[_],x[_],y[_]]);w.push([p[_],g[_],v[_]][M]),b.push(T)}return{generated_text:w,scores:b,char_preds:p,bpe_preds:g,wp_preds:v}}static async from_pretrained(...d){const u=await super.from_pretrained(...d),f=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),p=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return u.components={image_processor:u.image_processor,char_tokenizer:u.tokenizer,bpe_tokenizer:f,wp_tokenizer:p},u}async _call(d,u=null){const f=await this.image_processor(d);return u&&(f.labels=this.tokenizer(u).input_ids),f}}ue(l,"tokenizer_class",s.AutoTokenizer),ue(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilevit/image_processing_mobilevit.js":(e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/moonshine/feature_extraction_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(o){(0,n.validate_audio_inputs)(o,"MoonshineFeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));const l=[1,o.length];return{input_values:new i.Tensor("float32",o,l)}}}},"./src/models/moonshine/processing_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}ue(a,"tokenizer_class",i.AutoTokenizer),ue(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/nougat/image_processing_nougat.js":(e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>i});var n=r("./src/models/donut/image_processing_donut.js");class i extends n.DonutImageProcessor{}},"./src/models/owlv2/image_processing_owlv2.js":(e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>i});var n=r("./src/models/owlvit/image_processing_owlvit.js");class i extends n.OwlViTImageProcessor{}},"./src/models/owlvit/image_processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}class s extends i{}},"./src/models/owlvit/processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{}ue(a,"tokenizer_class",s.AutoTokenizer),ue(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/paligemma/processing_paligemma.js":(e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");const a="<image>";function o(c,d,u,f,p){return`${f.repeat(u*p)}${d}${c}
`}class l extends n.Processor{async _call(d,u=null,f={}){u||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),u=""),Array.isArray(d)||(d=[d]),Array.isArray(u)||(u=[u]);const p=this.tokenizer.bos_token,m=this.image_processor.config.image_seq_length;let g;u.some(y=>y.includes(a))?g=u.map(y=>{const w=y.replaceAll(a,a.repeat(m)),b=w.lastIndexOf(a),_=b===-1?0:b+a.length;return w.slice(0,_)+p+w.slice(_)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),g=u.map(y=>o(y,p,m,a,d.length)));const x=this.tokenizer(g,f);return{...await this.image_processor(d,f),...x}}}ue(l,"tokenizer_class",s.AutoTokenizer),ue(l,"image_processor_class",i.AutoImageProcessor),ue(l,"uses_processor_config",!1)},"./src/models/phi3_v/image_processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>d});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");const s=336,a=[2,3],{ceil:o,floor:l,sqrt:c}=Math;class d extends n.ImageProcessor{constructor(f){super({...f,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=f.num_crops}calc_num_image_tokens_from_image_size(f,p){const{num_img_tokens:m}=this.config;return l((l(p/s)*l(f/s)+1)*m+1+(l(p/s)+1)*c(m))}get_resize_output_image_size(f,p){const m=this._num_crops,[g,x]=f.size;let v=g/x,y=1;for(;y*Math.ceil(y/v)<=m;)y+=1;y-=1;const w=Math.floor(y*336),b=Math.floor(w/v);return[w,b]}pad_image(f,p,m,g={}){const[x,v]=p,y=s*o(x/s),w=s*o(v/s),b=[1,1,1].map((_,T)=>(_-this.image_mean[T])/this.image_std[T]);return super.pad_image(f,p,{width:w,height:y},{center:!0,constant_values:b,...g})}async _call(f,{num_crops:p=null}={}){if(this._num_crops=p??(p=this.config.num_crops),p<4||c(p)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(f)||(f=[f]);const m=f.length,g=await Promise.all(f.map(M=>this.preprocess(M))),x=g.map(M=>M.original_size),v=g.map(M=>M.reshaped_input_size),y=[];for(const{pixel_values:M}of g){M.unsqueeze_(0);const[k,j]=M.dims.slice(-2),A=await(0,i.interpolate_4d)(M,{size:[s,s],mode:"bicubic"});if(p>0){const R=[],I=c(p),$=l(j/I),F=l(k/I);for(let G=0;G<I;++G)for(let H=0;H<I;++H){let B,te,ae,z;G===I-1?(te=k-F,z=k):(te=G*F,z=(G+1)*F),H===I-1?(B=j-$,ae=j):(B=H*$,ae=(H+1)*$);const D=[te,B],K=[z,ae],oe=await(0,i.slice)(M,D,K,a);R.push(oe)}const V=await(0,i.interpolate_4d)((0,i.cat)(R,0),{size:[s,s],mode:"bicubic"});y.push((0,i.cat)([A,V],0))}else y.push(A)}const w=(0,i.stack)(y,0),b=v.map(M=>M.map(k=>s*o(k/s))),_=new i.Tensor("int64",b.flat(),[m,2]),T=b.map(([M,k])=>this.calc_num_image_tokens_from_image_size(k,M));return{pixel_values:w,original_sizes:x,reshaped_input_sizes:v,image_sizes:_,num_img_tokens:T}}}},"./src/models/phi3_v/processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");const a="<|image|>",o=/<\|image_\d+\|>/g;class l extends n.Processor{async _call(d,u=null,{padding:f=!0,truncation:p=!0,num_crops:m=null}={}){Array.isArray(d)||(d=[d]);let g,x;if(u){x=await this.image_processor(u,{num_crops:m});const{num_img_tokens:v}=x,y=d.map((b,_)=>b.split(o).join(a.repeat(v[_])));g=this.tokenizer(y,{padding:f,truncation:p});const w=this.tokenizer.model.convert_tokens_to_ids([a])[0];g.input_ids.map_(b=>b==w?-b:b)}else g=this.tokenizer(d);return{...g,...x}}}ue(l,"image_processor_class",i.AutoImageProcessor),ue(l,"tokenizer_class",s.AutoTokenizer)},"./src/models/processors.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>i.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>a.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>c.LlavaProcessor,MgpstrProcessor:()=>d.MgpstrProcessor,MoonshineProcessor:()=>u.MoonshineProcessor,OwlViTProcessor:()=>f.OwlViTProcessor,PaliGemmaProcessor:()=>m.PaliGemmaProcessor,Phi3VProcessor:()=>p.Phi3VProcessor,PyAnnoteProcessor:()=>g.PyAnnoteProcessor,Qwen2VLProcessor:()=>x.Qwen2VLProcessor,SamProcessor:()=>v.SamProcessor,SmolVLMProcessor:()=>y.SmolVLMProcessor,SpeechT5Processor:()=>w.SpeechT5Processor,UltravoxProcessor:()=>b.UltravoxProcessor,VLChatProcessor:()=>o.VLChatProcessor,VoxtralProcessor:()=>_.VoxtralProcessor,Wav2Vec2Processor:()=>T.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>M.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>k.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),i=r("./src/models/gemma3n/processing_gemma3n.js"),s=r("./src/models/grounding_dino/processing_grounding_dino.js"),a=r("./src/models/idefics3/processing_idefics3.js"),o=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),c=r("./src/models/llava/processing_llava.js"),d=r("./src/models/mgp_str/processing_mgp_str.js"),u=r("./src/models/moonshine/processing_moonshine.js"),f=r("./src/models/owlvit/processing_owlvit.js"),p=r("./src/models/phi3_v/processing_phi3_v.js"),m=r("./src/models/paligemma/processing_paligemma.js"),g=r("./src/models/pyannote/processing_pyannote.js"),x=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),v=r("./src/models/sam/processing_sam.js"),y=r("./src/models/smolvlm/processing_smolvlm.js"),w=r("./src/models/speecht5/processing_speecht5.js"),b=r("./src/models/ultravox/processing_ultravox.js"),_=r("./src/models/voxtral/processing_voxtral.js"),T=r("./src/models/wav2vec2/processing_wav2vec2.js"),M=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),k=r("./src/models/whisper/processing_whisper.js")},"./src/models/pvt/image_processing_pvt.js":(e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/pyannote/feature_extraction_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");class a extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const c=[1,1,l.length];return{input_values:new i.Tensor("float32",l,c)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,c){const d=c/this.samples_to_frames(c)/this.config.sampling_rate,u=[];for(const f of l.tolist()){const p=[];let m=-1;for(let g=0;g<f.length;++g){const x=(0,s.softmax)(f[g]),[v,y]=(0,s.max)(x),[w,b]=[g,g+1];y!==m?(m=y,p.push({id:y,start:w,end:b,score:v})):(p.at(-1).end=b,p.at(-1).score+=v)}u.push(p.map(({id:g,start:x,end:v,score:y})=>({id:g,start:x*d,end:v*d,confidence:y/(v-x)})))}return u}}},"./src/models/pyannote/processing_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/pyannote/feature_extraction_pyannote.js");class s extends n.Processor{async _call(o){return await this.feature_extractor(o)}post_process_speaker_diarization(...o){return this.feature_extractor.post_process_speaker_diarization(...o)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}ue(s,"feature_extractor_class",i.PyAnnoteFeatureExtractor)},"./src/models/qwen2_vl/image_processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o,...l){const{pixel_values:c,original_sizes:d,reshaped_input_sizes:u}=await super._call(o,...l);let f=c;const{temporal_patch_size:p,merge_size:m,patch_size:g}=this.config;f.dims[0]===1&&(f=(0,i.cat)(Array.from({length:p},()=>f),0));const x=f.dims[0]/p,v=f.dims[1],y=Math.floor(f.dims[2]/g),w=Math.floor(f.dims[3]/g),b=f.view(x,p,v,Math.floor(y/m),m,g,Math.floor(w/m),m,g).permute(0,3,6,4,7,2,1,5,8).view(x*y*w,v*p*g*g),_=new i.Tensor("int64",[x,y,w],[1,3]);return{pixel_values:b,image_grid_thw:_,original_sizes:d,reshaped_input_sizes:u}}}},"./src/models/qwen2_vl/processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");class a extends n.Processor{async _call(l,c=null,...d){Array.isArray(l)||(l=[l]);let u,f;if(c&&(u=await this.image_processor(c),f=u.image_grid_thw),f){let m=this.image_processor.config.merge_size**2,g=0;const x=f.tolist();l=l.map(v=>{for(;v.includes("<|image_pad|>");){const y=Number(x[g++].reduce((w,b)=>w*b,1n));v=v.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(y/m)))}return v.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...u}}}ue(a,"image_processor_class",i.AutoImageProcessor),ue(a,"tokenizer_class",s.AutoTokenizer)},"./src/models/rt_detr/image_processing_rt_detr.js":(e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}},"./src/models/sam/image_processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/core.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{reshape_input_points(l,c,d,u=!1){l=structuredClone(l);let f=(0,i.calculateDimensions)(l);if(f.length===3)u||(f=[1,...f]),l=[l];else if(f.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let p=0;p<l.length;++p){let m=c[p],g=d[p],x=[g[0]/m[0],g[1]/m[1]];for(let v=0;v<l[p].length;++v)for(let y=0;y<l[p][v].length;++y)for(let w=0;w<l[p][v][y].length;++w)l[p][v][y][w]*=x[w%2]}return new s.Tensor("float32",Float32Array.from(l.flat(1/0)),f)}add_input_labels(l,c){let d=(0,i.calculateDimensions)(l);if(d.length===2)d=[1,...d],l=[l];else if(d.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(d.some((u,f)=>u!==c.dims[f]))throw Error(`The first ${d.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",l.flat(1/0).map(BigInt),d)}async _call(l,{input_points:c=null,input_labels:d=null,input_boxes:u=null}={}){const f=await super._call(l);if(c&&(f.input_points=this.reshape_input_points(c,f.original_sizes,f.reshaped_input_sizes)),d){if(!f.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");f.input_labels=this.add_input_labels(d,f.input_points)}return u&&(f.input_boxes=this.reshape_input_points(u,f.original_sizes,f.reshaped_input_sizes,!0)),f}async post_process_masks(l,c,d,{mask_threshold:u=0,binarize:f=!0,pad_size:p=null}={}){const m=[];p=p??this.pad_size;const g=[p.height,p.width];for(let x=0;x<c.length;++x){const v=c[x],y=d[x];let w=await(0,s.interpolate_4d)(l[x],{mode:"bilinear",size:g});if(w=w.slice(null,null,[0,y[0]],[0,y[1]]),w=await(0,s.interpolate_4d)(w,{mode:"bilinear",size:v}),f){const b=w.data,_=new Uint8Array(b.length);for(let T=0;T<b.length;++T)b[T]>u&&(_[T]=1);w=new s.Tensor("bool",_,w.dims)}m.push(w)}return m}generate_crop_boxes(l,c,{crop_n_layers:d=0,overlap_ratio:u=512/1500,points_per_crop:f=32,crop_n_points_downscale_factor:p=1}={}){}}},"./src/models/sam/processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js");class s extends n.Processor{async _call(...o){return await this.image_processor(...o)}post_process_masks(...o){return this.image_processor.post_process_masks(...o)}reshape_input_points(...o){return this.image_processor.reshape_input_points(...o)}}ue(s,"image_processor_class",i.AutoImageProcessor)},"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":(e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const c=this.config.sampling_rate,d=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(c/2),c,null,"kaldi",!0);this.mel_filters=d,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,c){return l=l.map(d=>d*32768),(0,s.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:c,transpose:!0})}async _call(l,{padding:c=!0,pad_to_multiple_of:d=2,do_normalize_per_mel_bins:u=!0,return_attention_mask:f=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let p=await this._extract_fbank_features(l,this.config.max_length);if(u){const[_,T]=p.dims,M=p.data;for(let k=0;k<T;++k){let j=0;for(let $=0;$<_;++$)j+=M[$*T+k];const A=j/_;let R=0;for(let $=0;$<_;++$)R+=(M[$*T+k]-A)**2;R/=_-1;const I=Math.sqrt(R+1e-7);for(let $=0;$<_;++$){const F=$*T+k;M[F]=(M[F]-A)/I}}}let m;if(c){const[_,T]=p.dims,M=p.data,k=_%d;if(k>0){const j=new Float32Array(T*(_+k));j.set(M),j.fill(this.config.padding_value,M.length);const A=_+k;p=new i.Tensor(p.type,j,[A,T]),f&&(m=new i.Tensor("int64",new BigInt64Array(A),[1,A]),m.data.fill(1n,0,_))}}const[g,x]=p.dims,v=this.config.stride;if(g%v!==0)throw new Error(`The number of frames (${g}) must be a multiple of the stride (${v}).`);const w=p.view(1,Math.floor(g/v),x*v),b={input_features:w};if(f){const _=w.dims[1],T=new BigInt64Array(_);if(m){const M=m.data;for(let k=1,j=0;k<g;k+=v,++j)T[j]=M[k]}else T.fill(1n);b.attention_mask=new i.Tensor("int64",T,[1,_])}return b}}},"./src/models/segformer/image_processing_segformer.js":(e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_semantic_segmentation(...o){return(0,n.post_process_semantic_segmentation)(...o)}}class s extends i{}},"./src/models/siglip/image_processing_siglip.js":(e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/smolvlm/image_processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")},"./src/models/smolvlm/processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")},"./src/models/snac/feature_extraction_snac.js":(e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>i});var n=r("./src/models/dac/feature_extraction_dac.js");class i extends n.DacFeatureExtractor{}},"./src/models/speecht5/feature_extraction_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js");class i extends n.FeatureExtractor{}},"./src/models/speecht5/processing_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js");class a extends n.Processor{async _call(l){return await this.feature_extractor(l)}}ue(a,"tokenizer_class",i.AutoTokenizer),ue(a,"feature_extractor_class",s.AutoFeatureExtractor)},"./src/models/swin2sr/image_processing_swin2sr.js":(e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(a,o,l,c={}){const[d,u,f]=o;return super.pad_image(a,o,{width:u+(l-u%l)%l,height:d+(l-d%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...c})}}},"./src/models/ultravox/processing_ultravox.js":(e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l,c=null,d={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let u={};if(c){const p=c.length,{input_features:m}=await this.feature_extractor(c,{...d,max_length:p}),g=Math.round(p/this.config.encoder_ds_factor+1e-4),x=1+Math.ceil(g/this.config.stack_factor);u.audio_token_len=[x],u.audio_values=m;const v=this.config.audio_placeholder;if(!l.includes(v))throw new Error(`The input text does not contain the image token ${v}.`);l=l.replaceAll(v,v.repeat(x))}return{...this.tokenizer(l,{add_special_tokens:!1,...d}),...u}}}ue(a,"tokenizer_class",i.AutoTokenizer),ue(a,"feature_extractor_class",n.AutoFeatureExtractor),ue(a,"uses_processor_config",!0)},"./src/models/vit/image_processing_vit.js":(e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/vitmatte/image_processing_vitmatte.js":(e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o,l){Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const c=await Promise.all(o.map(f=>this.preprocess(f))),d=await Promise.all(l.map(f=>this.preprocess(f,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,i.stack)(c.map((f,p)=>(0,i.cat)([f.pixel_values,d[p].pixel_values],0)),0),original_sizes:c.map(f=>f.original_size),reshaped_input_sizes:c.map(f=>f.reshaped_input_size)}}}},"./src/models/vitpose/image_processing_vitpose.js":(e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_pose_estimation(a,o,{threshold:l=null}={}){const c=a.tolist(),[d,u,f,p]=a.dims,m=[];for(let g=0;g<d;++g){const x=c[g],v=o[g],y=[];for(let w=0;w<v.length;++w){const b=v[w],_=[],T=[],M=[],k=b.at(-2)/p,j=b.at(-1)/f;for(let A=0;A<x.length;++A){let[R,I]=[0,0],$=0,F=-1/0;const V=x[A];for(let H=0;H<V.length;++H){const B=V[H];for(let te=0;te<B.length;++te){const ae=B[te];$+=ae,F=Math.max(F,ae),R+=(te+.5)*ae,I+=H*ae}}if(l!=null&&F<l)continue;const G=[k*R/$,j*I/$];_.push(G),M.push(A),T.push(F)}y.push({bbox:b,scores:T,labels:M,keypoints:_})}m.push(y)}return m}}},"./src/models/voxtral/processing_voxtral.js":(e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>u});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js"),a=r("./src/utils/tensor.js");const o="[AUDIO]",l="[BEGIN_AUDIO]",c=375;function d(f,p){const m=[];for(let g=0;g<f.length;g+=p)m.push(f.subarray(g,Math.min(g+p,f.length)));return m}class u extends s.Processor{async _call(p,m=null,g={}){if(Array.isArray(p))throw new Error("Batched inputs are not supported yet.");const x={};if(m){if(!p.includes(o))throw new Error(`The input text does not contain the audio token ${o}.`);Array.isArray(m)||(m=[m]);const y=p.split(o),w=y.length-1;if(w!==m.length)throw new Error(`The number of audio inputs (${m.length}) does not match the number of audio tokens in the text (${w}).`);const b=this.feature_extractor.config.n_samples,_=m.map(A=>d(A,b)),T=_.map(A=>A.length),M=_.flat(),k=(await Promise.all(M.map(A=>this.feature_extractor(A,g)))).map(A=>A.input_features);x.audio_values=k.length>1?(0,a.cat)(k,0):k[0];let j=y[0];for(let A=0;A<T.length;++A){j+=l;for(let R=0;R<T[A];++R)j+=o.repeat(c);j+=y[A+1]}p=j}return{...this.tokenizer(p,{add_special_tokens:!1,...g}),...x}}}ue(u,"tokenizer_class",i.AutoTokenizer),ue(u,"feature_extractor_class",n.AutoFeatureExtractor),ue(u,"uses_processor_config",!1)},"./src/models/wav2vec2/feature_extraction_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{_zero_mean_unit_var_norm(o){const c=o.reduce((u,f)=>u+f,0)/o.length,d=o.reduce((u,f)=>u+(f-c)**2,0)/o.length;return o.map(u=>(u-c)/Math.sqrt(d+1e-7))}async _call(o){(0,n.validate_audio_inputs)(o,"Wav2Vec2FeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));let l=o;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const c=[1,l.length];return{input_values:new i.Tensor("float32",l,c),attention_mask:new i.Tensor("int64",new BigInt64Array(l.length).fill(1n),c)}}}},"./src/models/wav2vec2/processing_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}ue(a,"tokenizer_class",n.AutoTokenizer),ue(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}ue(a,"tokenizer_class",n.AutoTokenizer),ue(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wespeaker/feature_extraction_wespeaker.js":(e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o);const l=this.config.sampling_rate,c=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,i.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(o){return o=o.map(l=>l*32768),(0,i.spectrogram)(o,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(o){(0,n.validate_audio_inputs)(o,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(o)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const c=l.mean(1).data,d=l.data,[u,f,p]=l.dims;for(let m=0;m<u;++m){const g=m*f*p,x=m*p;for(let v=0;v<f;++v){const y=g+v*p;for(let w=0;w<p;++w)d[y+w]-=c[x+w]}}}return{input_features:l}}}},"./src/models/whisper/common_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>i,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>a});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],i=new Map(n),s=new Map([...n.map(([o,l])=>[l,o]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function a(o){o=o.toLowerCase();let l=s.get(o);if(l===void 0){const c=o.match(/^<\|([a-z]{2})\|>$/);if(c&&(o=c[1]),i.has(o))l=o;else{const u=o.length===2?i.keys():i.values();throw new Error(`Language "${o}" is not supported. Must be one of: ${JSON.stringify(Array.from(u))}`)}}return l}},"./src/models/whisper/feature_extraction_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js"),s=r("./src/utils/maths.js");class a extends n.FeatureExtractor{constructor(l){var c;super(l),(c=this.config).mel_filters??(c.mel_filters=(0,i.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=(0,i.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const c=await(0,i.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),d=c.data,u=(0,s.max)(d)[0];for(let f=0;f<d.length;++f)d[f]=(Math.max(d[f],u-8)+4)/4;return c}async _call(l,{max_length:c=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let d;const u=c??this.config.n_samples;return l.length>u?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),d=l.slice(0,u)):(d=new Float32Array(u),d.set(l)),{input_features:(await this._extract_fbank_features(d)).unsqueeze_(0)}}}},"./src/models/whisper/generation_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>i});var n=r("./src/generation/configuration_utils.js");class i extends n.GenerationConfig{constructor(){super(...arguments);ue(this,"return_timestamps",null);ue(this,"return_token_timestamps",null);ue(this,"num_frames",null);ue(this,"alignment_heads",null);ue(this,"task",null);ue(this,"language",null);ue(this,"no_timestamps_token_id",null);ue(this,"prompt_ids",null);ue(this,"is_multilingual",null);ue(this,"lang_to_id",null);ue(this,"task_to_id",null);ue(this,"max_initial_timestamp_index",1)}}},"./src/models/whisper/processing_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}ue(a,"tokenizer_class",i.AutoTokenizer),ue(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/yolos/image_processing_yolos.js":(e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}class s extends i{}},"./src/ops/registry.js":(e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>l});var n=r("./src/backends/onnx.js"),i=r("./src/utils/tensor.js"),s=r("./src/env.js");const a=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV,o=async(c,d,u)=>{const f=await(0,n.createInferenceSession)(new Uint8Array(c),d);let p=Promise.resolve();return async m=>{const g=(0,n.isONNXProxy)(),x=Object.fromEntries(Object.entries(m).map(([y,w])=>[y,(g?w.clone():w).ort_tensor])),v=await(p=a?p.then(()=>f.run(x)):f.run(x));return Array.isArray(u)?u.map(y=>new i.Tensor(v[y])):new i.Tensor(v[u])}};class l{static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=o([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=o([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=o([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=o([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=o([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=o([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=o([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=o([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}ue(l,"session_options",{})},"./src/pipelines.js":(e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>I,AutomaticSpeechRecognitionPipeline:()=>F,BackgroundRemovalPipeline:()=>B,DepthEstimationPipeline:()=>_e,DocumentQuestionAnsweringPipeline:()=>D,FeatureExtractionPipeline:()=>A,FillMaskPipeline:()=>w,ImageClassificationPipeline:()=>G,ImageFeatureExtractionPipeline:()=>R,ImageSegmentationPipeline:()=>H,ImageToImagePipeline:()=>oe,ImageToTextPipeline:()=>V,ObjectDetectionPipeline:()=>ae,Pipeline:()=>g,QuestionAnsweringPipeline:()=>y,SummarizationPipeline:()=>_,Text2TextGenerationPipeline:()=>b,TextClassificationPipeline:()=>x,TextGenerationPipeline:()=>k,TextToAudioPipeline:()=>K,TokenClassificationPipeline:()=>v,TranslationPipeline:()=>T,ZeroShotAudioClassificationPipeline:()=>$,ZeroShotClassificationPipeline:()=>j,ZeroShotImageClassificationPipeline:()=>te,ZeroShotObjectDetectionPipeline:()=>z,pipeline:()=>Ie});var n=r("./src/tokenizers.js"),i=r("./src/models.js"),s=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var a=r("./src/utils/generic.js"),o=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),c=r("./src/utils/audio.js"),d=r("./src/utils/tensor.js"),u=r("./src/utils/image.js");async function f(ge){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(J=>u.RawImage.read(J)))}async function p(ge,J){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(ee=>typeof ee=="string"||ee instanceof URL?(0,c.read_audio)(ee,J):ee instanceof Float64Array?new Float32Array(ee):ee))}function m(ge,J){J&&(ge=ge.map(Ce=>Ce|0));const[ee,Z,we,$e]=ge;return{xmin:ee,ymin:Z,xmax:we,ymax:$e}}class g extends a.Callable{constructor({task:J,model:ee,tokenizer:Z=null,processor:we=null}){super(),this.task=J,this.model=ee,this.tokenizer=Z,this.processor=we}async dispose(){await this.model.dispose()}}class x extends g{constructor(J){super(J)}async _call(J,{top_k:ee=1}={}){const Z=this.tokenizer(J,{padding:!0,truncation:!0}),we=await this.model(Z),$e=this.model.config.problem_type==="multi_label_classification"?Q=>Q.sigmoid():Q=>new d.Tensor("float32",(0,l.softmax)(Q.data),Q.dims),Ce=this.model.config.id2label,Pe=[];for(const Q of we.logits){const re=$e(Q),fe=await(0,d.topk)(re,ee),ke=fe[0].tolist(),me=fe[1].tolist().map((Fe,ze)=>({label:Ce?Ce[Fe]:`LABEL_${Fe}`,score:ke[ze]}));ee===1?Pe.push(...me):Pe.push(me)}return Array.isArray(J)||ee===1?Pe:Pe[0]}}class v extends g{constructor(J){super(J)}async _call(J,{ignore_labels:ee=["O"]}={}){const Z=Array.isArray(J),we=this.tokenizer(Z?J:[J],{padding:!0,truncation:!0}),Ce=(await this.model(we)).logits,Pe=this.model.config.id2label,Q=[];for(let re=0;re<Ce.dims[0];++re){const fe=we.input_ids[re],ke=Ce[re],je=[];for(let me=0;me<ke.dims[0];++me){const Fe=ke[me],ze=(0,l.max)(Fe.data)[1],Je=Pe?Pe[ze]:`LABEL_${ze}`;if(ee.includes(Je))continue;const He=this.tokenizer.decode([fe[me].item()],{skip_special_tokens:!0});if(He==="")continue;const We=(0,l.softmax)(Fe.data);je.push({entity:Je,score:We[ze],index:me,word:He})}Q.push(je)}return Z?Q:Q[0]}}class y extends g{constructor(J){super(J)}async _call(J,ee,{top_k:Z=1}={}){const we=this.tokenizer(J,{text_pair:ee,padding:!0,truncation:!0}),{start_logits:$e,end_logits:Ce}=await this.model(we),Pe=we.input_ids.tolist(),Q=we.attention_mask.tolist(),re=this.tokenizer.all_special_ids,fe=[];for(let ke=0;ke<$e.dims[0];++ke){const je=Pe[ke],me=je.findIndex(nt=>nt==this.tokenizer.sep_token_id);Q[ke].map((nt,ct)=>nt==1&&(ct===0||ct>me&&re.findIndex(Ht=>Ht==je[ct])===-1));const Fe=$e[ke].tolist(),ze=Ce[ke].tolist();for(let nt=1;nt<Fe.length;++nt)(Q[ke]==0||nt<=me||re.findIndex(ct=>ct==je[nt])!==-1)&&(Fe[nt]=-1/0,ze[nt]=-1/0);const Je=(0,l.softmax)(Fe).map((nt,ct)=>[nt,ct]),He=(0,l.softmax)(ze).map((nt,ct)=>[nt,ct]);Je[0][0]=0,He[0][0]=0;const We=(0,o.product)(Je,He).filter(nt=>nt[0][1]<=nt[1][1]).map(nt=>[nt[0][1],nt[1][1],nt[0][0]*nt[1][0]]).sort((nt,ct)=>ct[2]-nt[2]);for(let nt=0;nt<Math.min(We.length,Z);++nt){const[ct,Ht,Ut]=We[nt],$t=je.slice(ct,Ht+1),yn=this.tokenizer.decode($t,{skip_special_tokens:!0});fe.push({answer:yn,score:Ut})}}return Z===1?fe[0]:fe}}class w extends g{constructor(J){super(J)}async _call(J,{top_k:ee=5}={}){const Z=this.tokenizer(J,{padding:!0,truncation:!0}),{logits:we}=await this.model(Z),$e=[],Ce=Z.input_ids.tolist();for(let Pe=0;Pe<Ce.length;++Pe){const Q=Ce[Pe],re=Q.findIndex(Fe=>Fe==this.tokenizer.mask_token_id);if(re===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const fe=we[Pe][re],ke=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)(fe.data),fe.dims),ee),je=ke[0].tolist(),me=ke[1].tolist();$e.push(me.map((Fe,ze)=>{const Je=Q.slice();return Je[re]=Fe,{score:je[ze],token:Number(Fe),token_str:this.tokenizer.decode([Fe]),sequence:this.tokenizer.decode(Je,{skip_special_tokens:!0})}}))}return Array.isArray(J)?$e:$e[0]}}class b extends g{constructor(ee){super(ee);ue(this,"_key","generated_text")}async _call(ee,Z={}){Array.isArray(ee)||(ee=[ee]),this.model.config.prefix&&(ee=ee.map(re=>this.model.config.prefix+re));const we=this.model.config.task_specific_params;we&&we[this.task]&&we[this.task].prefix&&(ee=ee.map(re=>we[this.task].prefix+re));const $e=this.tokenizer,Ce={padding:!0,truncation:!0};let Pe;this instanceof T&&"_build_translation_inputs"in $e?Pe=$e._build_translation_inputs(ee,Ce,Z):Pe=$e(ee,Ce);const Q=await this.model.generate({...Pe,...Z});return $e.batch_decode(Q,{skip_special_tokens:!0}).map(re=>({[this._key]:re}))}}class _ extends b{constructor(ee){super(ee);ue(this,"_key","summary_text")}}class T extends b{constructor(ee){super(ee);ue(this,"_key","translation_text")}}function M(ge){return Array.isArray(ge)&&ge.every(J=>"role"in J&&"content"in J)}class k extends g{constructor(J){super(J)}async _call(J,ee={}){let Z=!1,we=!1,$e=ee.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,Ce;if(typeof J=="string")Ce=J=[J];else if(Array.isArray(J)&&J.every(me=>typeof me=="string"))Z=!0,Ce=J;else{if(M(J))J=[J];else if(Array.isArray(J)&&J.every(M))Z=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");we=!0,Ce=J.map(me=>this.tokenizer.apply_chat_template(me,{tokenize:!1,add_generation_prompt:!0})),$e=!1}const Pe=we?!1:ee.return_full_text??!0;this.tokenizer.padding_side="left";const Q=this.tokenizer(Ce,{add_special_tokens:$e,padding:!0,truncation:!0}),re=await this.model.generate({...Q,...ee}),fe=this.tokenizer.batch_decode(re,{skip_special_tokens:!0});let ke;!Pe&&Q.input_ids.dims.at(-1)>0&&(ke=this.tokenizer.batch_decode(Q.input_ids,{skip_special_tokens:!0}).map(me=>me.length));const je=Array.from({length:J.length},me=>[]);for(let me=0;me<fe.length;++me){const Fe=Math.floor(me/re.dims[0]*J.length);ke&&(fe[me]=fe[me].slice(ke[Fe])),je[Fe].push({generated_text:we?[...J[Fe],{role:"assistant",content:fe[me]}]:fe[me]})}return!Z&&je.length===1?je[0]:je}}class j extends g{constructor(J){super(J),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([ee,Z])=>[ee.toLowerCase(),Z])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(J,ee,{hypothesis_template:Z="This example is {}.",multi_label:we=!1}={}){const $e=Array.isArray(J);$e||(J=[J]),Array.isArray(ee)||(ee=[ee]);const Ce=ee.map(re=>Z.replace("{}",re)),Pe=we||ee.length===1,Q=[];for(const re of J){const fe=[];for(const me of Ce){const Fe=this.tokenizer(re,{text_pair:me,padding:!0,truncation:!0}),ze=await this.model(Fe);Pe?fe.push([ze.logits.data[this.contradiction_id],ze.logits.data[this.entailment_id]]):fe.push(ze.logits.data[this.entailment_id])}const je=(Pe?fe.map(me=>(0,l.softmax)(me)[1]):(0,l.softmax)(fe)).map((me,Fe)=>[me,Fe]).sort((me,Fe)=>Fe[0]-me[0]);Q.push({sequence:re,labels:je.map(me=>ee[me[1]]),scores:je.map(me=>me[0])})}return $e?Q:Q[0]}}class A extends g{constructor(J){super(J)}async _call(J,{pooling:ee="none",normalize:Z=!1,quantize:we=!1,precision:$e="binary"}={}){const Ce=this.tokenizer(J,{padding:!0,truncation:!0}),Pe=await this.model(Ce);let Q=Pe.last_hidden_state??Pe.logits??Pe.token_embeddings;switch(ee){case"none":break;case"mean":Q=(0,d.mean_pooling)(Q,Ce.attention_mask);break;case"first_token":case"cls":Q=Q.slice(null,0);break;case"last_token":case"eos":Q=Q.slice(null,-1);break;default:throw Error(`Pooling method '${ee}' not supported.`)}return Z&&(Q=Q.normalize(2,-1)),we&&(Q=(0,d.quantize_embeddings)(Q,$e)),Q}}class R extends g{constructor(J){super(J)}async _call(J,{pool:ee=null}={}){const Z=await f(J),{pixel_values:we}=await this.processor(Z),$e=await this.model({pixel_values:we});let Ce;if(ee){if(!("pooler_output"in $e))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ce=$e.pooler_output}else Ce=$e.last_hidden_state??$e.logits??$e.image_embeds;return Ce}}class I extends g{constructor(J){super(J)}async _call(J,{top_k:ee=5}={}){const Z=this.processor.feature_extractor.config.sampling_rate,we=await p(J,Z),$e=this.model.config.id2label,Ce=[];for(const Pe of we){const Q=await this.processor(Pe),fe=(await this.model(Q)).logits[0],ke=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)(fe.data),fe.dims),ee),je=ke[0].tolist(),Fe=ke[1].tolist().map((ze,Je)=>({label:$e?$e[ze]:`LABEL_${ze}`,score:je[Je]}));Ce.push(Fe)}return Array.isArray(J)?Ce:Ce[0]}}class $ extends g{constructor(J){super(J)}async _call(J,ee,{hypothesis_template:Z="This is a sound of {}."}={}){const we=!Array.isArray(J);we&&(J=[J]);const $e=ee.map(fe=>Z.replace("{}",fe)),Ce=this.tokenizer($e,{padding:!0,truncation:!0}),Pe=this.processor.feature_extractor.config.sampling_rate,Q=await p(J,Pe),re=[];for(const fe of Q){const ke=await this.processor(fe),je=await this.model({...Ce,...ke}),me=(0,l.softmax)(je.logits_per_audio.data);re.push([...me].map((Fe,ze)=>({score:Fe,label:ee[ze]})))}return we?re[0]:re}}class F extends g{constructor(J){super(J)}async _call(J,ee={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(J,ee);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(J,ee);case"moonshine":return this._call_moonshine(J,ee);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(J,ee){ee.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),ee.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const Z=!Array.isArray(J);Z&&(J=[J]);const we=this.processor.feature_extractor.config.sampling_rate,$e=await p(J,we),Ce=[];for(const Pe of $e){const Q=await this.processor(Pe),fe=(await this.model(Q)).logits[0],ke=[];for(const me of fe)ke.push((0,l.max)(me.data)[1]);const je=this.tokenizer.decode(ke);Ce.push({text:je})}return Z?Ce[0]:Ce}async _call_whisper(J,ee){const Z=ee.return_timestamps??!1,we=ee.chunk_length_s??0,$e=ee.force_full_sequences??!1;let Ce=ee.stride_length_s??null;const Pe={...ee};Z==="word"&&(Pe.return_token_timestamps=!0,Pe.return_timestamps=!1);const Q=!Array.isArray(J);Q&&(J=[J]);const re=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,fe=this.processor.feature_extractor.config.hop_length,ke=this.processor.feature_extractor.config.sampling_rate,je=await p(J,ke),me=[];for(const Fe of je){let ze=[];if(we>0){if(Ce===null)Ce=we/6;else if(we<=Ce)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const We=ke*we,nt=ke*Ce,ct=We-2*nt;let Ht=0;for(;;){const Ut=Ht+We,$t=Fe.subarray(Ht,Ut),yn=await this.processor($t),Zr=Ht===0,ln=Ut>=Fe.length;if(ze.push({stride:[$t.length,Zr?0:nt,ln?0:nt],input_features:yn.input_features,is_last:ln}),ln)break;Ht+=ct}}else ze=[{stride:[Fe.length,0,0],input_features:(await this.processor(Fe)).input_features,is_last:!0}];for(const We of ze){Pe.num_frames=Math.floor(We.stride[0]/fe);const nt=await this.model.generate({inputs:We.input_features,...Pe});Z==="word"?(We.tokens=nt.sequences.tolist()[0],We.token_timestamps=nt.token_timestamps.tolist()[0].map(ct=>(0,l.round)(ct,2))):We.tokens=nt[0].tolist(),We.stride=We.stride.map(ct=>ct/ke)}const[Je,He]=this.tokenizer._decode_asr(ze,{time_precision:re,return_timestamps:Z,force_full_sequences:$e});me.push({text:Je,...He})}return Q?me[0]:me}async _call_moonshine(J,ee){const Z=!Array.isArray(J);Z&&(J=[J]);const we=this.processor.feature_extractor.config.sampling_rate,$e=await p(J,we),Ce=[];for(const Pe of $e){const Q=await this.processor(Pe),re=Math.floor(Pe.length/we)*6,fe=await this.model.generate({max_new_tokens:re,...ee,...Q}),ke=this.processor.batch_decode(fe,{skip_special_tokens:!0})[0];Ce.push({text:ke})}return Z?Ce[0]:Ce}}class V extends g{constructor(J){super(J)}async _call(J,ee={}){const Z=Array.isArray(J),we=await f(J),{pixel_values:$e}=await this.processor(we),Ce=[];for(const Pe of $e){Pe.dims=[1,...Pe.dims];const Q=await this.model.generate({inputs:Pe,...ee}),re=this.tokenizer.batch_decode(Q,{skip_special_tokens:!0}).map(fe=>({generated_text:fe.trim()}));Ce.push(re)}return Z?Ce:Ce[0]}}class G extends g{constructor(J){super(J)}async _call(J,{top_k:ee=5}={}){const Z=await f(J),{pixel_values:we}=await this.processor(Z),$e=await this.model({pixel_values:we}),Ce=this.model.config.id2label,Pe=[];for(const Q of $e.logits){const re=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)(Q.data),Q.dims),ee),fe=re[0].tolist(),je=re[1].tolist().map((me,Fe)=>({label:Ce?Ce[me]:`LABEL_${me}`,score:fe[Fe]}));Pe.push(je)}return Array.isArray(J)?Pe:Pe[0]}}class H extends g{constructor(J){super(J),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(J,{threshold:ee=.5,mask_threshold:Z=.5,overlap_mask_area_threshold:we=.8,label_ids_to_fuse:$e=null,target_sizes:Ce=null,subtask:Pe=null}={}){if(Array.isArray(J)&&J.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const re=await f(J),fe=re.map(We=>[We.height,We.width]),ke=await this.processor(re),{inputNames:je,outputNames:me}=this.model.sessions.model;if(!je.includes("pixel_values")){if(je.length!==1)throw Error(`Expected a single input name, but got ${je.length} inputs: ${je}.`);const We=je[0];if(We in ke)throw Error(`Input name ${We} already exists in the inputs.`);ke[We]=ke.pixel_values}const Fe=await this.model(ke);let ze=null;if(Pe!==null)ze=this.subtasks_mapping[Pe];else if(this.processor.image_processor){for(const[We,nt]of Object.entries(this.subtasks_mapping))if(nt in this.processor.image_processor){ze=this.processor.image_processor[nt].bind(this.processor.image_processor),Pe=We;break}}const Je=this.model.config.id2label,He=[];if(Pe)if(Pe==="panoptic"||Pe==="instance"){const We=ze(Fe,ee,Z,we,$e,Ce??fe)[0],nt=We.segmentation;for(const ct of We.segments_info){const Ht=new Uint8ClampedArray(nt.data.length);for(let $t=0;$t<nt.data.length;++$t)nt.data[$t]===ct.id&&(Ht[$t]=255);const Ut=new u.RawImage(Ht,nt.dims[1],nt.dims[0],1);He.push({score:ct.score,label:Je[ct.label_id],mask:Ut})}}else if(Pe==="semantic"){const{segmentation:We,labels:nt}=ze(Fe,Ce??fe)[0];for(const ct of nt){const Ht=new Uint8ClampedArray(We.data.length);for(let $t=0;$t<We.data.length;++$t)We.data[$t]===ct&&(Ht[$t]=255);const Ut=new u.RawImage(Ht,We.dims[1],We.dims[0],1);He.push({score:null,label:Je[ct],mask:Ut})}}else throw Error(`Subtask ${Pe} not supported.`);else{const nt=Fe[me[0]];for(let ct=0;ct<fe.length;++ct){const Ht=fe[ct],Ut=nt[ct];Ut.data.some(yn=>yn<-1e-5||yn>1+1e-5)&&Ut.sigmoid_();const $t=await u.RawImage.fromTensor(Ut.mul_(255).to("uint8")).resize(Ht[1],Ht[0]);He.push({label:null,score:null,mask:$t})}}return He}}class B extends H{constructor(J){super(J)}async _call(J,ee={}){if(Array.isArray(J)&&J.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const we=await f(J),$e=await super._call(J,ee);return we.map((Pe,Q)=>{const re=Pe.clone();return re.putAlpha($e[Q].mask),re})}}class te extends g{constructor(J){super(J)}async _call(J,ee,{hypothesis_template:Z="This is a photo of {}"}={}){const we=Array.isArray(J),$e=await f(J),Ce=ee.map(je=>Z.replace("{}",je)),Pe=this.tokenizer(Ce,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Q}=await this.processor($e),re=await this.model({...Pe,pixel_values:Q}),fe=this.model.config.model_type==="siglip"?je=>je.sigmoid().data:je=>(0,l.softmax)(je.data),ke=[];for(const je of re.logits_per_image){const Fe=[...fe(je)].map((ze,Je)=>({score:ze,label:ee[Je]}));Fe.sort((ze,Je)=>Je.score-ze.score),ke.push(Fe)}return we?ke:ke[0]}}class ae extends g{constructor(J){super(J)}async _call(J,{threshold:ee=.9,percentage:Z=!1}={}){const we=Array.isArray(J);if(we&&J.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const $e=await f(J),Ce=Z?null:$e.map(me=>[me.height,me.width]),{pixel_values:Pe,pixel_mask:Q}=await this.processor($e),re=await this.model({pixel_values:Pe,pixel_mask:Q}),fe=this.processor.image_processor.post_process_object_detection(re,ee,Ce),ke=this.model.config.id2label,je=fe.map(me=>me.boxes.map((Fe,ze)=>({score:me.scores[ze],label:ke[me.classes[ze]],box:m(Fe,!Z)})));return we?je:je[0]}}class z extends g{constructor(J){super(J)}async _call(J,ee,{threshold:Z=.1,top_k:we=null,percentage:$e=!1}={}){const Ce=Array.isArray(J),Pe=await f(J),Q=this.tokenizer(ee,{padding:!0,truncation:!0}),re=await this.processor(Pe),fe=[];for(let ke=0;ke<Pe.length;++ke){const je=Pe[ke],me=$e?null:[[je.height,je.width]],Fe=re.pixel_values[ke].unsqueeze_(0),ze=await this.model({...Q,pixel_values:Fe});let Je;if("post_process_grounded_object_detection"in this.processor){const He=this.processor.post_process_grounded_object_detection(ze,Q.input_ids,{box_threshold:Z,text_threshold:Z,target_sizes:me})[0];Je=He.boxes.map((We,nt)=>({score:He.scores[nt],label:He.labels[nt],box:m(We,!$e)}))}else{const He=this.processor.image_processor.post_process_object_detection(ze,Z,me,!0)[0];Je=He.boxes.map((We,nt)=>({score:He.scores[nt],label:ee[He.classes[nt]],box:m(We,!$e)}))}Je.sort((He,We)=>We.score-He.score),we!==null&&(Je=Je.slice(0,we)),fe.push(Je)}return Ce?fe:fe[0]}}class D extends g{constructor(J){super(J)}async _call(J,ee,Z={}){const we=(await f(J))[0],{pixel_values:$e}=await this.processor(we),Ce=`<s_docvqa><s_question>${ee}</s_question><s_answer>`,Pe=this.tokenizer(Ce,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Q=await this.model.generate({inputs:$e,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:Pe,...Z}),fe=this.tokenizer.batch_decode(Q)[0].match(/<s_answer>(.*?)<\/s_answer>/);let ke=null;return fe&&fe.length>=2&&(ke=fe[1].trim()),[{answer:ke}]}}class K extends g{constructor(ee){super(ee);ue(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=ee.vocoder??null}async _call(ee,{speaker_embeddings:Z=null}={}){return this.processor?this._call_text_to_spectrogram(ee,{speaker_embeddings:Z}):this._call_text_to_waveform(ee)}async _call_text_to_waveform(ee){const Z=this.tokenizer(ee,{padding:!0,truncation:!0}),{waveform:we}=await this.model(Z),$e=this.model.config.sampling_rate;return new c.RawAudio(we.data,$e)}async _call_text_to_spectrogram(ee,{speaker_embeddings:Z}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await i.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),(typeof Z=="string"||Z instanceof URL)&&(Z=new Float32Array(await(await fetch(Z)).arrayBuffer())),Z instanceof Float32Array)Z=new d.Tensor("float32",Z,[1,Z.length]);else if(!(Z instanceof d.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:we}=this.tokenizer(ee,{padding:!0,truncation:!0}),{waveform:$e}=await this.model.generate_speech(we,Z,{vocoder:this.vocoder}),Ce=this.processor.feature_extractor.config.sampling_rate;return new c.RawAudio($e.data,Ce)}}class oe extends g{constructor(J){super(J)}async _call(J){const ee=await f(J),Z=await this.processor(ee),we=await this.model(Z),$e=[];for(const Ce of we.reconstruction){const Pe=Ce.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");$e.push(u.RawImage.fromTensor(Pe))}return $e.length>1?$e:$e[0]}}class _e extends g{constructor(J){super(J)}async _call(J){const ee=await f(J),Z=await this.processor(ee),{predicted_depth:we}=await this.model(Z),$e=[];for(let Ce=0;Ce<ee.length;++Ce){const Pe=we[Ce],[Q,re]=Pe.dims.slice(-2),[fe,ke]=ee[Ce].size,je=(await(0,d.interpolate_4d)(Pe.view(1,1,Q,re),{size:[ke,fe],mode:"bilinear"})).view(ke,fe),me=je.min().item(),Fe=je.max().item(),ze=je.sub(me).div_(Fe-me).mul_(255).to("uint8").unsqueeze(0),Je=u.RawImage.fromTensor(ze);$e.push({predicted_depth:je,depth:Je})}return $e.length>1?$e:$e[0]}}const de=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:x,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:v,model:i.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:y,model:i.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:w,model:i.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:_,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:T,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:b,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:k,model:i.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:j,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:I,model:i.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:$,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:F,model:[i.AutoModelForSpeechSeq2Seq,i.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:K,model:[i.AutoModelForTextToWaveform,i.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:V,model:i.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:G,model:i.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:H,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:B,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:te,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ae,model:i.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:z,model:i.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:D,model:i.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:oe,model:i.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:_e,model:i.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:A,model:i.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:R,model:[i.AutoModelForImageFeatureExtraction,i.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),ve=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function Ie(ge,J=null,{progress_callback:ee=null,config:Z=null,cache_dir:we=null,local_files_only:$e=!1,revision:Ce="main",device:Pe=null,dtype:Q=null,subfolder:re="onnx",use_external_data_format:fe=null,model_file_name:ke=null,session_options:je={}}={}){ge=ve[ge]??ge;const me=de[ge.split("_",1)[0]];if(!me)throw Error(`Unsupported pipeline: ${ge}. Must be one of [${Object.keys(de)}]`);J||(J=me.default.model,console.log(`No model specified. Using default model: "${J}".`));const Fe={progress_callback:ee,config:Z,cache_dir:we,local_files_only:$e,revision:Ce,device:Pe,dtype:Q,subfolder:re,use_external_data_format:fe,model_file_name:ke,session_options:je},ze=new Map([["tokenizer",me.tokenizer],["model",me.model],["processor",me.processor]]),Je=await Se(ze,J,Fe);Je.task=ge,(0,o.dispatchCallback)(ee,{status:"ready",task:ge,model:J});const He=me.pipeline;return new He(Je)}async function Se(ge,J,ee){const Z=Object.create(null),we=[];for(const[$e,Ce]of ge.entries()){if(!Ce)continue;let Pe;Array.isArray(Ce)?Pe=new Promise(async(Q,re)=>{var ke,je;let fe;for(const me of Ce){if(me===null){Q(null);return}try{Q(await me.from_pretrained(J,ee));return}catch(Fe){if((ke=Fe.message)!=null&&ke.includes("Unsupported model type"))fe=Fe;else if((je=Fe.message)!=null&&je.includes("Could not locate file"))fe=Fe;else{re(Fe);return}}}re(fe)}):Pe=Ce.from_pretrained(J,ee),Z[$e]=Pe,we.push(Pe)}await Promise.all(we);for(const[$e,Ce]of Object.entries(Z))Z[$e]=await Ce;return Z}},"./src/tokenizers.js":(e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>Ao,AutoTokenizer:()=>Du,BartTokenizer:()=>pt,BertTokenizer:()=>jo,BlenderbotSmallTokenizer:()=>Br,BlenderbotTokenizer:()=>ut,BloomTokenizer:()=>ls,CLIPTokenizer:()=>ll,CamembertTokenizer:()=>Ue,CodeGenTokenizer:()=>cs,CodeLlamaTokenizer:()=>ci,CohereTokenizer:()=>Ua,ConvBertTokenizer:()=>le,DebertaTokenizer:()=>L,DebertaV2Tokenizer:()=>ce,DistilBertTokenizer:()=>Oe,ElectraTokenizer:()=>Dt,Ernie4_5_Tokenizer:()=>Nu,EsmTokenizer:()=>$o,FalconTokenizer:()=>ui,GPT2Tokenizer:()=>Wt,GPTNeoXTokenizer:()=>Oo,GemmaTokenizer:()=>Wi,Grok1Tokenizer:()=>Cs,HerbertTokenizer:()=>Y,LlamaTokenizer:()=>li,M2M100Tokenizer:()=>$n,MBart50Tokenizer:()=>Sr,MBartTokenizer:()=>xr,MPNetTokenizer:()=>ha,MarianTokenizer:()=>Xe,MgpstrTokenizer:()=>Iu,MobileBertTokenizer:()=>tr,NllbTokenizer:()=>za,NougatTokenizer:()=>Va,PreTrainedTokenizer:()=>Pt,Qwen2Tokenizer:()=>Ui,RoFormerTokenizer:()=>pe,RobertaTokenizer:()=>zi,SiglipTokenizer:()=>Gi,SpeechT5Tokenizer:()=>cl,SqueezeBertTokenizer:()=>Fr,T5Tokenizer:()=>At,TokenizerModel:()=>R,VitsTokenizer:()=>ul,Wav2Vec2CTCTokenizer:()=>Ye,WhisperTokenizer:()=>Vn,XLMRobertaTokenizer:()=>Vi,XLMTokenizer:()=>ht,is_chinese_char:()=>w});var n=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),a=r("./src/utils/maths.js"),o=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),c=r("./node_modules/@huggingface/jinja/dist/index.js"),d=r("./src/models/whisper/common_whisper.js");async function u(Me,U){const ne=await Promise.all([(0,s.getModelJSON)(Me,"tokenizer.json",!0,U),(0,s.getModelJSON)(Me,"tokenizer_config.json",!0,U)]);return U.legacy!==null&&(ne[1].legacy=U.legacy),ne}function f(Me,U){const ne=[];let he=0;for(const xe of Me.matchAll(U)){const Te=xe[0];he<xe.index&&ne.push(Me.slice(he,xe.index)),Te.length>0&&ne.push(Te),he=xe.index+Te.length}return he<Me.length&&ne.push(Me.slice(he)),ne}function p(Me,U=!0){if(Me.Regex!==void 0){let ne=Me.Regex.replace(/\\([#&~])/g,"$1");for(const[he,xe]of j)ne=ne.replaceAll(he,xe);return new RegExp(ne,"gu")}else if(Me.String!==void 0){const ne=(0,i.escapeRegExp)(Me.String);return new RegExp(U?ne:`(${ne})`,"gu")}else return console.warn("Unknown pattern type:",Me),null}function m(Me){return new Map(Object.entries(Me))}function g(Me){const U=Me.dims;switch(U.length){case 1:return Me.tolist();case 2:if(U[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Me.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${U.length}.`)}}function x(Me){return Me.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function v(Me){return Me.replace(new RegExp("\\p{M}","gu"),"")}function y(Me){return v(Me.toLowerCase())}function w(Me){return Me>=19968&&Me<=40959||Me>=13312&&Me<=19903||Me>=131072&&Me<=173791||Me>=173824&&Me<=177983||Me>=177984&&Me<=178207||Me>=178208&&Me<=183983||Me>=63744&&Me<=64255||Me>=194560&&Me<=195103}function b(Me,U,ne){const he=[];let xe=0;for(;xe<Me.length;){if(he.push(Me[xe]),(U.get(Me[xe])??ne)!==ne){++xe;continue}for(;++xe<Me.length&&(U.get(Me[xe])??ne)===ne;)U.get(he.at(-1))!==ne&&(he[he.length-1]+=Me[xe])}return he}function _(Me){return Me.match(/\S+/g)||[]}const T="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",M=new RegExp(`^[${T}]+$`,"gu"),k=".,!?…。，、।۔،",j=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${k}])]+`,` ?[^\\s${k}]+`]]);class A{constructor(U){this.content=U.content,this.id=U.id,this.single_word=U.single_word??!1,this.lstrip=U.lstrip??!1,this.rstrip=U.rstrip??!1,this.special=U.special??!1,this.normalized=U.normalized??null}}class R extends n.Callable{constructor(U){super(),this.config=U,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(U,...ne){switch(U.type){case"WordPiece":return new I(U);case"Unigram":return new $(U,...ne);case"BPE":return new G(U);default:if(U.vocab)return Array.isArray(U.vocab)?new $(U,...ne):Object.hasOwn(U,"continuing_subword_prefix")&&Object.hasOwn(U,"unk_token")?Object.hasOwn(U,"merges")?new G(U):new I(U):new H(U,...ne);throw new Error(`Unknown TokenizerModel type: ${U.type}`)}}_call(U){return U=this.encode(U),this.fuse_unk&&(U=b(U,this.tokens_to_ids,this.unk_token_id)),U}encode(U){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(U){return U.map(ne=>this.tokens_to_ids.get(ne)??this.unk_token_id)}convert_ids_to_tokens(U){return U.map(ne=>this.vocab[ne]??this.unk_token)}}class I extends R{constructor(U){super(U),this.tokens_to_ids=m(U.vocab),this.unk_token_id=this.tokens_to_ids.get(U.unk_token),this.unk_token=U.unk_token,this.max_input_chars_per_word=U.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[ne,he]of this.tokens_to_ids)this.vocab[he]=ne}encode(U){const ne=[];for(const he of U){const xe=[...he];if(xe.length>this.max_input_chars_per_word){ne.push(this.unk_token);continue}let Te=!1,De=0;const Qe=[];for(;De<xe.length;){let at=xe.length,it=null;for(;De<at;){let ft=xe.slice(De,at).join("");if(De>0&&(ft=this.config.continuing_subword_prefix+ft),this.tokens_to_ids.has(ft)){it=ft;break}--at}if(it===null){Te=!0;break}Qe.push(it),De=at}Te?ne.push(this.unk_token):ne.push(...Qe)}return ne}}class $ extends R{constructor(U,ne){super(U);const he=U.vocab.length;this.vocab=new Array(he),this.scores=new Array(he);for(let xe=0;xe<he;++xe)[this.vocab[xe],this.scores[xe]]=U.vocab[xe];this.unk_token_id=U.unk_id,this.unk_token=this.vocab[U.unk_id],this.tokens_to_ids=new Map(this.vocab.map((xe,Te)=>[xe,Te])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ne.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,a.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(U){const ne=U.chars,he=1;let xe=0;for(;xe<ne.length;){let Te=!1;const De=ne.slice(xe).join(""),Qe=this.trie.commonPrefixSearch(De);for(const at of Qe){const it=this.tokens_to_ids.get(at),ft=this.scores[it],Lt=(0,i.len)(at);U.insert(xe,Lt,ft,it),!Te&&Lt===he&&(Te=!0)}Te||U.insert(xe,he,this.unk_score,this.unk_token_id),xe+=he}}tokenize(U){const ne=new l.TokenLattice(U,this.bos_token_id,this.eos_token_id);return this.populateNodes(ne),ne.tokens()}encode(U){const ne=[];for(const he of U){const xe=this.tokenize(he);ne.push(...xe)}return ne}}const F=(()=>{const Me=[...Array.from({length:94},(xe,Te)=>Te+33),...Array.from({length:12},(xe,Te)=>Te+161),...Array.from({length:82},(xe,Te)=>Te+174)],U=Me.slice();let ne=0;for(let xe=0;xe<256;++xe)Me.includes(xe)||(Me.push(xe),U.push(256+ne),ne+=1);const he=U.map(xe=>String.fromCharCode(xe));return Object.fromEntries(Me.map((xe,Te)=>[xe,he[Te]]))})(),V=(0,i.reverseDictionary)(F);class G extends R{constructor(U){super(U),this.tokens_to_ids=m(U.vocab),this.unk_token_id=this.tokens_to_ids.get(U.unk_token),this.unk_token=U.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[he,xe]of this.tokens_to_ids)this.vocab[xe]=he;const ne=Array.isArray(U.merges[0]);this.merges=ne?U.merges:U.merges.map(he=>he.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((he,xe)=>[JSON.stringify(he),xe])),this.end_of_word_suffix=U.end_of_word_suffix,this.continuing_subword_suffix=U.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(U){if(U.length===0)return[];const ne=this.cache.get(U);if(ne!==void 0)return ne;const he=Array.from(U);this.end_of_word_suffix&&(he[he.length-1]+=this.end_of_word_suffix);let xe=[];if(he.length>1){const Te=new l.PriorityQueue((at,it)=>at.score<it.score);let De={token:he[0],bias:0,prev:null,next:null},Qe=De;for(let at=1;at<he.length;++at){const it={bias:at/he.length,token:he[at],prev:Qe,next:null};Qe.next=it,this._add_node(Te,Qe),Qe=it}for(;!Te.isEmpty();){const at=Te.pop();if(at.deleted||!at.next||at.next.deleted)continue;if(at.deleted=!0,at.next.deleted=!0,at.prev){const ft={...at.prev};at.prev.deleted=!0,at.prev=ft,ft.prev?ft.prev.next=ft:De=ft}const it={token:at.token+at.next.token,bias:at.bias,prev:at.prev,next:at.next.next};it.prev?(it.prev.next=it,this._add_node(Te,it.prev)):De=it,it.next&&(it.next.prev=it,this._add_node(Te,it))}for(let at=De;at!==null;at=at.next)xe.push(at.token)}else xe=he;if(this.continuing_subword_suffix)for(let Te=0;Te<xe.length-1;++Te)xe[Te]+=this.continuing_subword_suffix;return U.length<this.max_length_to_cache&&this.cache.put(U,xe),xe}_add_node(U,ne){const he=this.bpe_ranks.get(JSON.stringify([ne.token,ne.next.token]));he!==void 0&&(ne.score=he+ne.bias,U.push(ne))}encode(U){const ne=[];for(const he of U){if(this.ignore_merges&&this.tokens_to_ids.has(he)){ne.push(he);continue}const xe=this.bpe(he);for(const Te of xe)if(this.tokens_to_ids.has(Te))ne.push(Te);else if(this.byte_fallback){const De=Array.from(this.text_encoder.encode(Te)).map(Qe=>`<0x${Qe.toString(16).toUpperCase().padStart(2,"0")}>`);De.every(Qe=>this.tokens_to_ids.has(Qe))?ne.push(...De):ne.push(this.unk_token)}else ne.push(this.unk_token)}return ne}}class H extends R{constructor(U,ne){super(U),this.tokens_to_ids=m(ne.target_lang?U.vocab[ne.target_lang]:U.vocab),this.bos_token=ne.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ne.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=ne.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=ne.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[he,xe]of this.tokens_to_ids)this.vocab[xe]=he}encode(U){return U}}class B extends n.Callable{constructor(U){super(),this.config=U}static fromConfig(U){if(U===null)return null;switch(U.type){case"BertNormalizer":return new ge(U);case"Precompiled":return new ln(U);case"Sequence":return new Se(U);case"Replace":return new te(U);case"NFC":return new z(U);case"NFD":return new D(U);case"NFKC":return new K(U);case"NFKD":return new oe(U);case"Strip":return new _e(U);case"StripAccents":return new de(U);case"Lowercase":return new ve(U);case"Prepend":return new Ie(U);default:throw new Error(`Unknown Normalizer type: ${U.type}`)}}normalize(U){throw Error("normalize should be implemented in subclass.")}_call(U){return this.normalize(U)}}class te extends B{normalize(U){const ne=p(this.config.pattern);return ne===null?U:U.replaceAll(ne,this.config.content)}}class ae extends B{constructor(){super(...arguments);ue(this,"form")}normalize(ne){return ne=ne.normalize(this.form),ne}}class z extends ae{constructor(){super(...arguments);ue(this,"form","NFC")}}class D extends ae{constructor(){super(...arguments);ue(this,"form","NFD")}}class K extends ae{constructor(){super(...arguments);ue(this,"form","NFKC")}}class oe extends ae{constructor(){super(...arguments);ue(this,"form","NFKD")}}class _e extends B{normalize(U){return this.config.strip_left&&this.config.strip_right?U=U.trim():(this.config.strip_left&&(U=U.trimStart()),this.config.strip_right&&(U=U.trimEnd())),U}}class de extends B{normalize(U){return U=v(U),U}}class ve extends B{normalize(U){return U=U.toLowerCase(),U}}class Ie extends B{normalize(U){return U=this.config.prepend+U,U}}class Se extends B{constructor(U){super(U),this.normalizers=U.normalizers.map(ne=>B.fromConfig(ne))}normalize(U){return this.normalizers.reduce((ne,he)=>he.normalize(ne),U)}}class ge extends B{_tokenize_chinese_chars(U){const ne=[];for(let he=0;he<U.length;++he){const xe=U[he],Te=xe.charCodeAt(0);w(Te)?(ne.push(" "),ne.push(xe),ne.push(" ")):ne.push(xe)}return ne.join("")}stripAccents(U){return U.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(U){switch(U){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(U)}}_clean_text(U){const ne=[];for(const he of U){const xe=he.charCodeAt(0);xe===0||xe===65533||this._is_control(he)||(/^\s$/.test(he)?ne.push(" "):ne.push(he))}return ne.join("")}normalize(U){return this.config.clean_text&&(U=this._clean_text(U)),this.config.handle_chinese_chars&&(U=this._tokenize_chinese_chars(U)),this.config.lowercase?(U=U.toLowerCase(),this.config.strip_accents!==!1&&(U=this.stripAccents(U))):this.config.strip_accents&&(U=this.stripAccents(U)),U}}class J extends n.Callable{static fromConfig(U){if(U===null)return null;switch(U.type){case"BertPreTokenizer":return new ee(U);case"Sequence":return new Es(U);case"Whitespace":return new gt(U);case"WhitespaceSplit":return new er(U);case"Metaspace":return new yn(U);case"ByteLevel":return new Z(U);case"Split":return new we(U);case"Punctuation":return new $e(U);case"Digits":return new Ce(U);case"Replace":return new wr(U);default:throw new Error(`Unknown PreTokenizer type: ${U.type}`)}}pre_tokenize_text(U,ne){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(U,ne){return(Array.isArray(U)?U.map(he=>this.pre_tokenize_text(he,ne)):this.pre_tokenize_text(U,ne)).flat()}_call(U,ne){return this.pre_tokenize(U,ne)}}class ee extends J{constructor(U){super(),this.pattern=new RegExp(`[^\\s${T}]+|[${T}]`,"gu")}pre_tokenize_text(U,ne){return U.trim().match(this.pattern)||[]}}class Z extends J{constructor(U){super(),this.config=U,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=F,this.text_encoder=new TextEncoder}pre_tokenize_text(U,ne){return this.add_prefix_space&&!U.startsWith(" ")&&(U=" "+U),(this.use_regex?U.match(this.pattern)||[]:[U]).map(xe=>Array.from(this.text_encoder.encode(xe),Te=>this.byte_encoder[Te]).join(""))}}class we extends J{constructor(U){super(),this.config=U,this.pattern=p(this.config.pattern,this.config.invert)}pre_tokenize_text(U,ne){var he;return this.pattern===null?[]:this.config.invert?U.match(this.pattern)||[]:((he=this.config.behavior)==null?void 0:he.toLowerCase())==="removed"?U.split(this.pattern).filter(xe=>xe):f(U,this.pattern)}}class $e extends J{constructor(U){super(),this.config=U,this.pattern=new RegExp(`[^${T}]+|[${T}]+`,"gu")}pre_tokenize_text(U,ne){return U.match(this.pattern)||[]}}class Ce extends J{constructor(U){super(),this.config=U;const ne=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(ne,"gu")}pre_tokenize_text(U,ne){return U.match(this.pattern)||[]}}class Pe extends n.Callable{constructor(U){super(),this.config=U}static fromConfig(U){if(U===null)return null;switch(U.type){case"TemplateProcessing":return new fe(U);case"ByteLevel":return new ke(U);case"RobertaProcessing":return new re(U);case"BertProcessing":return new Q(U);case"Sequence":return new je(U);default:throw new Error(`Unknown PostProcessor type: ${U.type}`)}}post_process(U,...ne){throw Error("post_process should be implemented in subclass.")}_call(U,...ne){return this.post_process(U,...ne)}}class Q extends Pe{constructor(U){super(U),this.cls=U.cls[0],this.sep=U.sep[0]}post_process(U,ne=null,{add_special_tokens:he=!0}={}){he&&(U=(0,i.mergeArrays)([this.cls],U,[this.sep]));let xe=new Array(U.length).fill(0);if(ne!==null){const Te=he&&this instanceof re?[this.sep]:[],De=he?[this.sep]:[];U=(0,i.mergeArrays)(U,Te,ne,De),xe=(0,i.mergeArrays)(xe,new Array(ne.length+Te.length+De.length).fill(1))}return{tokens:U,token_type_ids:xe}}}class re extends Q{}class fe extends Pe{constructor(U){super(U),this.single=U.single,this.pair=U.pair}post_process(U,ne=null,{add_special_tokens:he=!0}={}){const xe=ne===null?this.single:this.pair;let Te=[],De=[];for(const Qe of xe)"SpecialToken"in Qe?he&&(Te.push(Qe.SpecialToken.id),De.push(Qe.SpecialToken.type_id)):"Sequence"in Qe&&(Qe.Sequence.id==="A"?(Te=(0,i.mergeArrays)(Te,U),De=(0,i.mergeArrays)(De,new Array(U.length).fill(Qe.Sequence.type_id))):Qe.Sequence.id==="B"&&(Te=(0,i.mergeArrays)(Te,ne),De=(0,i.mergeArrays)(De,new Array(ne.length).fill(Qe.Sequence.type_id))));return{tokens:Te,token_type_ids:De}}}class ke extends Pe{post_process(U,ne=null){return ne&&(U=(0,i.mergeArrays)(U,ne)),{tokens:U}}}class je extends Pe{constructor(U){super(U),this.processors=U.processors.map(ne=>Pe.fromConfig(ne))}post_process(U,ne=null,he={}){let xe;for(const Te of this.processors)if(Te instanceof ke)U=Te.post_process(U).tokens,ne&&(ne=Te.post_process(ne).tokens);else{const De=Te.post_process(U,ne,he);U=De.tokens,xe=De.token_type_ids}return{tokens:U,token_type_ids:xe}}}class me extends n.Callable{constructor(U){super(),this.config=U,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=U.trim_offsets}static fromConfig(U){if(U===null)return null;switch(U.type){case"WordPiece":return new We(U);case"Metaspace":return new Zr(U);case"ByteLevel":return new nt(U);case"Replace":return new Fe(U);case"ByteFallback":return new ze(U);case"Fuse":return new Je(U);case"Strip":return new He(U);case"Sequence":return new Ht(U);case"CTC":return new ct(U);case"BPEDecoder":return new Ut(U);default:throw new Error(`Unknown Decoder type: ${U.type}`)}}_call(U){return this.decode(U)}decode(U){return this.decode_chain(U).join("")}decode_chain(U){throw Error("`decode_chain` should be implemented in subclass.")}}class Fe extends me{decode_chain(U){const ne=p(this.config.pattern);return ne===null?U:U.map(he=>he.replaceAll(ne,this.config.content))}}class ze extends me{constructor(U){super(U),this.text_decoder=new TextDecoder}decode_chain(U){const ne=[];let he=[];for(const xe of U){let Te=null;if(xe.length===6&&xe.startsWith("<0x")&&xe.endsWith(">")){const De=parseInt(xe.slice(3,5),16);isNaN(De)||(Te=De)}if(Te!==null)he.push(Te);else{if(he.length>0){const De=this.text_decoder.decode(Uint8Array.from(he));ne.push(De),he=[]}ne.push(xe)}}if(he.length>0){const xe=this.text_decoder.decode(Uint8Array.from(he));ne.push(xe),he=[]}return ne}}class Je extends me{decode_chain(U){return[U.join("")]}}class He extends me{constructor(U){super(U),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(U){return U.map(ne=>{let he=0;for(let Te=0;Te<this.start&&ne[Te]===this.content;++Te){he=Te+1;continue}let xe=ne.length;for(let Te=0;Te<this.stop;++Te){const De=ne.length-Te-1;if(ne[De]===this.content){xe=De;continue}else break}return ne.slice(he,xe)})}}class We extends me{constructor(U){super(U),this.cleanup=U.cleanup}decode_chain(U){return U.map((ne,he)=>(he!==0&&(ne.startsWith(this.config.prefix)?ne=ne.replace(this.config.prefix,""):ne=" "+ne),this.cleanup&&(ne=x(ne)),ne))}}class nt extends me{constructor(U){super(U),this.byte_decoder=V,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(U){const ne=U.join(""),he=new Uint8Array([...ne].map(Te=>this.byte_decoder[Te]));return this.text_decoder.decode(he)}decode_chain(U){const ne=[];let he=[];for(const xe of U)this.added_tokens.find(Te=>Te.content===xe)!==void 0?(he.length>0&&(ne.push(this.convert_tokens_to_string(he)),he=[]),ne.push(xe)):he.push(xe);return he.length>0&&ne.push(this.convert_tokens_to_string(he)),ne}}class ct extends me{constructor(U){super(U),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(U){if(U.length===0)return"";const ne=[U[0]];for(let Te=1;Te<U.length;++Te)U[Te]!==ne.at(-1)&&ne.push(U[Te]);let xe=ne.filter(Te=>Te!==this.pad_token).join("");return this.cleanup&&(xe=x(xe).replaceAll(this.word_delimiter_token," ").trim()),xe}decode_chain(U){return[this.convert_tokens_to_string(U)]}}class Ht extends me{constructor(U){super(U),this.decoders=U.decoders.map(ne=>me.fromConfig(ne))}decode_chain(U){return this.decoders.reduce((ne,he)=>he.decode_chain(ne),U)}}class Ut extends me{constructor(U){super(U),this.suffix=this.config.suffix}decode_chain(U){return U.map((ne,he)=>ne.replaceAll(this.suffix,he===U.length-1?"":" "))}}class $t extends me{decode_chain(U){let ne="";for(let he=1;he<U.length;he+=2)ne+=U[he];return[ne]}}class yn extends J{constructor(U){super(),this.addPrefixSpace=U.add_prefix_space,this.replacement=U.replacement,this.strRep=U.str_rep||this.replacement,this.prepend_scheme=U.prepend_scheme??"always"}pre_tokenize_text(U,{section_index:ne=void 0}={}){let he=U.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!he.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&ne===0)&&(he=this.strRep+he),[he]}}class Zr extends me{constructor(U){super(U),this.addPrefixSpace=U.add_prefix_space,this.replacement=U.replacement}decode_chain(U){const ne=[];for(let he=0;he<U.length;++he){let xe=U[he].replaceAll(this.replacement," ");this.addPrefixSpace&&he==0&&xe.startsWith(" ")&&(xe=xe.substring(1)),ne.push(xe)}return ne}}class ln extends B{constructor(U){super(U),this.charsmap=U.precompiled_charsmap}normalize(U){return U=U.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),U=U.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),U.includes("～")?U=U.split("～").map(he=>he.normalize("NFKC")).join("～"):U=U.normalize("NFKC"),U}}class Es extends J{constructor(U){super(),this.tokenizers=U.pretokenizers.map(ne=>J.fromConfig(ne))}pre_tokenize_text(U,ne){return this.tokenizers.reduce((he,xe)=>xe.pre_tokenize(he,ne),[U])}}class gt extends J{constructor(U){super()}pre_tokenize_text(U,ne){return U.match(/\w+|[^\w\s]+/g)||[]}}class er extends J{constructor(U){super()}pre_tokenize_text(U,ne){return _(U)}}class wr extends J{constructor(U){super(),this.config=U,this.pattern=p(this.config.pattern),this.content=this.config.content}pre_tokenize_text(U,ne){return this.pattern===null?[U]:[U.replaceAll(this.pattern,this.config.content)]}}const ai=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function oi(Me,U,ne,he){for(const xe of Object.keys(Me)){const Te=U-Me[xe].length,De=ne(xe),Qe=new Array(Te).fill(De);Me[xe]=he==="right"?(0,i.mergeArrays)(Me[xe],Qe):(0,i.mergeArrays)(Qe,Me[xe])}}function Ws(Me,U){for(const ne of Object.keys(Me))Me[ne].length=U}class Pt extends n.Callable{constructor(ne,he){super();ue(this,"return_token_type_ids",!1);ue(this,"padding_side","right");this.config=he,this.normalizer=B.fromConfig(ne.normalizer),this.pre_tokenizer=J.fromConfig(ne.pre_tokenizer),this.model=R.fromConfig(ne.model,he),this.post_processor=Pe.fromConfig(ne.post_processor),this.decoder=me.fromConfig(ne.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const xe of ne.added_tokens){const Te=new A(xe);this.added_tokens.push(Te),this.model.tokens_to_ids.set(Te.content,Te.id),this.model.vocab[Te.id]=Te.content,Te.special&&(this.special_tokens.push(Te.content),this.all_special_ids.push(Te.id))}if(this.additional_special_tokens=he.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(xe=>xe.content)),this.added_tokens_map=new Map(this.added_tokens.map(xe=>[xe.content,xe])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=he.model_max_length,this.remove_space=he.remove_space,this.clean_up_tokenization_spaces=he.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=he.do_lowercase_and_remove_accent??!1,he.padding_side&&(this.padding_side=he.padding_side),this.add_bos_token=he.add_bos_token,this.add_eos_token=he.add_eos_token,this.legacy=!1,this.chat_template=he.chat_template??null,Array.isArray(this.chat_template)){const xe=Object.create(null);for(const{name:Te,template:De}of this.chat_template){if(typeof Te!="string"||typeof De!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');xe[Te]=De}this.chat_template=xe}this._compiled_template_cache=new Map}getToken(...ne){for(const he of ne){const xe=this.config[he];if(xe)if(typeof xe=="object"){if(xe.__type==="AddedToken")return xe.content;throw Error(`Unknown token: ${xe}`)}else return xe}return null}static async from_pretrained(ne,{progress_callback:he=null,config:xe=null,cache_dir:Te=null,local_files_only:De=!1,revision:Qe="main",legacy:at=null}={}){const it=await u(ne,{progress_callback:he,config:xe,cache_dir:Te,local_files_only:De,revision:Qe,legacy:at});return new this(...it)}_call(ne,{text_pair:he=null,add_special_tokens:xe=!0,padding:Te=!1,truncation:De=null,max_length:Qe=null,return_tensor:at=!0,return_token_type_ids:it=null}={}){const ft=Array.isArray(ne);let Lt;if(ft){if(ne.length===0)throw Error("text array must be non-empty");if(he!==null){if(Array.isArray(he)){if(ne.length!==he.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");Lt=ne.map((mr,un)=>this._encode_plus(mr,{text_pair:he[un],add_special_tokens:xe,return_token_type_ids:it}))}else Lt=ne.map(mr=>this._encode_plus(mr,{add_special_tokens:xe,return_token_type_ids:it}))}else{if(ne==null)throw Error("text may not be null or undefined");if(Array.isArray(he))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");Lt=[this._encode_plus(ne,{text_pair:he,add_special_tokens:xe,return_token_type_ids:it})]}if(Qe===null?Qe=this.model_max_length:De===null&&(Te===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Qe=this.model_max_length):Te===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),De=!0)),Te===!0&&(Qe=Math.min((0,a.max)(Lt.map(mr=>mr.input_ids.length))[0],Qe??1/0)),Qe=Math.min(Qe,this.model_max_length??1/0),Te||De)for(let mr=0;mr<Lt.length;++mr)Lt[mr].input_ids.length!==Qe&&(Lt[mr].input_ids.length>Qe?De&&Ws(Lt[mr],Qe):Te&&oi(Lt[mr],Qe,un=>un==="input_ids"?this.pad_token_id:0,this.padding_side));const br={};if(at){if(!(Te&&De)&&Lt.some(un=>{var jr;for(const Un of Object.keys(un))if(un[Un].length!==((jr=Lt[0][Un])==null?void 0:jr.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const mr=[Lt.length,Lt[0].input_ids.length];for(const un of Object.keys(Lt[0]))br[un]=new o.Tensor("int64",BigInt64Array.from(Lt.flatMap(jr=>jr[un]).map(BigInt)),mr)}else{for(const mr of Object.keys(Lt[0]))br[mr]=Lt.map(un=>un[mr]);if(!ft)for(const mr of Object.keys(br))br[mr]=br[mr][0]}return br}_encode_text(ne){if(ne===null)return null;const he=this.added_tokens_splitter.split(ne);for(let Te=0;Te<he.length;++Te){const De=this.added_tokens_map.get(he[Te]);De&&(De.lstrip&&Te>0&&(he[Te-1]=he[Te-1].trimEnd()),De.rstrip&&Te<he.length-1&&(he[Te+1]=he[Te+1].trimStart()))}return he.flatMap((Te,De)=>{if(Te.length===0)return[];if(this.added_tokens_map.has(Te))return[Te];if(this.remove_space===!0&&(Te=Te.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(Te=y(Te)),this.normalizer!==null&&(Te=this.normalizer(Te)),Te.length===0)return[];const Qe=this.pre_tokenizer!==null?this.pre_tokenizer(Te,{section_index:De}):[Te];return this.model(Qe)})}_encode_plus(ne,{text_pair:he=null,add_special_tokens:xe=!0,return_token_type_ids:Te=null}={}){const{tokens:De,token_type_ids:Qe}=this._tokenize_helper(ne,{pair:he,add_special_tokens:xe}),at=this.model.convert_tokens_to_ids(De),it={input_ids:at,attention_mask:new Array(at.length).fill(1)};return(Te??this.return_token_type_ids)&&Qe&&(it.token_type_ids=Qe),it}_tokenize_helper(ne,{pair:he=null,add_special_tokens:xe=!1}={}){const Te=this._encode_text(ne),De=this._encode_text(he);return this.post_processor?this.post_processor(Te,De,{add_special_tokens:xe}):{tokens:(0,i.mergeArrays)(Te??[],De??[])}}tokenize(ne,{pair:he=null,add_special_tokens:xe=!1}={}){return this._tokenize_helper(ne,{pair:he,add_special_tokens:xe}).tokens}encode(ne,{text_pair:he=null,add_special_tokens:xe=!0,return_token_type_ids:Te=null}={}){return this._encode_plus(ne,{text_pair:he,add_special_tokens:xe,return_token_type_ids:Te}).input_ids}batch_decode(ne,he={}){return ne instanceof o.Tensor&&(ne=ne.tolist()),ne.map(xe=>this.decode(xe,he))}decode(ne,he={}){if(ne instanceof o.Tensor&&(ne=g(ne)),!Array.isArray(ne)||ne.length===0||!(0,i.isIntegralNumber)(ne[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(ne,he)}decode_single(ne,{skip_special_tokens:he=!1,clean_up_tokenization_spaces:xe=null}){let Te=this.model.convert_ids_to_tokens(ne);he&&(Te=Te.filter(Qe=>!this.special_tokens.includes(Qe)));let De=this.decoder?this.decoder(Te):Te.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(De=De.replaceAll(this.decoder.end_of_word_suffix," "),he&&(De=De.trim())),(xe??this.clean_up_tokenization_spaces)&&(De=x(De)),De}get_chat_template({chat_template:ne=null,tools:he=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const xe=this.chat_template;if(ne!==null&&Object.hasOwn(xe,ne))ne=xe[ne];else if(ne===null)if(he!==null&&"tool_use"in xe)ne=xe.tool_use;else if("default"in xe)ne=xe.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(xe).sort()}.`)}else if(ne===null)if(this.chat_template)ne=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return ne}apply_chat_template(ne,{tools:he=null,documents:xe=null,chat_template:Te=null,add_generation_prompt:De=!1,tokenize:Qe=!0,padding:at=!1,truncation:it=!1,max_length:ft=null,return_tensor:Lt=!0,return_dict:br=!1,tokenizer_kwargs:mr={},...un}={}){if(Te=this.get_chat_template({chat_template:Te,tools:he}),typeof Te!="string")throw Error(`chat_template must be a string, but got ${typeof Te}`);let jr=this._compiled_template_cache.get(Te);jr===void 0&&(jr=new c.Template(Te),this._compiled_template_cache.set(Te,jr));const Un=Object.create(null);for(const vn of ai){const Wn=this.getToken(vn);Wn&&(Un[vn]=Wn)}const Zn=jr.render({messages:ne,add_generation_prompt:De,tools:he,documents:xe,...Un,...un});if(Qe){const vn=this._call(Zn,{add_special_tokens:!1,padding:at,truncation:it,max_length:ft,return_tensor:Lt,...mr});return br?vn:vn.input_ids}return Zn}}class jo extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class Ao extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class tr extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class Fr extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class L extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class ce extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class Y extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class le extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class pe extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class Oe extends Pt{}class Ue extends Pt{}class ht extends Pt{constructor(ne,he){super(ne,he);ue(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class Dt extends Pt{constructor(){super(...arguments);ue(this,"return_token_type_ids",!0)}}class At extends Pt{}class Wt extends Pt{}class pt extends Pt{}class xr extends Pt{constructor(U,ne){super(U,ne),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(U,ne,he){return Mi(this,U,ne,he)}}class Sr extends xr{}class zi extends Pt{}class ls extends Pt{}const cn="▁";class li extends Pt{constructor(ne,he){super(ne,he);ue(this,"padding_side","left");this.legacy=he.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new yn({replacement:cn,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(ne){if(ne===null)return null;if(this.legacy||ne.length===0)return super._encode_text(ne);let he=super._encode_text(cn+ne.replaceAll(cn," "));return he.length>1&&he[0]===cn&&this.special_tokens.includes(he[1])&&(he=he.slice(1)),he}}class ci extends Pt{}class Vi extends Pt{}class ha extends Pt{}class ui extends Pt{}class Oo extends Pt{}class $o extends Pt{}class Ui extends Pt{}class Wi extends Pt{}class Cs extends Pt{}function Mi(Me,U,ne,he){if(!("language_codes"in Me)||!Array.isArray(Me.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Me)||!(Me.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Me)||typeof Me.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const xe=he.src_lang,Te=he.tgt_lang;if(!Me.language_codes.includes(Te))throw new Error(`Target language code "${Te}" is not valid. Must be one of: {${Me.language_codes.join(", ")}}`);if(xe!==void 0){if(!Me.language_codes.includes(xe))throw new Error(`Source language code "${xe}" is not valid. Must be one of: {${Me.language_codes.join(", ")}}`);for(const De of Me.post_processor.config.single)if("SpecialToken"in De&&Me.languageRegex.test(De.SpecialToken.id)){De.SpecialToken.id=Me.lang_to_token(xe);break}}return he.forced_bos_token_id=Me.model.convert_tokens_to_ids([Me.lang_to_token(Te)])[0],Me._call(U,ne)}class za extends Pt{constructor(U,ne){super(U,ne),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(U,ne,he){return Mi(this,U,ne,he)}}class $n extends Pt{constructor(U,ne){super(U,ne),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)).map(he=>he.slice(2,-2)),this.lang_to_token=he=>`__${he}__`}_build_translation_inputs(U,ne,he){return Mi(this,U,ne,he)}}class Vn extends Pt{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(U,{return_timestamps:ne=!1,return_language:he=!1,time_precision:xe=null,force_full_sequences:Te=!0}={}){if(xe===null)throw Error("Must specify time_precision");let De=null;const Qe=ne==="word";function at(){return{language:De,timestamp:[null,null],text:""}}const it=[];let ft=at(),Lt=0;const br=this.timestamp_begin,un=br+1500;let jr=[],Un=[],Zn=!1,vn=null;const Wn=new Set(this.all_special_ids);for(const Hr of U){const Gn=Hr.tokens,Hi=Qe?Hr.token_timestamps:null;let $i=null,Wa=br;if("stride"in Hr){const[kn,_n,In]=Hr.stride;if(Lt-=_n,vn=kn-In,_n&&(Wa=_n/xe+br),In)for(let dn=Gn.length-1;dn>=0;--dn){const Ki=Number(Gn[dn]);if(Ki>=br){if($i!==null&&(Ki-br)*xe<vn)break;$i=Ki}}}let di=[],pa=[];for(let kn=0;kn<Gn.length;++kn){const _n=Number(Gn[kn]);if(Wn.has(_n)){const In=this.decode([_n]),dn=d.WHISPER_LANGUAGE_MAPPING.get(In.slice(2,-2));if(dn!==void 0){if(De!==null&&dn!==De&&!ne){jr.push(di);const Ki=this.findLongestCommonSequence(jr)[0],dl=this.decode(Ki);ft.text=dl,it.push(ft),jr=[],di=[],ft=at()}De=ft.language=dn}}else if(_n>=br&&_n<=un){const In=(_n-br)*xe+Lt,dn=(0,a.round)(In,2);if($i!==null&&_n>=$i)Zn=!0;else if(Zn||jr.length>0&&_n<Wa)Zn=!1;else if(ft.timestamp[0]===null)ft.timestamp[0]=dn;else if(dn!==ft.timestamp[0]){ft.timestamp[1]=dn,jr.push(di),Qe&&Un.push(pa);const[Ki,dl]=this.findLongestCommonSequence(jr,Un),bf=this.decode(Ki);ft.text=bf,Qe&&(ft.words=this.collateWordTimestamps(Ki,dl,De)),it.push(ft),jr=[],di=[],Un=[],pa=[],ft=at()}}else if(di.push(_n),Qe){let In=(0,a.round)(Hi[kn]+Lt,2),dn;if(kn+1<Hi.length){dn=(0,a.round)(Hi[kn+1]+Lt,2);const Ki=this.decode([_n]);M.test(Ki)&&(dn=(0,a.round)(Math.min(In+xe,dn),2))}else dn=null;pa.push([In,dn])}}if("stride"in Hr){const[kn,_n,In]=Hr.stride;Lt+=kn-In}di.length>0?(jr.push(di),Qe&&Un.push(pa)):jr.every(kn=>kn.length===0)&&(ft=at(),jr=[],di=[],Un=[],pa=[])}if(jr.length>0){if(Te&&ne)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Hr,Gn]=this.findLongestCommonSequence(jr,Un),Hi=this.decode(Hr);ft.text=Hi,Qe&&(ft.words=this.collateWordTimestamps(Hr,Gn,De)),it.push(ft)}let ki=Object.create(null);const us=it.map(Hr=>Hr.text).join("");if(ne||he){for(let Hr=0;Hr<it.length;++Hr){const Gn=it[Hr];ne||delete Gn.timestamp,he||delete Gn.language}if(Qe){const Hr=[];for(const Gn of it)for(const Hi of Gn.words)Hr.push(Hi);ki={chunks:Hr}}else ki={chunks:it}}return[us,ki]}findLongestCommonSequence(U,ne=null){let he=U[0],xe=he.length,Te=[];const De=Array.isArray(ne)&&ne.length>0;let Qe=De?[]:null,at=De?ne[0]:null;for(let it=1;it<U.length;++it){const ft=U[it];let Lt=0,br=[xe,xe,0,0];const mr=ft.length;for(let ki=1;ki<xe+mr;++ki){const us=Math.max(0,xe-ki),Hr=Math.min(xe,xe+mr-ki),Gn=he.slice(us,Hr),Hi=Math.max(0,ki-xe),$i=Math.min(mr,ki),Wa=ft.slice(Hi,$i);if(Gn.length!==Wa.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let di;De?di=Gn.filter((_n,In)=>_n===Wa[In]&&at[us+In]<=ne[it][Hi+In]).length:di=Gn.filter((_n,In)=>_n===Wa[In]).length;const pa=ki/1e4,kn=di/ki+pa;di>1&&kn>Lt&&(Lt=kn,br=[us,Hr,Hi,$i])}const[un,jr,Un,Zn]=br,vn=Math.floor((jr+un)/2),Wn=Math.floor((Zn+Un)/2);Te.push(...he.slice(0,vn)),he=ft.slice(Wn),xe=he.length,De&&(Qe.push(...at.slice(0,vn)),at=ne[it].slice(Wn))}return Te.push(...he),De?(Qe.push(...at),[Te,Qe]):[Te,[]]}collateWordTimestamps(U,ne,he){const[xe,Te,De]=this.combineTokensIntoWords(U,he),Qe=[];for(let at=0;at<xe.length;++at){const it=De[at];Qe.push({text:xe[at],timestamp:[ne[it.at(0)][0],ne[it.at(-1)][1]]})}return Qe}combineTokensIntoWords(U,ne,he=`"'“¡¿([{-`,xe=`"'.。,，!！?？:：”)]}、`){ne=ne??"english";let Te,De,Qe;return["chinese","japanese","thai","lao","myanmar"].includes(ne)?[Te,De,Qe]=this.splitTokensOnUnicode(U):[Te,De,Qe]=this.splitTokensOnSpaces(U),this.mergePunctuations(Te,De,Qe,he,xe)}decode(U,ne){let he;return ne!=null&&ne.decode_with_timestamps?(U instanceof o.Tensor&&(U=g(U)),he=this.decodeWithTimestamps(U,ne)):he=super.decode(U,ne),he}decodeWithTimestamps(U,ne){const he=(ne==null?void 0:ne.time_precision)??.02,xe=Array.from(this.all_special_ids).at(-1)+1;let Te=[[]];for(let De of U)if(De=Number(De),De>=xe){const Qe=((De-xe)*he).toFixed(2);Te.push(`<|${Qe}|>`),Te.push([])}else Te[Te.length-1].push(De);return Te=Te.map(De=>typeof De=="string"?De:super.decode(De,ne)),Te.join("")}splitTokensOnUnicode(U){const ne=this.decode(U,{decode_with_timestamps:!0}),he="�",xe=[],Te=[],De=[];let Qe=[],at=[],it=0;for(let ft=0;ft<U.length;++ft){const Lt=U[ft];Qe.push(Lt),at.push(ft);const br=this.decode(Qe,{decode_with_timestamps:!0});(!br.includes(he)||ne[it+br.indexOf(he)]===he)&&(xe.push(br),Te.push(Qe),De.push(at),Qe=[],at=[],it+=br.length)}return[xe,Te,De]}splitTokensOnSpaces(U){const[ne,he,xe]=this.splitTokensOnUnicode(U),Te=[],De=[],Qe=[],at=new RegExp(`^[${T}]$`,"gu");for(let it=0;it<ne.length;++it){const ft=ne[it],Lt=he[it],br=xe[it],mr=Lt[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),un=ft.startsWith(" "),jr=ft.trim(),Un=at.test(jr);if(mr||un||Un||Te.length===0)Te.push(ft),De.push(Lt),Qe.push(br);else{const Zn=Te.length-1;Te[Zn]+=ft,De[Zn].push(...Lt),Qe[Zn].push(...br)}}return[Te,De,Qe]}mergePunctuations(U,ne,he,xe,Te){const De=structuredClone(U),Qe=structuredClone(ne),at=structuredClone(he);let it=De.length-2,ft=De.length-1;for(;it>=0;)De[it].startsWith(" ")&&xe.includes(De[it].trim())?(De[ft]=De[it]+De[ft],Qe[ft]=(0,i.mergeArrays)(Qe[it],Qe[ft]),at[ft]=(0,i.mergeArrays)(at[it],at[ft]),De[it]="",Qe[it]=[],at[it]=[]):ft=it,--it;for(it=0,ft=1;ft<De.length;)!De[it].endsWith(" ")&&Te.includes(De[ft])?(De[it]+=De[ft],Qe[it]=(0,i.mergeArrays)(Qe[it],Qe[ft]),at[it]=(0,i.mergeArrays)(at[it],at[ft]),De[ft]="",Qe[ft]=[],at[ft]=[]):it=ft,++ft;return[De.filter(Lt=>Lt),Qe.filter(Lt=>Lt.length>0),at.filter(Lt=>Lt.length>0)]}}class cs extends Pt{}class ll extends Pt{}class Gi extends Pt{}class Xe extends Pt{constructor(U,ne){super(U,ne),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(he=>this.languageRegex.test(he)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(U){if(U===null)return null;const[ne,...he]=U.trim().split(this.languageRegex);if(he.length===0)return super._encode_text(ne);if(he.length===2){const[xe,Te]=he;return this.supported_language_codes.includes(xe)||console.warn(`Unsupported language code "${xe}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,i.mergeArrays)([xe],super._encode_text(Te))}}}class Ye extends Pt{}class ut extends Pt{}class Br extends Pt{}class cl extends Pt{}class Va extends Pt{}class ul extends Pt{constructor(U,ne){super(U,ne),this.decoder=new $t({})}}class Ua extends Pt{}class Iu extends Pt{}class Nu extends Pt{}class Du{static async from_pretrained(U,{progress_callback:ne=null,config:he=null,cache_dir:xe=null,local_files_only:Te=!1,revision:De="main",legacy:Qe=null}={}){var br;const[at,it]=await u(U,{progress_callback:ne,config:he,cache_dir:xe,local_files_only:Te,revision:De,legacy:Qe}),ft=((br=it.tokenizer_class)==null?void 0:br.replace(/Fast$/,""))??"PreTrainedTokenizer";let Lt=this.TOKENIZER_CLASS_MAPPING[ft];return Lt||(console.warn(`Unknown tokenizer class "${ft}", attempting to construct from base class.`),Lt=Pt),new Lt(at,it)}}ue(Du,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer:At,DistilBertTokenizer:Oe,CamembertTokenizer:Ue,DebertaTokenizer:L,DebertaV2Tokenizer:ce,BertTokenizer:jo,HerbertTokenizer:Y,ConvBertTokenizer:le,RoFormerTokenizer:pe,XLMTokenizer:ht,ElectraTokenizer:Dt,MobileBertTokenizer:tr,SqueezeBertTokenizer:Fr,AlbertTokenizer:Ao,GPT2Tokenizer:Wt,BartTokenizer:pt,MBartTokenizer:xr,MBart50Tokenizer:Sr,RobertaTokenizer:zi,WhisperTokenizer:Vn,CodeGenTokenizer:cs,CLIPTokenizer:ll,SiglipTokenizer:Gi,MarianTokenizer:Xe,BloomTokenizer:ls,NllbTokenizer:za,M2M100Tokenizer:$n,LlamaTokenizer:li,CodeLlamaTokenizer:ci,XLMRobertaTokenizer:Vi,MPNetTokenizer:ha,FalconTokenizer:ui,GPTNeoXTokenizer:Oo,EsmTokenizer:$o,Wav2Vec2CTCTokenizer:Ye,BlenderbotTokenizer:ut,BlenderbotSmallTokenizer:Br,SpeechT5Tokenizer:cl,NougatTokenizer:Va,VitsTokenizer:ul,Qwen2Tokenizer:Ui,GemmaTokenizer:Wi,Grok1Tokenizer:Cs,CohereTokenizer:Ua,MgpstrTokenizer:Iu,Ernie4_5_Tokenizer:Nu,PreTrainedTokenizer:Pt})},"./src/utils/audio.js":(e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>I,hamming:()=>f,hanning:()=>u,mel_filter_bank:()=>w,read_audio:()=>c,spectrogram:()=>k,window_function:()=>j});var n=r("./src/utils/hub.js"),i=r("./src/utils/maths.js"),s=r("./src/utils/core.js"),a=r("./src/env.js"),o=r("./src/utils/tensor.js"),l=r("?7992");async function c($,F){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const V=await(await(0,n.getFile)($)).arrayBuffer(),G=new AudioContext({sampleRate:F});typeof F>"u"&&console.warn(`No sampling rate provided, using default of ${G.sampleRate}Hz.`);const H=await G.decodeAudioData(V);let B;if(H.numberOfChannels===2){const te=Math.sqrt(2),ae=H.getChannelData(0),z=H.getChannelData(1);B=new Float32Array(ae.length);for(let D=0;D<H.length;++D)B[D]=te*(ae[D]+z[D])/2}else B=H.getChannelData(0);return B}function d($,F){if($<1)return new Float64Array;if($===1)return new Float64Array([1]);const V=1-F,G=2*Math.PI/($-1),H=new Float64Array($);for(let B=0;B<$;++B)H[B]=F-V*Math.cos(B*G);return H}function u($){return d($,.5)}function f($){return d($,.54)}const p={htk:$=>2595*Math.log10(1+$/700),kaldi:$=>1127*Math.log(1+$/700),slaney:($,F=1e3,V=15,G=27/Math.log(6.4))=>$>=F?V+Math.log($/F)*G:3*$/200};function m($,F="htk"){const V=p[F];if(!V)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof $=="number"?V($):$.map(G=>V(G))}const g={htk:$=>700*(10**($/2595)-1),kaldi:$=>700*(Math.exp($/1127)-1),slaney:($,F=1e3,V=15,G=Math.log(6.4)/27)=>$>=V?F*Math.exp(G*($-V)):200*$/3};function x($,F="htk"){const V=g[F];if(!V)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof $=="number"?V($):$.map(G=>V(G))}function v($,F){const V=Float64Array.from({length:F.length-1},(te,ae)=>F[ae+1]-F[ae]),G=Array.from({length:$.length},()=>new Array(F.length));for(let te=0;te<$.length;++te){const ae=G[te];for(let z=0;z<F.length;++z)ae[z]=F[z]-$[te]}const H=F.length-2,B=Array.from({length:H},()=>new Array($.length));for(let te=0;te<$.length;++te){const ae=G[te];for(let z=0;z<H;++z){const D=-ae[z]/V[z],K=ae[z+2]/V[z+1];B[z][te]=Math.max(0,Math.min(D,K))}}return B}function y($,F,V){const G=(F-$)/(V-1);return Float64Array.from({length:V},(H,B)=>$+G*B)}function w($,F,V,G,H,B=null,te="htk",ae=!1){if(B!==null&&B!=="slaney")throw new Error('norm must be one of null or "slaney"');if($<2)throw new Error(`Require num_frequency_bins: ${$} >= 2`);if(V>G)throw new Error(`Require min_frequency: ${V} <= max_frequency: ${G}`);const z=m(V,te),D=m(G,te),K=y(z,D,F+2);let oe=x(K,te),_e;if(ae){const ve=H/(($-1)*2);_e=m(Float64Array.from({length:$},(Ie,Se)=>Se*ve),te),oe=K}else _e=y(0,Math.floor(H/2),$);const de=v(_e,oe);if(B!==null&&B==="slaney")for(let ve=0;ve<F;++ve){const Ie=de[ve],Se=2/(oe[ve+2]-oe[ve]);for(let ge=0;ge<$;++ge)Ie[ge]*=Se}return de}function b($,F,V){const G=new $.constructor($.length+F+V),H=$.length-1;for(let B=0;B<$.length;++B)G[F+B]=$[B];for(let B=1;B<=F;++B)G[F-B]=$[(0,s.calculateReflectOffset)(B,H)];for(let B=1;B<=V;++B)G[H+F+B]=$[(0,s.calculateReflectOffset)(H-B,H)];return G}function _($,F,V,G,H){if(V<=0)throw new Error("reference must be greater than zero");if(G<=0)throw new Error("min_value must be greater than zero");V=Math.max(G,V);const B=Math.log10(V);for(let te=0;te<$.length;++te)$[te]=F*Math.log10(Math.max(G,$[te])-B);if(H!==null){if(H<=0)throw new Error("db_range must be greater than zero");const te=(0,i.max)($)[0]-H;for(let ae=0;ae<$.length;++ae)$[ae]=Math.max($[ae],te)}return $}function T($,F=1,V=1e-5,G=null){return _($,20,F,V,G)}function M($,F=1,V=1e-10,G=null){return _($,10,F,V,G)}async function k($,F,V,G,{fft_length:H=null,power:B=1,center:te=!0,pad_mode:ae="reflect",onesided:z=!0,preemphasis:D=null,preemphasis_htk_flavor:K=!0,mel_filters:oe=null,mel_floor:_e=1e-10,log_mel:de=null,reference:ve=1,min_value:Ie=1e-10,db_range:Se=null,remove_dc_offset:ge=null,min_num_frames:J=null,max_num_frames:ee=null,do_pad:Z=!0,transpose:we=!1}={}){const $e=F.length;if(H===null&&(H=V),V>H)throw Error(`frame_length (${V}) may not be larger than fft_length (${H})`);if($e!==V)throw new Error(`Length of the window (${$e}) must equal frame_length (${V})`);if(G<=0)throw new Error("hop_length must be greater than zero");if(B===null&&oe!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!K)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(te){if(ae!=="reflect")throw new Error(`pad_mode="${ae}" not implemented yet.`);const He=Math.floor((H-1)/2)+1;$=b($,He,He)}let Ce=Math.floor(1+Math.floor(($.length-V)/G));J!==null&&Ce<J&&(Ce=J);const Pe=z?Math.floor(H/2)+1:H;let Q=Ce,re=Ce;ee!==null&&(ee>Ce?Z&&(re=ee):re=Q=ee);const fe=new i.FFT(H),ke=new Float64Array(H),je=new Float64Array(fe.outputBufferSize),me=new Float32Array(Pe*re);for(let He=0;He<Q;++He){const We=He*G,nt=Math.min($.length-We,V);nt!==V&&ke.fill(0,0,V);for(let ct=0;ct<nt;++ct)ke[ct]=$[We+ct];if(ge){let ct=0;for(let Ut=0;Ut<nt;++Ut)ct+=ke[Ut];const Ht=ct/nt;for(let Ut=0;Ut<nt;++Ut)ke[Ut]-=Ht}if(D!==null){for(let ct=nt-1;ct>=1;--ct)ke[ct]-=D*ke[ct-1];ke[0]*=1-D}for(let ct=0;ct<F.length;++ct)ke[ct]*=F[ct];fe.realTransform(je,ke);for(let ct=0;ct<Pe;++ct){const Ht=ct<<1;me[ct*re+He]=je[Ht]**2+je[Ht+1]**2}}if(B!==null&&B!==2){const He=B/2;for(let We=0;We<me.length;++We)me[We]**=He}const Fe=oe.length;let ze=await(0,o.matmul)(new o.Tensor("float32",oe.flat(),[Fe,Pe]),new o.Tensor("float32",me,[Pe,re]));we&&(ze=ze.transpose(1,0));const Je=ze.data;for(let He=0;He<Je.length;++He)Je[He]=Math.max(_e,Je[He]);if(B!==null&&de!==null){const He=Math.min(Je.length,Q*Fe);switch(de){case"log":for(let We=0;We<He;++We)Je[We]=Math.log(Je[We]);break;case"log10":for(let We=0;We<He;++We)Je[We]=Math.log10(Je[We]);break;case"dB":if(B===1)T(Je,ve,Ie,Se);else if(B===2)M(Je,ve,Ie,Se);else throw new Error(`Cannot use log_mel option '${de}' with power ${B}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${de}'`)}}return ze}function j($,F,{periodic:V=!0,frame_length:G=null,center:H=!0}={}){const B=V?$+1:$;let te;switch(F){case"boxcar":te=new Float64Array(B).fill(1);break;case"hann":case"hann_window":te=u(B);break;case"hamming":te=f(B);break;case"povey":te=u(B).map(ae=>Math.pow(ae,.85));break;default:throw new Error(`Unknown window type ${F}.`)}if(V&&(te=te.subarray(0,$)),G===null)return te;if($>G)throw new Error(`Length of the window (${$}) may not be larger than frame_length (${G})`);return te}function A($,F){let V=44;const G=new ArrayBuffer(V+$.length*4),H=new DataView(G);R(H,0,"RIFF"),H.setUint32(4,36+$.length*4,!0),R(H,8,"WAVE"),R(H,12,"fmt "),H.setUint32(16,16,!0),H.setUint16(20,3,!0),H.setUint16(22,1,!0),H.setUint32(24,F,!0),H.setUint32(28,F*4,!0),H.setUint16(32,4,!0),H.setUint16(34,32,!0),R(H,36,"data"),H.setUint32(40,$.length*4,!0);for(let B=0;B<$.length;++B,V+=4)H.setFloat32(V,$[B],!0);return G}function R($,F,V){for(let G=0;G<V.length;++G)$.setUint8(F+G,V.charCodeAt(G))}class I{constructor(F,V){this.audio=F,this.sampling_rate=V}toWav(){return A(this.audio,this.sampling_rate)}toBlob(){const F=this.toWav();return new Blob([F],{type:"audio/wav"})}async save(F){let V;if(a.apis.IS_BROWSER_ENV){if(a.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");V=s.saveBlob}else if(a.apis.IS_FS_AVAILABLE)V=async(G,H)=>{let B=await H.arrayBuffer();l.writeFileSync(G,Buffer.from(B))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await V(F,this.toBlob())}}},"./src/utils/constants.js":(e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>i,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>c,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>a,PROCESSOR_NAME:()=>o});const n="https://github.com/huggingface/transformers.js/issues/new/choose",i="config.json",s="preprocessor_config.json",a=s,o="processor_config.json",l="chat_template.jinja",c="generation_config.json"},"./src/utils/core.js":(e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>c,calculateReflectOffset:()=>p,count:()=>v,dispatchCallback:()=>n,escapeRegExp:()=>s,isIntegralNumber:()=>o,isNullishDimension:()=>l,isTypedArray:()=>a,len:()=>x,mergeArrays:()=>u,pick:()=>g,pop:()=>d,product:()=>f,reverseDictionary:()=>i,saveBlob:()=>m});function n(y,w){y&&y(w)}function i(y){return Object.fromEntries(Object.entries(y).map(([w,b])=>[b,w]))}function s(y){return y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(y){var w,b,_;return((_=(b=(w=y==null?void 0:y.prototype)==null?void 0:w.__proto__)==null?void 0:b.constructor)==null?void 0:_.name)==="TypedArray"}function o(y){return Number.isInteger(y)||typeof y=="bigint"}function l(y){return y==null||y===-1}function c(y){const w=[];let b=y;for(;Array.isArray(b);)w.push(b.length),b=b[0];return w}function d(y,w,b=void 0){const _=y[w];if(_!==void 0)return delete y[w],_;if(b===void 0)throw Error(`Key ${w} does not exist in object.`);return b}function u(...y){return Array.prototype.concat.apply([],y)}function f(...y){return y.reduce((w,b)=>w.flatMap(_=>b.map(T=>[_,T])))}function p(y,w){return Math.abs((y+w)%(2*w)-w)}function m(y,w){const b=URL.createObjectURL(w),_=document.createElement("a");_.href=b,_.download=y,_.click(),_.remove(),URL.revokeObjectURL(b)}function g(y,w){return Object.assign({},...w.map(b=>{if(y[b]!==void 0)return{[b]:y[b]}}))}function x(y){let w=0;for(const b of y)++w;return w}function v(y,w){let b=0;for(const _ of y)_===w&&++b;return b}},"./src/utils/data-structures.js":(e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>i,DictionarySplitter:()=>l,LRUCache:()=>c,PriorityQueue:()=>n,TokenLattice:()=>a});class n{constructor(u=(p,m)=>p>m,f=1/0){this._heap=[],this._comparator=u,this._maxSize=f}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...u){return this.extend(u)}extend(u){for(const f of u)if(this.size<this._maxSize)this._heap.push(f),this._siftUp();else{const p=this._smallest();this._comparator(f,this._heap[p])&&(this._heap[p]=f,this._siftUpFrom(p))}return this.size}pop(){const u=this.peek(),f=this.size-1;return f>0&&this._swap(0,f),this._heap.pop(),this._siftDown(),u}replace(u){const f=this.peek();return this._heap[0]=u,this._siftDown(),f}_parent(u){return(u+1>>>1)-1}_left(u){return(u<<1)+1}_right(u){return u+1<<1}_greater(u,f){return this._comparator(this._heap[u],this._heap[f])}_swap(u,f){const p=this._heap[u];this._heap[u]=this._heap[f],this._heap[f]=p}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(u){for(;u>0&&this._greater(u,this._parent(u));)this._swap(u,this._parent(u)),u=this._parent(u)}_siftDown(){let u=0;for(;this._left(u)<this.size&&this._greater(this._left(u),u)||this._right(u)<this.size&&this._greater(this._right(u),u);){const f=this._right(u)<this.size&&this._greater(this._right(u),this._left(u))?this._right(u):this._left(u);this._swap(u,f),u=f}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class i{constructor(){this.root=s.default()}extend(u){for(const f of u)this.push(f)}push(u){let f=this.root;for(const p of u){let m=f.children.get(p);m===void 0&&(m=s.default(),f.children.set(p,m)),f=m}f.isLeaf=!0}*commonPrefixSearch(u){let f=this.root;if(f===void 0)return;let p="";for(const m of u){if(p+=m,f=f.children.get(m),f===void 0)return;f.isLeaf&&(yield p)}}}class s{constructor(u,f){this.isLeaf=u,this.children=f}static default(){return new s(!1,new Map)}}class a{constructor(u,f,p){this.chars=Array.from(u),this.len=this.chars.length,this.bosTokenId=f,this.eosTokenId=p,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const m=new o(this.bosTokenId,0,0,0,0),g=new o(this.eosTokenId,1,this.len,0,0);this.nodes.push(m.clone()),this.nodes.push(g.clone()),this.beginNodes[this.len].push(g),this.endNodes[0].push(m)}insert(u,f,p,m){const g=this.nodes.length,x=new o(m,g,u,f,p);this.beginNodes[u].push(x),this.endNodes[u+f].push(x),this.nodes.push(x)}viterbi(){const u=this.len;let f=0;for(;f<=u;){if(this.beginNodes[f].length==0)return[];for(let v of this.beginNodes[f]){v.prev=null;let y=0,w=null;for(let b of this.endNodes[f]){const _=b.backtraceScore+v.score;(w===null||_>y)&&(w=b.clone(),y=_)}if(w!==null)v.prev=w,v.backtraceScore=y;else return[]}++f}const p=[],g=this.beginNodes[u][0].prev;if(g===null)return[];let x=g.clone();for(;x.prev!==null;)p.push(x.clone()),x=x.clone().prev.clone();return p.reverse(),p}piece(u){return this.chars.slice(u.pos,u.pos+u.length).join("")}tokens(){return this.viterbi().map(f=>this.piece(f))}tokenIds(){return this.viterbi().map(f=>f.tokenId)}}class o{constructor(u,f,p,m,g){this.tokenId=u,this.nodeId=f,this.pos=p,this.length=m,this.score=g,this.prev=null,this.backtraceScore=0}clone(){const u=new o(this.tokenId,this.nodeId,this.pos,this.length,this.score);return u.prev=this.prev,u.backtraceScore=this.backtraceScore,u}}class l{constructor(u){this.trie=this._buildTrie(u)}_buildTrie(u){var p;const f=Object.create(null);for(const m of u){let g=f;for(let x=0;x<m.length;++x)g=g[p=m[x]]??(g[p]=Object.create(null));g.end=m}return f}split(u){const f=[],p=u.length;let m=0,g=0;for(;g<p;){let x=this.trie,v=null,y=g;for(;y<p&&(x=x[u[y]]);)x.end&&(v=x.end),++y;v?(g>m&&f.push(u.slice(m,g)),f.push(v),g+=v.length,m=g):++g}return m<p&&f.push(u.slice(m)),f}}class c{constructor(u){this.capacity=u,this.cache=new Map}get(u){if(!this.cache.has(u))return;const f=this.cache.get(u);return this.cache.delete(u),this.cache.set(u,f),f}put(u,f){this.cache.has(u)&&this.cache.delete(u),this.cache.set(u,f),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}},"./src/utils/devices.js":(e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})},"./src/utils/dtypes.js":(e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>a,DEFAULT_DEVICE_DTYPE_MAPPING:()=>o,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>s});var n=r("./src/env.js"),i=r("./src/utils/devices.js");const s=function(){let c;return async function(){if(c===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)c=!1;else try{c=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{c=!1}return c}}(),a=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),o=Object.freeze({[i.DEVICE_TYPES.wasm]:a.q8}),l=Object.freeze({[a.fp32]:"",[a.fp16]:"_fp16",[a.int8]:"_int8",[a.uint8]:"_uint8",[a.q8]:"_quantized",[a.q4]:"_q4",[a.q4f16]:"_q4f16",[a.bnb4]:"_bnb4"})},"./src/utils/generic.js":(e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let i=function(...s){return i._call(...s)};return Object.setPrototypeOf(i,new.target.prototype)}_call(...i){throw Error("Must implement _call method in subclass")}}},"./src/utils/hub.js":(e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>o,getFile:()=>p,getModelFile:()=>y,getModelJSON:()=>b,getModelText:()=>w});var n=r("?7992"),i=r("?5af5"),s=r("./src/env.js"),a=r("./src/utils/core.js");const o=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class c{constructor(k){if(this.filePath=k,this.headers=new Headers,this.exists=n.existsSync(k),this.exists){this.status=200,this.statusText="OK";let j=n.statSync(k);this.headers.set("content-length",j.size.toString()),this.updateContentType();const A=n.createReadStream(k);this.body=new ReadableStream({start(R){A.on("data",I=>R.enqueue(I)),A.on("end",()=>R.close()),A.on("error",I=>R.error(I))},cancel(){A.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const k=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[k]??"application/octet-stream")}clone(){let k=new c(this.filePath);return k.exists=this.exists,k.status=this.status,k.statusText=this.statusText,k.headers=new Headers(this.headers),k}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const k=await n.promises.readFile(this.filePath);return new Blob([k],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function d(M,k=null,j=null){let A;try{A=new URL(M)}catch{return!1}return!(k&&!k.includes(A.protocol)||j&&!j.includes(A.hostname))}const u=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function f(M){return!(!u.test(M)||M.includes("..")||M.includes("--")||M.endsWith(".git")||M.endsWith(".ipynb"))}async function p(M){var k;if(s.env.useFS&&!d(M,["http:","https:","blob:"]))return new c(M instanceof URL?M.protocol==="file:"?M.pathname:M.toString():M);if(typeof process<"u"&&((k=process==null?void 0:process.release)==null?void 0:k.name)==="node"){const j=!!(yl!=null&&yl.TESTING_REMOTELY),A=s.env.version,R=new Headers;if(R.set("User-Agent",`transformers.js/${A}; is_ci/${j};`),d(M,["http:","https:"],["huggingface.co","hf.co"])){const $=(yl==null?void 0:yl.HF_TOKEN)??(yl==null?void 0:yl.HF_ACCESS_TOKEN);$&&R.set("Authorization",`Bearer ${$}`)}return fetch(M,{headers:R})}else return fetch(M)}const m={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function g(M,k,j){if(!j)return null;const A=m[M]??`Error (${M}) occurred while trying to load file`;throw Error(`${A}: "${k}".`)}class x{constructor(k){this.path=k}async match(k){let j=i.join(this.path,k),A=new c(j);if(A.exists)return A}async put(k,j,A=void 0){let R=i.join(this.path,k);try{const I=j.headers.get("Content-Length"),$=parseInt(I??"0");let F=0;await n.promises.mkdir(i.dirname(R),{recursive:!0});const V=n.createWriteStream(R),G=j.body.getReader();for(;;){const{done:H,value:B}=await G.read();if(H)break;await new Promise((ae,z)=>{V.write(B,D=>{if(D){z(D);return}ae()})}),F+=B.length;const te=$?F/$*100:0;A==null||A({progress:te,loaded:F,total:$})}V.close()}catch(I){try{await n.promises.unlink(R)}catch{}throw I}}}async function v(M,...k){for(let j of k)try{let A=await M.match(j);if(A)return A}catch{continue}}async function y(M,k,j=!0,A={},R=!1){if(!s.env.allowLocalModels){if(A.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,a.dispatchCallback)(A.progress_callback,{status:"initiate",name:M,file:k});let I;if(!I&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");I=s.env.customCache}if(!I&&s.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{I=await caches.open("transformers-cache")}catch(_e){console.warn("An error occurred while opening the browser cache:",_e)}}if(!I&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");I=new x(A.cache_dir??s.env.cacheDir)}const $=A.revision??"main",F=T(M,k),V=f(M),G=V?T(s.env.localModelPath,F):F,H=T(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",M).replaceAll("{revision}",encodeURIComponent($)),k);let B;const te=I instanceof x?$==="main"?F:T(M,$,k):H;let ae=!1,z;I&&(z=await v(I,G,te));const D=z!==void 0;if(z===void 0){if(s.env.allowLocalModels)if(d(F,["http:","https:"])){if(A.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${F}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${F}.`)}else try{z=await p(G),B=G}catch(de){console.warn(`Unable to load from local path "${G}": "${de}"`)}if(z===void 0||z.status===404){if(A.local_files_only||!s.env.allowRemoteModels){if(j)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${G}".`);return null}if(!V)throw Error(`Local file missing at "${G}" and download aborted due to invalid model ID "${M}".`);if(z=await p(H),z.status!==200)return g(z.status,H,j);B=te}ae=I&&typeof Response<"u"&&z instanceof Response&&z.status===200}(0,a.dispatchCallback)(A.progress_callback,{status:"download",name:M,file:k});let K;if(!(s.apis.IS_NODE_ENV&&R)){let _e;A.progress_callback?D&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(_e=new Uint8Array(await z.arrayBuffer()),(0,a.dispatchCallback)(A.progress_callback,{status:"progress",name:M,file:k,progress:100,loaded:_e.length,total:_e.length})):_e=await _(z,de=>{(0,a.dispatchCallback)(A.progress_callback,{status:"progress",name:M,file:k,...de})}):_e=new Uint8Array(await z.arrayBuffer()),K=_e}if(ae&&B&&await I.match(B)===void 0&&(K?await I.put(B,new Response(K,{headers:z.headers})).catch(_e=>{console.warn(`Unable to add response to browser cache: ${_e}.`)}):await I.put(B,z,A.progress_callback)),(0,a.dispatchCallback)(A.progress_callback,{status:"done",name:M,file:k}),K){if(!s.apis.IS_NODE_ENV&&R)throw new Error("Cannot return path in a browser environment.");return K}if(z instanceof c)return z.filePath;const oe=await(I==null?void 0:I.match(B));if(oe instanceof c)return oe.filePath;if(oe instanceof Response)return new Uint8Array(await oe.arrayBuffer());if(typeof oe=="string")return oe;throw new Error("Unable to get model file path or buffer.")}async function w(M,k,j=!0,A={}){const R=await y(M,k,j,A,!1);return R===null?null:new TextDecoder("utf-8").decode(R)}async function b(M,k,j=!0,A={}){const R=await w(M,k,j,A);return R===null?{}:JSON.parse(R)}async function _(M,k){const j=M.headers.get("Content-Length");j===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let A=parseInt(j??"0"),R=new Uint8Array(A),I=0;const $=M.body.getReader();async function F(){const{done:V,value:G}=await $.read();if(V)return;const H=I+G.length;if(H>A){A=H;const te=new Uint8Array(A);te.set(R),R=te}R.set(G,I),I=H;const B=I/A*100;return k({progress:B,loaded:I,total:A}),F()}return await F(),R}function T(...M){return M=M.map((k,j)=>(j&&(k=k.replace(new RegExp("^/"),"")),j!==M.length-1&&(k=k.replace(new RegExp("/$"),"")),k)),M.join("/")}},"./src/utils/image.js":(e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>m,load_image:()=>g});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js"),s=r("./src/env.js"),a=r("./src/utils/tensor.js"),o=r("?2b25");let l,c,d;const u=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(u)l=(x,v)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(x,v)},d=self.createImageBitmap,c=self.ImageData;else if(o)d=async x=>{const y=(await x.metadata()).channels,{data:w,info:b}=await x.rotate().raw().toBuffer({resolveWithObject:!0}),_=new m(new Uint8ClampedArray(w),b.width,b.height,b.channels);return y!==void 0&&y!==b.channels&&_.convert(y),_};else throw new Error("Unable to load image processing library.");const f={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},p=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class m{constructor(v,y,w,b){this.data=v,this.width=y,this.height=w,this.channels=b}get size(){return[this.width,this.height]}static async read(v){if(v instanceof m)return v;if(typeof v=="string"||v instanceof URL)return await this.fromURL(v);if(v instanceof Blob)return await this.fromBlob(v);if(typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&v instanceof OffscreenCanvas)return this.fromCanvas(v);throw new Error(`Unsupported input type: ${typeof v}`)}static fromCanvas(v){if(!u)throw new Error("fromCanvas() is only supported in browser environments.");const w=v.getContext("2d").getImageData(0,0,v.width,v.height).data;return new m(w,v.width,v.height,4)}static async fromURL(v){const y=await(0,i.getFile)(v);if(y.status!==200)throw new Error(`Unable to read image from "${v}" (${y.status} ${y.statusText})`);const w=await y.blob();return this.fromBlob(w)}static async fromBlob(v){if(u){const y=await d(v),w=l(y.width,y.height).getContext("2d");return w.drawImage(y,0,0),new this(w.getImageData(0,0,y.width,y.height).data,y.width,y.height,4)}else{const y=o(await v.arrayBuffer());return await d(y)}}static fromTensor(v,y="CHW"){if(v.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${v.dims.length} dimensions.`);if(y==="CHW")v=v.transpose(1,2,0);else if(y!=="HWC")throw new Error(`Unsupported channel format: ${y}`);if(!(v.data instanceof Uint8ClampedArray||v.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${v.type}`);switch(v.dims[2]){case 1:case 2:case 3:case 4:return new m(v.data,v.dims[1],v.dims[0],v.dims[2]);default:throw new Error(`Unsupported number of channels: ${v.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const v=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let y=0,w=0;y<this.data.length;y+=this.channels){const b=this.data[y],_=this.data[y+1],T=this.data[y+2];v[w++]=Math.round(.2989*b+.587*_+.114*T)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(v,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const v=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let y=0,w=0;y<this.data.length;++y)v[w++]=this.data[y],v[w++]=this.data[y],v[w++]=this.data[y];break;case 4:for(let y=0,w=0;y<this.data.length;y+=4)v[w++]=this.data[y],v[w++]=this.data[y+1],v[w++]=this.data[y+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(v,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const v=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let y=0,w=0;y<this.data.length;++y)v[w++]=this.data[y],v[w++]=this.data[y],v[w++]=this.data[y],v[w++]=255;break;case 3:for(let y=0,w=0;y<this.data.length;y+=3)v[w++]=this.data[y],v[w++]=this.data[y+1],v[w++]=this.data[y+2],v[w++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(v,this.width,this.height,4)}putAlpha(v){if(v.width!==this.width||v.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${v.width}x${v.height}`);if(v.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${v.channels}`);const y=this.data,w=v.data,b=this.width*this.height;if(this.channels===3){const _=new Uint8ClampedArray(b*4);for(let T=0,M=0,k=0;T<b;++T)_[k++]=y[M++],_[k++]=y[M++],_[k++]=y[M++],_[k++]=w[T];return this._update(_,this.width,this.height,4)}else if(this.channels===4){for(let _=0;_<b;++_)y[4*_+3]=w[_];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(v,y,{resample:w=2}={}){if(this.width===v&&this.height===y)return this;let b=f[w]??w;const _=(0,n.isNullishDimension)(v),T=(0,n.isNullishDimension)(y);if(_&&T)return this;if(_?v=y/this.height*this.width:T&&(y=v/this.width*this.height),u){const M=this.channels,k=this.toCanvas(),j=l(v,y).getContext("2d");return j.drawImage(k,0,0,v,y),new m(j.getImageData(0,0,v,y).data,v,y,4).convert(M)}else{let M=this.toSharp();switch(b){case"box":case"hamming":(b==="box"||b==="hamming")&&(console.warn(`Resampling method ${b} is not yet supported. Using bilinear instead.`),b="bilinear");case"nearest":case"bilinear":case"bicubic":M=M.affine([v/this.width,0,0,y/this.height],{interpolator:b});break;case"lanczos":M=M.resize({width:v,height:y,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${b} is not supported.`)}return await d(M)}}async pad([v,y,w,b]){if(v=Math.max(v,0),y=Math.max(y,0),w=Math.max(w,0),b=Math.max(b,0),v===0&&y===0&&w===0&&b===0)return this;if(u){const _=this.channels,T=this.toCanvas(),M=this.width+v+y,k=this.height+w+b,j=l(M,k).getContext("2d");return j.drawImage(T,0,0,this.width,this.height,v,w,this.width,this.height),new m(j.getImageData(0,0,M,k).data,M,k,4).convert(_)}else{const _=this.toSharp().extend({left:v,right:y,top:w,bottom:b});return await d(_)}}async crop([v,y,w,b]){if(v=Math.max(v,0),y=Math.max(y,0),w=Math.min(w,this.width-1),b=Math.min(b,this.height-1),v===0&&y===0&&w===this.width-1&&b===this.height-1)return this;const _=w-v+1,T=b-y+1;if(u){const M=this.channels,k=this.toCanvas(),j=l(_,T).getContext("2d");return j.drawImage(k,v,y,_,T,0,0,_,T),new m(j.getImageData(0,0,_,T).data,_,T,4).convert(M)}else{const M=this.toSharp().extract({left:v,top:y,width:_,height:T});return await d(M)}}async center_crop(v,y){if(this.width===v&&this.height===y)return this;const w=(this.width-v)/2,b=(this.height-y)/2;if(u){const _=this.channels,T=this.toCanvas(),M=l(v,y).getContext("2d");let k=0,j=0,A=0,R=0;return w>=0?k=w:A=-w,b>=0?j=b:R=-b,M.drawImage(T,k,j,v,y,A,R,v,y),new m(M.getImageData(0,0,v,y).data,v,y,4).convert(_)}else{let _=this.toSharp();if(w>=0&&b>=0)_=_.extract({left:Math.floor(w),top:Math.floor(b),width:v,height:y});else if(w<=0&&b<=0){const T=Math.floor(-b),M=Math.floor(-w);_=_.extend({top:T,left:M,right:v-this.width-M,bottom:y-this.height-T})}else{let T=[0,0],M=0;b<0?(T[0]=Math.floor(-b),T[1]=y-this.height-T[0]):M=Math.floor(b);let k=[0,0],j=0;w<0?(k[0]=Math.floor(-w),k[1]=v-this.width-k[0]):j=Math.floor(w),_=_.extend({top:T[0],bottom:T[1],left:k[0],right:k[1]}).extract({left:j,top:M,width:v,height:y})}return await d(_)}}async toBlob(v="image/png",y=1){if(!u)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:v,quality:y})}toTensor(v="CHW"){let y=new a.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(v!=="HWC")if(v==="CHW")y=y.permute(2,0,1);else throw new Error(`Unsupported channel format: ${v}`);return y}toCanvas(){if(!u)throw new Error("toCanvas() is only supported in browser environments.");const v=this.clone().rgba(),y=l(v.width,v.height),w=new c(v.data,v.width,v.height);return y.getContext("2d").putImageData(w,0,0),y}split(){const{data:v,width:y,height:w,channels:b}=this,_=v.constructor,T=v.length/b,M=Array.from({length:b},()=>new _(T));for(let k=0;k<T;++k){const j=b*k;for(let A=0;A<b;++A)M[A][k]=v[j+A]}return M.map(k=>new m(k,y,w,1))}_update(v,y,w,b=null){return this.data=v,this.width=y,this.height=w,b!==null&&(this.channels=b),this}clone(){return new m(this.data.slice(),this.width,this.height,this.channels)}convert(v){if(this.channels===v)return this;switch(v){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(v){if(u){if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const y=v.split(".").pop().toLowerCase(),w=p.get(y)??"image/png",b=await this.toBlob(w);(0,n.saveBlob)(v,b)}else{if(s.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(v);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(u)throw new Error("toSharp() is only supported in server-side environments.");return o(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const g=m.read.bind(m)},"./src/utils/maths.js":(e,t,r)=>{r.r(t),r.d(t,{FFT:()=>g,bankers_round:()=>y,cos_sim:()=>l,dot:()=>o,dynamic_time_warping:()=>w,interpolate_data:()=>n,log_softmax:()=>a,magnitude:()=>c,max:()=>u,medianFilter:()=>x,min:()=>d,permute_data:()=>i,round:()=>v,softmax:()=>s});function n(b,[_,T,M],[k,j],A="bilinear",R=!1){const I=j/M,$=k/T,F=new b.constructor(k*j*_),V=T*M,G=k*j;for(let H=0;H<k;++H)for(let B=0;B<j;++B){const te=H*j+B,ae=(B+.5)/I-.5,z=(H+.5)/$-.5;let D=Math.floor(ae),K=Math.floor(z);const oe=Math.min(D+1,M-1),_e=Math.min(K+1,T-1);D=Math.max(D,0),K=Math.max(K,0);const de=ae-D,ve=z-K,Ie=(1-de)*(1-ve),Se=de*(1-ve),ge=(1-de)*ve,J=de*ve,ee=K*M,Z=_e*M,we=ee+D,$e=ee+oe,Ce=Z+D,Pe=Z+oe;for(let Q=0;Q<_;++Q){const re=Q*V;F[Q*G+te]=Ie*b[re+we]+Se*b[re+$e]+ge*b[re+Ce]+J*b[re+Pe]}}return F}function i(b,_,T){const M=new Array(T.length),k=new Array(T.length);for(let R=T.length-1,I=1;R>=0;--R)k[R]=I,M[R]=_[T[R]],I*=M[R];const j=T.map((R,I)=>k[T.indexOf(I)]),A=new b.constructor(b.length);for(let R=0;R<b.length;++R){let I=0;for(let $=_.length-1,F=R;$>=0;--$)I+=F%_[$]*j[$],F=Math.floor(F/_[$]);A[I]=b[R]}return[A,M]}function s(b){const _=u(b)[0],T=b.map(j=>Math.exp(j-_)),M=T.reduce((j,A)=>j+A,0);return T.map(j=>j/M)}function a(b){const _=u(b)[0];let T=0;for(let j=0;j<b.length;++j)T+=Math.exp(b[j]-_);const M=Math.log(T);return b.map(j=>j-_-M)}function o(b,_){let T=0;for(let M=0;M<b.length;++M)T+=b[M]*_[M];return T}function l(b,_){const T=o(b,_),M=c(b),k=c(_);return T/(M*k)}function c(b){return Math.sqrt(b.reduce((_,T)=>_+T*T,0))}function d(b){if(b.length===0)throw Error("Array must not be empty");let _=b[0],T=0;for(let M=1;M<b.length;++M)b[M]<_&&(_=b[M],T=M);return[_,T]}function u(b){if(b.length===0)throw Error("Array must not be empty");let _=b[0],T=0;for(let M=1;M<b.length;++M)b[M]>_&&(_=b[M],T=M);return[_,T]}function f(b){return b>0&&(b&b-1)===0}class p{constructor(_){if(this.size=_|0,this.size<=1||!f(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=_<<1,this.table=new Float64Array(this.size*2);for(let M=0;M<this.table.length;M+=2){const k=Math.PI*M/this.size;this.table[M]=Math.cos(k),this.table[M+1]=-Math.sin(k)}let T=0;for(let M=1;this.size>M;M<<=1)++T;this._width=T%2===0?T-1:T,this._bitrev=new Int32Array(1<<this._width);for(let M=0;M<this._bitrev.length;++M){this._bitrev[M]=0;for(let k=0;k<this._width;k+=2){const j=this._width-k-2;this._bitrev[M]|=(M>>>k&3)<<j}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(_,T){const M=T||new Array(_.length>>>1);for(let k=0;k<_.length;k+=2)M[k>>>1]=_[k];return M}toComplexArray(_,T){const M=T||this.createComplexArray();for(let k=0;k<M.length;k+=2)M[k]=_[k>>>1],M[k+1]=0;return M}transform(_,T){if(_===T)throw new Error("Input and output buffers must be different");this._transform4(_,T,1)}realTransform(_,T){if(_===T)throw new Error("Input and output buffers must be different");this._realTransform4(_,T,1)}inverseTransform(_,T){if(_===T)throw new Error("Input and output buffers must be different");this._transform4(_,T,-1);for(let M=0;M<_.length;++M)_[M]/=this.size}_transform4(_,T,M){const k=this._csize;let A=1<<this._width,R=k/A<<1,I,$;const F=this._bitrev;if(R===4)for(I=0,$=0;I<k;I+=R,++$){const G=F[$];this._singleTransform2(T,_,I,G,A)}else for(I=0,$=0;I<k;I+=R,++$){const G=F[$];this._singleTransform4(T,_,I,G,A,M)}const V=this.table;for(A>>=2;A>=2;A>>=2){R=k/A<<1;const G=R>>>2;for(I=0;I<k;I+=R){const H=I+G-1;for(let B=I,te=0;B<H;B+=2,te+=A){const ae=B,z=ae+G,D=z+G,K=D+G,oe=_[ae],_e=_[ae+1],de=_[z],ve=_[z+1],Ie=_[D],Se=_[D+1],ge=_[K],J=_[K+1],ee=V[te],Z=M*V[te+1],we=de*ee-ve*Z,$e=de*Z+ve*ee,Ce=V[2*te],Pe=M*V[2*te+1],Q=Ie*Ce-Se*Pe,re=Ie*Pe+Se*Ce,fe=V[3*te],ke=M*V[3*te+1],je=ge*fe-J*ke,me=ge*ke+J*fe,Fe=oe+Q,ze=_e+re,Je=oe-Q,He=_e-re,We=we+je,nt=$e+me,ct=M*(we-je),Ht=M*($e-me);_[ae]=Fe+We,_[ae+1]=ze+nt,_[z]=Je+Ht,_[z+1]=He-ct,_[D]=Fe-We,_[D+1]=ze-nt,_[K]=Je-Ht,_[K+1]=He+ct}}}}_singleTransform2(_,T,M,k,j){const A=_[k],R=_[k+1],I=_[k+j],$=_[k+j+1];T[M]=A+I,T[M+1]=R+$,T[M+2]=A-I,T[M+3]=R-$}_singleTransform4(_,T,M,k,j,A){const R=j*2,I=j*3,$=_[k],F=_[k+1],V=_[k+j],G=_[k+j+1],H=_[k+R],B=_[k+R+1],te=_[k+I],ae=_[k+I+1],z=$+H,D=F+B,K=$-H,oe=F-B,_e=V+te,de=G+ae,ve=A*(V-te),Ie=A*(G-ae);T[M]=z+_e,T[M+1]=D+de,T[M+2]=K+Ie,T[M+3]=oe-ve,T[M+4]=z-_e,T[M+5]=D-de,T[M+6]=K-Ie,T[M+7]=oe+ve}_realTransform4(_,T,M){const k=this._csize;let A=1<<this._width,R=k/A<<1,I,$;const F=this._bitrev;if(R===4)for(I=0,$=0;I<k;I+=R,++$){const H=F[$];this._singleRealTransform2(T,_,I,H>>>1,A>>>1)}else for(I=0,$=0;I<k;I+=R,++$){const H=F[$];this._singleRealTransform4(T,_,I,H>>>1,A>>>1,M)}const V=this.table;for(A>>=2;A>=2;A>>=2){R=k/A<<1;const H=R>>>1,B=H>>>1,te=B>>>1;for(I=0;I<k;I+=R)for(let ae=0,z=0;ae<=te;ae+=2,z+=A){const D=I+ae,K=D+B,oe=K+B,_e=oe+B,de=_[D],ve=_[D+1],Ie=_[K],Se=_[K+1],ge=_[oe],J=_[oe+1],ee=_[_e],Z=_[_e+1],we=de,$e=ve,Ce=V[z],Pe=M*V[z+1],Q=Ie*Ce-Se*Pe,re=Ie*Pe+Se*Ce,fe=V[2*z],ke=M*V[2*z+1],je=ge*fe-J*ke,me=ge*ke+J*fe,Fe=V[3*z],ze=M*V[3*z+1],Je=ee*Fe-Z*ze,He=ee*ze+Z*Fe,We=we+je,nt=$e+me,ct=we-je,Ht=$e-me,Ut=Q+Je,$t=re+He,yn=M*(Q-Je),Zr=M*(re-He);if(_[D]=We+Ut,_[D+1]=nt+$t,_[K]=ct+Zr,_[K+1]=Ht-yn,ae===0){_[oe]=We-Ut,_[oe+1]=nt-$t;continue}if(ae===te)continue;const ln=I+B-ae,Es=I+H-ae;_[ln]=ct-M*Zr,_[ln+1]=-Ht-M*yn,_[Es]=We-M*Ut,_[Es+1]=-nt+M*$t}}const G=k>>>1;for(let H=2;H<G;H+=2)_[k-H]=_[H],_[k-H+1]=-_[H+1]}_singleRealTransform2(_,T,M,k,j){const A=_[k],R=_[k+j];T[M]=A+R,T[M+1]=0,T[M+2]=A-R,T[M+3]=0}_singleRealTransform4(_,T,M,k,j,A){const R=j*2,I=j*3,$=_[k],F=_[k+j],V=_[k+R],G=_[k+I],H=$+V,B=$-V,te=F+G,ae=A*(F-G);T[M]=H+te,T[M+1]=0,T[M+2]=B,T[M+3]=-ae,T[M+4]=H-te,T[M+5]=0,T[M+6]=B,T[M+7]=ae}}class m{constructor(_){const T=2*(_-1),M=2*(2*_-1),k=2**Math.ceil(Math.log2(M));this.bufferSize=k,this._a=T;const j=new Float64Array(M),A=new Float64Array(k);this._chirpBuffer=new Float64Array(k),this._buffer1=new Float64Array(k),this._buffer2=new Float64Array(k),this._outBuffer1=new Float64Array(k),this._outBuffer2=new Float64Array(k);const R=-2*Math.PI/_,I=Math.cos(R),$=Math.sin(R);for(let F=0;F<M>>1;++F){const V=(F+1-_)**2/2,G=Math.sqrt(I**2+$**2)**V,H=V*Math.atan2($,I),B=2*F;j[B]=G*Math.cos(H),j[B+1]=G*Math.sin(H),A[B]=j[B],A[B+1]=-j[B+1]}this._slicedChirpBuffer=j.subarray(T,M),this._f=new p(k>>1),this._f.transform(this._chirpBuffer,A)}_transform(_,T,M){const k=this._buffer1,j=this._buffer2,A=this._outBuffer1,R=this._outBuffer2,I=this._chirpBuffer,$=this._slicedChirpBuffer,F=this._a;if(M)for(let V=0;V<$.length;V+=2){const G=V+1,H=V>>1,B=T[H];k[V]=B*$[V],k[G]=B*$[G]}else for(let V=0;V<$.length;V+=2){const G=V+1;k[V]=T[V]*$[V]-T[G]*$[G],k[G]=T[V]*$[G]+T[G]*$[V]}this._f.transform(A,k);for(let V=0;V<I.length;V+=2){const G=V+1;j[V]=A[V]*I[V]-A[G]*I[G],j[G]=A[V]*I[G]+A[G]*I[V]}this._f.inverseTransform(R,j);for(let V=0;V<R.length;V+=2){const G=R[V+F],H=R[V+F+1],B=$[V],te=$[V+1];_[V]=G*B-H*te,_[V+1]=G*te+H*B}}transform(_,T){this._transform(_,T,!1)}realTransform(_,T){this._transform(_,T,!0)}}class g{constructor(_){this.fft_length=_,this.isPowerOfTwo=f(_),this.isPowerOfTwo?(this.fft=new p(_),this.outputBufferSize=2*_):(this.fft=new m(_),this.outputBufferSize=this.fft.bufferSize)}realTransform(_,T){this.fft.realTransform(_,T)}transform(_,T){this.fft.transform(_,T)}}function x(b,_){if(_%2===0||_<=0)throw new Error("Window size must be a positive odd number");const T=new b.constructor(b.length),M=new b.constructor(_),k=Math.floor(_/2);for(let j=0;j<b.length;++j){let A=0;for(let R=-k;R<=k;++R){let I=j+R;I<0?I=Math.abs(I):I>=b.length&&(I=2*(b.length-1)-I),M[A++]=b[I]}M.sort(),T[j]=M[k]}return T}function v(b,_){const T=Math.pow(10,_);return Math.round(b*T)/T}function y(b){const _=Math.round(b);return Math.abs(b)%1===.5?_%2===0?_:_-1:_}function w(b){const _=b.length,T=b[0].length,M=[_+1,T+1],k=Array.from({length:M[0]},()=>Array(M[1]).fill(1/0));k[0][0]=0;const j=Array.from({length:M[0]},()=>Array(M[1]).fill(-1));for(let F=1;F<M[1];++F)for(let V=1;V<M[0];++V){const G=k[V-1][F-1],H=k[V-1][F],B=k[V][F-1];let te,ae;G<H&&G<B?(te=G,ae=0):H<G&&H<B?(te=H,ae=1):(te=B,ae=2),k[V][F]=b[V-1][F-1]+te,j[V][F]=ae}for(let F=0;F<M[1];++F)j[0][F]=2;for(let F=0;F<M[0];++F)j[F][0]=1;let A=_,R=T,I=[],$=[];for(;A>0||R>0;)switch(I.push(A-1),$.push(R-1),j[A][R]){case 0:--A,--R;break;case 1:--A;break;case 2:--R;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${A}, ${R}]. Please file a bug report.`)}return I.reverse(),$.reverse(),[I,$]}},"./src/utils/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>a,Tensor:()=>o,cat:()=>T,full:()=>$,full_like:()=>F,interpolate:()=>d,interpolate_4d:()=>u,layer_norm:()=>y,matmul:()=>f,mean:()=>A,mean_pooling:()=>v,ones:()=>V,ones_like:()=>G,permute:()=>c,quantize_embeddings:()=>ae,rand:()=>te,rfft:()=>p,slice:()=>x,stack:()=>M,std_mean:()=>j,topk:()=>m,zeros:()=>H,zeros_like:()=>B});var n=r("./src/utils/maths.js"),i=r("./src/backends/onnx.js"),s=r("./src/ops/registry.js");const a=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class o{constructor(...D){ue(this,"ort_tensor");return(0,i.isONNXTensor)(D[0])?this.ort_tensor=D[0]:this.ort_tensor=new i.Tensor(D[0],D[1],D[2]),new Proxy(this,{get:(K,oe)=>{if(typeof oe=="string"){let _e=Number(oe);if(Number.isInteger(_e))return K._getitem(_e)}return K[oe]},set:(K,oe,_e)=>K[oe]=_e})}get dims(){return this.ort_tensor.dims}set dims(D){this.ort_tensor.dims=D}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[D,...K]=this.dims;if(K.length>0){const oe=K.reduce((_e,de)=>_e*de);for(let _e=0;_e<D;++_e)yield this._subarray(_e,oe,K)}else yield*this.data}_getitem(D){const[K,...oe]=this.dims;if(D=_(D,K),oe.length>0){const _e=oe.reduce((de,ve)=>de*ve);return this._subarray(D,_e,oe)}else return new o(this.type,[this.data[D]],oe)}indexOf(D){const K=this.data;for(let oe=0;oe<K.length;++oe)if(K[oe]==D)return oe;return-1}_subarray(D,K,oe){const _e=D*K,de=(D+1)*K,ve="subarray"in this.data?this.data.subarray(_e,de):this.data.slice(_e,de);return new o(this.type,ve,oe)}item(){const D=this.data;if(D.length!==1)throw new Error(`a Tensor with ${D.length} elements cannot be converted to Scalar`);return D[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=1/(1+Math.exp(-D[K]));return this}map(D){return this.clone().map_(D)}map_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]=D(K[oe],oe,K);return this}mul(D){return this.clone().mul_(D)}mul_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]*=D;return this}div(D){return this.clone().div_(D)}div_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]/=D;return this}add(D){return this.clone().add_(D)}add_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]+=D;return this}sub(D){return this.clone().sub_(D)}sub_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]-=D;return this}clone(){return new o(this.type,this.data.slice(),this.dims.slice())}slice(...D){const K=[],oe=[];for(let ge=0;ge<this.dims.length;++ge){let J=D[ge];if(J==null)oe.push([0,this.dims[ge]]),K.push(this.dims[ge]);else if(typeof J=="number")J=_(J,this.dims[ge],ge),oe.push([J,J+1]);else if(Array.isArray(J)&&J.length===2){let[ee,Z]=J;if(ee=ee===null?0:_(ee,this.dims[ge],ge,!1),Z=Z===null?this.dims[ge]:_(Z,this.dims[ge],ge,!1),ee>Z)throw new Error(`Invalid slice: ${J}`);const we=[Math.max(ee,0),Math.min(Z,this.dims[ge])];oe.push(we),K.push(we[1]-we[0])}else throw new Error(`Invalid slice: ${J}`)}const _e=oe.map(([ge,J])=>J-ge),de=_e.reduce((ge,J)=>ge*J),ve=this.data,Ie=new ve.constructor(de),Se=this.stride();for(let ge=0;ge<de;++ge){let J=0;for(let ee=_e.length-1,Z=ge;ee>=0;--ee){const we=_e[ee];J+=(Z%we+oe[ee][0])*Se[ee],Z=Math.floor(Z/we)}Ie[ge]=ve[J]}return new o(this.type,Ie,K)}permute(...D){return c(this,D)}transpose(...D){return this.permute(...D)}sum(D=null,K=!1){return this.norm(1,D,K)}norm(D="fro",K=null,oe=!1){if(D==="fro")D=2;else if(typeof D=="string")throw Error(`Unsupported norm: ${D}`);const _e=this.data,de=(ge,J)=>ge+J**D;if(K===null){const ge=_e.reduce(de,0)**(1/D);return new o(this.type,[ge],[])}const[ve,Ie,Se]=k(de,this,K,oe);if(D!==1)for(let ge=0;ge<Ie.length;++ge)Ie[ge]=Ie[ge]**(1/D);return new o(ve,Ie,Se)}normalize_(D=2,K=1){K=_(K,this.dims.length);const oe=this.norm(D,K,!0),_e=this.data,de=oe.data;for(let ve=0;ve<_e.length;++ve){let Ie=0;for(let Se=this.dims.length-1,ge=ve,J=1;Se>=0;--Se){const ee=this.dims[Se];if(Se!==K){const Z=ge%ee;Ie+=Z*J,J*=this.dims[Se]}ge=Math.floor(ge/ee)}_e[ve]/=de[Ie]}return this}normalize(D=2,K=1){return this.clone().normalize_(D,K)}stride(){return R(this.dims)}squeeze(D=null){return new o(this.type,this.data,w(this.dims,D))}squeeze_(D=null){return this.dims=w(this.dims,D),this}unsqueeze(D=null){return new o(this.type,this.data,b(this.dims,D))}unsqueeze_(D=null){return this.dims=b(this.dims,D),this}flatten_(D=0,K=-1){K=(K+this.dims.length)%this.dims.length;let oe=this.dims.slice(0,D),_e=this.dims.slice(D,K+1),de=this.dims.slice(K+1);return this.dims=[...oe,_e.reduce((ve,Ie)=>ve*Ie,1),...de],this}flatten(D=0,K=-1){return this.clone().flatten_(D,K)}view(...D){let K=-1;for(let _e=0;_e<D.length;++_e)if(D[_e]===-1){if(K!==-1)throw new Error("Only one dimension can be inferred");K=_e}const oe=this.data;if(K!==-1){const _e=D.reduce((de,ve,Ie)=>Ie!==K?de*ve:de,1);D[K]=oe.length/_e}return new o(this.type,oe,D)}neg_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=-D[K];return this}neg(){return this.clone().neg_()}gt(D){const K=new Uint8Array(this.data.length),oe=this.data;for(let _e=0;_e<oe.length;++_e)K[_e]=oe[_e]>D?1:0;return new o("bool",K,this.dims)}lt(D){const K=new Uint8Array(this.data.length),oe=this.data;for(let _e=0;_e<oe.length;++_e)K[_e]=oe[_e]<D?1:0;return new o("bool",K,this.dims)}clamp_(D,K){const oe=this.data;for(let _e=0;_e<oe.length;++_e)oe[_e]=Math.min(Math.max(oe[_e],D),K);return this}clamp(D,K){return this.clone().clamp_(D,K)}round_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=Math.round(D[K]);return this}round(){return this.clone().round_()}mean(D=null,K=!1){return A(this,D,K)}min(D=null,K=!1){if(D===null){const ve=(0,n.min)(this.data)[0];return new o(this.type,[ve],[])}const[oe,_e,de]=k((ve,Ie)=>Math.min(ve,Ie),this,D,K,1/0);return new o(oe,_e,de)}max(D=null,K=!1){if(D===null){const ve=(0,n.max)(this.data)[0];return new o(this.type,[ve],[])}const[oe,_e,de]=k((ve,Ie)=>Math.max(ve,Ie),this,D,K,-1/0);return new o(oe,_e,de)}argmin(D=null,K=!1){if(D!==null)throw new Error("`dim !== null` not yet implemented.");const oe=(0,n.min)(this.data)[1];return new o("int64",[BigInt(oe)],[])}argmax(D=null,K=!1){if(D!==null)throw new Error("`dim !== null` not yet implemented.");const oe=(0,n.max)(this.data)[1];return new o("int64",[BigInt(oe)],[])}to(D){if(this.type===D)return this;if(!a.hasOwnProperty(D))throw new Error(`Unsupported type: ${D}`);let K;const oe=["int64","uint64"].includes(this.type),_e=["int64","uint64"].includes(D);return oe&&!_e?K=Number:!oe&&_e&&(K=BigInt),new o(D,a[D].from(this.data,K),this.dims)}}function l(z,D){const K=z.length,oe=D.reduce((de,ve)=>de*ve);if(K!==oe)throw Error(`cannot reshape array of size ${K} into shape (${D})`);let _e=z;for(let de=D.length-1;de>=0;de--)_e=_e.reduce((ve,Ie)=>{let Se=ve[ve.length-1];return Se.length<D[de]?Se.push(Ie):ve.push([Ie]),ve},[[]]);return _e[0]}function c(z,D){const[K,oe]=(0,n.permute_data)(z.data,z.dims,D);return new o(z.type,K,oe)}function d(z,[D,K],oe="bilinear",_e=!1){const de=z.dims.at(-3)??1,ve=z.dims.at(-2),Ie=z.dims.at(-1);let Se=(0,n.interpolate_data)(z.data,[de,ve,Ie],[D,K],oe,_e);return new o(z.type,Se,[de,D,K])}async function u(z,{size:D=null,mode:K="bilinear"}={}){if(z.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!D)throw new Error("`interpolate_4d` requires a `size` argument.");let oe;if(D.length===2)oe=[...z.dims.slice(0,2),...D];else if(D.length===3)oe=[z.dims[0],...D];else if(D.length===4)oe=D;else throw new Error("`size` must be of length 2, 3, or 4.");let _e;if(K==="nearest")_e=await s.TensorOpRegistry.nearest_interpolate_4d;else if(K==="bilinear")_e=await s.TensorOpRegistry.bilinear_interpolate_4d;else if(K==="bicubic")_e=await s.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${K}`);const de=new o("int64",new BigInt64Array(oe.map(BigInt)),[oe.length]);return await _e({x:z,s:de})}async function f(z,D){return await(await s.TensorOpRegistry.matmul)({a:z,b:D})}async function p(z,D){return await(await s.TensorOpRegistry.rfft)({x:z,a:D})}async function m(z,D){const K=await s.TensorOpRegistry.top_k;return D==null?D=z.dims.at(-1):D=Math.min(D,z.dims.at(-1)),await K({x:z,k:new o("int64",[BigInt(D)],[1])})}const g=z=>new o("int64",z,[z.length]);async function x(z,D,K,oe,_e){return await(await s.TensorOpRegistry.slice)({x:z,s:g(D),e:g(K),a:g(oe),t:g(_e??new Array(oe.length).fill(1))})}function v(z,D){const K=z.data,oe=D.data,_e=[z.dims[0],z.dims[2]],de=new K.constructor(_e[0]*_e[1]),[ve,Ie,Se]=z.dims;let ge=0;for(let J=0;J<ve;++J){const ee=J*Se*Ie;for(let Z=0;Z<Se;++Z){let we=0,$e=0;const Ce=J*Ie,Pe=ee+Z;for(let re=0;re<Ie;++re){const fe=Number(oe[Ce+re]);$e+=fe,we+=K[Pe+re*Se]*fe}const Q=we/$e;de[ge++]=Q}}return new o(z.type,de,_e)}function y(z,D,{eps:K=1e-5}={}){if(z.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[oe,_e]=z.dims;if(D.length!==1&&D[0]!==_e)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[de,ve]=j(z,1,0,!0),Ie=de.data,Se=ve.data,ge=z.data,J=new ge.constructor(ge.length);for(let ee=0;ee<oe;++ee){const Z=ee*_e;for(let we=0;we<_e;++we){const $e=Z+we;J[$e]=(ge[$e]-Se[ee])/(Ie[ee]+K)}}return new o(z.type,J,z.dims)}function w(z,D){return z=z.slice(),D===null?z=z.filter(K=>K!==1):typeof D=="number"?z[D]===1&&z.splice(D,1):Array.isArray(D)&&(z=z.filter((K,oe)=>K!==1||!D.includes(oe))),z}function b(z,D){return D=_(D,z.length+1),z=z.slice(),z.splice(D,0,1),z}function _(z,D,K=null,oe=!0){if(z<-D||z>=D){if(oe)throw new Error(`IndexError: index ${z} is out of bounds for dimension${K===null?"":" "+K} with size ${D}`);return z<-D?0:D}return z<0&&(z=(z%D+D)%D),z}function T(z,D=0){D=_(D,z[0].dims.length);const K=z[0].dims.slice();K[D]=z.reduce((ve,Ie)=>ve+Ie.dims[D],0);const oe=K.reduce((ve,Ie)=>ve*Ie,1),_e=new z[0].data.constructor(oe),de=z[0].type;if(D===0){let ve=0;for(const Ie of z){const Se=Ie.data;_e.set(Se,ve),ve+=Se.length}}else{let ve=0;for(let Ie=0;Ie<z.length;++Ie){const{data:Se,dims:ge}=z[Ie];for(let J=0;J<Se.length;++J){let ee=0;for(let Z=ge.length-1,we=J,$e=1;Z>=0;--Z){const Ce=ge[Z];let Pe=we%Ce;Z===D&&(Pe+=ve),ee+=Pe*$e,$e*=K[Z],we=Math.floor(we/Ce)}_e[ee]=Se[J]}ve+=ge[D]}}return new o(de,_e,K)}function M(z,D=0){return T(z.map(K=>K.unsqueeze(D)),D)}function k(z,D,K=null,oe=!1,_e=null){const de=D.data,ve=D.dims;K=_(K,ve.length);const Ie=ve.slice();Ie[K]=1;const Se=new de.constructor(de.length/ve[K]);_e!==null&&Se.fill(_e);for(let ge=0;ge<de.length;++ge){let J=0;for(let ee=ve.length-1,Z=ge,we=1;ee>=0;--ee){const $e=ve[ee];if(ee!==K){const Ce=Z%$e;J+=Ce*we,we*=Ie[ee]}Z=Math.floor(Z/$e)}Se[J]=z(Se[J],de[ge],ge,J)}return oe||Ie.splice(K,1),[D.type,Se,Ie]}function j(z,D=null,K=1,oe=!1){const _e=z.data,de=z.dims;if(D===null){const we=_e.reduce((Q,re)=>Q+re,0)/_e.length,$e=Math.sqrt(_e.reduce((Q,re)=>Q+(re-we)**2,0)/(_e.length-K)),Ce=new o(z.type,[we],[]);return[new o(z.type,[$e],[]),Ce]}D=_(D,de.length);const ve=A(z,D,oe),Ie=ve.data,[Se,ge,J]=k((Z,we,$e,Ce)=>Z+(we-Ie[Ce])**2,z,D,oe);for(let Z=0;Z<ge.length;++Z)ge[Z]=Math.sqrt(ge[Z]/(de[D]-K));return[new o(Se,ge,J),ve]}function A(z,D=null,K=!1){const oe=z.dims,_e=z.data;if(D===null){const Se=_e.reduce((ge,J)=>ge+J,0);return new o(z.type,[Se/_e.length],[])}D=_(D,oe.length);const[de,ve,Ie]=k((Se,ge)=>Se+ge,z,D,K);if(oe[D]!==1)for(let Se=0;Se<ve.length;++Se)ve[Se]/=oe[D];return new o(de,ve,Ie)}function R(z){const D=new Array(z.length);for(let K=z.length-1,oe=1;K>=0;--K)D[K]=oe,oe*=z[K];return D}function I(z,D,K,oe){const _e=z.reduce((de,ve)=>de*ve,1);return new o(K,new oe(_e).fill(D),z)}function $(z,D){let K,oe;if(typeof D=="number")K="float32",oe=Float32Array;else if(typeof D=="bigint")K="int64",oe=BigInt64Array;else if(typeof D=="boolean")K="bool",oe=Uint8Array;else throw new Error(`Unsupported data type: ${typeof D}`);return I(z,D,K,oe)}function F(z,D){return $(z.dims,D)}function V(z){return I(z,1n,"int64",BigInt64Array)}function G(z){return V(z.dims)}function H(z){return I(z,0n,"int64",BigInt64Array)}function B(z){return H(z.dims)}function te(z){const D=z.reduce((K,oe)=>K*oe,1);return new o("float32",Float32Array.from({length:D},()=>Math.random()),z)}function ae(z,D){if(z.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(z.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(D))throw new Error("The precision must be either 'binary' or 'ubinary'");const K=D==="binary",oe=K?"int8":"uint8",_e=K?Int8Array:Uint8Array,de=z.data,ve=new _e(de.length/8);for(let Ie=0;Ie<de.length;++Ie){const Se=de[Ie]>0?1:0,ge=Math.floor(Ie/8),J=Ie%8;ve[ge]|=Se<<7-J,K&&J===0&&(ve[ge]-=128)}return new o(oe,ve,[z.dims[0],z.dims[1]/8])}},"./src/utils/video.js":(e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>a,RawVideoFrame:()=>s,load_video:()=>o});var n=r("./src/utils/image.js"),i=r("./src/env.js");class s{constructor(c,d){this.image=c,this.timestamp=d}}class a{constructor(c,d){c.length>0&&c[0]instanceof n.RawImage&&(c=c.map((u,f)=>new s(u,(f+1)/(c.length+1)*d))),this.frames=c,this.duration=d}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function o(l,{num_frames:c=null,fps:d=null}={}){if(!i.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(c==null&&d==null)throw new Error("Either num_frames or fps must be provided.");const u=[],f=document.createElement("video");if(f.crossOrigin="anonymous",f.muted=!0,typeof l=="string")f.src=l;else if(l instanceof Blob)f.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)f.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(w=>f.onloadedmetadata=w),f.seekable.start(0)===f.seekable.end(0)){const b=await(await fetch(f.src)).blob();f.src=URL.createObjectURL(b),await new Promise(_=>f.onloadedmetadata=_)}const p=f.duration;let m,g;c!=null?(m=c,g=c===1?0:p/(c-1)):(g=1/d,m=Math.floor(p/g));let x=[];for(let w=0;w<m;++w)x.push(c===1?p/2:w*g);const v=document.createElement("canvas");v.width=f.videoWidth,v.height=f.videoHeight;const y=v.getContext("2d",{willReadFrequently:!0});for(const w of x){f.currentTime=w,await new Promise(M=>{f.onseeked=M}),y.drawImage(f,0,0,v.width,v.height);const b=y.getImageData(0,0,v.width,v.height),_=new n.RawImage(b.data,v.width,v.height,4),T=new s(_,w);u.push(T)}return f.remove(),new a(u,p)}}},AK={};function Pr(e){var t=AK[e];if(t!==void 0)return t.exports;var r=AK[e]={exports:{}};return Qqe[e](r,r.exports,Pr),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;Pr.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var i=Object.create(null);Pr.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=n&2&&r;typeof a=="object"&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach(o=>s[o]=()=>r[o]);return s.default=()=>r,Pr.d(i,s),i}})();Pr.d=(e,t)=>{for(var r in t)Pr.o(t,r)&&!Pr.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};Pr.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Pr.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var P={};(()=>{/*!*****************************!*\
  !*** ./src/transformers.js ***!
  \*****************************/Pr.r(P),Pr.d(P,{ASTFeatureExtractor:()=>u.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>i.AutoConfig,AutoFeatureExtractor:()=>f.AutoFeatureExtractor,AutoImageProcessor:()=>g.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>y.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>w.BaseStreamer,BeitFeatureExtractor:()=>m.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>m.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>m.CLIPFeatureExtractor,CLIPImageProcessor:()=>m.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>m.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>u.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>_.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>m.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>m.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>m.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>u.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>m.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>m.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>m.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>m.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>m.DonutFeatureExtractor,DonutImageProcessor:()=>m.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>m.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>u.EncodecFeatureExtractor,EosTokenCriteria:()=>b.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>n.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>c.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>d.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>v.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>_.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>_.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>m.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>u.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>v.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>m.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>v.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>m.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>v.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>u.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>p.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>b.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>m.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>v.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>m.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>v.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>_.LogitsProcessor,LogitsProcessorList:()=>_.LogitsProcessorList,LogitsWarper:()=>_.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>m.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>m.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>m.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>b.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>v.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>_.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>_.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>m.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>m.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>m.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>m.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>m.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>m.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>m.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>m.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>m.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>m.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>u.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>v.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>_.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>_.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>m.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>m.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>m.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>v.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>m.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>v.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>m.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>v.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>i.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>x.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>m.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>u.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>v.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>m.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>v.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>m.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>a.RawImage,RawVideo:()=>o.RawVideo,RawVideoFrame:()=>o.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>_.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,SamImageProcessor:()=>m.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>v.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>u.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>m.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>m.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>m.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>m.SmolVLMImageProcessor,SmolVLMProcessor:()=>v.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>u.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>u.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>v.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>b.StoppingCriteria,StoppingCriteriaList:()=>b.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>_.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>m.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>_.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>w.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>_.TopKLogitsWarper,TopPLogitsWarper:()=>_.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>v.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>v.VLChatProcessor,VLMImageProcessor:()=>m.VLMImageProcessor,ViTFeatureExtractor:()=>m.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>m.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>m.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>m.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>v.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>u.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>v.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>v.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>u.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>u.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>v.WhisperProcessor,WhisperTextStreamer:()=>w.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>_.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>m.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>m.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>c.bankers_round,cat:()=>l.cat,cos_sim:()=>c.cos_sim,dot:()=>c.dot,dynamic_time_warping:()=>c.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>i.getCacheShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>c.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>a.load_image,load_video:()=>o.load_video,log_softmax:()=>c.log_softmax,magnitude:()=>c.magnitude,matmul:()=>l.matmul,max:()=>c.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>c.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>c.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>c.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>s.read_audio,rfft:()=>l.rfft,round:()=>c.round,slice:()=>l.slice,softmax:()=>c.softmax,spectrogram:()=>s.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>s.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=Pr("./src/env.js"),t=Pr("./src/pipelines.js"),r=Pr("./src/models.js"),n=Pr("./src/tokenizers.js"),i=Pr("./src/configs.js"),s=Pr("./src/utils/audio.js"),a=Pr("./src/utils/image.js"),o=Pr("./src/utils/video.js"),l=Pr("./src/utils/tensor.js"),c=Pr("./src/utils/maths.js"),d=Pr("./src/base/feature_extraction_utils.js"),u=Pr("./src/models/feature_extractors.js"),f=Pr("./src/models/auto/feature_extraction_auto.js"),p=Pr("./src/base/image_processors_utils.js"),m=Pr("./src/models/image_processors.js"),g=Pr("./src/models/auto/image_processing_auto.js"),x=Pr("./src/base/processing_utils.js"),v=Pr("./src/models/processors.js"),y=Pr("./src/models/auto/processing_auto.js"),w=Pr("./src/generation/streamers.js"),b=Pr("./src/generation/stopping_criteria.js"),_=Pr("./src/generation/logits_process.js")})();P.ASTFeatureExtractor;P.ASTForAudioClassification;P.ASTModel;P.ASTPreTrainedModel;P.AlbertForMaskedLM;P.AlbertForQuestionAnswering;P.AlbertForSequenceClassification;P.AlbertModel;P.AlbertPreTrainedModel;P.AlbertTokenizer;P.AudioClassificationPipeline;P.AutoConfig;P.AutoFeatureExtractor;P.AutoImageProcessor;P.AutoModel;P.AutoModelForAudioClassification;P.AutoModelForAudioFrameClassification;P.AutoModelForAudioTextToText;P.AutoModelForCTC;P.AutoModelForCausalLM;P.AutoModelForDepthEstimation;P.AutoModelForDocumentQuestionAnswering;P.AutoModelForImageClassification;P.AutoModelForImageFeatureExtraction;P.AutoModelForImageMatting;P.AutoModelForImageSegmentation;P.AutoModelForImageTextToText;P.AutoModelForImageToImage;P.AutoModelForMaskGeneration;P.AutoModelForMaskedLM;P.AutoModelForNormalEstimation;P.AutoModelForObjectDetection;P.AutoModelForPoseEstimation;P.AutoModelForQuestionAnswering;P.AutoModelForSemanticSegmentation;P.AutoModelForSeq2SeqLM;P.AutoModelForSequenceClassification;P.AutoModelForSpeechSeq2Seq;P.AutoModelForTextToSpectrogram;P.AutoModelForTextToWaveform;P.AutoModelForTokenClassification;P.AutoModelForUniversalSegmentation;P.AutoModelForVision2Seq;P.AutoModelForXVector;P.AutoModelForZeroShotObjectDetection;P.AutoProcessor;P.AutoTokenizer;P.AutomaticSpeechRecognitionPipeline;P.BackgroundRemovalPipeline;P.BartForConditionalGeneration;P.BartForSequenceClassification;P.BartModel;P.BartPretrainedModel;P.BartTokenizer;P.BaseModelOutput;P.BaseStreamer;P.BeitFeatureExtractor;P.BeitForImageClassification;P.BeitModel;P.BeitPreTrainedModel;P.BertForMaskedLM;P.BertForQuestionAnswering;P.BertForSequenceClassification;P.BertForTokenClassification;P.BertModel;P.BertPreTrainedModel;P.BertTokenizer;P.BitImageProcessor;P.BlenderbotForConditionalGeneration;P.BlenderbotModel;P.BlenderbotPreTrainedModel;P.BlenderbotSmallForConditionalGeneration;P.BlenderbotSmallModel;P.BlenderbotSmallPreTrainedModel;P.BlenderbotSmallTokenizer;P.BlenderbotTokenizer;P.BloomForCausalLM;P.BloomModel;P.BloomPreTrainedModel;P.BloomTokenizer;P.CLIPFeatureExtractor;P.CLIPImageProcessor;P.CLIPModel;P.CLIPPreTrainedModel;P.CLIPSegForImageSegmentation;P.CLIPSegModel;P.CLIPSegPreTrainedModel;P.CLIPTextModel;P.CLIPTextModelWithProjection;P.CLIPTokenizer;P.CLIPVisionModel;P.CLIPVisionModelWithProjection;P.CamembertForMaskedLM;P.CamembertForQuestionAnswering;P.CamembertForSequenceClassification;P.CamembertForTokenClassification;P.CamembertModel;P.CamembertPreTrainedModel;P.CamembertTokenizer;P.CausalLMOutput;P.CausalLMOutputWithPast;P.ChineseCLIPFeatureExtractor;P.ChineseCLIPModel;P.ChineseCLIPPreTrainedModel;P.ClapAudioModelWithProjection;P.ClapFeatureExtractor;P.ClapModel;P.ClapPreTrainedModel;P.ClapTextModelWithProjection;P.ClassifierFreeGuidanceLogitsProcessor;P.CodeGenForCausalLM;P.CodeGenModel;P.CodeGenPreTrainedModel;P.CodeGenTokenizer;P.CodeLlamaTokenizer;P.CohereForCausalLM;P.CohereModel;P.CoherePreTrainedModel;P.CohereTokenizer;P.ConvBertForMaskedLM;P.ConvBertForQuestionAnswering;P.ConvBertForSequenceClassification;P.ConvBertForTokenClassification;P.ConvBertModel;P.ConvBertPreTrainedModel;P.ConvBertTokenizer;P.ConvNextFeatureExtractor;P.ConvNextForImageClassification;P.ConvNextImageProcessor;P.ConvNextModel;P.ConvNextPreTrainedModel;P.ConvNextV2ForImageClassification;P.ConvNextV2Model;P.ConvNextV2PreTrainedModel;P.DFineForObjectDetection;P.DFineModel;P.DFinePreTrainedModel;P.DPTFeatureExtractor;P.DPTForDepthEstimation;P.DPTImageProcessor;P.DPTModel;P.DPTPreTrainedModel;P.DacDecoderModel;P.DacDecoderOutput;P.DacEncoderModel;P.DacEncoderOutput;P.DacFeatureExtractor;P.DacModel;P.DacPreTrainedModel;P.DataTypeMap;P.DebertaForMaskedLM;P.DebertaForQuestionAnswering;P.DebertaForSequenceClassification;P.DebertaForTokenClassification;P.DebertaModel;P.DebertaPreTrainedModel;P.DebertaTokenizer;P.DebertaV2ForMaskedLM;P.DebertaV2ForQuestionAnswering;P.DebertaV2ForSequenceClassification;P.DebertaV2ForTokenClassification;P.DebertaV2Model;P.DebertaV2PreTrainedModel;P.DebertaV2Tokenizer;P.DecisionTransformerModel;P.DecisionTransformerPreTrainedModel;P.DeiTFeatureExtractor;P.DeiTForImageClassification;P.DeiTImageProcessor;P.DeiTModel;P.DeiTPreTrainedModel;P.DepthAnythingForDepthEstimation;P.DepthAnythingPreTrainedModel;P.DepthEstimationPipeline;P.DepthProForDepthEstimation;P.DepthProPreTrainedModel;P.DetrFeatureExtractor;P.DetrForObjectDetection;P.DetrForSegmentation;P.DetrImageProcessor;P.DetrModel;P.DetrObjectDetectionOutput;P.DetrPreTrainedModel;P.DetrSegmentationOutput;P.Dinov2ForImageClassification;P.Dinov2Model;P.Dinov2PreTrainedModel;P.Dinov2WithRegistersForImageClassification;P.Dinov2WithRegistersModel;P.Dinov2WithRegistersPreTrainedModel;P.DistilBertForMaskedLM;P.DistilBertForQuestionAnswering;P.DistilBertForSequenceClassification;P.DistilBertForTokenClassification;P.DistilBertModel;P.DistilBertPreTrainedModel;P.DistilBertTokenizer;P.DocumentQuestionAnsweringPipeline;P.DonutFeatureExtractor;P.DonutImageProcessor;P.DonutSwinModel;P.DonutSwinPreTrainedModel;P.EfficientNetForImageClassification;P.EfficientNetImageProcessor;P.EfficientNetModel;P.EfficientNetPreTrainedModel;P.ElectraForMaskedLM;P.ElectraForQuestionAnswering;P.ElectraForSequenceClassification;P.ElectraForTokenClassification;P.ElectraModel;P.ElectraPreTrainedModel;P.ElectraTokenizer;P.EncodecFeatureExtractor;P.EosTokenCriteria;P.Ernie4_5_ForCausalLM;P.Ernie4_5_Model;P.Ernie4_5_PretrainedModel;P.Ernie4_5_Tokenizer;P.EsmForMaskedLM;P.EsmForSequenceClassification;P.EsmForTokenClassification;P.EsmModel;P.EsmPreTrainedModel;P.EsmTokenizer;P.ExaoneForCausalLM;P.ExaoneModel;P.ExaonePreTrainedModel;P.FFT;P.FalconForCausalLM;P.FalconModel;P.FalconPreTrainedModel;P.FalconTokenizer;P.FastViTForImageClassification;P.FastViTModel;P.FastViTPreTrainedModel;P.FeatureExtractionPipeline;P.FeatureExtractor;P.FillMaskPipeline;P.Florence2ForConditionalGeneration;P.Florence2PreTrainedModel;P.Florence2Processor;P.ForcedBOSTokenLogitsProcessor;P.ForcedEOSTokenLogitsProcessor;P.GLPNFeatureExtractor;P.GLPNForDepthEstimation;P.GLPNModel;P.GLPNPreTrainedModel;P.GPT2LMHeadModel;P.GPT2Model;P.GPT2PreTrainedModel;P.GPT2Tokenizer;P.GPTBigCodeForCausalLM;P.GPTBigCodeModel;P.GPTBigCodePreTrainedModel;P.GPTJForCausalLM;P.GPTJModel;P.GPTJPreTrainedModel;P.GPTNeoForCausalLM;P.GPTNeoModel;P.GPTNeoPreTrainedModel;P.GPTNeoXForCausalLM;P.GPTNeoXModel;P.GPTNeoXPreTrainedModel;P.GPTNeoXTokenizer;P.Gemma2ForCausalLM;P.Gemma2Model;P.Gemma2PreTrainedModel;P.Gemma3ForCausalLM;P.Gemma3Model;P.Gemma3PreTrainedModel;P.Gemma3nAudioFeatureExtractor;P.Gemma3nForConditionalGeneration;P.Gemma3nPreTrainedModel;P.Gemma3nProcessor;P.GemmaForCausalLM;P.GemmaModel;P.GemmaPreTrainedModel;P.GemmaTokenizer;P.GlmForCausalLM;P.GlmModel;P.GlmPreTrainedModel;P.GraniteForCausalLM;P.GraniteModel;P.GranitePreTrainedModel;P.Grok1Tokenizer;P.GroundingDinoForObjectDetection;P.GroundingDinoImageProcessor;P.GroundingDinoPreTrainedModel;P.GroundingDinoProcessor;P.GroupViTModel;P.GroupViTPreTrainedModel;P.HeliumForCausalLM;P.HeliumModel;P.HeliumPreTrainedModel;P.HerbertTokenizer;P.HieraForImageClassification;P.HieraModel;P.HieraPreTrainedModel;P.HubertForCTC;P.HubertForSequenceClassification;P.HubertModel;P.HubertPreTrainedModel;P.IJepaForImageClassification;P.IJepaModel;P.IJepaPreTrainedModel;P.Idefics3ForConditionalGeneration;P.Idefics3ImageProcessor;P.Idefics3PreTrainedModel;P.Idefics3Processor;P.ImageClassificationPipeline;P.ImageFeatureExtractionPipeline;P.ImageFeatureExtractor;P.ImageMattingOutput;P.ImageProcessor;P.ImageSegmentationPipeline;P.ImageToImagePipeline;P.ImageToTextPipeline;P.InterruptableStoppingCriteria;P.JAISLMHeadModel;P.JAISModel;P.JAISPreTrainedModel;P.JinaCLIPImageProcessor;P.JinaCLIPModel;P.JinaCLIPPreTrainedModel;P.JinaCLIPProcessor;P.JinaCLIPTextModel;P.JinaCLIPVisionModel;P.Lfm2ForCausalLM;P.Lfm2Model;P.Lfm2PreTrainedModel;P.LiteWhisperForConditionalGeneration;P.LlamaForCausalLM;P.LlamaModel;P.LlamaPreTrainedModel;P.LlamaTokenizer;P.LlavaForConditionalGeneration;P.LlavaOnevisionForConditionalGeneration;P.LlavaOnevisionImageProcessor;P.LlavaPreTrainedModel;P.LlavaProcessor;P.LlavaQwen2ForCausalLM;P.LogitsProcessor;P.LogitsProcessorList;P.LogitsWarper;P.LongT5ForConditionalGeneration;P.LongT5Model;P.LongT5PreTrainedModel;P.M2M100ForConditionalGeneration;P.M2M100Model;P.M2M100PreTrainedModel;P.M2M100Tokenizer;P.MBart50Tokenizer;P.MBartForCausalLM;P.MBartForConditionalGeneration;P.MBartForSequenceClassification;P.MBartModel;P.MBartPreTrainedModel;P.MBartTokenizer;P.MPNetForMaskedLM;P.MPNetForQuestionAnswering;P.MPNetForSequenceClassification;P.MPNetForTokenClassification;P.MPNetModel;P.MPNetPreTrainedModel;P.MPNetTokenizer;P.MT5ForConditionalGeneration;P.MT5Model;P.MT5PreTrainedModel;P.MarianMTModel;P.MarianModel;P.MarianPreTrainedModel;P.MarianTokenizer;P.Mask2FormerImageProcessor;P.MaskFormerFeatureExtractor;P.MaskFormerForInstanceSegmentation;P.MaskFormerImageProcessor;P.MaskFormerModel;P.MaskFormerPreTrainedModel;P.MaskedLMOutput;P.MaxLengthCriteria;P.Metric3DForDepthEstimation;P.Metric3DPreTrainedModel;P.Metric3Dv2ForDepthEstimation;P.Metric3Dv2PreTrainedModel;P.MgpstrForSceneTextRecognition;P.MgpstrModelOutput;P.MgpstrPreTrainedModel;P.MgpstrProcessor;P.MgpstrTokenizer;P.MimiDecoderModel;P.MimiDecoderOutput;P.MimiEncoderModel;P.MimiEncoderOutput;P.MimiModel;P.MimiPreTrainedModel;P.MinLengthLogitsProcessor;P.MinNewTokensLengthLogitsProcessor;P.MistralForCausalLM;P.MistralModel;P.MistralPreTrainedModel;P.MobileBertForMaskedLM;P.MobileBertForQuestionAnswering;P.MobileBertForSequenceClassification;P.MobileBertModel;P.MobileBertPreTrainedModel;P.MobileBertTokenizer;P.MobileLLMForCausalLM;P.MobileLLMModel;P.MobileLLMPreTrainedModel;P.MobileNetV1FeatureExtractor;P.MobileNetV1ForImageClassification;P.MobileNetV1ForSemanticSegmentation;P.MobileNetV1ImageProcessor;P.MobileNetV1Model;P.MobileNetV1PreTrainedModel;P.MobileNetV2FeatureExtractor;P.MobileNetV2ForImageClassification;P.MobileNetV2ForSemanticSegmentation;P.MobileNetV2ImageProcessor;P.MobileNetV2Model;P.MobileNetV2PreTrainedModel;P.MobileNetV3FeatureExtractor;P.MobileNetV3ForImageClassification;P.MobileNetV3ForSemanticSegmentation;P.MobileNetV3ImageProcessor;P.MobileNetV3Model;P.MobileNetV3PreTrainedModel;P.MobileNetV4FeatureExtractor;P.MobileNetV4ForImageClassification;P.MobileNetV4ForSemanticSegmentation;P.MobileNetV4ImageProcessor;P.MobileNetV4Model;P.MobileNetV4PreTrainedModel;P.MobileViTFeatureExtractor;P.MobileViTForImageClassification;P.MobileViTImageProcessor;P.MobileViTModel;P.MobileViTPreTrainedModel;P.MobileViTV2ForImageClassification;P.MobileViTV2Model;P.MobileViTV2PreTrainedModel;P.ModelOutput;P.ModernBertDecoderForCausalLM;P.ModernBertDecoderModel;P.ModernBertDecoderPreTrainedModel;P.ModernBertForMaskedLM;P.ModernBertForSequenceClassification;P.ModernBertForTokenClassification;P.ModernBertModel;P.ModernBertPreTrainedModel;P.Moondream1ForConditionalGeneration;P.MoonshineFeatureExtractor;P.MoonshineForConditionalGeneration;P.MoonshineModel;P.MoonshinePreTrainedModel;P.MoonshineProcessor;P.MptForCausalLM;P.MptModel;P.MptPreTrainedModel;P.MultiModalityCausalLM;P.MultiModalityPreTrainedModel;P.MusicgenForCausalLM;P.MusicgenForConditionalGeneration;P.MusicgenModel;P.MusicgenPreTrainedModel;P.NeoBertForMaskedLM;P.NeoBertForQuestionAnswering;P.NeoBertForSequenceClassification;P.NeoBertForTokenClassification;P.NeoBertModel;P.NeoBertPreTrainedModel;P.NllbTokenizer;P.NoBadWordsLogitsProcessor;P.NoRepeatNGramLogitsProcessor;P.NomicBertModel;P.NomicBertPreTrainedModel;P.NougatImageProcessor;P.NougatTokenizer;P.OPTForCausalLM;P.OPTModel;P.OPTPreTrainedModel;P.ObjectDetectionPipeline;P.Olmo2ForCausalLM;P.Olmo2Model;P.Olmo2PreTrainedModel;P.OlmoForCausalLM;P.OlmoModel;P.OlmoPreTrainedModel;P.OpenELMForCausalLM;P.OpenELMModel;P.OpenELMPreTrainedModel;P.OwlViTFeatureExtractor;P.OwlViTForObjectDetection;P.OwlViTImageProcessor;P.OwlViTModel;P.OwlViTPreTrainedModel;P.OwlViTProcessor;P.Owlv2ForObjectDetection;P.Owlv2ImageProcessor;P.Owlv2Model;P.Owlv2PreTrainedModel;P.PaliGemmaForConditionalGeneration;P.PaliGemmaPreTrainedModel;P.PaliGemmaProcessor;P.PatchTSMixerForPrediction;P.PatchTSMixerModel;P.PatchTSMixerPreTrainedModel;P.PatchTSTForPrediction;P.PatchTSTModel;P.PatchTSTPreTrainedModel;P.Phi3ForCausalLM;P.Phi3Model;P.Phi3PreTrainedModel;P.Phi3VForCausalLM;P.Phi3VImageProcessor;P.Phi3VPreTrainedModel;P.Phi3VProcessor;P.PhiForCausalLM;P.PhiModel;P.PhiPreTrainedModel;P.Pipeline;P.PreTrainedModel;P.PreTrainedTokenizer;P.PretrainedConfig;P.PretrainedMixin;P.Processor;P.PvtForImageClassification;P.PvtImageProcessor;P.PvtModel;P.PvtPreTrainedModel;P.PyAnnoteFeatureExtractor;P.PyAnnoteForAudioFrameClassification;P.PyAnnoteModel;P.PyAnnotePreTrainedModel;P.PyAnnoteProcessor;P.QuestionAnsweringModelOutput;P.QuestionAnsweringPipeline;P.Qwen2ForCausalLM;P.Qwen2Model;P.Qwen2PreTrainedModel;P.Qwen2Tokenizer;P.Qwen2VLForConditionalGeneration;P.Qwen2VLImageProcessor;P.Qwen2VLPreTrainedModel;P.Qwen2VLProcessor;P.Qwen3ForCausalLM;P.Qwen3Model;P.Qwen3PreTrainedModel;P.RFDetrForObjectDetection;P.RFDetrModel;P.RFDetrObjectDetectionOutput;P.RFDetrPreTrainedModel;P.RTDetrForObjectDetection;P.RTDetrImageProcessor;P.RTDetrModel;P.RTDetrObjectDetectionOutput;P.RTDetrPreTrainedModel;P.RTDetrV2ForObjectDetection;P.RTDetrV2Model;P.RTDetrV2ObjectDetectionOutput;P.RTDetrV2PreTrainedModel;P.RawAudio;P.RawImage;P.RawVideo;P.RawVideoFrame;P.RepetitionPenaltyLogitsProcessor;P.ResNetForImageClassification;P.ResNetModel;P.ResNetPreTrainedModel;P.RoFormerForMaskedLM;P.RoFormerForQuestionAnswering;P.RoFormerForSequenceClassification;P.RoFormerForTokenClassification;P.RoFormerModel;P.RoFormerPreTrainedModel;P.RoFormerTokenizer;P.RobertaForMaskedLM;P.RobertaForQuestionAnswering;P.RobertaForSequenceClassification;P.RobertaForTokenClassification;P.RobertaModel;P.RobertaPreTrainedModel;P.RobertaTokenizer;P.SamImageProcessor;P.SamImageSegmentationOutput;P.SamModel;P.SamPreTrainedModel;P.SamProcessor;P.SapiensForDepthEstimation;P.SapiensForNormalEstimation;P.SapiensForSemanticSegmentation;P.SapiensPreTrainedModel;P.SeamlessM4TFeatureExtractor;P.SegformerFeatureExtractor;P.SegformerForImageClassification;P.SegformerForSemanticSegmentation;P.SegformerImageProcessor;P.SegformerModel;P.SegformerPreTrainedModel;P.Seq2SeqLMOutput;P.SequenceClassifierOutput;P.SiglipImageProcessor;P.SiglipModel;P.SiglipPreTrainedModel;P.SiglipTextModel;P.SiglipTokenizer;P.SiglipVisionModel;P.SmolLM3ForCausalLM;P.SmolLM3Model;P.SmolLM3PreTrainedModel;P.SmolVLMForConditionalGeneration;P.SmolVLMImageProcessor;P.SmolVLMProcessor;P.SnacDecoderModel;P.SnacEncoderModel;P.SnacFeatureExtractor;P.SnacModel;P.SnacPreTrainedModel;P.SpeechT5FeatureExtractor;P.SpeechT5ForSpeechToText;P.SpeechT5ForTextToSpeech;P.SpeechT5HifiGan;P.SpeechT5Model;P.SpeechT5PreTrainedModel;P.SpeechT5Processor;P.SpeechT5Tokenizer;P.SqueezeBertForMaskedLM;P.SqueezeBertForQuestionAnswering;P.SqueezeBertForSequenceClassification;P.SqueezeBertModel;P.SqueezeBertPreTrainedModel;P.SqueezeBertTokenizer;P.StableLmForCausalLM;P.StableLmModel;P.StableLmPreTrainedModel;P.Starcoder2ForCausalLM;P.Starcoder2Model;P.Starcoder2PreTrainedModel;P.StoppingCriteria;P.StoppingCriteriaList;P.StyleTextToSpeech2Model;P.StyleTextToSpeech2PreTrainedModel;P.SummarizationPipeline;P.SuppressTokensAtBeginLogitsProcessor;P.Swin2SRForImageSuperResolution;P.Swin2SRImageProcessor;P.Swin2SRModel;P.Swin2SRPreTrainedModel;P.SwinForImageClassification;P.SwinForSemanticSegmentation;P.SwinModel;P.SwinPreTrainedModel;P.T5ForConditionalGeneration;P.T5Model;P.T5PreTrainedModel;P.T5Tokenizer;P.TableTransformerForObjectDetection;P.TableTransformerModel;P.TableTransformerObjectDetectionOutput;P.TableTransformerPreTrainedModel;P.TemperatureLogitsWarper;P.Tensor;P.Text2TextGenerationPipeline;P.TextClassificationPipeline;P.TextGenerationPipeline;P.TextStreamer;P.TextToAudioPipeline;P.TokenClassificationPipeline;P.TokenClassifierOutput;P.TokenizerModel;P.TopKLogitsWarper;P.TopPLogitsWarper;P.TrOCRForCausalLM;P.TrOCRPreTrainedModel;P.TranslationPipeline;P.UltravoxModel;P.UltravoxPreTrainedModel;P.UltravoxProcessor;P.UniSpeechForCTC;P.UniSpeechForSequenceClassification;P.UniSpeechModel;P.UniSpeechPreTrainedModel;P.UniSpeechSatForAudioFrameClassification;P.UniSpeechSatForCTC;P.UniSpeechSatForSequenceClassification;P.UniSpeechSatModel;P.UniSpeechSatPreTrainedModel;P.VLChatProcessor;P.VLMImageProcessor;P.ViTFeatureExtractor;P.ViTForImageClassification;P.ViTImageProcessor;P.ViTMAEModel;P.ViTMAEPreTrainedModel;P.ViTMSNForImageClassification;P.ViTMSNModel;P.ViTMSNPreTrainedModel;P.ViTModel;P.ViTPreTrainedModel;P.VisionEncoderDecoderModel;P.VitMatteForImageMatting;P.VitMatteImageProcessor;P.VitMattePreTrainedModel;P.VitPoseForPoseEstimation;P.VitPoseImageProcessor;P.VitPosePreTrainedModel;P.VitsModel;P.VitsModelOutput;P.VitsPreTrainedModel;P.VitsTokenizer;P.VoxtralForConditionalGeneration;P.VoxtralProcessor;P.Wav2Vec2BertForCTC;P.Wav2Vec2BertForSequenceClassification;P.Wav2Vec2BertModel;P.Wav2Vec2BertPreTrainedModel;P.Wav2Vec2CTCTokenizer;P.Wav2Vec2FeatureExtractor;P.Wav2Vec2ForAudioFrameClassification;P.Wav2Vec2ForCTC;P.Wav2Vec2ForSequenceClassification;P.Wav2Vec2Model;P.Wav2Vec2PreTrainedModel;P.Wav2Vec2Processor;P.Wav2Vec2ProcessorWithLM;P.WavLMForAudioFrameClassification;P.WavLMForCTC;P.WavLMForSequenceClassification;P.WavLMForXVector;P.WavLMModel;P.WavLMPreTrainedModel;P.WeSpeakerFeatureExtractor;P.WeSpeakerResNetModel;P.WeSpeakerResNetPreTrainedModel;P.WhisperFeatureExtractor;P.WhisperForConditionalGeneration;P.WhisperModel;P.WhisperPreTrainedModel;P.WhisperProcessor;P.WhisperTextStreamer;P.WhisperTimeStampLogitsProcessor;P.WhisperTokenizer;P.XLMForQuestionAnswering;P.XLMForSequenceClassification;P.XLMForTokenClassification;P.XLMModel;P.XLMPreTrainedModel;P.XLMRobertaForMaskedLM;P.XLMRobertaForQuestionAnswering;P.XLMRobertaForSequenceClassification;P.XLMRobertaForTokenClassification;P.XLMRobertaModel;P.XLMRobertaPreTrainedModel;P.XLMRobertaTokenizer;P.XLMTokenizer;P.XLMWithLMHeadModel;P.XVectorOutput;P.YolosFeatureExtractor;P.YolosForObjectDetection;P.YolosImageProcessor;P.YolosModel;P.YolosObjectDetectionOutput;P.YolosPreTrainedModel;P.ZeroShotAudioClassificationPipeline;P.ZeroShotClassificationPipeline;P.ZeroShotImageClassificationPipeline;P.ZeroShotObjectDetectionPipeline;P.bankers_round;P.cat;P.cos_sim;P.dot;P.dynamic_time_warping;var Joe=P.env;P.full;P.full_like;P.getCacheShapes;P.hamming;P.hanning;P.interpolate;P.interpolate_4d;P.interpolate_data;P.is_chinese_char;P.layer_norm;P.load_image;P.load_video;P.log_softmax;P.magnitude;P.matmul;P.max;P.mean;P.mean_pooling;P.medianFilter;P.mel_filter_bank;P.min;P.ones;P.ones_like;P.permute;P.permute_data;var Zqe=P.pipeline;P.quantize_embeddings;P.rand;P.read_audio;P.rfft;P.round;P.slice;P.softmax;P.spectrogram;P.stack;P.std_mean;P.topk;P.window_function;P.zeros;P.zeros_like;Joe.allowLocalModels=!1;Joe.useBrowserCache=!1;const Qf=1024;function Jqe(e,t,r){let n=r.naturalWidth,i=r.naturalHeight;return n>Qf||i>Qf?(n>i?(i=Math.round(i*Qf/n),n=Qf):(n=Math.round(n*Qf/i),i=Qf),e.width=n,e.height=i,t.drawImage(r,0,0,n,i),!0):(e.width=n,e.height=i,t.drawImage(r,0,0),!1)}const e7e=async e=>{try{console.log("Starting background removal process...");const t=await Zqe("image-segmentation","Xenova/segformer-b0-finetuned-ade-512-512",{device:"webgpu"}),r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("Could not get canvas context");const i=Jqe(r,n,e);console.log(`Image ${i?"was":"was not"} resized. Final dimensions: ${r.width}x${r.height}`);const s=r.toDataURL("image/jpeg",.8);console.log("Image converted to base64"),console.log("Processing with segmentation model...");const a=await t(s);if(console.log("Segmentation result:",a),!a||!Array.isArray(a)||a.length===0||!a[0].mask)throw new Error("Invalid segmentation result");const o=document.createElement("canvas");o.width=r.width,o.height=r.height;const l=o.getContext("2d");if(!l)throw new Error("Could not get output canvas context");l.drawImage(r,0,0);const c=l.getImageData(0,0,o.width,o.height),d=c.data;for(let u=0;u<a[0].mask.data.length;u++){const f=Math.round((1-a[0].mask.data[u])*255);d[u*4+3]=f}return l.putImageData(c,0,0),console.log("Mask applied successfully"),new Promise((u,f)=>{o.toBlob(p=>{p?(console.log("Successfully created final blob"),u(p)):f(new Error("Failed to create blob"))},"image/png",1)})}catch(t){throw console.error("Error removing background:",t),t}},t7e=e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=r,n.src=URL.createObjectURL(e)}),r7e=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(null),[i,s]=E.useState(null),[a,o]=E.useState(null),l=E.useCallback(async d=>{t(!0),o(null);try{const u=URL.createObjectURL(d);s(u);const f=await t7e(d),p=await e7e(f),m=URL.createObjectURL(p);return n(m),m}catch(u){const f=u instanceof Error?u.message:"Unknown error occurred";return o(f),console.error("Background removal failed:",u),null}finally{t(!1)}},[]),c=E.useCallback(()=>{r&&URL.revokeObjectURL(r),i&&URL.revokeObjectURL(i),n(null),s(null),o(null),t(!1)},[r,i]);return{processImage:l,isProcessing:e,processedImageUrl:r,originalImageUrl:i,error:a,reset:c}},n7e=()=>{const e=E.useRef(null),{processImage:t,isProcessing:r,processedImageUrl:n,originalImageUrl:i,error:s,reset:a}=r7e(),o=async u=>{var p;const f=(p=u.target.files)==null?void 0:p[0];f&&await t(f)},l=()=>{var u;(u=e.current)==null||u.click()},c=()=>{if(n){const u=document.createElement("a");u.href=n,u.download="logo-no-background.png",u.click()}},d=async()=>{if(n)try{const f=await(await fetch(n)).blob();await navigator.clipboard.write([new ClipboardItem({"image/png":f})]),console.log("Image copied to clipboard")}catch(u){console.error("Failed to copy image:",u)}};return h.jsxs(yi,{className:"w-full max-w-2xl mx-auto",children:[h.jsx(Lo,{children:h.jsxs(Fo,{className:"flex items-center gap-2",children:[h.jsx(d4,{className:"w-5 h-5"}),"Logo Background Removal"]})}),h.jsxs(vi,{className:"space-y-4",children:[h.jsx("input",{ref:e,type:"file",accept:"image/*",onChange:o,className:"hidden"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(zn,{onClick:l,disabled:r,children:[h.jsx(d4,{className:"w-4 h-4 mr-2"}),r?"Processing...":"Upload Logo"]}),(i||n)&&h.jsxs(zn,{variant:"outline",onClick:a,children:[h.jsx(phe,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),s&&h.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:h.jsx("p",{className:"text-destructive text-sm",children:s})}),(i||n)&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"font-semibold",children:"Original"}),h.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:h.jsx("img",{src:i,alt:"Original logo",className:"w-full h-auto max-h-48 object-contain"})})]}),n&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"font-semibold",children:"Background Removed"}),h.jsx("div",{className:"border rounded-lg p-4 bg-gradient-to-br from-muted/20 to-muted/40",children:h.jsx("img",{src:n,alt:"Processed logo",className:"w-full h-auto max-h-48 object-contain"})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(zn,{size:"sm",onClick:c,children:[h.jsx(the,{className:"w-4 h-4 mr-2"}),"Download"]}),h.jsx(zn,{size:"sm",variant:"outline",onClick:d,children:"Copy to Clipboard"})]})]})]}),r&&h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-r-transparent rounded-full mx-auto mb-2"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Processing your logo..."})]})]})]})},i7e=()=>h.jsx(Qr,{children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Logo Background Removal Tool"}),h.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Upload your logo image and remove the background while keeping all the white elements intact. Perfect for logos with gray or colored backgrounds that need to become transparent."})]}),h.jsx(n7e,{}),h.jsxs("div",{className:"mt-8 max-w-2xl mx-auto",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"How it works:"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsx("li",{children:"• Upload your logo image with any background color"}),h.jsx("li",{children:"• Our AI will analyze the image and identify the background"}),h.jsx("li",{children:"• White and colored elements are preserved while the background becomes transparent"}),h.jsx("li",{children:"• Download the result as a PNG with transparent background"})]})]})]})}),s7e=()=>{const{addToCart:e}=UO(),t=[{title:"Henkilösuoja Yhdelle",price:"19,99 €/kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista","Vakuutus, joka turvaa sinut vahinkojen varalta","Apu ja tuki"]},{title:"Henkilösuoja Tupla",price:"26,99 €/kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä läheisellesi","Vakuutus, joka turvaa sinut ja läheisesi vahinkojen varalta","Apu ja tuki"]},{title:"Henkilösuoja Perhe",price:"30,99 €/kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sekä koko perheellesi","Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta","Apu ja tuki"]}];return h.jsxs(Qr,{children:[h.jsx(sm,{title:"Verkkokauppa - Identiteettiturva paketit",description:"Valitse sinulle sopiva identiteettiturva paketti. Suojaa itsesi ja läheisesi verkkorikollisuudelta."}),h.jsx("div",{className:"min-h-screen bg-background pt-44 pb-12",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsx("div",{className:"text-center mb-16",children:h.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight mb-8",children:"Valitse sopiva paketti"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:t.map((r,n)=>h.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 space-y-6 hover:shadow-lg transition-shadow",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4 whitespace-pre-line",children:r.title}),h.jsx("div",{className:"text-3xl font-bold text-primary mb-6",children:r.price})]}),h.jsx("div",{className:"space-y-4",children:r.features.map((i,s)=>h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mt-0.5",children:h.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),h.jsx("span",{className:"text-muted-foreground",children:i})]},s))}),h.jsx("button",{onClick:()=>e(r),className:"w-full text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Valitse paketti"})]},n))})]})})]})},a7e=i_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function dA({className:e,variant:t,...r}){return h.jsx("div",{className:kt(a7e({variant:t}),e),...r})}const ele=E.forwardRef(({className:e,...t},r)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:r,className:kt("w-full caption-bottom text-sm",e),...t})}));ele.displayName="Table";const tle=E.forwardRef(({className:e,...t},r)=>h.jsx("thead",{ref:r,className:kt("[&_tr]:border-b",e),...t}));tle.displayName="TableHeader";const rle=E.forwardRef(({className:e,...t},r)=>h.jsx("tbody",{ref:r,className:kt("[&_tr:last-child]:border-0",e),...t}));rle.displayName="TableBody";const o7e=E.forwardRef(({className:e,...t},r)=>h.jsx("tfoot",{ref:r,className:kt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));o7e.displayName="TableFooter";const fA=E.forwardRef(({className:e,...t},r)=>h.jsx("tr",{ref:r,className:kt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));fA.displayName="TableRow";const kc=E.forwardRef(({className:e,...t},r)=>h.jsx("th",{ref:r,className:kt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));kc.displayName="TableHead";const Sc=E.forwardRef(({className:e,...t},r)=>h.jsx("td",{ref:r,className:kt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Sc.displayName="TableCell";const l7e=E.forwardRef(({className:e,...t},r)=>h.jsx("caption",{ref:r,className:kt("mt-4 text-sm text-muted-foreground",e),...t}));l7e.displayName="TableCaption";function c7e(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(u){const{scope:f,children:p,...m}=u,g=(f==null?void 0:f[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:x,children:p})}function d(u,f){const p=(f==null?void 0:f[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,u7e(i,...t)]}function u7e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...o,...u}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var pE="rovingFocusGroup.onEntryFocus",d7e={bubbles:!1,cancelable:!0},nM="RovingFocusGroup",[hA,nle,f7e]=r_(nM),[h7e,ile]=c7e(nM,[f7e]),[p7e,m7e]=h7e(nM),sle=E.forwardRef((e,t)=>h.jsx(hA.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(hA.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(g7e,{...e,ref:t})})}));sle.displayName=nM;var g7e=E.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,f=E.useRef(null),p=Or(t,f),m=Y1(s),[g=null,x]=Ul({prop:a,defaultProp:o,onChange:l}),[v,y]=E.useState(!1),w=Xn(c),b=nle(r),_=E.useRef(!1),[T,M]=E.useState(0);return E.useEffect(()=>{const k=f.current;if(k)return k.addEventListener(pE,w),()=>k.removeEventListener(pE,w)},[w]),h.jsx(p7e,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:g,onItemFocus:E.useCallback(k=>x(k),[x]),onItemShiftTab:E.useCallback(()=>y(!0),[]),onFocusableItemAdd:E.useCallback(()=>M(k=>k+1),[]),onFocusableItemRemove:E.useCallback(()=>M(k=>k-1),[]),children:h.jsx(Ft.div,{tabIndex:v||T===0?-1:0,"data-orientation":n,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:xt(e.onMouseDown,()=>{_.current=!0}),onFocus:xt(e.onFocus,k=>{const j=!_.current;if(k.target===k.currentTarget&&j&&!v){const A=new CustomEvent(pE,d7e);if(k.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=b().filter(G=>G.focusable),I=R.find(G=>G.active),$=R.find(G=>G.id===g),V=[I,$,...R].filter(Boolean).map(G=>G.ref.current);lle(V,d)}}_.current=!1}),onBlur:xt(e.onBlur,()=>y(!1))})})}),ale="RovingFocusGroupItem",ole=E.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,...a}=e,o=Xo(),l=s||o,c=m7e(ale,r),d=c.currentTabStopId===l,u=nle(r),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return E.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),h.jsx(hA.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:h.jsx(Ft.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...a,ref:t,onMouseDown:xt(e.onMouseDown,m=>{n?c.onItemFocus(l):m.preventDefault()}),onFocus:xt(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:xt(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=_7e(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=u().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(m.currentTarget);v=c.loop?x7e(v,y+1):v.slice(y+1)}setTimeout(()=>lle(v))}})})})});ole.displayName=ale;var y7e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v7e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _7e(e,t,r){const n=v7e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return y7e[n]}function lle(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function x7e(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var b7e=sle,w7e=ole,EN="Tabs",[T7e,iXe]=df(EN,[ile]),cle=ile(),[M7e,CN]=T7e(EN),ule=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Y1(o),[u,f]=Ul({prop:n,onChange:i,defaultProp:s});return h.jsx(M7e,{scope:r,baseId:Xo(),value:u,onValueChange:f,orientation:a,dir:d,activationMode:l,children:h.jsx(Ft.div,{dir:d,"data-orientation":a,...c,ref:t})})});ule.displayName=EN;var dle="TabsList",fle=E.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=CN(dle,r),a=cle(r);return h.jsx(b7e,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:h.jsx(Ft.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});fle.displayName=dle;var hle="TabsTrigger",ple=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,a=CN(hle,r),o=cle(r),l=yle(a.baseId,n),c=vle(a.baseId,n),d=n===a.value;return h.jsx(w7e,{asChild:!0,...o,focusable:!i,active:d,children:h.jsx(Ft.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:xt(e.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?a.onValueChange(n):u.preventDefault()}),onKeyDown:xt(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&a.onValueChange(n)}),onFocus:xt(e.onFocus,()=>{const u=a.activationMode!=="manual";!d&&!i&&u&&a.onValueChange(n)})})})});ple.displayName=hle;var mle="TabsContent",gle=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=e,o=CN(mle,r),l=yle(o.baseId,n),c=vle(o.baseId,n),d=n===o.value,u=E.useRef(d);return E.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Ra,{present:i||d,children:({present:f})=>h.jsx(Ft.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:f&&s})})});gle.displayName=mle;function yle(e,t){return`${e}-trigger-${t}`}function vle(e,t){return`${e}-content-${t}`}var k7e=ule,_le=fle,xle=ple,ble=gle;const S7e=k7e,wle=E.forwardRef(({className:e,...t},r)=>h.jsx(_le,{ref:r,className:kt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));wle.displayName=_le.displayName;const pA=E.forwardRef(({className:e,...t},r)=>h.jsx(xle,{ref:r,className:kt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));pA.displayName=xle.displayName;const mA=E.forwardRef(({className:e,...t},r)=>h.jsx(ble,{ref:r,className:kt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));mA.displayName=ble.displayName;const P7e=()=>{ec();const[e,t]=E.useState([]),[r,n]=E.useState([]),[i,s]=E.useState(!0),[a,o]=E.useState(!1),[l,c]=E.useState(!1),{toast:d}=So();E.useEffect(()=>{u(),f();const _=Bn.channel("admin-order-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"order_confirmations"},()=>{f(),d({title:"Tilaus vahvistettu",description:"Asiakas on vahvistanut tilauksen."})}).subscribe();return()=>{Bn.removeChannel(_)}},[d]);const u=async()=>{try{const{data:_,error:T}=await Bn.from("profiles").select("*").order("created_at",{ascending:!1});if(T)throw T;const M=await Promise.all((_||[]).map(async k=>{const{data:j}=await Bn.from("user_roles").select("role").eq("user_id",k.user_id).single();return{...k,role:(j==null?void 0:j.role)||"user"}}));t(M)}catch(_){console.error("Error fetching profiles:",_),d({title:"Virhe",description:"Käyttäjien lataaminen epäonnistui.",variant:"destructive"})}finally{s(!1)}},f=async()=>{try{const{data:_,error:T}=await Bn.from("orders").select(`
          *,
          order_items (
            package_title,
            quantity,
            package_price
          ),
          profiles (
            first_name,
            last_name,
            email
          )
        `).order("created_at",{ascending:!1});if(T)throw console.error("Supabase error:",T),T;console.log("Fetched orders data:",_),n(_||[])}catch(_){console.error("Error fetching orders:",_),d({title:"Virhe",description:"Tilausten lataaminen epäonnistui.",variant:"destructive"})}},p=async _=>{_.preventDefault();const T=_.target,M=new FormData(T),k=M.get("email"),j=M.get("password"),A=M.get("firstName"),R=M.get("lastName");o(!0);try{const{data:I,error:$}=await Bn.auth.admin.createUser({email:k,password:j,user_metadata:{first_name:A,last_name:R},email_confirm:!0});if($)throw $;d({title:"Käyttäjä luotu",description:`Käyttäjä ${k} luotiin onnistuneesti.`}),c(!1),T.reset(),await u()}catch(I){console.error("Error creating user:",I),d({title:"Virhe",description:"Käyttäjän luominen epäonnistui.",variant:"destructive"})}finally{o(!1)}},m=e.filter(_=>_.role==="admin").length,g=e.filter(_=>_.role==="user").length,x=r.filter(_=>!_.confirmed_at).length,v=r.filter(_=>_.confirmed_at).length,y=_=>_.confirmed_at?h.jsx(Ic,{className:"h-4 w-4 text-green-600"}):h.jsx(Pb,{className:"h-4 w-4 text-yellow-600"}),w=_=>_.confirmed_at?"Vahvistettu":"Odottaa vahvistusta",b=_=>_.confirmed_at?"default":"secondary";return i?h.jsx(Qr,{children:h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"flex justify-center items-center min-h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):h.jsx(Qr,{children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[h.jsx(qd,{className:"h-6 w-6"}),h.jsx("h1",{className:"text-3xl font-bold",children:"Admin Portaali"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-5 mb-8",children:[h.jsxs(yi,{children:[h.jsxs(Lo,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Fo,{className:"text-sm font-medium",children:"Käyttäjiä yhteensä"}),h.jsx(jb,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsx(vi,{children:h.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),h.jsxs(yi,{children:[h.jsxs(Lo,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Fo,{className:"text-sm font-medium",children:"Järjestelmänvalvojia"}),h.jsx(qd,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsx(vi,{children:h.jsx("div",{className:"text-2xl font-bold",children:m})})]}),h.jsxs(yi,{children:[h.jsxs(Lo,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Fo,{className:"text-sm font-medium",children:"Tavallisia käyttäjiä"}),h.jsx(jb,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsx(vi,{children:h.jsx("div",{className:"text-2xl font-bold",children:g})})]}),h.jsxs(yi,{children:[h.jsxs(Lo,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Fo,{className:"text-sm font-medium",children:"Odottavia tilauksia"}),h.jsx(Pb,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsx(vi,{children:h.jsx("div",{className:"text-2xl font-bold",children:x})})]}),h.jsxs(yi,{children:[h.jsxs(Lo,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Fo,{className:"text-sm font-medium",children:"Vahvistettuja tilauksia"}),h.jsx(Ny,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsx(vi,{children:h.jsx("div",{className:"text-2xl font-bold",children:v})})]})]}),h.jsxs(S7e,{defaultValue:"users",className:"space-y-4",children:[h.jsxs(wle,{children:[h.jsx(pA,{value:"users",children:"Käyttäjät"}),h.jsx(pA,{value:"orders",children:"Tilaukset"})]}),h.jsx(mA,{value:"users",children:h.jsxs(yi,{children:[h.jsx(Lo,{children:h.jsxs(Fo,{className:"flex items-center justify-between",children:["Käyttäjien hallinta",h.jsxs(YZ,{open:l,onOpenChange:c,children:[h.jsx(QZ,{asChild:!0,children:h.jsxs(zn,{children:[h.jsx(_he,{className:"w-4 h-4 mr-2"}),"Luo uusi käyttäjä"]})}),h.jsxs(N$,{children:[h.jsx(D$,{children:h.jsx(R$,{children:"Luo uusi käyttäjä"})}),h.jsxs("form",{onSubmit:p,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"firstName",children:"Etunimi"}),h.jsx(bn,{id:"firstName",name:"firstName"})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"lastName",children:"Sukunimi"}),h.jsx(bn,{id:"lastName",name:"lastName"})]})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"email",children:"Sähköposti"}),h.jsx(bn,{id:"email",name:"email",type:"email",required:!0})]}),h.jsxs("div",{children:[h.jsx(Li,{htmlFor:"password",children:"Salasana"}),h.jsx(bn,{id:"password",name:"password",type:"password",required:!0})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(zn,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Peruuta"}),h.jsx(zn,{type:"submit",disabled:a,children:a?"Luodaan...":"Luo käyttäjä"})]})]})]})]})]})}),h.jsx(vi,{children:h.jsx("div",{className:"space-y-4",children:e.map(_=>h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:_.first_name&&_.last_name?`${_.first_name} ${_.last_name}`:_.email}),h.jsx("div",{className:"text-sm text-muted-foreground",children:_.email}),h.jsxs("div",{className:"text-xs text-muted-foreground",children:["Luotu: ",new Date(_.created_at).toLocaleDateString("fi-FI")]})]}),h.jsx(dA,{variant:_.role==="admin"?"default":"secondary",children:_.role==="admin"?"Admin":"Käyttäjä"})]},_.id))})})]})}),h.jsx(mA,{value:"orders",children:h.jsxs(yi,{children:[h.jsx(Lo,{children:h.jsxs(Fo,{className:"flex items-center gap-2",children:[h.jsx(Ny,{className:"h-5 w-5"}),"Tilausten hallinta"]})}),h.jsx(vi,{children:r.length===0?h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-muted-foreground",children:"Ei tilauksia vielä."})}):h.jsxs(ele,{children:[h.jsx(tle,{children:h.jsxs(fA,{children:[h.jsx(kc,{children:"Tilausnumero"}),h.jsx(kc,{children:"Asiakas"}),h.jsx(kc,{children:"Tilaaja"}),h.jsx(kc,{children:"Tuotteet"}),h.jsx(kc,{children:"Summa"}),h.jsx(kc,{children:"Luotu"}),h.jsx(kc,{children:"Tila"})]})}),h.jsx(rle,{children:r.map(_=>h.jsxs(fA,{children:[h.jsx(Sc,{className:"font-medium",children:_.order_number||_.id.slice(0,8)+"..."}),h.jsx(Sc,{children:h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:_.customer_name}),h.jsx("div",{className:"text-sm text-muted-foreground",children:_.customer_email}),_.customer_phone&&h.jsx("div",{className:"text-sm text-muted-foreground",children:_.customer_phone})]})}),h.jsx(Sc,{children:h.jsx("div",{children:_.profiles?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"font-medium",children:_.profiles.first_name&&_.profiles.last_name?`${_.profiles.first_name} ${_.profiles.last_name}`:_.profiles.email}),h.jsx("div",{className:"text-sm text-muted-foreground",children:_.profiles.email})]}):h.jsx("div",{className:"text-sm text-muted-foreground",children:"Käyttäjätietoja ei löydy"})})}),h.jsx(Sc,{children:h.jsx("div",{className:"space-y-1",children:_.order_items.map((T,M)=>h.jsxs("div",{className:"text-sm",children:[T.quantity,"x ",T.package_title]},M))})}),h.jsxs(Sc,{children:[Number(_.total_amount).toFixed(2)," €"]}),h.jsx(Sc,{children:new Date(_.created_at).toLocaleDateString("fi-FI")}),h.jsx(Sc,{children:h.jsxs(dA,{variant:b(_),className:"flex items-center gap-1 w-fit",children:[y(_),w(_)]})})]},_.id))})]})})]})})]})]})})},E7e=()=>{const{user:e,loading:t}=ec();return t?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}):e?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"mb-12 text-center",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tervetuloa!"}),h.jsx("p",{className:"text-xl text-muted-foreground",children:"Hallitse tilauksiasi täältä."})]}),h.jsx("div",{className:"mb-8",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx(ghe,{className:"h-8 w-8 text-primary"}),h.jsx("h2",{className:"text-2xl font-bold",children:"Verkkokauppa"})]}),h.jsx(zn,{size:"lg",className:"bg-primary hover:bg-primary/90 w-full",onClick:()=>window.location.href="/verkkokauppa",children:"Tästä verkkokauppaan"})]}),h.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx(Ny,{className:"h-8 w-8 text-green-600"}),h.jsx("h2",{className:"text-2xl font-bold",children:"Tilaukseni"})]}),h.jsx(zn,{size:"lg",className:"bg-green-600 hover:bg-green-700 w-full",onClick:()=>window.location.href="/tilaukset",children:"Näytä tilaukset"})]})]})})]})})}):h.jsx(zX,{to:"/",replace:!0})},C7e=()=>{const{token:e}=RX(),t=ff(),{toast:r}=So(),[n,i]=E.useState(!0),[s,a]=E.useState(!1),[o,l]=E.useState(null),[c,d]=E.useState(null);return E.useEffect(()=>{(async()=>{if(!e){l("Virheellinen vahvistuslinkki"),i(!1);return}try{console.log("Confirming order with token:",e);const{data:f,error:p}=await Bn.from("orders").select("*").eq("confirmation_token",e).single();if(console.log("Order query result:",{order:f,orderError:p}),p||!f){console.error("Order not found:",p),l("Tilausta ei löytynyt tai linkki on virheellinen"),i(!1);return}if(f.confirmed_at){l("Tilaus on jo vahvistettu aiemmin"),i(!1);return}const m=await fetch("https://api.ipify.org?format=json"),{ip:g}=await m.json(),x=navigator.userAgent,{error:v}=await Bn.from("orders").update({confirmed_at:new Date().toISOString(),status:"confirmed"}).eq("id",f.id);if(v)throw v;const{error:y}=await Bn.from("order_confirmations").insert({order_id:f.id,ip_address:g,user_agent:x});y&&console.error("Failed to log confirmation:",y),d(f),a(!0),r({title:"Tilaus vahvistettu!",description:"Lähetämme tunnukset sähköpostitse pian."})}catch(f){console.error("Error confirming order:",f),l("Virhe vahvistettaessa tilausta")}finally{i(!1)}})()},[e,r]),n?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[h.jsx(I7,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Vahvistetaan tilausta..."}),h.jsx("p",{className:"text-muted-foreground",children:"Odota hetki, käsittelemme vahvistustasi."})]})})}):o?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[h.jsx(Zfe,{className:"h-16 w-16 text-red-500 mx-auto mb-6"}),h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Virhe vahvistettaessa"}),h.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:o}),h.jsx(zn,{onClick:()=>t("/"),variant:"outline",children:"Palaa etusivulle"})]})})}):s?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[h.jsx(Ic,{className:"h-16 w-16 text-green-500 mx-auto mb-6"}),h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Kiitos tilauksen vahvituksesta!"}),h.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Saat meiltä hetken päästä sähköpostia, jossa annamme tarkat ohjeet kuinka pääset ottamaan tuotteen käyttöön."}),c&&h.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg mb-8 text-left",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Tilauksen tiedot:"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Tilausnumero:"})," ",c.order_number||c.id]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Sähköposti:"})," ",c.customer_email]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Kokonaissumma:"})," ",c.total_amount," €"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Vahvistettu:"})," ",new Date().toLocaleString("fi-FI")]})]}),h.jsx("div",{className:"text-center",children:h.jsx(zn,{onClick:()=>t("/"),variant:"outline",children:"Etusivulle"})})]})})}):null},j7e=()=>{const{user:e,loading:t}=ec(),[r,n]=E.useState([]),[i,s]=E.useState(!0),{toast:a}=So();E.useEffect(()=>{if(e){o();const u=Bn.channel("order-confirmations").on("postgres_changes",{event:"INSERT",schema:"public",table:"order_confirmations"},()=>{o(),a({title:"Tilaus vahvistettu",description:"Tilaus on vahvistettu onnistuneesti."})}).subscribe();return()=>{Bn.removeChannel(u)}}},[e,a]);const o=async()=>{if(e)try{const{data:u}=await Bn.from("user_roles").select("role").eq("user_id",e.id).single(),f=(u==null?void 0:u.role)==="admin";let p=Bn.from("orders").select(`
          *,
          order_items (
            package_title,
            quantity,
            package_price
          ),
          profiles (
            first_name,
            last_name,
            email
          )
        `);f||(p=p.eq("user_id",e.id));const{data:m,error:g}=await p.order("created_at",{ascending:!1});if(g)throw g;n(m||[])}catch(u){console.error("Error fetching orders:",u),a({title:"Virhe",description:"Tilausten lataaminen epäonnistui.",variant:"destructive"})}finally{s(!1)}},l=(u,f)=>f?h.jsx(Ic,{className:"h-4 w-4 text-green-500"}):u==="pending"?h.jsx(Pb,{className:"h-4 w-4 text-yellow-500"}):h.jsx(Qfe,{className:"h-4 w-4 text-gray-500"}),c=(u,f)=>f?"Vahvistettu":u==="pending"?"Odottaa vahvistusta":u,d=(u,f)=>f?"default":u==="pending"?"secondary":"outline";return t?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}):e?i?h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-center items-center min-h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})})}):h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[h.jsx(Ny,{className:"h-8 w-8 text-primary"}),h.jsx("h1",{className:"text-4xl font-bold",children:"Tilaukseni"})]}),r.length===0?h.jsx(yi,{children:h.jsxs(vi,{className:"py-8 text-center",children:[h.jsx(Ny,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium mb-2",children:"Ei tilauksia"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"Et ole vielä tehnyt yhtään tilausta."}),h.jsx(zn,{onClick:()=>window.location.href="/verkkokauppa",children:"Siirry verkkokauppaan"})]})}):h.jsx("div",{className:"space-y-4",children:r.map(u=>h.jsxs(yi,{className:"w-full",children:[h.jsx(Lo,{children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsxs(Fo,{className:"text-lg",children:["Tilaus #",u.order_number||u.id.slice(0,8)]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(u.created_at).toLocaleDateString("fi-FI")}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Asiakas:"})," ",u.customer_name," • ",u.customer_email]}),u.profiles&&h.jsxs("p",{children:[h.jsx("strong",{children:"Tilaaja:"})," ",u.profiles.first_name&&u.profiles.last_name?`${u.profiles.first_name} ${u.profiles.last_name}`:u.profiles.email]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[l(u.status,u.confirmed_at),h.jsx(dA,{variant:d(u.status,u.confirmed_at),children:c(u.status,u.confirmed_at)})]})]})}),h.jsx(vi,{children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium mb-2",children:"Tilatut paketit:"}),h.jsx("ul",{className:"space-y-1",children:u.order_items.map((f,p)=>h.jsxs("li",{className:"flex justify-between text-sm",children:[h.jsxs("span",{children:[f.package_title," (",f.quantity," kpl)"]}),h.jsxs("span",{children:[(f.package_price*f.quantity).toFixed(2)," €"]})]},p))})]}),h.jsx("div",{className:"border-t pt-2",children:h.jsxs("div",{className:"flex justify-between font-medium",children:[h.jsx("span",{children:"Yhteensä:"}),h.jsxs("span",{children:[Number(u.total_amount).toFixed(2)," €"]})]})}),u.status==="pending"&&!u.confirmed_at&&h.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:h.jsxs("p",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"Toimenpiteet:"})," Tarkista sähköpostisi ja vahvista tilaus klikkaamalla vahvistuslinkkiä."]})}),u.confirmed_at&&h.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:h.jsxs("p",{className:"text-sm text-green-800",children:[h.jsx("strong",{children:"Vahvistettu:"})," ",new Date(u.confirmed_at).toLocaleDateString("fi-FI")," ",new Date(u.confirmed_at).toLocaleTimeString("fi-FI")]})})]})})]},u.id))})]})})}):h.jsx(zX,{to:"/",replace:!0})},A7e=()=>{var i;const e=al();ff();const t=((i=e.state)==null?void 0:i.from)||"/",r=()=>{const s="https://omaverkkoturva.fi/login";sessionStorage.setItem("redirectAfterLogin",t),window.location.href=s},n=()=>{const s="https://omaverkkoturva.fi";window.location.href=s};return h.jsx(Qr,{children:h.jsx("div",{className:"min-h-screen bg-background pt-44 pb-12",children:h.jsx("div",{className:"max-w-md mx-auto px-4",children:h.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-lg",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Sisäänkirjautuminen vaaditaan"}),h.jsx("p",{className:"text-muted-foreground",children:"Tämä sivu vaatii sisäänkirjautumisen portaalin kautta"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("button",{onClick:r,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Kirjaudu sisään portaalin kautta"}),h.jsx("button",{onClick:n,className:"w-full bg-secondary text-secondary-foreground py-3 px-4 rounded-lg font-medium hover:bg-secondary/90 transition-colors",children:"Palaa portaaliin"})]}),h.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:h.jsxs("p",{children:["Jos sinulla on ongelmia kirjautumisessa,",h.jsx("br",{}),"ota yhteyttä ylläpitoon"]})})]})})})})},O7e=()=>{const e=ff(),{user:t}=ec();return E.useEffect(()=>{if(t){const r=sessionStorage.getItem("redirectAfterLogin")||"/";sessionStorage.removeItem("redirectAfterLogin"),e(r,{replace:!0})}},[t,e]),h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Kirjaututaan sisään..."})]})})},$7e=()=>{const[e]=E.useState(()=>new Pge);return h.jsx(Cge,{client:e,children:h.jsx(W_e,{children:h.jsx(G_e,{children:h.jsxs(ige,{children:[h.jsx(rpe,{}),h.jsx(Ape,{}),h.jsx(Mye,{children:h.jsx(H_e,{children:h.jsxs(yye,{children:[h.jsx(Kr,{path:"/confirm-order/:token",element:h.jsx(C7e,{})}),h.jsx(Kr,{path:"/login",element:h.jsx(A7e,{})}),h.jsx(Kr,{path:"/auth/callback",element:h.jsx(O7e,{})}),h.jsx(Kr,{path:"/",element:h.jsx(aMe,{})}),h.jsx(Kr,{path:"/projects/firecat",element:h.jsx(lMe,{})}),h.jsx(Kr,{path:"/projects/sport-retail",element:h.jsx(cMe,{})}),h.jsx(Kr,{path:"/projects/workwear",element:h.jsx(uMe,{})}),h.jsx(Kr,{path:"/projects/hockey",element:h.jsx(dMe,{})}),h.jsx(Kr,{path:"/projects/pet-tracker",element:h.jsx(fMe,{})}),h.jsx(Kr,{path:"/tech-details",element:h.jsx(gMe,{})}),h.jsx(Kr,{path:"/development-process",element:h.jsx(yMe,{})}),h.jsx(Kr,{path:"/about",element:h.jsx(NV,{})}),h.jsx(Kr,{path:"/meista",element:h.jsx(NV,{})}),h.jsx(Kr,{path:"/careers",element:h.jsx(_Me,{})}),h.jsx(Kr,{path:"/privacy-policy",element:h.jsx(xMe,{})}),h.jsx(Kr,{path:"/blog",element:h.jsx(bMe,{})}),h.jsx(Kr,{path:"/blog/:slug",element:h.jsx(tHe,{})}),h.jsx(Kr,{path:"/identiteettiturva",element:h.jsx(rHe,{})}),h.jsx(Kr,{path:"/verkkokauppa",element:h.jsx(s7e,{})}),h.jsx(Kr,{path:"/irtisanomislomake",element:h.jsx(s9e,{})}),h.jsx(Kr,{path:"/ota-yhteytta",element:h.jsx(d9e,{})}),h.jsx(Kr,{path:"/logo-tool",element:h.jsx(i7e,{})}),h.jsx(Kr,{path:"/admin",element:h.jsx(P7e,{})}),h.jsx(Kr,{path:"/dashboard",element:h.jsx(E7e,{})}),h.jsx(Kr,{path:"/tilaukset",element:h.jsx(j7e,{})}),h.jsx(Kr,{path:"*",element:h.jsx(oMe,{})})]})})})]})})})})};Jq(document.getElementById("root")).render(h.jsx(a7,{children:h.jsx($7e,{})}));
