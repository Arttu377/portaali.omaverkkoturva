var Jle=Object.defineProperty;var Z3=e=>{throw TypeError(e)};var ece=(e,t,r)=>t in e?Jle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var de=(e,t,r)=>ece(e,typeof t!="symbol"?t+"":t,r),BM=(e,t,r)=>t.has(e)||Z3("Cannot "+r);var Ge=(e,t,r)=>(BM(e,t,"read from private field"),r?r.call(e):t.get(e)),Fr=(e,t,r)=>t.has(e)?Z3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ur=(e,t,r,n)=>(BM(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),qi=(e,t,r)=>(BM(e,t,"access private method"),r);var O0=(e,t,r,n)=>({set _(i){ur(e,t,i,r)},get _(){return Ge(e,t,n)}});function tce(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rce(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Z9={exports:{}},T1={},J9={exports:{}},_r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_=Symbol.for("react.element"),nce=Symbol.for("react.portal"),ice=Symbol.for("react.fragment"),sce=Symbol.for("react.strict_mode"),ace=Symbol.for("react.profiler"),oce=Symbol.for("react.provider"),lce=Symbol.for("react.context"),cce=Symbol.for("react.forward_ref"),uce=Symbol.for("react.suspense"),dce=Symbol.for("react.memo"),fce=Symbol.for("react.lazy"),J3=Symbol.iterator;function hce(e){return e===null||typeof e!="object"?null:(e=J3&&e[J3]||e["@@iterator"],typeof e=="function"?e:null)}var eK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tK=Object.assign,rK={};function nm(e,t,r){this.props=e,this.context=t,this.refs=rK,this.updater=r||eK}nm.prototype.isReactComponent={};nm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nK(){}nK.prototype=nm.prototype;function CA(e,t,r){this.props=e,this.context=t,this.refs=rK,this.updater=r||eK}var AA=CA.prototype=new nK;AA.constructor=CA;tK(AA,nm.prototype);AA.isPureReactComponent=!0;var e4=Array.isArray,iK=Object.prototype.hasOwnProperty,OA={current:null},sK={key:!0,ref:!0,__self:!0,__source:!0};function aK(e,t,r){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)iK.call(t,n)&&!sK.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:u_,type:e,key:s,ref:a,props:i,_owner:OA.current}}function pce(e,t){return{$$typeof:u_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $A(e){return typeof e=="object"&&e!==null&&e.$$typeof===u_}function mce(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var t4=/\/+/g;function zM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mce(""+e.key):t.toString(36)}function zx(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case u_:case nce:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+zM(a,0):n,e4(i)?(r="",e!=null&&(r=e.replace(t4,"$&/")+"/"),zx(i,t,r,"",function(c){return c})):i!=null&&($A(i)&&(i=pce(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(t4,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",e4(e))for(var o=0;o<e.length;o++){s=e[o];var l=n+zM(s,o);a+=zx(s,t,r,l,i)}else if(l=hce(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=n+zM(s,o++),a+=zx(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function $0(e,t,r){if(e==null)return e;var n=[],i=0;return zx(e,n,"","",function(s){return t.call(r,s,i++)}),n}function gce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ps={current:null},Vx={transition:null},vce={ReactCurrentDispatcher:Ps,ReactCurrentBatchConfig:Vx,ReactCurrentOwner:OA};function oK(){throw Error("act(...) is not supported in production builds of React.")}_r.Children={map:$0,forEach:function(e,t,r){$0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $0(e,function(){t++}),t},toArray:function(e){return $0(e,function(t){return t})||[]},only:function(e){if(!$A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_r.Component=nm;_r.Fragment=ice;_r.Profiler=ace;_r.PureComponent=CA;_r.StrictMode=sce;_r.Suspense=uce;_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vce;_r.act=oK;_r.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=tK({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=OA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)iK.call(t,l)&&!sK.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:u_,type:e.type,key:i,ref:s,props:n,_owner:a}};_r.createContext=function(e){return e={$$typeof:lce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oce,_context:e},e.Consumer=e};_r.createElement=aK;_r.createFactory=function(e){var t=aK.bind(null,e);return t.type=e,t};_r.createRef=function(){return{current:null}};_r.forwardRef=function(e){return{$$typeof:cce,render:e}};_r.isValidElement=$A;_r.lazy=function(e){return{$$typeof:fce,_payload:{_status:-1,_result:e},_init:gce}};_r.memo=function(e,t){return{$$typeof:dce,type:e,compare:t===void 0?null:t}};_r.startTransition=function(e){var t=Vx.transition;Vx.transition={};try{e()}finally{Vx.transition=t}};_r.unstable_act=oK;_r.useCallback=function(e,t){return Ps.current.useCallback(e,t)};_r.useContext=function(e){return Ps.current.useContext(e)};_r.useDebugValue=function(){};_r.useDeferredValue=function(e){return Ps.current.useDeferredValue(e)};_r.useEffect=function(e,t){return Ps.current.useEffect(e,t)};_r.useId=function(){return Ps.current.useId()};_r.useImperativeHandle=function(e,t,r){return Ps.current.useImperativeHandle(e,t,r)};_r.useInsertionEffect=function(e,t){return Ps.current.useInsertionEffect(e,t)};_r.useLayoutEffect=function(e,t){return Ps.current.useLayoutEffect(e,t)};_r.useMemo=function(e,t){return Ps.current.useMemo(e,t)};_r.useReducer=function(e,t,r){return Ps.current.useReducer(e,t,r)};_r.useRef=function(e){return Ps.current.useRef(e)};_r.useState=function(e){return Ps.current.useState(e)};_r.useSyncExternalStore=function(e,t,r){return Ps.current.useSyncExternalStore(e,t,r)};_r.useTransition=function(){return Ps.current.useTransition()};_r.version="18.3.1";J9.exports=_r;var E=J9.exports;const ae=Dr(E),lK=tce({__proto__:null,default:ae},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yce=E,_ce=Symbol.for("react.element"),xce=Symbol.for("react.fragment"),bce=Object.prototype.hasOwnProperty,wce=yce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kce={key:!0,ref:!0,__self:!0,__source:!0};function cK(e,t,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)bce.call(t,n)&&!kce.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:_ce,type:e,key:s,ref:a,props:i,_owner:wce.current}}T1.Fragment=xce;T1.jsx=cK;T1.jsxs=cK;Z9.exports=T1;var u=Z9.exports,uK={exports:{}},ga={},dK={exports:{}},fK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,q){var ee=O.length;O.push(q);e:for(;0<ee;){var B=ee-1>>>1,D=O[B];if(0<i(D,q))O[B]=q,O[ee]=D,ee=B;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var q=O[0],ee=O.pop();if(ee!==q){O[0]=ee;e:for(var B=0,D=O.length,K=D>>>1;B<K;){var oe=2*(B+1)-1,_e=O[oe],ue=oe+1,ye=O[ue];if(0>i(_e,ee))ue<D&&0>i(ye,_e)?(O[B]=ye,O[ue]=ee,B=ue):(O[B]=_e,O[oe]=ee,B=oe);else if(ue<D&&0>i(ye,ee))O[B]=ye,O[ue]=ee,B=ue;else break e}}return q}function i(O,q){var ee=O.sortIndex-q.sortIndex;return ee!==0?ee:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,d=null,h=3,p=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var q=r(c);q!==null;){if(q.callback===null)n(c);else if(q.startTime<=O)n(c),q.sortIndex=q.expirationTime,t(l,q);else break;q=r(c)}}function b(O){if(g=!1,_(O),!m)if(r(l)!==null)m=!0,G(w);else{var q=r(c);q!==null&&H(b,q.startTime-O)}}function w(O,q){m=!1,g&&(g=!1,y(M),M=-1),p=!0;var ee=h;try{for(_(q),d=r(l);d!==null&&(!(d.expirationTime>q)||O&&!R());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var D=B(d.expirationTime<=q);q=e.unstable_now(),typeof D=="function"?d.callback=D:d===r(l)&&n(l),_(q)}else n(l);d=r(l)}if(d!==null)var K=!0;else{var oe=r(c);oe!==null&&H(b,oe.startTime-q),K=!1}return K}finally{d=null,h=ee,p=!1}}var k=!1,T=null,M=-1,j=5,C=-1;function R(){return!(e.unstable_now()-C<j)}function I(){if(T!==null){var O=e.unstable_now();C=O;var q=!0;try{q=T(!0,O)}finally{q?N():(k=!1,T=null)}}else k=!1}var N;if(typeof v=="function")N=function(){v(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=I,N=function(){V.postMessage(null)}}else N=function(){x(I,0)};function G(O){T=O,k||(k=!0,N())}function H(O,q){M=x(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,G(w))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var ee=h;h=q;try{return O()}finally{h=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ee=h;h=O;try{return q()}finally{h=ee}},e.unstable_scheduleCallback=function(O,q,ee){var B=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?B+ee:B):ee=B,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ee+D,O={id:f++,callback:q,priorityLevel:O,startTime:ee,expirationTime:D,sortIndex:-1},ee>B?(O.sortIndex=ee,t(c,O),r(l)===null&&O===r(c)&&(g?(y(M),M=-1):g=!0,H(b,ee-B))):(O.sortIndex=D,t(l,O),m||p||(m=!0,G(w))),O},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(O){var q=h;return function(){var ee=h;h=q;try{return O.apply(this,arguments)}finally{h=ee}}}})(fK);dK.exports=fK;var Tce=dK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mce=E,ma=Tce;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hK=new Set,Av={};function pf(e,t){hp(e,t),hp(e+"Capture",t)}function hp(e,t){for(Av[e]=t,e=0;e<t.length;e++)hK.add(t[e])}var Wl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OE=Object.prototype.hasOwnProperty,Sce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r4={},n4={};function Pce(e){return OE.call(n4,e)?!0:OE.call(r4,e)?!1:Sce.test(e)?n4[e]=!0:(r4[e]=!0,!1)}function Ece(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jce(e,t,r,n){if(t===null||typeof t>"u"||Ece(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Es(e,t,r,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bi[e]=new Es(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bi[t]=new Es(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bi[e]=new Es(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bi[e]=new Es(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bi[e]=new Es(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bi[e]=new Es(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bi[e]=new Es(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bi[e]=new Es(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bi[e]=new Es(e,5,!1,e.toLowerCase(),null,!1,!1)});var NA=/[\-:]([a-z])/g;function IA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(NA,IA);Bi[t]=new Es(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(NA,IA);Bi[t]=new Es(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(NA,IA);Bi[t]=new Es(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bi[e]=new Es(e,1,!1,e.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new Es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bi[e]=new Es(e,1,!1,e.toLowerCase(),null,!0,!0)});function DA(e,t,r,n){var i=Bi.hasOwnProperty(t)?Bi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jce(t,r,i,n)&&(r=null),n||i===null?Pce(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ic=Mce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N0=Symbol.for("react.element"),mh=Symbol.for("react.portal"),gh=Symbol.for("react.fragment"),LA=Symbol.for("react.strict_mode"),$E=Symbol.for("react.profiler"),pK=Symbol.for("react.provider"),mK=Symbol.for("react.context"),RA=Symbol.for("react.forward_ref"),NE=Symbol.for("react.suspense"),IE=Symbol.for("react.suspense_list"),FA=Symbol.for("react.memo"),Cc=Symbol.for("react.lazy"),gK=Symbol.for("react.offscreen"),i4=Symbol.iterator;function og(e){return e===null||typeof e!="object"?null:(e=i4&&e[i4]||e["@@iterator"],typeof e=="function"?e:null)}var In=Object.assign,VM;function Ug(e){if(VM===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);VM=t&&t[1]||""}return`
`+VM+e}var UM=!1;function WM(e,t){if(!e||UM)return"";UM=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{UM=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ug(e):""}function Cce(e){switch(e.tag){case 5:return Ug(e.type);case 16:return Ug("Lazy");case 13:return Ug("Suspense");case 19:return Ug("SuspenseList");case 0:case 2:case 15:return e=WM(e.type,!1),e;case 11:return e=WM(e.type.render,!1),e;case 1:return e=WM(e.type,!0),e;default:return""}}function DE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gh:return"Fragment";case mh:return"Portal";case $E:return"Profiler";case LA:return"StrictMode";case NE:return"Suspense";case IE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mK:return(e.displayName||"Context")+".Consumer";case pK:return(e._context.displayName||"Context")+".Provider";case RA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case FA:return t=e.displayName||null,t!==null?t:DE(e.type)||"Memo";case Cc:t=e._payload,e=e._init;try{return DE(e(t))}catch{}}return null}function Ace(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DE(t);case 8:return t===LA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vK(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Oce(e){var t=vK(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function I0(e){e._valueTracker||(e._valueTracker=Oce(e))}function yK(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=vK(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function LE(e,t){var r=t.checked;return In({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function s4(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=lu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _K(e,t){t=t.checked,t!=null&&DA(e,"checked",t,!1)}function RE(e,t){_K(e,t);var r=lu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?FE(e,t.type,r):t.hasOwnProperty("defaultValue")&&FE(e,t.type,lu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function a4(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function FE(e,t,r){(t!=="number"||gb(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wg=Array.isArray;function zh(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+lu(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function BE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return In({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function o4(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(Wg(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:lu(r)}}function xK(e,t){var r=lu(t.value),n=lu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function l4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bK(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bK(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var D0,wK=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(D0=D0||document.createElement("div"),D0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=D0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ov(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$ce=["Webkit","ms","Moz","O"];Object.keys(sv).forEach(function(e){$ce.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sv[t]=sv[e]})});function kK(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sv.hasOwnProperty(e)&&sv[e]?(""+t).trim():t+"px"}function TK(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=kK(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Nce=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function VE(e,t){if(t){if(Nce[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function UE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WE=null;function BA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var GE=null,Vh=null,Uh=null;function c4(e){if(e=h_(e)){if(typeof GE!="function")throw Error(et(280));var t=e.stateNode;t&&(t=j1(t),GE(e.stateNode,e.type,t))}}function MK(e){Vh?Uh?Uh.push(e):Uh=[e]:Vh=e}function SK(){if(Vh){var e=Vh,t=Uh;if(Uh=Vh=null,c4(e),t)for(e=0;e<t.length;e++)c4(t[e])}}function PK(e,t){return e(t)}function EK(){}var GM=!1;function jK(e,t,r){if(GM)return e(t,r);GM=!0;try{return PK(e,t,r)}finally{GM=!1,(Vh!==null||Uh!==null)&&(EK(),SK())}}function $v(e,t){var r=e.stateNode;if(r===null)return null;var n=j1(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var HE=!1;if(Wl)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){HE=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{HE=!1}function Ice(e,t,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(f){this.onError(f)}}var av=!1,vb=null,yb=!1,KE=null,Dce={onError:function(e){av=!0,vb=e}};function Lce(e,t,r,n,i,s,a,o,l){av=!1,vb=null,Ice.apply(Dce,arguments)}function Rce(e,t,r,n,i,s,a,o,l){if(Lce.apply(this,arguments),av){if(av){var c=vb;av=!1,vb=null}else throw Error(et(198));yb||(yb=!0,KE=c)}}function mf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function CK(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u4(e){if(mf(e)!==e)throw Error(et(188))}function Fce(e){var t=e.alternate;if(!t){if(t=mf(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return u4(i),e;if(s===n)return u4(i),t;s=s.sibling}throw Error(et(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function AK(e){return e=Fce(e),e!==null?OK(e):null}function OK(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OK(e);if(t!==null)return t;e=e.sibling}return null}var $K=ma.unstable_scheduleCallback,d4=ma.unstable_cancelCallback,Bce=ma.unstable_shouldYield,zce=ma.unstable_requestPaint,Yn=ma.unstable_now,Vce=ma.unstable_getCurrentPriorityLevel,zA=ma.unstable_ImmediatePriority,NK=ma.unstable_UserBlockingPriority,_b=ma.unstable_NormalPriority,Uce=ma.unstable_LowPriority,IK=ma.unstable_IdlePriority,M1=null,Zo=null;function Wce(e){if(Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(M1,e,void 0,(e.current.flags&128)===128)}catch{}}var ko=Math.clz32?Math.clz32:Kce,Gce=Math.log,Hce=Math.LN2;function Kce(e){return e>>>=0,e===0?32:31-(Gce(e)/Hce|0)|0}var L0=64,R0=4194304;function Gg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xb(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Gg(o):(s&=a,s!==0&&(n=Gg(s)))}else a=r&~i,a!==0?n=Gg(a):s!==0&&(n=Gg(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ko(t),i=1<<r,n|=e[r],t&=~i;return n}function qce(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xce(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ko(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=qce(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function qE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function DK(){var e=L0;return L0<<=1,!(L0&4194240)&&(L0=64),e}function HM(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function d_(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ko(t),e[t]=r}function Yce(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ko(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function VA(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ko(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Gr=0;function LK(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var RK,UA,FK,BK,zK,XE=!1,F0=[],Yc=null,Qc=null,Zc=null,Nv=new Map,Iv=new Map,Ic=[],Qce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f4(e,t){switch(e){case"focusin":case"focusout":Yc=null;break;case"dragenter":case"dragleave":Qc=null;break;case"mouseover":case"mouseout":Zc=null;break;case"pointerover":case"pointerout":Nv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iv.delete(t.pointerId)}}function cg(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=h_(t),t!==null&&UA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Zce(e,t,r,n,i){switch(t){case"focusin":return Yc=cg(Yc,e,t,r,n,i),!0;case"dragenter":return Qc=cg(Qc,e,t,r,n,i),!0;case"mouseover":return Zc=cg(Zc,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Nv.set(s,cg(Nv.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Iv.set(s,cg(Iv.get(s)||null,e,t,r,n,i)),!0}return!1}function VK(e){var t=Td(e.target);if(t!==null){var r=mf(t);if(r!==null){if(t=r.tag,t===13){if(t=CK(r),t!==null){e.blockedOn=t,zK(e.priority,function(){FK(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ux(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=YE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);WE=n,r.target.dispatchEvent(n),WE=null}else return t=h_(r),t!==null&&UA(t),e.blockedOn=r,!1;t.shift()}return!0}function h4(e,t,r){Ux(e)&&r.delete(t)}function Jce(){XE=!1,Yc!==null&&Ux(Yc)&&(Yc=null),Qc!==null&&Ux(Qc)&&(Qc=null),Zc!==null&&Ux(Zc)&&(Zc=null),Nv.forEach(h4),Iv.forEach(h4)}function ug(e,t){e.blockedOn===t&&(e.blockedOn=null,XE||(XE=!0,ma.unstable_scheduleCallback(ma.unstable_NormalPriority,Jce)))}function Dv(e){function t(i){return ug(i,e)}if(0<F0.length){ug(F0[0],e);for(var r=1;r<F0.length;r++){var n=F0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Yc!==null&&ug(Yc,e),Qc!==null&&ug(Qc,e),Zc!==null&&ug(Zc,e),Nv.forEach(t),Iv.forEach(t),r=0;r<Ic.length;r++)n=Ic[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ic.length&&(r=Ic[0],r.blockedOn===null);)VK(r),r.blockedOn===null&&Ic.shift()}var Wh=ic.ReactCurrentBatchConfig,bb=!0;function eue(e,t,r,n){var i=Gr,s=Wh.transition;Wh.transition=null;try{Gr=1,WA(e,t,r,n)}finally{Gr=i,Wh.transition=s}}function tue(e,t,r,n){var i=Gr,s=Wh.transition;Wh.transition=null;try{Gr=4,WA(e,t,r,n)}finally{Gr=i,Wh.transition=s}}function WA(e,t,r,n){if(bb){var i=YE(e,t,r,n);if(i===null)rS(e,t,n,wb,r),f4(e,n);else if(Zce(i,e,t,r,n))n.stopPropagation();else if(f4(e,n),t&4&&-1<Qce.indexOf(e)){for(;i!==null;){var s=h_(i);if(s!==null&&RK(s),s=YE(e,t,r,n),s===null&&rS(e,t,n,wb,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else rS(e,t,n,null,r)}}var wb=null;function YE(e,t,r,n){if(wb=null,e=BA(n),e=Td(e),e!==null)if(t=mf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=CK(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wb=e,null}function UK(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vce()){case zA:return 1;case NK:return 4;case _b:case Uce:return 16;case IK:return 536870912;default:return 16}default:return 16}}var Gc=null,GA=null,Wx=null;function WK(){if(Wx)return Wx;var e,t=GA,r=t.length,n,i="value"in Gc?Gc.value:Gc.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[s-n];n++);return Wx=i.slice(e,1<n?1-n:void 0)}function Gx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B0(){return!0}function p4(){return!1}function va(e){function t(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?B0:p4,this.isPropagationStopped=p4,this}return In(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=B0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=B0)},persist:function(){},isPersistent:B0}),t}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HA=va(im),f_=In({},im,{view:0,detail:0}),rue=va(f_),KM,qM,dg,S1=In({},f_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dg&&(dg&&e.type==="mousemove"?(KM=e.screenX-dg.screenX,qM=e.screenY-dg.screenY):qM=KM=0,dg=e),KM)},movementY:function(e){return"movementY"in e?e.movementY:qM}}),m4=va(S1),nue=In({},S1,{dataTransfer:0}),iue=va(nue),sue=In({},f_,{relatedTarget:0}),XM=va(sue),aue=In({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),oue=va(aue),lue=In({},im,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cue=va(lue),uue=In({},im,{data:0}),g4=va(uue),due={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pue(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hue[e])?!!t[e]:!1}function KA(){return pue}var mue=In({},f_,{key:function(e){if(e.key){var t=due[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fue[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KA,charCode:function(e){return e.type==="keypress"?Gx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gue=va(mue),vue=In({},S1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v4=va(vue),yue=In({},f_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KA}),_ue=va(yue),xue=In({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),bue=va(xue),wue=In({},S1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kue=va(wue),Tue=[9,13,27,32],qA=Wl&&"CompositionEvent"in window,ov=null;Wl&&"documentMode"in document&&(ov=document.documentMode);var Mue=Wl&&"TextEvent"in window&&!ov,GK=Wl&&(!qA||ov&&8<ov&&11>=ov),y4=" ",_4=!1;function HK(e,t){switch(e){case"keyup":return Tue.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KK(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vh=!1;function Sue(e,t){switch(e){case"compositionend":return KK(t);case"keypress":return t.which!==32?null:(_4=!0,y4);case"textInput":return e=t.data,e===y4&&_4?null:e;default:return null}}function Pue(e,t){if(vh)return e==="compositionend"||!qA&&HK(e,t)?(e=WK(),Wx=GA=Gc=null,vh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GK&&t.locale!=="ko"?null:t.data;default:return null}}var Eue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Eue[e.type]:t==="textarea"}function qK(e,t,r,n){MK(n),t=kb(t,"onChange"),0<t.length&&(r=new HA("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var lv=null,Lv=null;function jue(e){s7(e,0)}function P1(e){var t=xh(e);if(yK(t))return e}function Cue(e,t){if(e==="change")return t}var XK=!1;if(Wl){var YM;if(Wl){var QM="oninput"in document;if(!QM){var b4=document.createElement("div");b4.setAttribute("oninput","return;"),QM=typeof b4.oninput=="function"}YM=QM}else YM=!1;XK=YM&&(!document.documentMode||9<document.documentMode)}function w4(){lv&&(lv.detachEvent("onpropertychange",YK),Lv=lv=null)}function YK(e){if(e.propertyName==="value"&&P1(Lv)){var t=[];qK(t,Lv,e,BA(e)),jK(jue,t)}}function Aue(e,t,r){e==="focusin"?(w4(),lv=t,Lv=r,lv.attachEvent("onpropertychange",YK)):e==="focusout"&&w4()}function Oue(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return P1(Lv)}function $ue(e,t){if(e==="click")return P1(t)}function Nue(e,t){if(e==="input"||e==="change")return P1(t)}function Iue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Po=typeof Object.is=="function"?Object.is:Iue;function Rv(e,t){if(Po(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!OE.call(t,i)||!Po(e[i],t[i]))return!1}return!0}function k4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function T4(e,t){var r=k4(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k4(r)}}function QK(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QK(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZK(){for(var e=window,t=gb();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gb(e.document)}return t}function XA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Due(e){var t=ZK(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&QK(r.ownerDocument.documentElement,r)){if(n!==null&&XA(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=T4(r,s);var a=T4(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lue=Wl&&"documentMode"in document&&11>=document.documentMode,yh=null,QE=null,cv=null,ZE=!1;function M4(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ZE||yh==null||yh!==gb(n)||(n=yh,"selectionStart"in n&&XA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),cv&&Rv(cv,n)||(cv=n,n=kb(QE,"onSelect"),0<n.length&&(t=new HA("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yh)))}function z0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _h={animationend:z0("Animation","AnimationEnd"),animationiteration:z0("Animation","AnimationIteration"),animationstart:z0("Animation","AnimationStart"),transitionend:z0("Transition","TransitionEnd")},ZM={},JK={};Wl&&(JK=document.createElement("div").style,"AnimationEvent"in window||(delete _h.animationend.animation,delete _h.animationiteration.animation,delete _h.animationstart.animation),"TransitionEvent"in window||delete _h.transitionend.transition);function E1(e){if(ZM[e])return ZM[e];if(!_h[e])return e;var t=_h[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in JK)return ZM[e]=t[r];return e}var e7=E1("animationend"),t7=E1("animationiteration"),r7=E1("animationstart"),n7=E1("transitionend"),i7=new Map,S4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(e,t){i7.set(e,t),pf(t,[e])}for(var JM=0;JM<S4.length;JM++){var eS=S4[JM],Rue=eS.toLowerCase(),Fue=eS[0].toUpperCase()+eS.slice(1);Tu(Rue,"on"+Fue)}Tu(e7,"onAnimationEnd");Tu(t7,"onAnimationIteration");Tu(r7,"onAnimationStart");Tu("dblclick","onDoubleClick");Tu("focusin","onFocus");Tu("focusout","onBlur");Tu(n7,"onTransitionEnd");hp("onMouseEnter",["mouseout","mouseover"]);hp("onMouseLeave",["mouseout","mouseover"]);hp("onPointerEnter",["pointerout","pointerover"]);hp("onPointerLeave",["pointerout","pointerover"]);pf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pf("onBeforeInput",["compositionend","keypress","textInput","paste"]);pf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bue=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hg));function P4(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Rce(n,t,void 0,e),e.currentTarget=null}function s7(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;P4(i,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;P4(i,o,c),s=l}}}if(yb)throw e=KE,yb=!1,KE=null,e}function gn(e,t){var r=t[nj];r===void 0&&(r=t[nj]=new Set);var n=e+"__bubble";r.has(n)||(a7(t,e,2,!1),r.add(n))}function tS(e,t,r){var n=0;t&&(n|=4),a7(r,e,n,t)}var V0="_reactListening"+Math.random().toString(36).slice(2);function Fv(e){if(!e[V0]){e[V0]=!0,hK.forEach(function(r){r!=="selectionchange"&&(Bue.has(r)||tS(r,!1,e),tS(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[V0]||(t[V0]=!0,tS("selectionchange",!1,t))}}function a7(e,t,r,n){switch(UK(t)){case 1:var i=eue;break;case 4:i=tue;break;default:i=WA}r=i.bind(null,t,r,e),i=void 0,!HE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function rS(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Td(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}jK(function(){var c=s,f=BA(r),d=[];e:{var h=i7.get(e);if(h!==void 0){var p=HA,m=e;switch(e){case"keypress":if(Gx(r)===0)break e;case"keydown":case"keyup":p=gue;break;case"focusin":m="focus",p=XM;break;case"focusout":m="blur",p=XM;break;case"beforeblur":case"afterblur":p=XM;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=m4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=iue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=_ue;break;case e7:case t7:case r7:p=oue;break;case n7:p=bue;break;case"scroll":p=rue;break;case"wheel":p=kue;break;case"copy":case"cut":case"paste":p=cue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=v4}var g=(t&4)!==0,x=!g&&e==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var v=c,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=$v(v,y),b!=null&&g.push(Bv(v,b,_)))),x)break;v=v.return}0<g.length&&(h=new p(h,m,null,r,f),d.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==WE&&(m=r.relatedTarget||r.fromElement)&&(Td(m)||m[Gl]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Td(m):null,m!==null&&(x=mf(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=m4,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=v4,b="onPointerLeave",y="onPointerEnter",v="pointer"),x=p==null?h:xh(p),_=m==null?h:xh(m),h=new g(b,v+"leave",p,r,f),h.target=x,h.relatedTarget=_,b=null,Td(f)===c&&(g=new g(y,v+"enter",m,r,f),g.target=_,g.relatedTarget=x,b=g),x=b,p&&m)t:{for(g=p,y=m,v=0,_=g;_;_=Vf(_))v++;for(_=0,b=y;b;b=Vf(b))_++;for(;0<v-_;)g=Vf(g),v--;for(;0<_-v;)y=Vf(y),_--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Vf(g),y=Vf(y)}g=null}else g=null;p!==null&&E4(d,h,p,g,!1),m!==null&&x!==null&&E4(d,x,m,g,!0)}}e:{if(h=c?xh(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=Cue;else if(x4(h))if(XK)w=Nue;else{w=Oue;var k=Aue}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=$ue);if(w&&(w=w(e,c))){qK(d,w,r,f);break e}k&&k(e,h,c),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&FE(h,"number",h.value)}switch(k=c?xh(c):window,e){case"focusin":(x4(k)||k.contentEditable==="true")&&(yh=k,QE=c,cv=null);break;case"focusout":cv=QE=yh=null;break;case"mousedown":ZE=!0;break;case"contextmenu":case"mouseup":case"dragend":ZE=!1,M4(d,r,f);break;case"selectionchange":if(Lue)break;case"keydown":case"keyup":M4(d,r,f)}var T;if(qA)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else vh?HK(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(GK&&r.locale!=="ko"&&(vh||M!=="onCompositionStart"?M==="onCompositionEnd"&&vh&&(T=WK()):(Gc=f,GA="value"in Gc?Gc.value:Gc.textContent,vh=!0)),k=kb(c,M),0<k.length&&(M=new g4(M,e,null,r,f),d.push({event:M,listeners:k}),T?M.data=T:(T=KK(r),T!==null&&(M.data=T)))),(T=Mue?Sue(e,r):Pue(e,r))&&(c=kb(c,"onBeforeInput"),0<c.length&&(f=new g4("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:c}),f.data=T))}s7(d,t)})}function Bv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kb(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$v(e,r),s!=null&&n.unshift(Bv(e,s,i)),s=$v(e,t),s!=null&&n.push(Bv(e,s,i))),e=e.return}return n}function Vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function E4(e,t,r,n,i){for(var s=t._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=$v(r,s),l!=null&&a.unshift(Bv(r,l,o))):i||(l=$v(r,s),l!=null&&a.push(Bv(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var zue=/\r\n?/g,Vue=/\u0000|\uFFFD/g;function j4(e){return(typeof e=="string"?e:""+e).replace(zue,`
`).replace(Vue,"")}function U0(e,t,r){if(t=j4(t),j4(e)!==t&&r)throw Error(et(425))}function Tb(){}var JE=null,ej=null;function tj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rj=typeof setTimeout=="function"?setTimeout:void 0,Uue=typeof clearTimeout=="function"?clearTimeout:void 0,C4=typeof Promise=="function"?Promise:void 0,Wue=typeof queueMicrotask=="function"?queueMicrotask:typeof C4<"u"?function(e){return C4.resolve(null).then(e).catch(Gue)}:rj;function Gue(e){setTimeout(function(){throw e})}function nS(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Dv(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Dv(t)}function Jc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sm=Math.random().toString(36).slice(2),qo="__reactFiber$"+sm,zv="__reactProps$"+sm,Gl="__reactContainer$"+sm,nj="__reactEvents$"+sm,Hue="__reactListeners$"+sm,Kue="__reactHandles$"+sm;function Td(e){var t=e[qo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gl]||r[qo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=A4(e);e!==null;){if(r=e[qo])return r;e=A4(e)}return t}e=r,r=e.parentNode}return null}function h_(e){return e=e[qo]||e[Gl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function j1(e){return e[zv]||null}var ij=[],bh=-1;function Mu(e){return{current:e}}function _n(e){0>bh||(e.current=ij[bh],ij[bh]=null,bh--)}function on(e,t){bh++,ij[bh]=e.current,e.current=t}var cu={},os=Mu(cu),Vs=Mu(!1),qd=cu;function pp(e,t){var r=e.type.contextTypes;if(!r)return cu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Us(e){return e=e.childContextTypes,e!=null}function Mb(){_n(Vs),_n(os)}function O4(e,t,r){if(os.current!==cu)throw Error(et(168));on(os,t),on(Vs,r)}function o7(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(et(108,Ace(e)||"Unknown",i));return In({},r,n)}function Sb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cu,qd=os.current,on(os,e),on(Vs,Vs.current),!0}function $4(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=o7(e,t,qd),n.__reactInternalMemoizedMergedChildContext=e,_n(Vs),_n(os),on(os,e)):_n(Vs),on(Vs,r)}var Cl=null,C1=!1,iS=!1;function l7(e){Cl===null?Cl=[e]:Cl.push(e)}function que(e){C1=!0,l7(e)}function Su(){if(!iS&&Cl!==null){iS=!0;var e=0,t=Gr;try{var r=Cl;for(Gr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Cl=null,C1=!1}catch(i){throw Cl!==null&&(Cl=Cl.slice(e+1)),$K(zA,Su),i}finally{Gr=t,iS=!1}}return null}var wh=[],kh=0,Pb=null,Eb=0,Aa=[],Oa=0,Xd=null,Ol=1,$l="";function dd(e,t){wh[kh++]=Eb,wh[kh++]=Pb,Pb=e,Eb=t}function c7(e,t,r){Aa[Oa++]=Ol,Aa[Oa++]=$l,Aa[Oa++]=Xd,Xd=e;var n=Ol;e=$l;var i=32-ko(n)-1;n&=~(1<<i),r+=1;var s=32-ko(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ol=1<<32-ko(t)+i|r<<i|n,$l=s+e}else Ol=1<<s|r<<i|n,$l=e}function YA(e){e.return!==null&&(dd(e,1),c7(e,1,0))}function QA(e){for(;e===Pb;)Pb=wh[--kh],wh[kh]=null,Eb=wh[--kh],wh[kh]=null;for(;e===Xd;)Xd=Aa[--Oa],Aa[Oa]=null,$l=Aa[--Oa],Aa[Oa]=null,Ol=Aa[--Oa],Aa[Oa]=null}var la=null,oa=null,Sn=!1,go=null;function u7(e,t){var r=Ia(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function N4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,la=e,oa=Jc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,la=e,oa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xd!==null?{id:Ol,overflow:$l}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ia(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,la=e,oa=null,!0):!1;default:return!1}}function sj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aj(e){if(Sn){var t=oa;if(t){var r=t;if(!N4(e,t)){if(sj(e))throw Error(et(418));t=Jc(r.nextSibling);var n=la;t&&N4(e,t)?u7(n,r):(e.flags=e.flags&-4097|2,Sn=!1,la=e)}}else{if(sj(e))throw Error(et(418));e.flags=e.flags&-4097|2,Sn=!1,la=e}}}function I4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;la=e}function W0(e){if(e!==la)return!1;if(!Sn)return I4(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tj(e.type,e.memoizedProps)),t&&(t=oa)){if(sj(e))throw d7(),Error(et(418));for(;t;)u7(e,t),t=Jc(t.nextSibling)}if(I4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){oa=Jc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}oa=null}}else oa=la?Jc(e.stateNode.nextSibling):null;return!0}function d7(){for(var e=oa;e;)e=Jc(e.nextSibling)}function mp(){oa=la=null,Sn=!1}function ZA(e){go===null?go=[e]:go.push(e)}var Xue=ic.ReactCurrentBatchConfig;function fg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function G0(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function D4(e){var t=e._init;return t(e._payload)}function f7(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=nu(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,v,_,b){return v===null||v.tag!==6?(v=dS(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function l(y,v,_,b){var w=_.type;return w===gh?f(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Cc&&D4(w)===v.type)?(b=i(v,_.props),b.ref=fg(y,v,_),b.return=y,b):(b=Zx(_.type,_.key,_.props,null,y.mode,b),b.ref=fg(y,v,_),b.return=y,b)}function c(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=fS(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function f(y,v,_,b,w){return v===null||v.tag!==7?(v=zd(_,y.mode,b,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function d(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=dS(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case N0:return _=Zx(v.type,v.key,v.props,null,y.mode,_),_.ref=fg(y,null,v),_.return=y,_;case mh:return v=fS(v,y.mode,_),v.return=y,v;case Cc:var b=v._init;return d(y,b(v._payload),_)}if(Wg(v)||og(v))return v=zd(v,y.mode,_,null),v.return=y,v;G0(y,v)}return null}function h(y,v,_,b){var w=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:o(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case N0:return _.key===w?l(y,v,_,b):null;case mh:return _.key===w?c(y,v,_,b):null;case Cc:return w=_._init,h(y,v,w(_._payload),b)}if(Wg(_)||og(_))return w!==null?null:f(y,v,_,b,null);G0(y,_)}return null}function p(y,v,_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,o(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case N0:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,w);case mh:return y=y.get(b.key===null?_:b.key)||null,c(v,y,b,w);case Cc:var k=b._init;return p(y,v,_,k(b._payload),w)}if(Wg(b)||og(b))return y=y.get(_)||null,f(v,y,b,w,null);G0(v,b)}return null}function m(y,v,_,b){for(var w=null,k=null,T=v,M=v=0,j=null;T!==null&&M<_.length;M++){T.index>M?(j=T,T=null):j=T.sibling;var C=h(y,T,_[M],b);if(C===null){T===null&&(T=j);break}e&&T&&C.alternate===null&&t(y,T),v=s(C,v,M),k===null?w=C:k.sibling=C,k=C,T=j}if(M===_.length)return r(y,T),Sn&&dd(y,M),w;if(T===null){for(;M<_.length;M++)T=d(y,_[M],b),T!==null&&(v=s(T,v,M),k===null?w=T:k.sibling=T,k=T);return Sn&&dd(y,M),w}for(T=n(y,T);M<_.length;M++)j=p(T,y,M,_[M],b),j!==null&&(e&&j.alternate!==null&&T.delete(j.key===null?M:j.key),v=s(j,v,M),k===null?w=j:k.sibling=j,k=j);return e&&T.forEach(function(R){return t(y,R)}),Sn&&dd(y,M),w}function g(y,v,_,b){var w=og(_);if(typeof w!="function")throw Error(et(150));if(_=w.call(_),_==null)throw Error(et(151));for(var k=w=null,T=v,M=v=0,j=null,C=_.next();T!==null&&!C.done;M++,C=_.next()){T.index>M?(j=T,T=null):j=T.sibling;var R=h(y,T,C.value,b);if(R===null){T===null&&(T=j);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,M),k===null?w=R:k.sibling=R,k=R,T=j}if(C.done)return r(y,T),Sn&&dd(y,M),w;if(T===null){for(;!C.done;M++,C=_.next())C=d(y,C.value,b),C!==null&&(v=s(C,v,M),k===null?w=C:k.sibling=C,k=C);return Sn&&dd(y,M),w}for(T=n(y,T);!C.done;M++,C=_.next())C=p(T,y,M,C.value,b),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?M:C.key),v=s(C,v,M),k===null?w=C:k.sibling=C,k=C);return e&&T.forEach(function(I){return t(y,I)}),Sn&&dd(y,M),w}function x(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===gh&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case N0:e:{for(var w=_.key,k=v;k!==null;){if(k.key===w){if(w=_.type,w===gh){if(k.tag===7){r(y,k.sibling),v=i(k,_.props.children),v.return=y,y=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Cc&&D4(w)===k.type){r(y,k.sibling),v=i(k,_.props),v.ref=fg(y,k,_),v.return=y,y=v;break e}r(y,k);break}else t(y,k);k=k.sibling}_.type===gh?(v=zd(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=Zx(_.type,_.key,_.props,null,y.mode,b),b.ref=fg(y,v,_),b.return=y,y=b)}return a(y);case mh:e:{for(k=_.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){r(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=fS(_,y.mode,b),v.return=y,y=v}return a(y);case Cc:return k=_._init,x(y,v,k(_._payload),b)}if(Wg(_))return m(y,v,_,b);if(og(_))return g(y,v,_,b);G0(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(r(y,v.sibling),v=i(v,_),v.return=y,y=v):(r(y,v),v=dS(_,y.mode,b),v.return=y,y=v),a(y)):r(y,v)}return x}var gp=f7(!0),h7=f7(!1),jb=Mu(null),Cb=null,Th=null,JA=null;function eO(){JA=Th=Cb=null}function tO(e){var t=jb.current;_n(jb),e._currentValue=t}function oj(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Gh(e,t){Cb=e,JA=Th=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bs=!0),e.firstContext=null)}function Ba(e){var t=e._currentValue;if(JA!==e)if(e={context:e,memoizedValue:t,next:null},Th===null){if(Cb===null)throw Error(et(308));Th=e,Cb.dependencies={lanes:0,firstContext:e}}else Th=Th.next=e;return t}var Md=null;function rO(e){Md===null?Md=[e]:Md.push(e)}function p7(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,rO(t)):(r.next=i.next,i.next=r),t.interleaved=r,Hl(e,n)}function Hl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ac=!1;function nO(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Cr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Hl(e,r)}return i=n.interleaved,i===null?(t.next=t,rO(n)):(t.next=i.next,i.next=t),n.interleaved=t,Hl(e,r)}function Hx(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,VA(e,r)}}function L4(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ab(e,t,r,n){var i=e.updateQueue;Ac=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,f=c=l=null,o=s;do{var h=o.lane,p=o.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(h=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=In({},d,h);break e;case 2:Ac=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=p,l=d):f=f.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Qd|=a,e.lanes=a,e.memoizedState=d}}function R4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(et(191,i));i.call(n)}}}var p_={},Jo=Mu(p_),Vv=Mu(p_),Uv=Mu(p_);function Sd(e){if(e===p_)throw Error(et(174));return e}function iO(e,t){switch(on(Uv,t),on(Vv,e),on(Jo,p_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zE(t,e)}_n(Jo),on(Jo,t)}function vp(){_n(Jo),_n(Vv),_n(Uv)}function g7(e){Sd(Uv.current);var t=Sd(Jo.current),r=zE(t,e.type);t!==r&&(on(Vv,e),on(Jo,r))}function sO(e){Vv.current===e&&(_n(Jo),_n(Vv))}var On=Mu(0);function Ob(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sS=[];function aO(){for(var e=0;e<sS.length;e++)sS[e]._workInProgressVersionPrimary=null;sS.length=0}var Kx=ic.ReactCurrentDispatcher,aS=ic.ReactCurrentBatchConfig,Yd=0,Nn=null,yi=null,Ci=null,$b=!1,uv=!1,Wv=0,Yue=0;function Xi(){throw Error(et(321))}function oO(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Po(e[r],t[r]))return!1;return!0}function lO(e,t,r,n,i,s){if(Yd=s,Nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kx.current=e===null||e.memoizedState===null?ede:tde,e=r(n,i),uv){s=0;do{if(uv=!1,Wv=0,25<=s)throw Error(et(301));s+=1,Ci=yi=null,t.updateQueue=null,Kx.current=rde,e=r(n,i)}while(uv)}if(Kx.current=Nb,t=yi!==null&&yi.next!==null,Yd=0,Ci=yi=Nn=null,$b=!1,t)throw Error(et(300));return e}function cO(){var e=Wv!==0;return Wv=0,e}function Wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Nn.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function za(){if(yi===null){var e=Nn.alternate;e=e!==null?e.memoizedState:null}else e=yi.next;var t=Ci===null?Nn.memoizedState:Ci.next;if(t!==null)Ci=t,yi=e;else{if(e===null)throw Error(et(310));yi=e,e={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Ci===null?Nn.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Gv(e,t){return typeof t=="function"?t(e):t}function oS(e){var t=za(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=yi,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var f=c.lane;if((Yd&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Nn.lanes|=f,Qd|=f}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,Po(n,t.memoizedState)||(Bs=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Nn.lanes|=s,Qd|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lS(e){var t=za(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Po(s,t.memoizedState)||(Bs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function v7(){}function y7(e,t){var r=Nn,n=za(),i=t(),s=!Po(n.memoizedState,i);if(s&&(n.memoizedState=i,Bs=!0),n=n.queue,uO(b7.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Ci!==null&&Ci.memoizedState.tag&1){if(r.flags|=2048,Hv(9,x7.bind(null,r,n,i,t),void 0,null),Oi===null)throw Error(et(349));Yd&30||_7(r,t,i)}return i}function _7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function x7(e,t,r,n){t.value=r,t.getSnapshot=n,w7(t)&&k7(e)}function b7(e,t,r){return r(function(){w7(t)&&k7(e)})}function w7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Po(e,r)}catch{return!0}}function k7(e){var t=Hl(e,1);t!==null&&To(t,e,1,-1)}function F4(e){var t=Wo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gv,lastRenderedState:e},t.queue=e,e=e.dispatch=Jue.bind(null,Nn,e),[t.memoizedState,e]}function Hv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function T7(){return za().memoizedState}function qx(e,t,r,n){var i=Wo();Nn.flags|=e,i.memoizedState=Hv(1|t,r,void 0,n===void 0?null:n)}function A1(e,t,r,n){var i=za();n=n===void 0?null:n;var s=void 0;if(yi!==null){var a=yi.memoizedState;if(s=a.destroy,n!==null&&oO(n,a.deps)){i.memoizedState=Hv(t,r,s,n);return}}Nn.flags|=e,i.memoizedState=Hv(1|t,r,s,n)}function B4(e,t){return qx(8390656,8,e,t)}function uO(e,t){return A1(2048,8,e,t)}function M7(e,t){return A1(4,2,e,t)}function S7(e,t){return A1(4,4,e,t)}function P7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function E7(e,t,r){return r=r!=null?r.concat([e]):null,A1(4,4,P7.bind(null,t,e),r)}function dO(){}function j7(e,t){var r=za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&oO(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function C7(e,t){var r=za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&oO(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function A7(e,t,r){return Yd&21?(Po(r,t)||(r=DK(),Nn.lanes|=r,Qd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bs=!0),e.memoizedState=r)}function Que(e,t){var r=Gr;Gr=r!==0&&4>r?r:4,e(!0);var n=aS.transition;aS.transition={};try{e(!1),t()}finally{Gr=r,aS.transition=n}}function O7(){return za().memoizedState}function Zue(e,t,r){var n=ru(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$7(e))N7(t,r);else if(r=p7(e,t,r,n),r!==null){var i=Ms();To(r,e,n,i),I7(r,t,n)}}function Jue(e,t,r){var n=ru(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($7(e))N7(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Po(o,a)){var l=t.interleaved;l===null?(i.next=i,rO(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=p7(e,t,i,n),r!==null&&(i=Ms(),To(r,e,n,i),I7(r,t,n))}}function $7(e){var t=e.alternate;return e===Nn||t!==null&&t===Nn}function N7(e,t){uv=$b=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function I7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,VA(e,r)}}var Nb={readContext:Ba,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},ede={readContext:Ba,useCallback:function(e,t){return Wo().memoizedState=[e,t===void 0?null:t],e},useContext:Ba,useEffect:B4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qx(4194308,4,P7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qx(4194308,4,e,t)},useInsertionEffect:function(e,t){return qx(4,2,e,t)},useMemo:function(e,t){var r=Wo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Wo();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Zue.bind(null,Nn,e),[n.memoizedState,e]},useRef:function(e){var t=Wo();return e={current:e},t.memoizedState=e},useState:F4,useDebugValue:dO,useDeferredValue:function(e){return Wo().memoizedState=e},useTransition:function(){var e=F4(!1),t=e[0];return e=Que.bind(null,e[1]),Wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Nn,i=Wo();if(Sn){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Oi===null)throw Error(et(349));Yd&30||_7(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,B4(b7.bind(null,n,s,e),[e]),n.flags|=2048,Hv(9,x7.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Wo(),t=Oi.identifierPrefix;if(Sn){var r=$l,n=Ol;r=(n&~(1<<32-ko(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Yue++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tde={readContext:Ba,useCallback:j7,useContext:Ba,useEffect:uO,useImperativeHandle:E7,useInsertionEffect:M7,useLayoutEffect:S7,useMemo:C7,useReducer:oS,useRef:T7,useState:function(){return oS(Gv)},useDebugValue:dO,useDeferredValue:function(e){var t=za();return A7(t,yi.memoizedState,e)},useTransition:function(){var e=oS(Gv)[0],t=za().memoizedState;return[e,t]},useMutableSource:v7,useSyncExternalStore:y7,useId:O7,unstable_isNewReconciler:!1},rde={readContext:Ba,useCallback:j7,useContext:Ba,useEffect:uO,useImperativeHandle:E7,useInsertionEffect:M7,useLayoutEffect:S7,useMemo:C7,useReducer:lS,useRef:T7,useState:function(){return lS(Gv)},useDebugValue:dO,useDeferredValue:function(e){var t=za();return yi===null?t.memoizedState=e:A7(t,yi.memoizedState,e)},useTransition:function(){var e=lS(Gv)[0],t=za().memoizedState;return[e,t]},useMutableSource:v7,useSyncExternalStore:y7,useId:O7,unstable_isNewReconciler:!1};function co(e,t){if(e&&e.defaultProps){t=In({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lj(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:In({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var O1={isMounted:function(e){return(e=e._reactInternals)?mf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=ru(e),s=Ll(n,i);s.payload=t,r!=null&&(s.callback=r),t=eu(e,s,i),t!==null&&(To(t,e,i,n),Hx(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ms(),i=ru(e),s=Ll(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=eu(e,s,i),t!==null&&(To(t,e,i,n),Hx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ms(),n=ru(e),i=Ll(r,n);i.tag=2,t!=null&&(i.callback=t),t=eu(e,i,n),t!==null&&(To(t,e,n,r),Hx(t,e,n))}};function z4(e,t,r,n,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!Rv(r,n)||!Rv(i,s):!0}function D7(e,t,r){var n=!1,i=cu,s=t.contextType;return typeof s=="object"&&s!==null?s=Ba(s):(i=Us(t)?qd:os.current,n=t.contextTypes,s=(n=n!=null)?pp(e,i):cu),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=O1,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function V4(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&O1.enqueueReplaceState(t,t.state,null)}function cj(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},nO(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ba(s):(s=Us(t)?qd:os.current,i.context=pp(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(lj(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&O1.enqueueReplaceState(i,i.state,null),Ab(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function yp(e,t){try{var r="",n=t;do r+=Cce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function cS(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uj(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var nde=typeof WeakMap=="function"?WeakMap:Map;function L7(e,t,r){r=Ll(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Db||(Db=!0,xj=n),uj(e,t)},r}function R7(e,t,r){r=Ll(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){uj(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){uj(e,t),typeof n!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function U4(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new nde;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=vde.bind(null,e,t,r),t.then(e,e))}function W4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function G4(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ll(-1,1),t.tag=2,eu(r,t,1))),r.lanes|=1),e)}var ide=ic.ReactCurrentOwner,Bs=!1;function gs(e,t,r,n){t.child=e===null?h7(t,null,r,n):gp(t,e.child,r,n)}function H4(e,t,r,n,i){r=r.render;var s=t.ref;return Gh(t,i),n=lO(e,t,r,n,s,i),r=cO(),e!==null&&!Bs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kl(e,t,i)):(Sn&&r&&YA(t),t.flags|=1,gs(e,t,n,i),t.child)}function K4(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!_O(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,F7(e,t,s,n,i)):(e=Zx(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Rv,r(a,n)&&e.ref===t.ref)return Kl(e,t,i)}return t.flags|=1,e=nu(s,n),e.ref=t.ref,e.return=t,t.child=e}function F7(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Rv(s,n)&&e.ref===t.ref)if(Bs=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Bs=!0);else return t.lanes=e.lanes,Kl(e,t,i)}return dj(e,t,r,n,i)}function B7(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Sh,ea),ea|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(Sh,ea),ea|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,on(Sh,ea),ea|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,on(Sh,ea),ea|=n;return gs(e,t,i,r),t.child}function z7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dj(e,t,r,n,i){var s=Us(r)?qd:os.current;return s=pp(t,s),Gh(t,i),r=lO(e,t,r,n,s,i),n=cO(),e!==null&&!Bs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kl(e,t,i)):(Sn&&n&&YA(t),t.flags|=1,gs(e,t,r,i),t.child)}function q4(e,t,r,n,i){if(Us(r)){var s=!0;Sb(t)}else s=!1;if(Gh(t,i),t.stateNode===null)Xx(e,t),D7(t,r,n),cj(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ba(c):(c=Us(r)?qd:os.current,c=pp(t,c));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&V4(t,a,n,c),Ac=!1;var h=t.memoizedState;a.state=h,Ab(t,n,a,i),l=t.memoizedState,o!==n||h!==l||Vs.current||Ac?(typeof f=="function"&&(lj(t,r,f,n),l=t.memoizedState),(o=Ac||z4(t,r,o,n,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,m7(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:co(t.type,o),a.props=c,d=t.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ba(l):(l=Us(r)?qd:os.current,l=pp(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&V4(t,a,n,l),Ac=!1,h=t.memoizedState,a.state=h,Ab(t,n,a,i);var m=t.memoizedState;o!==d||h!==m||Vs.current||Ac?(typeof p=="function"&&(lj(t,r,p,n),m=t.memoizedState),(c=Ac||z4(t,r,c,n,h,m,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return fj(e,t,r,n,s,i)}function fj(e,t,r,n,i,s){z7(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&$4(t,r,!1),Kl(e,t,s);n=t.stateNode,ide.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=gp(t,e.child,null,s),t.child=gp(t,null,o,s)):gs(e,t,o,s),t.memoizedState=n.state,i&&$4(t,r,!0),t.child}function V7(e){var t=e.stateNode;t.pendingContext?O4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&O4(e,t.context,!1),iO(e,t.containerInfo)}function X4(e,t,r,n,i){return mp(),ZA(i),t.flags|=256,gs(e,t,r,n),t.child}var hj={dehydrated:null,treeContext:null,retryLane:0};function pj(e){return{baseLanes:e,cachePool:null,transitions:null}}function U7(e,t,r){var n=t.pendingProps,i=On.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),on(On,i&1),e===null)return aj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=I1(a,n,0,null),e=zd(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=pj(r),t.memoizedState=hj,e):fO(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return sde(e,t,a,n,o,i,r);if(s){s=n.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=nu(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=nu(o,s):(s=zd(s,a,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=e.child.memoizedState,a=a===null?pj(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=hj,n}return s=e.child,e=s.sibling,n=nu(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function fO(e,t){return t=I1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function H0(e,t,r,n){return n!==null&&ZA(n),gp(t,e.child,null,r),e=fO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sde(e,t,r,n,i,s,a){if(r)return t.flags&256?(t.flags&=-257,n=cS(Error(et(422))),H0(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=I1({mode:"visible",children:n.children},i,0,null),s=zd(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&gp(t,e.child,null,a),t.child.memoizedState=pj(a),t.memoizedState=hj,s);if(!(t.mode&1))return H0(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(et(419)),n=cS(s,n,void 0),H0(e,t,a,n)}if(o=(a&e.childLanes)!==0,Bs||o){if(n=Oi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Hl(e,i),To(n,e,i,-1))}return yO(),n=cS(Error(et(421))),H0(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=yde.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,oa=Jc(i.nextSibling),la=t,Sn=!0,go=null,e!==null&&(Aa[Oa++]=Ol,Aa[Oa++]=$l,Aa[Oa++]=Xd,Ol=e.id,$l=e.overflow,Xd=t),t=fO(t,n.children),t.flags|=4096,t)}function Y4(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),oj(e.return,t,r)}function uS(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function W7(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(gs(e,t,n.children,r),n=On.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Y4(e,r,t);else if(e.tag===19)Y4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(on(On,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ob(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),uS(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ob(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}uS(t,!0,r,null,s);break;case"together":uS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=nu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=nu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ade(e,t,r){switch(t.tag){case 3:V7(t),mp();break;case 5:g7(t);break;case 1:Us(t.type)&&Sb(t);break;case 4:iO(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;on(jb,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(on(On,On.current&1),t.flags|=128,null):r&t.child.childLanes?U7(e,t,r):(on(On,On.current&1),e=Kl(e,t,r),e!==null?e.sibling:null);on(On,On.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return W7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),on(On,On.current),n)break;return null;case 22:case 23:return t.lanes=0,B7(e,t,r)}return Kl(e,t,r)}var G7,mj,H7,K7;G7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mj=function(){};H7=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Sd(Jo.current);var s=null;switch(r){case"input":i=LE(e,i),n=LE(e,n),s=[];break;case"select":i=In({},i,{value:void 0}),n=In({},n,{value:void 0}),s=[];break;case"textarea":i=BE(e,i),n=BE(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Tb)}VE(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Av.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Av.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gn("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};K7=function(e,t,r,n){r!==n&&(t.flags|=4)};function hg(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ode(e,t,r){var n=t.pendingProps;switch(QA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(t),null;case 1:return Us(t.type)&&Mb(),Yi(t),null;case 3:return n=t.stateNode,vp(),_n(Vs),_n(os),aO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(W0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,go!==null&&(kj(go),go=null))),mj(e,t),Yi(t),null;case 5:sO(t);var i=Sd(Uv.current);if(r=t.type,e!==null&&t.stateNode!=null)H7(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(et(166));return Yi(t),null}if(e=Sd(Jo.current),W0(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[qo]=t,n[zv]=s,e=(t.mode&1)!==0,r){case"dialog":gn("cancel",n),gn("close",n);break;case"iframe":case"object":case"embed":gn("load",n);break;case"video":case"audio":for(i=0;i<Hg.length;i++)gn(Hg[i],n);break;case"source":gn("error",n);break;case"img":case"image":case"link":gn("error",n),gn("load",n);break;case"details":gn("toggle",n);break;case"input":s4(n,s),gn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},gn("invalid",n);break;case"textarea":o4(n,s),gn("invalid",n)}VE(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&U0(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&U0(n.textContent,o,e),i=["children",""+o]):Av.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&gn("scroll",n)}switch(r){case"input":I0(n),a4(n,s,!0);break;case"textarea":I0(n),l4(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Tb)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bK(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[qo]=t,e[zv]=n,G7(e,t,!1,!1),t.stateNode=e;e:{switch(a=UE(r,n),r){case"dialog":gn("cancel",e),gn("close",e),i=n;break;case"iframe":case"object":case"embed":gn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Hg.length;i++)gn(Hg[i],e);i=n;break;case"source":gn("error",e),i=n;break;case"img":case"image":case"link":gn("error",e),gn("load",e),i=n;break;case"details":gn("toggle",e),i=n;break;case"input":s4(e,n),i=LE(e,n),gn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=In({},n,{value:void 0}),gn("invalid",e);break;case"textarea":o4(e,n),i=BE(e,n),gn("invalid",e);break;default:i=n}VE(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?TK(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wK(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ov(e,l):typeof l=="number"&&Ov(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Av.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",e):l!=null&&DA(e,s,l,a))}switch(r){case"input":I0(e),a4(e,n,!1);break;case"textarea":I0(e),l4(e);break;case"option":n.value!=null&&e.setAttribute("value",""+lu(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?zh(e,!!n.multiple,s,!1):n.defaultValue!=null&&zh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Tb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yi(t),null;case 6:if(e&&t.stateNode!=null)K7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));if(r=Sd(Uv.current),Sd(Jo.current),W0(t)){if(n=t.stateNode,r=t.memoizedProps,n[qo]=t,(s=n.nodeValue!==r)&&(e=la,e!==null))switch(e.tag){case 3:U0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&U0(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qo]=t,t.stateNode=n}return Yi(t),null;case 13:if(_n(On),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&oa!==null&&t.mode&1&&!(t.flags&128))d7(),mp(),t.flags|=98560,s=!1;else if(s=W0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[qo]=t}else mp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yi(t),s=!1}else go!==null&&(kj(go),go=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||On.current&1?_i===0&&(_i=3):yO())),t.updateQueue!==null&&(t.flags|=4),Yi(t),null);case 4:return vp(),mj(e,t),e===null&&Fv(t.stateNode.containerInfo),Yi(t),null;case 10:return tO(t.type._context),Yi(t),null;case 17:return Us(t.type)&&Mb(),Yi(t),null;case 19:if(_n(On),s=t.memoizedState,s===null)return Yi(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)hg(s,!1);else{if(_i!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ob(e),a!==null){for(t.flags|=128,hg(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return on(On,On.current&1|2),t.child}e=e.sibling}s.tail!==null&&Yn()>_p&&(t.flags|=128,n=!0,hg(s,!1),t.lanes=4194304)}else{if(!n)if(e=Ob(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Sn)return Yi(t),null}else 2*Yn()-s.renderingStartTime>_p&&r!==1073741824&&(t.flags|=128,n=!0,hg(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Yn(),t.sibling=null,r=On.current,on(On,n?r&1|2:r&1),t):(Yi(t),null);case 22:case 23:return vO(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ea&1073741824&&(Yi(t),t.subtreeFlags&6&&(t.flags|=8192)):Yi(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function lde(e,t){switch(QA(t),t.tag){case 1:return Us(t.type)&&Mb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vp(),_n(Vs),_n(os),aO(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sO(t),null;case 13:if(_n(On),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));mp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _n(On),null;case 4:return vp(),null;case 10:return tO(t.type._context),null;case 22:case 23:return vO(),null;case 24:return null;default:return null}}var K0=!1,rs=!1,cde=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Mh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zn(e,t,n)}else r.current=null}function gj(e,t,r){try{r()}catch(n){zn(e,t,n)}}var Q4=!1;function ude(e,t){if(JE=bb,e=ZK(),XA(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++c===i&&(o=a),h===s&&++f===n&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ej={focusedElem:e,selectionRange:r},bb=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){t=kt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:co(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(b){zn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}return m=Q4,Q4=!1,m}function dv(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&gj(t,r,s)}i=i.next}while(i!==n)}}function $1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vj(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function q7(e){var t=e.alternate;t!==null&&(e.alternate=null,q7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qo],delete t[zv],delete t[nj],delete t[Hue],delete t[Kue])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X7(e){return e.tag===5||e.tag===3||e.tag===4}function Z4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Tb));else if(n!==4&&(e=e.child,e!==null))for(yj(e,t,r),e=e.sibling;e!==null;)yj(e,t,r),e=e.sibling}function _j(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_j(e,t,r),e=e.sibling;e!==null;)_j(e,t,r),e=e.sibling}var Li=null,ho=!1;function _c(e,t,r){for(r=r.child;r!==null;)Y7(e,t,r),r=r.sibling}function Y7(e,t,r){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(M1,r)}catch{}switch(r.tag){case 5:rs||Mh(r,t);case 6:var n=Li,i=ho;Li=null,_c(e,t,r),Li=n,ho=i,Li!==null&&(ho?(e=Li,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Li.removeChild(r.stateNode));break;case 18:Li!==null&&(ho?(e=Li,r=r.stateNode,e.nodeType===8?nS(e.parentNode,r):e.nodeType===1&&nS(e,r),Dv(e)):nS(Li,r.stateNode));break;case 4:n=Li,i=ho,Li=r.stateNode.containerInfo,ho=!0,_c(e,t,r),Li=n,ho=i;break;case 0:case 11:case 14:case 15:if(!rs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&gj(r,t,a),i=i.next}while(i!==n)}_c(e,t,r);break;case 1:if(!rs&&(Mh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){zn(r,t,o)}_c(e,t,r);break;case 21:_c(e,t,r);break;case 22:r.mode&1?(rs=(n=rs)||r.memoizedState!==null,_c(e,t,r),rs=n):_c(e,t,r);break;default:_c(e,t,r)}}function J4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cde),t.forEach(function(n){var i=_de.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ja(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Li=o.stateNode,ho=!1;break e;case 3:Li=o.stateNode.containerInfo,ho=!0;break e;case 4:Li=o.stateNode.containerInfo,ho=!0;break e}o=o.return}if(Li===null)throw Error(et(160));Y7(s,a,i),Li=null,ho=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){zn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q7(t,e),t=t.sibling}function Q7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ja(t,e),Vo(e),n&4){try{dv(3,e,e.return),$1(3,e)}catch(g){zn(e,e.return,g)}try{dv(5,e,e.return)}catch(g){zn(e,e.return,g)}}break;case 1:Ja(t,e),Vo(e),n&512&&r!==null&&Mh(r,r.return);break;case 5:if(Ja(t,e),Vo(e),n&512&&r!==null&&Mh(r,r.return),e.flags&32){var i=e.stateNode;try{Ov(i,"")}catch(g){zn(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&_K(i,s),UE(o,a);var c=UE(o,s);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?TK(i,d):f==="dangerouslySetInnerHTML"?wK(i,d):f==="children"?Ov(i,d):DA(i,f,d,c)}switch(o){case"input":RE(i,s);break;case"textarea":xK(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?zh(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?zh(i,!!s.multiple,s.defaultValue,!0):zh(i,!!s.multiple,s.multiple?[]:"",!1))}i[zv]=s}catch(g){zn(e,e.return,g)}}break;case 6:if(Ja(t,e),Vo(e),n&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){zn(e,e.return,g)}}break;case 3:if(Ja(t,e),Vo(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dv(t.containerInfo)}catch(g){zn(e,e.return,g)}break;case 4:Ja(t,e),Vo(e);break;case 13:Ja(t,e),Vo(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mO=Yn())),n&4&&J4(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(rs=(c=rs)||f,Ja(t,e),rs=c):Ja(t,e),Vo(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(kt=e,f=e.child;f!==null;){for(d=kt=f;kt!==null;){switch(h=kt,p=h.child,h.tag){case 0:case 11:case 14:case 15:dv(4,h,h.return);break;case 1:Mh(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){zn(n,r,g)}}break;case 5:Mh(h,h.return);break;case 22:if(h.memoizedState!==null){tB(d);continue}}p!==null?(p.return=h,kt=p):tB(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=kK("display",a))}catch(g){zn(e,e.return,g)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){zn(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ja(t,e),Vo(e),n&4&&J4(e);break;case 21:break;default:Ja(t,e),Vo(e)}}function Vo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(X7(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ov(i,""),n.flags&=-33);var s=Z4(e);_j(e,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Z4(e);yj(e,o,a);break;default:throw Error(et(161))}}catch(l){zn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dde(e,t,r){kt=e,Z7(e)}function Z7(e,t,r){for(var n=(e.mode&1)!==0;kt!==null;){var i=kt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||K0;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||rs;o=K0;var c=rs;if(K0=a,(rs=l)&&!c)for(kt=i;kt!==null;)a=kt,l=a.child,a.tag===22&&a.memoizedState!==null?rB(i):l!==null?(l.return=a,kt=l):rB(i);for(;s!==null;)kt=s,Z7(s),s=s.sibling;kt=i,K0=o,rs=c}eB(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,kt=s):eB(e)}}function eB(e){for(;kt!==null;){var t=kt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rs||$1(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rs)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:co(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&R4(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}R4(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Dv(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}rs||t.flags&512&&vj(t)}catch(h){zn(t,t.return,h)}}if(t===e){kt=null;break}if(r=t.sibling,r!==null){r.return=t.return,kt=r;break}kt=t.return}}function tB(e){for(;kt!==null;){var t=kt;if(t===e){kt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,kt=r;break}kt=t.return}}function rB(e){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$1(4,t)}catch(l){zn(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){zn(t,i,l)}}var s=t.return;try{vj(t)}catch(l){zn(t,s,l)}break;case 5:var a=t.return;try{vj(t)}catch(l){zn(t,a,l)}}}catch(l){zn(t,t.return,l)}if(t===e){kt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,kt=o;break}kt=t.return}}var fde=Math.ceil,Ib=ic.ReactCurrentDispatcher,hO=ic.ReactCurrentOwner,La=ic.ReactCurrentBatchConfig,Cr=0,Oi=null,ai=null,Fi=0,ea=0,Sh=Mu(0),_i=0,Kv=null,Qd=0,N1=0,pO=0,fv=null,Rs=null,mO=0,_p=1/0,Sl=null,Db=!1,xj=null,tu=null,q0=!1,Hc=null,Lb=0,hv=0,bj=null,Yx=-1,Qx=0;function Ms(){return Cr&6?Yn():Yx!==-1?Yx:Yx=Yn()}function ru(e){return e.mode&1?Cr&2&&Fi!==0?Fi&-Fi:Xue.transition!==null?(Qx===0&&(Qx=DK()),Qx):(e=Gr,e!==0||(e=window.event,e=e===void 0?16:UK(e.type)),e):1}function To(e,t,r,n){if(50<hv)throw hv=0,bj=null,Error(et(185));d_(e,r,n),(!(Cr&2)||e!==Oi)&&(e===Oi&&(!(Cr&2)&&(N1|=r),_i===4&&Dc(e,Fi)),Ws(e,n),r===1&&Cr===0&&!(t.mode&1)&&(_p=Yn()+500,C1&&Su()))}function Ws(e,t){var r=e.callbackNode;Xce(e,t);var n=xb(e,e===Oi?Fi:0);if(n===0)r!==null&&d4(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&d4(r),t===1)e.tag===0?que(nB.bind(null,e)):l7(nB.bind(null,e)),Wue(function(){!(Cr&6)&&Su()}),r=null;else{switch(LK(n)){case 1:r=zA;break;case 4:r=NK;break;case 16:r=_b;break;case 536870912:r=IK;break;default:r=_b}r=aq(r,J7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function J7(e,t){if(Yx=-1,Qx=0,Cr&6)throw Error(et(327));var r=e.callbackNode;if(Hh()&&e.callbackNode!==r)return null;var n=xb(e,e===Oi?Fi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Rb(e,n);else{t=n;var i=Cr;Cr|=2;var s=tq();(Oi!==e||Fi!==t)&&(Sl=null,_p=Yn()+500,Bd(e,t));do try{mde();break}catch(o){eq(e,o)}while(!0);eO(),Ib.current=s,Cr=i,ai!==null?t=0:(Oi=null,Fi=0,t=_i)}if(t!==0){if(t===2&&(i=qE(e),i!==0&&(n=i,t=wj(e,i))),t===1)throw r=Kv,Bd(e,0),Dc(e,n),Ws(e,Yn()),r;if(t===6)Dc(e,n);else{if(i=e.current.alternate,!(n&30)&&!hde(i)&&(t=Rb(e,n),t===2&&(s=qE(e),s!==0&&(n=s,t=wj(e,s))),t===1))throw r=Kv,Bd(e,0),Dc(e,n),Ws(e,Yn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(et(345));case 2:fd(e,Rs,Sl);break;case 3:if(Dc(e,n),(n&130023424)===n&&(t=mO+500-Yn(),10<t)){if(xb(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ms(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rj(fd.bind(null,e,Rs,Sl),t);break}fd(e,Rs,Sl);break;case 4:if(Dc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ko(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=Yn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fde(n/1960))-n,10<n){e.timeoutHandle=rj(fd.bind(null,e,Rs,Sl),n);break}fd(e,Rs,Sl);break;case 5:fd(e,Rs,Sl);break;default:throw Error(et(329))}}}return Ws(e,Yn()),e.callbackNode===r?J7.bind(null,e):null}function wj(e,t){var r=fv;return e.current.memoizedState.isDehydrated&&(Bd(e,t).flags|=256),e=Rb(e,t),e!==2&&(t=Rs,Rs=r,t!==null&&kj(t)),e}function kj(e){Rs===null?Rs=e:Rs.push.apply(Rs,e)}function hde(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Po(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dc(e,t){for(t&=~pO,t&=~N1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ko(t),n=1<<r;e[r]=-1,t&=~n}}function nB(e){if(Cr&6)throw Error(et(327));Hh();var t=xb(e,0);if(!(t&1))return Ws(e,Yn()),null;var r=Rb(e,t);if(e.tag!==0&&r===2){var n=qE(e);n!==0&&(t=n,r=wj(e,n))}if(r===1)throw r=Kv,Bd(e,0),Dc(e,t),Ws(e,Yn()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fd(e,Rs,Sl),Ws(e,Yn()),null}function gO(e,t){var r=Cr;Cr|=1;try{return e(t)}finally{Cr=r,Cr===0&&(_p=Yn()+500,C1&&Su())}}function Zd(e){Hc!==null&&Hc.tag===0&&!(Cr&6)&&Hh();var t=Cr;Cr|=1;var r=La.transition,n=Gr;try{if(La.transition=null,Gr=1,e)return e()}finally{Gr=n,La.transition=r,Cr=t,!(Cr&6)&&Su()}}function vO(){ea=Sh.current,_n(Sh)}function Bd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Uue(r)),ai!==null)for(r=ai.return;r!==null;){var n=r;switch(QA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Mb();break;case 3:vp(),_n(Vs),_n(os),aO();break;case 5:sO(n);break;case 4:vp();break;case 13:_n(On);break;case 19:_n(On);break;case 10:tO(n.type._context);break;case 22:case 23:vO()}r=r.return}if(Oi=e,ai=e=nu(e.current,null),Fi=ea=t,_i=0,Kv=null,pO=N1=Qd=0,Rs=fv=null,Md!==null){for(t=0;t<Md.length;t++)if(r=Md[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Md=null}return e}function eq(e,t){do{var r=ai;try{if(eO(),Kx.current=Nb,$b){for(var n=Nn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$b=!1}if(Yd=0,Ci=yi=Nn=null,uv=!1,Wv=0,hO.current=null,r===null||r.return===null){_i=1,Kv=t,ai=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Fi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=W4(a);if(p!==null){p.flags&=-257,G4(p,a,o,s,t),p.mode&1&&U4(s,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){U4(s,c,t),yO();break e}l=Error(et(426))}}else if(Sn&&o.mode&1){var x=W4(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),G4(x,a,o,s,t),ZA(yp(l,o));break e}}s=l=yp(l,o),_i!==4&&(_i=2),fv===null?fv=[s]:fv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=L7(s,l,t);L4(s,y);break e;case 1:o=l;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(tu===null||!tu.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=R7(s,o,t);L4(s,b);break e}}s=s.return}while(s!==null)}nq(r)}catch(w){t=w,ai===r&&r!==null&&(ai=r=r.return);continue}break}while(!0)}function tq(){var e=Ib.current;return Ib.current=Nb,e===null?Nb:e}function yO(){(_i===0||_i===3||_i===2)&&(_i=4),Oi===null||!(Qd&268435455)&&!(N1&268435455)||Dc(Oi,Fi)}function Rb(e,t){var r=Cr;Cr|=2;var n=tq();(Oi!==e||Fi!==t)&&(Sl=null,Bd(e,t));do try{pde();break}catch(i){eq(e,i)}while(!0);if(eO(),Cr=r,Ib.current=n,ai!==null)throw Error(et(261));return Oi=null,Fi=0,_i}function pde(){for(;ai!==null;)rq(ai)}function mde(){for(;ai!==null&&!Bce();)rq(ai)}function rq(e){var t=sq(e.alternate,e,ea);e.memoizedProps=e.pendingProps,t===null?nq(e):ai=t,hO.current=null}function nq(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=lde(r,t),r!==null){r.flags&=32767,ai=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_i=6,ai=null;return}}else if(r=ode(r,t,ea),r!==null){ai=r;return}if(t=t.sibling,t!==null){ai=t;return}ai=t=e}while(t!==null);_i===0&&(_i=5)}function fd(e,t,r){var n=Gr,i=La.transition;try{La.transition=null,Gr=1,gde(e,t,r,n)}finally{La.transition=i,Gr=n}return null}function gde(e,t,r,n){do Hh();while(Hc!==null);if(Cr&6)throw Error(et(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Yce(e,s),e===Oi&&(ai=Oi=null,Fi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||q0||(q0=!0,aq(_b,function(){return Hh(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=La.transition,La.transition=null;var a=Gr;Gr=1;var o=Cr;Cr|=4,hO.current=null,ude(e,r),Q7(r,e),Due(ej),bb=!!JE,ej=JE=null,e.current=r,dde(r),zce(),Cr=o,Gr=a,La.transition=s}else e.current=r;if(q0&&(q0=!1,Hc=e,Lb=i),s=e.pendingLanes,s===0&&(tu=null),Wce(r.stateNode),Ws(e,Yn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Db)throw Db=!1,e=xj,xj=null,e;return Lb&1&&e.tag!==0&&Hh(),s=e.pendingLanes,s&1?e===bj?hv++:(hv=0,bj=e):hv=0,Su(),null}function Hh(){if(Hc!==null){var e=LK(Lb),t=La.transition,r=Gr;try{if(La.transition=null,Gr=16>e?16:e,Hc===null)var n=!1;else{if(e=Hc,Hc=null,Lb=0,Cr&6)throw Error(et(331));var i=Cr;for(Cr|=4,kt=e.current;kt!==null;){var s=kt,a=s.child;if(kt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(kt=c;kt!==null;){var f=kt;switch(f.tag){case 0:case 11:case 15:dv(8,f,s)}var d=f.child;if(d!==null)d.return=f,kt=d;else for(;kt!==null;){f=kt;var h=f.sibling,p=f.return;if(q7(f),f===c){kt=null;break}if(h!==null){h.return=p,kt=h;break}kt=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}kt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,kt=a;else e:for(;kt!==null;){if(s=kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dv(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,kt=y;break e}kt=s.return}}var v=e.current;for(kt=v;kt!==null;){a=kt;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,kt=_;else e:for(a=v;kt!==null;){if(o=kt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$1(9,o)}}catch(w){zn(o,o.return,w)}if(o===a){kt=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,kt=b;break e}kt=o.return}}if(Cr=i,Su(),Zo&&typeof Zo.onPostCommitFiberRoot=="function")try{Zo.onPostCommitFiberRoot(M1,e)}catch{}n=!0}return n}finally{Gr=r,La.transition=t}}return!1}function iB(e,t,r){t=yp(r,t),t=L7(e,t,1),e=eu(e,t,1),t=Ms(),e!==null&&(d_(e,1,t),Ws(e,t))}function zn(e,t,r){if(e.tag===3)iB(e,e,r);else for(;t!==null;){if(t.tag===3){iB(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tu===null||!tu.has(n))){e=yp(r,e),e=R7(t,e,1),t=eu(t,e,1),e=Ms(),t!==null&&(d_(t,1,e),Ws(t,e));break}}t=t.return}}function vde(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ms(),e.pingedLanes|=e.suspendedLanes&r,Oi===e&&(Fi&r)===r&&(_i===4||_i===3&&(Fi&130023424)===Fi&&500>Yn()-mO?Bd(e,0):pO|=r),Ws(e,t)}function iq(e,t){t===0&&(e.mode&1?(t=R0,R0<<=1,!(R0&130023424)&&(R0=4194304)):t=1);var r=Ms();e=Hl(e,t),e!==null&&(d_(e,t,r),Ws(e,r))}function yde(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),iq(e,r)}function _de(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(t),iq(e,r)}var sq;sq=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vs.current)Bs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Bs=!1,ade(e,t,r);Bs=!!(e.flags&131072)}else Bs=!1,Sn&&t.flags&1048576&&c7(t,Eb,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xx(e,t),e=t.pendingProps;var i=pp(t,os.current);Gh(t,r),i=lO(null,t,n,e,i,r);var s=cO();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Us(n)?(s=!0,Sb(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nO(t),i.updater=O1,t.stateNode=i,i._reactInternals=t,cj(t,n,e,r),t=fj(null,t,n,!0,s,r)):(t.tag=0,Sn&&s&&YA(t),gs(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Xx(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=bde(n),e=co(n,e),i){case 0:t=dj(null,t,n,e,r);break e;case 1:t=q4(null,t,n,e,r);break e;case 11:t=H4(null,t,n,e,r);break e;case 14:t=K4(null,t,n,co(n.type,e),r);break e}throw Error(et(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:co(n,i),dj(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:co(n,i),q4(e,t,n,i,r);case 3:e:{if(V7(t),e===null)throw Error(et(387));n=t.pendingProps,s=t.memoizedState,i=s.element,m7(e,t),Ab(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=yp(Error(et(423)),t),t=X4(e,t,n,r,i);break e}else if(n!==i){i=yp(Error(et(424)),t),t=X4(e,t,n,r,i);break e}else for(oa=Jc(t.stateNode.containerInfo.firstChild),la=t,Sn=!0,go=null,r=h7(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mp(),n===i){t=Kl(e,t,r);break e}gs(e,t,n,r)}t=t.child}return t;case 5:return g7(t),e===null&&aj(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,tj(n,i)?a=null:s!==null&&tj(n,s)&&(t.flags|=32),z7(e,t),gs(e,t,a,r),t.child;case 6:return e===null&&aj(t),null;case 13:return U7(e,t,r);case 4:return iO(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gp(t,null,n,r):gs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:co(n,i),H4(e,t,n,i,r);case 7:return gs(e,t,t.pendingProps,r),t.child;case 8:return gs(e,t,t.pendingProps.children,r),t.child;case 12:return gs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,on(jb,n._currentValue),n._currentValue=a,s!==null)if(Po(s.value,a)){if(s.children===i.children&&!Vs.current){t=Kl(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Ll(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),oj(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(et(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),oj(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}gs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Gh(t,r),i=Ba(i),n=n(i),t.flags|=1,gs(e,t,n,r),t.child;case 14:return n=t.type,i=co(n,t.pendingProps),i=co(n.type,i),K4(e,t,n,i,r);case 15:return F7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:co(n,i),Xx(e,t),t.tag=1,Us(n)?(e=!0,Sb(t)):e=!1,Gh(t,r),D7(t,n,i),cj(t,n,i,r),fj(null,t,n,!0,e,r);case 19:return W7(e,t,r);case 22:return B7(e,t,r)}throw Error(et(156,t.tag))};function aq(e,t){return $K(e,t)}function xde(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(e,t,r,n){return new xde(e,t,r,n)}function _O(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bde(e){if(typeof e=="function")return _O(e)?1:0;if(e!=null){if(e=e.$$typeof,e===RA)return 11;if(e===FA)return 14}return 2}function nu(e,t){var r=e.alternate;return r===null?(r=Ia(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Zx(e,t,r,n,i,s){var a=2;if(n=e,typeof e=="function")_O(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case gh:return zd(r.children,i,s,t);case LA:a=8,i|=8;break;case $E:return e=Ia(12,r,t,i|2),e.elementType=$E,e.lanes=s,e;case NE:return e=Ia(13,r,t,i),e.elementType=NE,e.lanes=s,e;case IE:return e=Ia(19,r,t,i),e.elementType=IE,e.lanes=s,e;case gK:return I1(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pK:a=10;break e;case mK:a=9;break e;case RA:a=11;break e;case FA:a=14;break e;case Cc:a=16,n=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Ia(a,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function zd(e,t,r,n){return e=Ia(7,e,n,t),e.lanes=r,e}function I1(e,t,r,n){return e=Ia(22,e,n,t),e.elementType=gK,e.lanes=r,e.stateNode={isHidden:!1},e}function dS(e,t,r){return e=Ia(6,e,null,t),e.lanes=r,e}function fS(e,t,r){return t=Ia(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wde(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=HM(0),this.expirationTimes=HM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=HM(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xO(e,t,r,n,i,s,a,o,l){return e=new wde(e,t,r,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ia(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nO(s),e}function kde(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function oq(e){if(!e)return cu;e=e._reactInternals;e:{if(mf(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Us(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(Us(r))return o7(e,r,t)}return t}function lq(e,t,r,n,i,s,a,o,l){return e=xO(r,n,!0,e,i,s,a,o,l),e.context=oq(null),r=e.current,n=Ms(),i=ru(r),s=Ll(n,i),s.callback=t??null,eu(r,s,i),e.current.lanes=i,d_(e,i,n),Ws(e,n),e}function D1(e,t,r,n){var i=t.current,s=Ms(),a=ru(i);return r=oq(r),t.context===null?t.context=r:t.pendingContext=r,t=Ll(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=eu(i,t,a),e!==null&&(To(e,i,a,s),Hx(e,i,a)),a}function Fb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sB(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function bO(e,t){sB(e,t),(e=e.alternate)&&sB(e,t)}function Tde(){return null}var cq=typeof reportError=="function"?reportError:function(e){console.error(e)};function wO(e){this._internalRoot=e}L1.prototype.render=wO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));D1(e,t,null,null)};L1.prototype.unmount=wO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zd(function(){D1(null,e,null,null)}),t[Gl]=null}};function L1(e){this._internalRoot=e}L1.prototype.unstable_scheduleHydration=function(e){if(e){var t=BK();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ic.length&&t!==0&&t<Ic[r].priority;r++);Ic.splice(r,0,e),r===0&&VK(e)}};function kO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function R1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function aB(){}function Mde(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Fb(a);s.call(c)}}var a=lq(t,n,e,0,null,!1,!1,"",aB);return e._reactRootContainer=a,e[Gl]=a.current,Fv(e.nodeType===8?e.parentNode:e),Zd(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=Fb(l);o.call(c)}}var l=xO(e,0,!1,null,null,!1,!1,"",aB);return e._reactRootContainer=l,e[Gl]=l.current,Fv(e.nodeType===8?e.parentNode:e),Zd(function(){D1(t,l,r,n)}),l}function F1(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Fb(a);o.call(l)}}D1(t,a,e,i)}else a=Mde(r,t,e,i,n);return Fb(a)}RK=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gg(t.pendingLanes);r!==0&&(VA(t,r|1),Ws(t,Yn()),!(Cr&6)&&(_p=Yn()+500,Su()))}break;case 13:Zd(function(){var n=Hl(e,1);if(n!==null){var i=Ms();To(n,e,1,i)}}),bO(e,1)}};UA=function(e){if(e.tag===13){var t=Hl(e,134217728);if(t!==null){var r=Ms();To(t,e,134217728,r)}bO(e,134217728)}};FK=function(e){if(e.tag===13){var t=ru(e),r=Hl(e,t);if(r!==null){var n=Ms();To(r,e,t,n)}bO(e,t)}};BK=function(){return Gr};zK=function(e,t){var r=Gr;try{return Gr=e,t()}finally{Gr=r}};GE=function(e,t,r){switch(t){case"input":if(RE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=j1(n);if(!i)throw Error(et(90));yK(n),RE(n,i)}}}break;case"textarea":xK(e,r);break;case"select":t=r.value,t!=null&&zh(e,!!r.multiple,t,!1)}};PK=gO;EK=Zd;var Sde={usingClientEntryPoint:!1,Events:[h_,xh,j1,MK,SK,gO]},pg={findFiberByHostInstance:Td,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pde={bundleType:pg.bundleType,version:pg.version,rendererPackageName:pg.rendererPackageName,rendererConfig:pg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ic.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=AK(e),e===null?null:e.stateNode},findFiberByHostInstance:pg.findFiberByHostInstance||Tde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X0.isDisabled&&X0.supportsFiber)try{M1=X0.inject(Pde),Zo=X0}catch{}}ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sde;ga.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kO(t))throw Error(et(200));return kde(e,t,null,r)};ga.createRoot=function(e,t){if(!kO(e))throw Error(et(299));var r=!1,n="",i=cq;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xO(e,1,!1,null,null,r,!1,n,i),e[Gl]=t.current,Fv(e.nodeType===8?e.parentNode:e),new wO(t)};ga.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=AK(t),e=e===null?null:e.stateNode,e};ga.flushSync=function(e){return Zd(e)};ga.hydrate=function(e,t,r){if(!R1(t))throw Error(et(200));return F1(null,e,t,!0,r)};ga.hydrateRoot=function(e,t,r){if(!kO(e))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=cq;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=lq(t,null,e,1,r??null,i,!1,s,a),e[Gl]=t.current,Fv(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new L1(t)};ga.render=function(e,t,r){if(!R1(t))throw Error(et(200));return F1(null,e,t,!1,r)};ga.unmountComponentAtNode=function(e){if(!R1(e))throw Error(et(40));return e._reactRootContainer?(Zd(function(){F1(null,null,e,!1,function(){e._reactRootContainer=null,e[Gl]=null})}),!0):!1};ga.unstable_batchedUpdates=gO;ga.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!R1(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return F1(e,t,r,!1,n)};ga.version="18.3.1-next-f1338f8080-20240426";function uq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uq)}catch(e){console.error(e)}}uq(),uK.exports=ga;var gf=uK.exports;const TO=Dr(gf);var dq,oB=gf;dq=oB.createRoot,oB.hydrateRoot;var Ede=typeof Element<"u",jde=typeof Map=="function",Cde=typeof Set=="function",Ade=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Jx(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Jx(e[n],t[n]))return!1;return!0}var s;if(jde&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Jx(n.value[1],t.get(n.value[0])))return!1;return!0}if(Cde&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(Ade&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(Ede&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Jx(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var Ode=function(t,r){try{return Jx(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const $de=Dr(Ode);var Nde=function(e,t,r,n,i,s,a,o){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,s,a,o],f=0;l=new Error(t.replace(/%s/g,function(){return c[f++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},Ide=Nde;const lB=Dr(Ide);var Dde=function(t,r,n,i){var s=n?n.call(i,t,r):void 0;if(s!==void 0)return!!s;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(r),c=0;c<a.length;c++){var f=a[c];if(!l(f))return!1;var d=t[f],h=r[f];if(s=n?n.call(i,d,h,f):void 0,s===!1||s===void 0&&d!==h)return!1}return!0};const Lde=Dr(Dde);var fq=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(fq||{}),hS={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},cB=Object.values(fq),MO={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Rde=Object.entries(MO).reduce((e,[t,r])=>(e[r]=t,e),{}),bo="data-rh",Kh={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},qh=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},Fde=e=>{let t=qh(e,"title");const r=qh(e,Kh.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=qh(e,Kh.DEFAULT_TITLE);return t||n||void 0},Bde=e=>qh(e,Kh.ON_CHANGE_CLIENT_STATE)||(()=>{}),pS=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),zde=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const i=Object.keys(n);for(let s=0;s<i.length;s+=1){const o=i[s].toLowerCase();if(e.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),Vde=e=>console&&typeof console.warn=="function"&&console.warn(e),mg=(e,t,r)=>{const n={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&Vde(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,s)=>{const a={};s.filter(l=>{let c;const f=Object.keys(l);for(let h=0;h<f.length;h+=1){const p=f[h],m=p.toLowerCase();t.indexOf(m)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(m==="rel"&&l[m].toLowerCase()==="stylesheet")&&(c=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const d=l[c].toLowerCase();return n[c]||(n[c]={}),a[c]||(a[c]={}),n[c][d]?!1:(a[c][d]=!0,!0)}).reverse().forEach(l=>i.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const c=o[l],f={...n[c],...a[c]};n[c]=f}return i},[]).reverse()},Ude=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},Wde=e=>({baseTag:zde(["href"],e),bodyAttributes:pS("bodyAttributes",e),defer:qh(e,Kh.DEFER),encode:qh(e,Kh.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:pS("htmlAttributes",e),linkTags:mg("link",["rel","href"],e),metaTags:mg("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:mg("noscript",["innerHTML"],e),onChangeClientState:Bde(e),scriptTags:mg("script",["src","innerHTML"],e),styleTags:mg("style",["cssText"],e),title:Fde(e),titleAttributes:pS("titleAttributes",e),prioritizeSeoTags:Ude(e,Kh.PRIORITIZE_SEO_TAGS)}),hq=e=>Array.isArray(e)?e.join(""):e,Gde=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},mS=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Gde(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},uB=(e,t)=>({...e,[t]:void 0}),Hde=["noscript","script","style"],Tj=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),pq=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Kde=(e,t,r,n)=>{const i=pq(r),s=hq(t);return i?`<${e} ${bo}="true" ${i}>${Tj(s,n)}</${e}>`:`<${e} ${bo}="true">${Tj(s,n)}</${e}>`},qde=(e,t,r=!0)=>t.reduce((n,i)=>{const s=i,a=Object.keys(s).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,f)=>{const d=typeof s[f]>"u"?f:`${f}="${Tj(s[f],r)}"`;return c?`${c} ${d}`:d},""),o=s.innerHTML||s.cssText||"",l=Hde.indexOf(e)===-1;return`${n}<${e} ${bo}="true" ${a}${l?"/>":`>${o}</${e}>`}`},""),mq=(e,t={})=>Object.keys(e).reduce((r,n)=>{const i=MO[n];return r[i||n]=e[n],r},t),Xde=(e,t,r)=>{const n={key:t,[bo]:!0},i=mq(r,n);return[ae.createElement("title",i,t)]},eb=(e,t)=>t.map((r,n)=>{const i={key:n,[bo]:!0};return Object.keys(r).forEach(s=>{const o=MO[s]||s;if(o==="innerHTML"||o==="cssText"){const l=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:l}}else i[o]=r[s]}),ae.createElement(e,i)}),Pa=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Xde(e,t.title,t.titleAttributes),toString:()=>Kde(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>mq(t),toString:()=>pq(t)};default:return{toComponent:()=>eb(e,t),toString:()=>qde(e,t,r)}}},Yde=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const i=mS(e,hS.meta),s=mS(t,hS.link),a=mS(r,hS.script);return{priorityMethods:{toComponent:()=>[...eb("meta",i.priority),...eb("link",s.priority),...eb("script",a.priority)],toString:()=>`${Pa("meta",i.priority,n)} ${Pa("link",s.priority,n)} ${Pa("script",a.priority,n)}`},metaTags:i.default,linkTags:s.default,scriptTags:a.default}},Qde=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:i,noscriptTags:s,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:f,metaTags:d,scriptTags:h}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:f,metaTags:d,scriptTags:h}=Yde(e)),{priority:p,base:Pa("base",t,n),bodyAttributes:Pa("bodyAttributes",r,n),htmlAttributes:Pa("htmlAttributes",i,n),link:Pa("link",f,n),meta:Pa("meta",d,n),noscript:Pa("noscript",s,n),script:Pa("script",h,n),style:Pa("style",a,n),title:Pa("title",{title:o,titleAttributes:l},n)}},Mj=Qde,Y0=[],gq=!!(typeof window<"u"&&window.document&&window.document.createElement),Sj=class{constructor(e,t){de(this,"instances",[]);de(this,"canUseDOM",gq);de(this,"context");de(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Y0:this.instances,add:e=>{(this.canUseDOM?Y0:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Y0:this.instances).indexOf(e);(this.canUseDOM?Y0:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Mj({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Zde={},vq=ae.createContext(Zde),Id,yq=(Id=class extends E.Component{constructor(r){super(r);de(this,"helmetData");this.helmetData=new Sj(this.props.context||{},Id.canUseDOM)}render(){return ae.createElement(vq.Provider,{value:this.helmetData.value},this.props.children)}},de(Id,"canUseDOM",gq),Id),Uf=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${bo}]`),i=[].slice.call(n),s=[];let a;return t&&t.length&&t.forEach(o=>{const l=document.createElement(e);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c))if(c==="innerHTML")l.innerHTML=o.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const f=c,d=typeof o[f]>"u"?"":o[f];l.setAttribute(c,d)}l.setAttribute(bo,"true"),i.some((c,f)=>(a=f,l.isEqualNode(c)))?i.splice(a,1):s.push(l)}),i.forEach(o=>{var l;return(l=o.parentNode)==null?void 0:l.removeChild(o)}),s.forEach(o=>r.appendChild(o)),{oldTags:i,newTags:s}},Pj=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(bo),i=n?n.split(","):[],s=[...i],a=Object.keys(t);for(const o of a){const l=t[o]||"";r.getAttribute(o)!==l&&r.setAttribute(o,l),i.indexOf(o)===-1&&i.push(o);const c=s.indexOf(o);c!==-1&&s.splice(c,1)}for(let o=s.length-1;o>=0;o-=1)r.removeAttribute(s[o]);i.length===s.length?r.removeAttribute(bo):r.getAttribute(bo)!==a.join(",")&&r.setAttribute(bo,a.join(","))},Jde=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=hq(e)),Pj("title",t)},dB=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:i,linkTags:s,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:f,title:d,titleAttributes:h}=e;Pj("body",n),Pj("html",i),Jde(d,h);const p={baseTag:Uf("base",r),linkTags:Uf("link",s),metaTags:Uf("meta",a),noscriptTags:Uf("noscript",o),scriptTags:Uf("script",c),styleTags:Uf("style",f)},m={},g={};Object.keys(p).forEach(x=>{const{newTags:y,oldTags:v}=p[x];y.length&&(m[x]=y),v.length&&(g[x]=p[x].oldTags)}),t&&t(),l(e,m,g)},gg=null,efe=e=>{gg&&cancelAnimationFrame(gg),e.defer?gg=requestAnimationFrame(()=>{dB(e,()=>{gg=null})}):(dB(e),gg=null)},tfe=efe,fB=class extends E.Component{constructor(){super(...arguments);de(this,"rendered",!1)}shouldComponentUpdate(t){return!Lde(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const i=Wde(t.get().map(s=>{const a={...s.props};return delete a.context,a}));yq.canUseDOM?tfe(i):Mj&&(n=Mj(i)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},AE,rfe=(AE=class extends E.Component{shouldComponentUpdate(e){return!$de(uB(this.props,"helmetData"),uB(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return lB(cB.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${cB.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),lB(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return ae.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:i,...s}=n.props,a=Object.keys(s).reduce((l,c)=>(l[Rde[c]||c]=s[c],l),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,i),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,a,i);break;default:t=this.mapObjectTypeChildren(n,t,a,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof Sj)){const i=n;n=new Sj(i.context,!0),delete r.helmetData}return n?ae.createElement(fB,{...r,context:n.value}):ae.createElement(vq.Consumer,null,i=>ae.createElement(fB,{...r,context:i}))}},de(AE,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),AE);const nfe=1,ife=1e6;let gS=0;function sfe(){return gS=(gS+1)%Number.MAX_SAFE_INTEGER,gS.toString()}const vS=new Map,hB=e=>{if(vS.has(e))return;const t=setTimeout(()=>{vS.delete(e),pv({type:"REMOVE_TOAST",toastId:e})},ife);vS.set(e,t)},afe=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,nfe)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?hB(r):e.toasts.forEach(n=>{hB(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},tb=[];let rb={toasts:[]};function pv(e){rb=afe(rb,e),tb.forEach(t=>{t(rb)})}function ofe({...e}){const t=sfe(),r=i=>pv({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>pv({type:"DISMISS_TOAST",toastId:t});return pv({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function Oo(){const[e,t]=E.useState(rb);return E.useEffect(()=>(tb.push(t),()=>{const r=tb.indexOf(t);r>-1&&tb.splice(r,1)}),[e]),{...e,toast:ofe,dismiss:r=>pv({type:"DISMISS_TOAST",toastId:r})}}function xt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function lfe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function SO(...e){return t=>e.forEach(r=>lfe(r,t))}function Nr(...e){return E.useCallback(SO(...e),e)}function cfe(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return u.jsx(g.Provider,{value:x,children:p})}function f(d,h){const p=(h==null?void 0:h[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,f]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,ufe(i,...t)]}function ufe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var uu=E.forwardRef((e,t)=>{const{children:r,...n}=e,i=E.Children.toArray(r),s=i.find(dfe);if(s){const a=s.props.children,o=i.map(l=>l===s?E.Children.count(a)>1?E.Children.only(null):E.isValidElement(a)?a.props.children:null:l);return u.jsx(Ej,{...n,ref:t,children:E.isValidElement(a)?E.cloneElement(a,void 0,o):null})}return u.jsx(Ej,{...n,ref:t,children:r})});uu.displayName="Slot";var Ej=E.forwardRef((e,t)=>{const{children:r,...n}=e;if(E.isValidElement(r)){const i=hfe(r);return E.cloneElement(r,{...ffe(n,r.props),ref:t?SO(t,i):i})}return E.Children.count(r)>1?E.Children.only(null):null});Ej.displayName="SlotClone";var _q=({children:e})=>u.jsx(u.Fragment,{children:e});function dfe(e){return E.isValidElement(e)&&e.type===_q}function ffe(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...o)=>{s(...o),i(...o)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}function hfe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function m_(e){const t=e+"CollectionProvider",[r,n]=cfe(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:m,children:g}=p,x=ae.useRef(null),y=ae.useRef(new Map).current;return u.jsx(i,{scope:m,itemMap:y,collectionRef:x,children:g})};a.displayName=t;const o=e+"CollectionSlot",l=ae.forwardRef((p,m)=>{const{scope:g,children:x}=p,y=s(o,g),v=Nr(m,y.collectionRef);return u.jsx(uu,{ref:v,children:x})});l.displayName=o;const c=e+"CollectionItemSlot",f="data-radix-collection-item",d=ae.forwardRef((p,m)=>{const{scope:g,children:x,...y}=p,v=ae.useRef(null),_=Nr(m,v),b=s(c,g);return ae.useEffect(()=>(b.itemMap.set(v,{ref:v,...y}),()=>void b.itemMap.delete(v))),u.jsx(uu,{[f]:"",ref:_,children:x})});d.displayName=c;function h(p){const m=s(e+"CollectionConsumer",p);return ae.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(m.itemMap.values()).sort((b,w)=>y.indexOf(b.ref.current)-y.indexOf(w.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:l,ItemSlot:d},h,n]}function pfe(e,t){const r=E.createContext(t),n=s=>{const{children:a,...o}=s,l=E.useMemo(()=>o,Object.values(o));return u.jsx(r.Provider,{value:l,children:a})};n.displayName=e+"Provider";function i(s){const a=E.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,i]}function vf(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];const c=d=>{var y;const{scope:h,children:p,...m}=d,g=((y=h==null?void 0:h[e])==null?void 0:y[l])||o,x=E.useMemo(()=>m,Object.values(m));return u.jsx(g.Provider,{value:x,children:p})};c.displayName=s+"Provider";function f(d,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,f]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,mfe(i,...t)]}function mfe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var gfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ft=gfe.reduce((e,t)=>{const r=E.forwardRef((n,i)=>{const{asChild:s,...a}=n,o=s?uu:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(o,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Bb(e,t){e&&gf.flushSync(()=>e.dispatchEvent(t))}function Qn(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e}),E.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function vfe(e,t=globalThis==null?void 0:globalThis.document){const r=Qn(e);E.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var yfe="DismissableLayer",jj="dismissableLayer.update",_fe="dismissableLayer.pointerDownOutside",xfe="dismissableLayer.focusOutside",pB,xq=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),am=E.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=E.useContext(xq),[f,d]=E.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=E.useState({}),m=Nr(t,T=>d(T)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(x),v=f?g.indexOf(f):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=wfe(T=>{const M=T.target,j=[...c.branches].some(C=>C.contains(M));!b||j||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},h),k=kfe(T=>{const M=T.target;[...c.branches].some(C=>C.contains(M))||(s==null||s(T),a==null||a(T),T.defaultPrevented||o==null||o())},h);return vfe(T=>{v===c.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},h),E.useEffect(()=>{if(f)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(pB=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),mB(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=pB)}},[f,h,r,c]),E.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),mB())},[f,c]),E.useEffect(()=>{const T=()=>p({});return document.addEventListener(jj,T),()=>document.removeEventListener(jj,T)},[]),u.jsx(Ft.div,{...l,ref:m,style:{pointerEvents:_?b?"auto":"none":void 0,...e.style},onFocusCapture:xt(e.onFocusCapture,k.onFocusCapture),onBlurCapture:xt(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:xt(e.onPointerDownCapture,w.onPointerDownCapture)})});am.displayName=yfe;var bfe="DismissableLayerBranch",bq=E.forwardRef((e,t)=>{const r=E.useContext(xq),n=E.useRef(null),i=Nr(t,n);return E.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),u.jsx(Ft.div,{...e,ref:i})});bq.displayName=bfe;function wfe(e,t=globalThis==null?void 0:globalThis.document){const r=Qn(e),n=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){wq(_fe,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function kfe(e,t=globalThis==null?void 0:globalThis.document){const r=Qn(e),n=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!n.current&&wq(xfe,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function mB(){const e=new CustomEvent(jj);document.dispatchEvent(e)}function wq(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Bb(i,s):i.dispatchEvent(s)}var Tfe=am,Mfe=bq,ki=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},Sfe="Portal",B1=E.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[i,s]=E.useState(!1);ki(()=>s(!0),[]);const a=r||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?TO.createPortal(u.jsx(Ft.div,{...n,ref:t}),a):null});B1.displayName=Sfe;function Pfe(e,t){return E.useReducer((r,n)=>t[r][n]??r,e)}var Ua=e=>{const{present:t,children:r}=e,n=Efe(t),i=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),s=Nr(n.ref,jfe(i));return typeof r=="function"||n.isPresent?E.cloneElement(i,{ref:s}):null};Ua.displayName="Presence";function Efe(e){const[t,r]=E.useState(),n=E.useRef({}),i=E.useRef(e),s=E.useRef("none"),a=e?"mounted":"unmounted",[o,l]=Pfe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=Q0(n.current);s.current=o==="mounted"?c:"none"},[o]),ki(()=>{const c=n.current,f=i.current;if(f!==e){const h=s.current,p=Q0(c);e?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(f&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),ki(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,d=p=>{const g=Q0(n.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!i.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=p=>{p.target===t&&(s.current=Q0(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:E.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function Q0(e){return(e==null?void 0:e.animationName)||"none"}function jfe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ql({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=Cfe({defaultProp:t,onChange:r}),s=e!==void 0,a=s?e:n,o=Qn(r),l=E.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&o(d)}else i(c)},[s,e,i,o]);return[a,l]}function Cfe({defaultProp:e,onChange:t}){const r=E.useState(e),[n]=r,i=E.useRef(n),s=Qn(t);return E.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}var Afe="VisuallyHidden",g_=E.forwardRef((e,t)=>u.jsx(Ft.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));g_.displayName=Afe;var kq=g_,PO="ToastProvider",[EO,Ofe,$fe]=m_("Toast"),[Tq,Zqe]=vf("Toast",[$fe]),[Nfe,z1]=Tq(PO),Mq=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=e,[o,l]=E.useState(null),[c,f]=E.useState(0),d=E.useRef(!1),h=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${PO}\`. Expected non-empty \`string\`.`),u.jsx(EO.Provider,{scope:t,children:u.jsx(Nfe,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:E.useCallback(()=>f(p=>p+1),[]),onToastRemove:E.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};Mq.displayName=PO;var Sq="ToastViewport",Ife=["F8"],Cj="toast.viewportPause",Aj="toast.viewportResume",Pq=E.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Ife,label:i="Notifications ({hotkey})",...s}=e,a=z1(Sq,r),o=Ofe(r),l=E.useRef(null),c=E.useRef(null),f=E.useRef(null),d=E.useRef(null),h=Nr(t,d,a.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;E.useEffect(()=>{const x=y=>{var _;n.length!==0&&n.every(b=>y[b]||y.code===b)&&((_=d.current)==null||_.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),E.useEffect(()=>{const x=l.current,y=d.current;if(m&&x&&y){const v=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent(Cj);y.dispatchEvent(k),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(Aj);y.dispatchEvent(k),a.isClosePausedRef.current=!1}},b=k=>{!x.contains(k.relatedTarget)&&_()},w=()=>{x.contains(document.activeElement)||_()};return x.addEventListener("focusin",v),x.addEventListener("focusout",b),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",_),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",b),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",_)}}},[m,a.isClosePausedRef]);const g=E.useCallback(({tabbingDirection:x})=>{const v=o().map(_=>{const b=_.ref.current,w=[b,...qfe(b)];return x==="forwards"?w:w.reverse()});return(x==="forwards"?v.reverse():v).flat()},[o]);return E.useEffect(()=>{const x=d.current;if(x){const y=v=>{var w,k,T;const _=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!_){const M=document.activeElement,j=v.shiftKey;if(v.target===x&&j){(w=c.current)==null||w.focus();return}const I=g({tabbingDirection:j?"backwards":"forwards"}),N=I.findIndex(z=>z===M);yS(I.slice(N+1))?v.preventDefault():j?(k=c.current)==null||k.focus():(T=f.current)==null||T.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[o,g]),u.jsxs(Mfe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&u.jsx(Oj,{ref:c,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});yS(x)}}),u.jsx(EO.Slot,{scope:r,children:u.jsx(Ft.ol,{tabIndex:-1,...s,ref:h})}),m&&u.jsx(Oj,{ref:f,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});yS(x)}})]})});Pq.displayName=Sq;var Eq="ToastFocusProxy",Oj=E.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=z1(Eq,r);return u.jsx(g_,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:a=>{var c;const o=a.relatedTarget;!((c=s.viewport)!=null&&c.contains(o))&&n()}})});Oj.displayName=Eq;var V1="Toast",Dfe="toast.swipeStart",Lfe="toast.swipeMove",Rfe="toast.swipeCancel",Ffe="toast.swipeEnd",jq=E.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=e,[o=!0,l]=ql({prop:n,defaultProp:i,onChange:s});return u.jsx(Ua,{present:r||o,children:u.jsx(Vfe,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:Qn(e.onPause),onResume:Qn(e.onResume),onSwipeStart:xt(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xt(e.onSwipeMove,c=>{const{x:f,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:xt(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xt(e.onSwipeEnd,c=>{const{x:f,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});jq.displayName=V1;var[Bfe,zfe]=Tq(V1,{onClose(){}}),Vfe=E.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...m}=e,g=z1(V1,r),[x,y]=E.useState(null),v=Nr(t,z=>y(z)),_=E.useRef(null),b=E.useRef(null),w=i||g.duration,k=E.useRef(0),T=E.useRef(w),M=E.useRef(0),{onToastAdd:j,onToastRemove:C}=g,R=Qn(()=>{var V;(x==null?void 0:x.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),a()}),I=E.useCallback(z=>{!z||z===1/0||(window.clearTimeout(M.current),k.current=new Date().getTime(),M.current=window.setTimeout(R,z))},[R]);E.useEffect(()=>{const z=g.viewport;if(z){const V=()=>{I(T.current),c==null||c()},G=()=>{const H=new Date().getTime()-k.current;T.current=T.current-H,window.clearTimeout(M.current),l==null||l()};return z.addEventListener(Cj,G),z.addEventListener(Aj,V),()=>{z.removeEventListener(Cj,G),z.removeEventListener(Aj,V)}}},[g.viewport,w,l,c,I]),E.useEffect(()=>{s&&!g.isClosePausedRef.current&&I(w)},[s,w,g.isClosePausedRef,I]),E.useEffect(()=>(j(),()=>C()),[j,C]);const N=E.useMemo(()=>x?Dq(x):null,[x]);return g.viewport?u.jsxs(u.Fragment,{children:[N&&u.jsx(Ufe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),u.jsx(Bfe,{scope:r,onClose:R,children:gf.createPortal(u.jsx(EO.ItemSlot,{scope:r,children:u.jsx(Tfe,{asChild:!0,onEscapeKeyDown:xt(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(Ft.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xt(e.onKeyDown,z=>{z.key==="Escape"&&(o==null||o(z.nativeEvent),z.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:xt(e.onPointerDown,z=>{z.button===0&&(_.current={x:z.clientX,y:z.clientY})}),onPointerMove:xt(e.onPointerMove,z=>{if(!_.current)return;const V=z.clientX-_.current.x,G=z.clientY-_.current.y,H=!!b.current,O=["left","right"].includes(g.swipeDirection),q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ee=O?q(0,V):0,B=O?0:q(0,G),D=z.pointerType==="touch"?10:2,K={x:ee,y:B},oe={originalEvent:z,delta:K};H?(b.current=K,Z0(Lfe,d,oe,{discrete:!1})):gB(K,g.swipeDirection,D)?(b.current=K,Z0(Dfe,f,oe,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(V)>D||Math.abs(G)>D)&&(_.current=null)}),onPointerUp:xt(e.onPointerUp,z=>{const V=b.current,G=z.target;if(G.hasPointerCapture(z.pointerId)&&G.releasePointerCapture(z.pointerId),b.current=null,_.current=null,V){const H=z.currentTarget,O={originalEvent:z,delta:V};gB(V,g.swipeDirection,g.swipeThreshold)?Z0(Ffe,p,O,{discrete:!0}):Z0(Rfe,h,O,{discrete:!0}),H.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Ufe=e=>{const{__scopeToast:t,children:r,...n}=e,i=z1(V1,t),[s,a]=E.useState(!1),[o,l]=E.useState(!1);return Hfe(()=>a(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:u.jsx(B1,{asChild:!0,children:u.jsx(g_,{...n,children:s&&u.jsxs(u.Fragment,{children:[i.label," ",r]})})})},Wfe="ToastTitle",Cq=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return u.jsx(Ft.div,{...n,ref:t})});Cq.displayName=Wfe;var Gfe="ToastDescription",Aq=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return u.jsx(Ft.div,{...n,ref:t})});Aq.displayName=Gfe;var Oq="ToastAction",$q=E.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?u.jsx(Iq,{altText:r,asChild:!0,children:u.jsx(jO,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Oq}\`. Expected non-empty \`string\`.`),null)});$q.displayName=Oq;var Nq="ToastClose",jO=E.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=zfe(Nq,r);return u.jsx(Iq,{asChild:!0,children:u.jsx(Ft.button,{type:"button",...n,ref:t,onClick:xt(e.onClick,i.onClose)})})});jO.displayName=Nq;var Iq=E.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return u.jsx(Ft.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function Dq(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Kfe(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Dq(n))}}),t}function Z0(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Bb(i,s):i.dispatchEvent(s)}var gB=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return t==="left"||t==="right"?s&&n>r:!s&&i>r};function Hfe(e=()=>{}){const t=Qn(e);ki(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Kfe(e){return e.nodeType===e.ELEMENT_NODE}function qfe(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function yS(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Xfe=Mq,Lq=Pq,Rq=jq,Fq=Cq,Bq=Aq,zq=$q,Vq=jO;function Uq(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Uq(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function dr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Uq(e))&&(n&&(n+=" "),n+=t);return n}const vB=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,yB=dr,v_=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return yB(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(c=>{const f=r==null?void 0:r[c],d=s==null?void 0:s[c];if(f===null)return null;const h=vB(f)||vB(d);return i[c][h]}),o=r&&Object.entries(r).reduce((c,f)=>{let[d,h]=f;return h===void 0||(c[d]=h),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,f)=>{let{class:d,className:h,...p}=f;return Object.entries(p).every(m=>{let[g,x]=m;return Array.isArray(x)?x.includes({...s,...o}[g]):{...s,...o}[g]===x})?[...c,d,h]:c},[]);return yB(e,a,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wq=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>E.createElement("svg",{ref:l,...Qfe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Wq("lucide",i),...o},[...a.map(([c,f])=>E.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const r=E.forwardRef(({className:n,...i},s)=>E.createElement(Zfe,{ref:s,iconNode:t,className:Wq(`lucide-${Yfe(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=wt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=wt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=wt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=wt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=wt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=wt("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=wt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rhe=wt("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=wt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=wt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=wt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=wt("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=wt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=wt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=wt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=wt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=wt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ohe=wt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=wt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=wt("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=wt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=wt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const che=wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uhe=wt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=wt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fhe=wt("FileSymlink",[["path",{d:"m10 18 3-3-3-3",key:"18f6ys"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 11V4a2 2 0 0 1 2-2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"50q2rw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=wt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=wt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=wt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const phe=wt("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=wt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mhe=wt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=wt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=wt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=wt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=wt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=wt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=wt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=wt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=wt("MonitorSmartphone",[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xhe=wt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=wt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bhe=wt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=wt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const whe=wt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=wt("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=wt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=wt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=wt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=wt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=wt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=wt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=wt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=wt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=wt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=wt("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=wt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ehe=wt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=wt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=wt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=wt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=wt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=wt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),NO="-",Che=e=>{const t=Ohe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const o=a.split(NO);return o[0]===""&&o.length!==1&&o.shift(),Xq(o,t)||Ahe(a)},getConflictingClassGroupIds:(a,o)=>{const l=r[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},Xq=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?Xq(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(NO);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},kB=/^\[(.+)\]$/,Ahe=e=>{if(kB.test(e)){const t=kB.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Ohe=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Nhe(Object.entries(e.classGroups),r).forEach(([s,a])=>{Ij(a,n,s,t)}),n},Ij=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:TB(t,i);s.classGroupId=r;return}if(typeof i=="function"){if($he(i)){Ij(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{Ij(a,TB(t,s),r,n)})})},TB=(e,t)=>{let r=e;return t.split(NO).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},$he=e=>e.isThemeGetter,Nhe=(e,t)=>t?e.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[t+a,o])):s);return[r,i]}):e,Ihe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},Yq="!",Dhe=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],s=t.length,a=o=>{const l=[];let c=0,f=0,d;for(let x=0;x<o.length;x++){let y=o[x];if(c===0){if(y===i&&(n||o.slice(x,x+s)===t)){l.push(o.slice(f,x)),f=x+s;continue}if(y==="/"){d=x;continue}}y==="["?c++:y==="]"&&c--}const h=l.length===0?o:o.substring(f),p=h.startsWith(Yq),m=p?h.substring(1):h,g=d&&d>f?d-f:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return r?o=>r({className:o,parseClassName:a}):a},Lhe=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Rhe=e=>({cache:Ihe(e.cacheSize),parseClassName:Dhe(e),...Che(e)}),Fhe=/\s+/,Bhe=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(Fhe);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(c);let m=!!p,g=n(m?h.substring(0,p):h);if(!g){if(!m){o=c+(o.length>0?" "+o:o);continue}if(g=n(h),!g){o=c+(o.length>0?" "+o:o);continue}m=!1}const x=Lhe(f).join(":"),y=d?x+Yq:x,v=y+g;if(s.includes(v))continue;s.push(v);const _=i(g,m);for(let b=0;b<_.length;++b){const w=_[b];s.push(y+w)}o=c+(o.length>0?" "+o:o)}return o};function zhe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Qq(t))&&(n&&(n+=" "),n+=r);return n}const Qq=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Qq(e[n]))&&(r&&(r+=" "),r+=t);return r};function Vhe(e,...t){let r,n,i,s=a;function a(l){const c=t.reduce((f,d)=>d(f),e());return r=Rhe(c),n=r.cache.get,i=r.cache.set,s=o,o(l)}function o(l){const c=n(l);if(c)return c;const f=Bhe(l,r);return i(l,f),f}return function(){return s(zhe.apply(null,arguments))}}const mn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Zq=/^\[(?:([a-z-]+):)?(.+)\]$/i,Uhe=/^\d+\/\d+$/,Whe=new Set(["px","full","screen"]),Ghe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hhe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Khe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qhe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xhe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vl=e=>Yh(e)||Whe.has(e)||Uhe.test(e),xc=e=>om(e,"length",npe),Yh=e=>!!e&&!Number.isNaN(Number(e)),_S=e=>om(e,"number",Yh),vg=e=>!!e&&Number.isInteger(Number(e)),Yhe=e=>e.endsWith("%")&&Yh(e.slice(0,-1)),ar=e=>Zq.test(e),bc=e=>Ghe.test(e),Qhe=new Set(["length","size","percentage"]),Zhe=e=>om(e,Qhe,Jq),Jhe=e=>om(e,"position",Jq),epe=new Set(["image","url"]),tpe=e=>om(e,epe,spe),rpe=e=>om(e,"",ipe),yg=()=>!0,om=(e,t,r)=>{const n=Zq.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},npe=e=>Hhe.test(e)&&!Khe.test(e),Jq=()=>!1,ipe=e=>qhe.test(e),spe=e=>Xhe.test(e),ape=()=>{const e=mn("colors"),t=mn("spacing"),r=mn("blur"),n=mn("brightness"),i=mn("borderColor"),s=mn("borderRadius"),a=mn("borderSpacing"),o=mn("borderWidth"),l=mn("contrast"),c=mn("grayscale"),f=mn("hueRotate"),d=mn("invert"),h=mn("gap"),p=mn("gradientColorStops"),m=mn("gradientColorStopPositions"),g=mn("inset"),x=mn("margin"),y=mn("opacity"),v=mn("padding"),_=mn("saturate"),b=mn("scale"),w=mn("sepia"),k=mn("skew"),T=mn("space"),M=mn("translate"),j=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",ar,t],I=()=>[ar,t],N=()=>["",vl,xc],z=()=>["auto",Yh,ar],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",ar],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Yh,ar];return{cacheSize:500,separator:":",theme:{colors:[yg],spacing:[vl,xc],blur:["none","",bc,ar],brightness:B(),borderColor:[e],borderRadius:["none","","full",bc,ar],borderSpacing:I(),borderWidth:N(),contrast:B(),grayscale:q(),hueRotate:B(),invert:q(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[Yhe,xc],inset:R(),margin:R(),opacity:B(),padding:I(),saturate:B(),scale:B(),sepia:q(),skew:B(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ar]}],container:["container"],columns:[{columns:[bc]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),ar]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vg,ar]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ar]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",vg,ar]}],"grid-cols":[{"grid-cols":[yg]}],"col-start-end":[{col:["auto",{span:["full",vg,ar]},ar]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[yg]}],"row-start-end":[{row:["auto",{span:[vg,ar]},ar]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ar]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ar,t]}],"min-w":[{"min-w":[ar,t,"min","max","fit"]}],"max-w":[{"max-w":[ar,t,"none","full","min","max","fit","prose",{screen:[bc]},bc]}],h:[{h:[ar,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ar,t,"auto","min","max","fit"]}],"font-size":[{text:["base",bc,xc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_S]}],"font-family":[{font:[yg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ar]}],"line-clamp":[{"line-clamp":["none",Yh,_S]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vl,ar]}],"list-image":[{"list-image":["none",ar]}],"list-style-type":[{list:["none","disc","decimal",ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vl,xc]}],"underline-offset":[{"underline-offset":["auto",vl,ar]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),Jhe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zhe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tpe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[vl,ar]}],"outline-w":[{outline:[vl,xc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[vl,xc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",bc,rpe]}],"shadow-color":[{shadow:[yg]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",bc,ar]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ar]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ar]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[vg,ar]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ar]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vl,xc,_S]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ope=Vhe(ape);function St(...e){return ope(dr(e))}const lpe=Xfe,eX=E.forwardRef(({className:e,...t},r)=>u.jsx(Lq,{ref:r,className:St("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));eX.displayName=Lq.displayName;const cpe=v_("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tX=E.forwardRef(({className:e,variant:t,...r},n)=>u.jsx(Rq,{ref:n,className:St(cpe({variant:t}),e),...r}));tX.displayName=Rq.displayName;const upe=E.forwardRef(({className:e,...t},r)=>u.jsx(zq,{ref:r,className:St("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));upe.displayName=zq.displayName;const rX=E.forwardRef(({className:e,...t},r)=>u.jsx(Vq,{ref:r,className:St("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:u.jsx(xp,{className:"h-4 w-4"})}));rX.displayName=Vq.displayName;const nX=E.forwardRef(({className:e,...t},r)=>u.jsx(Fq,{ref:r,className:St("text-sm font-semibold",e),...t}));nX.displayName=Fq.displayName;const iX=E.forwardRef(({className:e,...t},r)=>u.jsx(Bq,{ref:r,className:St("text-sm opacity-90",e),...t}));iX.displayName=Bq.displayName;function dpe(){const{toasts:e}=Oo();return u.jsxs(lpe,{children:[e.map(function({id:t,title:r,description:n,action:i,...s}){return u.jsxs(tX,{...s,children:[u.jsxs("div",{className:"grid gap-1",children:[r&&u.jsx(nX,{children:r}),n&&u.jsx(iX,{children:n})]}),i,u.jsx(rX,{})]},t)}),u.jsx(eX,{})]})}var MB=["light","dark"],fpe="(prefers-color-scheme: dark)",hpe=E.createContext(void 0),ppe={setTheme:e=>{},themes:[]},mpe=()=>{var e;return(e=E.useContext(hpe))!=null?e:ppe};E.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,attrs:o,nonce:l})=>{let c=s==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=i?MB.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(m,g=!1,x=!0)=>{let y=a?a[m]:m,v=g?m+"|| ''":`'${y}'`,_="";return i&&x&&!g&&MB.includes(m)&&(_+=`d.style.colorScheme = '${m}';`),r==="class"?g||y?_+=`c.add(${v})`:_+="null":y&&(_+=`d[s](n,${v})`),_},p=e?`!function(){${f}${h(e)}}()`:n?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${fpe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return E.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var gpe=e=>{switch(e){case"success":return _pe;case"info":return bpe;case"warning":return xpe;case"error":return wpe;default:return null}},vpe=Array(12).fill(0),ype=({visible:e})=>ae.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},ae.createElement("div",{className:"sonner-spinner"},vpe.map((t,r)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_pe=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xpe=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bpe=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wpe=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kpe=()=>{let[e,t]=ae.useState(document.hidden);return ae.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Dj=1,Tpe=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,s=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Dj++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...i,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),s=n!==void 0;return i.then(async a=>{if(Spe(a)&&!a.ok){s=!1;let o=typeof r.error=="function"?await r.error(`HTTP error! status: ${a.status}`):r.error,l=typeof r.description=="function"?await r.description(`HTTP error! status: ${a.status}`):r.description;this.create({id:n,type:"error",message:o,description:l})}else if(r.success!==void 0){s=!1;let o=typeof r.success=="function"?await r.success(a):r.success,l=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(r.error!==void 0){s=!1;let o=typeof r.error=="function"?await r.error(a):r.error,l=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=r.finally)==null||a.call(r)}),n},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||Dj++;return this.create({jsx:t(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},Qs=new Tpe,Mpe=(e,t)=>{let r=(t==null?void 0:t.id)||Dj++;return Qs.addToast({title:e,...t,id:r}),r},Spe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ppe=Mpe,Epe=()=>Qs.toasts;Object.assign(Ppe,{success:Qs.success,info:Qs.info,warning:Qs.warning,error:Qs.error,custom:Qs.custom,message:Qs.message,promise:Qs.promise,dismiss:Qs.dismiss,loading:Qs.loading},{getHistory:Epe});function jpe(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}jpe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function J0(e){return e.label!==void 0}var Cpe=3,Ape="32px",Ope=4e3,$pe=356,Npe=14,Ipe=20,Dpe=200;function Lpe(...e){return e.filter(Boolean).join(" ")}var Rpe=e=>{var t,r,n,i,s,a,o,l,c,f;let{invert:d,toast:h,unstyled:p,interacting:m,setHeights:g,visibleToasts:x,heights:y,index:v,toasts:_,expanded:b,removeToast:w,defaultRichColors:k,closeButton:T,style:M,cancelButtonStyle:j,actionButtonStyle:C,className:R="",descriptionClassName:I="",duration:N,position:z,gap:V,loadingIcon:G,expandByDefault:H,classNames:O,icons:q,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:B,cn:D}=e,[K,oe]=ae.useState(!1),[_e,ue]=ae.useState(!1),[ye,$e]=ae.useState(!1),[Se,ge]=ae.useState(!1),[te,re]=ae.useState(0),[J,we]=ae.useState(0),Ne=ae.useRef(null),je=ae.useRef(null),Pe=v===0,Z=v+1<=x,ne=h.type,fe=h.dismissible!==!1,Me=h.className||"",Ce=h.descriptionClassName||"",me=ae.useMemo(()=>y.findIndex(vt=>vt.toastId===h.id)||0,[y,h.id]),Fe=ae.useMemo(()=>{var vt;return(vt=h.closeButton)!=null?vt:T},[h.closeButton,T]),ze=ae.useMemo(()=>h.duration||N||Ope,[h.duration,N]),Je=ae.useRef(0),He=ae.useRef(0),We=ae.useRef(0),nt=ae.useRef(null),[ct,Ht]=z.split("-"),Ut=ae.useMemo(()=>y.reduce((vt,er,kr)=>kr>=me?vt:vt+er.height,0),[y,me]),$t=kpe(),xn=h.invert||d,Zr=ne==="loading";He.current=ae.useMemo(()=>me*V+Ut,[me,Ut]),ae.useEffect(()=>{oe(!0)},[]),ae.useLayoutEffect(()=>{if(!K)return;let vt=je.current,er=vt.style.height;vt.style.height="auto";let kr=vt.getBoundingClientRect().height;vt.style.height=er,we(kr),g(li=>li.find(ci=>ci.toastId===h.id)?li.map(ci=>ci.toastId===h.id?{...ci,height:kr}:ci):[{toastId:h.id,height:kr,position:h.position},...li])},[K,h.title,h.description,g,h.id]);let dn=ae.useCallback(()=>{ue(!0),re(He.current),g(vt=>vt.filter(er=>er.toastId!==h.id)),setTimeout(()=>{w(h)},Dpe)},[h,w,g,He]);ae.useEffect(()=>{if(h.promise&&ne==="loading"||h.duration===1/0||h.type==="loading")return;let vt,er=ze;return b||m||B&&$t?(()=>{if(We.current<Je.current){let kr=new Date().getTime()-Je.current;er=er-kr}We.current=new Date().getTime()})():er!==1/0&&(Je.current=new Date().getTime(),vt=setTimeout(()=>{var kr;(kr=h.onAutoClose)==null||kr.call(h,h),dn()},er)),()=>clearTimeout(vt)},[b,m,H,h,ze,dn,h.promise,ne,B,$t]),ae.useEffect(()=>{let vt=je.current;if(vt){let er=vt.getBoundingClientRect().height;return we(er),g(kr=>[{toastId:h.id,height:er,position:h.position},...kr]),()=>g(kr=>kr.filter(li=>li.toastId!==h.id))}},[g,h.id]),ae.useEffect(()=>{h.delete&&dn()},[dn,h.delete]);function Cs(){return q!=null&&q.loading?ae.createElement("div",{className:"sonner-loader","data-visible":ne==="loading"},q.loading):G?ae.createElement("div",{className:"sonner-loader","data-visible":ne==="loading"},G):ae.createElement(ype,{visible:ne==="loading"})}return ae.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:je,className:D(R,Me,O==null?void 0:O.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[ne],(r=h==null?void 0:h.classNames)==null?void 0:r[ne]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":K,"data-promise":!!h.promise,"data-removed":_e,"data-visible":Z,"data-y-position":ct,"data-x-position":Ht,"data-index":v,"data-front":Pe,"data-swiping":ye,"data-dismissible":fe,"data-type":ne,"data-invert":xn,"data-swipe-out":Se,"data-expanded":!!(b||H&&K),style:{"--index":v,"--toasts-before":v,"--z-index":_.length-v,"--offset":`${_e?te:He.current}px`,"--initial-height":H?"auto":`${J}px`,...M,...h.style},onPointerDown:vt=>{Zr||!fe||(Ne.current=new Date,re(He.current),vt.target.setPointerCapture(vt.pointerId),vt.target.tagName!=="BUTTON"&&($e(!0),nt.current={x:vt.clientX,y:vt.clientY}))},onPointerUp:()=>{var vt,er,kr,li;if(Se||!fe)return;nt.current=null;let ci=Number(((vt=je.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Hs=new Date().getTime()-((er=Ne.current)==null?void 0:er.getTime()),Et=Math.abs(ci)/Hs;if(Math.abs(ci)>=Ipe||Et>.11){re(He.current),(kr=h.onDismiss)==null||kr.call(h,h),dn(),ge(!0);return}(li=je.current)==null||li.style.setProperty("--swipe-amount","0px"),$e(!1)},onPointerMove:vt=>{var er;if(!nt.current||!fe)return;let kr=vt.clientY-nt.current.y,li=vt.clientX-nt.current.x,ci=(ct==="top"?Math.min:Math.max)(0,kr),Hs=vt.pointerType==="touch"?10:2;Math.abs(ci)>Hs?(er=je.current)==null||er.style.setProperty("--swipe-amount",`${kr}px`):Math.abs(li)>Hs&&(nt.current=null)}},Fe&&!h.jsx?ae.createElement("button",{"aria-label":ee,"data-disabled":Zr,"data-close-button":!0,onClick:Zr||!fe?()=>{}:()=>{var vt;dn(),(vt=h.onDismiss)==null||vt.call(h,h)},className:D(O==null?void 0:O.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||ae.isValidElement(h.title)?h.jsx||h.title:ae.createElement(ae.Fragment,null,ne||h.icon||h.promise?ae.createElement("div",{"data-icon":"",className:D(O==null?void 0:O.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Cs():null,h.type!=="loading"?h.icon||(q==null?void 0:q[ne])||gpe(ne):null):null,ae.createElement("div",{"data-content":"",className:D(O==null?void 0:O.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},ae.createElement("div",{"data-title":"",className:D(O==null?void 0:O.title,(o=h==null?void 0:h.classNames)==null?void 0:o.title)},h.title),h.description?ae.createElement("div",{"data-description":"",className:D(I,Ce,O==null?void 0:O.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),ae.isValidElement(h.cancel)?h.cancel:h.cancel&&J0(h.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||j,onClick:vt=>{var er,kr;J0(h.cancel)&&fe&&((kr=(er=h.cancel).onClick)==null||kr.call(er,vt),dn())},className:D(O==null?void 0:O.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,ae.isValidElement(h.action)?h.action:h.action&&J0(h.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||C,onClick:vt=>{var er,kr;J0(h.action)&&(vt.defaultPrevented||((kr=(er=h.action).onClick)==null||kr.call(er,vt),dn()))},className:D(O==null?void 0:O.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function SB(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var Fpe=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:s,className:a,offset:o,theme:l="light",richColors:c,duration:f,style:d,visibleToasts:h=Cpe,toastOptions:p,dir:m=SB(),gap:g=Npe,loadingIcon:x,icons:y,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:_,cn:b=Lpe}=e,[w,k]=ae.useState([]),T=ae.useMemo(()=>Array.from(new Set([r].concat(w.filter(B=>B.position).map(B=>B.position)))),[w,r]),[M,j]=ae.useState([]),[C,R]=ae.useState(!1),[I,N]=ae.useState(!1),[z,V]=ae.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=ae.useRef(null),H=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=ae.useRef(null),q=ae.useRef(!1),ee=ae.useCallback(B=>{var D;(D=w.find(K=>K.id===B.id))!=null&&D.delete||Qs.dismiss(B.id),k(K=>K.filter(({id:oe})=>oe!==B.id))},[w]);return ae.useEffect(()=>Qs.subscribe(B=>{if(B.dismiss){k(D=>D.map(K=>K.id===B.id?{...K,delete:!0}:K));return}setTimeout(()=>{TO.flushSync(()=>{k(D=>{let K=D.findIndex(oe=>oe.id===B.id);return K!==-1?[...D.slice(0,K),{...D[K],...B},...D.slice(K+1)]:[B,...D]})})})}),[]),ae.useEffect(()=>{if(l!=="system"){V(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{V(B?"dark":"light")})},[l]),ae.useEffect(()=>{w.length<=1&&R(!1)},[w]),ae.useEffect(()=>{let B=D=>{var K,oe;n.every(_e=>D[_e]||D.code===_e)&&(R(!0),(K=G.current)==null||K.focus()),D.code==="Escape"&&(document.activeElement===G.current||(oe=G.current)!=null&&oe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[n]),ae.useEffect(()=>{if(G.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,q.current=!1)}},[G.current]),w.length?ae.createElement("section",{"aria-label":`${v} ${H}`,tabIndex:-1},T.map((B,D)=>{var K;let[oe,_e]=B.split("-");return ae.createElement("ol",{key:B,dir:m==="auto"?SB():m,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":oe,"data-x-position":_e,style:{"--front-toast-height":`${((K=M[0])==null?void 0:K.height)||0}px`,"--offset":typeof o=="number"?`${o}px`:o||Ape,"--width":`${$pe}px`,"--gap":`${g}px`,...d},onBlur:ue=>{q.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(q.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||q.current||(q.current=!0,O.current=ue.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{I||R(!1)},onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},w.filter(ue=>!ue.position&&D===0||ue.position===B).map((ue,ye)=>{var $e,Se;return ae.createElement(Rpe,{key:ue.id,icons:y,index:ye,toast:ue,defaultRichColors:c,duration:($e=p==null?void 0:p.duration)!=null?$e:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Se=p==null?void 0:p.closeButton)!=null?Se:s,interacting:I,position:B,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:ee,toasts:w.filter(ge=>ge.position==ue.position),heights:M.filter(ge=>ge.position==ue.position),setHeights:j,expandByDefault:i,gap:g,loadingIcon:x,expanded:C,pauseWhenPageIsHidden:_,cn:b})}))})):null};const Bpe=({...e})=>{const{theme:t="system"}=mpe();return u.jsx(Fpe,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var zpe=lK.useId||(()=>{}),Vpe=0;function tl(e){const[t,r]=E.useState(zpe());return ki(()=>{e||r(n=>n??String(Vpe++))},[e]),e||(t?`radix-${t}`:"")}const Upe=["top","right","bottom","left"],hu=Math.min,ra=Math.max,Wb=Math.round,ex=Math.floor,pu=e=>({x:e,y:e}),Wpe={left:"right",right:"left",bottom:"top",top:"bottom"},Gpe={start:"end",end:"start"};function Lj(e,t,r){return ra(e,hu(t,r))}function Yl(e,t){return typeof e=="function"?e(t):e}function Ql(e){return e.split("-")[0]}function lm(e){return e.split("-")[1]}function IO(e){return e==="x"?"y":"x"}function DO(e){return e==="y"?"height":"width"}function mu(e){return["top","bottom"].includes(Ql(e))?"y":"x"}function LO(e){return IO(mu(e))}function Hpe(e,t,r){r===void 0&&(r=!1);const n=lm(e),i=LO(e),s=DO(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Gb(a)),[a,Gb(a)]}function Kpe(e){const t=Gb(e);return[Rj(e),t,Rj(t)]}function Rj(e){return e.replace(/start|end/g,t=>Gpe[t])}function qpe(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:a;default:return[]}}function Xpe(e,t,r,n){const i=lm(e);let s=qpe(Ql(e),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(Rj)))),s}function Gb(e){return e.replace(/left|right|bottom|top/g,t=>Wpe[t])}function Ype(e){return{top:0,right:0,bottom:0,left:0,...e}}function sX(e){return typeof e!="number"?Ype(e):{top:e,right:e,bottom:e,left:e}}function Hb(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function PB(e,t,r){let{reference:n,floating:i}=e;const s=mu(t),a=LO(t),o=DO(a),l=Ql(t),c=s==="y",f=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[o]/2-i[o]/2;let p;switch(l){case"top":p={x:f,y:n.y-i.height};break;case"bottom":p={x:f,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-i.width,y:d};break;default:p={x:n.x,y:n.y}}switch(lm(t)){case"start":p[a]-=h*(r&&c?-1:1);break;case"end":p[a]+=h*(r&&c?-1:1);break}return p}const Qpe=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:d}=PB(c,n,l),h=n,p={},m=0;for(let g=0;g<o.length;g++){const{name:x,fn:y}=o[g],{x:v,y:_,data:b,reset:w}=await y({x:f,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});f=v??f,d=_??d,p={...p,[x]:{...p[x],...b}},w&&m<=50&&(m++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(c=w.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:f,y:d}=PB(c,h,l)),g=-1)}return{x:f,y:d,placement:h,strategy:i,middlewareData:p}};async function Xv(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Yl(t,e),m=sX(p),x=o[h?d==="floating"?"reference":"floating":d],y=Hb(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(x)))==null||r?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:f,strategy:l})),v=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},w=Hb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:_,strategy:l}):v);return{top:(y.top-w.top+m.top)/b.y,bottom:(w.bottom-y.bottom+m.bottom)/b.y,left:(y.left-w.left+m.left)/b.x,right:(w.right-y.right+m.right)/b.x}}const Zpe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:f=0}=Yl(e,t)||{};if(c==null)return{};const d=sX(f),h={x:r,y:n},p=LO(i),m=DO(p),g=await a.getDimensions(c),x=p==="y",y=x?"top":"left",v=x?"bottom":"right",_=x?"clientHeight":"clientWidth",b=s.reference[m]+s.reference[p]-h[p]-s.floating[m],w=h[p]-s.reference[p],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let T=k?k[_]:0;(!T||!await(a.isElement==null?void 0:a.isElement(k)))&&(T=o.floating[_]||s.floating[m]);const M=b/2-w/2,j=T/2-g[m]/2-1,C=hu(d[y],j),R=hu(d[v],j),I=C,N=T-g[m]-R,z=T/2-g[m]/2+M,V=Lj(I,z,N),G=!l.arrow&&lm(i)!=null&&z!==V&&s.reference[m]/2-(z<I?C:R)-g[m]/2<0,H=G?z<I?z-I:z-N:0;return{[p]:h[p]+H,data:{[p]:V,centerOffset:z-V-H,...G&&{alignmentOffset:H}},reset:G}}}),Jpe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=Yl(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const y=Ql(i),v=mu(o),_=Ql(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=h||(_||!g?[Gb(o)]:Kpe(o)),k=m!=="none";!h&&k&&w.push(...Xpe(o,g,m,b));const T=[o,...w],M=await Xv(t,x),j=[];let C=((n=s.flip)==null?void 0:n.overflows)||[];if(f&&j.push(M[y]),d){const z=Hpe(i,a,b);j.push(M[z[0]],M[z[1]])}if(C=[...C,{placement:i,overflows:j}],!j.every(z=>z<=0)){var R,I;const z=(((R=s.flip)==null?void 0:R.index)||0)+1,V=T[z];if(V)return{data:{index:z,overflows:C},reset:{placement:V}};let G=(I=C.filter(H=>H.overflows[0]<=0).sort((H,O)=>H.overflows[1]-O.overflows[1])[0])==null?void 0:I.placement;if(!G)switch(p){case"bestFit":{var N;const H=(N=C.filter(O=>{if(k){const q=mu(O.placement);return q===v||q==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(q=>q>0).reduce((q,ee)=>q+ee,0)]).sort((O,q)=>O[1]-q[1])[0])==null?void 0:N[0];H&&(G=H);break}case"initialPlacement":G=o;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function EB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jB(e){return Upe.some(t=>e[t]>=0)}const eme=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Yl(e,t);switch(n){case"referenceHidden":{const s=await Xv(t,{...i,elementContext:"reference"}),a=EB(s,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:jB(a)}}}case"escaped":{const s=await Xv(t,{...i,altBoundary:!0}),a=EB(s,r.floating);return{data:{escapedOffsets:a,escaped:jB(a)}}}default:return{}}}}};async function tme(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Ql(r),o=lm(r),l=mu(r)==="y",c=["left","top"].includes(a)?-1:1,f=s&&l?-1:1,d=Yl(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),l?{x:p*f,y:h*c}:{x:h*c,y:p*f}}const rme=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await tme(t,e);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},nme=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:x=>{let{x:y,y:v}=x;return{x:y,y:v}}},...l}=Yl(e,t),c={x:r,y:n},f=await Xv(t,l),d=mu(Ql(i)),h=IO(d);let p=c[h],m=c[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=p+f[x],_=p-f[y];p=Lj(v,p,_)}if(a){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=m+f[x],_=m-f[y];m=Lj(v,m,_)}const g=o.fn({...t,[h]:p,[d]:m});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:s,[d]:a}}}}}},ime=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Yl(e,t),f={x:r,y:n},d=mu(i),h=IO(d);let p=f[h],m=f[d];const g=Yl(o,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=h==="y"?"height":"width",b=s.reference[h]-s.floating[_]+x.mainAxis,w=s.reference[h]+s.reference[_]-x.mainAxis;p<b?p=b:p>w&&(p=w)}if(c){var y,v;const _=h==="y"?"width":"height",b=["top","left"].includes(Ql(i)),w=s.reference[d]-s.floating[_]+(b&&((y=a.offset)==null?void 0:y[d])||0)+(b?0:x.crossAxis),k=s.reference[d]+s.reference[_]+(b?0:((v=a.offset)==null?void 0:v[d])||0)-(b?x.crossAxis:0);m<w?m=w:m>k&&(m=k)}return{[h]:p,[d]:m}}}},sme=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Yl(e,t),f=await Xv(t,c),d=Ql(i),h=lm(i),p=mu(i)==="y",{width:m,height:g}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const v=g-f.top-f.bottom,_=m-f.left-f.right,b=hu(g-f[x],v),w=hu(m-f[y],_),k=!t.middlewareData.shift;let T=b,M=w;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=v),k&&!h){const C=ra(f.left,0),R=ra(f.right,0),I=ra(f.top,0),N=ra(f.bottom,0);p?M=m-2*(C!==0||R!==0?C+R:ra(f.left,f.right)):T=g-2*(I!==0||N!==0?I+N:ra(f.top,f.bottom))}await l({...t,availableWidth:M,availableHeight:T});const j=await a.getDimensions(o.floating);return m!==j.width||g!==j.height?{reset:{rects:!0}}:{}}}};function K1(){return typeof window<"u"}function cm(e){return aX(e)?(e.nodeName||"").toLowerCase():"#document"}function ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dl(e){var t;return(t=(aX(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function aX(e){return K1()?e instanceof Node||e instanceof ua(e).Node:!1}function Eo(e){return K1()?e instanceof Element||e instanceof ua(e).Element:!1}function ol(e){return K1()?e instanceof HTMLElement||e instanceof ua(e).HTMLElement:!1}function CB(e){return!K1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ua(e).ShadowRoot}function __(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=jo(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function ame(e){return["table","td","th"].includes(cm(e))}function q1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function RO(e){const t=FO(),r=Eo(e)?jo(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function ome(e){let t=gu(e);for(;ol(t)&&!bp(t);){if(RO(t))return t;if(q1(t))return null;t=gu(t)}return null}function FO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bp(e){return["html","body","#document"].includes(cm(e))}function jo(e){return ua(e).getComputedStyle(e)}function X1(e){return Eo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gu(e){if(cm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||CB(e)&&e.host||dl(e);return CB(t)?t.host:t}function oX(e){const t=gu(e);return bp(t)?e.ownerDocument?e.ownerDocument.body:e.body:ol(t)&&__(t)?t:oX(t)}function Yv(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=oX(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),a=ua(i);if(s){const o=Fj(a);return t.concat(a,a.visualViewport||[],__(i)?i:[],o&&r?Yv(o):[])}return t.concat(i,Yv(i,[],r))}function Fj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function lX(e){const t=jo(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=ol(e),s=i?e.offsetWidth:r,a=i?e.offsetHeight:n,o=Wb(r)!==s||Wb(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function BO(e){return Eo(e)?e:e.contextElement}function Qh(e){const t=BO(e);if(!ol(t))return pu(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=lX(t);let a=(s?Wb(r.width):r.width)/n,o=(s?Wb(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const lme=pu(0);function cX(e){const t=ua(e);return!FO()||!t.visualViewport?lme:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cme(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ua(e)?!1:t}function tf(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=BO(e);let a=pu(1);t&&(n?Eo(n)&&(a=Qh(n)):a=Qh(e));const o=cme(s,r,n)?cX(s):pu(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,f=i.width/a.x,d=i.height/a.y;if(s){const h=ua(s),p=n&&Eo(n)?ua(n):n;let m=h,g=Fj(m);for(;g&&n&&p!==m;){const x=Qh(g),y=g.getBoundingClientRect(),v=jo(g),_=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,b=y.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,f*=x.x,d*=x.y,l+=_,c+=b,m=ua(g),g=Fj(m)}}return Hb({width:f,height:d,x:l,y:c})}function ume(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",a=dl(n),o=t?q1(t.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=pu(1);const f=pu(0),d=ol(n);if((d||!d&&!s)&&((cm(n)!=="body"||__(a))&&(l=X1(n)),ol(n))){const h=tf(n);c=Qh(n),f.x=h.x+n.clientLeft,f.y=h.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+f.x,y:r.y*c.y-l.scrollTop*c.y+f.y}}function dme(e){return Array.from(e.getClientRects())}function Bj(e,t){const r=X1(e).scrollLeft;return t?t.left+r:tf(dl(e)).left+r}function fme(e){const t=dl(e),r=X1(e),n=e.ownerDocument.body,i=ra(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=ra(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Bj(e);const o=-r.scrollTop;return jo(n).direction==="rtl"&&(a+=ra(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function hme(e,t){const r=ua(e),n=dl(e),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=FO();(!c||c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function pme(e,t){const r=tf(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=ol(e)?Qh(e):pu(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function AB(e,t,r){let n;if(t==="viewport")n=hme(e,r);else if(t==="document")n=fme(dl(e));else if(Eo(t))n=pme(t,r);else{const i=cX(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return Hb(n)}function uX(e,t){const r=gu(e);return r===t||!Eo(r)||bp(r)?!1:jo(r).position==="fixed"||uX(r,t)}function mme(e,t){const r=t.get(e);if(r)return r;let n=Yv(e,[],!1).filter(o=>Eo(o)&&cm(o)!=="body"),i=null;const s=jo(e).position==="fixed";let a=s?gu(e):e;for(;Eo(a)&&!bp(a);){const o=jo(a),l=RO(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||__(a)&&!l&&uX(e,a))?n=n.filter(f=>f!==a):i=o,a=gu(a)}return t.set(e,n),n}function gme(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?q1(t)?[]:mme(t,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,f)=>{const d=AB(t,f,i);return c.top=ra(d.top,c.top),c.right=hu(d.right,c.right),c.bottom=hu(d.bottom,c.bottom),c.left=ra(d.left,c.left),c},AB(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function vme(e){const{width:t,height:r}=lX(e);return{width:t,height:r}}function yme(e,t,r){const n=ol(t),i=dl(t),s=r==="fixed",a=tf(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=pu(0);if(n||!n&&!s)if((cm(t)!=="body"||__(i))&&(o=X1(t)),n){const p=tf(t,!0,s,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&(l.x=Bj(i));let c=0,f=0;if(i&&!n&&!s){const p=i.getBoundingClientRect();f=p.top+o.scrollTop,c=p.left+o.scrollLeft-Bj(i,p)}const d=a.left+o.scrollLeft-l.x-c,h=a.top+o.scrollTop-l.y-f;return{x:d,y:h,width:a.width,height:a.height}}function xS(e){return jo(e).position==="static"}function OB(e,t){if(!ol(e)||jo(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return dl(e)===r&&(r=r.ownerDocument.body),r}function dX(e,t){const r=ua(e);if(q1(e))return r;if(!ol(e)){let i=gu(e);for(;i&&!bp(i);){if(Eo(i)&&!xS(i))return i;i=gu(i)}return r}let n=OB(e,t);for(;n&&ame(n)&&xS(n);)n=OB(n,t);return n&&bp(n)&&xS(n)&&!RO(n)?r:n||ome(e)||r}const _me=async function(e){const t=this.getOffsetParent||dX,r=this.getDimensions,n=await r(e.floating);return{reference:yme(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function xme(e){return jo(e).direction==="rtl"}const bme={convertOffsetParentRelativeRectToViewportRelativeRect:ume,getDocumentElement:dl,getClippingRect:gme,getOffsetParent:dX,getElementRects:_me,getClientRects:dme,getDimensions:vme,getScale:Qh,isElement:Eo,isRTL:xme};function wme(e,t){let r=null,n;const i=dl(e);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:c,top:f,width:d,height:h}=e.getBoundingClientRect();if(o||t(),!d||!h)return;const p=ex(f),m=ex(i.clientWidth-(c+d)),g=ex(i.clientHeight-(f+h)),x=ex(c),v={rootMargin:-p+"px "+-m+"px "+-g+"px "+-x+"px",threshold:ra(0,hu(1,l))||1};let _=!0;function b(w){const k=w[0].intersectionRatio;if(k!==l){if(!_)return a();k?a(!1,k):n=setTimeout(()=>{a(!1,1e-7)},1e3)}_=!1}try{r=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,v)}r.observe(e)}return a(!0),s}function kme(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=BO(e),f=i||s?[...c?Yv(c):[],...Yv(t)]:[];f.forEach(y=>{i&&y.addEventListener("scroll",r,{passive:!0}),s&&y.addEventListener("resize",r)});const d=c&&o?wme(c,r):null;let h=-1,p=null;a&&(p=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m,g=l?tf(e):null;l&&x();function x(){const y=tf(e);g&&(y.x!==g.x||y.y!==g.y||y.width!==g.width||y.height!==g.height)&&r(),g=y,m=requestAnimationFrame(x)}return r(),()=>{var y;f.forEach(v=>{i&&v.removeEventListener("scroll",r),s&&v.removeEventListener("resize",r)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const Tme=rme,Mme=nme,Sme=Jpe,Pme=sme,Eme=eme,$B=Zpe,jme=ime,Cme=(e,t,r)=>{const n=new Map,i={platform:bme,...r},s={...i.platform,_c:n};return Qpe(e,t,{...i,platform:s})};var nb=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Kb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Kb(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Kb(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function fX(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NB(e,t){const r=fX(e);return Math.round(t*r)/r}function bS(e){const t=E.useRef(e);return nb(()=>{t.current=e}),t}function Ame(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[f,d]=E.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=E.useState(n);Kb(h,n)||p(n);const[m,g]=E.useState(null),[x,y]=E.useState(null),v=E.useCallback(O=>{O!==k.current&&(k.current=O,g(O))},[]),_=E.useCallback(O=>{O!==T.current&&(T.current=O,y(O))},[]),b=s||m,w=a||x,k=E.useRef(null),T=E.useRef(null),M=E.useRef(f),j=l!=null,C=bS(l),R=bS(i),I=bS(c),N=E.useCallback(()=>{if(!k.current||!T.current)return;const O={placement:t,strategy:r,middleware:h};R.current&&(O.platform=R.current),Cme(k.current,T.current,O).then(q=>{const ee={...q,isPositioned:I.current!==!1};z.current&&!Kb(M.current,ee)&&(M.current=ee,gf.flushSync(()=>{d(ee)}))})},[h,t,r,R,I]);nb(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const z=E.useRef(!1);nb(()=>(z.current=!0,()=>{z.current=!1}),[]),nb(()=>{if(b&&(k.current=b),w&&(T.current=w),b&&w){if(C.current)return C.current(b,w,N);N()}},[b,w,N,C,j]);const V=E.useMemo(()=>({reference:k,floating:T,setReference:v,setFloating:_}),[v,_]),G=E.useMemo(()=>({reference:b,floating:w}),[b,w]),H=E.useMemo(()=>{const O={position:r,left:0,top:0};if(!G.floating)return O;const q=NB(G.floating,f.x),ee=NB(G.floating,f.y);return o?{...O,transform:"translate("+q+"px, "+ee+"px)",...fX(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:ee}},[r,o,G.floating,f.x,f.y]);return E.useMemo(()=>({...f,update:N,refs:V,elements:G,floatingStyles:H}),[f,N,V,G,H])}const Ome=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?$B({element:n.current,padding:i}).fn(r):{}:n?$B({element:n,padding:i}).fn(r):{}}}},$me=(e,t)=>({...Tme(e),options:[e,t]}),Nme=(e,t)=>({...Mme(e),options:[e,t]}),Ime=(e,t)=>({...jme(e),options:[e,t]}),Dme=(e,t)=>({...Sme(e),options:[e,t]}),Lme=(e,t)=>({...Pme(e),options:[e,t]}),Rme=(e,t)=>({...Eme(e),options:[e,t]}),Fme=(e,t)=>({...Ome(e),options:[e,t]});var Bme="Arrow",hX=E.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return u.jsx(Ft.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});hX.displayName=Bme;var zme=hX;function Vme(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return u.jsx(g.Provider,{value:x,children:p})}function f(d,h){const p=(h==null?void 0:h[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,f]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,Ume(i,...t)]}function Ume(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function pX(e){const[t,r]=E.useState(void 0);return ki(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;r({width:a,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var zO="Popper",[mX,Y1]=Vme(zO),[Wme,gX]=mX(zO),vX=e=>{const{__scopePopper:t,children:r}=e,[n,i]=E.useState(null);return u.jsx(Wme,{scope:t,anchor:n,onAnchorChange:i,children:r})};vX.displayName=zO;var yX="PopperAnchor",_X=E.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=gX(yX,r),a=E.useRef(null),o=Nr(t,a);return E.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:u.jsx(Ft.div,{...i,ref:o})});_X.displayName=yX;var VO="PopperContent",[Gme,Hme]=mX(VO),xX=E.forwardRef((e,t)=>{var ye,$e,Se,ge,te,re;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=e,x=gX(VO,r),[y,v]=E.useState(null),_=Nr(t,J=>v(J)),[b,w]=E.useState(null),k=pX(b),T=(k==null?void 0:k.width)??0,M=(k==null?void 0:k.height)??0,j=n+(s!=="center"?"-"+s:""),C=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(c)?c:[c],I=R.length>0,N={padding:C,boundary:R.filter(qme),altBoundary:I},{refs:z,floatingStyles:V,placement:G,isPositioned:H,middlewareData:O}=Ame({strategy:"fixed",placement:j,whileElementsMounted:(...J)=>kme(...J,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[$me({mainAxis:i+M,alignmentAxis:a}),l&&Nme({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Ime():void 0,...N}),l&&Dme({...N}),Lme({...N,apply:({elements:J,rects:we,availableWidth:Ne,availableHeight:je})=>{const{width:Pe,height:Z}=we.reference,ne=J.floating.style;ne.setProperty("--radix-popper-available-width",`${Ne}px`),ne.setProperty("--radix-popper-available-height",`${je}px`),ne.setProperty("--radix-popper-anchor-width",`${Pe}px`),ne.setProperty("--radix-popper-anchor-height",`${Z}px`)}}),b&&Fme({element:b,padding:o}),Xme({arrowWidth:T,arrowHeight:M}),h&&Rme({strategy:"referenceHidden",...N})]}),[q,ee]=kX(G),B=Qn(m);ki(()=>{H&&(B==null||B())},[H,B]);const D=(ye=O.arrow)==null?void 0:ye.x,K=($e=O.arrow)==null?void 0:$e.y,oe=((Se=O.arrow)==null?void 0:Se.centerOffset)!==0,[_e,ue]=E.useState();return ki(()=>{y&&ue(window.getComputedStyle(y).zIndex)},[y]),u.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:H?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(ge=O.transformOrigin)==null?void 0:ge.x,(te=O.transformOrigin)==null?void 0:te.y].join(" "),...((re=O.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(Gme,{scope:r,placedSide:q,onArrowChange:w,arrowX:D,arrowY:K,shouldHideArrow:oe,children:u.jsx(Ft.div,{"data-side":q,"data-align":ee,...g,ref:_,style:{...g.style,animation:H?void 0:"none"}})})})});xX.displayName=VO;var bX="PopperArrow",Kme={top:"bottom",right:"left",bottom:"top",left:"right"},wX=E.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,s=Hme(bX,n),a=Kme[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(zme,{...i,ref:r,style:{...i.style,display:"block"}})})});wX.displayName=bX;function qme(e){return e!==null}var Xme=e=>({name:"transformOrigin",options:e,fn(t){var x,y,v;const{placement:r,rects:n,middlewareData:i}=t,a=((x=i.arrow)==null?void 0:x.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,f]=kX(r),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=i.arrow)==null?void 0:y.x)??0)+o/2,p=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=a?d:`${h}px`,g=`${-l}px`):c==="top"?(m=a?d:`${h}px`,g=`${n.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=a?d:`${p}px`):c==="left"&&(m=`${n.floating.width+l}px`,g=a?d:`${p}px`),{data:{x:m,y:g}}}});function kX(e){const[t,r="center"]=e.split("-");return[t,r]}var Yme=vX,TX=_X,MX=xX,SX=wX,[Q1,eXe]=vf("Tooltip",[Y1]),UO=Y1(),PX="TooltipProvider",Qme=700,IB="tooltip.open",[Zme,EX]=Q1(PX),jX=e=>{const{__scopeTooltip:t,delayDuration:r=Qme,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,[a,o]=E.useState(!0),l=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const f=c.current;return()=>window.clearTimeout(f)},[]),u.jsx(Zme,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:E.useCallback(f=>{l.current=f},[]),disableHoverableContent:i,children:s})};jX.displayName=PX;var CX="Tooltip",[tXe,Z1]=Q1(CX),zj="TooltipTrigger",Jme=E.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Z1(zj,r),s=EX(zj,r),a=UO(r),o=E.useRef(null),l=Nr(t,o,i.onTriggerChange),c=E.useRef(!1),f=E.useRef(!1),d=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),u.jsx(TX,{asChild:!0,...a,children:u.jsx(Ft.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:xt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:xt(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:xt(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:xt(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:xt(e.onBlur,i.onClose),onClick:xt(e.onClick,i.onClose)})})});Jme.displayName=zj;var ege="TooltipPortal",[rXe,tge]=Q1(ege,{forceMount:void 0}),wp="TooltipContent",AX=E.forwardRef((e,t)=>{const r=tge(wp,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,a=Z1(wp,e.__scopeTooltip);return u.jsx(Ua,{present:n||a.open,children:a.disableHoverableContent?u.jsx(OX,{side:i,...s,ref:t}):u.jsx(rge,{side:i,...s,ref:t})})}),rge=E.forwardRef((e,t)=>{const r=Z1(wp,e.__scopeTooltip),n=EX(wp,e.__scopeTooltip),i=E.useRef(null),s=Nr(t,i),[a,o]=E.useState(null),{trigger:l,onClose:c}=r,f=i.current,{onPointerInTransitChange:d}=n,h=E.useCallback(()=>{o(null),d(!1)},[d]),p=E.useCallback((m,g)=>{const x=m.currentTarget,y={x:m.clientX,y:m.clientY},v=age(y,x.getBoundingClientRect()),_=oge(y,v),b=lge(g.getBoundingClientRect()),w=uge([..._,...b]);o(w),d(!0)},[d]);return E.useEffect(()=>()=>h(),[h]),E.useEffect(()=>{if(l&&f){const m=x=>p(x,f),g=x=>p(x,l);return l.addEventListener("pointerleave",m),f.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),f.removeEventListener("pointerleave",g)}}},[l,f,p,h]),E.useEffect(()=>{if(a){const m=g=>{const x=g.target,y={x:g.clientX,y:g.clientY},v=(l==null?void 0:l.contains(x))||(f==null?void 0:f.contains(x)),_=!cge(y,a);v?h():_&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,f,a,c,h]),u.jsx(OX,{...e,ref:s})}),[nge,ige]=Q1(CX,{isInside:!1}),OX=E.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,l=Z1(wp,r),c=UO(r),{onClose:f}=l;return E.useEffect(()=>(document.addEventListener(IB,f),()=>document.removeEventListener(IB,f)),[f]),E.useEffect(()=>{if(l.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,f]),u.jsx(am,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:u.jsxs(MX,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(_q,{children:n}),u.jsx(nge,{scope:r,isInside:!0,children:u.jsx(kq,{id:l.contentId,role:"tooltip",children:i||n})})]})})});AX.displayName=wp;var $X="TooltipArrow",sge=E.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=UO(r);return ige($X,r).isInside?null:u.jsx(SX,{...i,...n,ref:t})});sge.displayName=$X;function age(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function oge(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function lge(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function cge(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s].x,l=t[s].y,c=t[a].x,f=t[a].y;l>n!=f>n&&r<(c-o)*(n-l)/(f-l)+o&&(i=!i)}return i}function uge(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),dge(t)}function dge(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var fge=jX,NX=AX;const hge=fge,pge=E.forwardRef(({className:e,sideOffset:t=4,...r},n)=>u.jsx(NX,{ref:n,sideOffset:t,className:St("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));pge.displayName=NX.displayName;var J1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ek=typeof window>"u"||"Deno"in globalThis;function uo(){}function mge(e,t){return typeof e=="function"?e(t):e}function gge(e){return typeof e=="number"&&e>=0&&e!==1/0}function vge(e,t){return Math.max(e+(t||0)-Date.now(),0)}function DB(e,t){return typeof e=="function"?e(t):e}function yge(e,t){return typeof e=="function"?e(t):e}function LB(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=e;if(a){if(n){if(t.queryHash!==WO(a,t.options))return!1}else if(!Zv(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||s&&!s(t))}function RB(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Qv(t.options.mutationKey)!==Qv(s))return!1}else if(!Zv(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function WO(e,t){return((t==null?void 0:t.queryKeyHashFn)||Qv)(e)}function Qv(e){return JSON.stringify(e,(t,r)=>Vj(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Zv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Zv(e[r],t[r])):!1}function IX(e,t){if(e===t)return e;const r=FB(e)&&FB(t);if(r||Vj(e)&&Vj(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),a=s.length,o=r?[]:{};let l=0;for(let c=0;c<a;c++){const f=r?c:s[c];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(o[f]=void 0,l++):(o[f]=IX(e[f],t[f]),o[f]===e[f]&&e[f]!==void 0&&l++)}return i===a&&l===i?e:o}return t}function FB(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vj(e){if(!BB(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!BB(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function BB(e){return Object.prototype.toString.call(e)==="[object Object]"}function _ge(e){return new Promise(t=>{setTimeout(t,e)})}function xge(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?IX(e,t):t}function bge(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function wge(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var GO=Symbol();function DX(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===GO?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Dd,Bc,ip,W9,kge=(W9=class extends J1{constructor(){super();Fr(this,Dd);Fr(this,Bc);Fr(this,ip);ur(this,ip,t=>{if(!ek&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ge(this,Bc)||this.setEventListener(Ge(this,ip))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,Bc))==null||t.call(this),ur(this,Bc,void 0))}setEventListener(t){var r;ur(this,ip,t),(r=Ge(this,Bc))==null||r.call(this),ur(this,Bc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ge(this,Dd)!==t&&(ur(this,Dd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ge(this,Dd)=="boolean"?Ge(this,Dd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dd=new WeakMap,Bc=new WeakMap,ip=new WeakMap,W9),LX=new kge,sp,zc,ap,G9,Tge=(G9=class extends J1{constructor(){super();Fr(this,sp,!0);Fr(this,zc);Fr(this,ap);ur(this,ap,t=>{if(!ek&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ge(this,zc)||this.setEventListener(Ge(this,ap))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,zc))==null||t.call(this),ur(this,zc,void 0))}setEventListener(t){var r;ur(this,ap,t),(r=Ge(this,zc))==null||r.call(this),ur(this,zc,t(this.setOnline.bind(this)))}setOnline(t){Ge(this,sp)!==t&&(ur(this,sp,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ge(this,sp)}},sp=new WeakMap,zc=new WeakMap,ap=new WeakMap,G9),qb=new Tge;function Mge(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Sge(e){return Math.min(1e3*2**e,3e4)}function RX(e){return(e??"online")==="online"?qb.isOnline():!0}var FX=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wS(e){return e instanceof FX}function BX(e){let t=!1,r=0,n=!1,i;const s=Mge(),a=g=>{var x;n||(h(new FX(g)),(x=e.abort)==null||x.call(e))},o=()=>{t=!0},l=()=>{t=!1},c=()=>LX.isFocused()&&(e.networkMode==="always"||qb.isOnline())&&e.canRun(),f=()=>RX(e.networkMode)&&e.canRun(),d=g=>{var x;n||(n=!0,(x=e.onSuccess)==null||x.call(e,g),i==null||i(),s.resolve(g))},h=g=>{var x;n||(n=!0,(x=e.onError)==null||x.call(e,g),i==null||i(),s.reject(g))},p=()=>new Promise(g=>{var x;i=y=>{(n||c())&&g(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;i=void 0,n||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(n)return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var k;if(n)return;const v=e.retry??(ek?0:3),_=e.retryDelay??Sge,b=typeof _=="function"?_(r,y):_,w=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(t||!w){h(y);return}r++,(k=e.onFail)==null||k.call(e,r,y),_ge(b).then(()=>c()?void 0:p()).then(()=>{t?h(y):m()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:l,canStart:f,start:()=>(f()?m():p().then(m),s)}}function Pge(){let e=[],t=0,r=o=>{o()},n=o=>{o()},i=o=>setTimeout(o,0);const s=o=>{t?e.push(o):i(()=>{r(o)})},a=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var xs=Pge(),Ld,H9,zX=(H9=class{constructor(){Fr(this,Ld)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gge(this.gcTime)&&ur(this,Ld,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ek?1/0:5*60*1e3))}clearGcTimeout(){Ge(this,Ld)&&(clearTimeout(Ge(this,Ld)),ur(this,Ld,void 0))}},Ld=new WeakMap,H9),op,lp,ja,Zi,l_,Rd,fo,kl,K9,Ege=(K9=class extends zX{constructor(t){super();Fr(this,fo);Fr(this,op);Fr(this,lp);Fr(this,ja);Fr(this,Zi);Fr(this,l_);Fr(this,Rd);ur(this,Rd,!1),ur(this,l_,t.defaultOptions),this.setOptions(t.options),this.observers=[],ur(this,ja,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ur(this,op,Cge(this.options)),this.state=t.state??Ge(this,op),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ge(this,Zi))==null?void 0:t.promise}setOptions(t){this.options={...Ge(this,l_),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ge(this,ja).remove(this)}setData(t,r){const n=xge(this.state.data,t,this.options);return qi(this,fo,kl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){qi(this,fo,kl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Ge(this,Zi))==null?void 0:n.promise;return(i=Ge(this,Zi))==null||i.cancel(t),r?r.then(uo).catch(uo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ge(this,op))}isActive(){return this.observers.some(t=>yge(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===GO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!vge(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ge(this,Zi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ge(this,Zi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ge(this,ja).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ge(this,Zi)&&(Ge(this,Rd)?Ge(this,Zi).cancel({revert:!0}):Ge(this,Zi).cancelRetry()),this.scheduleGc()),Ge(this,ja).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qi(this,fo,kl).call(this,{type:"invalidate"})}fetch(t,r){var l,c,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ge(this,Zi))return Ge(this,Zi).continueRetry(),Ge(this,Zi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ur(this,Rd,!0),n.signal)})},s=()=>{const d=DX(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return i(h),ur(this,Rd,!1),this.options.persister?this.options.persister(d,h,this):d(h)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),ur(this,lp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&qi(this,fo,kl).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const o=d=>{var h,p,m,g;wS(d)&&d.silent||qi(this,fo,kl).call(this,{type:"error",error:d}),wS(d)||((p=(h=Ge(this,ja).config).onError)==null||p.call(h,d,this),(g=(m=Ge(this,ja).config).onSettled)==null||g.call(m,this.state.data,d,this)),this.scheduleGc()};return ur(this,Zi,BX({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var h,p,m,g;if(d===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(x){o(x);return}(p=(h=Ge(this,ja).config).onSuccess)==null||p.call(h,d,this),(g=(m=Ge(this,ja).config).onSettled)==null||g.call(m,d,this.state.error,this),this.scheduleGc()},onError:o,onFail:(d,h)=>{qi(this,fo,kl).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{qi(this,fo,kl).call(this,{type:"pause"})},onContinue:()=>{qi(this,fo,kl).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),Ge(this,Zi).start()}},op=new WeakMap,lp=new WeakMap,ja=new WeakMap,Zi=new WeakMap,l_=new WeakMap,Rd=new WeakMap,fo=new WeakSet,kl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...jge(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return wS(i)&&i.revert&&Ge(this,lp)?{...Ge(this,lp),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),xs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ge(this,ja).notify({query:this,type:"updated",action:t})})},K9);function jge(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RX(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Cge(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Go,q9,Age=(q9=class extends J1{constructor(t={}){super();Fr(this,Go);this.config=t,ur(this,Go,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??WO(i,r);let a=this.get(s);return a||(a=new Ege({cache:this,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){Ge(this,Go).has(t.queryHash)||(Ge(this,Go).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ge(this,Go).get(t.queryHash);r&&(t.destroy(),r===t&&Ge(this,Go).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ge(this,Go).get(t)}getAll(){return[...Ge(this,Go).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>LB(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>LB(t,n)):r}notify(t){xs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){xs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Go=new WeakMap,q9),Ho,ms,Fd,Ko,Sc,X9,Oge=(X9=class extends zX{constructor(t){super();Fr(this,Ko);Fr(this,Ho);Fr(this,ms);Fr(this,Fd);this.mutationId=t.mutationId,ur(this,ms,t.mutationCache),ur(this,Ho,[]),this.state=t.state||$ge(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ge(this,Ho).includes(t)||(Ge(this,Ho).push(t),this.clearGcTimeout(),Ge(this,ms).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ur(this,Ho,Ge(this,Ho).filter(r=>r!==t)),this.scheduleGc(),Ge(this,ms).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ge(this,Ho).length||(this.state.status==="pending"?this.scheduleGc():Ge(this,ms).remove(this))}continue(){var t;return((t=Ge(this,Fd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,a,o,l,c,f,d,h,p,m,g,x,y,v,_,b,w,k,T;ur(this,Fd,BX({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,j)=>{qi(this,Ko,Sc).call(this,{type:"failed",failureCount:M,error:j})},onPause:()=>{qi(this,Ko,Sc).call(this,{type:"pause"})},onContinue:()=>{qi(this,Ko,Sc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ge(this,ms).canRun(this)}));const r=this.state.status==="pending",n=!Ge(this,Fd).canStart();try{if(!r){qi(this,Ko,Sc).call(this,{type:"pending",variables:t,isPaused:n}),await((s=(i=Ge(this,ms).config).onMutate)==null?void 0:s.call(i,t,this));const j=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,t));j!==this.state.context&&qi(this,Ko,Sc).call(this,{type:"pending",context:j,variables:t,isPaused:n})}const M=await Ge(this,Fd).start();return await((c=(l=Ge(this,ms).config).onSuccess)==null?void 0:c.call(l,M,t,this.state.context,this)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,M,t,this.state.context)),await((p=(h=Ge(this,ms).config).onSettled)==null?void 0:p.call(h,M,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,M,null,t,this.state.context)),qi(this,Ko,Sc).call(this,{type:"success",data:M}),M}catch(M){try{throw await((y=(x=Ge(this,ms).config).onError)==null?void 0:y.call(x,M,t,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,M,t,this.state.context)),await((w=(b=Ge(this,ms).config).onSettled)==null?void 0:w.call(b,void 0,M,this.state.variables,this.state.context,this)),await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,M,t,this.state.context)),M}finally{qi(this,Ko,Sc).call(this,{type:"error",error:M})}}finally{Ge(this,ms).runNext(this)}}},Ho=new WeakMap,ms=new WeakMap,Fd=new WeakMap,Ko=new WeakSet,Sc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xs.batch(()=>{Ge(this,Ho).forEach(n=>{n.onMutationUpdate(t)}),Ge(this,ms).notify({mutation:this,type:"updated",action:t})})},X9);function $ge(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ys,c_,Y9,Nge=(Y9=class extends J1{constructor(t={}){super();Fr(this,Ys);Fr(this,c_);this.config=t,ur(this,Ys,new Map),ur(this,c_,Date.now())}build(t,r,n){const i=new Oge({mutationCache:this,mutationId:++O0(this,c_)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){const r=tx(t),n=Ge(this,Ys).get(r)??[];n.push(t),Ge(this,Ys).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=tx(t);if(Ge(this,Ys).has(r)){const i=(n=Ge(this,Ys).get(r))==null?void 0:n.filter(s=>s!==t);i&&(i.length===0?Ge(this,Ys).delete(r):Ge(this,Ys).set(r,i))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=Ge(this,Ys).get(tx(t)))==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=Ge(this,Ys).get(tx(t)))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){xs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Ge(this,Ys).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>RB(r,n))}findAll(t={}){return this.getAll().filter(r=>RB(t,r))}notify(t){xs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return xs.batch(()=>Promise.all(t.map(r=>r.continue().catch(uo))))}},Ys=new WeakMap,c_=new WeakMap,Y9);function tx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function zB(e){return{onFetch:(t,r)=>{var f,d,h,p,m;const n=t.options,i=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],a=((m=t.state.data)==null?void 0:m.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=DX(t.options,t.fetchOptions),v=async(_,b,w)=>{if(g)return Promise.reject();if(b==null&&_.pages.length)return Promise.resolve(_);const k={queryKey:t.queryKey,pageParam:b,direction:w?"backward":"forward",meta:t.options.meta};x(k);const T=await y(k),{maxPages:M}=t.options,j=w?wge:bge;return{pages:j(_.pages,T,M),pageParams:j(_.pageParams,b,M)}};if(i&&s.length){const _=i==="backward",b=_?Ige:VB,w={pages:s,pageParams:a},k=b(n,w);o=await v(w,k,_)}else{const _=e??s.length;do{const b=l===0?a[0]??n.initialPageParam:VB(n,o);if(l>0&&b==null)break;o=await v(o,b),l++}while(l<_)}return o};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function VB(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ige(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Fn,Vc,Uc,cp,up,Wc,dp,fp,Q9,Dge=(Q9=class{constructor(e={}){Fr(this,Fn);Fr(this,Vc);Fr(this,Uc);Fr(this,cp);Fr(this,up);Fr(this,Wc);Fr(this,dp);Fr(this,fp);ur(this,Fn,e.queryCache||new Age),ur(this,Vc,e.mutationCache||new Nge),ur(this,Uc,e.defaultOptions||{}),ur(this,cp,new Map),ur(this,up,new Map),ur(this,Wc,0)}mount(){O0(this,Wc)._++,Ge(this,Wc)===1&&(ur(this,dp,LX.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Fn).onFocus())})),ur(this,fp,qb.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Fn).onOnline())})))}unmount(){var e,t;O0(this,Wc)._--,Ge(this,Wc)===0&&((e=Ge(this,dp))==null||e.call(this),ur(this,dp,void 0),(t=Ge(this,fp))==null||t.call(this),ur(this,fp,void 0))}isFetching(e){return Ge(this,Fn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ge(this,Vc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ge(this,Fn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=Ge(this,Fn).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(DB(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return Ge(this,Fn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Ge(this,Fn).get(n.queryHash),s=i==null?void 0:i.state.data,a=mge(t,s);if(a!==void 0)return Ge(this,Fn).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return xs.batch(()=>Ge(this,Fn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ge(this,Fn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ge(this,Fn);xs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ge(this,Fn),n={type:"active",...e};return xs.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=xs.batch(()=>Ge(this,Fn).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(uo).catch(uo)}invalidateQueries(e={},t={}){return xs.batch(()=>{if(Ge(this,Fn).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=xs.batch(()=>Ge(this,Fn).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(uo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(uo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ge(this,Fn).build(this,t);return r.isStaleByTime(DB(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(uo).catch(uo)}fetchInfiniteQuery(e){return e.behavior=zB(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(uo).catch(uo)}ensureInfiniteQueryData(e){return e.behavior=zB(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qb.isOnline()?Ge(this,Vc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ge(this,Fn)}getMutationCache(){return Ge(this,Vc)}getDefaultOptions(){return Ge(this,Uc)}setDefaultOptions(e){ur(this,Uc,e)}setQueryDefaults(e,t){Ge(this,cp).set(Qv(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ge(this,cp).values()];let r={};return t.forEach(n=>{Zv(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){Ge(this,up).set(Qv(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ge(this,up).values()];let r={};return t.forEach(n=>{Zv(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ge(this,Uc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===GO&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ge(this,Uc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ge(this,Fn).clear(),Ge(this,Vc).clear()}},Fn=new WeakMap,Vc=new WeakMap,Uc=new WeakMap,cp=new WeakMap,up=new WeakMap,Wc=new WeakMap,dp=new WeakMap,fp=new WeakMap,Q9),Lge=E.createContext(void 0),Rge=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Lge.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jv.apply(this,arguments)}var qc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qc||(qc={}));const UB="popstate";function Fge(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:a,hash:o}=n.location;return Uj("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Xb(i)}return zge(t,r,null,e)}function Zn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function VX(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bge(){return Math.random().toString(36).substr(2,8)}function WB(e,t){return{usr:e.state,key:e.key,idx:t}}function Uj(e,t,r,n){return r===void 0&&(r=null),Jv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?um(t):t,{state:r,key:t&&t.key||n||Bge()})}function Xb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function um(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function zge(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=qc.Pop,l=null,c=f();c==null&&(c=0,a.replaceState(Jv({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function d(){o=qc.Pop;let x=f(),y=x==null?null:x-c;c=x,l&&l({action:o,location:g.location,delta:y})}function h(x,y){o=qc.Push;let v=Uj(g.location,x,y);c=f()+1;let _=WB(v,c),b=g.createHref(v);try{a.pushState(_,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}s&&l&&l({action:o,location:g.location,delta:1})}function p(x,y){o=qc.Replace;let v=Uj(g.location,x,y);c=f();let _=WB(v,c),b=g.createHref(v);a.replaceState(_,"",b),s&&l&&l({action:o,location:g.location,delta:0})}function m(x){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof x=="string"?x:Xb(x);return v=v.replace(/ $/,"%20"),Zn(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return o},get location(){return e(i,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(UB,d),l=x,()=>{i.removeEventListener(UB,d),l=null}},createHref(x){return t(i,x)},createURL:m,encodeLocation(x){let y=m(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(x){return a.go(x)}};return g}var GB;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(GB||(GB={}));function Vge(e,t,r){return r===void 0&&(r="/"),Uge(e,t,r,!1)}function Uge(e,t,r,n){let i=typeof t=="string"?um(t):t,s=HO(i.pathname||"/",r);if(s==null)return null;let a=UX(e);Wge(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=tve(s);o=Jge(a[l],c,n)}return o}function UX(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Zn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=iu([n,l.relativePath]),f=r.concat(l);s.children&&s.children.length>0&&(Zn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UX(s.children,t,f,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:Qge(c,s.index),routesMeta:f})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of WX(s.path))i(s,a,l)}),t}function WX(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=WX(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function Wge(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Zge(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Gge=/^:[\w-]+$/,Hge=3,Kge=2,qge=1,Xge=10,Yge=-2,HB=e=>e==="*";function Qge(e,t){let r=e.split("/"),n=r.length;return r.some(HB)&&(n+=Yge),t&&(n+=Kge),r.filter(i=>!HB(i)).reduce((i,s)=>i+(Gge.test(s)?Hge:s===""?qge:Xge),n)}function Zge(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Jge(e,t,r){let{routesMeta:n}=e,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",d=KB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),h=l.route;if(!d&&c&&r&&!n[n.length-1].route.index&&(d=KB({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:iu([s,d.pathname]),pathnameBase:sve(iu([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=iu([s,d.pathnameBase]))}return a}function KB(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=eve(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,f,d)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let g=o[d]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[d];return p&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:e}}function eve(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),VX(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function tve(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return VX(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function HO(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function rve(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?um(e):e;return{pathname:r?r.startsWith("/")?r:nve(r,t):t,search:ave(n),hash:ove(i)}}function nve(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function kS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ive(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function KO(e,t){let r=ive(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function qO(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=um(e):(i=Jv({},e),Zn(!i.pathname||!i.pathname.includes("?"),kS("?","pathname","search",i)),Zn(!i.pathname||!i.pathname.includes("#"),kS("#","pathname","hash",i)),Zn(!i.search||!i.search.includes("#"),kS("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let d=t.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?t[d]:"/"}let l=rve(i,o),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const iu=e=>e.join("/").replace(/\/\/+/g,"/"),sve=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ave=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ove=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lve(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const GX=["post","put","patch","delete"];new Set(GX);const cve=["get",...GX];new Set(cve);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ey.apply(this,arguments)}const XO=E.createContext(null),uve=E.createContext(null),Pu=E.createContext(null),tk=E.createContext(null),sc=E.createContext({outlet:null,matches:[],isDataRoute:!1}),HX=E.createContext(null);function dve(e,t){let{relative:r}=t===void 0?{}:t;dm()||Zn(!1);let{basename:n,navigator:i}=E.useContext(Pu),{hash:s,pathname:a,search:o}=qX(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:iu([n,a])),i.createHref({pathname:l,search:o,hash:s})}function dm(){return E.useContext(tk)!=null}function $o(){return dm()||Zn(!1),E.useContext(tk).location}function KX(e){E.useContext(Pu).static||E.useLayoutEffect(e)}function js(){let{isDataRoute:e}=E.useContext(sc);return e?Tve():fve()}function fve(){dm()||Zn(!1);let e=E.useContext(XO),{basename:t,future:r,navigator:n}=E.useContext(Pu),{matches:i}=E.useContext(sc),{pathname:s}=$o(),a=JSON.stringify(KO(i,r.v7_relativeSplatPath)),o=E.useRef(!1);return KX(()=>{o.current=!0}),E.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=qO(c,JSON.parse(a),s,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:iu([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,a,s,e])}function YO(){let{matches:e}=E.useContext(sc),t=e[e.length-1];return t?t.params:{}}function qX(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=E.useContext(Pu),{matches:i}=E.useContext(sc),{pathname:s}=$o(),a=JSON.stringify(KO(i,n.v7_relativeSplatPath));return E.useMemo(()=>qO(e,JSON.parse(a),s,r==="path"),[e,a,s,r])}function hve(e,t){return pve(e,t)}function pve(e,t,r,n){dm()||Zn(!1);let{navigator:i}=E.useContext(Pu),{matches:s}=E.useContext(sc),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=$o(),f;if(t){var d;let x=typeof t=="string"?um(t):t;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||Zn(!1),f=x}else f=c;let h=f.pathname||"/",p=h;if(l!=="/"){let x=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=Vge(e,{pathname:p}),g=_ve(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:iu([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:iu([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,r,n);return t&&g?E.createElement(tk.Provider,{value:{location:ey({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:qc.Pop}},g):g}function mve(){let e=kve(),t=lve(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),r?E.createElement("pre",{style:i},r):null,null)}const gve=E.createElement(mve,null);class vve extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?E.createElement(sc.Provider,{value:this.props.routeContext},E.createElement(HX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yve(e){let{routeContext:t,match:r,children:n}=e,i=E.useContext(XO);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(sc.Provider,{value:t},n)}function _ve(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let f=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);f>=0||Zn(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:h,errors:p}=r,m=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,d,h)=>{let p,m=!1,g=null,x=null;r&&(p=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||gve,l&&(c<0&&h===0?(m=!0,x=null):c===h&&(m=!0,x=d.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,h+1)),v=()=>{let _;return p?_=g:m?_=x:d.route.Component?_=E.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=f,E.createElement(yve,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:r!=null},children:_})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?E.createElement(vve,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var XX=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(XX||{}),Yb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Yb||{});function xve(e){let t=E.useContext(XO);return t||Zn(!1),t}function bve(e){let t=E.useContext(uve);return t||Zn(!1),t}function wve(e){let t=E.useContext(sc);return t||Zn(!1),t}function YX(e){let t=wve(),r=t.matches[t.matches.length-1];return r.route.id||Zn(!1),r.route.id}function kve(){var e;let t=E.useContext(HX),r=bve(Yb.UseRouteError),n=YX(Yb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Tve(){let{router:e}=xve(XX.UseNavigateStable),t=YX(Yb.UseNavigateStable),r=E.useRef(!1);return KX(()=>{r.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ey({fromRouteId:t},s)))},[e,t])}function fm(e){let{to:t,replace:r,state:n,relative:i}=e;dm()||Zn(!1);let{future:s,static:a}=E.useContext(Pu),{matches:o}=E.useContext(sc),{pathname:l}=$o(),c=js(),f=qO(t,KO(o,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(f);return E.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:i}),[c,d,i,r,n]),null}function Er(e){Zn(!1)}function Mve(e){let{basename:t="/",children:r=null,location:n,navigationType:i=qc.Pop,navigator:s,static:a=!1,future:o}=e;dm()&&Zn(!1);let l=t.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:s,static:a,future:ey({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=um(n));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:m="default"}=n,g=E.useMemo(()=>{let x=HO(f,l);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:m},navigationType:i}},[l,f,d,h,p,m,i]);return g==null?null:E.createElement(Pu.Provider,{value:c},E.createElement(tk.Provider,{children:r,value:g}))}function Sve(e){let{children:t,location:r}=e;return hve(Wj(t),r)}new Promise(()=>{});function Wj(e,t){t===void 0&&(t=[]);let r=[];return E.Children.forEach(e,(n,i)=>{if(!E.isValidElement(n))return;let s=[...t,i];if(n.type===E.Fragment){r.push.apply(r,Wj(n.props.children,s));return}n.type!==Er&&Zn(!1),!n.props.index||!n.props.children||Zn(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Wj(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gj.apply(this,arguments)}function Pve(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Eve(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jve(e,t){return e.button===0&&(!t||t==="_self")&&!Eve(e)}const Cve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ave="6";try{window.__reactRouterVersion=Ave}catch{}const Ove="startTransition",qB=lK[Ove];function $ve(e){let{basename:t,children:r,future:n,window:i}=e,s=E.useRef();s.current==null&&(s.current=Fge({window:i,v5Compat:!0}));let a=s.current,[o,l]=E.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},f=E.useCallback(d=>{c&&qB?qB(()=>l(d)):l(d)},[l,c]);return E.useLayoutEffect(()=>a.listen(f),[a,f]),E.createElement(Mve,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const Nve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ive=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tn=E.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:f,viewTransition:d}=t,h=Pve(t,Cve),{basename:p}=E.useContext(Pu),m,g=!1;if(typeof c=="string"&&Ive.test(c)&&(m=c,Nve))try{let _=new URL(window.location.href),b=c.startsWith("//")?new URL(_.protocol+c):new URL(c),w=HO(b.pathname,p);b.origin===_.origin&&w!=null?c=w+b.search+b.hash:g=!0}catch{}let x=dve(c,{relative:i}),y=Dve(c,{replace:a,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:d});function v(_){n&&n(_),_.defaultPrevented||y(_)}return E.createElement("a",Gj({},h,{href:m||x,onClick:g||s?n:v,ref:r,target:l}))});var XB;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(XB||(XB={}));var YB;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(YB||(YB={}));function Dve(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=js(),c=$o(),f=qX(e,{relative:a});return E.useCallback(d=>{if(jve(d,r)){d.preventDefault();let h=n!==void 0?n:Xb(c)===Xb(f);l(e,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,f,n,i,r,e,s,a,o])}const Lve="modulepreload",Rve=function(e){return"/"+e},QB={},x_=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=Rve(l),l in QB)return;QB[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Lve,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},Fve=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>x_(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class QO extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Bve extends QO{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ZB extends QO{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class JB extends QO{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hj||(Hj={}));var zve=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class Vve{constructor(t,{headers:r={},customFetch:n,region:i=Hj.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=Fve(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return zve(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=r;let o={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(o["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(o["Content-Type"]="application/json",f=JSON.stringify(a)));const d=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:f}).catch(g=>{throw new Bve(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new ZB(d);if(!d.ok)throw new JB(d);let p=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof JB||i instanceof ZB?i.context:void 0}}})}}var Fs={},ZO={},rk={},b_={},nk={},ik={},Uve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kp=Uve();const Wve=kp.fetch,QX=kp.fetch.bind(kp),ZX=kp.Headers,Gve=kp.Request,Hve=kp.Response,hm=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZX,Request:Gve,Response:Hve,default:QX,fetch:Wve},Symbol.toStringTag,{value:"Module"})),Kve=rce(hm);var sk={};Object.defineProperty(sk,"__esModule",{value:!0});let qve=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};sk.default=qve;var JX=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ik,"__esModule",{value:!0});const Xve=JX(Kve),Yve=JX(sk);let Qve=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Xve.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let c=null,f=null,d=null,h=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,p="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const g=await s.text();try{c=JSON.parse(g),Array.isArray(c)&&s.status===404&&(f=[],c=null,h=200,p="OK")}catch{s.status===404&&g===""?(h=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,p="OK"),c&&this.shouldThrowOnError)throw new Yve.default(c)}return{error:c,data:f,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};ik.default=Qve;var Zve=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nk,"__esModule",{value:!0});const Jve=Zve(ik);let eye=class extends Jve.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nk.default=eye;var tye=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b_,"__esModule",{value:!0});const rye=tye(nk);let nye=class extends rye.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};b_.default=nye;var iye=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rk,"__esModule",{value:!0});const _g=iye(b_);let sye=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=r,this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new _g.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new _g.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){const c=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new _g.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new _g.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new _g.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rk.default=sye;var ak={},ok={};Object.defineProperty(ok,"__esModule",{value:!0});ok.version=void 0;ok.version="0.0.0-automated";Object.defineProperty(ak,"__esModule",{value:!0});ak.DEFAULT_HEADERS=void 0;const aye=ok;ak.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${aye.version}`};var eY=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ZO,"__esModule",{value:!0});const oye=eY(rk),lye=eY(b_),cye=ak;let uye=class tY{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},cye.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new oye.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new tY(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${t}`);let l;n||i?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{o.searchParams.append(f,d)})):(a="POST",l=r);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new lye.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ZO.default=uye;var pm=ss&&ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.PostgrestError=Fs.PostgrestBuilder=Fs.PostgrestTransformBuilder=Fs.PostgrestFilterBuilder=Fs.PostgrestQueryBuilder=Fs.PostgrestClient=void 0;const rY=pm(ZO);Fs.PostgrestClient=rY.default;const nY=pm(rk);Fs.PostgrestQueryBuilder=nY.default;const iY=pm(b_);Fs.PostgrestFilterBuilder=iY.default;const sY=pm(nk);Fs.PostgrestTransformBuilder=sY.default;const aY=pm(ik);Fs.PostgrestBuilder=aY.default;const oY=pm(sk);Fs.PostgrestError=oY.default;var dye=Fs.default={PostgrestClient:rY.default,PostgrestQueryBuilder:nY.default,PostgrestFilterBuilder:iY.default,PostgrestTransformBuilder:sY.default,PostgrestBuilder:aY.default,PostgrestError:oY.default};const{PostgrestClient:fye,PostgrestQueryBuilder:lXe,PostgrestFilterBuilder:cXe,PostgrestTransformBuilder:uXe,PostgrestBuilder:dXe,PostgrestError:fXe}=dye;function hye(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const pye=hye(),mye="2.11.15",gye=`realtime-js/${mye}`,vye="1.0.0",lY=1e4,yye=1e3;var mv;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mv||(mv={}));var Qi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qi||(Qi={}));var po;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(po||(po={}));var Kj;(function(e){e.websocket="websocket"})(Kj||(Kj={}));var _d;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_d||(_d={}));class _ye{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(t.slice(a,a+i));a=a+i;const l=n.decode(t.slice(a,a+s));a=a+s;const c=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class cY{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tn||(tn={}));const ez=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((s,a)=>(s[a]=xye(a,e,t,i),s),{})},xye=(e,t,r,n)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=r[e];return s&&!n.includes(s)?uY(s,a):qj(a)},uY=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Tye(t,r)}switch(e){case tn.bool:return bye(t);case tn.float4:case tn.float8:case tn.int2:case tn.int4:case tn.int8:case tn.numeric:case tn.oid:return wye(t);case tn.json:case tn.jsonb:return kye(t);case tn.timestamp:return Mye(t);case tn.abstime:case tn.date:case tn.daterange:case tn.int4range:case tn.int8range:case tn.money:case tn.reltime:case tn.text:case tn.time:case tn.timestamptz:case tn.timetz:case tn.tsrange:case tn.tstzrange:return qj(t);default:return qj(t)}},qj=e=>e,bye=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wye=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kye=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Tye=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const a=e.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>uY(t,o))}return e},Mye=e=>typeof e=="string"?e.replace(" ","T"):e,dY=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class TS{constructor(t,r,n={},i=lY){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tz;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(tz||(tz={}));class gv{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gv.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=gv.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=gv.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const s=this.cloneDeep(t),a=this.transformState(r),o={},l={};return this.map(s,(c,f)=>{a[c]||(l[c]=f)}),this.map(a,(c,f)=>{const d=s[c];if(d){const h=f.map(x=>x.presence_ref),p=d.map(x=>x.presence_ref),m=f.filter(x=>p.indexOf(x.presence_ref)<0),g=d.filter(x=>h.indexOf(x.presence_ref)<0);m.length>0&&(o[c]=m),g.length>0&&(l[c]=g)}else o[c]=f}),this.syncDiff(s,{joins:o,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const f=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),f.length>0){const d=t[o].map(p=>p.presence_ref),h=f.filter(p=>d.indexOf(p.presence_ref)<0);t[o].unshift(...h)}n(o,f,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const f=l.map(d=>d.presence_ref);c=c.filter(d=>f.indexOf(d.presence_ref)<0),t[o]=c,i(o,c,l),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rz;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rz||(rz={}));var nz;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nz||(nz={}));var Pl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Pl||(Pl={}));class JO{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Qi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new TS(this,po.join,this.params,this.timeout),this.rejoinTimer=new cY(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qi.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Qi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(po.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new gv(this),this.broadcastEndpointURL=dY(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qi.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(f=>t==null?void 0:t(Pl.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Pl.CLOSED));const l={},c={broadcast:s,presence:a,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var d;if(this.socket.setAuth(),f===void 0){t==null||t(Pl.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let g=0;g<p;g++){const x=h[g],{filter:{event:y,schema:v,table:_,filter:b}}=x,w=f&&f[g];if(w&&w.event===y&&w.schema===v&&w.table===_&&w.filter===b)m.push(Object.assign(Object.assign({},x),{id:w.id}));else{this.unsubscribe(),this.state=Qi.errored,t==null||t(Pl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(Pl.SUBSCRIBED);return}}).receive("error",f=>{this.state=Qi.errored,t==null||t(Pl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Pl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(po.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new TS(this,po.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new TS(this,t,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:f}=po;if(n&&[o,l,c,f].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(p=>p.callback(h,n)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var m,g,x,y,v,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const b=p.id,w=(m=p.filter)===null||m===void 0?void 0:m.event;return b&&((g=r.ids)===null||g===void 0?void 0:g.includes(b))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(v=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return b==="*"||b===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:x,commit_timestamp:y,type:v,errors:_}=m;h=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:y,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(m))}p.callback(h,n)})}_isClosed(){return this.state===Qi.closed}_isJoined(){return this.state===Qi.joined}_isJoining(){return this.state===Qi.joining}_isLeaving(){return this.state===Qi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&JO.isEqual(i.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(po.close,{},t)}_onError(t){this._on(po.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ez(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ez(t.columns,t.old_record)),r}}const iz=()=>{},Sye=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pye{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lY,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iz,this.ref=0,this.logger=iz,this.conn=null,this.sendBuffer=[],this.serializer=new _ye,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>x_(async()=>{const{default:l}=await Promise.resolve().then(()=>hm);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${t}/${Kj.websocket}`,this.httpEndpoint=dY(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,a)=>a(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new cY(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=pye),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:vye}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case mv.connecting:return _d.Connecting;case mv.open:return _d.Open;case mv.closing:return _d.Closing;default:return _d.Closed}}isConnected(){return this.connectionState()===_d.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new JO(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:gye};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(po.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(yye,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:i,payload:s,ref:a}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(po.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Sye],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class e$ extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pi(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Eye extends e${constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Xj extends e${constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var jye=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const fY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>x_(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Cye=()=>jye(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield x_(()=>Promise.resolve().then(()=>hm),void 0)).Response:Response}),Yj=e=>{if(Array.isArray(e))return e.map(r=>Yj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Yj(n)}),t};var yf=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const MS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Aye=(e,t,r)=>yf(void 0,void 0,void 0,function*(){const n=yield Cye();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{t(new Eye(MS(i),e.status||500))}).catch(i=>{t(new Xj(MS(i),i))}):t(new Xj(MS(e),e))}),Oye=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function w_(e,t,r,n,i,s){return yf(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,Oye(t,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Aye(l,o,n))})})}function Qb(e,t,r,n){return yf(this,void 0,void 0,function*(){return w_(e,"GET",t,r,n)})}function Oc(e,t,r,n,i){return yf(this,void 0,void 0,function*(){return w_(e,"POST",t,n,i,r)})}function $ye(e,t,r,n,i){return yf(this,void 0,void 0,function*(){return w_(e,"PUT",t,n,i,r)})}function Nye(e,t,r,n){return yf(this,void 0,void 0,function*(){return w_(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function hY(e,t,r,n,i){return yf(this,void 0,void 0,function*(){return w_(e,"DELETE",t,n,i,r)})}var $s=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const Iye={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sz={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Dye{constructor(t,r={},n,i){this.url=t,this.headers=r,this.bucketId=n,this.fetch=fY(i)}uploadOrUpdate(t,r,n,i){return $s(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},sz),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(r),f=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Pi(s))return{data:null,error:s};throw s}})}upload(t,r,n){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return $s(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:sz.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:f}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Pi(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return $s(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Oc(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new e$("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(n){if(Pi(n))return{data:null,error:n};throw n}})}update(t,r,n){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $s(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Pi(i))return{data:null,error:i};throw i}})}copy(t,r,n){return $s(this,void 0,void 0,function*(){try{return{data:{path:(yield Oc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Pi(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return $s(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Oc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Pi(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return $s(this,void 0,void 0,function*(){try{const i=yield Oc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Pi(i))return{data:null,error:i};throw i}})}download(t,r){return $s(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Qb(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Pi(o))return{data:null,error:o};throw o}})}info(t){return $s(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Qb(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Yj(n),error:null}}catch(n){if(Pi(n))return{data:null,error:n};throw n}})}exists(t){return $s(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Nye(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Pi(n)&&n instanceof Xj){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(t){return $s(this,void 0,void 0,function*(){try{return{data:yield hY(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Pi(r))return{data:null,error:r};throw r}})}list(t,r,n){return $s(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Iye),r),{prefix:t||""});return{data:yield Oc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Pi(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Lye="2.7.1",Rye={"X-Client-Info":`storage-js/${Lye}`};var Wf=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class Fye{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Rye),r),this.fetch=fY(n)}listBuckets(){return Wf(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pi(t))return{data:null,error:t};throw t}})}getBucket(t){return Wf(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Pi(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Wf(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Pi(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Wf(this,void 0,void 0,function*(){try{return{data:yield $ye(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Pi(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Wf(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Pi(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Wf(this,void 0,void 0,function*(){try{return{data:yield hY(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Pi(r))return{data:null,error:r};throw r}})}}class Bye extends Fye{constructor(t,r={},n){super(t,r,n)}from(t){return new Dye(this.url,this.headers,t,this.fetch)}}const zye="2.52.1";let Kg="";typeof Deno<"u"?Kg="deno":typeof document<"u"?Kg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kg="react-native":Kg="node";const Vye={"X-Client-Info":`supabase-js-${Kg}/${zye}`},Uye={headers:Vye},Wye={schema:"public"},Gye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hye={};var Kye=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};const qye=e=>{let t;return e?t=e:typeof fetch>"u"?t=QX:t=fetch,(...r)=>t(...r)},Xye=()=>typeof Headers>"u"?ZX:Headers,Yye=(e,t,r)=>{const n=qye(r),i=Xye();return(s,a)=>Kye(void 0,void 0,void 0,function*(){var o;const l=(o=yield t())!==null&&o!==void 0?o:e;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},a),{headers:c}))})};var Qye=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};function Zye(e){return e.endsWith("/")?e:e+"/"}function Jye(e,t){var r,n;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Qye(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const pY="2.71.1",ih=30*1e3,Qj=3,SS=Qj*ih,e_e="http://localhost:9999",t_e="supabase.auth.token",r_e={"X-Client-Info":`gotrue-js/${pY}`},Zj="X-Supabase-Api-Version",mY={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n_e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,i_e=10*60*1e3;class t$ extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ir(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class s_e extends t${constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function a_e(e){return ir(e)&&e.name==="AuthApiError"}class gY extends t${constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Eu extends t${constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Pc extends Eu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o_e(e){return ir(e)&&e.name==="AuthSessionMissingError"}class rx extends Eu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nx extends Eu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ix extends Eu{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l_e(e){return ir(e)&&e.name==="AuthImplicitGrantRedirectError"}class az extends Eu{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jj extends Eu{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function PS(e){return ir(e)&&e.name==="AuthRetryableFetchError"}class oz extends Eu{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class eC extends Eu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lz=` 	
\r=`.split(""),c_e=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<lz.length;t+=1)e[lz[t].charCodeAt(0)]=-2;for(let t=0;t<Zb.length;t+=1)e[Zb[t].charCodeAt(0)]=t;return e})();function cz(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zb[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zb[n]),t.queuedBits-=6}}function vY(e,t,r){const n=c_e[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function uz(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{f_e(a,n,r)};for(let a=0;a<e.length;a+=1)vY(e.charCodeAt(a),i,s);return t.join("")}function u_e(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function d_e(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}u_e(n,t)}}function f_e(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function h_e(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)vY(e.charCodeAt(i),r,n);return new Uint8Array(t)}function p_e(e){const t=[];return d_e(e,r=>t.push(r)),new Uint8Array(t)}function m_e(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>cz(i,r,n)),cz(null,r,n),t.join("")}function g_e(e){return Math.round(Date.now()/1e3)+e}function v_e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ao=()=>typeof window<"u"&&typeof document<"u",td={tested:!1,writable:!1},yY=()=>{if(!ao())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(td.tested)return td.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),td.tested=!0,td.writable=!0}catch{td.tested=!0,td.writable=!1}return td.writable};function y_e(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const _Y=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>x_(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},__e=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",sh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},wc=async(e,t)=>{await e.removeItem(t)};class lk{constructor(){this.promise=new lk.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}lk.promiseConstructor=Promise;function ES(e){const t=e.split(".");if(t.length!==3)throw new eC("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!n_e.test(t[n]))throw new eC("JWT not in base64url format");return{header:JSON.parse(uz(t[0])),payload:JSON.parse(uz(t[1])),signature:h_e(t[2]),raw:{header:t[0],payload:t[1]}}}async function x_e(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function b_e(e,t){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){n(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function w_e(e){return("0"+e.toString(16)).substr(-2)}function k_e(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,w_e).join("")}async function T_e(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function M_e(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await T_e(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gf(e,t,r=!1){const n=k_e();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await sh(e,`${t}-code-verifier`,i);const s=await M_e(n);return[s,n===s?"plain":"s256"]}const S_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function P_e(e){const t=e.headers.get(Zj);if(!t||!t.match(S_e))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function E_e(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function j_e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const C_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hf(e){if(!C_e.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jS(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dz(e){return JSON.parse(JSON.stringify(e))}var A_e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const hd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),O_e=[502,503,504];async function fz(e){var t;if(!__e(e))throw new Jj(hd(e),0);if(O_e.includes(e.status))throw new Jj(hd(e),e.status);let r;try{r=await e.json()}catch(s){throw new gY(hd(s),s)}let n;const i=P_e(e);if(i&&i.getTime()>=mY["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new oz(hd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Pc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new oz(hd(r),e.status,r.weak_password.reasons);throw new s_e(hd(r),e.status||500,n)}const $_e=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function gr(e,t,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Zj]||(s[Zj]=mY["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await N_e(e,t,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function N_e(e,t,r,n,i,s){const a=$_e(t,n,i,s);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new Jj(hd(l),0)}if(o.ok||await fz(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await fz(l)}}function Tl(e){var t;let r=null;R_e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=g_e(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function hz(e){const t=Tl(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Lc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function I_e(e){return{data:e,error:null}}function D_e(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,a=A_e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function L_e(e){return e}function R_e(e){return e.access_token&&e.refresh_token&&e.expires_in}const CS=["global","local","others"];var F_e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class B_e{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=_Y(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=CS[0]){if(CS.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${CS.join(", ")}`);try{return await gr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await gr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=F_e(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await gr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:D_e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ir(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await gr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Lc})}catch(r){if(ir(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},f=await gr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:L_e});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ir(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Hf(t);try{return await gr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Lc})}catch(r){if(ir(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hf(t);try{return await gr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Lc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hf(t);try{return await gr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lc})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hf(t.userId);try{const{data:r,error:n}=await gr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hf(t.userId),Hf(t.id);try{return{data:await gr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}}}function pz(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function z_e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kf={debug:!!(globalThis&&yY()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xY extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class V_e extends xY{}async function U_e(e,t,r){Kf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Kf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Kf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Kf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new V_e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kf.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}z_e();const W_e={url:e_e,storageKey:t_e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r_e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mz(e,t,r){return await r()}const qf={};class ty{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ty.nextInstanceID,ty.nextInstanceID+=1,this.instanceID>0&&ao()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},W_e),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new B_e({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_Y(i.fetch),this.lock=i.lock||mz,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ao()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=U_e:this.lock=mz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:yY()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pz(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pz(this.memoryStorage)),ao()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=qf[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){qf[this.storageKey]=Object.assign(Object.assign({},qf[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=qf[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qf[this.storageKey]=Object.assign(Object.assign({},qf[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pY}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=y_e(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ao()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),l_e(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ir(r)?{error:r}:{error:new gY("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Tl}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ir(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,n,i;try{let s;if("email"in t){const{email:f,password:d,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Gf(this.storage,this.storageKey)),s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:Tl})}else if("phone"in t){const{phone:f,password:d,options:h}=t;s=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Tl})}else throw new nx("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ir(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:a,options:o}=t;r=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hz})}else if("phone"in t){const{phone:s,password:a,options:o}=t;r=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hz})}else throw new nx("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new rx}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,s,a,o,l,c,f,d,h,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:x,wallet:y,statement:v,options:_}=t;let b;if(ao())if(typeof y=="object")b=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const w=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),v?{statement:v}:null));let T;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")T=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)T=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${w.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(f=_==null?void 0:_.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(m),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:x,error:y}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:m_e(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Tl});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new rx}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(ir(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await rd(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:a}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Tl});if(await wc(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new rx}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(ir(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=t,o=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Tl}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new rx}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,f=null;this.flowType==="pkce"&&([c,f]=await Gf(this.storage,this.storageKey));const{error:d}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:f},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:f}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f}}throw new nx("You must provide either an email or phone number.")}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,s;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Tl});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ir(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Gf(this.storage,this.storageKey)),await gr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:I_e})}catch(s){if(ir(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Pc;const{error:i}=await gr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ir(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:s}=t,{error:a}=await gr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:i,options:s}=t,{data:a,error:o}=await gr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new nx("You must provide either an email or phone number and a type")}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<SS:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await rd(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=jS()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,f)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,f))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Lc}):await this._useSession(async r=>{var n,i,s;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pc}:await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Lc})})}catch(r){if(ir(r))return o_e(r)&&(await this._removeSession(),await wc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Pc;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Gf(this.storage,this.storageKey));const{data:c,error:f}=await gr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Lc});if(f)throw f;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ir(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pc;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:a}=ES(t.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(ir(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:o}=r;if(o)throw o;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Pc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ir(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ao())throw new ix("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ix(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new az("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ix("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new az("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new ix("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(o);let h=f+d;l&&(h=parseInt(l));const p=h-f;p*1e3<=ih&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=h-d;f-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,f):f-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,f);const{data:g,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(ir(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(a_e(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await wc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=v_e(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Gf(this.storage,this.storageKey,!0));try{return await gr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(ir(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var a,o,l,c,f;const{data:d,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await gr(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return ao()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ir(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await gr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await b_e(async i=>(i>0&&await x_e(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await gr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Tl})),(i,s)=>{const a=200*Math.pow(2,i);return s&&PS(s)&&Date.now()+a-n<ih})}catch(n){if(this._debug(r,"error",n),ir(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ao()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await rd(this.storage,this.storageKey);if(i&&this.userStorage){let a=await rd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await sh(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:jS()}else if(i&&!i.user&&!i.user){const a=await rd(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await wc(this.storage,this.storageKey+"-user"),await sh(this.storage,this.storageKey,i)):i.user=jS()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<SS;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${SS}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),PS(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Pc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new lk;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new Pc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),ir(s)){const a={session:null,error:s};return PS(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await sh(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=dz(i);await sh(this.storage,this.storageKey,s)}else{const i=dz(r);await sh(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await wc(this.storage,this.storageKey),await wc(this.storage,this.storageKey+"-code-verifier"),await wc(this.storage,this.storageKey+"-user"),this.userStorage&&await wc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ao()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ih);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/ih);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ih}ms, refresh threshold is ${Qj} ticks`),i<=Qj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof xY)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ao()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await Gf(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await gr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await gr(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ir(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(ir(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await gr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ir(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ES(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const f=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+i_e>i)return n;const{data:s,error:a}=await gr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=ES(n);r!=null&&r.allowExpired||E_e(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const f=j_e(i.alg),d=await crypto.subtle.importKey("jwk",c,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,a,p_e(`${o}.${l}`)))throw new eC("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}}}ty.nextInstanceID=0;const G_e=ty;class H_e extends G_e{constructor(t){super(t)}}var K_e=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((n=n.apply(e,t||[])).next())})};class q_e{constructor(t,r,n){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Zye(t),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:Wye,realtime:Hye,auth:Object.assign(Object.assign({},Gye),{storageKey:c}),global:Uye},d=Jye(n??{},f);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Yye(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new fye(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Vve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Bye(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return K_e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:a,lock:o,debug:l},c,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H_e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,flowType:a,lock:o,debug:l,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Pye(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const X_e=(e,t,r)=>new q_e(e,t,r);function Y_e(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Y_e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Q_e="https://fsirlcxhtyppecjjdqbp.supabase.co",Z_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzaXJsY3hodHlwcGVjampkcWJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2OTk0NTgsImV4cCI6MjA2OTI3NTQ1OH0.7HZENU4G4fRpemRp44Xj6cGIobhDaxqbJEa7U4gVHVU",Mn=X_e(Q_e,Z_e,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),bY=E.createContext(void 0),ya=()=>{const e=E.useContext(bY);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},J_e=({children:e})=>{const[t,r]=E.useState(null),[n,i]=E.useState(null),[s,a]=E.useState(null),[o,l]=E.useState(!0),{toast:c}=Oo(),f=async x=>{try{const{data:y,error:v}=await Mn.from("user_roles").select("role").eq("user_id",x).single();return v?(console.error("Error fetching user role:",v),null):(y==null?void 0:y.role)||null}catch(y){return console.error("Error in fetchUserRole:",y),null}};E.useEffect(()=>{const{data:{subscription:x}}=Mn.auth.onAuthStateChange(async(y,v)=>{i(v),r((v==null?void 0:v.user)??null),v!=null&&v.user?setTimeout(async()=>{const _=await f(v.user.id);a(_)},0):a(null),l(!1)});return Mn.auth.getSession().then(({data:{session:y}})=>{i(y),r((y==null?void 0:y.user)??null),y!=null&&y.user&&setTimeout(async()=>{const v=await f(y.user.id);a(v)},0),l(!1)}),()=>x.unsubscribe()},[]);const g={user:t,session:n,userRole:s,loading:o,signIn:async(x,y)=>{try{const{error:v}=await Mn.auth.signInWithPassword({email:x,password:y});return v?c({title:"Kirjautuminen eponnistui",description:v.message,variant:"destructive"}):(c({title:"Kirjautuminen onnistui",description:"Tervetuloa takaisin!"}),window.location.href="/dashboard"),{error:v}}catch(v){const _=v instanceof Error?v.message:"Tuntematon virhe";return c({title:"Kirjautuminen eponnistui",description:_,variant:"destructive"}),{error:v}}},signUp:async(x,y,v)=>{try{const _=`${window.location.origin}/`,{error:b}=await Mn.auth.signUp({email:x,password:y,options:{emailRedirectTo:_,data:v}});return c(b?{title:"Rekisterityminen eponnistui",description:b.message,variant:"destructive"}:{title:"Rekisterityminen onnistui",description:"Tarkista shkpostisi vahvistuslinkin takia."}),{error:b}}catch(_){const b=_ instanceof Error?_.message:"Tuntematon virhe";return c({title:"Rekisterityminen eponnistui",description:b,variant:"destructive"}),{error:_}}},signOut:async()=>{try{const{error:x}=await Mn.auth.signOut();x?c({title:"Uloskirjautuminen eponnistui",description:x.message,variant:"destructive"}):(c({title:"Uloskirjautunut",description:"Olet kirjautunut ulos onnistuneesti."}),window.location.href="/")}catch(x){console.error("Error signing out:",x),c({title:"Uloskirjautuminen eponnistui",description:"Tuntematon virhe",variant:"destructive"})}},isAdmin:s==="admin"};return u.jsx(bY.Provider,{value:g,children:e})},wY=E.createContext(void 0),mm=()=>{const e=E.useContext(wY);if(!e)throw new Error("useShoppingCart must be used within a ShoppingCartProvider");return e},e0e=({children:e})=>{const[t,r]=E.useState([]),{toast:n}=Oo(),i=l=>{const c=t.findIndex(f=>f.title===l.title);if(c>-1){const f=[...t];f[c].quantity+=1,r(f)}else{const f={id:Date.now().toString(),title:l.title,price:l.price,quantity:1};r([...t,f])}n({title:"Tuote listty ostoskoriin",description:`${l.title} on listty ostoskoriisi.`})},s=(l,c)=>{if(c<=0){a(l);return}const f=t.map(d=>d.id===l?{...d,quantity:c}:d);r(f)},a=l=>{const c=t.filter(f=>f.id!==l);r(c),n({title:"Tuote poistettu",description:"Tuote on poistettu ostoskorista."})},o=()=>{r([])};return u.jsx(wY.Provider,{value:{cartItems:t,addToCart:i,updateQuantity:s,removeFromCart:a,clearCart:o},children:e})},t0e=({children:e})=>{const{user:t,loading:r,isAdmin:n}=ya(),i=js(),s=$o(),o=["/","/confirm-order","/login","/auth/callback","/about","/meista","/careers","/privacy-policy","/blog","/identiteettiturva","/verkkokauppa","/ota-yhteytta","/logo-tool","/irtisanomislomake"].some(l=>l==="/"?s.pathname==="/":l==="/confirm-order"?s.pathname.startsWith("/confirm-order/"):l==="/blog"?s.pathname.startsWith("/blog"):s.pathname===l||s.pathname.startsWith(l+"/"));return E.useEffect(()=>{r||(!t&&!o?i("/login",{state:{from:s.pathname},replace:!0}):t&&s.pathname.startsWith("/admin")&&!n&&i("/dashboard",{replace:!0}))},[t,r,i,s,o,n]),r?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Ladataan..."})]})}):o||t?u.jsx(u.Fragment,{children:e}):null},kY=E.createContext({});function r0e(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const r$=typeof window<"u",n0e=r$?E.useLayoutEffect:E.useEffect,n$=E.createContext(null),TY=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function i0e(e=!0){const t=E.useContext(n$);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,s=E.useId();E.useEffect(()=>{if(e)return i(s)},[e]);const a=E.useCallback(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,a]:[!0]}function i$(e,t){e.indexOf(t)===-1&&e.push(t)}function s$(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const da=e=>e;let tC=da;const s0e={skipAnimations:!1,useManualTiming:!1};function a$(e){let t;return()=>(t===void 0&&(t=e()),t)}const Tp=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class o${constructor(){this.subscriptions=[]}add(t){return i$(this.subscriptions,t),()=>s$(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rl=e=>e*1e3,Fl=e=>e/1e3;function MY(e,t){return t?e*(1e3/t):0}const a0e=a$(()=>window.ScrollTimeline!==void 0);class o0e{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(i=>{if(a0e()&&i.attachTimeline)return i.attachTimeline(t);if(typeof r=="function")return r(i)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class l0e extends o0e{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function l$(e,t){return e?e[t]||e.default||e:void 0}const rC=2e4;function SY(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<rC;)t+=r,n=e.next(t);return t>=rC?1/0:t}function c$(e){return typeof e=="function"}function gz(e,t){e.timeline=t,e.onfinish=null}const u$=e=>Array.isArray(e)&&typeof e[0]=="number",c0e={linearEasing:void 0};function u0e(e,t){const r=a$(e);return()=>{var n;return(n=c0e[t])!==null&&n!==void 0?n:r()}}const Jb=u0e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),PY=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let s=0;s<i;s++)n+=e(Tp(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function EY(e){return!!(typeof e=="function"&&Jb()||!e||typeof e=="string"&&(e in nC||Jb())||u$(e)||Array.isArray(e)&&e.every(EY))}const qg=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,nC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qg([0,.65,.55,1]),circOut:qg([.55,0,1,.45]),backIn:qg([.31,.01,.66,-.59]),backOut:qg([.33,1.53,.69,.99])};function jY(e,t){if(e)return typeof e=="function"&&Jb()?PY(e,t):u$(e)?qg(e):Array.isArray(e)?e.map(r=>jY(r,t)||nC.easeOut):nC[e]}const sx=["read","resolveKeyframes","update","preRender","render","postRender"],vz={value:null,addProjectionMetrics:null};function d0e(e,t){let r=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(f.schedule(d),e()),l++,d(o)}const f={schedule:(d,h=!1,p=!1)=>{const g=p&&i?r:n;return h&&a.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(c),t&&vz.value&&vz.value.frameloop[t].push(l),l=0,r.clear(),i=!1,s&&(s=!1,f.process(d))}};return f}const f0e=40;function CY(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=sx.reduce((y,v)=>(y[v]=d0e(s,t?v:void 0),y),{}),{read:o,resolveKeyframes:l,update:c,preRender:f,render:d,postRender:h}=a,p=()=>{const y=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(y-i.timestamp,f0e),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),f.process(i),d.process(i),h.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(p))},m=()=>{r=!0,n=!0,i.isProcessing||e(p)};return{schedule:sx.reduce((y,v)=>{const _=a[v];return y[v]=(b,w=!1,k=!1)=>(r||m(),_.schedule(b,w,k)),y},{}),cancel:y=>{for(let v=0;v<sx.length;v++)a[sx[v]].cancel(y)},state:i,steps:a}}const{schedule:un,cancel:vu,state:Ri,steps:AS}=CY(typeof requestAnimationFrame<"u"?requestAnimationFrame:da,!0),{schedule:d$,cancel:hXe}=CY(queueMicrotask,!1);let ib;function h0e(){ib=void 0}const rl={now:()=>(ib===void 0&&rl.set(Ri.isProcessing||s0e.useManualTiming?Ri.timestamp:performance.now()),ib),set:e=>{ib=e,queueMicrotask(h0e)}},oo={x:!1,y:!1};function AY(){return oo.x||oo.y}function p0e(e){return e==="x"||e==="y"?oo[e]?null:(oo[e]=!0,()=>{oo[e]=!1}):oo.x||oo.y?null:(oo.x=oo.y=!0,()=>{oo.x=oo.y=!1})}function m0e(e,t,r){var n;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function OY(e,t){const r=m0e(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[r,i,()=>n.abort()]}function yz(e){return!(e.pointerType==="touch"||AY())}function g0e(e,t,r={}){const[n,i,s]=OY(e,r),a=o=>{if(!yz(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const f=d=>{yz(d)&&(c(d),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const $Y=(e,t)=>t?e===t?!0:$Y(e,t.parentElement):!1,f$=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,v0e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function y0e(e){return v0e.has(e.tagName)||e.tabIndex!==-1}const Xg=new WeakSet;function _z(e){return t=>{t.key==="Enter"&&e(t)}}function OS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _0e=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=_z(()=>{if(Xg.has(r))return;OS(r,"down");const i=_z(()=>{OS(r,"up")}),s=()=>OS(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",s,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function xz(e){return f$(e)&&!AY()}function x0e(e,t,r={}){const[n,i,s]=OY(e,r),a=o=>{const l=o.currentTarget;if(!xz(o)||Xg.has(l))return;Xg.add(l);const c=t(l,o),f=(p,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!xz(p)||!Xg.has(l))&&(Xg.delete(l),typeof c=="function"&&c(p,{success:m}))},d=p=>{f(p,l===window||l===document||r.useGlobalTarget||$Y(l,p.target))},h=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o instanceof HTMLElement&&(o.addEventListener("focus",c=>_0e(c,i)),!y0e(o)&&o.tabIndex===null&&(o.tabIndex=0))}),s}const bz=30,b0e=e=>!isNaN(parseFloat(e));class w0e{constructor(t,r={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=rl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=rl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=b0e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new o$);const n=this.events[t].add(r);return t==="change"?()=>{n(),un.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=rl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>bz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,bz);return MY(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ry(e,t){return new w0e(e,t)}const NY=E.createContext({strict:!1}),wz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mp={};for(const e in wz)Mp[e]={isEnabled:t=>wz[e].some(r=>!!t[r])};function k0e(e){for(const t in e)Mp[t]={...Mp[t],...e[t]}}const T0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ew(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||T0e.has(e)}let IY=e=>!ew(e);function M0e(e){e&&(IY=t=>t.startsWith("on")?!ew(t):e(t))}try{M0e(require("@emotion/is-prop-valid").default)}catch{}function S0e(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(IY(i)||r===!0&&ew(i)||!t&&!ew(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function P0e(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const ck=E.createContext({});function uk(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ny(e){return typeof e=="string"||Array.isArray(e)}const h$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],p$=["initial",...h$];function dk(e){return uk(e.animate)||p$.some(t=>ny(e[t]))}function DY(e){return!!(dk(e)||e.variants)}function E0e(e,t){if(dk(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ny(r)?r:void 0,animate:ny(n)?n:void 0}}return e.inherit!==!1?t:{}}function j0e(e){const{initial:t,animate:r}=E0e(e,E.useContext(ck));return E.useMemo(()=>({initial:t,animate:r}),[kz(t),kz(r)])}function kz(e){return Array.isArray(e)?e.join(" "):e}const C0e=Symbol.for("motionComponentSymbol");function Eh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function A0e(e,t,r){return E.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Eh(r)&&(r.current=n))},[t])}const m$=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),O0e="framerAppearId",LY="data-"+m$(O0e),RY=E.createContext({});function $0e(e,t,r,n,i){var s,a;const{visualElement:o}=E.useContext(ck),l=E.useContext(NY),c=E.useContext(n$),f=E.useContext(TY).reducedMotion,d=E.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const h=d.current,p=E.useContext(RY);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&N0e(d.current,r,i,p);const m=E.useRef(!1);E.useInsertionEffect(()=>{h&&m.current&&h.update(r,c)});const g=r[LY],x=E.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return n0e(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),d$.render(h.render),x.current&&h.animationState&&h.animationState.animateChanges())}),E.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),x.current=!1))}),h}function N0e(e,t,r,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:FY(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Eh(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function FY(e){if(e)return e.options.allowProjection!==!1?e.projection:FY(e.parent)}function I0e({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){var s,a;e&&k0e(e);function o(c,f){let d;const h={...E.useContext(TY),...c,layoutId:D0e(c)},{isStatic:p}=h,m=j0e(c),g=n(c,p);if(!p&&r$){L0e();const x=R0e(h);d=x.MeasureLayout,m.visualElement=$0e(i,g,h,t,x.ProjectionNode)}return u.jsxs(ck.Provider,{value:m,children:[d&&m.visualElement?u.jsx(d,{visualElement:m.visualElement,...h}):null,r(i,c,A0e(g,m.visualElement,f),g,p,m.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=E.forwardRef(o);return l[C0e]=i,l}function D0e({layoutId:e}){const t=E.useContext(kY).id;return t&&e!==void 0?t+"-"+e:e}function L0e(e,t){E.useContext(NY).strict}function R0e(e){const{drag:t,layout:r}=Mp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const BY=e=>t=>typeof t=="string"&&t.startsWith(e),g$=BY("--"),F0e=BY("var(--"),v$=e=>F0e(e)?B0e.test(e.split("/*")[0].trim()):!1,B0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iy={};function z0e(e){for(const t in e)iy[t]=e[t],g$(t)&&(iy[t].isCSSVariable=!0)}const gm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_f=new Set(gm);function zY(e,{layout:t,layoutId:r}){return _f.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!iy[e]||e==="opacity")}const as=e=>!!(e&&e.getVelocity),VY=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Zl=(e,t,r)=>r>t?t:r<e?e:r,vm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sy={...vm,transform:e=>Zl(0,1,e)},ax={...vm,default:1},k_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ec=k_("deg"),nl=k_("%"),Vt=k_("px"),V0e=k_("vh"),U0e=k_("vw"),Tz={...nl,parse:e=>nl.parse(e)/100,transform:e=>nl.transform(e*100)},W0e={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,backgroundPositionX:Vt,backgroundPositionY:Vt},G0e={rotate:Ec,rotateX:Ec,rotateY:Ec,rotateZ:Ec,scale:ax,scaleX:ax,scaleY:ax,scaleZ:ax,skew:Ec,skewX:Ec,skewY:Ec,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:sy,originX:Tz,originY:Tz,originZ:Vt},Mz={...vm,transform:Math.round},y$={...W0e,...G0e,zIndex:Mz,size:Vt,fillOpacity:sy,strokeOpacity:sy,numOctaves:Mz},H0e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K0e=gm.length;function q0e(e,t,r){let n="",i=!0;for(let s=0;s<K0e;s++){const a=gm[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const c=VY(o,y$[a]);if(!l){i=!1;const f=H0e[a]||a;n+=`${f}(${c}) `}r&&(t[a]=c)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function _$(e,t,r){const{style:n,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(_f.has(l)){a=!0;continue}else if(g$(l)){i[l]=c;continue}else{const f=VY(c,y$[l]);l.startsWith("origin")?(o=!0,s[l]=f):n[l]=f}}if(t.transform||(a||r?n.transform=q0e(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;n.transformOrigin=`${l} ${c} ${f}`}}const x$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UY(e,t,r){for(const n in t)!as(t[n])&&!zY(n,r)&&(e[n]=t[n])}function X0e({transformTemplate:e},t){return E.useMemo(()=>{const r=x$();return _$(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Y0e(e,t){const r=e.style||{},n={};return UY(n,r,e),Object.assign(n,X0e(e,t)),n}function Q0e(e,t){const r={},n=Y0e(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Z0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function b$(e){return typeof e!="string"||e.includes("-")?!1:!!(Z0e.indexOf(e)>-1||/[A-Z]/u.test(e))}const J0e={offset:"stroke-dashoffset",array:"stroke-dasharray"},exe={offset:"strokeDashoffset",array:"strokeDasharray"};function txe(e,t,r=1,n=0,i=!0){e.pathLength=1;const s=i?J0e:exe;e[s.offset]=Vt.transform(-n);const a=Vt.transform(t),o=Vt.transform(r);e[s.array]=`${a} ${o}`}function Sz(e,t,r){return typeof e=="string"?e:Vt.transform(t+r*e)}function rxe(e,t,r){const n=Sz(t,e.x,e.width),i=Sz(r,e.y,e.height);return`${n} ${i}`}function w$(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},f,d){if(_$(e,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:m}=e;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=rxe(m,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&txe(h,a,o,l,!1)}const WY=()=>({...x$(),attrs:{}}),k$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function nxe(e,t,r,n){const i=E.useMemo(()=>{const s=WY();return w$(s,t,k$(n),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};UY(s,e.style,e),i.style={...s,...i.style}}return i}function ixe(e=!1){return(r,n,i,{latestValues:s},a)=>{const l=(b$(r)?nxe:Q0e)(n,s,a,r),c=S0e(n,typeof r=="string",e),f=r!==E.Fragment?{...c,...l,ref:i}:{},{children:d}=n,h=E.useMemo(()=>as(d)?d.get():d,[d]);return E.createElement(r,{...f,children:h})}}function Pz(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function T$(e,t,r,n){if(typeof t=="function"){const[i,s]=Pz(n);t=t(r!==void 0?r:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=Pz(n);t=t(r!==void 0?r:e.custom,i,s)}return t}const iC=e=>Array.isArray(e),sxe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),axe=e=>iC(e)?e[e.length-1]||0:e;function sb(e){const t=as(e)?e.get():e;return sxe(t)?t.toValue():t}function oxe({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,i,s){const a={latestValues:lxe(n,i,s,e),renderState:t()};return r&&(a.onMount=o=>r({props:n,current:o,...a}),a.onUpdate=o=>r(o)),a}const GY=e=>(t,r)=>{const n=E.useContext(ck),i=E.useContext(n$),s=()=>oxe(e,t,n,i);return r?s():r0e(s)};function lxe(e,t,r,n){const i={},s=n(e,{});for(const h in s)i[h]=sb(s[h]);let{initial:a,animate:o}=e;const l=dk(e),c=DY(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let f=r?r.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!uk(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const m=T$(e,h[p]);if(m){const{transitionEnd:g,transition:x,...y}=m;for(const v in y){let _=y[v];if(Array.isArray(_)){const b=f?_.length-1:0;_=_[b]}_!==null&&(i[v]=_)}for(const v in g)i[v]=g[v]}}}return i}function M$(e,t,r){var n;const{style:i}=e,s={};for(const a in i)(as(i[a])||t.style&&as(t.style[a])||zY(a,e)||((n=r==null?void 0:r.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const cxe={useVisualState:GY({scrapeMotionValuesFromProps:M$,createRenderState:x$})};function HY(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function KY(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const s in r)e.style.setProperty(s,r[s])}const qY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function XY(e,t,r,n){KY(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(qY.has(i)?i:m$(i),t.attrs[i])}function YY(e,t,r){const n=M$(e,t,r);for(const i in e)if(as(e[i])||as(t[i])){const s=gm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=e[i]}return n}const Ez=["x","y","width","height","cx","cy","r"],uxe={useVisualState:GY({scrapeMotionValuesFromProps:YY,createRenderState:WY,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:i})=>{if(!r)return;let s=!!e.drag;if(!s){for(const o in i)if(_f.has(o)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let o=0;o<Ez.length;o++){const l=Ez[o];e[l]!==t[l]&&(a=!0)}a&&un.read(()=>{HY(r,n),un.render(()=>{w$(n,i,k$(r.tagName),e.transformTemplate),XY(r,n)})})}})};function dxe(e,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...b$(n)?uxe:cxe,preloadedFeatures:e,useRender:ixe(i),createVisualElement:t,Component:n};return I0e(a)}}function ay(e,t,r){const n=e.getProps();return T$(n,t,r!==void 0?r:n.custom,e)}const QY=new Set(["width","height","top","left","right","bottom",...gm]);function fxe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ry(r))}function hxe(e,t){const r=ay(e,t);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const a in s){const o=axe(s[a]);fxe(e,a,o)}}function pxe(e){return!!(as(e)&&e.add)}function sC(e,t){const r=e.getValue("willChange");if(pxe(r))return r.add(t)}function ZY(e){return e.props[LY]}const JY=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,mxe=1e-7,gxe=12;function vxe(e,t,r,n,i){let s,a,o=0;do a=t+(r-t)/2,s=JY(a,n,i)-e,s>0?r=a:t=a;while(Math.abs(s)>mxe&&++o<gxe);return a}function T_(e,t,r,n){if(e===t&&r===n)return da;const i=s=>vxe(s,0,1,e,r);return s=>s===0||s===1?s:JY(i(s),t,n)}const eQ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tQ=e=>t=>1-e(1-t),rQ=T_(.33,1.53,.69,.99),S$=tQ(rQ),nQ=eQ(S$),iQ=e=>(e*=2)<1?.5*S$(e):.5*(2-Math.pow(2,-10*(e-1))),P$=e=>1-Math.sin(Math.acos(e)),sQ=tQ(P$),aQ=eQ(P$),oQ=e=>/^0[^.\s]+$/u.test(e);function yxe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||oQ(e):!0}const vv=e=>Math.round(e*1e5)/1e5,E$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _xe(e){return e==null}const xxe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,j$=(e,t)=>r=>!!(typeof r=="string"&&xxe.test(r)&&r.startsWith(e)||t&&!_xe(r)&&Object.prototype.hasOwnProperty.call(r,t)),lQ=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(E$);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},bxe=e=>Zl(0,255,e),$S={...vm,transform:e=>Math.round(bxe(e))},Pd={test:j$("rgb","red"),parse:lQ("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+$S.transform(e)+", "+$S.transform(t)+", "+$S.transform(r)+", "+vv(sy.transform(n))+")"};function wxe(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const aC={test:j$("#"),parse:wxe,transform:Pd.transform},jh={test:j$("hsl","hue"),parse:lQ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+nl.transform(vv(t))+", "+nl.transform(vv(r))+", "+vv(sy.transform(n))+")"},Ji={test:e=>Pd.test(e)||aC.test(e)||jh.test(e),parse:e=>Pd.test(e)?Pd.parse(e):jh.test(e)?jh.parse(e):aC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Pd.transform(e):jh.transform(e)},kxe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Txe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(E$))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(kxe))===null||r===void 0?void 0:r.length)||0)>0}const cQ="number",uQ="color",Mxe="var",Sxe="var(",jz="${}",Pxe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function oy(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(Pxe,l=>(Ji.test(l)?(n.color.push(s),i.push(uQ),r.push(Ji.parse(l))):l.startsWith(Sxe)?(n.var.push(s),i.push(Mxe),r.push(l)):(n.number.push(s),i.push(cQ),r.push(parseFloat(l))),++s,jz)).split(jz);return{values:r,split:o,indexes:n,types:i}}function dQ(e){return oy(e).values}function fQ(e){const{split:t,types:r}=oy(e),n=t.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=t[a],i[a]!==void 0){const o=r[a];o===cQ?s+=vv(i[a]):o===uQ?s+=Ji.transform(i[a]):s+=i[a]}return s}}const Exe=e=>typeof e=="number"?0:e;function jxe(e){const t=dQ(e);return fQ(e)(t.map(Exe))}const yu={test:Txe,parse:dQ,createTransformer:fQ,getAnimatableNone:jxe},Cxe=new Set(["brightness","contrast","saturate","opacity"]);function Axe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(E$)||[];if(!n)return e;const i=r.replace(n,"");let s=Cxe.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+i+")"}const Oxe=/\b([a-z-]*)\(.*?\)/gu,oC={...yu,getAnimatableNone:e=>{const t=e.match(Oxe);return t?t.map(Axe).join(" "):e}},$xe={...y$,color:Ji,backgroundColor:Ji,outlineColor:Ji,fill:Ji,stroke:Ji,borderColor:Ji,borderTopColor:Ji,borderRightColor:Ji,borderBottomColor:Ji,borderLeftColor:Ji,filter:oC,WebkitFilter:oC},hQ=e=>$xe[e];function pQ(e,t){let r=hQ(e);return r!==oC&&(r=yu),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Nxe=new Set(["auto","none","0"]);function Ixe(e,t,r){let n=0,i;for(;n<e.length&&!i;){const s=e[n];typeof s=="string"&&!Nxe.has(s)&&oy(s).values.length&&(i=e[n]),n++}if(i&&r)for(const s of t)e[s]=pQ(r,i)}const Ed=e=>e*180/Math.PI,lC=e=>{const t=Ed(Math.atan2(e[1],e[0]));return cC(t)},Dxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:lC,rotateZ:lC,skewX:e=>Ed(Math.atan(e[1])),skewY:e=>Ed(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},cC=e=>(e=e%360,e<0&&(e+=360),e),Cz=lC,Az=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Oz=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Lxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Az,scaleY:Oz,scale:e=>(Az(e)+Oz(e))/2,rotateX:e=>cC(Ed(Math.atan2(e[6],e[5]))),rotateY:e=>cC(Ed(Math.atan2(-e[2],e[0]))),rotateZ:Cz,rotate:Cz,skewX:e=>Ed(Math.atan(e[4])),skewY:e=>Ed(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function $z(e){return e.includes("scale")?1:0}function uC(e,t){if(!e||e==="none")return $z(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=Lxe,i=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Dxe,i=o}if(!i)return $z(t);const s=n[t],a=i[1].split(",").map(Fxe);return typeof s=="function"?s(a):a[s]}const Rxe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return uC(r,t)};function Fxe(e){return parseFloat(e.trim())}const Nz=e=>e===vm||e===Vt,Bxe=new Set(["x","y","z"]),zxe=gm.filter(e=>!Bxe.has(e));function Vxe(e){const t=[];return zxe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Sp={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>uC(t,"x"),y:(e,{transform:t})=>uC(t,"y")};Sp.translateX=Sp.x;Sp.translateY=Sp.y;const Ud=new Set;let dC=!1,fC=!1;function mQ(){if(fC){const e=Array.from(Ud).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=Vxe(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))===null||o===void 0||o.set(a)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}fC=!1,dC=!1,Ud.forEach(e=>e.complete()),Ud.clear()}function gQ(){Ud.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(fC=!0)})}function Uxe(){gQ(),mQ()}class C${constructor(t,r,n,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ud.add(this),dC||(dC=!0,un.read(gQ),un.resolveKeyframes(mQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ud.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ud.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const vQ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Wxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Gxe(e){const t=Wxe.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function yQ(e,t,r=1){const[n,i]=Gxe(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const a=s.trim();return vQ(a)?parseFloat(a):a}return v$(i)?yQ(i,t,r+1):i}const _Q=e=>t=>t.test(e),Hxe={test:e=>e==="auto",parse:e=>e},xQ=[vm,Vt,nl,Ec,U0e,V0e,Hxe],Iz=e=>xQ.find(_Q(e));class bQ extends C${constructor(t,r,n,i,s){super(t,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),v$(c))){const f=yQ(c,r.current);f!==void 0&&(t[l]=f),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!QY.has(n)||t.length!==2)return;const[i,s]=t,a=Iz(i),o=Iz(s);if(a!==o)if(Nz(a)&&Nz(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)yxe(t[i])&&n.push(i);n.length&&Ixe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Sp[n](r.measureViewportBox(),window.getComputedStyle(r.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Dz=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yu.test(e)||e==="0")&&!e.startsWith("url("));function Kxe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function qxe(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=Dz(i,t),o=Dz(s,t);return!a||!o?!1:Kxe(e)||(r==="spring"||c$(r))&&n}const Xxe=e=>e!==null;function fk(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Xxe),s=t&&r!=="loop"&&t%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const Yxe=40;class wQ{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rl.now(),this.options={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Yxe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Uxe(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=rl.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!qxe(t,n,i,s))if(a)this.options.duration=0;else{l&&l(fk(t,this.options,r)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(t,r);f!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...f},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const $n=(e,t,r)=>e+(t-e)*r;function NS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Qxe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,s=0,a=0;if(!t)i=s=a=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;i=NS(l,o,e+1/3),s=NS(l,o,e),a=NS(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function tw(e,t){return r=>r>0?t:e}const IS=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},Zxe=[aC,Pd,jh],Jxe=e=>Zxe.find(t=>t.test(e));function Lz(e){const t=Jxe(e);if(!t)return!1;let r=t.parse(e);return t===jh&&(r=Qxe(r)),r}const Rz=(e,t)=>{const r=Lz(e),n=Lz(t);if(!r||!n)return tw(e,t);const i={...r};return s=>(i.red=IS(r.red,n.red,s),i.green=IS(r.green,n.green,s),i.blue=IS(r.blue,n.blue,s),i.alpha=$n(r.alpha,n.alpha,s),Pd.transform(i))},ebe=(e,t)=>r=>t(e(r)),M_=(...e)=>e.reduce(ebe),hC=new Set(["none","hidden"]);function tbe(e,t){return hC.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function rbe(e,t){return r=>$n(e,t,r)}function A$(e){return typeof e=="number"?rbe:typeof e=="string"?v$(e)?tw:Ji.test(e)?Rz:sbe:Array.isArray(e)?kQ:typeof e=="object"?Ji.test(e)?Rz:nbe:tw}function kQ(e,t){const r=[...e],n=r.length,i=e.map((s,a)=>A$(s)(s,t[a]));return s=>{for(let a=0;a<n;a++)r[a]=i[a](s);return r}}function nbe(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=A$(e[i])(e[i],t[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function ibe(e,t){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=(r=e.values[o])!==null&&r!==void 0?r:0;n[s]=l,i[a]++}return n}const sbe=(e,t)=>{const r=yu.createTransformer(t),n=oy(e),i=oy(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?hC.has(e)&&!i.values.length||hC.has(t)&&!n.values.length?tbe(e,t):M_(kQ(ibe(n,i),i.values),r):tw(e,t)};function TQ(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?$n(e,t,r):A$(e)(e,t)}const abe=5;function MQ(e,t,r){const n=Math.max(t-abe,0);return MY(r-e(n),t-n)}const Bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},DS=.001;function obe({duration:e=Bn.duration,bounce:t=Bn.bounce,velocity:r=Bn.velocity,mass:n=Bn.mass}){let i,s,a=1-t;a=Zl(Bn.minDamping,Bn.maxDamping,a),e=Zl(Bn.minDuration,Bn.maxDuration,Fl(e)),a<1?(i=c=>{const f=c*a,d=f*e,h=f-r,p=pC(c,a),m=Math.exp(-d);return DS-h/p*m},s=c=>{const d=c*a*e,h=d*r+r,p=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-d),g=pC(Math.pow(c,2),a);return(-i(c)+DS>0?-1:1)*((h-p)*m)/g}):(i=c=>{const f=Math.exp(-c*e),d=(c-r)*e+1;return-DS+f*d},s=c=>{const f=Math.exp(-c*e),d=(r-c)*(e*e);return f*d});const o=5/e,l=cbe(i,s,o);if(e=Rl(e),isNaN(l))return{stiffness:Bn.stiffness,damping:Bn.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:a*2*Math.sqrt(n*c),duration:e}}}const lbe=12;function cbe(e,t,r){let n=r;for(let i=1;i<lbe;i++)n=n-e(n)/t(n);return n}function pC(e,t){return e*Math.sqrt(1-t*t)}const ube=["duration","bounce"],dbe=["stiffness","damping","mass"];function Fz(e,t){return t.some(r=>e[r]!==void 0)}function fbe(e){let t={velocity:Bn.velocity,stiffness:Bn.stiffness,damping:Bn.damping,mass:Bn.mass,isResolvedFromDuration:!1,...e};if(!Fz(e,dbe)&&Fz(e,ube))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*Zl(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Bn.mass,stiffness:i,damping:s}}else{const r=obe(e);t={...t,...r,mass:Bn.mass},t.isResolvedFromDuration=!0}return t}function SQ(e=Bn.visualDuration,t=Bn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:d,velocity:h,isResolvedFromDuration:p}=fbe({...r,velocity:-Fl(r.velocity||0)}),m=h||0,g=c/(2*Math.sqrt(l*f)),x=a-s,y=Fl(Math.sqrt(l/f)),v=Math.abs(x)<5;n||(n=v?Bn.restSpeed.granular:Bn.restSpeed.default),i||(i=v?Bn.restDelta.granular:Bn.restDelta.default);let _;if(g<1){const w=pC(y,g);_=k=>{const T=Math.exp(-g*y*k);return a-T*((m+g*y*x)/w*Math.sin(w*k)+x*Math.cos(w*k))}}else if(g===1)_=w=>a-Math.exp(-y*w)*(x+(m+y*x)*w);else{const w=y*Math.sqrt(g*g-1);_=k=>{const T=Math.exp(-g*y*k),M=Math.min(w*k,300);return a-T*((m+g*y*x)*Math.sinh(M)+w*x*Math.cosh(M))/w}}const b={calculatedDuration:p&&d||null,next:w=>{const k=_(w);if(p)o.done=w>=d;else{let T=0;g<1&&(T=w===0?Rl(m):MQ(_,w,k));const M=Math.abs(T)<=n,j=Math.abs(a-k)<=i;o.done=M&&j}return o.value=o.done?a:k,o},toString:()=>{const w=Math.min(SY(b),rC),k=PY(T=>b.next(w*T).value,w,30);return w+"ms "+k}};return b}function Bz({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:f}){const d=e[0],h={done:!1,value:d},p=M=>o!==void 0&&M<o||l!==void 0&&M>l,m=M=>o===void 0?l:l===void 0||Math.abs(o-M)<Math.abs(l-M)?o:l;let g=r*t;const x=d+g,y=a===void 0?x:a(x);y!==x&&(g=y-d);const v=M=>-g*Math.exp(-M/n),_=M=>y+v(M),b=M=>{const j=v(M),C=_(M);h.done=Math.abs(j)<=c,h.value=h.done?y:C};let w,k;const T=M=>{p(h.value)&&(w=M,k=SQ({keyframes:[h.value,m(h.value)],velocity:MQ(_,M,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return T(0),{calculatedDuration:null,next:M=>{let j=!1;return!k&&w===void 0&&(j=!0,b(M),T(M)),w!==void 0&&M>=w?k.next(M-w):(!j&&b(M),h)}}}const hbe=T_(.42,0,1,1),pbe=T_(0,0,.58,1),PQ=T_(.42,0,.58,1),mbe=e=>Array.isArray(e)&&typeof e[0]!="number",zz={linear:da,easeIn:hbe,easeInOut:PQ,easeOut:pbe,circIn:P$,circInOut:aQ,circOut:sQ,backIn:S$,backInOut:nQ,backOut:rQ,anticipate:iQ},Vz=e=>{if(u$(e)){tC(e.length===4);const[t,r,n,i]=e;return T_(t,r,n,i)}else if(typeof e=="string")return tC(zz[e]!==void 0),zz[e];return e};function gbe(e,t,r){const n=[],i=r||TQ,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||da:t;o=M_(l,o)}n.push(o)}return n}function vbe(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const s=e.length;if(tC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=gbe(t,n,i),l=o.length,c=f=>{if(a&&f<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(f<e[d+1]);d++);const h=Tp(e[d],e[d+1],f);return o[d](h)};return r?f=>c(Zl(e[0],e[s-1],f)):c}function ybe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=Tp(0,t,n);e.push($n(r,1,i))}}function _be(e){const t=[0];return ybe(t,e.length-1),t}function xbe(e,t){return e.map(r=>r*t)}function bbe(e,t){return e.map(()=>t||PQ).splice(0,e.length-1)}function rw({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=mbe(n)?n.map(Vz):Vz(n),s={done:!1,value:t[0]},a=xbe(r&&r.length===t.length?r:_be(t),e),o=vbe(a,t,{ease:Array.isArray(i)?i:bbe(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const wbe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>un.update(t,!0),stop:()=>vu(t),now:()=>Ri.isProcessing?Ri.timestamp:rl.now()}},kbe={decay:Bz,inertia:Bz,tween:rw,keyframes:rw,spring:SQ},Tbe=e=>e/100;class O$ extends wQ{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||C$,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=c$(r)?r:kbe[r]||rw;let l,c;o!==rw&&typeof t[0]!="number"&&(l=M_(Tbe,TQ(t[0],t[1])),t=[0,100]);const f=o({...this.options,keyframes:t});s==="mirror"&&(c=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=SY(f));const{calculatedDuration:d}=f,h=d+i,p=h*(n+1)-i;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:f,resolvedDuration:d}=n;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:m,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-f/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>f;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let _=this.currentTime,b=s;if(p){const M=Math.min(this.currentTime,f)/d;let j=Math.floor(M),C=M%1;!C&&M>=1&&(C=1),C===1&&j--,j=Math.min(j,p+1),!!(j%2)&&(m==="reverse"?(C=1-C,g&&(C-=g/d)):m==="mirror"&&(b=a)),_=Zl(0,1,C)*d}const w=v?{done:!1,value:l[0]}:b.next(_);o&&(w.value=o(w.value));let{done:k}=w;!v&&c!==null&&(k=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return T&&i!==void 0&&(w.value=fk(l,this.options,i)),x&&x(w.value),T&&this.finish(),w}get duration(){const{resolved:t}=this;return t?Fl(t.calculatedDuration):0}get time(){return Fl(this.currentTime)}set time(t){t=Rl(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Fl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=wbe,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Mbe=new Set(["opacity","clipPath","filter","transform"]);function Sbe(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:r};l&&(c.offset=l);const f=jY(o,i);return Array.isArray(f)&&(c.easing=f),e.animate(c,{delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Pbe=a$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nw=10,Ebe=2e4;function jbe(e){return c$(e.type)||e.type==="spring"||!EY(e.ease)}function Cbe(e,t){const r=new O$({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const i=[];let s=0;for(;!n.done&&s<Ebe;)n=r.sample(s),i.push(n.value),s+=nw;return{times:void 0,keyframes:i,duration:s-nw,ease:"linear"}}const EQ={anticipate:iQ,backInOut:nQ,circInOut:aQ};function Abe(e){return e in EQ}class Uz extends wQ{constructor(t){super(t);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new bQ(s,(a,o)=>this.onKeyframesResolved(a,o),r,n,i),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Jb()&&Abe(s)&&(s=EQ[s]),jbe(this.options)){const{onComplete:d,onUpdate:h,motionValue:p,element:m,...g}=this.options,x=Cbe(t,g);t=x.keyframes,t.length===1&&(t[1]=t[0]),n=x.duration,i=x.times,s=x.ease,a="keyframes"}const f=Sbe(o.owner.current,l,t,{...this.options,duration:n,times:i,ease:s});return f.startTime=c??this.calcStartTime(),this.pendingTimeline?(gz(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(fk(t,this.options,r)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:n,times:i,type:a,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return Fl(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return Fl(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Rl(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return da;const{animation:n}=r;gz(n,t)}return da}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:i,type:s,ease:a,times:o}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:d,element:h,...p}=this.options,m=new O$({...p,keyframes:n,duration:i,type:s,ease:a,times:o,isGenerator:!0}),g=Rl(this.time);c.setWithVelocity(m.sample(g-nw).value,m.sample(g).value,nw)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return Pbe()&&n&&Mbe.has(n)&&(n!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Obe={type:"spring",stiffness:500,damping:25,restSpeed:10},$be=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Nbe={type:"keyframes",duration:.8},Ibe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dbe=(e,{keyframes:t})=>t.length>2?Nbe:_f.has(e)?e.startsWith("scale")?$be(t[1]):Obe:Ibe;function Lbe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const $$=(e,t,r,n={},i,s)=>a=>{const o=l$(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Rl(l);let f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};Lbe(o)||(f={...f,...Dbe(e,f)}),f.duration&&(f.duration=Rl(f.duration)),f.repeatDelay&&(f.repeatDelay=Rl(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),f.allowFlatten=!o.type&&!o.ease,d&&!s&&t.get()!==void 0){const h=fk(f.keyframes,o);if(h!==void 0)return un.update(()=>{f.onUpdate(h),f.onComplete()}),new l0e([])}return!s&&Uz.supports(f)?new Uz(f):new O$(f)};function Rbe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function jQ(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);const c=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const h=e.getValue(d,(s=e.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||f&&Rbe(f,d))continue;const m={delay:r,...l$(a||{},d)};let g=!1;if(window.MotionHandoffAnimation){const y=ZY(e);if(y){const v=window.MotionHandoffAnimation(y,d,un);v!==null&&(m.startTime=v,g=!0)}}sC(e,d),h.start($$(d,h,p,e.shouldReduceMotion&&QY.has(d)?{type:!1}:m,e,g));const x=h.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{un.update(()=>{o&&hxe(e,o)})}),c}function mC(e,t,r={}){var n;const i=ay(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const a=i?()=>Promise.all(jQ(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:h}=s;return Fbe(e,t,f+c,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,f]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>f())}else return Promise.all([a(),o(r.delay)])}function Fbe(e,t,r=0,n=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*n,l=i===1?(c=0)=>c*n:(c=0)=>o-c*n;return Array.from(e.variantChildren).sort(Bbe).forEach((c,f)=>{c.notify("AnimationStart",t),a.push(mC(c,t,{...s,delay:r+l(f)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function Bbe(e,t){return e.sortNodePosition(t)}function zbe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(s=>mC(e,s,r));n=Promise.all(i)}else if(typeof t=="string")n=mC(e,t,r);else{const i=typeof t=="function"?ay(e,t,r.custom):t;n=Promise.all(jQ(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function CQ(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Vbe=p$.length;function AQ(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?AQ(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Vbe;r++){const n=p$[r],i=e.props[n];(ny(i)||i===!1)&&(t[n]=i)}return t}const Ube=[...h$].reverse(),Wbe=h$.length;function Gbe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>zbe(e,r,n)))}function Hbe(e){let t=Gbe(e),r=Wz(),n=!0;const i=l=>(c,f)=>{var d;const h=ay(e,f,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:p,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,f=AQ(e.parent)||{},d=[],h=new Set;let p={},m=1/0;for(let x=0;x<Wbe;x++){const y=Ube[x],v=r[y],_=c[y]!==void 0?c[y]:f[y],b=ny(_),w=y===l?v.isActive:null;w===!1&&(m=x);let k=_===f[y]&&_!==c[y]&&b;if(k&&n&&e.manuallyAnimateOnMount&&(k=!1),v.protectedKeys={...p},!v.isActive&&w===null||!_&&!v.prevProp||uk(_)||typeof _=="boolean")continue;const T=Kbe(v.prevProp,_);let M=T||y===l&&v.isActive&&!k&&b||x>m&&b,j=!1;const C=Array.isArray(_)?_:[_];let R=C.reduce(i(y),{});w===!1&&(R={});const{prevResolvedValues:I={}}=v,N={...I,...R},z=H=>{M=!0,h.has(H)&&(j=!0,h.delete(H)),v.needsAnimating[H]=!0;const O=e.getValue(H);O&&(O.liveStyle=!1)};for(const H in N){const O=R[H],q=I[H];if(p.hasOwnProperty(H))continue;let ee=!1;iC(O)&&iC(q)?ee=!CQ(O,q):ee=O!==q,ee?O!=null?z(H):h.add(H):O!==void 0&&h.has(H)?z(H):v.protectedKeys[H]=!0}v.prevProp=_,v.prevResolvedValues=R,v.isActive&&(p={...p,...R}),n&&e.blockInitialAnimation&&(M=!1),M&&(!(k&&T)||j)&&d.push(...C.map(H=>({animation:H,options:{type:y}})))}if(h.size){const x={};if(typeof c.initial!="boolean"){const y=ay(e,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(x.transition=y.transition)}h.forEach(y=>{const v=e.getBaseTarget(y),_=e.getValue(y);_&&(_.liveStyle=!0),x[y]=v??null}),d.push({animation:x})}let g=!!d.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(g=!1),n=!1,g?t(d):Promise.resolve()}function o(l,c){var f;if(r[l].isActive===c)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),r[l].isActive=c;const d=a(l);for(const h in r)r[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>r,reset:()=>{r=Wz(),n=!0}}}function Kbe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!CQ(t,e):!1}function nd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wz(){return{animate:nd(!0),whileInView:nd(),whileHover:nd(),whileTap:nd(),whileDrag:nd(),whileFocus:nd(),exit:nd()}}class ju{constructor(t){this.isMounted=!1,this.node=t}update(){}}class qbe extends ju{constructor(t){super(t),t.animationState||(t.animationState=Hbe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();uk(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Xbe=0;class Ybe extends ju{constructor(){super(...arguments),this.id=Xbe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Qbe={animation:{Feature:qbe},exit:{Feature:Ybe}};function ly(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function S_(e){return{point:{x:e.pageX,y:e.pageY}}}const Zbe=e=>t=>f$(t)&&e(t,S_(t));function yv(e,t,r,n){return ly(e,t,Zbe(r),n)}function OQ({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Jbe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ewe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const $Q=1e-4,twe=1-$Q,rwe=1+$Q,NQ=.01,nwe=0-NQ,iwe=0+NQ;function bs(e){return e.max-e.min}function swe(e,t,r){return Math.abs(e-t)<=r}function Gz(e,t,r,n=.5){e.origin=n,e.originPoint=$n(t.min,t.max,e.origin),e.scale=bs(r)/bs(t),e.translate=$n(r.min,r.max,e.origin)-e.originPoint,(e.scale>=twe&&e.scale<=rwe||isNaN(e.scale))&&(e.scale=1),(e.translate>=nwe&&e.translate<=iwe||isNaN(e.translate))&&(e.translate=0)}function _v(e,t,r,n){Gz(e.x,t.x,r.x,n?n.originX:void 0),Gz(e.y,t.y,r.y,n?n.originY:void 0)}function Hz(e,t,r){e.min=r.min+t.min,e.max=e.min+bs(t)}function awe(e,t,r){Hz(e.x,t.x,r.x),Hz(e.y,t.y,r.y)}function Kz(e,t,r){e.min=t.min-r.min,e.max=e.min+bs(t)}function xv(e,t,r){Kz(e.x,t.x,r.x),Kz(e.y,t.y,r.y)}const qz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ch=()=>({x:qz(),y:qz()}),Xz=()=>({min:0,max:0}),Xn=()=>({x:Xz(),y:Xz()});function Sa(e){return[e("x"),e("y")]}function LS(e){return e===void 0||e===1}function gC({scale:e,scaleX:t,scaleY:r}){return!LS(e)||!LS(t)||!LS(r)}function pd(e){return gC(e)||IQ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function IQ(e){return Yz(e.x)||Yz(e.y)}function Yz(e){return e&&e!=="0%"}function iw(e,t,r){const n=e-r,i=t*n;return r+i}function Qz(e,t,r,n,i){return i!==void 0&&(e=iw(e,i,n)),iw(e,r,n)+t}function vC(e,t=0,r=1,n,i){e.min=Qz(e.min,t,r,n,i),e.max=Qz(e.max,t,r,n,i)}function DQ(e,{x:t,y:r}){vC(e.x,t.translate,t.scale,t.originPoint),vC(e.y,r.translate,r.scale,r.originPoint)}const Zz=.999999999999,Jz=1.0000000000001;function owe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=r[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Oh(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,DQ(e,a)),n&&pd(s.latestValues)&&Oh(e,s.latestValues))}t.x<Jz&&t.x>Zz&&(t.x=1),t.y<Jz&&t.y>Zz&&(t.y=1)}function Ah(e,t){e.min=e.min+t,e.max=e.max+t}function eV(e,t,r,n,i=.5){const s=$n(e.min,e.max,i);vC(e,t,r,s,n)}function Oh(e,t){eV(e.x,t.x,t.scaleX,t.scale,t.originX),eV(e.y,t.y,t.scaleY,t.scale,t.originY)}function LQ(e,t){return OQ(ewe(e.getBoundingClientRect(),t))}function lwe(e,t,r){const n=LQ(e,r),{scroll:i}=t;return i&&(Ah(n.x,i.offset.x),Ah(n.y,i.offset.y)),n}const RQ=({current:e})=>e?e.ownerDocument.defaultView:null,tV=(e,t)=>Math.abs(e-t);function cwe(e,t){const r=tV(e.x,t.x),n=tV(e.y,t.y);return Math.sqrt(r**2+n**2)}class FQ{constructor(t,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=FS(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=cwe(d.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=d,{timestamp:g}=Ri;this.history.push({...m,timestamp:g});const{onStart:x,onMove:y}=this.handlers;h||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=RS(h,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=FS(d.type==="pointercancel"?this.lastMoveEventInfo:RS(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,x),m&&m(d,x)},!f$(t))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const a=S_(t),o=RS(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Ri;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=r;f&&f(t,FS(o,this.history)),this.removeListeners=M_(yv(this.contextWindow,"pointermove",this.handlePointerMove),yv(this.contextWindow,"pointerup",this.handlePointerUp),yv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vu(this.updatePoint)}}function RS(e,t){return t?{point:t(e.point)}:e}function rV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function FS({point:e},t){return{point:e,delta:rV(e,BQ(t)),offset:rV(e,uwe(t)),velocity:dwe(t,.1)}}function uwe(e){return e[0]}function BQ(e){return e[e.length-1]}function dwe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=BQ(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>Rl(t)));)r--;if(!n)return{x:0,y:0};const s=Fl(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function fwe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?$n(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?$n(r,e,n.max):Math.min(e,r)),e}function nV(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function hwe(e,{top:t,left:r,bottom:n,right:i}){return{x:nV(e.x,r,i),y:nV(e.y,t,n)}}function iV(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function pwe(e,t){return{x:iV(e.x,t.x),y:iV(e.y,t.y)}}function mwe(e,t){let r=.5;const n=bs(e),i=bs(t);return i>n?r=Tp(t.min,t.max-n,e.min):n>i&&(r=Tp(e.min,e.max-i,t.min)),Zl(0,1,r)}function gwe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const yC=.35;function vwe(e=yC){return e===!1?e=0:e===!0&&(e=yC),{x:sV(e,"left","right"),y:sV(e,"top","bottom")}}function sV(e,t,r){return{min:aV(e,t),max:aV(e,r)}}function aV(e,t){return typeof e=="number"?e:e[t]||0}const ywe=new WeakMap;class _we{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xn(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(S_(f).point)},s=(f,d)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=p0e(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sa(x=>{let y=this.getAxisMotionValue(x).get()||0;if(nl.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[x];_&&(y=bs(_)*(parseFloat(y)/100))}}this.originPoint[x]=y}),m&&un.postRender(()=>m(f,d)),sC(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:x}=d;if(p&&this.currentDirection===null){this.currentDirection=xwe(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),g&&g(f,d)},o=(f,d)=>this.stop(f,d),l=()=>Sa(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new FQ(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:RQ(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&un.postRender(()=>s(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!ox(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=fwe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;r&&Eh(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=hwe(i.layoutBox,r):this.constraints=!1,this.elastic=vwe(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Sa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=gwe(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Eh(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=lwe(n,i.root,this.visualElement.getTransformPagePoint());let a=pwe(i.layout.layoutBox,s);if(r){const o=r(Jbe(a));this.hasMutatedConstraints=!!o,o&&(a=OQ(o))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Sa(f=>{if(!ox(f,r,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:n?t[f]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,m)});return Promise.all(c).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return sC(this.visualElement,t),n.start($$(t,n,0,r,this.visualElement,!1))}stopAnimation(){Sa(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Sa(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Sa(r=>{const{drag:n}=this.getProps();if(!ox(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[r];s.set(t[r]-$n(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Eh(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=mwe({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Sa(a=>{if(!ox(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set($n(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;ywe.set(this.visualElement,this);const t=this.visualElement.current,r=yv(t,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Eh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),un.read(n);const a=ly(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Sa(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),r(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=yC,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function ox(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function xwe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class bwe extends ju{constructor(t){super(t),this.removeGroupControls=da,this.removeListeners=da,this.controls=new _we(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||da}unmount(){this.removeGroupControls(),this.removeListeners()}}const oV=e=>(t,r)=>{e&&un.postRender(()=>e(t,r))};class wwe extends ju{constructor(){super(...arguments),this.removePointerDownListener=da}onPointerDown(t){this.session=new FQ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RQ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:oV(t),onStart:oV(r),onMove:n,onEnd:(s,a)=>{delete this.session,i&&un.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=yv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ab={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Vt.test(e))e=parseFloat(e);else return e;const r=lV(e,t.target.x),n=lV(e,t.target.y);return`${r}% ${n}%`}},kwe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=yu.parse(e);if(i.length>5)return n;const s=yu.createTransformer(e),a=typeof i[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=$n(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class Twe extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=t;z0e(Mwe),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ab.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==r||r===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||un.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),d$.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function zQ(e){const[t,r]=i0e(),n=E.useContext(kY);return u.jsx(Twe,{...e,layoutGroup:n,switchLayoutGroup:E.useContext(RY),isPresent:t,safeToRemove:r})}const Mwe={borderRadius:{...xg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xg,borderTopRightRadius:xg,borderBottomLeftRadius:xg,borderBottomRightRadius:xg,boxShadow:kwe};function Swe(e,t,r){const n=as(e)?e:ry(e);return n.start($$("",n,t,r)),n.animation}function Pwe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Ewe=(e,t)=>e.depth-t.depth;class jwe{constructor(){this.children=[],this.isDirty=!1}add(t){i$(this.children,t),this.isDirty=!0}remove(t){s$(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ewe),this.isDirty=!1,this.children.forEach(t)}}function Cwe(e,t){const r=rl.now(),n=({timestamp:i})=>{const s=i-r;s>=t&&(vu(n),e(s-t))};return un.read(n,!0),()=>vu(n)}const VQ=["TopLeft","TopRight","BottomLeft","BottomRight"],Awe=VQ.length,cV=e=>typeof e=="string"?parseFloat(e):e,uV=e=>typeof e=="number"||Vt.test(e);function Owe(e,t,r,n,i,s){i?(e.opacity=$n(0,r.opacity!==void 0?r.opacity:1,$we(n)),e.opacityExit=$n(t.opacity!==void 0?t.opacity:1,0,Nwe(n))):s&&(e.opacity=$n(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<Awe;a++){const o=`border${VQ[a]}Radius`;let l=dV(t,o),c=dV(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||uV(l)===uV(c)?(e[o]=Math.max($n(cV(l),cV(c),n),0),(nl.test(c)||nl.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=$n(t.rotate||0,r.rotate||0,n))}function dV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const $we=UQ(0,.5,sQ),Nwe=UQ(.5,.95,da);function UQ(e,t,r){return n=>n<e?0:n>t?1:r(Tp(e,t,n))}function fV(e,t){e.min=t.min,e.max=t.max}function wa(e,t){fV(e.x,t.x),fV(e.y,t.y)}function hV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pV(e,t,r,n,i){return e-=t,e=iw(e,1/r,n),i!==void 0&&(e=iw(e,1/i,n)),e}function Iwe(e,t=0,r=1,n=.5,i,s=e,a=e){if(nl.test(t)&&(t=parseFloat(t),t=$n(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=$n(s.min,s.max,n);e===s&&(o-=t),e.min=pV(e.min,t,r,o,i),e.max=pV(e.max,t,r,o,i)}function mV(e,t,[r,n,i],s,a){Iwe(e,t[r],t[n],t[i],t.scale,s,a)}const Dwe=["x","scaleX","originX"],Lwe=["y","scaleY","originY"];function gV(e,t,r,n){mV(e.x,t,Dwe,r?r.x:void 0,n?n.x:void 0),mV(e.y,t,Lwe,r?r.y:void 0,n?n.y:void 0)}function vV(e){return e.translate===0&&e.scale===1}function WQ(e){return vV(e.x)&&vV(e.y)}function yV(e,t){return e.min===t.min&&e.max===t.max}function Rwe(e,t){return yV(e.x,t.x)&&yV(e.y,t.y)}function _V(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function GQ(e,t){return _V(e.x,t.x)&&_V(e.y,t.y)}function xV(e){return bs(e.x)/bs(e.y)}function bV(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Fwe{constructor(){this.members=[]}add(t){i$(this.members,t),t.scheduleRender()}remove(t){if(s$(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bwe(e,t,r){let n="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(r==null?void 0:r.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:h,skewX:p,skewY:m}=r;c&&(n=`perspective(${c}px) ${n}`),f&&(n+=`rotate(${f}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),p&&(n+=`skewX(${p}deg) `),m&&(n+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const BS=["","X","Y","Z"],zwe={visibility:"hidden"},wV=1e3;let Vwe=0;function zS(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function HQ(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=ZY(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",un,!(i||s))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&HQ(n)}function KQ({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Vwe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gwe),this.nodes.forEach(Ywe),this.nodes.forEach(Qwe),this.nodes.forEach(Hwe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jwe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new o$),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Pwe(a),this.instance=a;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Cwe(h,250),ab.hasAnimatedSinceResize&&(ab.hasAnimatedSinceResize=!1,this.nodes.forEach(TV))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||f.getDefaultTransition()||r1e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=f.getProps(),v=!this.targetLayout||!GQ(this.targetLayout,m),_=!h&&p;if(this.options.layoutRoot||this.resumeFrom||_||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const b={...l$(g,"layout"),onPlay:x,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||TV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zwe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HQ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kV);return}this.isUpdating||this.nodes.forEach(qwe),this.isUpdating=!1,this.nodes.forEach(Xwe),this.nodes.forEach(Uwe),this.nodes.forEach(Wwe),this.clearAllSnapshots();const o=rl.now();Ri.delta=Zl(0,1e3/60,o-Ri.timestamp),Ri.timestamp=o,Ri.isProcessing=!0,AS.update.process(Ri),AS.preRender.process(Ri),AS.render.process(Ri),Ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,d$.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Kwe),this.sharedNodes.forEach(Jwe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bs(this.snapshot.measuredBox.x)&&!bs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!WQ(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;a&&(o||pd(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),n1e(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Xn();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(i1e))){const{scroll:f}=this.root;f&&(Ah(l.x,f.offset.x),Ah(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=Xn();if(wa(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:h}=f;f!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&wa(l,a),Ah(l.x,d.offset.x),Ah(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Xn();wa(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Oh(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),pd(f.latestValues)&&Oh(l,f.latestValues)}return pd(this.latestValues)&&Oh(l,this.latestValues),l}removeTransform(a){const o=Xn();wa(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!pd(c.latestValues))continue;gC(c.latestValues)&&c.updateSnapshot();const f=Xn(),d=c.measurePageBox();wa(f,d),gV(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return pd(this.latestValues)&&gV(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Ri.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),xv(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),wa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xn(),this.targetWithTransforms=Xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),awe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wa(this.target,this.layout.layoutBox),DQ(this.target,this.targetDelta)):wa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),xv(this.relativeTargetOrigin,this.target,p.target),wa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gC(this.parent.latestValues)||IQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ri.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;wa(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;owe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Xn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hV(this.prevProjectionDelta.x,this.projectionDelta.x),hV(this.prevProjectionDelta.y,this.projectionDelta.y)),_v(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!bV(this.projectionDelta.x,this.prevProjectionDelta.x)||!bV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ch(),this.projectionDelta=Ch(),this.projectionDeltaWithTransform=Ch()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},d=Ch();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Xn(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,x=this.getStack(),y=!x||x.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(t1e));this.animationProgress=0;let _;this.mixTargetDelta=b=>{const w=b/1e3;MV(d.x,a.x,w),MV(d.y,a.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xv(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),e1e(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&Rwe(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Xn()),wa(_,this.relativeTarget)),g&&(this.animationValues=f,Owe(f,c,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{ab.hasAnimatedSinceResize=!0,this.currentAnimation=Swe(0,wV,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:f}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&qQ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Xn();const d=bs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=bs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}wa(o,l),Oh(o,f),_v(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Fwe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&zS("z",a,c,this.animationValues);for(let f=0;f<BS.length;f++)zS(`rotate${BS[f]}`,a,c,this.animationValues),zS(`skew${BS[f]}`,a,c,this.animationValues);a.render();for(const f in c)a.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zwe;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=sb(a==null?void 0:a.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=sb(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!pd(this.latestValues)&&(g.transform=f?f({},""):"none",this.hasProjected=!1),g}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=Bwe(this.projectionDeltaWithTransform,this.treeScale,h),f&&(c.transform=f(h,c.transform));const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in iy){if(h[g]===void 0)continue;const{correct:x,applyTo:y,isCSSVariable:v}=iy[g],_=c.transform==="none"?h[g]:x(h[g],d);if(y){const b=y.length;for(let w=0;w<b;w++)c[y[w]]=_}else v?this.options.visualElement.renderState.vars[g]=_:c[g]=_}return this.options.layoutId&&(c.pointerEvents=d===this?sb(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(kV),this.root.sharedNodes.clear()}}}function Uwe(e){e.updateLayout()}function Wwe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,a=r.source!==e.layout.source;s==="size"?Sa(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],p=bs(h);h.min=n[d].min,h.max=h.min+p}):qQ(s,r.layoutBox,n)&&Sa(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],p=bs(n[d]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const o=Ch();_v(o,n,r.layoutBox);const l=Ch();a?_v(l,e.applyTransform(i,!0),r.measuredBox):_v(l,n,r.layoutBox);const c=!WQ(o);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const m=Xn();xv(m,r.layoutBox,h.layoutBox);const g=Xn();xv(g,n,p.layoutBox),GQ(m,g)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Gwe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Hwe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Kwe(e){e.clearSnapshot()}function kV(e){e.clearMeasurements()}function qwe(e){e.isLayoutDirty=!1}function Xwe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function TV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ywe(e){e.resolveTargetDelta()}function Qwe(e){e.calcProjection()}function Zwe(e){e.resetSkewAndRotation()}function Jwe(e){e.removeLeadSnapshot()}function MV(e,t,r){e.translate=$n(t.translate,0,r),e.scale=$n(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function SV(e,t,r,n){e.min=$n(t.min,r.min,n),e.max=$n(t.max,r.max,n)}function e1e(e,t,r,n){SV(e.x,t.x,r.x,n),SV(e.y,t.y,r.y,n)}function t1e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const r1e={duration:.45,ease:[.4,0,.1,1]},PV=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),EV=PV("applewebkit/")&&!PV("chrome/")?Math.round:da;function jV(e){e.min=EV(e.min),e.max=EV(e.max)}function n1e(e){jV(e.x),jV(e.y)}function qQ(e,t,r){return e==="position"||e==="preserve-aspect"&&!swe(xV(t),xV(r),.2)}function i1e(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const s1e=KQ({attachResizeListener:(e,t)=>ly(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),VS={current:void 0},XQ=KQ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!VS.current){const e=new s1e({});e.mount(window),e.setOptions({layoutScroll:!0}),VS.current=e}return VS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),a1e={pan:{Feature:wwe},drag:{Feature:bwe,ProjectionNode:XQ,MeasureLayout:zQ}};function CV(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,s=n[i];s&&un.postRender(()=>s(t,S_(t)))}class o1e extends ju{mount(){const{current:t}=this.node;t&&(this.unmount=g0e(t,(r,n)=>(CV(this.node,n,"Start"),i=>CV(this.node,i,"End"))))}unmount(){}}class l1e extends ju{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=M_(ly(this.node.current,"focus",()=>this.onFocus()),ly(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AV(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),s=n[i];s&&un.postRender(()=>s(t,S_(t)))}class c1e extends ju{mount(){const{current:t}=this.node;t&&(this.unmount=x0e(t,(r,n)=>(AV(this.node,n,"Start"),(i,{success:s})=>AV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _C=new WeakMap,US=new WeakMap,u1e=e=>{const t=_C.get(e.target);t&&t(e)},d1e=e=>{e.forEach(u1e)};function f1e({root:e,...t}){const r=e||document;US.has(r)||US.set(r,{});const n=US.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(d1e,{root:e,...t})),n[i]}function h1e(e,t,r){const n=f1e(t);return _C.set(e,r),n.observe(e),()=>{_C.delete(e),n.unobserve(e)}}const p1e={some:0,all:1};class m1e extends ju{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:p1e[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=c?f:d;h&&h(l)};return h1e(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(g1e(t,r))&&this.startObserver()}unmount(){}}function g1e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const v1e={inView:{Feature:m1e},tap:{Feature:c1e},focus:{Feature:l1e},hover:{Feature:o1e}},y1e={layout:{ProjectionNode:XQ,MeasureLayout:zQ}},xC={current:null},YQ={current:!1};function _1e(){if(YQ.current=!0,!!r$)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>xC.current=e.matches;e.addListener(t),t()}else xC.current=!1}const x1e=[...xQ,Ji,yu],b1e=e=>x1e.find(_Q(e)),w1e=new WeakMap;function k1e(e,t,r){for(const n in t){const i=t[n],s=r[n];if(as(i))e.addValue(n,i);else if(as(s))e.addValue(n,ry(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){const a=e.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(n);e.addValue(n,ry(a!==void 0?a:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const OV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class T1e{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=C$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=rl.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,un.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=dk(r),this.isVariantNode=DY(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in h){const m=h[p];l[p]!==void 0&&as(m)&&m.set(l[p],!1)}}mount(t){this.current=t,w1e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),YQ.current||_1e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vu(this.notifyUpdate),vu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=_f.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&un.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Mp){const r=Mp[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<OV.length;n++){const i=OV[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=k1e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ry(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(vQ(i)||oQ(i))?i=parseFloat(i):!b1e(i)&&yu.test(r)&&(i=pQ(t,r)),this.setBaseTarget(t,as(i)?i.get():i)),as(i)?i.get():i}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=T$(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);a&&(i=a[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!as(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new o$),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class QQ extends T1e{constructor(){super(...arguments),this.KeyframeResolver=bQ}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;as(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function M1e(e){return window.getComputedStyle(e)}class S1e extends QQ{constructor(){super(...arguments),this.type="html",this.renderInstance=KY}readValueFromInstance(t,r){if(_f.has(r))return Rxe(t,r);{const n=M1e(t),i=(g$(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return LQ(t,r)}build(t,r,n){_$(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return M$(t,r,n)}}class P1e extends QQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&HY(this.current,this.renderState)}}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(_f.has(r)){const n=hQ(r);return n&&n.default||0}return r=qY.has(r)?r:m$(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return YY(t,r,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&un.postRender(this.updateDimensions)}build(t,r,n){w$(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,i){XY(t,r,n,i)}mount(t){this.isSVGTag=k$(t.tagName),super.mount(t)}}const E1e=(e,t)=>b$(e)?new P1e(t):new S1e(t,{allowProjection:e!==E.Fragment}),j1e=dxe({...Qbe,...v1e,...a1e,...y1e},E1e),mt=P0e(j1e);var C1e=E.createContext(void 0);function hk(e){const t=E.useContext(C1e);return e||t||"ltr"}function N$(e){const t=E.useRef({value:e,previous:e});return E.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ym="NavigationMenu",[I$,ZQ,A1e]=m_(ym),[bC,O1e,$1e]=m_(ym),[D$,mXe]=vf(ym,[A1e,$1e]),[N1e,Wa]=D$(ym),[I1e,D1e]=D$(ym),JQ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:i,defaultValue:s,delayDuration:a=200,skipDelayDuration:o=300,orientation:l="horizontal",dir:c,...f}=e,[d,h]=E.useState(null),p=Nr(t,j=>h(j)),m=hk(c),g=E.useRef(0),x=E.useRef(0),y=E.useRef(0),[v,_]=E.useState(!0),[b="",w]=ql({prop:n,onChange:j=>{const C=j!=="",R=o>0;C?(window.clearTimeout(y.current),R&&_(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>_(!0),o)),i==null||i(j)},defaultProp:s}),k=E.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>w(""),150)},[w]),T=E.useCallback(j=>{window.clearTimeout(x.current),w(j)},[w]),M=E.useCallback(j=>{b===j?window.clearTimeout(x.current):g.current=window.setTimeout(()=>{window.clearTimeout(x.current),w(j)},a)},[b,w,a]);return E.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(x.current),window.clearTimeout(y.current)},[]),u.jsx(tZ,{scope:r,isRootMenu:!0,value:b,dir:m,orientation:l,rootNavigationMenu:d,onTriggerEnter:j=>{window.clearTimeout(g.current),v?M(j):T(j)},onTriggerLeave:()=>{window.clearTimeout(g.current),k()},onContentEnter:()=>window.clearTimeout(x.current),onContentLeave:k,onItemSelect:j=>{w(C=>C===j?"":j)},onItemDismiss:()=>w(""),children:u.jsx(Ft.nav,{"aria-label":"Main","data-orientation":l,dir:m,...f,ref:p})})});JQ.displayName=ym;var eZ="NavigationMenuSub",L1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",...o}=e,l=Wa(eZ,r),[c="",f]=ql({prop:n,onChange:i,defaultProp:s});return u.jsx(tZ,{scope:r,isRootMenu:!1,value:c,dir:l.dir,orientation:a,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:d=>f(d),onItemSelect:d=>f(d),onItemDismiss:()=>f(""),children:u.jsx(Ft.div,{"data-orientation":a,...o,ref:t})})});L1e.displayName=eZ;var tZ=e=>{const{scope:t,isRootMenu:r,rootNavigationMenu:n,dir:i,orientation:s,children:a,value:o,onItemSelect:l,onItemDismiss:c,onTriggerEnter:f,onTriggerLeave:d,onContentEnter:h,onContentLeave:p}=e,[m,g]=E.useState(null),[x,y]=E.useState(new Map),[v,_]=E.useState(null);return u.jsx(N1e,{scope:t,isRootMenu:r,rootNavigationMenu:n,value:o,previousValue:N$(o),baseId:tl(),dir:i,orientation:s,viewport:m,onViewportChange:g,indicatorTrack:v,onIndicatorTrackChange:_,onTriggerEnter:Qn(f),onTriggerLeave:Qn(d),onContentEnter:Qn(h),onContentLeave:Qn(p),onItemSelect:Qn(l),onItemDismiss:Qn(c),onViewportContentChange:E.useCallback((b,w)=>{y(k=>(k.set(b,w),new Map(k)))},[]),onViewportContentRemove:E.useCallback(b=>{y(w=>w.has(b)?(w.delete(b),new Map(w)):w)},[]),children:u.jsx(I$.Provider,{scope:t,children:u.jsx(I1e,{scope:t,items:x,children:a})})})},rZ="NavigationMenuList",nZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=Wa(rZ,r),s=u.jsx(Ft.ul,{"data-orientation":i.orientation,...n,ref:t});return u.jsx(Ft.div,{style:{position:"relative"},ref:i.onIndicatorTrackChange,children:u.jsx(I$.Slot,{scope:r,children:i.isRootMenu?u.jsx(hZ,{asChild:!0,children:s}):s})})});nZ.displayName=rZ;var iZ="NavigationMenuItem",[R1e,sZ]=D$(iZ),aZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,...i}=e,s=tl(),a=n||s||"LEGACY_REACT_AUTO_VALUE",o=E.useRef(null),l=E.useRef(null),c=E.useRef(null),f=E.useRef(()=>{}),d=E.useRef(!1),h=E.useCallback((m="start")=>{if(o.current){f.current();const g=kC(o.current);g.length&&F$(m==="start"?g:g.reverse())}},[]),p=E.useCallback(()=>{if(o.current){const m=kC(o.current);m.length&&(f.current=G1e(m))}},[]);return u.jsx(R1e,{scope:r,value:a,triggerRef:l,contentRef:o,focusProxyRef:c,wasEscapeCloseRef:d,onEntryKeyDown:h,onFocusProxyEnter:h,onRootContentClose:p,onContentFocusOutside:p,children:u.jsx(Ft.li,{...i,ref:t})})});aZ.displayName=iZ;var wC="NavigationMenuTrigger",oZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,disabled:n,...i}=e,s=Wa(wC,e.__scopeNavigationMenu),a=sZ(wC,e.__scopeNavigationMenu),o=E.useRef(null),l=Nr(o,a.triggerRef,t),c=mZ(s.baseId,a.value),f=gZ(s.baseId,a.value),d=E.useRef(!1),h=E.useRef(!1),p=a.value===s.value;return u.jsxs(u.Fragment,{children:[u.jsx(I$.ItemSlot,{scope:r,value:a.value,children:u.jsx(pZ,{asChild:!0,children:u.jsx(Ft.button,{id:c,disabled:n,"data-disabled":n?"":void 0,"data-state":B$(p),"aria-expanded":p,"aria-controls":f,...i,ref:l,onPointerEnter:xt(e.onPointerEnter,()=>{h.current=!1,a.wasEscapeCloseRef.current=!1}),onPointerMove:xt(e.onPointerMove,sw(()=>{n||h.current||a.wasEscapeCloseRef.current||d.current||(s.onTriggerEnter(a.value),d.current=!0)})),onPointerLeave:xt(e.onPointerLeave,sw(()=>{n||(s.onTriggerLeave(),d.current=!1)})),onClick:xt(e.onClick,()=>{s.onItemSelect(a.value),h.current=p}),onKeyDown:xt(e.onKeyDown,m=>{const x={horizontal:"ArrowDown",vertical:s.dir==="rtl"?"ArrowLeft":"ArrowRight"}[s.orientation];p&&m.key===x&&(a.onEntryKeyDown(),m.preventDefault())})})})}),p&&u.jsxs(u.Fragment,{children:[u.jsx(kq,{"aria-hidden":!0,tabIndex:0,ref:a.focusProxyRef,onFocus:m=>{const g=a.contentRef.current,x=m.relatedTarget,y=x===o.current,v=g==null?void 0:g.contains(x);(y||!v)&&a.onFocusProxyEnter(y?"start":"end")}}),s.viewport&&u.jsx("span",{"aria-owns":f})]})]})});oZ.displayName=wC;var F1e="NavigationMenuLink",$V="navigationMenu.linkSelect",lZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,active:n,onSelect:i,...s}=e;return u.jsx(pZ,{asChild:!0,children:u.jsx(Ft.a,{"data-active":n?"":void 0,"aria-current":n?"page":void 0,...s,ref:t,onClick:xt(e.onClick,a=>{const o=a.target,l=new CustomEvent($V,{bubbles:!0,cancelable:!0});if(o.addEventListener($V,c=>i==null?void 0:i(c),{once:!0}),Bb(o,l),!l.defaultPrevented&&!a.metaKey){const c=new CustomEvent(ob,{bubbles:!0,cancelable:!0});Bb(o,c)}},{checkForDefaultPrevented:!1})})})});lZ.displayName=F1e;var L$="NavigationMenuIndicator",cZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Wa(L$,e.__scopeNavigationMenu),s=!!i.value;return i.indicatorTrack?TO.createPortal(u.jsx(Ua,{present:r||s,children:u.jsx(B1e,{...n,ref:t})}),i.indicatorTrack):null});cZ.displayName=L$;var B1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=Wa(L$,r),s=ZQ(r),[a,o]=E.useState(null),[l,c]=E.useState(null),f=i.orientation==="horizontal",d=!!i.value;E.useEffect(()=>{var g;const m=(g=s().find(x=>x.value===i.value))==null?void 0:g.ref.current;m&&o(m)},[s,i.value]);const h=()=>{a&&c({size:f?a.offsetWidth:a.offsetHeight,offset:f?a.offsetLeft:a.offsetTop})};return TC(a,h),TC(i.indicatorTrack,h),l?u.jsx(Ft.div,{"aria-hidden":!0,"data-state":d?"visible":"hidden","data-orientation":i.orientation,...n,ref:t,style:{position:"absolute",...f?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...n.style}}):null}),Pp="NavigationMenuContent",uZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Wa(Pp,e.__scopeNavigationMenu),s=sZ(Pp,e.__scopeNavigationMenu),a=Nr(s.contentRef,t),o=s.value===i.value,l={value:s.value,triggerRef:s.triggerRef,focusProxyRef:s.focusProxyRef,wasEscapeCloseRef:s.wasEscapeCloseRef,onContentFocusOutside:s.onContentFocusOutside,onRootContentClose:s.onRootContentClose,...n};return i.viewport?u.jsx(z1e,{forceMount:r,...l,ref:a}):u.jsx(Ua,{present:r||o,children:u.jsx(dZ,{"data-state":B$(o),...l,ref:a,onPointerEnter:xt(e.onPointerEnter,i.onContentEnter),onPointerLeave:xt(e.onPointerLeave,sw(i.onContentLeave)),style:{pointerEvents:!o&&i.isRootMenu?"none":void 0,...l.style}})})});uZ.displayName=Pp;var z1e=E.forwardRef((e,t)=>{const r=Wa(Pp,e.__scopeNavigationMenu),{onViewportContentChange:n,onViewportContentRemove:i}=r;return ki(()=>{n(e.value,{ref:t,...e})},[e,t,n]),ki(()=>()=>i(e.value),[e.value,i]),null}),ob="navigationMenu.rootContentDismiss",dZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:n,triggerRef:i,focusProxyRef:s,wasEscapeCloseRef:a,onRootContentClose:o,onContentFocusOutside:l,...c}=e,f=Wa(Pp,r),d=E.useRef(null),h=Nr(d,t),p=mZ(f.baseId,n),m=gZ(f.baseId,n),g=ZQ(r),x=E.useRef(null),{onItemDismiss:y}=f;E.useEffect(()=>{const _=d.current;if(f.isRootMenu&&_){const b=()=>{var w;y(),o(),_.contains(document.activeElement)&&((w=i.current)==null||w.focus())};return _.addEventListener(ob,b),()=>_.removeEventListener(ob,b)}},[f.isRootMenu,e.value,i,y,o]);const v=E.useMemo(()=>{const b=g().map(C=>C.value);f.dir==="rtl"&&b.reverse();const w=b.indexOf(f.value),k=b.indexOf(f.previousValue),T=n===f.value,M=k===b.indexOf(n);if(!T&&!M)return x.current;const j=(()=>{if(w!==k){if(T&&k!==-1)return w>k?"from-end":"from-start";if(M&&w!==-1)return w>k?"to-start":"to-end"}return null})();return x.current=j,j},[f.previousValue,f.value,f.dir,g,n]);return u.jsx(hZ,{asChild:!0,children:u.jsx(am,{id:m,"aria-labelledby":p,"data-motion":v,"data-orientation":f.orientation,...c,ref:h,disableOutsidePointerEvents:!1,onDismiss:()=>{var b;const _=new Event(ob,{bubbles:!0,cancelable:!0});(b=d.current)==null||b.dispatchEvent(_)},onFocusOutside:xt(e.onFocusOutside,_=>{var w;l();const b=_.target;(w=f.rootNavigationMenu)!=null&&w.contains(b)&&_.preventDefault()}),onPointerDownOutside:xt(e.onPointerDownOutside,_=>{var T;const b=_.target,w=g().some(M=>{var j;return(j=M.ref.current)==null?void 0:j.contains(b)}),k=f.isRootMenu&&((T=f.viewport)==null?void 0:T.contains(b));(w||k||!f.isRootMenu)&&_.preventDefault()}),onKeyDown:xt(e.onKeyDown,_=>{var k;const b=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!b){const T=kC(_.currentTarget),M=document.activeElement,j=T.findIndex(I=>I===M),R=_.shiftKey?T.slice(0,j).reverse():T.slice(j+1,T.length);F$(R)?_.preventDefault():(k=s.current)==null||k.focus()}}),onEscapeKeyDown:xt(e.onEscapeKeyDown,_=>{a.current=!0})})})}),R$="NavigationMenuViewport",fZ=E.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=!!Wa(R$,e.__scopeNavigationMenu).value;return u.jsx(Ua,{present:r||s,children:u.jsx(V1e,{...n,ref:t})})});fZ.displayName=R$;var V1e=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,children:n,...i}=e,s=Wa(R$,r),a=Nr(t,s.onViewportChange),o=D1e(Pp,e.__scopeNavigationMenu),[l,c]=E.useState(null),[f,d]=E.useState(null),h=l?(l==null?void 0:l.width)+"px":void 0,p=l?(l==null?void 0:l.height)+"px":void 0,m=!!s.value,g=m?s.value:s.previousValue;return TC(f,()=>{f&&c({width:f.offsetWidth,height:f.offsetHeight})}),u.jsx(Ft.div,{"data-state":B$(m),"data-orientation":s.orientation,...i,ref:a,style:{pointerEvents:!m&&s.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":h,"--radix-navigation-menu-viewport-height":p,...i.style},onPointerEnter:xt(e.onPointerEnter,s.onContentEnter),onPointerLeave:xt(e.onPointerLeave,sw(s.onContentLeave)),children:Array.from(o.items).map(([y,{ref:v,forceMount:_,...b}])=>{const w=g===y;return u.jsx(Ua,{present:_||w,children:u.jsx(dZ,{...b,ref:SO(v,k=>{w&&k&&d(k)})})},y)})})}),U1e="FocusGroup",hZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=Wa(U1e,r);return u.jsx(bC.Provider,{scope:r,children:u.jsx(bC.Slot,{scope:r,children:u.jsx(Ft.div,{dir:i.dir,...n,ref:t})})})}),NV=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],W1e="FocusGroupItem",pZ=E.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...n}=e,i=O1e(r),s=Wa(W1e,r);return u.jsx(bC.ItemSlot,{scope:r,children:u.jsx(Ft.button,{...n,ref:t,onKeyDown:xt(e.onKeyDown,a=>{if(["Home","End",...NV].includes(a.key)){let l=i().map(d=>d.ref.current);if([s.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(a.key)&&l.reverse(),NV.includes(a.key)){const d=l.indexOf(a.currentTarget);l=l.slice(d+1)}setTimeout(()=>F$(l)),a.preventDefault()}})})})});function kC(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function F$(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}function G1e(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{const r=t.dataset.tabindex;t.setAttribute("tabindex",r)})}}function TC(e,t){const r=Qn(t);ki(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}function B$(e){return e?"open":"closed"}function mZ(e,t){return`${e}-trigger-${t}`}function gZ(e,t){return`${e}-content-${t}`}function sw(e){return t=>t.pointerType==="mouse"?e(t):void 0}var vZ=JQ,yZ=nZ,H1e=aZ,_Z=oZ,K1e=lZ,xZ=cZ,bZ=uZ,wZ=fZ;const kZ=E.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(vZ,{ref:n,className:St("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...r,children:[t,u.jsx(PZ,{})]}));kZ.displayName=vZ.displayName;const TZ=E.forwardRef(({className:e,...t},r)=>u.jsx(yZ,{ref:r,className:St("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));TZ.displayName=yZ.displayName;const Xf=H1e,Yg=v_("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),MZ=E.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(_Z,{ref:n,className:St(Yg(),"group",e),...r,children:[t," ",u.jsx(Jd,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));MZ.displayName=_Z.displayName;const SZ=E.forwardRef(({className:e,...t},r)=>u.jsx(bZ,{ref:r,className:St("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",e),...t}));SZ.displayName=bZ.displayName;const lx=K1e,PZ=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{className:St("absolute left-0 top-full flex justify-center"),children:u.jsx(wZ,{className:St("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:r,...t})}));PZ.displayName=wZ.displayName;const q1e=E.forwardRef(({className:e,...t},r)=>u.jsx(xZ,{ref:r,className:St("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:u.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));q1e.displayName=xZ.displayName;const X1e=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(null),[i,s]=E.useState(null),a=E.useCallback(async l=>{t(!0),s(null);try{const c=new Image;return c.crossOrigin="anonymous",new Promise((f,d)=>{c.onload=()=>{try{const h=document.createElement("canvas"),p=h.getContext("2d");if(!p)throw new Error("Could not get canvas context");h.width=c.width,h.height=c.height,p.drawImage(c,0,0);const m=p.getImageData(0,0,h.width,h.height),g=m.data;for(let x=0;x<g.length;x+=4){const y=g[x],v=g[x+1],_=g[x+2],b=Math.abs(y-v)<30&&Math.abs(v-_)<30&&Math.abs(y-_)<30,w=y>180&&v>180&&_>180,k=y<100&&v<100&&_<100,T=y>200&&v>200&&_>200;b&&(w||k)&&!T?g[x+3]=0:T&&(g[x+3]=255)}p.putImageData(m,0,0),h.toBlob(x=>{if(x){const y=URL.createObjectURL(x);n(y),t(!1),f(y)}else t(!1),d(new Error("Failed to create blob"))},"image/png")}catch(h){t(!1);const p=h instanceof Error?h.message:"Processing failed";s(p),d(h)}},c.onerror=()=>{t(!1);const h="Failed to load image";s(h),d(new Error(h))},c.src=l})}catch(c){t(!1);const f=c instanceof Error?c.message:"Unknown error occurred";return s(f),console.error("Background removal failed:",c),null}},[]),o=E.useCallback(()=>{r&&URL.revokeObjectURL(r),n(null),s(null),t(!1)},[r]);return{processImage:a,isProcessing:e,processedImageUrl:r,error:i,reset:o}},Y1e=({originalImageUrl:e,alt:t,width:r=40,height:n=40,className:i=""})=>{const{processImage:s,processedImageUrl:a,isProcessing:o,error:l}=X1e(),[c,f]=E.useState(!0);return E.useEffect(()=>{c&&e&&(s(e),f(!1))},[e,s,c]),o?u.jsx("div",{className:`flex items-center justify-center bg-muted/20 rounded ${i}`,style:{width:r,height:n},children:u.jsx("div",{className:"w-4 h-4 border-2 border-white border-r-transparent rounded-full animate-spin"})}):l?(console.error("Logo processing error:",l),u.jsx("img",{src:e,alt:t,width:r,height:n,className:i})):u.jsx("img",{src:a||e,alt:t,width:r,height:n,className:i})},EZ=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(!1),{user:i,signOut:s}=ya();E.useEffect(()=>{const o=()=>{window.scrollY>10?t(!0):t(!1)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const a=()=>{n(!r)};return u.jsxs(mt.nav,{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 w-full",initial:{opacity:1,y:0},animate:{opacity:1,y:0},children:[u.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 mx-auto",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsxs(Tn,{to:i?"/dashboard":"/",className:"flex items-center space-x-3",children:[u.jsx(Y1e,{originalImageUrl:"/lovable-uploads/296f9efc-c5a2-4029-bb1d-02f258233174.png",alt:"WiFi Logo",width:40,height:40,className:"flex-shrink-0"}),u.jsx("span",{className:"text-xl font-bold text-white",children:"OmaVerkkoturva"})]})}),u.jsx("div",{className:"hidden md:block",children:i?u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("span",{className:"text-white text-sm",children:i.email}),u.jsx("button",{onClick:s,className:"px-4 py-2 rounded-md transition-colors font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Kirjaudu ulos"})]}):u.jsx(kZ,{className:"text-white",children:u.jsxs(TZ,{children:[u.jsx(Xf,{children:u.jsx(Tn,{to:"/",children:u.jsx(lx,{className:St(Yg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Etusivu"})})}),u.jsxs(Xf,{children:[u.jsx(MZ,{className:"text-white hover:text-gray-200 bg-transparent hover:bg-white/10",children:"Tuotteet"}),u.jsx(SZ,{children:u.jsx("ul",{className:"grid gap-3 p-4 w-[300px] bg-white shadow-lg border rounded-md",children:u.jsx("li",{children:u.jsxs(Tn,{to:"/identiteettiturva",className:"block p-3 space-y-1 rounded-md hover:bg-gray-100",children:[u.jsx("div",{className:"font-medium text-gray-900",children:"Henkilsuoja"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Suojaa henkilllisyytesi verkossa"})]})})})})]}),u.jsx(Xf,{children:u.jsx(Tn,{to:"/meista",children:u.jsx(lx,{className:St(Yg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Meist"})})}),u.jsx(Xf,{children:u.jsx(Tn,{to:"/artikkelit",children:u.jsx(lx,{className:St(Yg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Artikkelit"})})}),u.jsx(Xf,{children:u.jsx(Tn,{to:"/ota-yhteytta",children:u.jsx(lx,{className:St(Yg(),"text-white hover:text-gray-200 bg-transparent hover:bg-white/10"),children:"Ota yhteytt"})})}),u.jsx(Xf,{children:u.jsx("button",{onClick:()=>window.open("https://tietosuoja.omaverkkoturva.fi/","_blank","noopener,noreferrer"),className:"px-4 py-2 rounded-md transition-colors font-medium text-white hover:bg-blue-800 border border-white/20 hover:border-white/40",style:{backgroundColor:"#1e3a8a"},children:"Kirjaudu"})})]})})}),u.jsx("div",{className:"md:hidden",children:u.jsx("button",{onClick:a,className:"focus:outline-none text-white",children:r?u.jsx(xp,{size:24}):u.jsx(vhe,{size:24})})})]})}),u.jsx("div",{className:St("md:hidden transition-all duration-300 overflow-hidden w-full",r?"max-h-80 opacity-100":"max-h-0 opacity-0"),children:u.jsx("div",{className:"px-3 pt-2 pb-3 space-y-1 shadow-sm overflow-y-auto max-h-80 bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950",children:i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-2 text-sm text-white",children:i.email}),u.jsx("button",{onClick:()=>{s(),n(!1)},className:"block w-full text-left px-3 py-1.5 rounded-md text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Kirjaudu ulos"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Tn,{to:"/",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Etusivu"}),u.jsx(Tn,{to:"/identiteettiturva",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Henkilsuoja"}),u.jsx(Tn,{to:"/meista",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Meist"}),u.jsx(Tn,{to:"/artikkelit",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Artikkelit"}),u.jsx(Tn,{to:"/ota-yhteytta",className:"block px-3 py-1.5 rounded-md text-sm text-white hover:bg-white/10",onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Ota yhteytt"}),u.jsx("a",{href:"https://tietosuoja.omaverkkoturva.fi/",target:"_blank",rel:"noopener noreferrer",className:"block px-3 py-1.5 rounded-md text-sm font-medium text-white hover:bg-blue-800 border border-white/20 hover:border-white/40",style:{backgroundColor:"#1e3a8a"},onClick:()=>{n(!1),window.scrollTo(0,0)},children:"Kirjaudu"})]})})})]})},Q1e=v_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ln=E.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},s)=>{const a=n?uu:"button";return u.jsx(a,{className:St(Q1e({variant:t,size:r,className:e})),ref:s,...i})});ln.displayName="Button";const jZ=()=>{const{signOut:e,user:t}=ya(),r=async()=>{await e()};return u.jsx("footer",{className:"bg-gradient-to-b from-white via-blue-200 to-blue-900 text-black pt-16 pb-8 w-full",style:{position:"relative",zIndex:10},children:u.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-8 mb-8",children:[u.jsxs("div",{className:"lg:w-1/2 lg:pr-8",children:[u.jsx("h2",{className:"text-xl font-bold mb-3 text-black",children:"OmaVerkkoturva"}),u.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-black",children:[u.jsx("p",{children:"OmaVerkkoturva on suomalainen yritys, joka on erikoistunut identiteettisuojaan ja verkkoturvallisuuteen. Missiomme on suojata ihmisten henkiltietoja ja est identiteettivarkauksia ennen kuin ne ehtivt tapahtua."}),u.jsx("p",{children:"Yrityksemme perustuu vahvaan suomalaiseen osaamiseen tietoturvassa ja asiakaspalvelussa. Kaikki asiakkaiden tiedot ksitelln Suomessa, ja noudatamme tiukkoja EU:n tietosuoja-asetuksen (GDPR) vaatimuksia."})]})]}),u.jsx("div",{className:"lg:self-end",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-6 lg:gap-8",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:u.jsx(W1,{className:"w-4 h-4 text-blue-900"})}),u.jsx("h3",{className:"text-sm font-semibold text-black",children:"Yhteystiedot"})]}),u.jsxs("p",{className:"text-black text-xs ml-10",children:["tuki@omaverkkoturva.fi",u.jsx("br",{}),"0451211663"]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:u.jsx(G1,{className:"w-4 h-4 text-blue-900"})}),u.jsx("h3",{className:"text-sm font-semibold text-black",children:"Toimisto"})]}),u.jsxs("p",{className:"text-black text-xs ml-10",children:["Yliopistonkatu 4",u.jsx("br",{}),"0100 Jyvskyl",u.jsx("br",{}),"Suomi"]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-2",children:u.jsx(y_,{className:"w-4 h-4 text-blue-900"})}),u.jsx("h3",{className:"text-sm font-semibold text-black",children:"Asiakaspalvelu"})]}),u.jsxs("p",{className:"text-black text-xs ml-10",children:["Ma-Pe 10:00-16:00",u.jsx("br",{}),"Suomenkielinen palvelu",u.jsx("br",{}),"Nopea vastaus"]})]})]})})]}),u.jsx("div",{className:"border-t border-gray-300 pt-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("p",{className:"text-black text-sm mb-4 md:mb-0",children:[" ",new Date().getFullYear()," OmaVerkkoturva. Kaikki oikeudet pidtetn."]}),u.jsxs("div",{className:"flex space-x-6",children:[t?u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"text-sm text-black",children:["Kirjautunut: ",t.email]}),u.jsxs(ln,{variant:"ghost",size:"sm",onClick:r,className:"text-black hover:text-blue-900",children:[u.jsx(fu,{className:"w-4 h-4 mr-1"}),"Kirjaudu ulos"]})]}):u.jsx("a",{href:"https://portaali.omaverkkoturva.fi",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Portaali"}),u.jsx(Tn,{to:"/privacy-policy",className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Tietosuojaseloste"}),u.jsx(Tn,{to:"/terms",className:"text-sm text-black hover:text-blue-900 transition-colors",children:"Kyttehdot"})]})]})})]})})},Z1e=({cartItems:e,onCartClick:t})=>u.jsx("div",{className:"fixed top-16 left-0 right-0 z-40 bg-white border-b border-gray-200 shadow-sm",children:u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("div",{className:"flex justify-end items-center h-12",children:u.jsxs("button",{onClick:t,className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"})}),u.jsx("span",{className:"text-sm text-gray-700",children:"Ostoskori"}),e.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.length})]})})})}),CZ=({items:e,onContinueOrder:t,onClose:r,onUpdateQuantity:n,onRemoveItem:i})=>{const s=e.reduce((a,o)=>{const l=parseFloat(o.price.replace(/[^0-9.,]/g,"").replace(",","."));return a+l*o.quantity},0);return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full space-y-6 max-h-[80vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Ostoskori"}),u.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-muted-foreground",children:"Ostoskori on tyhj"})}):u.jsx("div",{className:"space-y-4",children:e.map(a=>u.jsxs("div",{className:"border border-border rounded-lg p-4",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-foreground whitespace-pre-line",children:a.title}),u.jsx("p",{className:"font-bold text-primary",children:a.price})]}),u.jsx("button",{onClick:()=>i(a.id),className:"text-red-500 hover:text-red-700 p-1",title:"Poista tuote",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-muted-foreground",children:"Mr:"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>n(a.id,a.quantity-1),className:"w-8 h-8 rounded-full border border-border flex items-center justify-center hover:bg-accent",children:"-"}),u.jsx("span",{className:"w-8 text-center font-semibold",children:a.quantity}),u.jsx("button",{onClick:()=>n(a.id,a.quantity+1),className:"w-8 h-8 rounded-full border border-border flex items-center justify-center hover:bg-accent",children:"+"})]})]})]},a.id))}),e.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-border pt-4",children:u.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[u.jsx("span",{children:"Yhteens:"}),u.jsxs("span",{className:"text-primary",children:[s.toFixed(2).replace(".",",")," /kk"]})]})}),u.jsx(ln,{onClick:t,className:"w-full",style:{background:"var(--gradient-navy)"},children:"Jatka tilausta"})]})]})})},wr=E.forwardRef(({className:e,type:t,...r},n)=>u.jsx("input",{type:t,className:St("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));wr.displayName="Input";var J1e="Label",AZ=E.forwardRef((e,t)=>u.jsx(Ft.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));AZ.displayName=J1e;var OZ=AZ;const eke=v_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ur=E.forwardRef(({className:e,...t},r)=>u.jsx(OZ,{ref:r,className:St(eke(),e),...t}));Ur.displayName=OZ.displayName;var z$="Checkbox",[tke,gXe]=vf(z$),[rke,nke]=tke(z$),$Z=E.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,form:f,...d}=e,[h,p]=E.useState(null),m=Nr(t,b=>p(b)),g=E.useRef(!1),x=h?f||!!h.closest("form"):!0,[y=!1,v]=ql({prop:i,defaultProp:s,onChange:c}),_=E.useRef(y);return E.useEffect(()=>{const b=h==null?void 0:h.form;if(b){const w=()=>v(_.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[h,v]),u.jsxs(rke,{scope:r,state:y,disabled:o,children:[u.jsx(Ft.button,{type:"button",role:"checkbox","aria-checked":su(y)?"mixed":y,"aria-required":a,"data-state":DZ(y),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onKeyDown:xt(e.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:xt(e.onClick,b=>{v(w=>su(w)?!0:!w),x&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),x&&u.jsx(ike,{control:h,bubbles:!g.current,name:n,value:l,checked:y,required:a,disabled:o,form:f,style:{transform:"translateX(-100%)"},defaultChecked:su(s)?!1:s})]})});$Z.displayName=z$;var NZ="CheckboxIndicator",IZ=E.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,s=nke(NZ,r);return u.jsx(Ua,{present:n||su(s.state)||s.state===!0,children:u.jsx(Ft.span,{"data-state":DZ(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});IZ.displayName=NZ;var ike=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:i,...s}=e,a=E.useRef(null),o=N$(r),l=pX(t);E.useEffect(()=>{const f=a.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&p){const m=new Event("click",{bubbles:n});f.indeterminate=su(r),p.call(f,su(r)?!1:r),f.dispatchEvent(m)}},[o,r,n]);const c=E.useRef(su(r)?!1:r);return u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...s,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function su(e){return e==="indeterminate"}function DZ(e){return su(e)?"indeterminate":e?"checked":"unchecked"}var LZ=$Z,ske=IZ;const _m=E.forwardRef(({className:e,...t},r)=>u.jsx(LZ,{ref:r,className:St("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:u.jsx(ske,{className:St("flex items-center justify-center text-current"),children:u.jsx(CO,{className:"h-4 w-4"})})}));_m.displayName=LZ.displayName;const RZ=({onClose:e,onSubmit:t})=>{const[r,n]=E.useState(!1),[i,s]=E.useState(!1),{user:a}=ya(),{cartItems:o,clearCart:l}=mm(),{toast:c}=Oo(),f=async d=>{if(d.preventDefault(),!r){c({title:"Hyvksy ehdot",description:"Sinun tytyy hyvksy kaikki ehdot jatkaaksesi tilausta.",variant:"destructive"});return}if(!a){c({title:"Virhe",description:"Sinun tytyy olla kirjautunut sisn tilataksesi.",variant:"destructive"});return}if(o.length===0){c({title:"Tyhj ostoskori",description:"Ostoskorisi on tyhj. Lis tuotteita ennen tilaamista.",variant:"destructive"});return}s(!0);try{const h=new FormData(d.target),p=Object.fromEntries(h.entries()),m=o.reduce((w,k)=>{const T=parseFloat(k.price.replace("","").replace(",","."));return w+T*k.quantity},0),g={address:p.address,postalCode:p.postalCode,city:p.city},{data:x,error:y}=await Mn.from("orders").insert({user_id:a.id,total_amount:m,customer_email:p.email,customer_name:p.firstName,customer_phone:p.phone,billing_address:g,status:"pending"}).select().single();if(y)throw y;const v=o.map(w=>({order_id:x.id,package_title:w.title,package_price:parseFloat(w.price.replace("","").replace(",",".")),quantity:w.quantity})),{error:_}=await Mn.from("order_items").insert(v);if(_)throw _;const{error:b}=await Mn.functions.invoke("send-order-confirmation",{body:{orderId:x.id,customerEmail:p.email,customerName:p.firstName,confirmationToken:x.confirmation_token,packages:o,totalAmount:m}});b&&console.error("Failed to send email:",b),l(),e(),c({title:"Tilaus lhetetty!",description:"Saat pian vahvistusshkpostin. Muista vahvistaa tilaus shkpostista!"}),t(p)}catch(h){console.error("Error submitting order:",h),c({title:"Virhe",description:"Tilauksen lhettmisess tapahtui virhe. Yrit uudelleen.",variant:"destructive"})}finally{s(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:u.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full my-8 space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Tilaustiedot"}),u.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("form",{onSubmit:f,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"firstName",children:"Etu- ja sukunimi *"}),u.jsx(wr,{id:"firstName",name:"firstName",placeholder:"Etu- ja sukunimi",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"email",children:"Shkpostiosoite *"}),u.jsx(wr,{id:"email",name:"email",type:"email",placeholder:"Shkpostiosoite",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"phone",children:"Puhelinnumero *"}),u.jsx(wr,{id:"phone",name:"phone",type:"tel",placeholder:"Puhelinnumero",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"birthdate",children:"Syntymaika *"}),u.jsx(wr,{id:"birthdate",name:"birthdate",type:"date",defaultValue:"1990-01-01",required:!0})]})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"address",children:"Laskutusosoite *"}),u.jsx(wr,{id:"address",name:"address",placeholder:"Esimerkkikatu 1 A 2",required:!0})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"postalCode",children:"Postinumero *"}),u.jsx(wr,{id:"postalCode",name:"postalCode",placeholder:"40100",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"city",children:"Postitoimipaikka *"}),u.jsx(wr,{id:"city",name:"city",placeholder:"JYVSKYL",required:!0})]})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"promoCode",children:"Tarjouskoodi"}),u.jsx(wr,{id:"promoCode",name:"promoCode",placeholder:"Kirjoita koodi thn"})]}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(_m,{id:"privacy",checked:r,onCheckedChange:d=>n(d),className:"mt-1"}),u.jsx(Ur,{htmlFor:"privacy",className:"text-sm text-muted-foreground leading-relaxed",children:"Lhettmll tmn lomakkeen vakuutan, ett antamani tiedot ovat oikein. Lisksi hyvksyn henkiltietojeni ksittelyn OmaVerkkoturvan tietosuojaselosteen mukaisesti."})]})}),u.jsx(ln,{type:"submit",className:"w-full",style:{background:"var(--gradient-navy)"},disabled:!r||i,children:i?u.jsxs(u.Fragment,{children:[u.jsx(U1,{className:"mr-2 h-4 w-4 animate-spin"}),"Lhetetn..."]}):"Lhet tilaus"})]})]})]})})},bi=({children:e,showContact:t=!0})=>{const r=$o(),{user:n}=ya(),{cartItems:i,updateQuantity:s,removeFromCart:a,clearCart:o}=mm(),[l,c]=E.useState(!1),[f,d]=E.useState(!1),{toast:h}=Oo();E.useEffect(()=>{window.scrollTo(0,0)},[r]);const p=()=>{c(!1),d(!0)},m=g=>{console.log("Order submitted:",g),d(!1),o(),h({title:"Tilaus lhetetty!",description:"Kiitos tilauksestasi. Saat pian vahvistuksen shkpostiin."})};return u.jsxs("div",{className:"min-h-screen bg-transparent w-full max-w-[100vw] overflow-x-hidden",children:[u.jsx(EZ,{}),n&&r.pathname!=="/dashboard"&&u.jsx(Z1e,{cartItems:i,onCartClick:()=>c(!0)}),e,!n&&u.jsx(jZ,{}),l&&u.jsx(CZ,{items:i,onContinueOrder:p,onClose:()=>c(!1),onUpdateQuantity:s,onRemoveItem:a}),f&&u.jsx(RZ,{onClose:()=>d(!1),onSubmit:m})]})},WS=768;function FZ(){const[e,t]=E.useState(void 0);return E.useEffect(()=>{const r=window.matchMedia(`(max-width: ${WS-1}px)`),n=()=>{t(window.innerWidth<WS)};return r.addEventListener("change",n),t(window.innerWidth<WS),()=>r.removeEventListener("change",n)},[]),!!e}const BZ=E.memo(()=>{const e=FZ();E.useState(!1),E.useState(!1),E.useState(!1),E.useState(!1);const[t,r]=E.useState(""),[n,i]=E.useState(""),[s,a]=E.useState(!1),[o,l]=E.useState(!1),[c,f]=E.useState(""),[d,h]=E.useState(!1),[p,m]=E.useState(null),[g,x]=E.useState(""),y=(M,j)=>{i(M),r(j),a(!0)},v=()=>{a(!1),r(""),i("")},_=async M=>{if(M.preventDefault(),!!c){h(!0),x(""),m(null);try{const j=await fetch("https://fsirlcxhtyppecjjdqbp.supabase.co/functions/v1/check-email-breach",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzaXJsY3hodHlwcGVjamRxcGJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ1NzI5NzQsImV4cCI6MjA1MDE0ODk3NH0.Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8"},body:JSON.stringify({email:c})});if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);const C=await j.json();if(C.error)throw new Error(C.error);m(C)}catch(j){console.error("Error searching email:",j),j instanceof Error?x(`Virhe tietojen haussa: ${j.message}`):x("Virhe tietojen haussa. Yrit uudelleen myhemmin.")}finally{h(!1)}}},b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.8,ease:"easeOut"}}},w={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6,ease:"easeOut"}}},k={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},T={hidden:{},visible:{transition:{staggerChildren:.1,delayChildren:.1}}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"fixed inset-0 w-full h-full z-0",children:[u.jsx(mt.img,{src:"/lovable-uploads/iStock-2222199654.jpg",alt:"Identity Protection - Secure Digital Life",className:"w-full h-full object-cover object-center",initial:{scale:1.05},animate:{scale:1},transition:{duration:1,ease:"easeOut"}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/50"})]}),u.jsxs(mt.div,{className:"relative w-full",initial:"hidden",animate:"visible",variants:b,style:{willChange:"transform"},children:[u.jsx(mt.div,{className:"relative h-screen w-full flex items-center",children:u.jsx("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 flex flex-col justify-center h-full",style:{position:"relative",zIndex:20},children:u.jsxs(mt.div,{className:"w-full max-w-2xl text-left ml-4 sm:ml-8",variants:T,children:[u.jsx(mt.h1,{className:"banner-title text-white",variants:w,children:"Est identiteettivarkaus ennen kuin se ehtii tapahtua."}),u.jsx(mt.p,{className:"banner-subtitle text-white mt-4 sm:mt-6",variants:w,children:"Yksi helppo keino suojata sek rahasi ett yksityiset tietosi."}),u.jsx(mt.div,{className:"flex justify-start mt-6 sm:mt-8",variants:w,children:u.jsx(mt.button,{className:"w-full sm:w-auto min-h-[44px] px-6 sm:px-8 py-3 bg-gradient-to-r from-blue-900 to-blue-800 text-white rounded-md hover:from-blue-800 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center group text-sm sm:text-base font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},onClick:()=>{const M=document.getElementById("features");M&&M.scrollIntoView({behavior:"smooth"})},children:"Tutustu tst"})})]})})}),u.jsx(mt.div,{id:"features",className:"relative w-full bg-gradient-to-b from-white via-blue-100 to-blue-900 py-16 pb-24",style:{position:"relative",zIndex:10},initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},variants:T,children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs(mt.div,{className:"text-center mb-24",variants:k,children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:["Pid identiteettisi turvassa",u.jsx("br",{}),"edistyksellisin ratkaisuin"]}),u.jsx("p",{className:"text-lg text-gray-700 mb-16",children:"OmaVerkkoturva tarjoaa kattavan suojan henkiltiedoillesi"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"space-y-16 lg:space-y-32",children:[u.jsxs("div",{className:"text-left max-w-lg mt-8 lg:mt-16",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx(the,{className:"w-4 h-4 text-white"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reaaliaikainen hlytys"})]}),u.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Saat vlittmn ilmoituksen, jos tietosi vuotavat verkkoon. Palvelu suojaa shkpostisi, henkiltunnuksesi ja maksukorttitietosi sek valvoo epilyttvi luotonhakuja ja osoitteenmuutoksia, jotka voivat viitata huijaukseen."})]}),u.jsxs("div",{className:"text-left max-w-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx(Vb,{className:"w-4 h-4 text-white"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Saat ohjeet"})]}),u.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Jos riski havaitaan, saat heti selket ohjeet seuraaviin toimiin, kuten kortin sulkemiseen tai salasanan vaihtoon."})]}),u.jsxs("div",{className:"text-left max-w-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx(ca,{className:"w-4 h-4 text-white"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Vakuutus"})]}),u.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Kun identiteettisi joutuu vaaraan, tilanteen ratkaiseminen voi kest viikkoja ja maksaa tuhansia euroja. Tuotteeseen sisltyv vakuutus tuo mielenrauhaa mys pahimman sattuessa."})]}),u.jsxs("div",{className:"text-left max-w-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-900 to-blue-800 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx(Vd,{className:"w-4 h-4 text-white"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Jatkuva valvonta"})]}),u.jsx("p",{className:"text-gray-900 leading-relaxed mb-4",children:"Valvomme automaattisesti Dark Webi, sosiaalista mediaa ja tietovuototietokantoja, jotta tietosi pysyvt turvassa vuorokauden jokaisena hetken."}),u.jsx("button",{className:"px-6 py-3 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl font-medium text-base mt-20",onClick:()=>{window.location.href="/identiteettiturva"},children:"Lue lis"})]})]}),u.jsx("div",{className:"lg:flex lg:items-center lg:justify-center"})]})]})})}),u.jsx("div",{className:"relative w-full bg-gradient-to-b from-blue-900 via-blue-950 to-blue-900 py-32 pb-48",style:{position:"relative",zIndex:10},children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8",children:["Tarkista, onko shkpostiosoitteesi",u.jsx("br",{}),"ollut mukana tietovuodossa"]}),u.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:u.jsxs("form",{onSubmit:_,className:"flex flex-col gap-4",children:[u.jsx("input",{type:"email",value:c,onChange:M=>f(M.target.value),placeholder:"Syt shkpostiosoitteesi",className:"w-full px-4 py-3 rounded-md border-0 focus:ring-2 focus:ring-blue-300 focus:outline-none text-gray-900 placeholder-gray-500",required:!0,disabled:d}),u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{type:"submit",disabled:d||!c,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?u.jsxs(u.Fragment,{children:[u.jsx(U1,{className:"w-4 h-4 animate-spin"}),"Haetaan..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Xh,{className:"w-4 h-4"}),"Hae"]})}),u.jsx("button",{type:"button",onClick:()=>{f(""),m(null),h(!1),x(null)},className:"px-6 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl font-medium whitespace-nowrap flex items-center justify-center gap-2",children:"Nollaa"})]})]})}),g&&u.jsx("div",{className:"max-w-md mx-auto mb-6 p-4 bg-red-100 border border-red-300 rounded-md",children:u.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[u.jsx(Ehe,{className:"w-5 h-5"}),u.jsx("span",{className:"text-sm",children:g})]})}),p&&u.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:p.found?u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"bg-transparent border-2 border-pink-500 rounded-3xl p-8 mb-8 shadow-2xl shadow-pink-500/20",children:u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsxs("div",{className:"flex items-center justify-center gap-6",children:[u.jsx("div",{className:"text-6xl font-bold text-pink-500",children:p.count}),u.jsx("h2",{className:"text-4xl font-bold text-pink-500",children:p.count===1?"Tietovuoto":"Tietovuotoa"})]}),u.jsx("p",{className:"text-gray-200 text-lg leading-relaxed",children:"Voi ei  osoitteesi on vuotanut! Tm shkpostiosoite on lytynyt tietovuodosta. Katso alta, miss tietosi ovat paljastuneet."})]})}),u.jsx("div",{className:"space-y-8",children:p.breaches.map((M,j)=>u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute right-10 top-0 w-1 bg-gradient-to-b from-blue-600 to-blue-400 h-full"}),u.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-20 h-20 bg-gradient-to-b from-blue-600 to-blue-400 rounded-full flex flex-col items-center justify-center text-white text-sm font-medium shadow-lg z-10",children:(()=>{let C=null;if(M.BreachDate?C=new Date(M.BreachDate):M.AddedDate?C=new Date(M.AddedDate):M.ModifiedDate?C=new Date(M.ModifiedDate):M.PwnDate&&(C=new Date(M.PwnDate)),C&&!isNaN(C.getTime())){const R=C.toLocaleDateString("fi-FI",{month:"short"}),I=C.getFullYear();return u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm font-bold",children:R}),u.jsx("span",{className:"text-sm font-bold",children:I})]})}else{const R=new Date().getFullYear();return u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm font-bold",children:"Tunt"}),u.jsx("span",{className:"text-sm font-bold",children:R})]})}})()}),u.jsxs("div",{className:"bg-transparent backdrop-blur-sm border border-gray-600 rounded-2xl p-8 mr-24 shadow-xl",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-xl flex items-center justify-center",children:u.jsxs("div",{className:"grid grid-cols-2 gap-1 w-6 h-6",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-sm opacity-80"}),u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-sm opacity-60"}),u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-sm opacity-40"}),u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-sm"})]})}),u.jsx("h3",{className:"text-2xl font-bold text-white",children:M.Name})]}),M.Description&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h4",{className:"text-white font-bold text-lg mb-3 text-left",children:"Alkuperinen tietovuodon kuvaus:"}),u.jsx("p",{className:"text-gray-200 leading-relaxed text-base",children:M.Description.replace(/<a[^>]*>([^<]*)<\/a>/g,"$1").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'")})]}),M.DataClasses&&M.DataClasses.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h4",{className:"text-white font-bold text-lg mb-3 text-left",children:"Vahingoittuneet tiedot:"}),u.jsx("ul",{className:"space-y-2",children:M.DataClasses.map((C,R)=>u.jsxs("li",{className:"flex items-center gap-3 text-gray-200 text-base",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(N=>{const z={"Email addresses":"Shkpostiosoitteet","Geographic locations":"Maantieteelliset sijainnit","IP addresses":"IP-osoitteet",Passwords:"Salasanat",Usernames:"Kyttjnimet",Names:"Nimet","Phone numbers":"Puhelinnumerot","Credit card data":"Luottokorttitiedot","Social media profiles":"Sosiaalisen median profiilit","Job titles":"Tytehtvt","Physical addresses":"Osoitteet","Dates of birth":"Syntymaika","Security questions":"Turvakysymykset","Device information":"Laitetiedot","Browser details":"Selaintiedot","Account balances":"Tilisaldot","Transaction histories":"Tapahtumahistoria",Email:"Shkposti","IP address":"IP-osoite",Username:"Kyttjnimi",Password:"Salasana",Name:"Nimi","Phone number":"Puhelinnumero","Credit card":"Luottokortti","Social media profile":"Sosiaalisen median profiili","Job title":"Tytehtv","Physical address":"Osoite","Date of birth":"Syntymaika","Security question":"Turvakysymys","Device info":"Laitetiedot",Browser:"Selain","Account balance":"Tilisaldo","Transaction history":"Tapahtumahistoria","Spoken languages":"Puhutut kielet",Languages:"Kielet",Language:"Kieli","Spoken language":"Puhuttu kieli","Telecommunications carrier":"Tietoliikenneoperaattori","Auth tokens":"Tunnistustunnukset",Avatars:"Profiilikuvat",Genders:"Sukupuolet","Driver's licenses":"Ajokortit","Government issued IDs":"Viralliset henkiltodistukset","Profile photos":"Profiilikuvat",Purchases:"Ostokset","Partial credit card data":"Osittaiset luottokorttitiedot",Ages:"It","Physical attributes":"Fyysiset ominaisuudet","Age groups":"Ikryhmt","Cryptocurrency wallet addresses":"Kryptovaluuttalompakoiden osoitteet",Bios:"Esittelyt","Places of birth":"Syntympaikat","and answers":"ja vastaukset","Website activity":"Verkkosivuston toiminta","Homepage URLs":"Kotisivun osoitteet","Instant messenger identities":"Viestisovellusten identiteetit","Biometric data":"Biometriset tiedot","Family members' names":"Perheenjsenten nimet","Marital statuses":"Siviilisdyt","Passport numbers":"Passinumerot","Private messages":"Yksityisviestit",Employers:"Tynantajat",Employee:"Tyntekij",Employees:"Tyntekijt",Company:"Yritys",Companies:"Yritykset",Organization:"Organisaatio",Organizations:"Organisaatiot",Business:"Liiketoiminta",Businesses:"Liiketoiminnat",Workplace:"Typaikka",Workplaces:"Typaikat",Job:"Ty",Jobs:"Tyt",Position:"Asema",Positions:"Asemat",Role:"Rooli",Roles:"Roolit",Department:"Osasto",Departments:"Osastot",Team:"Tiimi",Teams:"Tiimit",Salary:"Palkka",Salaries:"Palkat",Compensation:"Korvaus",Benefits:"Edut",Insurance:"Vakuutus",Healthcare:"Terveydenhuolto",Retirement:"Elke",Pension:"Elke",Tax:"Vero",Taxes:"Verot",Banking:"Pankkitoiminta",Financial:"Taloudellinen",Finance:"Rahoitus",Accounting:"Kirjanpito",Payroll:"Palkanlaskenta",HR:"Henkilsthallinto","Human Resources":"Henkilsthallinto",Recruitment:"Rekrytointi",Hiring:"Palkkaus",Training:"Koulutus",Education:"Koulutus",Skills:"Taidot",Certifications:"Sertifikaatit",Experience:"Kokemus",Background:"Tausta",History:"Historia",Performance:"Suorituskyky",Evaluation:"Arviointi",Review:"Arviointi",Feedback:"Palaute",Assessment:"Arviointi",Appraisal:"Arviointi","Browser user agent details":"Selaimen user agent -tiedot","Professional skills":"Ammatilliset taidot","Years of professional experience":"Ammatillisen kokemuksen vuodet","Survey results":"Kyselytulokset","Shkposti messages":"Shkpostiviestit","Eating habits":"Symistavat","Address book contacts":"Osoitekirjan yhteystiedot","Apps installed on devices":"Laitteille asennetut sovellukset","Cellular network names":"Matkapuhelinverkkojen nimet","IMEI numbers":"IMEI-numerot","IMSI numbers":"IMSI-numerot",Occupations:"Ammatit","Credit status information":"Luottotietojen tiedot","Income levels":"Tulotason","Loan information":"Lainatiedot","Personal descriptions":"Henkilkuvaukset",Salutations:"Tervehdykset","Bank account numbers":"Pankkitilinumerot","Social security numbers":"Henkiltunnukset","Time zones":"Aikavyhykkeet","Encrypted keys":"Salatut avaimet",Applications:"Sovellukset","Historical passwords":"Aiemmat salasanat","User website URLs":"Kyttjn verkkosivustojen osoitteet","Living costs":"Asumiskustannukset","Family structure":"Perherakenne","Mothers maiden names":"itien tyttnimet",Religions:"Uskonnot","Spouses names":"Puolisoiden nimet","Partial dates of birth":"Osittaiset syntymaika","Personal health data":"Henkilkohtaiset terveystiedot","Smoking habits":"Tupakointitavat","Health insurance information":"Sairausvakuutustiedot",Nationalities:"Kansallisuudet","Vehicle details":"Ajoneuvon tiedot","Job applications":"Tyhakemukset"};let V=N;return Object.entries(z).sort((H,O)=>O[0].length-H[0].length).forEach(([H,O])=>{V.includes(H)&&(V=V.replace(H,O))}),V})(C)]},R))})]}),u.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[M.Domain&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Verkkosivusto:"})," ",M.Domain]}),M.PwnCount&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Vaikutetut tilit:"})," ",M.PwnCount.toLocaleString("fi-FI")]}),M.IsVerified&&u.jsx("div",{className:"text-green-400 font-medium",children:" Vahvistettu tietovuoto"})]})]})]},j))}),u.jsxs("div",{className:"mt-12 text-center",children:[u.jsx("p",{className:"text-gray-200 text-lg mb-6",children:"Tarkista tst toimintaohjeet tietovuodon jlkeen"}),u.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-xl transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Toimintaohjeet"})]})]}):u.jsx("div",{className:"bg-transparent backdrop-blur-sm border-2 border-green-500 rounded-3xl p-8 shadow-2xl shadow-green-500/20",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(ns,{className:"w-8 h-8 text-green-400"}),u.jsx("span",{className:"text-xl text-gray-200",children:p.message})]})})}),u.jsx("p",{className:"text-sm text-blue-100 max-w-2xl mx-auto",children:"Tarkistamme, onko shkpostiosoitteesi esiintynyt tunnetuissa tietovuodoissa. Saat tiedon vlittmsti haun yhteydess."})]})})}),u.jsx("div",{className:"relative w-full bg-white py-24",style:{position:"relative",zIndex:10},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"text-center max-w-4xl mx-auto mb-16",children:u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-8",children:["Esimerkkitapauksia",u.jsx("br",{}),"identiteettivarkaudesta"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-6xl mx-auto",children:[u.jsx(mt.div,{className:"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 p-6 md:p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut"},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>y("Tietojenkalastelu","Nina sai aidolta nyttvn shkpostin pankiltaan. Hn klikkasi viestiss ollutta linkki ja kirjautui sisn sivulle, joka olikin huijaussivusto. Tietojen avulla rikollinen otti hnen nimissn kolme pikavippi (yhteens 11 200), vaihdatutti hnen postiosoitteensa sek puhelinnumeronsa ja yritti avata verkkopankkitilej ja maksukortteja. Palveluun sisltyv vakuutus korvaa jopa 13 500  taloudelliset menetykset ja asiantuntijat auttavat asian lpivienniss."),children:u.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-6",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),u.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Tietojenkalastelu"})]})}),u.jsx(mt.div,{className:"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 p-6 md:p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.2},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>y("Verkkokauppahuijaus","Timo lysi verkosta edullisen tarjouksen uusista kuulokkeista tunnetulta brndilt. Hinta oli lhes puolet halvempi kuin muualla, ja verkkosivusto nytti aidolla. Logo, arvostelut ja maksutavat kaikki kunnossa. Hn maksoi 129  pankkikortilla. Tilauksen jlkeen tuotetta ei koskaan saapunut ja verkkokauppa katosi muutamassa pivss. Koska ostoksen hinta oli 50-700  vlill, Timo saa rahansa takaisin verkkokauppahuijaukset kattavan vakuutuksen ansiosta."),children:u.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-6",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),u.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Verkkokauppahuijaus"})]})}),u.jsx(mt.div,{className:"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 p-6 md:p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.4},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>y("Sovellushankinnat","Sannan 9-vuotias poika sai pelata hetken idin puhelimella. Hn latasi vahingossa pelisovelluksen, joka nytti ilmaiselta mutta sislsi kalliin 112 euron tilauksen. Maksu veloittui heti, koska maksukortti oli tallennettuna puhelimeen. Vakuutus korvaa kulut, jotka liittyvt alle 10-vuotiaan vahingossa tekemiin sovellusostoihin (alle 135 ) suurimmilla alustoilla, kuten mm. App Storessa, Google Playssa tai Steamissa."),children:u.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-6",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),u.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Sovellushankinnat"})]})}),u.jsx(mt.div,{className:"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-950 p-6 md:p-8 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.6},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>y("Nettikiusaaminen","Emilia joutui nettikiusaamisen kohteeksi sen jlkeen, kun hnen TikTok-videonsa levisi ylltten laajalle. Tuntemattomat ihmiset alkoivat kommentoida videoita loukkaavasti ja joku perusti tekaistun tilin hnen nimelln ja profiilikuvallaan. Vrennetyll tilill julkaistiin sislt, joka sai Emilian nyttmn nololta. Hn saa asiantuntijoilta neuvoja ja apuja (25 h) sislln poistoon ja tilien palautukseen. Tarvittaessa hnen kytss on mys oikeudellinen tuki ja psykologinen kriisiapu."),children:u.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-6",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),u.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Nettikiusaaminen"})]})})]})]})}),u.jsx("div",{className:"relative w-full bg-white/80 py-16",style:{position:"relative",zIndex:10},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-12 mt-16",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Valitse sinulle sopivin turva"}),u.jsx("p",{className:"text-lg text-gray-700 mb-2",children:"Valitse parhaiten sopiva suojaus."}),u.jsx("p",{className:"text-sm text-gray-600",children:"Jokaisessa tilauksessa on 14vrk maksuton peruutusoikeus."})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilsuoja Yhdelle"}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"21,99 /kk"}),u.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Tietojen monitorointi ja ilmoitus tietovuodoista"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Vakuutus, joka turvaa sinut vahinkojen varalta"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Apu ja tuki"})})]}),u.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",onClick:()=>{const M={id:"henkilosuoja-yhdelle",name:"Henkilsuoja Yhdelle",price:21.99,type:"subscription"},j=JSON.parse(localStorage.getItem("cart")||"[]");j.push(M),localStorage.setItem("cart",JSON.stringify(j)),window.location.href="/verkkokauppa"},children:"Suojaa laite"})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilsuoja Tupla"}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"28,99 /kk"}),u.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek lheisellesi"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Vakuutus, joka turvaa sinut ja lheisesi vahinkojen varalta"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Apu ja tuki"})})]}),u.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",onClick:()=>{const M={id:"henkilosuoja-tupla",name:"Henkilsuoja Tupla",price:28.99,type:"subscription"},j=JSON.parse(localStorage.getItem("cart")||"[]");j.push(M),localStorage.setItem("cart",JSON.stringify(j)),window.location.href="/verkkokauppa"},children:"Suojaa laite"})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Henkilsuoja Perhe"}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:"32,99 /kk"}),u.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek koko perheellesi"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta"})}),u.jsx("li",{className:"flex items-start",children:u.jsx("span",{className:"text-gray-700",children:" Apu ja tuki"})})]}),u.jsx("button",{className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",onClick:()=>{const M={id:"henkilosuoja-perhe",name:"Henkilsuoja Perhe",price:32.99,type:"subscription"},j=JSON.parse(localStorage.getItem("cart")||"[]");j.push(M),localStorage.setItem("cart",JSON.stringify(j)),window.location.href="/verkkokauppa"},children:"Suojaa laite"})]})]})})]})}),u.jsx("div",{className:"relative w-full bg-gradient-to-b from-white via-blue-50 to-blue-200 py-32",style:{position:"relative",zIndex:10},children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-black mb-6",children:"Voit mys kokeilla identiteettisuojaa ilman sitoumuksia"}),u.jsx("p",{className:"text-base text-black leading-relaxed mb-6",children:"Kokeiluversio sislt henkiltietojen tarkastuksen sek monipuoliset tykalut, joilla voit ehkist tietojesi vrinkytt ja havaita mahdollisia uhkia ajoissa. Saat 30 pivn ilmaisen kyttjakson, jonka aikana voit rauhassa tutustua palvelun hytyihin ja varmistaa, ett tietosi ovat turvassa."}),u.jsxs("button",{className:"px-6 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl font-medium text-sm",onClick:()=>{const M={title:"Henkilsuoja - Ilmainen kokeilujakso 30pv",price:"0"},j=JSON.parse(localStorage.getItem("cart")||"[]");j.push(M),localStorage.setItem("cart",JSON.stringify(j)),window.location.href="/verkkokauppa"},children:["Kokeile",u.jsx(Kc,{className:"ml-2 h-3 w-3 inline"})]})]}),u.jsx("div",{className:"flex justify-center lg:justify-end",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsxs("video",{ref:M=>{M&&new IntersectionObserver(C=>{C.forEach(R=>{R.isIntersecting?M.play().catch(()=>{}):M.pause()})},{threshold:.5}).observe(M)},className:"w-full h-auto rounded-lg shadow-lg",muted:!0,loop:!0,playsInline:!0,preload:"metadata",style:{pointerEvents:"none"},onLoadedMetadata:M=>{const j=M.target;j.controls=!1},children:[u.jsx("source",{src:"/lovable-uploads/Nimetn malli (1).mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})})]})})}),u.jsx("div",{className:"relative w-full bg-gray-50 py-16",style:{position:"relative",zIndex:10},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"text-left mb-16",children:u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black",children:"Artikkelit"})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[u.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-gray-500",children:u.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"inline-block bg-blue-100 text-blue-900 text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Ajankohtaista"}),u.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Ajankohtaisia huijauksia (07/2025)"}),u.jsx("p",{className:"text-sm text-gray-600",children:"4.8.2025"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[u.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-gray-500",children:u.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"inline-block bg-blue-100 text-blue-900 text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Ajankohtaista"}),u.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Ajankohtaisia huijauksia (06/2025)"}),u.jsx("p",{className:"text-sm text-gray-600",children:"1.7.2025"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[u.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-gray-500",children:u.jsx("p",{className:"text-sm",children:"Kuva tulossa pian"})})}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"inline-block bg-blue-900 text-white text-xs font-medium px-3 py-1 rounded-full mb-3",children:"Artikkelit"}),u.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Shkpostin tietoturvallinen kytt"}),u.jsx("p",{className:"text-sm text-gray-600",children:"16.6.2025"})]})]})]})]})})]}),o&&u.jsx(mt.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),children:u.jsxs(mt.div,{className:"bg-white rounded-2xl p-8 max-w-4xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:M=>M.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:"Toimintaohjeet tietovuodon jlkeen"}),u.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:""})]}),u.jsxs("div",{className:"space-y-6 text-gray-700",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:"1. Kyt vahvaa ja uniikkia salasanaa kyseiselle palvelulle"}),u.jsx("p",{className:"leading-relaxed",children:"Vlt samaa salasanaa useassa palvelussa. Harkitse salasanamanagerin kytt, jotta voit luoda ja hallita vahvoja salasanoja."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:"2. Ota kaksivaiheinen tunnistautuminen (2FA) kyttn"}),u.jsx("p",{className:"leading-relaxed",children:"Aktivoi 2FA kaikissa palveluissa, joissa se on mahdollista. Tm lis merkittvsti tilisi turvallisuutta, vaikka salasana olisi vuotanut."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:"3. Tarkista muut tilisi"}),u.jsx("p",{className:"leading-relaxed",children:"Jos kytt samaa shkpostia ja salasanaa muissa palveluissa, vaihda mys niiss salasanat. Seuraa tilitapahtumia epilyttvn toiminnan varalta."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:"4. Varo huijauksia (phishing)"}),u.jsx("p",{className:"leading-relaxed",children:"Ole erityisen tarkkana epilyttvien shkpostien ja linkkien kanssa. l klikkaa linkkej, l avaa liitteit tuntemattomista lhteist."})]}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border-l-4 border-blue-400",children:[u.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Trke muistaa"}),u.jsx("p",{className:"leading-relaxed",children:"Kannattaa kuitenkin muistaa, ett useimmiten pelkk shkpostiosoitteen joutuminen tietovuotoon ei viel ole vakavaa. Shkpostiosoite on usein julkinenkin tieto, eik sen paljastuminen yksinn vaaranna kyttj. Riski kasvaa kuitenkin silloin, jos vuodon yhteydess on ptynyt vriin ksiin mys salasanoja, henkiltietoja tai muita arkaluontoisia tietoja."})]})]})]})}),s&&u.jsx(mt.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v,children:u.jsxs(mt.div,{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:M=>M.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:n}),u.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:""})]}),u.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:t})]})})]})});BZ.displayName="Hero";const xf=({title:e="OmaVerkkoturva",description:t="OmaVerkkoturva: Suomalainen identiteettisuoja ja verkkoturvallisuuspalvelu. Suojaa henkiltietojasi ja est identiteettivarkauksia.",type:r="website",name:n="OmaVerkkoturva",imageUrl:i="/lovable-uploads/logo123.png",publishDate:s,modifiedDate:a,author:o,category:l,keywords:c=["identiteettisuoja","verkkoturvallisuus","henkiltietojen suojaus","tietovuoto","identiteettivarkaus","verkkorikollisuus","tietoturva","suomalainen palvelu"],isBlogPost:f=!1})=>{const d=$o(),h=`https://omaverkkoturva.fi${d.pathname}`,p=i.startsWith("http")?i:`https://omaverkkoturva.fi${i}`,m=d.pathname.includes("smart-ppe-revolution")?[...c,"personal protective equipment","workplace safety solutions","smart safety gear","construction safety technology","industrial safety monitoring","occupational health technology","safety compliance","worker protection systems","smart hard hats","connected safety equipment"]:d.pathname.includes("wearable-safety-tech-protecting-workers-roi")?[...c,"workplace injury costs","safety ROI","workers compensation savings","ergonomic sensors","workplace safety investment","safety technology ROI","industrial wearables","safety cost reduction","occupational safety economics","safety technology partnerships","workplace injury statistics","safety equipment financing","injury prevention technology"]:c,g={"@context":"https://schema.org","@type":"Organization",name:"OmaVerkkoturva",url:"https://omaverkkoturva.fi",logo:"https://omaverkkoturva.fi/lovable-uploads/logo123.png",description:"Suomalainen identiteettisuoja ja verkkoturvallisuuspalvelu",contactPoint:{"@type":"ContactPoint",contactType:"customer service",email:"tuki@omaverkkoturva.fi"},sameAs:["https://www.linkedin.com/company/omaverkkoturva","https://twitter.com/omaverkkoturva"]},x=f&&s?{"@context":"https://schema.org","@type":"BlogPosting",mainEntityOfPage:{"@type":"WebPage","@id":h},headline:e,image:{"@type":"ImageObject",url:p,width:1200,height:630},datePublished:s,dateModified:a||s,author:{"@type":"Organization",name:o||"OmaVerkkoturva",url:"https://omaverkkoturva.fi"},publisher:{"@type":"Organization",name:"OmaVerkkoturva",logo:{"@type":"ImageObject",url:"https://omaverkkoturva.fi/lovable-uploads/logo123.png",width:512,height:512},url:"https://omaverkkoturva.fi"},description:t,keywords:m.join(", "),articleSection:l,inLanguage:"fi-FI",isAccessibleForFree:!0}:null,y=d.pathname.includes("smart-ppe-revolution")?{"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"What is Smart PPE?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE (Personal Protective Equipment) refers to traditional safety gear enhanced with sensors, connectivity, and intelligence. Unlike ordinary PPE that acts as a passive barrier, smart PPE actively monitors conditions and provides real-time alerts to prevent accidents."}},{"@type":"Question",name:"How does smart PPE improve workplace safety?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE improves safety by providing real-time monitoring of environmental conditions, worker health metrics, and potential hazards. It can detect falls, monitor vital signs, sense toxic gases, and automatically alert emergency responders when needed."}},{"@type":"Question",name:"What industries benefit from smart PPE?",acceptedAnswer:{"@type":"Answer",text:"Smart PPE benefits multiple industries including construction, manufacturing, oil & gas, fire & rescue, healthcare, mining, and any workplace where safety is paramount. Each industry can customize the technology to address specific safety challenges."}}]}:null,v=d.pathname.includes("wearable-safety-tech-protecting-workers-roi")?{"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How much do workplace injuries cost?",acceptedAnswer:{"@type":"Answer",text:"According to the National Safety Council, the average cost for a medically consulted work injury is $43,000 in 2023. With 2.2 injuries per 100 full-time workers, a 200-person site can expect about $215,000 in injury costs annually before accounting for downtime or replacement training."}},{"@type":"Question",name:"What ROI can wearable safety technology deliver?",acceptedAnswer:{"@type":"Answer",text:"Real-world deployments show significant returns: one study found 54% lower OSHA recordables and 88% fewer lost workdays. Another warehouse study showed 62% of workers reduced risky movements by half, with total ergonomic hazards falling 39%."}},{"@type":"Question",name:"Do insurance companies support wearable safety technology?",acceptedAnswer:{"@type":"Answer",text:"Yes, many insurers now bundle wearable device costs into workers compensation premiums. Employers keep the hardware as long as usage stays high because fewer claims leave insurers ahead financially. Regional carriers are expanding similar rebate schemes."}}]}:null,_=l?[...m,l.toLowerCase()].join(", "):m.join(", ");return u.jsxs(rfe,{children:[u.jsx("title",{children:e}),u.jsx("meta",{name:"description",content:t}),u.jsx("link",{rel:"canonical",href:h}),u.jsx("meta",{name:"keywords",content:_}),u.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),u.jsx("meta",{property:"og:type",content:f?"article":r}),u.jsx("meta",{property:"og:url",content:h}),u.jsx("meta",{property:"og:title",content:e}),u.jsx("meta",{property:"og:description",content:t}),u.jsx("meta",{property:"og:image",content:p}),u.jsx("meta",{property:"og:image:width",content:"1200"}),u.jsx("meta",{property:"og:image:height",content:"630"}),u.jsx("meta",{property:"og:site_name",content:"WRLDS Technologies"}),u.jsx("meta",{property:"og:locale",content:"en_US"}),f&&l&&u.jsx("meta",{property:"article:section",content:l}),f&&s&&u.jsx("meta",{property:"article:published_time",content:s}),f&&a&&u.jsx("meta",{property:"article:modified_time",content:a}),f&&u.jsx("meta",{property:"article:publisher",content:"https://wrlds.com"}),u.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),u.jsx("meta",{name:"twitter:url",content:h}),u.jsx("meta",{name:"twitter:title",content:e}),u.jsx("meta",{name:"twitter:description",content:t}),u.jsx("meta",{name:"twitter:image",content:p}),u.jsx("meta",{name:"twitter:site",content:"@wrldstechnologies"}),u.jsx("meta",{name:"twitter:creator",content:"@wrldstechnologies"}),u.jsx("meta",{property:"og:image:secure_url",content:p}),u.jsx("meta",{name:"author",content:o||n}),u.jsx("meta",{name:"pinterest:description",content:t}),u.jsx("meta",{name:"pinterest:image",content:p}),u.jsx("meta",{name:"theme-color",content:"#000000"}),u.jsx("meta",{name:"msapplication-TileColor",content:"#000000"}),u.jsx("script",{type:"application/ld+json",children:JSON.stringify(g)}),x&&u.jsx("script",{type:"application/ld+json",children:JSON.stringify(x)}),y&&u.jsx("script",{type:"application/ld+json",children:JSON.stringify(y)}),v&&u.jsx("script",{type:"application/ld+json",children:JSON.stringify(v)})]})},ake=()=>(E.useEffect(()=>{const e=document.querySelectorAll('[id="contact"]');e.length>1&&(e[1].id="contact-footer")},[]),u.jsxs(bi,{children:[u.jsx(xf,{title:"OmaVerkkoturva - Suojaa identiteettisi verkossa",description:"OmaVerkkoturva: Est identiteettivarkaus ennen kuin se ehtii tapahtua. Suojaa rahasi ja henkiltietosi helposti yhdell ratkaisulla.",imageUrl:"/lovable-uploads/8e39c5ba-0ce6-4338-9dbb-3c3c9b33cbb7.png",keywords:["identiteettisuoja","verkkoturva","identiteettivarkaus","henkiltietojen suoja","tietoturva","verkkohuijaukset","puhelinhuijaukset"]}),u.jsx(BZ,{})]})),oke=()=>{const e=$o();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),u.jsx(bi,{children:u.jsx("div",{className:"min-h-[50vh] flex items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),u.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),u.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})})},P_=({children:e,title:t,subtitle:r,imageUrl:n,brandName:i,darkMode:s=!1})=>{E.useEffect(()=>{window.scrollTo(0,0)},[]);const a=s?"text-white":"text-gray-900";return u.jsx(bi,{children:u.jsxs("div",{className:"pt-16 pb-16",children:[u.jsxs("div",{className:"relative w-full h-[40vh] md:h-[50vh] overflow-hidden flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n})`}}),u.jsx("div",{className:`absolute inset-0 ${s?"bg-black/70":"bg-white/70"}`}),u.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 z-10",children:u.jsxs(mt.div,{className:"flex flex-col items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[u.jsx(mt.h1,{className:`text-4xl md:text-5xl font-bold mb-4 text-center ${a}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:t}),u.jsx(mt.div,{className:`w-20 h-1 ${s?"bg-white":"bg-gray-800"} mb-6`,initial:{width:0},animate:{width:80},transition:{duration:.8,delay:.3}}),u.jsx(mt.p,{className:`text-xl text-center max-w-2xl ${s?"text-white":"text-gray-700"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:r})]})})]}),u.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 md:px-8 mt-8",children:u.jsxs(Tn,{to:"/#projects",className:"inline-flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),u.jsx("span",{children:"Back to Projects"})]})}),u.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 md:px-8 py-12",children:u.jsx(mt.div,{className:"prose prose-lg max-w-none",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e})})]})})},lke=()=>u.jsxs(P_,{title:"FireCat's 6th SENSE",subtitle:"Advanced safety system for high-risk environments",imageUrl:"/lovable-uploads/93ab0638-8190-4ccf-897f-21fda7f4f5ad.png",brandName:"FireCat Group",darkMode:!0,children:[u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: FireCat's 6th SENSE by WRLDS Technologies"}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),u.jsx("p",{children:"FireCat Group aimed to enhance the safety and operational effectiveness of personnel in high-risk environments such as law enforcement, military operations, and firefighting. They required an advanced, integrated sensor solution that could provide critical real-time data for risk management and decision-making."})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),u.jsx("p",{children:"Traditional approaches lacked comprehensive real-time tracking and situational awareness, leaving personnel vulnerable and decision-making delayed. The market required a robust solution capable of capturing essential data while being resilient enough for extreme conditions."}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),u.jsx("p",{children:"WRLDS Technologies provided an end-to-end solution called the 6th SENSE, combining sophisticated AI-driven sensors seamlessly integrated into uniforms. The solution features:"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(ca,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Main Unit"}),u.jsx("p",{children:"Secure real-time data transmission with encrypted communication."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(khe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"High-Quality Sensors"}),u.jsx("p",{children:"Durable sensors resistant to dust, water, and extreme temperatures."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(nhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Integrated Clothing"}),u.jsx("p",{children:"Customized shirts embedding AI-powered sensors, maintaining user comfort."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Gq,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Control Unit"}),u.jsx("p",{children:"Centralized AI interface providing transparent data visualization and management via an intuitive supervisor app."})]})]})]}),u.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Critical Features"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[u.jsx("li",{children:"Man Down Alarm for immediate alerts"}),u.jsx("li",{children:"Precise GPS positioning for location tracking"}),u.jsx("li",{children:"Real-time monitoring of vital signs"}),u.jsx("li",{children:"Easily accessible Panic Button for emergencies"})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Life-saving technology"}),u.jsx("p",{children:"Rapid data acquisition facilitates quicker responses in emergencies."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Technological advancement"}),u.jsx("p",{children:"Machine learning prevents false alarms by adapting to individual behavioral baselines."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Long-lasting and secure"}),u.jsx("p",{children:"Durable hardware with extended lifespan, robust encryption, and full GDPR compliance."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Easy Maintenance"}),u.jsx("p",{children:"Sensors are fully washable and require minimal maintenance."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"User-Friendly"}),u.jsx("p",{children:"Plug & Play installation within minutes, providing hours of continuous operation per charge."})]})]})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),u.jsx("p",{children:"FireCat successfully implemented the 6th SENSE solution, significantly enhancing situational awareness, safety, and operational efficiency of high-risk personnel. WRLDS' innovative platform and specialized knowledge allowed for rapid deployment, immediate positive impact, and a scalable model for future expansions."})]}),cke=()=>u.jsxs(P_,{title:"Performance Athletic Footwear",subtitle:"Revolutionary R&D for next-generation athletic footwear",imageUrl:"/lovable-uploads/b0622048-17b4-4c75-a3f0-6c9e17de1d09.png",brandName:"Global Sports Retail Leader",children:[u.jsx(xf,{title:"WRLDS - Performance Athletic Footwear Project",description:"Revolutionary R&D for next-generation athletic footwear with embedded textile sensors for real-time performance analytics and personalized footwear.",type:"article"}),u.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 flex items-center",children:[u.jsx(OO,{className:"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0"}),u.jsx("p",{className:"text-yellow-700 font-medium text-sm",children:"Ongoing R&D Project  Currently in Prototyping Phase"})]}),u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Smart Footwear Development"}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),u.jsx("p",{children:"A global sports retail leader approached WRLDS Technologies with a vision to revolutionize the development, fitting, and testing of athletic footwear. Their goal was to create a data-driven approach to footwear design that would enhance athlete performance while reducing development cycles."})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),u.jsx("p",{children:"Traditional footwear development relied heavily on subjective feedback and limited quantitative testing. The company needed a precise way to measure actual performance metrics, foot movements, and pressure distribution in real-world athletic scenarios. Additionally, they wanted to personalize footwear recommendations based on individual biomechanics."}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),u.jsx("p",{children:"WRLDS Technologies developed a comprehensive smart footwear R&D platform that includes:"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(phe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Embedded Sensors"}),u.jsx("p",{children:"Textile-based pressure and motion sensors integrated directly into prototype footwear."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx($O,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Real-time Analysis"}),u.jsx("p",{children:"Instant feedback on gait, pressure points, and energy transfer during athletic movements."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(ahe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Performance Metrics"}),u.jsx("p",{children:"Comprehensive data collection on acceleration, stability, and energy return across different sports movements."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Jfe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Athlete Cloud Platform"}),u.jsx("p",{children:"AI-powered analytics comparing performance across prototype iterations and athlete profiles."})]})]})]}),u.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Key Features"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[u.jsx("li",{children:"Machine washable sensor technology for extended testing periods"}),u.jsx("li",{children:"Low-profile design that doesn't interfere with natural movement"}),u.jsx("li",{children:"Cross-platform mobile app for real-time coaching and feedback"}),u.jsx("li",{children:"Materials testing module to evaluate durability and performance longevity"})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Preliminary Results"}),u.jsx("p",{children:"The smart footwear prototype platform has shown promising results in initial testing phases. The data-driven approach has not only provided valuable insights for product development but also opened new possibilities for personalized product recommendations in retail environments. Patent applications have been filed based on innovations developed during this ongoing project."}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[u.jsx(She,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Development Roadmap"}),u.jsx("p",{children:"WRLDS Technologies continues to partner with this client on this R&D initiative to refine the prototype and develop potential consumer versions of this technology, which could enable everyday athletes to benefit from professional-grade footwear analysis and recommendations."})]})]})]}),uke=()=>u.jsxs(P_,{title:"Workwear Climate Control",subtitle:"Intelligent temperature regulation for extreme work environments",imageUrl:"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",brandName:"European Multinational Textile Producer",children:[u.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6 flex items-center",children:[u.jsx(OO,{className:"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0"}),u.jsx("p",{className:"text-yellow-700 font-medium text-sm",children:"Ongoing R&D Project  Currently in Prototyping Phase"})]}),u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Advanced Climate Control Workwear"}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),u.jsx("p",{children:"A leading European textile manufacturer sought to create next-generation workwear for professionals operating in extreme temperature environments. From arctic construction workers to foundry operators, they needed a solution that could actively regulate body temperature without compromising mobility or safety compliance."})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),u.jsx("p",{children:"Traditional approaches to temperature regulation in workwear were either passive (insulation) or bulky active systems with external power sources and limited zoning capabilities. The client needed a fully integrated solution that could adapt to changing conditions, worker activity levels, and provide targeted temperature control while maintaining all safety certifications."}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),u.jsx("p",{children:"WRLDS Technologies developed a comprehensive climate control workwear platform featuring:"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Phe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Adaptive Heating/Cooling"}),u.jsx("p",{children:"Textile-integrated heating and cooling elements with multi-zone temperature control."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(zb,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Smart Control System"}),u.jsx("p",{children:"AI-driven controller that learns user preferences and optimizes power usage based on conditions."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Mhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Safety Integration"}),u.jsx("p",{children:"Systems designed to maintain all industry safety certifications including flame resistance and electrical safety."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(xhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Extreme Durability"}),u.jsx("p",{children:"Components rated for operation in extreme temperatures with full washability and construction durability."})]})]})]}),u.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Technical Specifications"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[u.jsx("li",{children:"Modular design supporting full-body integration or focused application"}),u.jsx("li",{children:"Extended battery life depending on conditions and settings"}),u.jsx("li",{children:"Smartphone app for manual control and environmental monitoring"}),u.jsx("li",{children:"Washable for multiple industrial cleaning cycles without performance degradation"}),u.jsx("li",{children:"Compliance with industry-specific safety standards"})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Preliminary Results"}),u.jsx("p",{children:"The prototype climate-controlled workwear has shown promising results in controlled testing environments. The technology is being evaluated by select industrial clients across Northern Europe and Canada, focusing on oil & gas, mining, and construction sectors operating in extreme climates. Initial feedback indicates significant potential for reducing cold-related work disruptions."}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[u.jsx(fhe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Ongoing Development"}),u.jsx("p",{children:"Current R&D efforts are focused on refining the prototypes, improving power efficiency, and exploring the potential to include environmental hazard detection capabilities and integration with wider workplace safety systems."})]})]})]}),dke=()=>u.jsxs(P_,{title:"Ice Hockey Elite Skill Tracker",subtitle:"Advanced motion analysis for optimal performance",imageUrl:"/lovable-uploads/c30e0487-2fa0-41d1-9a0b-699cb2855388.png",brandName:"Mars Blades",children:[u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Hockey Performance Analysis System"}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),u.jsx("p",{children:"Mars Blades, a leading innovator in hockey training equipment, sought to develop a system for quantifying and analyzing the specific movements that contribute to elite hockey performance. They approached WRLDS Technologies to create a solution that could capture detailed metrics during real skating sessions and translate that data into actionable insights for player development."})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),u.jsx("p",{children:"Previous attempts to measure hockey performance relied on multiple external sensors or camera systems that were cumbersome, expensive, and limited to controlled environments. Mars Blades needed a solution that was simple enough for daily use but sophisticated enough to capture the nuanced movements that differentiate elite players, particularly focusing on acceleration, speed transitions, and maneuverability on ice."}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),u.jsx("p",{children:"WRLDS Technologies developed a specialized single-point IMU (Inertial Measurement Unit) system embedded directly in hockey footwear that could:"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Gq,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Motion Pattern Recognition"}),u.jsx("p",{children:"Identify and categorize specific skating movements from crossovers to tight turns."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx($j,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Performance Metrics"}),u.jsx("p",{children:"Measure acceleration forces, edge angles, weight distribution, and power output in real-time."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(hhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Benchmark Comparisons"}),u.jsx("p",{children:"Compare athlete's movements to established elite player patterns and historical personal bests."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Ub,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Coach Integration"}),u.jsx("p",{children:"Provide coaches with detailed skill development metrics across team members."})]})]})]}),u.jsx("h4",{className:"text-xl font-semibold mb-4",children:"System Components"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[u.jsx("li",{children:"Embedded sensors designed to withstand the harsh conditions of ice hockey"}),u.jsx("li",{children:"Bluetooth connectivity with real-time data streaming to rinkside devices"}),u.jsx("li",{children:"Athlete-facing mobile app with immediate performance feedback"}),u.jsx("li",{children:"Coach dashboard for tracking player development and team trends"}),u.jsx("li",{children:"Machine learning algorithm that improves pattern recognition over time"})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Skill Development"}),u.jsx("p",{children:"Players using the system showed faster improvement in targeted skating skills."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Injury Prevention"}),u.jsx("p",{children:"Early detection of asymmetrical movements helped reduce strain-related injuries."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Elite Performance Insights"}),u.jsx("p",{children:"Identified specific movement patterns that correlate with elite acceleration and agility."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Coaching Efficiency"}),u.jsx("p",{children:"Reduced subjective assessment with quantifiable metrics for player development."})]})]})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),u.jsx("p",{children:"The Ice Hockey Elite Skill Tracker has been successfully adopted by professional teams and elite hockey academies across North America and Europe. Mars Blades has integrated the technology into their premium training products, creating a new standard for performance analysis in ice hockey. The data collected has also led to improvements in skate design and training methodologies based on the scientific insights provided."}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[u.jsx(she,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Research Impact"}),u.jsx("p",{children:"The data gathered from this project has contributed to academic research on elite athletic performance and has been cited in sports science publications focused on optimizing movement efficiency in winter sports."})]})]})]}),fke=()=>u.jsxs(P_,{title:"Dog Activity Counter",subtitle:"Smart monitoring for canine health and insurance",imageUrl:"/lovable-uploads/d5ce901e-2ce0-4f2a-bce1-f0ca5d6192df.png",brandName:"UK Insurance Giant",children:[u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-6 flex items-center",children:[u.jsx(OO,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}),u.jsx("p",{className:"text-green-700 font-medium text-sm",children:"Completed Prototype Project"})]}),u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Case Study: Smart Pet Monitoring System"}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Background"}),u.jsx("p",{children:"A leading UK insurance provider identified an opportunity to transform their pet insurance offerings by incorporating real-time health monitoring. They sought to develop a smart collar system that could track activity levels and vital signs, providing data for both preventative care and more accurate policy pricing."})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Challenge"}),u.jsx("p",{children:"Existing pet activity trackers suffered from short battery life, inaccurate data, and poor durability. Additionally, most lacked the comprehensive health monitoring capabilities needed to generate truly useful veterinary insights. The client needed a robust solution that pet owners would consistently use while providing reliable data for insurance assessments."}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Solution"}),u.jsx("p",{children:"WRLDS Technologies developed a specialized smart collar system that incorporates:"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(bhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Advanced Activity Tracking"}),u.jsx("p",{children:"Precise step counting with behavior pattern recognition (walking, running, playing, sleeping)."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(mhe,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Health Monitoring"}),u.jsx("p",{children:"Non-invasive sensors that detect resting heart rate, respiration patterns, and sleep quality."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(Nj,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Owner Application"}),u.jsx("p",{children:"User-friendly app providing health insights, activity recommendations, and preventative care alerts."})]})]}),u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-100 flex items-start",children:[u.jsx(qv,{className:"h-6 w-6 text-black mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Veterinary Dashboard"}),u.jsx("p",{children:"Clinical interface for veterinarians to review longitudinal health data and identify early warning signs."})]})]})]}),u.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Technical Specifications"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 mb-8",children:[u.jsx("li",{children:"Waterproof design for active dogs"}),u.jsx("li",{children:"Extended battery life with wireless charging capability"}),u.jsx("li",{children:"Lightweight with adjustable sizing for all breeds"}),u.jsx("li",{children:"Cellular and Bluetooth connectivity for continuous data transmission"}),u.jsx("li",{children:"Machine learning algorithms that adapt to individual pet patterns"})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits for Insurance Provider"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Risk Assessment"}),u.jsx("p",{children:"More accurate risk profiling for policy pricing based on actual activity levels."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Preventative Care"}),u.jsx("p",{children:"Early detection algorithms reduced costly emergency treatments."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Customer Engagement"}),u.jsx("p",{children:"Increased policy renewal rates among pet owners using the system."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Data Insights"}),u.jsx("p",{children:"Created valuable breed-specific health benchmarks from aggregated anonymous data."})]})]})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Benefits for Pet Owners"}),u.jsxs("div",{className:"space-y-6 mb-8",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Premium Discounts"}),u.jsx("p",{children:"Active pets qualify for reduction in insurance premiums."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Health Insights"}),u.jsx("p",{children:"Personalized health recommendations based on breed, age, and activity levels."})]})]}),u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center text-black mr-3 mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Peace of Mind"}),u.jsx("p",{children:"Real-time alerts for concerning changes in behavior or vital signs."})]})]})]}),u.jsx("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"Outcome"}),u.jsx("p",{children:"The prototype program was successfully implemented with a select group of pet owners across the UK, demonstrating the concept's viability and potential benefits. The insurance provider reported significant preliminary improvements in customer satisfaction and engagement metrics, while veterinary partners provided positive feedback on the system's ability to detect potential health issues earlier than conventional methods."}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mt-8 flex items-start",children:[u.jsx(ehe,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Industry Potential"}),u.jsx("p",{children:"This prototype demonstrated how a data-driven approach to pet insurance could represent a paradigm shift in the industry, where preventative care and real-time monitoring have the potential to transform the traditional reactive insurance model into a proactive health partnership between insurers, pet owners, and veterinarians."})]})]})]}),hke=()=>u.jsxs("div",{className:"w-full relative",children:[u.jsxs(mt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4",children:"Product"}),u.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-600 max-w-4xl",children:"5 years invested into tech focused end-to-end platform allowing customer brand to own pricing, branding, marketing and sales. Wrlds can help with all aspects of product creation, certification, initial production and app development."})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[u.jsx(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1",children:u.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-center mb-1",children:"Physical Devices"}),u.jsx("p",{className:"text-xs sm:text-sm text-center mb-4",children:"Data input"}),u.jsx("div",{className:"space-y-3",children:[{icon:u.jsx($j,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Motion Sensors"},{icon:u.jsx(zb,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Heart Rate Sensors"},{icon:u.jsx(rhe,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Wireless Connectivity"},{icon:u.jsx(_B,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Power Management"},{icon:u.jsx(qv,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Local Storage"},{icon:u.jsx(wB,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Cellular Connection"}].map((e,t)=>u.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 flex items-center",children:[u.jsx("div",{className:"mr-3 sm:mr-4 flex-shrink-0",children:e.icon}),u.jsx("span",{className:"text-gray-800 font-medium text-xs sm:text-sm",children:e.text})]},t))}),u.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["The hardware that collects data",u.jsx("br",{}),"from the physical world"]})]})}),u.jsx(mt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"hidden lg:flex items-center justify-center",children:u.jsx(Kc,{className:"text-black w-8 h-8"})}),u.jsx("div",{className:"flex lg:hidden items-center justify-center my-2",children:u.jsx(Kc,{className:"text-black w-6 h-6 rotate-90"})}),u.jsx(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex-[1.5]",children:u.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[u.jsxs("div",{className:"flex flex-col items-center mb-3 sm:mb-4",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-center mb-0",children:"wrlds"}),u.jsx("p",{className:"text-lg sm:text-xl font-medium text-center",children:"Platform"})]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:[{icon:u.jsx(qv,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Cloud Storage"},{icon:u.jsx($j,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Data Processing"},{icon:u.jsx(zb,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"AI & ML"},{icon:u.jsx(_B,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Power Opt."},{icon:u.jsx(Ph,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Software"},{icon:u.jsx(Nj,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Demo Apps"},{icon:u.jsx(wB,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Real-time Data"},{icon:u.jsx(xB,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Edge Compute"},{icon:u.jsx(Ph,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"APIs"},{icon:u.jsx(xB,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Infrastructure"},{icon:u.jsx(ohe,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Cloud"},{icon:u.jsx(Ph,{className:"w-4 h-4 sm:w-5 sm:h-5"}),name:"Dev Tools"}].map((e,t)=>u.jsxs("div",{className:"bg-white rounded-lg p-2 sm:p-3 text-center flex flex-col items-center justify-center",children:[u.jsx("div",{className:"mb-1 sm:mb-2",children:e.icon}),u.jsx("div",{className:"text-[10px] sm:text-xs",children:e.name})]},t))}),u.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["Our platform processes data and",u.jsx("br",{}),"powers intelligent applications"]})]})}),u.jsx(mt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"hidden lg:flex items-center justify-center",children:u.jsx(Kc,{className:"text-black w-8 h-8"})}),u.jsx("div",{className:"flex lg:hidden items-center justify-center my-2",children:u.jsx(Kc,{className:"text-black w-6 h-6 rotate-90"})}),u.jsx(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"flex-1",children:u.jsxs("div",{className:"bg-gray-200 rounded-xl p-4 sm:p-6",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-center mb-1",children:"User Applications"}),u.jsx("p",{className:"text-xs sm:text-sm text-center mb-4",children:"Data output"}),u.jsx("div",{className:"space-y-3",children:[{icon:u.jsx(_he,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Analytics Dashboard"},{icon:u.jsx(Nj,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Mobile Applications"},{icon:u.jsx(Vb,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Customized Reports"},{icon:u.jsx(Ph,{className:"text-black w-4 h-4 sm:w-5 sm:h-5"}),text:"Third-party Integration"}].map((e,t)=>u.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 flex items-center",children:[u.jsx("div",{className:"mr-3 sm:mr-4 flex-shrink-0",children:e.icon}),u.jsx("span",{className:"text-gray-800 font-medium text-xs sm:text-sm",children:e.text})]},t))}),u.jsxs("p",{className:"text-xs sm:text-sm text-center mt-4 sm:mt-6",children:["How people interact with and",u.jsx("br",{}),"benefit from the collected data"]})]})})]})]}),sn=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:St("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));sn.displayName="Card";const Zs=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:St("flex flex-col space-y-1.5 p-6",e),...t}));Zs.displayName="CardHeader";const Js=E.forwardRef(({className:e,...t},r)=>u.jsx("h3",{ref:r,className:St("text-2xl font-semibold leading-none tracking-tight",e),...t}));Js.displayName="CardTitle";const pke=E.forwardRef(({className:e,...t},r)=>u.jsx("p",{ref:r,className:St("text-sm text-muted-foreground",e),...t}));pke.displayName="CardDescription";const an=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:St("p-6 pt-0",e),...t}));an.displayName="CardContent";const mke=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:St("flex items-center p-6 pt-0",e),...t}));mke.displayName="CardFooter";const gke=()=>{FZ();const[e,t]=E.useState(0);return E.useEffect(()=>{const r=setTimeout(()=>t(100),100);return()=>clearTimeout(r)},[]),E.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx(bi,{children:u.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs(Tn,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),u.jsx(mt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl font-bold mb-6",children:"Technical Deep Dive"}),u.jsxs("div",{className:"prose prose-lg max-w-none",children:[u.jsx(mt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-base sm:text-lg text-gray-600 mb-12",children:"Explore the technical details behind our smart textile sensor technology and learn how our system architecture enables rapid development and deployment."}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Vb,{className:"w-5 h-5 text-gray-700"}),u.jsx("h2",{className:"text-2xl font-bold",children:"System Architecture"})]}),u.jsx("p",{className:"text-gray-600 mb-8 text-base max-w-3xl",children:"Our platform uses a three-tier architecture connecting physical devices to our cloud services and user applications. The diagram below illustrates how data flows through our system, from sensor collection to user-facing applications."}),u.jsx("div",{className:"w-full mb-6"}),u.jsx(sn,{className:"bg-white rounded-lg mb-10 border border-gray-200 shadow-sm",children:u.jsx(an,{className:"p-4 lg:p-6",children:u.jsx(hke,{})})})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Ph,{className:"w-5 h-5 text-gray-700"}),u.jsx("h2",{className:"text-2xl font-bold",children:"Our Approach"})]}),u.jsx("p",{className:"text-gray-600 mb-8 text-base max-w-3xl",children:"At WRLDS, we've developed a systematic approach to creating smart textile solutions that combines technical innovation with practical implementation. Our comprehensive development process ensures that every project moves efficiently from concept to market-ready product."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[{title:"Discovery",icon:u.jsx(zb,{className:"w-5 h-5 text-gray-700"}),description:"We begin with thorough market research and requirements gathering to understand your specific needs and opportunities."},{title:"Design & Prototyping",icon:u.jsx(Ph,{className:"w-5 h-5 text-gray-700"}),description:"Our teams create initial designs and functional prototypes that allow for early testing and iteration."},{title:"Development & Testing",icon:u.jsx(Vb,{className:"w-5 h-5 text-gray-700"}),description:"We rigorously develop and test all components to ensure they meet performance and reliability standards."}].map((r,n)=>u.jsxs(mt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3+n*.1},className:"bg-gray-50 p-6 rounded-lg border border-gray-100 hover:shadow-md transition-all duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.icon,u.jsx("h3",{className:"font-semibold text-lg",children:r.title})]}),u.jsx("p",{className:"text-gray-600 text-base",children:r.description})]},r.title))})]})]}),u.jsx("div",{className:"mt-16 pt-8 border-t border-gray-200",children:u.jsxs(Tn,{to:"/development-process",className:"inline-flex items-center px-5 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all group",children:["Explore Our Development Process",u.jsx(Kc,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})})})})},vke=()=>{const[e,t]=E.useState(1),r=E.useRef(null),n=E.useRef([]);E.useEffect(()=>{window.scrollTo(0,0)},[]);const i=[{id:1,title:"Textile Sensor Design",description:"We begin by designing custom textile sensors specifically for your industry and use case, selecting appropriate conductive materials and sensor types.",steps:["Industry-specific requirement analysis","Sensor type and material selection","Prototype sensor development","Initial testing and calibration"]},{id:2,title:"Garment Integration",description:"Our engineering team seamlessly integrates sensors into clothing and footwear while maintaining comfort, durability, and washability.",steps:["Ergonomic placement optimization","Non-intrusive integration techniques","Durability and washability testing","Comfort and user experience validation"]},{id:3,title:"AI & Data Analytics",description:"We develop specialized algorithms that transform textile sensor data into actionable insights unique to your industry requirements.",steps:["Industry-specific algorithm development","ML model training with domain data","Real-time analytics implementation","Insight delivery optimization"]},{id:4,title:"Production & Certification",description:"We handle manufacturing, quality control, and ensure all textile sensor products meet relevant industry standards and certifications.",steps:["Textile manufacturing partner selection","Quality assurance processes","Industry-specific certification procurement","Initial production supervision"]},{id:5,title:"Deployment & Support",description:"We provide comprehensive training, implementation assistance, and ongoing support to ensure successful adoption and continuous improvement.",steps:["User training and onboarding","Data interpretation guidance","Performance monitoring","Continuous improvement iterations"]}];return E.useEffect(()=>{n.current=i.map((s,a)=>n.current[a]||null)},[]),E.useEffect(()=>{const s=new IntersectionObserver(a=>{a[0].isIntersecting&&(a[0].target.classList.add("animate-fade-in"),a[0].target.style.opacity="1",s.unobserve(a[0].target))},{threshold:.1});return r.current&&s.observe(r.current),()=>s.disconnect()},[]),E.useEffect(()=>{const s=()=>{const o=window.innerHeight/2;let l=null,c=1/0;n.current.forEach((f,d)=>{if(!f)return;const h=f.getBoundingClientRect(),p=h.top+h.height/2,m=Math.abs(p-o);m<c&&(c=m,l=d)}),l!==null&&t(l+1)};return window.addEventListener("scroll",s,{passive:!0}),setTimeout(s,100),()=>window.removeEventListener("scroll",s)},[]),u.jsx(bi,{children:u.jsx("section",{className:"pt-24 pb-16",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs(Tn,{to:"/",className:"flex items-center text-gray-500 hover:text-gray-700 mb-8",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),u.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Our Structured Development Process"}),u.jsxs("div",{className:"prose prose-lg max-w-none",children:[u.jsx("p",{className:"text-xl text-gray-600 mb-12",children:"We've refined our development methodology to minimize risk and maximize innovation, ensuring your textile sensor project moves efficiently from concept to reality."}),u.jsxs("div",{className:"relative mt-12",ref:r,style:{opacity:0},children:[u.jsx("div",{className:"hidden md:block absolute top-0 left-1/2 w-0.5 h-full bg-gray-200 -translate-x-1/2"}),u.jsx("div",{className:"space-y-10 relative",children:i.map((s,a)=>u.jsxs("div",{ref:o=>n.current[a]=o,className:St("relative flex flex-col md:flex-row md:items-center gap-6",a%2===0?"md:flex-row":"md:flex-row-reverse text-right"),children:[u.jsxs("div",{className:"md:w-1/2",children:[u.jsx("div",{className:St("md:absolute top-0 left-1/2 md:-translate-x-1/2 w-12 h-12 rounded-full flex items-center justify-center z-10 transition-all duration-300",e===s.id?"bg-gray-700 text-white scale-110":"bg-white text-gray-700 border border-gray-300"),onClick:()=>t(s.id),children:u.jsx("span",{className:"font-bold",children:s.id})}),u.jsx("h3",{className:"text-xl font-bold mb-2 mt-3 md:mt-0",children:s.title}),u.jsx("p",{className:"text-gray-600 mb-3 text-sm",children:s.description}),u.jsx("button",{onClick:()=>t(s.id),className:St("text-sm font-medium transition-colors",e===s.id?"text-gray-700":"text-gray-500 hover:text-gray-700"),children:e===s.id?"Currently Viewing":"View Details"})]}),u.jsxs("div",{className:St("md:w-1/2 bg-white rounded-xl p-5 shadow-sm border border-gray-100 transition-all duration-300",e===s.id?"opacity-100 translate-y-0 shadow-md border-gray-200":"opacity-50 md:opacity-30 hover:opacity-70 cursor-pointer"),onClick:()=>t(s.id),children:[u.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Key Activities:"}),u.jsx("ul",{className:"space-y-2",children:s.steps.map((o,l)=>u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-gray-100 flex items-center justify-center mt-0.5 mr-2",children:u.jsx(CO,{className:"w-3 h-3 text-gray-700"})}),u.jsx("span",{className:"text-gray-700 text-sm text-left",children:o})]},l))})]})]},s.id))})]}),u.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg my-12 border border-gray-100",children:[u.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Our Development Principles"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start",children:[u.jsx(ns,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),u.jsx("span",{children:"Rapid iteration cycles for continuous improvement"})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx(ns,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),u.jsx("span",{children:"Transparent communication throughout the development process"})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx(ns,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),u.jsx("span",{children:"Modular architecture allowing for flexible and scalable solutions"})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx(ns,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),u.jsx("span",{children:"Risk mitigation strategies built into every phase"})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx(ns,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),u.jsx("span",{children:"Focus on user experience and practical functionality"})]})]})]})]}),u.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:u.jsxs(Tn,{to:"/tech-details",className:"inline-flex items-center px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all group",children:["Explore Our Technology",u.jsx(yke,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})})})})},yke=({className:e="w-4 h-4"})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"m12 5 7 7-7 7"})]}),IV=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx(bi,{children:u.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsx(mt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold mb-36 text-center",children:"Keit me olemme ja miksi OmaVerkkoturva syntyi?"}),u.jsxs("div",{className:"prose prose-lg max-w-none",children:[u.jsxs(mt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[u.jsx("div",{className:"flex justify-center lg:order-1",children:u.jsx("div",{className:"w-48 h-48 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-gray-500",children:"Kuva tulossa"})})}),u.jsxs("div",{className:"lg:order-2",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ketk me olemme?"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Me olemme Arttu Ruotsalainen ja Arttu Simanainen. Olemme tehneet uraa tietoliikennepalveluiden parissa, ja tymme kautta olemme nhneet lhelt, kuinka laajaa nettirikollisuus on ja miten helposti tavalliset ihmiset voivat joutua huijausten ja identiteettivarkauksien kohteeksi. Usein olemme huomanneet, ett tarjolla olevat ratkaisut jvt pintapuolisiksi eivtk auta ihmisi riittvn konkreettisesti. Halusimme muuttaa tmn ja tuoda markkinoille turvan, jossa on oikeasti sislt ja joka tarjoaa mys kytnnn apua."})]})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Missiomme"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Meidn tavoite on yksinkertainen: haluamme tehd suomalaisista turvattuja verkossa. Jokaisella tulisi olla suoja, joka est identiteettivarkaudet ja auttaa silloin, kun jotain ikv ehtii jo tapahtua."})]}),u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl flex items-center justify-center text-white text-center p-4",children:u.jsx("div",{className:"text-lg font-semibold",children:"Kuvat tulossa"})})})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[u.jsx("div",{className:"flex justify-center lg:order-1",children:u.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center text-white text-center p-4",children:u.jsx("div",{className:"text-lg font-semibold",children:"Kuvat tulossa"})})}),u.jsxs("div",{className:"lg:order-2",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Visiomme"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Haluamme, ett jokainen suomalainen voi kytt netti ilman jatkuvaa huolta siit, mihin omat tiedot ptyvt. Me uskomme, ett hyv digitaalinen turva ei ole vain palomuureja ja salasanoja, vaan mielenrauhaa ja sit, ett jos jotain sattuukin, et j yksin. Siksi rakennamme palvelua, joka tunnistaa uhat ajoissa, auttaa sinua toimimaan heti ja seisoo rinnallasi, jos vahinko ehtii tapahtua. Meidn unelma on, ett verkossa liikkuminen olisi yht huoleton asia kuin kvely kotipihalla."})]})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-36",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Mit OmaVerkkoturva tekee?"}),u.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"Tarjoamme palvelun, joka auttaa ennaltaehkisemn identiteettivarkauksia ja reagoimaan nopeasti, jos jotain sattuu. Me ymmrrmme, ett huijaukset kehittyvt jatkuvasti ja siksi kehitmme mys itsemme sek teknologiaamme jatkuvasti mukana."}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Palveluumme sisltyy mys vakuutus, joka kattaa kyberrikollisuudesta aiheutuneita taloudellisia menetyksi. Nin voit liikkua verkossa varmemmin ja tiedt, ett sinulla on selusta turvattu."})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-36 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Tuki ja turva - aina lsn"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Osaamisemme ei rajoitu pelkstn tietoturvaan, vaan haluamme olla tukena mys kaikissa tietoliikenteeseen liittyviss kysymyksiss ja haasteissa, sill kyse on kokonaisuudessaan laajasta ja toisiinsa linkittyvst kentst."})]}),u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-48 h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-gray-500",children:"Kuva tulossa"})})})]}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-12",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Turvallinen verkko kuuluu kaikille"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Verkkorikollisuus kasvaa koko ajan, mutta niin kasvaa mys tietoisuus. Me haluamme olla mukana rakentamassa Suomea, jossa jokainen voi tuntea olonsa turvalliseksi netiss - ist, taustasta tai teknisest osaamisesta riippumatta."})]})]})]})})})})),_ke=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx("div",{className:"min-h-screen bg-white",children:u.jsx(bi,{showContact:!1,children:u.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs(Tn,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),u.jsx(mt.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold mb-6",children:"Join Our Team"}),u.jsxs("div",{className:"prose prose-lg max-w-none",children:[u.jsx(mt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-xl text-gray-600 mb-4",children:"We're looking for passionate innovators to help us revolutionize the smart textile industry."}),u.jsx(mt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-xl text-gray-600 mb-12",children:"We welcome both full-time professionals and interns who are eager to contribute to groundbreaking technology."}),u.jsxs(mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16",children:[u.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Why Join WRLDS?"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{title:"Innovation",description:"Work on cutting-edge technology that's changing multiple industries."},{title:"Impact",description:"Create solutions that enhance safety, performance, and quality of life."},{title:"Growth",description:"Develop your skills in a rapidly expanding field with diverse challenges."}].map((e,t)=>u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 h-full",children:[u.jsx("h3",{className:"font-bold text-lg mb-2",children:e.title}),u.jsx("p",{className:"text-gray-600",children:e.description})]},t))}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 shadow-sm mt-12",children:[u.jsx("h3",{className:"font-bold text-xl mb-6",children:"Contact Our COO"}),u.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("img",{src:"/lovable-uploads/a9bb9110-964a-43b0-a5ab-7162140cd133.png",alt:"Love Anderberg",className:"w-32 h-32 rounded-full mb-4 object-cover filter grayscale"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Love Anderberg"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"COO"}),u.jsxs("div",{className:"flex flex-col space-y-3",children:[u.jsxs("a",{href:"mailto:love@wrlds.com",className:"flex items-center text-gray-700 hover:text-blue-600",children:[u.jsx(W1,{className:"w-5 h-5 mr-2"}),"love@wrlds.com"]}),u.jsxs("a",{href:"https://www.linkedin.com/in/love-anderberg-67549a174/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-blue-600",children:[u.jsx(ghe,{className:"w-5 h-5 mr-2"}),"LinkedIn Profile"]}),u.jsxs("a",{href:"tel:+46760149508",className:"flex items-center text-gray-700 hover:text-blue-600",children:[u.jsx(y_,{className:"w-5 h-5 mr-2"}),"076-014 95 08"]})]})]})})]})]})]})]})})})})})),xke=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx(bi,{children:u.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs(Tn,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-gray-700 mb-6 transition-colors",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),u.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Privacy Policy"}),u.jsxs("div",{className:"prose prose-lg max-w-none",children:[u.jsx("p",{className:"text-gray-600 mb-6",children:"Last updated: April 11, 2025"}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"1. Introduction"}),u.jsx("p",{className:"text-gray-600 mb-4",children:'At WRLDS Technologies ("we," "our," or "us"), we respect your privacy and are committed to protecting your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website or use our services.'}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"2. Information We Collect"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We may collect personal information that you voluntarily provide to us when you:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-600",children:[u.jsx("li",{children:"Contact us through our website"}),u.jsx("li",{children:"Subscribe to our newsletter"}),u.jsx("li",{children:"Register for our services"}),u.jsx("li",{children:"Participate in our surveys or promotions"})]}),u.jsx("p",{className:"text-gray-600 mb-4",children:"This information may include your name, email address, company name, phone number, and any other information you choose to provide."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"3. How We Use Your Information"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We may use the information we collect for various purposes, including to:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-600",children:[u.jsx("li",{children:"Provide, operate, and maintain our services"}),u.jsx("li",{children:"Improve, personalize, and expand our services"}),u.jsx("li",{children:"Understand and analyze how you use our services"}),u.jsx("li",{children:"Develop new products, services, features, and functionality"}),u.jsx("li",{children:"Communicate with you about our services, updates, and other information"}),u.jsx("li",{children:"Process transactions and send related information"}),u.jsx("li",{children:"Find and prevent fraud"})]}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"4. Cookies and Tracking Technologies"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We may use cookies and similar tracking technologies to track activity on our website and store certain information. Cookies are files with a small amount of data that may include an anonymous unique identifier. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"5. Third-Party Services"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We may use third-party services that collect, monitor, and analyze data to improve our services. These third parties have their own privacy policies addressing how they use such information."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"6. Data Retention"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We will retain your personal information only for as long as is necessary for the purposes set out in this Privacy Policy."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"7. Security"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"The security of your data is important to us, but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"8. Your Rights"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Depending on your location, you may have certain rights regarding your personal information, such as the right to access, correct, or delete your personal information."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"9. Changes to This Privacy Policy"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. We will let you know via email and/or a prominent notice on our website prior to the change becoming effective."}),u.jsx("h2",{className:"text-2xl font-semibold mt-8 mb-4",children:"10. Contact Us"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"If you have any questions about this Privacy Policy, please contact us at hello@wrlds.com"})]})]})})})})),DV=({title:e,excerpt:t,imageUrl:r,date:n,slug:i,category:s})=>u.jsx(Tn,{to:`/blog/${i}`,children:u.jsx(sn,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 h-full",children:u.jsxs("div",{className:"grid grid-rows-[200px,1fr]",children:[u.jsx("div",{className:"bg-cover bg-center",style:{backgroundImage:`url('${r}')`},children:u.jsx("div",{className:"w-full h-full bg-black/20 flex items-center justify-center",children:u.jsx("span",{className:"px-3 py-1 bg-white/10 backdrop-blur-sm rounded-full text-sm font-medium text-white inline-block",children:s})})}),u.jsxs(an,{className:"p-6",children:[u.jsx("p",{className:"text-gray-500 text-sm mb-2",children:n}),u.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:e}),u.jsx("p",{className:"text-gray-700 mb-4 line-clamp-3",children:t}),u.jsxs(ln,{variant:"outline",className:"group mt-auto",children:["Read more",u.jsx(Kc,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})})}),ah=[{id:"6",title:"Wearable Safety Tech: Protecting Workers While Delivering Real ROI",slug:"wearable-safety-tech-protecting-workers-roi",excerpt:"Discover how wearable safety technology puts worker wellbeing first while delivering measurable business benefits through injury prevention and enhanced workplace safety.",date:"June 12, 2025",author:"WRLDS Technologies",category:"Business",imageUrl:"/lovable-uploads/078a129e-0f98-4d91-af61-873687db1a04.png",keywords:["wearable safety technology","workplace injury prevention","worker safety","safety ROI","ergonomic sensors","workplace safety investment","industrial wearables","occupational safety","safety technology partnerships","worker protection","safety innovation","workplace wellbeing"],metaDescription:"Learn how wearable safety technology prioritizes worker protection while delivering proven business benefits. Real data shows significant injury reduction and improved workplace safety.",content:[{type:"paragraph",content:"Every worker deserves to go home safe at the end of their shift. That fundamental principle drives the evolution of workplace safety technology, where protecting people has always been the primary goal. What's remarkable about today's wearable safety technology is how it achieves this mission while also delivering tangible business benefits."},{type:"stats",statsData:[{value:"2.2",label:"Workplace injuries per 100 workers annually",icon:"Users"},{value:"$43K",label:"Average cost per medically consulted injury",icon:"DollarSign"},{value:"58%",label:"Injury reduction reported by early adopters",icon:"TrendingUp"}]},{type:"heading",content:"The Human Cost Behind the Numbers"},{type:"paragraph",content:"Behind every workplace injury statistic is a person: someone's parent, partner, or child. The data tells a sobering story about workplace safety in America. When we can prevent injuries before they happen, we're not just protecting company assets. We're preserving families and communities."},{type:"heading",content:"Real Results from Wearable Safety Technology"},{type:"paragraph",content:"The effectiveness of wearable safety technology becomes clear when we examine documented case studies and vendor-reported results. These implementations show real workers in demanding environments using technology that helps them stay safe while doing their jobs effectively."},{type:"subheading",content:"Documented Industry Results"},{type:"icon-list",items:["Companies report significant reductions in workplace injuries with consistent wearable device usage","Workers feel more confident and supported knowing technology is monitoring their safety","Safety managers gain real-time insights into workplace hazards and risk patterns","Insurance providers recognize the value with bundled policies for high-adoption organizations"]},{type:"heading",content:"When Safety and Business Align"},{type:"paragraph",content:"Effective safety technology creates a virtuous cycle where prioritizing people leads to positive business outcomes. When injuries decrease, so do workers' compensation claims, replacement worker costs, and operational disruptions."},{type:"table",tableData:{headers:["Safety Outcome","Human Impact","Business Benefit"],rows:[["Fewer back injuries","Workers maintain mobility and quality of life","Reduced comp claims and medical costs"],["Better ergonomic awareness","Less fatigue and chronic pain","Higher productivity and retention"],["Early hazard detection","Prevention of serious accidents","Avoided downtime and investigations"],["Real-time feedback","Workers feel supported and valued","Improved safety culture and morale"]]}},{type:"heading",content:"Growing Market for Worker-Centered Safety"},{type:"paragraph",content:"The market for wearable safety technology is expanding rapidly, reflecting a cultural shift toward prioritizing worker safety and wellbeing. Technology serves as an enabler rather than a replacement for human judgment and care."},{type:"paragraph",content:"Industry analysts project substantial growth in the wearable safety market over the coming years. Starting from a market value of $1.6 billion in 2023, the sector is expected to grow steadily to $2.1 billion in 2024, reaching $2.7 billion by 2025. This growth trajectory continues with projections of $3.3 billion in 2026, $3.8 billion in 2027, and $4.2 billion by 2028. This expansion reflects increasing organizational commitment to worker safety and the proven value of wearable safety solutions."},{type:"heading",content:"How WRLDS Supports Your Safety Mission"},{type:"paragraph",content:"We understand that every organization's safety challenges are unique. That's why we've built a flexible platform that can adapt to your specific needs while maintaining our core focus on worker protection."},{type:"subheading",content:"Our Collaborative Approach"},{type:"icon-list",items:["Flexible integration that works with your existing safety programs and doesn't disrupt worker routines","White-label solutions that let you maintain your brand identity while providing cutting-edge safety technology","Proven supply chain partnerships that ensure reliable, high-quality components for long-term deployment","Data insights that help you understand and improve your safety culture, not just track compliance metrics"]},{type:"heading",content:"Start the Conversation"},{type:"paragraph",content:"We'd love to learn about your safety goals and specific challenges. Whether you're looking to reduce particular types of injuries, improve safety culture, or explore how technology can support your existing programs, we're here to listen and collaborate."},{type:"paragraph",content:"Bring your organization's injury and loss data, and we'll work together to calculate potential benefits using your actual numbers. We can help you explore how wearable technology might fit into your comprehensive safety strategy. No hard sell, no one-size-fits-all solutions: just an honest conversation about protecting the people who make your organization successful."},{type:"quote",content:"Great safety partnerships start with shared values: putting workers first, building trust through transparency, and believing that everyone deserves to work in an environment where they can thrive safely."},{type:"heading",content:"Sources and References"},{type:"bibliography",items:["National Safety Council, Work Injury Costs, Injury Facts, 2024 edition. Available at: injuryfacts.nsc.org","US Bureau of Labor Statistics, Employer-Reported Workplace Injuries and Illnesses, 2023, Table 1. Available at: bls.gov","Occupational Safety and Health Administration, Safety Pays Individual Injury Estimator. Available at: osha.gov",'Digi International, "Kinetic Creates an Innovative Wearable That Reduces Workplace Injuries," customer story, 2024. Available at: digi.com',`"Want Wearable Tech With That Workers' Comp Policy?" Insurance Journal, 2021. Available at: insurancejournal.com`,'"Nationwide, Kinetic Team on Wearable Workplace Safety Technology," Carrier Management, 2021. Available at: carriermanagement.com','Markets and Markets, "Wearable Sensors Market Size, Share, Industry Report," 2024 update. Available at: marketsandmarkets.com']}]},{id:"5",title:"Smart PPE Revolution: How Safety Technology is Transforming Worker Protection",slug:"smart-ppe-revolution-safety-technology",excerpt:"Discover how smart textiles and sensor technology are revolutionizing personal protective equipment, creating safer workplaces and preventing accidents before they happen.",date:"June 5, 2025",author:"WRLDS Technologies",category:"Innovation",imageUrl:"/lovable-uploads/927dae7e-6aaf-4b76-add2-1287a1dd9dc0.png",keywords:["smart PPE","safety technology","personal protective equipment","smart textiles","workplace safety","wearable sensors","construction safety","industrial IoT","worker protection","safety monitoring","smart helmets","connected safety gear","occupational safety","safety innovation","protective equipment technology"],metaDescription:"Learn how smart PPE with integrated sensors is revolutionizing workplace safety. Discover the latest innovations in intelligent personal protective equipment that prevent accidents and save lives.",content:[{type:"paragraph",content:"The realm of personal protective equipment (PPE) is undergoing a significant transformation, driven by advancements in smart textiles and sensor technology. Traditional PPE, designed as a passive barrier against workplace hazards, is evolving into intelligent, interconnected systems that actively monitor conditions and provide real-time alerts. This shift is creating safer work environments and preventing accidents before they occur."},{type:"heading",content:"The Evolution of PPE: From Passive to Proactive"},{type:"paragraph",content:"For decades, PPE has primarily served as a last line of defense, offering limited protection and often failing to address the underlying causes of accidents. However, the integration of smart technology is enabling a proactive approach to safety, where PPE not only protects but also anticipates and mitigates risks."},{type:"subheading",content:"Key Components of Smart PPE"},{type:"list",items:["Embedded Sensors: Detecting environmental conditions, physiological parameters, and potential hazards.","Connectivity: Enabling real-time data transmission and communication between workers, supervisors, and emergency responders.","Data Analytics: Providing insights into worker performance, risk factors, and safety trends.","Alert Systems: Triggering automated warnings and notifications to prevent accidents and ensure timely intervention."]},{type:"heading",content:"Real-World Applications of Smart PPE"},{type:"subheading",content:"Construction Industry"},{type:"paragraph",content:"In construction, smart helmets equipped with sensors can detect falls, monitor head impacts, and alert emergency services. Smart vests can track worker location, monitor vital signs, and detect exposure to hazardous substances."},{type:"subheading",content:"Manufacturing Sector"},{type:"paragraph",content:"In manufacturing, smart gloves can provide real-time feedback on worker movements, preventing repetitive strain injuries. Smart eyewear can offer augmented reality overlays, guiding workers through complex tasks and reducing errors."},{type:"subheading",content:"Healthcare Environment"},{type:"paragraph",content:"In healthcare, smart gowns can monitor patient vital signs, detect infections, and alert medical staff. Smart masks can track air quality, filter out harmful particles, and provide real-time feedback on respiratory function."},{type:"heading",content:"The Future of Worker Protection"},{type:"paragraph",content:"As technology continues to advance, smart PPE is poised to become an indispensable tool for ensuring worker safety and well-being. By providing real-time data, automated alerts, and proactive risk mitigation, smart PPE is transforming the way we approach safety in the workplace."},{type:"quote",content:"Smart PPE is not just about protecting workers; it's about empowering them with the knowledge and tools they need to stay safe and productive."}]},{id:"4",title:"Leveraging Sensor Technology in Product Development: A Strategic Approach",slug:"leveraging-sensor-technology-product-development",excerpt:"Explore how sensor technology is revolutionizing product development across industries, from smart textiles to IoT devices, and learn strategic approaches for implementation.",date:"May 8, 2025",author:"WRLDS Technologies",category:"Technology",imageUrl:"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",keywords:["sensor technology","product development","smart textiles","IoT sensors","wearable technology","textile sensors","manufacturing innovation","embedded sensors","smart fabrics","sensor integration"],metaDescription:"Discover how sensor technology is transforming product development. Learn strategic approaches for integrating sensors into textiles and manufacturing processes.",content:[{type:"paragraph",content:"Sensor technology is rapidly transforming product development across various industries. From smart textiles that monitor vital signs to IoT devices that automate home functions, sensors are enabling a new era of intelligent and responsive products. This article explores how businesses can strategically leverage sensor technology to enhance their product development processes."},{type:"heading",content:"The Shift from Manual Testing to Sensor-Driven Insights"},{type:"paragraph",content:"Traditional product development often relies on manual testing and subjective feedback, which can be time-consuming and prone to errors. Sensor technology offers a more objective and data-driven approach, providing real-time insights into product performance and user behavior. By embedding sensors into prototypes and early-stage products, developers can gather valuable data on usage patterns, environmental conditions, and potential failure points."},{type:"subheading",content:"Key Benefits of Sensor Integration"},{type:"list",items:["Real-time Performance Measurement: Sensors provide continuous data on product performance, allowing developers to identify and address issues quickly.","Automated Testing: Sensors can automate testing processes, reducing the need for manual intervention and accelerating development cycles.","Data-Driven Insights: Sensor data provides valuable insights into user behavior, enabling developers to optimize product design and functionality.","Predictive Maintenance: Sensors can detect early signs of wear and tear, allowing for proactive maintenance and preventing costly downtime."]},{type:"heading",content:"Real-time Performance Measurement Made Easy"},{type:"paragraph",content:"One of the most significant advantages of sensor technology is its ability to provide real-time performance measurement. By embedding sensors into products, developers can continuously monitor key metrics such as temperature, pressure, vibration, and strain. This data can be used to identify potential issues, optimize product performance, and ensure that products meet design specifications."},{type:"heading",content:"Faster Iterations Through Automated Testing and AI"},{type:"paragraph",content:"Sensor technology can also be used to automate testing processes, reducing the need for manual intervention and accelerating development cycles. By integrating sensors with AI algorithms, developers can create intelligent testing systems that automatically identify and diagnose issues. These systems can also be used to predict product failures, allowing for proactive maintenance and preventing costly downtime."},{type:"heading",content:"Key Business Benefits"},{type:"table",tableData:{headers:["Industry","Challenge","Sensor Solution"],rows:[["Construction","Monitoring worker safety on construction sites","Wearable sensors that detect falls, monitor vital signs, and alert emergency services."],["Manufacturing","Preventing equipment failures in manufacturing plants","Embedded sensors that monitor equipment performance, detect early signs of wear and tear, and trigger maintenance alerts."],["Healthcare","Monitoring patient health in hospitals and clinics","Wearable sensors that track vital signs, detect infections, and alert medical staff."]]}},{type:"heading",content:"Ready to Transform Your Product Development?"},{type:"paragraph",content:"Sensor technology is revolutionizing product development across industries, offering a more objective, data-driven, and efficient approach. By strategically leveraging sensor technology, businesses can enhance their product development processes, improve product performance, and gain a competitive edge."}]},{id:"3",title:"From Idea to Launch: Our Smart Product Development Process",slug:"from-idea-to-launch-development-process",excerpt:"Take a behind-the-scenes look at how WRLDS transforms ideas into market-ready smart products through our proven 5-step development process.",date:"May 15, 2025",author:"WRLDS Technologies",category:"Process",imageUrl:"/lovable-uploads/5262afdb-dd24-4d5e-be66-7c6717adbca9.png",keywords:["product development","smart product design","development process","prototyping","manufacturing","product launch","innovation process","textile development","smart textiles"],metaDescription:"Learn about WRLDS proven 5-step process for developing smart products from initial concept to market launch. Discover how we turn ideas into reality.",content:[{type:"paragraph",content:"At WRLDS, we simplify the journey from an idea to a finished smart product. Whether you're starting from scratch or already have a clear concept ready to scale, we're here to support you exactly where you need us."},{type:"paragraph",content:"Let's walk through our process with an example: Imagine you come to us with the idea of a smart glove. This glove automatically senses the outside temperature and adjusts its own warmth accordingly. It also connects to an app where you can control settings and view temperature information."},{type:"heading",content:"Step 1: Understanding Your Idea"},{type:"paragraph",content:"It all starts with a clear conversation. When you bring us your glove idea, we first meet to fully understand your vision and requirements. We'll discuss key points: What problem does the product solve? Who will use it? After that, we set a clear and practical roadmap."},{type:"paragraph",content:"If you already have a basic prototype or idea, we'll quickly identify how we can help scale it effectively."},{type:"heading",content:"Step 2: Building the First Prototype"},{type:"paragraph",content:"Once the plan is set, our team moves quickly to develop the first working prototype. For your smart glove, we design temperature sensors, heating elements, electronics, and the companion app to work seamlessly together."},{type:"paragraph",content:"We use rapid prototyping techniques like 3D printing and quick electronics integration. Within weeks, you get a tangible product to test and gather feedback."},{type:"heading",content:"Step 3: Testing & Refinement"},{type:"paragraph",content:"With your prototype ready, we jump into testing. You'll evaluate the glove under real-world conditions to identify improvements. Together, we'll adjust designs, optimize the heating response, enhance the app, and retest frequently."},{type:"paragraph",content:"This process is quick, iterative, and practical, bringing you closer to a reliable, user-friendly product."},{type:"heading",content:"Step 4: Preparing for Production"},{type:"paragraph",content:"Next, we prepare the glove for large-scale manufacturing. We refine the design for efficient production, select reliable components, and ensure quality at scale."},{type:"paragraph",content:"If you already have a manufacturing partner, we'll work closely with them. If not, we'll help you find the best production solution. In either case, we'll integrate the technology smoothly into the production process."},{type:"heading",content:"Step 5: Product Launch"},{type:"paragraph",content:"Finally, it's launch day. You introduce your smart glove, thoroughly tested and production-ready, to the market. WRLDS provides ongoing support to ensure a smooth launchfrom technical documentation to supporting the app's release."},{type:"heading",content:"Why Choose WRLDS?"},{type:"paragraph",content:"Developing smart products can be complex, but we make it simple. Clients choose us because:"},{type:"list",items:["Clear Process: Simple steps, clear timelines, and reduced risks.","Speed & Flexibility: Rapid prototyping and agile iterations get your product to market faster.","Comprehensive Expertise: Hardware, software, and design experts under one roof.","Practical Results: Real-world testing ensures your final product meets user needs."]},{type:"paragraph",content:"Have an idea or ready to scale an existing product? We'd love to hear from you and help bring your vision to life. Reach out and let's get started!"}]},{id:"2",title:"AI-Powered Uniforms: The Future of Emergency Response and Worker Safety",slug:"ai-powered-uniforms-emergency-alerts",excerpt:"Explore how AI-integrated uniforms are revolutionizing emergency response by providing real-time health monitoring and automated alert systems for first responders and industrial workers.",date:"May 8, 2025",author:"WRLDS Technologies",category:"Innovation",imageUrl:"/lovable-uploads/4187f423-ba69-4043-be76-c43098488348.png",keywords:["AI uniforms","emergency response","worker safety","smart uniforms","health monitoring","first responders","safety technology","wearable AI"],metaDescription:"Discover how AI-powered uniforms are transforming emergency response and worker safety with real-time monitoring and automated alerts.",content:[{type:"paragraph",content:"The integration of artificial intelligence (AI) into everyday workwear is no longer a futuristic concept but a rapidly evolving reality. AI-powered uniforms are poised to revolutionize emergency response and worker safety by providing real-time health monitoring and automated alert systems for first responders and industrial workers."},{type:"heading",content:"The Convergence of AI and Wearable Technology"},{type:"paragraph",content:"The convergence of AI and wearable technology has paved the way for the development of smart uniforms capable of collecting and analyzing vast amounts of data. These uniforms are equipped with an array of sensors that monitor vital signs, environmental conditions, and potential hazards."},{type:"subheading",content:"Key Features of AI-Powered Uniforms"},{type:"list",items:["Real-time Health Monitoring: AI-powered uniforms continuously monitor vital signs such as heart rate, body temperature, and blood pressure, providing early warnings of potential health issues.","Automated Alert Systems: In the event of a medical emergency or hazardous situation, AI-powered uniforms can automatically alert emergency responders, providing critical information about the worker's location and condition.","Environmental Monitoring: AI-powered uniforms can detect exposure to hazardous substances, such as toxic gases or radiation, and provide real-time alerts to workers and supervisors.","Performance Optimization: AI-powered uniforms can track worker movements and provide feedback on posture and ergonomics, helping to prevent injuries and improve performance."]},{type:"heading",content:"Transforming Emergency Response"},{type:"paragraph",content:"AI-powered uniforms are particularly valuable in emergency response scenarios, where time is of the essence. By providing real-time health monitoring and automated alert systems, these uniforms can help first responders quickly identify and address medical emergencies, potentially saving lives."},{type:"heading",content:"Enhancing Worker Safety"},{type:"paragraph",content:"AI-powered uniforms can also play a crucial role in enhancing worker safety in industrial settings. By monitoring environmental conditions and worker movements, these uniforms can help prevent accidents and injuries, creating a safer and more productive work environment."},{type:"quote",content:"AI-powered uniforms are not just about protecting workers; they're about empowering them with the knowledge and tools they need to stay safe and healthy."}]},{id:"1",title:"The Rise of Sensor-Integrated Textiles: A New Era in Smart Manufacturing",slug:"sensor-integrated-textiles-trend",excerpt:"Discover how sensor-integrated textiles are transforming industries from healthcare to sports, creating new possibilities for smart, responsive products.",date:"May 2, 2025",author:"WRLDS Technologies",category:"Technology",imageUrl:"/lovable-uploads/48ecf6e2-5a98-4a9d-af6f-ae2265cd4098.png",keywords:["smart textiles","sensor integration","smart manufacturing","wearable technology","textile innovation","smart fabrics","textile sensors"],metaDescription:"Learn about the revolutionary trend of sensor-integrated textiles and how they are creating new possibilities in smart manufacturing.",content:[{type:"paragraph",content:"Sensor-integrated textiles are rapidly emerging as a transformative technology, poised to revolutionize industries ranging from healthcare to sports. By seamlessly embedding sensors into fabrics, these innovative textiles are creating new possibilities for smart, responsive products that can monitor vital signs, track performance, and enhance safety."},{type:"heading",content:"The Convergence of Textiles and Technology"},{type:"paragraph",content:"The convergence of textiles and technology has led to the development of sensor-integrated textiles, which combine the comfort and flexibility of fabrics with the intelligence and connectivity of sensors. These textiles are created by weaving or knitting sensors directly into the fabric structure, allowing them to conform to the body and provide continuous, real-time data."},{type:"subheading",content:"Key Applications of Sensor-Integrated Textiles"},{type:"list",items:["Healthcare: Sensor-integrated textiles can monitor vital signs such as heart rate, body temperature, and blood pressure, providing early warnings of potential health issues.","Sports: Sensor-integrated textiles can track athletic performance, measuring metrics such as speed, distance, and acceleration, helping athletes optimize their training and prevent injuries.","Safety: Sensor-integrated textiles can detect exposure to hazardous substances, such as toxic gases or radiation, providing real-time alerts to workers and supervisors.","Fashion: Sensor-integrated textiles can create interactive and responsive garments that change color, shape, or function based on the wearer's movements or environment."]},{type:"heading",content:"Transforming Industries"},{type:"paragraph",content:"Sensor-integrated textiles are poised to transform a wide range of industries, creating new possibilities for smart, responsive products that enhance health, safety, and performance. As the technology continues to evolve, we can expect to see even more innovative applications emerge, further blurring the lines between textiles and technology."},{type:"quote",content:"Sensor-integrated textiles are not just about creating smart fabrics; they're about creating a new era of smart manufacturing, where textiles are seamlessly integrated with technology to enhance our lives."}]}],bke=()=>{const e=ah.find(r=>r.id==="6")||ah[0],t=ah.filter(r=>r.id!==(e==null?void 0:e.id));return u.jsxs(bi,{children:[u.jsx(xf,{title:"WRLDS - News and insights about smart textile technology",description:"Stay updated with the latest news and insights about sensor-integrated textiles and smart technology from WRLDS Technologies.",imageUrl:(e==null?void 0:e.imageUrl)||"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png",keywords:["smart textiles","textile technology","industry news","sensor innovation","wearable tech","smart fabrics"],type:"website"}),u.jsx("div",{className:"w-full pt-24 pb-12 bg-gradient-to-b from-black to-gray-900 text-white",children:u.jsx("div",{className:"container mx-auto px-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"WRLDS News & Insights"}),u.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"The latest trends and news in sensor-integrated textiles and smart technology"})]})})}),u.jsx("div",{className:"container mx-auto px-4 py-16",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e&&u.jsx(Tn,{to:`/blog/${e.slug}`,className:"col-span-1 md:col-span-2 lg:col-span-3",children:u.jsx(sn,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 h-full",children:u.jsxs("div",{className:"grid md:grid-cols-2 h-full",children:[u.jsx("div",{className:"bg-cover bg-center h-64 md:h-full p-8 flex items-center justify-center",style:{backgroundImage:`url('${e.imageUrl}')`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:u.jsxs("div",{className:"text-white text-center bg-black/30 backdrop-blur-sm p-4 rounded-lg",children:[u.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm font-medium inline-block mb-4",children:"Featured"}),u.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:e.title})]})}),u.jsxs(an,{className:"p-8",children:[u.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Published: ",e.date]}),u.jsx("p",{className:"text-gray-700 mb-6",children:e.excerpt}),u.jsxs(ln,{variant:"outline",className:"group",children:["Read more",u.jsx(Kc,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})})}),t.map(r=>u.jsx(DV,{title:r.title,excerpt:r.excerpt,imageUrl:r.imageUrl||"/lovable-uploads/48ecf6e2-5a98-4a9d-af6f-ae2265cd4098.png",date:r.date,slug:r.slug,category:r.category},r.id)),ah.length<4&&Array.from({length:Math.max(0,4-ah.length)}).map((r,n)=>u.jsx(DV,{title:"Upcoming article",excerpt:"Stay tuned for more exciting articles about smart textiles and sensor technology.",imageUrl:n%2===0?"/lovable-uploads/6b0637e9-4a7b-40d0-b219-c8b7f879f93e.png":"/lovable-uploads/700e27d7-0513-4bfa-8ac4-f7fd6087594c.png",date:"Coming soon",slug:"#",category:"Upcoming"},`placeholder-${n}`))]})})]})};var wke=Array.isArray,Gs=wke,kke=typeof ss=="object"&&ss&&ss.Object===Object&&ss,zZ=kke,Tke=zZ,Mke=typeof self=="object"&&self&&self.Object===Object&&self,Ske=Tke||Mke||Function("return this")(),fl=Ske,Pke=fl,Eke=Pke.Symbol,E_=Eke,LV=E_,VZ=Object.prototype,jke=VZ.hasOwnProperty,Cke=VZ.toString,bg=LV?LV.toStringTag:void 0;function Ake(e){var t=jke.call(e,bg),r=e[bg];try{e[bg]=void 0;var n=!0}catch{}var i=Cke.call(e);return n&&(t?e[bg]=r:delete e[bg]),i}var Oke=Ake,$ke=Object.prototype,Nke=$ke.toString;function Ike(e){return Nke.call(e)}var Dke=Ike,RV=E_,Lke=Oke,Rke=Dke,Fke="[object Null]",Bke="[object Undefined]",FV=RV?RV.toStringTag:void 0;function zke(e){return e==null?e===void 0?Bke:Fke:FV&&FV in Object(e)?Lke(e):Rke(e)}var ac=zke;function Vke(e){return e!=null&&typeof e=="object"}var oc=Vke,Uke=ac,Wke=oc,Gke="[object Symbol]";function Hke(e){return typeof e=="symbol"||Wke(e)&&Uke(e)==Gke}var xm=Hke,Kke=Gs,qke=xm,Xke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yke=/^\w*$/;function Qke(e,t){if(Kke(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qke(e)?!0:Yke.test(e)||!Xke.test(e)||t!=null&&e in Object(t)}var V$=Qke;function Zke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cu=Zke;const bm=Dr(Cu);var Jke=ac,eTe=Cu,tTe="[object AsyncFunction]",rTe="[object Function]",nTe="[object GeneratorFunction]",iTe="[object Proxy]";function sTe(e){if(!eTe(e))return!1;var t=Jke(e);return t==rTe||t==nTe||t==tTe||t==iTe}var U$=sTe;const lr=Dr(U$);var aTe=fl,oTe=aTe["__core-js_shared__"],lTe=oTe,GS=lTe,BV=function(){var e=/[^.]+$/.exec(GS&&GS.keys&&GS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cTe(e){return!!BV&&BV in e}var uTe=cTe,dTe=Function.prototype,fTe=dTe.toString;function hTe(e){if(e!=null){try{return fTe.call(e)}catch{}try{return e+""}catch{}}return""}var UZ=hTe,pTe=U$,mTe=uTe,gTe=Cu,vTe=UZ,yTe=/[\\^$.*+?()[\]{}|]/g,_Te=/^\[object .+?Constructor\]$/,xTe=Function.prototype,bTe=Object.prototype,wTe=xTe.toString,kTe=bTe.hasOwnProperty,TTe=RegExp("^"+wTe.call(kTe).replace(yTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function MTe(e){if(!gTe(e)||mTe(e))return!1;var t=pTe(e)?TTe:_Te;return t.test(vTe(e))}var STe=MTe;function PTe(e,t){return e==null?void 0:e[t]}var ETe=PTe,jTe=STe,CTe=ETe;function ATe(e,t){var r=CTe(e,t);return jTe(r)?r:void 0}var bf=ATe,OTe=bf,$Te=OTe(Object,"create"),pk=$Te,zV=pk;function NTe(){this.__data__=zV?zV(null):{},this.size=0}var ITe=NTe;function DTe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var LTe=DTe,RTe=pk,FTe="__lodash_hash_undefined__",BTe=Object.prototype,zTe=BTe.hasOwnProperty;function VTe(e){var t=this.__data__;if(RTe){var r=t[e];return r===FTe?void 0:r}return zTe.call(t,e)?t[e]:void 0}var UTe=VTe,WTe=pk,GTe=Object.prototype,HTe=GTe.hasOwnProperty;function KTe(e){var t=this.__data__;return WTe?t[e]!==void 0:HTe.call(t,e)}var qTe=KTe,XTe=pk,YTe="__lodash_hash_undefined__";function QTe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=XTe&&t===void 0?YTe:t,this}var ZTe=QTe,JTe=ITe,eMe=LTe,tMe=UTe,rMe=qTe,nMe=ZTe;function wm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}wm.prototype.clear=JTe;wm.prototype.delete=eMe;wm.prototype.get=tMe;wm.prototype.has=rMe;wm.prototype.set=nMe;var iMe=wm;function sMe(){this.__data__=[],this.size=0}var aMe=sMe;function oMe(e,t){return e===t||e!==e&&t!==t}var W$=oMe,lMe=W$;function cMe(e,t){for(var r=e.length;r--;)if(lMe(e[r][0],t))return r;return-1}var mk=cMe,uMe=mk,dMe=Array.prototype,fMe=dMe.splice;function hMe(e){var t=this.__data__,r=uMe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():fMe.call(t,r,1),--this.size,!0}var pMe=hMe,mMe=mk;function gMe(e){var t=this.__data__,r=mMe(t,e);return r<0?void 0:t[r][1]}var vMe=gMe,yMe=mk;function _Me(e){return yMe(this.__data__,e)>-1}var xMe=_Me,bMe=mk;function wMe(e,t){var r=this.__data__,n=bMe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var kMe=wMe,TMe=aMe,MMe=pMe,SMe=vMe,PMe=xMe,EMe=kMe;function km(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}km.prototype.clear=TMe;km.prototype.delete=MMe;km.prototype.get=SMe;km.prototype.has=PMe;km.prototype.set=EMe;var gk=km,jMe=bf,CMe=fl,AMe=jMe(CMe,"Map"),G$=AMe,VV=iMe,OMe=gk,$Me=G$;function NMe(){this.size=0,this.__data__={hash:new VV,map:new($Me||OMe),string:new VV}}var IMe=NMe;function DMe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var LMe=DMe,RMe=LMe;function FMe(e,t){var r=e.__data__;return RMe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vk=FMe,BMe=vk;function zMe(e){var t=BMe(this,e).delete(e);return this.size-=t?1:0,t}var VMe=zMe,UMe=vk;function WMe(e){return UMe(this,e).get(e)}var GMe=WMe,HMe=vk;function KMe(e){return HMe(this,e).has(e)}var qMe=KMe,XMe=vk;function YMe(e,t){var r=XMe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var QMe=YMe,ZMe=IMe,JMe=VMe,eSe=GMe,tSe=qMe,rSe=QMe;function Tm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Tm.prototype.clear=ZMe;Tm.prototype.delete=JMe;Tm.prototype.get=eSe;Tm.prototype.has=tSe;Tm.prototype.set=rSe;var H$=Tm,WZ=H$,nSe="Expected a function";function K$(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nSe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(K$.Cache||WZ),r}K$.Cache=WZ;var GZ=K$;const iSe=Dr(GZ);var sSe=GZ,aSe=500;function oSe(e){var t=sSe(e,function(n){return r.size===aSe&&r.clear(),n}),r=t.cache;return t}var lSe=oSe,cSe=lSe,uSe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dSe=/\\(\\)?/g,fSe=cSe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(uSe,function(r,n,i,s){t.push(i?s.replace(dSe,"$1"):n||r)}),t}),hSe=fSe;function pSe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var q$=pSe,UV=E_,mSe=q$,gSe=Gs,vSe=xm,ySe=1/0,WV=UV?UV.prototype:void 0,GV=WV?WV.toString:void 0;function HZ(e){if(typeof e=="string")return e;if(gSe(e))return mSe(e,HZ)+"";if(vSe(e))return GV?GV.call(e):"";var t=e+"";return t=="0"&&1/e==-ySe?"-0":t}var _Se=HZ,xSe=_Se;function bSe(e){return e==null?"":xSe(e)}var KZ=bSe,wSe=Gs,kSe=V$,TSe=hSe,MSe=KZ;function SSe(e,t){return wSe(e)?e:kSe(e,t)?[e]:TSe(MSe(e))}var qZ=SSe,PSe=xm,ESe=1/0;function jSe(e){if(typeof e=="string"||PSe(e))return e;var t=e+"";return t=="0"&&1/e==-ESe?"-0":t}var yk=jSe,CSe=qZ,ASe=yk;function OSe(e,t){t=CSe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ASe(t[r++])];return r&&r==n?e:void 0}var X$=OSe,$Se=X$;function NSe(e,t,r){var n=e==null?void 0:$Se(e,t);return n===void 0?r:n}var XZ=NSe;const fa=Dr(XZ);function ISe(e){return e==null}var DSe=ISe;const yr=Dr(DSe);var LSe=ac,RSe=Gs,FSe=oc,BSe="[object String]";function zSe(e){return typeof e=="string"||!RSe(e)&&FSe(e)&&LSe(e)==BSe}var VSe=zSe;const j_=Dr(VSe);var YZ={exports:{}},Hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y$=Symbol.for("react.element"),Q$=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),xk=Symbol.for("react.strict_mode"),bk=Symbol.for("react.profiler"),wk=Symbol.for("react.provider"),kk=Symbol.for("react.context"),USe=Symbol.for("react.server_context"),Tk=Symbol.for("react.forward_ref"),Mk=Symbol.for("react.suspense"),Sk=Symbol.for("react.suspense_list"),Pk=Symbol.for("react.memo"),Ek=Symbol.for("react.lazy"),WSe=Symbol.for("react.offscreen"),QZ;QZ=Symbol.for("react.module.reference");function Ga(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Y$:switch(e=e.type,e){case _k:case bk:case xk:case Mk:case Sk:return e;default:switch(e=e&&e.$$typeof,e){case USe:case kk:case Tk:case Ek:case Pk:case wk:return e;default:return t}}case Q$:return t}}}Hr.ContextConsumer=kk;Hr.ContextProvider=wk;Hr.Element=Y$;Hr.ForwardRef=Tk;Hr.Fragment=_k;Hr.Lazy=Ek;Hr.Memo=Pk;Hr.Portal=Q$;Hr.Profiler=bk;Hr.StrictMode=xk;Hr.Suspense=Mk;Hr.SuspenseList=Sk;Hr.isAsyncMode=function(){return!1};Hr.isConcurrentMode=function(){return!1};Hr.isContextConsumer=function(e){return Ga(e)===kk};Hr.isContextProvider=function(e){return Ga(e)===wk};Hr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y$};Hr.isForwardRef=function(e){return Ga(e)===Tk};Hr.isFragment=function(e){return Ga(e)===_k};Hr.isLazy=function(e){return Ga(e)===Ek};Hr.isMemo=function(e){return Ga(e)===Pk};Hr.isPortal=function(e){return Ga(e)===Q$};Hr.isProfiler=function(e){return Ga(e)===bk};Hr.isStrictMode=function(e){return Ga(e)===xk};Hr.isSuspense=function(e){return Ga(e)===Mk};Hr.isSuspenseList=function(e){return Ga(e)===Sk};Hr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_k||e===bk||e===xk||e===Mk||e===Sk||e===WSe||typeof e=="object"&&e!==null&&(e.$$typeof===Ek||e.$$typeof===Pk||e.$$typeof===wk||e.$$typeof===kk||e.$$typeof===Tk||e.$$typeof===QZ||e.getModuleId!==void 0)};Hr.typeOf=Ga;YZ.exports=Hr;var ZZ=YZ.exports,GSe=ac,HSe=oc,KSe="[object Number]";function qSe(e){return typeof e=="number"||HSe(e)&&GSe(e)==KSe}var JZ=qSe;const XSe=Dr(JZ);var YSe=JZ;function QSe(e){return YSe(e)&&e!=+e}var ZSe=QSe;const C_=Dr(ZSe);var ws=function(t){return t===0?0:t>0?1:-1},jd=function(t){return j_(t)&&t.indexOf("%")===t.length-1},dt=function(t){return XSe(t)&&!C_(t)},xi=function(t){return dt(t)||j_(t)},JSe=0,A_=function(t){var r=++JSe;return"".concat(t||"").concat(r)},ks=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(t)&&!j_(t))return n;var s;if(jd(t)){var a=t.indexOf("%");s=r*parseFloat(t.slice(0,a))/100}else s=+t;return C_(s)&&(s=n),i&&s>r&&(s=r),s},oh=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},ePe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},$c=function(t,r){return dt(t)&&dt(r)?function(n){return t+n*(r-t)}:function(){return r}};function MC(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):fa(n,t))===r})}function Zh(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function SC(e){"@babel/helpers - typeof";return SC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SC(e)}var tPe=["viewBox","children"],rPe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HV=["points","pathLength"],HS={svg:tPe,polygon:HV,polyline:HV},Z$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],aw=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(E.isValidElement(t)&&(n=t.props),!bm(n))return null;var i={};return Object.keys(n).forEach(function(s){Z$.includes(s)&&(i[s]=r||function(a){return n[s](n,a)})}),i},nPe=function(t,r,n){return function(i){return t(r,n,i),null}},rf=function(t,r,n){if(!bm(t)||SC(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var a=t[s];Z$.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=nPe(a,r,n))}),i},iPe=["children"],sPe=["children"];function KV(e,t){if(e==null)return{};var r=aPe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qV={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Bl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},XV=null,KS=null,J$=function e(t){if(t===XV&&Array.isArray(KS))return KS;var r=[];return E.Children.forEach(t,function(n){yr(n)||(ZZ.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),KS=r,XV=t,r};function Ra(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Bl(i)}):n=[Bl(t)],J$(e).forEach(function(i){var s=fa(i,"type.displayName")||fa(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function ta(e,t){var r=Ra(e,t);return r&&r[0]}var YV=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!dt(n)||n<=0||!dt(i)||i<=0)},oPe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lPe=function(t){return t&&t.type&&j_(t.type)&&oPe.indexOf(t.type)>=0},cPe=function(t,r,n,i){var s,a=(s=HS==null?void 0:HS[i])!==null&&s!==void 0?s:[];return!lr(t)&&(i&&a.includes(r)||rPe.includes(r))||n&&Z$.includes(r)},Qt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(E.isValidElement(t)&&(i=t.props),!bm(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;cPe((o=i)===null||o===void 0?void 0:o[a],a,r,n)&&(s[a]=i[a])}),s},PC=function e(t,r){if(t===r)return!0;var n=E.Children.count(t);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return QV(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],a=r[i];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!QV(s,a))return!1}return!0},QV=function(t,r){if(yr(t)&&yr(r))return!0;if(!yr(t)&&!yr(r)){var n=t.props||{},i=n.children,s=KV(n,iPe),a=r.props||{},o=a.children,l=KV(a,sPe);return i&&o?Zh(s,l)&&PC(i,o):!i&&!o?Zh(s,l):!1}return!1},ZV=function(t,r){var n=[],i={};return J$(t).forEach(function(s,a){if(lPe(s))n.push(s);else if(s){var o=Bl(s.type),l=r[o]||{},c=l.handler,f=l.once;if(c&&(!f||!i[o])){var d=c(s,o,a);n.push(d),i[o]=!0}}}),n},uPe=function(t){var r=t&&t.type;return r&&qV[r]?qV[r]:null},dPe=function(t,r){return J$(r).indexOf(t)},fPe=["children","width","height","viewBox","className","style","title","desc"];function EC(){return EC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EC.apply(this,arguments)}function hPe(e,t){if(e==null)return{};var r=pPe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jC(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,a=e.style,o=e.title,l=e.desc,c=hPe(e,fPe),f=i||{width:r,height:n,x:0,y:0},d=dr("recharts-surface",s);return ae.createElement("svg",EC({},Qt(c,!0,"svg"),{className:d,width:r,height:n,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ae.createElement("title",null,o),ae.createElement("desc",null,l),t)}var mPe=["children","className"];function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CC.apply(this,arguments)}function gPe(e,t){if(e==null)return{};var r=vPe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Wr=ae.forwardRef(function(e,t){var r=e.children,n=e.className,i=gPe(e,mPe),s=dr("recharts-layer",n);return ae.createElement("g",CC({className:s},Qt(i,!0),{ref:t}),r)}),zl=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function yPe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}var _Pe=yPe,xPe=_Pe;function bPe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:xPe(e,t,r)}var wPe=bPe,kPe="\\ud800-\\udfff",TPe="\\u0300-\\u036f",MPe="\\ufe20-\\ufe2f",SPe="\\u20d0-\\u20ff",PPe=TPe+MPe+SPe,EPe="\\ufe0e\\ufe0f",jPe="\\u200d",CPe=RegExp("["+jPe+kPe+PPe+EPe+"]");function APe(e){return CPe.test(e)}var eJ=APe;function OPe(e){return e.split("")}var $Pe=OPe,tJ="\\ud800-\\udfff",NPe="\\u0300-\\u036f",IPe="\\ufe20-\\ufe2f",DPe="\\u20d0-\\u20ff",LPe=NPe+IPe+DPe,RPe="\\ufe0e\\ufe0f",FPe="["+tJ+"]",AC="["+LPe+"]",OC="\\ud83c[\\udffb-\\udfff]",BPe="(?:"+AC+"|"+OC+")",rJ="[^"+tJ+"]",nJ="(?:\\ud83c[\\udde6-\\uddff]){2}",iJ="[\\ud800-\\udbff][\\udc00-\\udfff]",zPe="\\u200d",sJ=BPe+"?",aJ="["+RPe+"]?",VPe="(?:"+zPe+"(?:"+[rJ,nJ,iJ].join("|")+")"+aJ+sJ+")*",UPe=aJ+sJ+VPe,WPe="(?:"+[rJ+AC+"?",AC,nJ,iJ,FPe].join("|")+")",GPe=RegExp(OC+"(?="+OC+")|"+WPe+UPe,"g");function HPe(e){return e.match(GPe)||[]}var KPe=HPe,qPe=$Pe,XPe=eJ,YPe=KPe;function QPe(e){return XPe(e)?YPe(e):qPe(e)}var ZPe=QPe,JPe=wPe,eEe=eJ,tEe=ZPe,rEe=KZ;function nEe(e){return function(t){t=rEe(t);var r=eEe(t)?tEe(t):void 0,n=r?r[0]:t.charAt(0),i=r?JPe(r,1).join(""):t.slice(1);return n[e]()+i}}var iEe=nEe,sEe=iEe,aEe=sEe("toUpperCase"),oEe=aEe;const jk=Dr(oEe);function nn(e){return function(){return e}}const oJ=Math.cos,ow=Math.sin,No=Math.sqrt,lw=Math.PI,Ck=2*lw,$C=Math.PI,NC=2*$C,md=1e-6,lEe=NC-md;function lJ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function cEe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lJ;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class uEe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lJ:cEe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,a){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=n-t,c=i-r,f=a-t,d=o-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>md)if(!(Math.abs(d*l-c*f)>md)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-a,m=i-o,g=l*l+c*c,x=p*p+m*m,y=Math.sqrt(g),v=Math.sqrt(h),_=s*Math.tan(($C-Math.acos((g+h-x)/(2*y*v)))/2),b=_/v,w=_/y;Math.abs(b-1)>md&&this._append`L${t+b*f},${r+b*d}`,this._append`A${s},${s},0,0,${+(d*p>f*m)},${this._x1=t+w*l},${this._y1=r+w*c}`}}arc(t,r,n,i,s,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,f=r+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>md||Math.abs(this._y1-f)>md)&&this._append`L${c},${f}`,n&&(h<0&&(h=h%NC+NC),h>lEe?this._append`A${n},${n},0,1,${d},${t-o},${r-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=f}`:h>md&&this._append`A${n},${n},0,${+(h>=$C)},${d},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function eN(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new uEe(t)}function tN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cJ(e){this._context=e}cJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ak(e){return new cJ(e)}function uJ(e){return e[0]}function dJ(e){return e[1]}function fJ(e,t){var r=nn(!0),n=null,i=Ak,s=null,a=eN(o);e=typeof e=="function"?e:e===void 0?uJ:nn(e),t=typeof t=="function"?t:t===void 0?dJ:nn(t);function o(l){var c,f=(l=tN(l)).length,d,h=!1,p;for(n==null&&(s=i(p=a())),c=0;c<=f;++c)!(c<f&&r(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,c,l),+t(d,c,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:nn(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:nn(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:nn(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),o):n},o}function cx(e,t,r){var n=null,i=nn(!0),s=null,a=Ak,o=null,l=eN(c);e=typeof e=="function"?e:e===void 0?uJ:nn(+e),t=typeof t=="function"?t:nn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?dJ:nn(+r);function c(d){var h,p,m,g=(d=tN(d)).length,x,y=!1,v,_=new Array(g),b=new Array(g);for(s==null&&(o=a(v=l())),h=0;h<=g;++h){if(!(h<g&&i(x=d[h],h,d))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=p;--m)o.point(_[m],b[m]);o.lineEnd(),o.areaEnd()}y&&(_[h]=+e(x,h,d),b[h]=+t(x,h,d),o.point(n?+n(x,h,d):_[h],r?+r(x,h,d):b[h]))}if(v)return o=null,v+""||null}function f(){return fJ().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:nn(+d),n=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:nn(+d),c):e},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:nn(+d),c):n},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:nn(+d),r=null,c):t},c.y0=function(d){return arguments.length?(t=typeof d=="function"?d:nn(+d),c):t},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:nn(+d),c):r},c.lineX0=c.lineY0=function(){return f().x(e).y(t)},c.lineY1=function(){return f().x(e).y(r)},c.lineX1=function(){return f().x(n).y(t)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:nn(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class hJ{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function dEe(e){return new hJ(e,!0)}function fEe(e){return new hJ(e,!1)}const rN={draw(e,t){const r=No(t/lw);e.moveTo(r,0),e.arc(0,0,r,0,Ck)}},hEe={draw(e,t){const r=No(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},pJ=No(1/3),pEe=pJ*2,mEe={draw(e,t){const r=No(t/pEe),n=r*pJ;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},gEe={draw(e,t){const r=No(t),n=-r/2;e.rect(n,n,r,r)}},vEe=.8908130915292852,mJ=ow(lw/10)/ow(7*lw/10),yEe=ow(Ck/10)*mJ,_Ee=-oJ(Ck/10)*mJ,xEe={draw(e,t){const r=No(t*vEe),n=yEe*r,i=_Ee*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const a=Ck*s/5,o=oJ(a),l=ow(a);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},qS=No(3),bEe={draw(e,t){const r=-No(t/(qS*3));e.moveTo(0,r*2),e.lineTo(-qS*r,-r),e.lineTo(qS*r,-r),e.closePath()}},ka=-.5,Ta=No(3)/2,IC=1/No(12),wEe=(IC/2+1)*3,kEe={draw(e,t){const r=No(t/wEe),n=r/2,i=r*IC,s=n,a=r*IC+r,o=-s,l=a;e.moveTo(n,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(ka*n-Ta*i,Ta*n+ka*i),e.lineTo(ka*s-Ta*a,Ta*s+ka*a),e.lineTo(ka*o-Ta*l,Ta*o+ka*l),e.lineTo(ka*n+Ta*i,ka*i-Ta*n),e.lineTo(ka*s+Ta*a,ka*a-Ta*s),e.lineTo(ka*o+Ta*l,ka*l-Ta*o),e.closePath()}};function TEe(e,t){let r=null,n=eN(i);e=typeof e=="function"?e:nn(e||rN),t=typeof t=="function"?t:nn(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:nn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:nn(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function cw(){}function uw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gJ(e){this._context=e}gJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MEe(e){return new gJ(e)}function vJ(e){this._context=e}vJ.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SEe(e){return new vJ(e)}function yJ(e){this._context=e}yJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:uw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PEe(e){return new yJ(e)}function _J(e){this._context=e}_J.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function EEe(e){return new _J(e)}function JV(e){return e<0?-1:1}function eU(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(JV(s)+JV(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function tU(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function XS(e,t,r){var n=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,i+o*t,s-o,a-o*r,s,a)}function dw(e){this._context=e}dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XS(this,this._t0,tU(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,XS(this,tU(this,r=eU(this,e,t)),r);break;default:XS(this,this._t0,r=eU(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function xJ(e){this._context=new bJ(e)}(xJ.prototype=Object.create(dw.prototype)).point=function(e,t){dw.prototype.point.call(this,t,e)};function bJ(e){this._context=e}bJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function jEe(e){return new dw(e)}function CEe(e){return new xJ(e)}function wJ(e){this._context=e}wJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=rU(e),i=rU(t),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rU(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function AEe(e){return new wJ(e)}function Ok(e,t){this._context=e,this._t=t}Ok.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function OEe(e){return new Ok(e,.5)}function $Ee(e){return new Ok(e,0)}function NEe(e){return new Ok(e,1)}function Ep(e,t){if((a=e.length)>1)for(var r=1,n,i,s=e[t[0]],a,o=s.length;r<a;++r)for(i=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function DC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function IEe(e,t){return e[t]}function DEe(e){const t=[];return t.key=e,t}function LEe(){var e=nn([]),t=DC,r=Ep,n=IEe;function i(s){var a=Array.from(e.apply(this,arguments),DEe),o,l=a.length,c=-1,f;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+n(d,a[o].key,c,s)]).data=d;for(o=0,f=tN(t(a));o<l;++o)a[f[o]].index=o;return r(a,f),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:nn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:nn(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?DC:typeof s=="function"?s:nn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Ep,i):r},i}function REe(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}Ep(e,t)}}function FEe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var a=0,o=0;a<i;++a)o+=e[a][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ep(e,t)}}function BEe(e,t){if(!(!((a=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var o=0,l=0,c=0;o<a;++o){for(var f=e[t[o]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,m=0;m<o;++m){var g=e[t[m]],x=g[n][1]||0,y=g[n-1][1]||0;p+=x-y}l+=d,c+=p*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,Ep(e,t)}}function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}var zEe=["type","size","sizeType"];function LC(){return LC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LC.apply(this,arguments)}function nU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(r),!0).forEach(function(n){VEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VEe(e,t,r){return t=UEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UEe(e){var t=WEe(e,"string");return cy(t)=="symbol"?t:t+""}function WEe(e,t){if(cy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GEe(e,t){if(e==null)return{};var r=HEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kJ={symbolCircle:rN,symbolCross:hEe,symbolDiamond:mEe,symbolSquare:gEe,symbolStar:xEe,symbolTriangle:bEe,symbolWye:kEe},KEe=Math.PI/180,qEe=function(t){var r="symbol".concat(jk(t));return kJ[r]||rN},XEe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*KEe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},YEe=function(t,r){kJ["symbol".concat(jk(t))]=r},nN=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,a=t.sizeType,o=a===void 0?"area":a,l=GEe(t,zEe),c=iU(iU({},l),{},{type:n,size:s,sizeType:o}),f=function(){var x=qEe(n),y=TEe().type(x).size(XEe(s,o,n));return y()},d=c.className,h=c.cx,p=c.cy,m=Qt(c,!0);return h===+h&&p===+p&&s===+s?ae.createElement("path",LC({},m,{className:dr("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};nN.registerSymbol=YEe;function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function RC(){return RC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RC.apply(this,arguments)}function sU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(r),!0).forEach(function(n){uy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MJ(n.key),n)}}function eje(e,t,r){return t&&JEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tje(e,t,r){return t=fw(t),rje(e,TJ()?Reflect.construct(t,r||[],fw(e).constructor):t.apply(e,r))}function rje(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nje(e)}function nje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TJ=function(){return!!e})()}function fw(e){return fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fw(e)}function ije(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}function FC(e,t){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},FC(e,t)}function uy(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=sje(e,"string");return jp(t)=="symbol"?t:t+""}function sje(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ma=32,iN=function(e){function t(){return ZEe(this,t),tje(this,t,arguments)}return ije(t,e),eje(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Ma/2,a=Ma/6,o=Ma/3,l=n.inactive?i:n.color;if(n.type==="plainline")return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Ma,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Ma,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return ae.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ma/8,"h").concat(Ma,"v").concat(Ma*3/4,"h").concat(-Ma,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(n.legendIcon)){var c=QEe({},n);return delete c.legendIcon,ae.cloneElement(n.legendIcon,c)}return ae.createElement(nN,{fill:l,cx:s,cy:s,size:Ma,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,f={x:0,y:0,width:Ma,height:Ma},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,m){var g=p.formatter||l,x=dr(uy(uy({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=lr(p.value)?null:p.value;zl(!lr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=p.inactive?c:p.color;return ae.createElement("li",RC({className:x,style:d,key:"legend-item-".concat(m)},rf(n.props,p,m)),ae.createElement(jC,{width:a,height:a,viewBox:f,style:h},n.renderIcon(p)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g?g(y,p,m):y))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,a=n.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(E.PureComponent);uy(iN,"displayName","Legend");uy(iN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var aje=gk;function oje(){this.__data__=new aje,this.size=0}var lje=oje;function cje(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var uje=cje;function dje(e){return this.__data__.get(e)}var fje=dje;function hje(e){return this.__data__.has(e)}var pje=hje,mje=gk,gje=G$,vje=H$,yje=200;function _je(e,t){var r=this.__data__;if(r instanceof mje){var n=r.__data__;if(!gje||n.length<yje-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vje(n)}return r.set(e,t),this.size=r.size,this}var xje=_je,bje=gk,wje=lje,kje=uje,Tje=fje,Mje=pje,Sje=xje;function Mm(e){var t=this.__data__=new bje(e);this.size=t.size}Mm.prototype.clear=wje;Mm.prototype.delete=kje;Mm.prototype.get=Tje;Mm.prototype.has=Mje;Mm.prototype.set=Sje;var SJ=Mm,Pje="__lodash_hash_undefined__";function Eje(e){return this.__data__.set(e,Pje),this}var jje=Eje;function Cje(e){return this.__data__.has(e)}var Aje=Cje,Oje=H$,$je=jje,Nje=Aje;function hw(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Oje;++t<r;)this.add(e[t])}hw.prototype.add=hw.prototype.push=$je;hw.prototype.has=Nje;var PJ=hw;function Ije(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var EJ=Ije;function Dje(e,t){return e.has(t)}var jJ=Dje,Lje=PJ,Rje=EJ,Fje=jJ,Bje=1,zje=2;function Vje(e,t,r,n,i,s){var a=r&Bje,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(e),f=s.get(t);if(c&&f)return c==t&&f==e;var d=-1,h=!0,p=r&zje?new Lje:void 0;for(s.set(e,t),s.set(t,e);++d<o;){var m=e[d],g=t[d];if(n)var x=a?n(g,m,d,t,e,s):n(m,g,d,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!Rje(t,function(y,v){if(!Fje(p,v)&&(m===y||i(m,y,r,n,s)))return p.push(v)})){h=!1;break}}else if(!(m===g||i(m,g,r,n,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var CJ=Vje,Uje=fl,Wje=Uje.Uint8Array,Gje=Wje;function Hje(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Kje=Hje;function qje(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var sN=qje,aU=E_,oU=Gje,Xje=W$,Yje=CJ,Qje=Kje,Zje=sN,Jje=1,eCe=2,tCe="[object Boolean]",rCe="[object Date]",nCe="[object Error]",iCe="[object Map]",sCe="[object Number]",aCe="[object RegExp]",oCe="[object Set]",lCe="[object String]",cCe="[object Symbol]",uCe="[object ArrayBuffer]",dCe="[object DataView]",lU=aU?aU.prototype:void 0,YS=lU?lU.valueOf:void 0;function fCe(e,t,r,n,i,s,a){switch(r){case dCe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case uCe:return!(e.byteLength!=t.byteLength||!s(new oU(e),new oU(t)));case tCe:case rCe:case sCe:return Xje(+e,+t);case nCe:return e.name==t.name&&e.message==t.message;case aCe:case lCe:return e==t+"";case iCe:var o=Qje;case oCe:var l=n&Jje;if(o||(o=Zje),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=eCe,a.set(e,t);var f=Yje(o(e),o(t),n,i,s,a);return a.delete(e),f;case cCe:if(YS)return YS.call(e)==YS.call(t)}return!1}var hCe=fCe;function pCe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var AJ=pCe,mCe=AJ,gCe=Gs;function vCe(e,t,r){var n=t(e);return gCe(e)?n:mCe(n,r(e))}var yCe=vCe;function _Ce(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var a=e[r];t(a,r,e)&&(s[i++]=a)}return s}var xCe=_Ce;function bCe(){return[]}var wCe=bCe,kCe=xCe,TCe=wCe,MCe=Object.prototype,SCe=MCe.propertyIsEnumerable,cU=Object.getOwnPropertySymbols,PCe=cU?function(e){return e==null?[]:(e=Object(e),kCe(cU(e),function(t){return SCe.call(e,t)}))}:TCe,ECe=PCe;function jCe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var CCe=jCe,ACe=ac,OCe=oc,$Ce="[object Arguments]";function NCe(e){return OCe(e)&&ACe(e)==$Ce}var ICe=NCe,uU=ICe,DCe=oc,OJ=Object.prototype,LCe=OJ.hasOwnProperty,RCe=OJ.propertyIsEnumerable,FCe=uU(function(){return arguments}())?uU:function(e){return DCe(e)&&LCe.call(e,"callee")&&!RCe.call(e,"callee")},aN=FCe,pw={exports:{}};function BCe(){return!1}var zCe=BCe;pw.exports;(function(e,t){var r=fl,n=zCe,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;e.exports=c})(pw,pw.exports);var $J=pw.exports,VCe=9007199254740991,UCe=/^(?:0|[1-9]\d*)$/;function WCe(e,t){var r=typeof e;return t=t??VCe,!!t&&(r=="number"||r!="symbol"&&UCe.test(e))&&e>-1&&e%1==0&&e<t}var oN=WCe,GCe=9007199254740991;function HCe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=GCe}var lN=HCe,KCe=ac,qCe=lN,XCe=oc,YCe="[object Arguments]",QCe="[object Array]",ZCe="[object Boolean]",JCe="[object Date]",e2e="[object Error]",t2e="[object Function]",r2e="[object Map]",n2e="[object Number]",i2e="[object Object]",s2e="[object RegExp]",a2e="[object Set]",o2e="[object String]",l2e="[object WeakMap]",c2e="[object ArrayBuffer]",u2e="[object DataView]",d2e="[object Float32Array]",f2e="[object Float64Array]",h2e="[object Int8Array]",p2e="[object Int16Array]",m2e="[object Int32Array]",g2e="[object Uint8Array]",v2e="[object Uint8ClampedArray]",y2e="[object Uint16Array]",_2e="[object Uint32Array]",vn={};vn[d2e]=vn[f2e]=vn[h2e]=vn[p2e]=vn[m2e]=vn[g2e]=vn[v2e]=vn[y2e]=vn[_2e]=!0;vn[YCe]=vn[QCe]=vn[c2e]=vn[ZCe]=vn[u2e]=vn[JCe]=vn[e2e]=vn[t2e]=vn[r2e]=vn[n2e]=vn[i2e]=vn[s2e]=vn[a2e]=vn[o2e]=vn[l2e]=!1;function x2e(e){return XCe(e)&&qCe(e.length)&&!!vn[KCe(e)]}var b2e=x2e;function w2e(e){return function(t){return e(t)}}var NJ=w2e,mw={exports:{}};mw.exports;(function(e,t){var r=zZ,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(mw,mw.exports);var k2e=mw.exports,T2e=b2e,M2e=NJ,dU=k2e,fU=dU&&dU.isTypedArray,S2e=fU?M2e(fU):T2e,IJ=S2e,P2e=CCe,E2e=aN,j2e=Gs,C2e=$J,A2e=oN,O2e=IJ,$2e=Object.prototype,N2e=$2e.hasOwnProperty;function I2e(e,t){var r=j2e(e),n=!r&&E2e(e),i=!r&&!n&&C2e(e),s=!r&&!n&&!i&&O2e(e),a=r||n||i||s,o=a?P2e(e.length,String):[],l=o.length;for(var c in e)(t||N2e.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||A2e(c,l)))&&o.push(c);return o}var D2e=I2e,L2e=Object.prototype;function R2e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||L2e;return e===r}var F2e=R2e;function B2e(e,t){return function(r){return e(t(r))}}var DJ=B2e,z2e=DJ,V2e=z2e(Object.keys,Object),U2e=V2e,W2e=F2e,G2e=U2e,H2e=Object.prototype,K2e=H2e.hasOwnProperty;function q2e(e){if(!W2e(e))return G2e(e);var t=[];for(var r in Object(e))K2e.call(e,r)&&r!="constructor"&&t.push(r);return t}var X2e=q2e,Y2e=U$,Q2e=lN;function Z2e(e){return e!=null&&Q2e(e.length)&&!Y2e(e)}var $k=Z2e,J2e=D2e,eAe=X2e,tAe=$k;function rAe(e){return tAe(e)?J2e(e):eAe(e)}var cN=rAe,nAe=yCe,iAe=ECe,sAe=cN;function aAe(e){return nAe(e,sAe,iAe)}var oAe=aAe,hU=oAe,lAe=1,cAe=Object.prototype,uAe=cAe.hasOwnProperty;function dAe(e,t,r,n,i,s){var a=r&lAe,o=hU(e),l=o.length,c=hU(t),f=c.length;if(l!=f&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in t:uAe.call(t,h)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var g=!0;s.set(e,t),s.set(t,e);for(var x=a;++d<l;){h=o[d];var y=e[h],v=t[h];if(n)var _=a?n(v,y,h,t,e,s):n(y,v,h,e,t,s);if(!(_===void 0?y===v||i(y,v,r,n,s):_)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(g=!1)}return s.delete(e),s.delete(t),g}var fAe=dAe,hAe=bf,pAe=fl,mAe=hAe(pAe,"DataView"),gAe=mAe,vAe=bf,yAe=fl,_Ae=vAe(yAe,"Promise"),xAe=_Ae,bAe=bf,wAe=fl,kAe=bAe(wAe,"Set"),LJ=kAe,TAe=bf,MAe=fl,SAe=TAe(MAe,"WeakMap"),PAe=SAe,BC=gAe,zC=G$,VC=xAe,UC=LJ,WC=PAe,RJ=ac,Sm=UZ,pU="[object Map]",EAe="[object Object]",mU="[object Promise]",gU="[object Set]",vU="[object WeakMap]",yU="[object DataView]",jAe=Sm(BC),CAe=Sm(zC),AAe=Sm(VC),OAe=Sm(UC),$Ae=Sm(WC),gd=RJ;(BC&&gd(new BC(new ArrayBuffer(1)))!=yU||zC&&gd(new zC)!=pU||VC&&gd(VC.resolve())!=mU||UC&&gd(new UC)!=gU||WC&&gd(new WC)!=vU)&&(gd=function(e){var t=RJ(e),r=t==EAe?e.constructor:void 0,n=r?Sm(r):"";if(n)switch(n){case jAe:return yU;case CAe:return pU;case AAe:return mU;case OAe:return gU;case $Ae:return vU}return t});var NAe=gd,QS=SJ,IAe=CJ,DAe=hCe,LAe=fAe,_U=NAe,xU=Gs,bU=$J,RAe=IJ,FAe=1,wU="[object Arguments]",kU="[object Array]",ux="[object Object]",BAe=Object.prototype,TU=BAe.hasOwnProperty;function zAe(e,t,r,n,i,s){var a=xU(e),o=xU(t),l=a?kU:_U(e),c=o?kU:_U(t);l=l==wU?ux:l,c=c==wU?ux:c;var f=l==ux,d=c==ux,h=l==c;if(h&&bU(e)){if(!bU(t))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new QS),a||RAe(e)?IAe(e,t,r,n,i,s):DAe(e,t,l,r,n,i,s);if(!(r&FAe)){var p=f&&TU.call(e,"__wrapped__"),m=d&&TU.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,x=m?t.value():t;return s||(s=new QS),i(g,x,r,n,s)}}return h?(s||(s=new QS),LAe(e,t,r,n,i,s)):!1}var VAe=zAe,UAe=VAe,MU=oc;function FJ(e,t,r,n,i){return e===t?!0:e==null||t==null||!MU(e)&&!MU(t)?e!==e&&t!==t:UAe(e,t,r,n,FJ,i)}var uN=FJ,WAe=SJ,GAe=uN,HAe=1,KAe=2;function qAe(e,t,r,n){var i=r.length,s=i,a=!n;if(e==null)return!s;for(e=Object(e);i--;){var o=r[i];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){o=r[i];var l=o[0],c=e[l],f=o[1];if(a&&o[2]){if(c===void 0&&!(l in e))return!1}else{var d=new WAe;if(n)var h=n(c,f,l,e,t,d);if(!(h===void 0?GAe(f,c,HAe|KAe,n,d):h))return!1}}return!0}var XAe=qAe,YAe=Cu;function QAe(e){return e===e&&!YAe(e)}var BJ=QAe,ZAe=BJ,JAe=cN;function eOe(e){for(var t=JAe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ZAe(i)]}return t}var tOe=eOe;function rOe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var zJ=rOe,nOe=XAe,iOe=tOe,sOe=zJ;function aOe(e){var t=iOe(e);return t.length==1&&t[0][2]?sOe(t[0][0],t[0][1]):function(r){return r===e||nOe(r,e,t)}}var oOe=aOe;function lOe(e,t){return e!=null&&t in Object(e)}var cOe=lOe,uOe=qZ,dOe=aN,fOe=Gs,hOe=oN,pOe=lN,mOe=yk;function gOe(e,t,r){t=uOe(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var a=mOe(t[n]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&pOe(i)&&hOe(a,i)&&(fOe(e)||dOe(e)))}var vOe=gOe,yOe=cOe,_Oe=vOe;function xOe(e,t){return e!=null&&_Oe(e,t,yOe)}var bOe=xOe,wOe=uN,kOe=XZ,TOe=bOe,MOe=V$,SOe=BJ,POe=zJ,EOe=yk,jOe=1,COe=2;function AOe(e,t){return MOe(e)&&SOe(t)?POe(EOe(e),t):function(r){var n=kOe(r,e);return n===void 0&&n===t?TOe(r,e):wOe(t,n,jOe|COe)}}var OOe=AOe;function $Oe(e){return e}var Pm=$Oe;function NOe(e){return function(t){return t==null?void 0:t[e]}}var IOe=NOe,DOe=X$;function LOe(e){return function(t){return DOe(t,e)}}var ROe=LOe,FOe=IOe,BOe=ROe,zOe=V$,VOe=yk;function UOe(e){return zOe(e)?FOe(VOe(e)):BOe(e)}var WOe=UOe,GOe=oOe,HOe=OOe,KOe=Pm,qOe=Gs,XOe=WOe;function YOe(e){return typeof e=="function"?e:e==null?KOe:typeof e=="object"?qOe(e)?HOe(e[0],e[1]):GOe(e):XOe(e)}var Au=YOe;function QOe(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var ZOe=QOe;function JOe(e){return e!==e}var e$e=JOe;function t$e(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var r$e=t$e,n$e=ZOe,i$e=e$e,s$e=r$e;function a$e(e,t,r){return t===t?s$e(e,t,r):n$e(e,i$e,r)}var o$e=a$e,l$e=o$e;function c$e(e,t){var r=e==null?0:e.length;return!!r&&l$e(e,t,0)>-1}var u$e=c$e;function d$e(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var f$e=d$e;function h$e(){}var p$e=h$e,ZS=LJ,m$e=p$e,g$e=sN,v$e=1/0,y$e=ZS&&1/g$e(new ZS([,-0]))[1]==v$e?function(e){return new ZS(e)}:m$e,_$e=y$e,x$e=PJ,b$e=u$e,w$e=f$e,k$e=jJ,T$e=_$e,M$e=sN,S$e=200;function P$e(e,t,r){var n=-1,i=b$e,s=e.length,a=!0,o=[],l=o;if(r)a=!1,i=w$e;else if(s>=S$e){var c=t?null:T$e(e);if(c)return M$e(c);a=!1,i=k$e,l=new x$e}else l=t?[]:o;e:for(;++n<s;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),o.push(f)}else i(l,d,r)||(l!==o&&l.push(d),o.push(f))}return o}var E$e=P$e,j$e=Au,C$e=E$e;function A$e(e,t){return e&&e.length?C$e(e,j$e(t)):[]}var O$e=A$e;const SU=Dr(O$e);function VJ(e,t,r){return t===!0?SU(e,r):lr(t)?SU(e,t):e}function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}var $$e=["ref"];function PU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PU(Object(r),!0).forEach(function(n){Nk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WJ(n.key),n)}}function I$e(e,t,r){return t&&EU(e.prototype,t),r&&EU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D$e(e,t,r){return t=gw(t),L$e(e,UJ()?Reflect.construct(t,r||[],gw(e).constructor):t.apply(e,r))}function L$e(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R$e(e)}function R$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UJ=function(){return!!e})()}function gw(e){return gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gw(e)}function F$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GC(e,t)}function GC(e,t){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GC(e,t)}function Nk(e,t,r){return t=WJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WJ(e){var t=B$e(e,"string");return Cp(t)=="symbol"?t:t+""}function B$e(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z$e(e,t){if(e==null)return{};var r=V$e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function U$e(e){return e.value}function W$e(e,t){if(ae.isValidElement(e))return ae.cloneElement(e,t);if(typeof e=="function")return ae.createElement(e,t);t.ref;var r=z$e(t,$$e);return ae.createElement(iN,r)}var jU=1,Jh=function(e){function t(){var r;N$e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=D$e(this,t,[].concat(i)),Nk(r,"lastBoundingBox",{width:-1,height:-1}),r}return F$e(t,e),I$e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>jU||Math.abs(i.height-this.lastBoundingBox.height)>jU)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,f=i.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();d={left:((c||0)-p.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();h={top:((f||0)-m.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return yl(yl({},d),h)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,f=i.payload,d=yl(yl({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return ae.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},W$e(s,yl(yl({},this.props),{},{payload:VJ(f,c,U$e)})))}}],[{key:"getWithHeight",value:function(n,i){var s=yl(yl({},this.defaultProps),n.props),a=s.layout;return a==="vertical"&&dt(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(E.PureComponent);Nk(Jh,"displayName","Legend");Nk(Jh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var CU=E_,G$e=aN,H$e=Gs,AU=CU?CU.isConcatSpreadable:void 0;function K$e(e){return H$e(e)||G$e(e)||!!(AU&&e&&e[AU])}var q$e=K$e,X$e=AJ,Y$e=q$e;function GJ(e,t,r,n,i){var s=-1,a=e.length;for(r||(r=Y$e),i||(i=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?GJ(o,t-1,r,n,i):X$e(i,o):n||(i[i.length]=o)}return i}var HJ=GJ;function Q$e(e){return function(t,r,n){for(var i=-1,s=Object(t),a=n(t),o=a.length;o--;){var l=a[e?o:++i];if(r(s[l],l,s)===!1)break}return t}}var Z$e=Q$e,J$e=Z$e,eNe=J$e(),tNe=eNe,rNe=tNe,nNe=cN;function iNe(e,t){return e&&rNe(e,t,nNe)}var KJ=iNe,sNe=$k;function aNe(e,t){return function(r,n){if(r==null)return r;if(!sNe(r))return e(r,n);for(var i=r.length,s=t?i:-1,a=Object(r);(t?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var oNe=aNe,lNe=KJ,cNe=oNe,uNe=cNe(lNe),dN=uNe,dNe=dN,fNe=$k;function hNe(e,t){var r=-1,n=fNe(e)?Array(e.length):[];return dNe(e,function(i,s,a){n[++r]=t(i,s,a)}),n}var qJ=hNe;function pNe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var mNe=pNe,OU=xm;function gNe(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,s=OU(e),a=t!==void 0,o=t===null,l=t===t,c=OU(t);if(!o&&!c&&!s&&e>t||s&&a&&l&&!o&&!c||n&&a&&l||!r&&l||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||o&&r&&i||!a&&i||!l)return-1}return 0}var vNe=gNe,yNe=vNe;function _Ne(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,a=i.length,o=r.length;++n<a;){var l=yNe(i[n],s[n]);if(l){if(n>=o)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return e.index-t.index}var xNe=_Ne,JS=q$,bNe=X$,wNe=Au,kNe=qJ,TNe=mNe,MNe=NJ,SNe=xNe,PNe=Pm,ENe=Gs;function jNe(e,t,r){t.length?t=JS(t,function(s){return ENe(s)?function(a){return bNe(a,s.length===1?s[0]:s)}:s}):t=[PNe];var n=-1;t=JS(t,MNe(wNe));var i=kNe(e,function(s,a,o){var l=JS(t,function(c){return c(s)});return{criteria:l,index:++n,value:s}});return TNe(i,function(s,a){return SNe(s,a,r)})}var CNe=jNe;function ANe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ONe=ANe,$Ne=ONe,$U=Math.max;function NNe(e,t,r){return t=$U(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=$U(n.length-t,0),a=Array(s);++i<s;)a[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(a),$Ne(e,this,o)}}var INe=NNe;function DNe(e){return function(){return e}}var LNe=DNe,RNe=bf,FNe=function(){try{var e=RNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),XJ=FNe,BNe=LNe,NU=XJ,zNe=Pm,VNe=NU?function(e,t){return NU(e,"toString",{configurable:!0,enumerable:!1,value:BNe(t),writable:!0})}:zNe,UNe=VNe,WNe=800,GNe=16,HNe=Date.now;function KNe(e){var t=0,r=0;return function(){var n=HNe(),i=GNe-(n-r);if(r=n,i>0){if(++t>=WNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qNe=KNe,XNe=UNe,YNe=qNe,QNe=YNe(XNe),ZNe=QNe,JNe=Pm,eIe=INe,tIe=ZNe;function rIe(e,t){return tIe(eIe(e,t,JNe),e+"")}var nIe=rIe,iIe=W$,sIe=$k,aIe=oN,oIe=Cu;function lIe(e,t,r){if(!oIe(r))return!1;var n=typeof t;return(n=="number"?sIe(r)&&aIe(t,r.length):n=="string"&&t in r)?iIe(r[t],e):!1}var Ik=lIe,cIe=HJ,uIe=CNe,dIe=nIe,IU=Ik,fIe=dIe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&IU(e,t[0],t[1])?t=[]:r>2&&IU(t[0],t[1],t[2])&&(t=[t[0]]),uIe(e,cIe(t,1),[])}),hIe=fIe;const fN=Dr(hIe);function dy(e){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HC.apply(this,arguments)}function pIe(e,t){return yIe(e)||vIe(e,t)||gIe(e,t)||mIe()}function mIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gIe(e,t){if(e){if(typeof e=="string")return DU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DU(e,t)}}function DU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function yIe(e){if(Array.isArray(e))return e}function LU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(r),!0).forEach(function(n){_Ie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ie(e,t,r){return t=xIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xIe(e){var t=bIe(e,"string");return dy(t)=="symbol"?t:t+""}function bIe(e,t){if(dy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wIe(e){return Array.isArray(e)&&xi(e[0])&&xi(e[1])?e.join(" ~ "):e}var kIe=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,a=t.itemStyle,o=a===void 0?{}:a,l=t.labelStyle,c=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,g=t.label,x=t.labelFormatter,y=t.accessibilityLayer,v=y===void 0?!1:y,_=function(){if(f&&f.length){var I={padding:0,margin:0},N=(h?fN(f,h):f).map(function(z,V){if(z.type==="none")return null;var G=eP({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},o),H=z.formatter||d||wIe,O=z.value,q=z.name,ee=O,B=q;if(H&&ee!=null&&B!=null){var D=H(O,q,z,V,f);if(Array.isArray(D)){var K=pIe(D,2);ee=K[0],B=K[1]}else ee=D}return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:G},xi(B)?ae.createElement("span",{className:"recharts-tooltip-item-name"},B):null,xi(B)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},ee),ae.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:I},N)}return null},b=eP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=eP({margin:0},c),k=!yr(g),T=k?g:"",M=dr("recharts-default-tooltip",p),j=dr("recharts-tooltip-label",m);k&&x&&f!==void 0&&f!==null&&(T=x(g,f));var C=v?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",HC({className:M,style:b},C),ae.createElement("p",{className:j,style:w},ae.isValidElement(T)?T:"".concat(T)),_())};function fy(e){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(e)}function dx(e,t,r){return t=TIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TIe(e){var t=MIe(e,"string");return fy(t)=="symbol"?t:t+""}function MIe(e,t){if(fy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wg="recharts-tooltip-wrapper",SIe={visibility:"hidden"};function PIe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return dr(wg,dx(dx(dx(dx({},"".concat(wg,"-right"),dt(r)&&t&&dt(t.x)&&r>=t.x),"".concat(wg,"-left"),dt(r)&&t&&dt(t.x)&&r<t.x),"".concat(wg,"-bottom"),dt(n)&&t&&dt(t.y)&&n>=t.y),"".concat(wg,"-top"),dt(n)&&t&&dt(t.y)&&n<t.y))}function RU(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&dt(s[n]))return s[n];var f=r[n]-o-i,d=r[n]+i;if(t[n])return a[n]?f:d;if(a[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var m=d+o,g=l[n]+c;return m>g?Math.max(f,l[n]):Math.max(d,l[n])}function EIe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function jIe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,s=e.reverseDirection,a=e.tooltipBox,o=e.useTranslate3d,l=e.viewBox,c,f,d;return a.height>0&&a.width>0&&r?(f=RU({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=RU({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=EIe({translateX:f,translateY:d,useTranslate3d:o})):c=SIe,{cssProperties:c,cssClasses:PIe({translateX:f,translateY:d,coordinate:r})}}function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function FU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(r),!0).forEach(function(n){qC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QJ(n.key),n)}}function OIe(e,t,r){return t&&AIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Ie(e,t,r){return t=vw(t),NIe(e,YJ()?Reflect.construct(t,r||[],vw(e).constructor):t.apply(e,r))}function NIe(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IIe(e)}function IIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YJ=function(){return!!e})()}function vw(e){return vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vw(e)}function DIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KC(e,t)}function KC(e,t){return KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KC(e,t)}function qC(e,t,r){return t=QJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QJ(e){var t=LIe(e,"string");return Ap(t)=="symbol"?t:t+""}function LIe(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zU=1,RIe=function(e){function t(){var r;CIe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=$Ie(this,t,[].concat(i)),qC(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),qC(r,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&c!==void 0?c:0}})}}),r}return DIe(t,e),OIe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>zU||Math.abs(n.height-this.state.lastBoundingBox.height)>zU)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,f=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,x=i.useTranslate3d,y=i.viewBox,v=i.wrapperStyle,_=jIe({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),b=_.cssClasses,w=_.cssProperties,k=BU(BU({transition:h&&s?"transform ".concat(o,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},v);return ae.createElement("div",{tabIndex:-1,className:b,style:k,ref:function(M){n.wrapperNode=M}},c)}}])}(E.PureComponent),FIe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vl={isSsr:FIe(),get:function(t){return Vl[t]},set:function(t,r){if(typeof t=="string")Vl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(i){Vl[i]=t[i]})}}};function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function VU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(r),!0).forEach(function(n){hN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JJ(n.key),n)}}function VIe(e,t,r){return t&&zIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UIe(e,t,r){return t=yw(t),WIe(e,ZJ()?Reflect.construct(t,r||[],yw(e).constructor):t.apply(e,r))}function WIe(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GIe(e)}function GIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZJ=function(){return!!e})()}function yw(e){return yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yw(e)}function HIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XC(e,t)}function XC(e,t){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XC(e,t)}function hN(e,t,r){return t=JJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=KIe(e,"string");return Op(t)=="symbol"?t:t+""}function KIe(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qIe(e){return e.dataKey}function XIe(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):typeof e=="function"?ae.createElement(e,t):ae.createElement(kIe,t)}var El=function(e){function t(){return BIe(this,t),UIe(this,t,arguments)}return HIe(t,e),VIe(t,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,x=i.position,y=i.reverseDirection,v=i.useTranslate3d,_=i.viewBox,b=i.wrapperStyle,w=m??[];d&&w.length&&(w=VJ(m.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),g,qIe));var k=w.length>0;return ae.createElement(RIe,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:s,coordinate:f,hasPayload:k,offset:p,position:x,reverseDirection:y,useTranslate3d:v,viewBox:_,wrapperStyle:b},XIe(c,UU(UU({},this.props),{},{payload:w})))}}])}(E.PureComponent);hN(El,"displayName","Tooltip");hN(El,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Vl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var YIe=fl,QIe=function(){return YIe.Date.now()},ZIe=QIe,JIe=/\s/;function eDe(e){for(var t=e.length;t--&&JIe.test(e.charAt(t)););return t}var tDe=eDe,rDe=tDe,nDe=/^\s+/;function iDe(e){return e&&e.slice(0,rDe(e)+1).replace(nDe,"")}var sDe=iDe,aDe=sDe,WU=Cu,oDe=xm,GU=NaN,lDe=/^[-+]0x[0-9a-f]+$/i,cDe=/^0b[01]+$/i,uDe=/^0o[0-7]+$/i,dDe=parseInt;function fDe(e){if(typeof e=="number")return e;if(oDe(e))return GU;if(WU(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=WU(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=aDe(e);var r=cDe.test(e);return r||uDe.test(e)?dDe(e.slice(2),r?2:8):lDe.test(e)?GU:+e}var eee=fDe,hDe=Cu,tP=ZIe,HU=eee,pDe="Expected a function",mDe=Math.max,gDe=Math.min;function vDe(e,t,r){var n,i,s,a,o,l,c=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(pDe);t=HU(t)||0,hDe(r)&&(f=!!r.leading,d="maxWait"in r,s=d?mDe(HU(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h);function p(k){var T=n,M=i;return n=i=void 0,c=k,a=e.apply(M,T),a}function m(k){return c=k,o=setTimeout(y,t),f?p(k):a}function g(k){var T=k-l,M=k-c,j=t-T;return d?gDe(j,s-M):j}function x(k){var T=k-l,M=k-c;return l===void 0||T>=t||T<0||d&&M>=s}function y(){var k=tP();if(x(k))return v(k);o=setTimeout(y,g(k))}function v(k){return o=void 0,h&&n?p(k):(n=i=void 0,a)}function _(){o!==void 0&&clearTimeout(o),c=0,n=l=i=o=void 0}function b(){return o===void 0?a:v(tP())}function w(){var k=tP(),T=x(k);if(n=arguments,i=this,l=k,T){if(o===void 0)return m(l);if(d)return clearTimeout(o),o=setTimeout(y,t),p(l)}return o===void 0&&(o=setTimeout(y,t)),a}return w.cancel=_,w.flush=b,w}var yDe=vDe,_De=yDe,xDe=Cu,bDe="Expected a function";function wDe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(bDe);return xDe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),_De(e,t,{leading:n,maxWait:t,trailing:i})}var kDe=wDe;const tee=Dr(kDe);function hy(e){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(e)}function KU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(r),!0).forEach(function(n){TDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TDe(e,t,r){return t=MDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MDe(e){var t=SDe(e,"string");return hy(t)=="symbol"?t:t+""}function SDe(e,t){if(hy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PDe(e,t){return ADe(e)||CDe(e,t)||jDe(e,t)||EDe()}function EDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jDe(e,t){if(e){if(typeof e=="string")return qU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qU(e,t)}}function qU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function ADe(e){if(Array.isArray(e))return e}var XU=E.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=e.width,a=s===void 0?"100%":s,o=e.height,l=o===void 0?"100%":o,c=e.minWidth,f=c===void 0?0:c,d=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,g=m===void 0?0:m,x=e.id,y=e.className,v=e.onResize,_=e.style,b=_===void 0?{}:_,w=E.useRef(null),k=E.useRef();k.current=v,E.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var T=E.useState({containerWidth:i.width,containerHeight:i.height}),M=PDe(T,2),j=M[0],C=M[1],R=E.useCallback(function(N,z){C(function(V){var G=Math.round(N),H=Math.round(z);return V.containerWidth===G&&V.containerHeight===H?V:{containerWidth:G,containerHeight:H}})},[]);E.useEffect(function(){var N=function(q){var ee,B=q[0].contentRect,D=B.width,K=B.height;R(D,K),(ee=k.current)===null||ee===void 0||ee.call(k,D,K)};g>0&&(N=tee(N,g,{trailing:!0,leading:!1}));var z=new ResizeObserver(N),V=w.current.getBoundingClientRect(),G=V.width,H=V.height;return R(G,H),z.observe(w.current),function(){z.disconnect()}},[R,g]);var I=E.useMemo(function(){var N=j.containerWidth,z=j.containerHeight;if(N<0||z<0)return null;zl(jd(a)||jd(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),zl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var V=jd(a)?N:a,G=jd(l)?z:l;r&&r>0&&(V?G=V/r:G&&(V=G*r),h&&G>h&&(G=h)),zl(V>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,G,a,l,f,d,r);var H=!Array.isArray(p)&&Bl(p.type).endsWith("Chart");return ae.Children.map(p,function(O){return ZZ.isElement(O)?E.cloneElement(O,fx({width:V,height:G},H?{style:fx({height:"100%",width:"100%",maxHeight:G,maxWidth:V},O.props.style)}:{})):O})},[r,p,l,h,d,f,j,a]);return ae.createElement("div",{id:x?"".concat(x):void 0,className:dr("recharts-responsive-container",y),style:fx(fx({},b),{},{width:a,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:w},I)}),Dk=function(t){return null};Dk.displayName="Cell";function py(e){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(e)}function YU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function YC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YU(Object(r),!0).forEach(function(n){ODe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ODe(e,t,r){return t=$De(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $De(e){var t=NDe(e,"string");return py(t)=="symbol"?t:t+""}function NDe(e,t){if(py(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(py(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yf={widthCache:{},cacheCount:0},IDe=2e3,DDe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QU="recharts_measurement_span";function LDe(e){var t=YC({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var bv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Vl.isSsr)return{width:0,height:0};var n=LDe(r),i=JSON.stringify({text:t,copyStyle:n});if(Yf.widthCache[i])return Yf.widthCache[i];try{var s=document.getElementById(QU);s||(s=document.createElement("span"),s.setAttribute("id",QU),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=YC(YC({},DDe),n);Object.assign(s.style,a),s.textContent="".concat(t);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return Yf.widthCache[i]=l,++Yf.cacheCount>IDe&&(Yf.cacheCount=0,Yf.widthCache={}),l}catch{return{width:0,height:0}}},RDe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function my(e){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(e)}function _w(e,t){return VDe(e)||zDe(e,t)||BDe(e,t)||FDe()}function FDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BDe(e,t){if(e){if(typeof e=="string")return ZU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZU(e,t)}}function ZU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function VDe(e){if(Array.isArray(e))return e}function UDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GDe(n.key),n)}}function WDe(e,t,r){return t&&JU(e.prototype,t),r&&JU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GDe(e){var t=HDe(e,"string");return my(t)=="symbol"?t:t+""}function HDe(e,t){if(my(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(my(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var e5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KDe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qDe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ree={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},XDe=Object.keys(ree),$h="NaN";function YDe(e,t){return e*ree[t]}var hx=function(){function e(t,r){UDe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!KDe.test(r)&&(this.num=NaN,this.unit=""),XDe.includes(r)&&(this.num=YDe(t,r),this.unit="px")}return WDe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=qDe.exec(r))!==null&&n!==void 0?n:[],s=_w(i,3),a=s[1],o=s[2];return new e(parseFloat(a),o??"")}}])}();function nee(e){if(e.includes($h))return $h;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=e5.exec(t))!==null&&r!==void 0?r:[],i=_w(n,4),s=i[1],a=i[2],o=i[3],l=hx.parse(s??""),c=hx.parse(o??""),f=a==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return $h;t=t.replace(e5,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=t5.exec(t))!==null&&d!==void 0?d:[],p=_w(h,4),m=p[1],g=p[2],x=p[3],y=hx.parse(m??""),v=hx.parse(x??""),_=g==="+"?y.add(v):y.subtract(v);if(_.isNaN())return $h;t=t.replace(t5,_.toString())}return t}var r5=/\(([^()]*)\)/;function QDe(e){for(var t=e;t.includes("(");){var r=r5.exec(t),n=_w(r,2),i=n[1];t=t.replace(r5,nee(i))}return t}function ZDe(e){var t=e.replace(/\s+/g,"");return t=QDe(t),t=nee(t),t}function JDe(e){try{return ZDe(e)}catch{return $h}}function rP(e){var t=JDe(e.slice(5,-1));return t===$h?"":t}var eLe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tLe=["dx","dy","angle","className","breakAll"];function QC(){return QC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QC.apply(this,arguments)}function n5(e,t){if(e==null)return{};var r=rLe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function i5(e,t){return aLe(e)||sLe(e,t)||iLe(e,t)||nLe()}function nLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iLe(e,t){if(e){if(typeof e=="string")return s5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s5(e,t)}}function s5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function aLe(e){if(Array.isArray(e))return e}var iee=/[ \f\n\r\t\v\u2028\u2029]+/,see=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var s=[];yr(r)||(n?s=r.toString().split(""):s=r.toString().split(iee));var a=s.map(function(l){return{word:l,width:bv(l,i).width}}),o=n?0:bv("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},oLe=function(t,r,n,i,s){var a=t.maxLines,o=t.children,l=t.style,c=t.breakAll,f=dt(a),d=o,h=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(G,H){var O=H.word,q=H.width,ee=G[G.length-1];if(ee&&(i==null||s||ee.width+q+n<Number(i)))ee.words.push(O),ee.width+=q+n;else{var B={words:[O],width:q};G.push(B)}return G},[])},p=h(r),m=function(V){return V.reduce(function(G,H){return G.width>H.width?G:H})};if(!f)return p;for(var g="",x=function(V){var G=d.slice(0,V),H=see({breakAll:c,style:l,children:G+g}).wordsWithComputedWidth,O=h(H),q=O.length>a||m(O).width>Number(i);return[q,O]},y=0,v=d.length-1,_=0,b;y<=v&&_<=d.length-1;){var w=Math.floor((y+v)/2),k=w-1,T=x(k),M=i5(T,2),j=M[0],C=M[1],R=x(w),I=i5(R,1),N=I[0];if(!j&&!N&&(y=w+1),j&&N&&(v=w-1),!j&&N){b=C;break}_++}return b||p},a5=function(t){var r=yr(t)?[]:t.toString().split(iee);return[{words:r}]},lLe=function(t){var r=t.width,n=t.scaleToFit,i=t.children,s=t.style,a=t.breakAll,o=t.maxLines;if((r||n)&&!Vl.isSsr){var l,c,f=see({breakAll:a,children:i,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,c=h}else return a5(i);return oLe({breakAll:a,children:i,maxLines:o,style:s},l,c,r,n)}return a5(i)},o5="#808080",nf=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,a=t.lineHeight,o=a===void 0?"1em":a,l=t.capHeight,c=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,m=t.verticalAnchor,g=m===void 0?"end":m,x=t.fill,y=x===void 0?o5:x,v=n5(t,eLe),_=E.useMemo(function(){return lLe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),b=v.dx,w=v.dy,k=v.angle,T=v.className,M=v.breakAll,j=n5(v,tLe);if(!xi(n)||!xi(s))return null;var C=n+(dt(b)?b:0),R=s+(dt(w)?w:0),I;switch(g){case"start":I=rP("calc(".concat(c,")"));break;case"middle":I=rP("calc(".concat((_.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:I=rP("calc(".concat(_.length-1," * -").concat(o,")"));break}var N=[];if(d){var z=_[0].width,V=v.width;N.push("scale(".concat((dt(V)?V/z:1)/z,")"))}return k&&N.push("rotate(".concat(k,", ").concat(C,", ").concat(R,")")),N.length&&(j.transform=N.join(" ")),ae.createElement("text",QC({},Qt(j,!0),{x:C,y:R,className:dr("recharts-text",T),textAnchor:p,fill:y.includes("url")?o5:y}),_.map(function(G,H){var O=G.words.join(M?"":" ");return ae.createElement("tspan",{x:C,dy:H===0?I:o,key:"".concat(O,"-").concat(H)},O)}))};function au(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cLe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pN(e){let t,r,n;e.length!==2?(t=au,r=(o,l)=>au(e(o),l),n=(o,l)=>e(o)-l):(t=e===au||e===cLe?e:uLe,r=e,n=e);function i(o,l,c=0,f=o.length){if(c<f){if(t(l,l)!==0)return f;do{const d=c+f>>>1;r(o[d],l)<0?c=d+1:f=d}while(c<f)}return c}function s(o,l,c=0,f=o.length){if(c<f){if(t(l,l)!==0)return f;do{const d=c+f>>>1;r(o[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function a(o,l,c=0,f=o.length){const d=i(o,l,c,f-1);return d>c&&n(o[d-1],l)>-n(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function uLe(){return 0}function aee(e){return e===null?NaN:+e}function*dLe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fLe=pN(au),O_=fLe.right;pN(aee).center;class l5 extends Map{constructor(t,r=mLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(c5(this,t))}has(t){return super.has(c5(this,t))}set(t,r){return super.set(hLe(this,t),r)}delete(t){return super.delete(pLe(this,t))}}function c5({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function hLe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function pLe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function mLe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gLe(e=au){if(e===au)return oee;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oee(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vLe=Math.sqrt(50),yLe=Math.sqrt(10),_Le=Math.sqrt(2);function xw(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=vLe?10:s>=yLe?5:s>=_Le?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?xw(e,t,r*2):[o,l,c]}function ZC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,a]=n?xw(t,e,r):xw(e,t,r);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function JC(e,t,r){return t=+t,e=+e,r=+r,xw(e,t,r)[2]}function e2(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?JC(t,e,r):JC(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function u5(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function d5(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function lee(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?oee:gLe(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*d/l+h)),m=Math.min(n,Math.floor(t+(l-c)*d/l+h));lee(e,t,p,m,i)}const s=e[t];let a=r,o=n;for(kg(e,r,t),i(e[n],s)>0&&kg(e,r,n);a<o;){for(kg(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[r],s)===0?kg(e,r,o):(++o,kg(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function kg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xLe(e,t,r){if(e=Float64Array.from(dLe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return d5(e);if(t>=1)return u5(e);var n,i=(n-1)*t,s=Math.floor(i),a=u5(lee(e,s).subarray(0,s+1)),o=d5(e.subarray(s+1));return a+(o-a)*(i-s)}}function bLe(e,t,r=aee){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),a=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function wLe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Ha(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function lc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const t2=Symbol("implicit");function mN(){var e=new l5,t=[],r=[],n=t2;function i(s){let a=e.get(s);if(a===void 0){if(n!==t2)return n;e.set(s,a=t.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new l5;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return mN(t,r).unknown(n)},Ha.apply(i,arguments),i}function gy(){var e=mN().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,a,o=!1,l=0,c=0,f=.5;delete e.unknown;function d(){var h=t().length,p=i<n,m=p?i:n,g=p?n:i;s=(g-m)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),m+=(g-m-s*(h-l))*f,a=s*(1-l),o&&(m=Math.round(m),a=Math.round(a));var x=wLe(h).map(function(y){return m+s*y});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,d()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return gy(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},Ha.apply(d(),arguments)}function cee(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cee(t())},e}function wv(){return cee(gy.apply(null,arguments).paddingInner(1))}function gN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uee(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function $_(){}var vy=.7,bw=1/vy,ep="\\s*([+-]?\\d+)\\s*",yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kLe=/^#([0-9a-f]{3,8})$/,TLe=new RegExp(`^rgb\\(${ep},${ep},${ep}\\)$`),MLe=new RegExp(`^rgb\\(${il},${il},${il}\\)$`),SLe=new RegExp(`^rgba\\(${ep},${ep},${ep},${yy}\\)$`),PLe=new RegExp(`^rgba\\(${il},${il},${il},${yy}\\)$`),ELe=new RegExp(`^hsl\\(${yy},${il},${il}\\)$`),jLe=new RegExp(`^hsla\\(${yy},${il},${il},${yy}\\)$`),f5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gN($_,_y,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:h5,formatHex:h5,formatHex8:CLe,formatHsl:ALe,formatRgb:p5,toString:p5});function h5(){return this.rgb().formatHex()}function CLe(){return this.rgb().formatHex8()}function ALe(){return dee(this).formatHsl()}function p5(){return this.rgb().formatRgb()}function _y(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kLe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?m5(t):r===3?new zs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?px(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?px(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=TLe.exec(e))?new zs(t[1],t[2],t[3],1):(t=MLe.exec(e))?new zs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SLe.exec(e))?px(t[1],t[2],t[3],t[4]):(t=PLe.exec(e))?px(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ELe.exec(e))?y5(t[1],t[2]/100,t[3]/100,1):(t=jLe.exec(e))?y5(t[1],t[2]/100,t[3]/100,t[4]):f5.hasOwnProperty(e)?m5(f5[e]):e==="transparent"?new zs(NaN,NaN,NaN,0):null}function m5(e){return new zs(e>>16&255,e>>8&255,e&255,1)}function px(e,t,r,n){return n<=0&&(e=t=r=NaN),new zs(e,t,r,n)}function OLe(e){return e instanceof $_||(e=_y(e)),e?(e=e.rgb(),new zs(e.r,e.g,e.b,e.opacity)):new zs}function r2(e,t,r,n){return arguments.length===1?OLe(e):new zs(e,t,r,n??1)}function zs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gN(zs,r2,uee($_,{brighter(e){return e=e==null?bw:Math.pow(bw,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vy:Math.pow(vy,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zs(Wd(this.r),Wd(this.g),Wd(this.b),ww(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g5,formatHex:g5,formatHex8:$Le,formatRgb:v5,toString:v5}));function g5(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}`}function $Le(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}${Cd((isNaN(this.opacity)?1:this.opacity)*255)}`}function v5(){const e=ww(this.opacity);return`${e===1?"rgb(":"rgba("}${Wd(this.r)}, ${Wd(this.g)}, ${Wd(this.b)}${e===1?")":`, ${e})`}`}function ww(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cd(e){return e=Wd(e),(e<16?"0":"")+e.toString(16)}function y5(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new yo(e,t,r,n)}function dee(e){if(e instanceof yo)return new yo(e.h,e.s,e.l,e.opacity);if(e instanceof $_||(e=_y(e)),!e)return new yo;if(e instanceof yo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-t)/o+2:a=(t-r)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new yo(a,o,l,e.opacity)}function NLe(e,t,r,n){return arguments.length===1?dee(e):new yo(e,t,r,n??1)}function yo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gN(yo,NLe,uee($_,{brighter(e){return e=e==null?bw:Math.pow(bw,e),new yo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vy:Math.pow(vy,e),new yo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new zs(nP(e>=240?e-240:e+120,i,n),nP(e,i,n),nP(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new yo(_5(this.h),mx(this.s),mx(this.l),ww(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ww(this.opacity);return`${e===1?"hsl(":"hsla("}${_5(this.h)}, ${mx(this.s)*100}%, ${mx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _5(e){return e=(e||0)%360,e<0?e+360:e}function mx(e){return Math.max(0,Math.min(1,e||0))}function nP(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const vN=e=>()=>e;function ILe(e,t){return function(r){return e+r*t}}function DLe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function LLe(e){return(e=+e)==1?fee:function(t,r){return r-t?DLe(t,r,e):vN(isNaN(t)?r:t)}}function fee(e,t){var r=t-e;return r?ILe(e,r):vN(isNaN(e)?t:e)}const x5=function e(t){var r=LLe(t);function n(i,s){var a=r((i=r2(i)).r,(s=r2(s)).r),o=r(i.g,s.g),l=r(i.b,s.b),c=fee(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return n.gamma=e,n}(1);function RLe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function FLe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BLe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=Em(e[a],t[a]);for(;a<r;++a)s[a]=t[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function zLe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function kw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function VLe(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Em(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var n2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iP=new RegExp(n2.source,"g");function ULe(e){return function(){return e}}function WLe(e){return function(t){return e(t)+""}}function GLe(e,t){var r=n2.lastIndex=iP.lastIndex=0,n,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(n=n2.exec(e))&&(i=iP.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:kw(n,i)})),r=iP.lastIndex;return r<t.length&&(s=t.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?WLe(l[0].x):ULe(t):(t=l.length,function(c){for(var f=0,d;f<t;++f)o[(d=l[f]).i]=d.x(c);return o.join("")})}function Em(e,t){var r=typeof t,n;return t==null||r==="boolean"?vN(t):(r==="number"?kw:r==="string"?(n=_y(t))?(t=n,x5):GLe:t instanceof _y?x5:t instanceof Date?zLe:FLe(t)?RLe:Array.isArray(t)?BLe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VLe:kw)(e,t)}function yN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function HLe(e,t){t===void 0&&(t=e,e=Em);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function KLe(e){return function(){return e}}function Tw(e){return+e}var b5=[0,1];function Ts(e){return e}function i2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KLe(isNaN(t)?NaN:.5)}function qLe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function XLe(e,t,r){var n=e[0],i=e[1],s=t[0],a=t[1];return i<n?(n=i2(i,n),s=r(a,s)):(n=i2(n,i),s=r(s,a)),function(o){return s(n(o))}}function YLe(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=i2(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(o){var l=O_(e,o,1,n)-1;return s[l](i[l](o))}}function N_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lk(){var e=b5,t=b5,r=Em,n,i,s,a=Ts,o,l,c;function f(){var h=Math.min(e.length,t.length);return a!==Ts&&(a=qLe(e[0],e[h-1])),o=h>2?YLe:XLe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(n),t,r)))(n(a(h)))}return d.invert=function(h){return a(i((c||(c=o(t,e.map(n),kw)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Tw),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=yN,f()},d.clamp=function(h){return arguments.length?(a=h?!0:Ts,f()):a!==Ts},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,p){return n=h,i=p,f()}}function _N(){return Lk()(Ts,Ts)}function QLe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function $p(e){return e=Mw(Math.abs(e)),e?e[1]:NaN}function ZLe(e,t){return function(r,n){for(var i=r.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function JLe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var eRe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xy(e){if(!(t=eRe.exec(e)))throw new Error("invalid format: "+e);var t;return new xN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xy.prototype=xN.prototype;function xN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tRe(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var hee;function rRe(e,t){var r=Mw(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(hee=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Mw(e,Math.max(0,t+s-1))[0]}function w5(e,t){var r=Mw(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const k5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QLe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>w5(e*100,t),r:w5,s:rRe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function T5(e){return e}var M5=Array.prototype.map,S5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nRe(e){var t=e.grouping===void 0||e.thousands===void 0?T5:ZLe(M5.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?T5:JLe(M5.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=xy(d);var h=d.fill,p=d.align,m=d.sign,g=d.symbol,x=d.zero,y=d.width,v=d.comma,_=d.precision,b=d.trim,w=d.type;w==="n"?(v=!0,w="g"):k5[w]||(_===void 0&&(_=12),b=!0,w="g"),(x||h==="0"&&p==="=")&&(x=!0,h="0",p="=");var k=g==="$"?r:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",T=g==="$"?n:/[%p]/.test(w)?a:"",M=k5[w],j=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function C(R){var I=k,N=T,z,V,G;if(w==="c")N=M(R)+N,R="";else{R=+R;var H=R<0||1/R<0;if(R=isNaN(R)?l:M(Math.abs(R),_),b&&(R=tRe(R)),H&&+R==0&&m!=="+"&&(H=!1),I=(H?m==="("?m:o:m==="-"||m==="("?"":m)+I,N=(w==="s"?S5[8+hee/3]:"")+N+(H&&m==="("?")":""),j){for(z=-1,V=R.length;++z<V;)if(G=R.charCodeAt(z),48>G||G>57){N=(G===46?i+R.slice(z+1):R.slice(z))+N,R=R.slice(0,z);break}}}v&&!x&&(R=t(R,1/0));var O=I.length+R.length+N.length,q=O<y?new Array(y-O+1).join(h):"";switch(v&&x&&(R=t(q+R,q.length?y-N.length:1/0),q=""),p){case"<":R=I+R+N+q;break;case"=":R=I+q+R+N;break;case"^":R=q.slice(0,O=q.length>>1)+I+R+N+q.slice(O);break;default:R=q+I+R+N;break}return s(R)}return C.toString=function(){return d+""},C}function f(d,h){var p=c((d=xy(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor($p(h)/3)))*3,g=Math.pow(10,-m),x=S5[8+m/3];return function(y){return p(g*y)+x}}return{format:c,formatPrefix:f}}var gx,bN,pee;iRe({thousands:",",grouping:[3],currency:["$",""]});function iRe(e){return gx=nRe(e),bN=gx.format,pee=gx.formatPrefix,gx}function sRe(e){return Math.max(0,-$p(Math.abs(e)))}function aRe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($p(t)/3)))*3-$p(Math.abs(e)))}function oRe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$p(t)-$p(e))+1}function mee(e,t,r,n){var i=e2(e,t,r),s;switch(n=xy(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=aRe(i,a))&&(n.precision=s),pee(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=oRe(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=sRe(i))&&(n.precision=s-(n.type==="%")*2);break}}return bN(n)}function Ou(e){var t=e.domain;return e.ticks=function(r){var n=t();return ZC(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return mee(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,a=n[i],o=n[s],l,c,f=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);f-- >0;){if(c=JC(a,o,r),c===l)return n[i]=a,n[s]=o,t(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function Sw(){var e=_N();return e.copy=function(){return N_(e,Sw())},Ha.apply(e,arguments),Ou(e)}function gee(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Tw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return gee(e).unknown(t)},e=arguments.length?Array.from(e,Tw):[0,1],Ou(r)}function vee(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),e[r]=t.floor(i),e[n]=t.ceil(s),e}function P5(e){return Math.log(e)}function E5(e){return Math.exp(e)}function lRe(e){return-Math.log(-e)}function cRe(e){return-Math.exp(-e)}function uRe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dRe(e){return e===10?uRe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fRe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function j5(e){return(t,r)=>-e(-t,r)}function wN(e){const t=e(P5,E5),r=t.domain;let n=10,i,s;function a(){return i=fRe(n),s=dRe(n),r()[0]<0?(i=j5(i),s=j5(s),e(lRe,cRe)):e(P5,E5),t}return t.base=function(o){return arguments.length?(n=+o,a()):n},t.domain=function(o){return arguments.length?(r(o),a()):r()},t.ticks=o=>{const l=r();let c=l[0],f=l[l.length-1];const d=f<c;d&&([c,f]=[f,c]);let h=i(c),p=i(f),m,g;const x=o==null?10:+o;let y=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<n;++m)if(g=h<0?m/s(-h):m*s(h),!(g<c)){if(g>f)break;y.push(g)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(g=h>0?m/s(-h):m*s(h),!(g<c)){if(g>f)break;y.push(g)}y.length*2<x&&(y=ZC(c,f,x))}else y=ZC(h,p,Math.min(p-h,x)).map(s);return d?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=xy(l)).precision==null&&(l.trim=!0),l=bN(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*n<n-.5&&(d*=n),d<=c?l(f):""}},t.nice=()=>r(vee(r(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function yee(){const e=wN(Lk()).domain([1,10]);return e.copy=()=>N_(e,yee()).base(e.base()),Ha.apply(e,arguments),e}function C5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function A5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kN(e){var t=1,r=e(C5(t),A5(t));return r.constant=function(n){return arguments.length?e(C5(t=+n),A5(t)):t},Ou(r)}function _ee(){var e=kN(Lk());return e.copy=function(){return N_(e,_ee()).constant(e.constant())},Ha.apply(e,arguments)}function O5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hRe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pRe(e){return e<0?-e*e:e*e}function TN(e){var t=e(Ts,Ts),r=1;function n(){return r===1?e(Ts,Ts):r===.5?e(hRe,pRe):e(O5(r),O5(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Ou(t)}function MN(){var e=TN(Lk());return e.copy=function(){return N_(e,MN()).exponent(e.exponent())},Ha.apply(e,arguments),e}function mRe(){return MN.apply(null,arguments).exponent(.5)}function $5(e){return Math.sign(e)*e*e}function gRe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function xee(){var e=_N(),t=[0,1],r=!1,n;function i(s){var a=gRe(e(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return e.invert($5(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Tw)).map($5)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return xee(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ha.apply(i,arguments),Ou(i)}function bee(){var e=[],t=[],r=[],n;function i(){var a=0,o=Math.max(1,t.length);for(r=new Array(o-1);++a<o;)r[a-1]=bLe(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:t[O_(r,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(au),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return bee().domain(e).range(t).unknown(n)},Ha.apply(s,arguments)}function wee(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[O_(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return wee().domain([e,t]).range(i).unknown(s)},Ha.apply(Ou(a),arguments)}function kee(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[O_(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return kee().domain(e).range(t).unknown(r)},Ha.apply(i,arguments)}const sP=new Date,aP=new Date;function Ti(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),t(s,o),e(s);while(c<s&&s<a);return l},i.filter=s=>Ti(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),r&&(i.count=(s,a)=>(sP.setTime(+s),aP.setTime(+a),e(sP),e(aP),Math.floor(r(sP,aP))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Pw=Ti(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Pw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ti(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Pw);Pw.range;const Nl=1e3,Da=Nl*60,Il=Da*60,Jl=Il*24,SN=Jl*7,N5=Jl*30,oP=Jl*365,Ad=Ti(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Nl)},(e,t)=>(t-e)/Nl,e=>e.getUTCSeconds());Ad.range;const PN=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nl)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getMinutes());PN.range;const EN=Ti(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getUTCMinutes());EN.range;const jN=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nl-e.getMinutes()*Da)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getHours());jN.range;const CN=Ti(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getUTCHours());CN.range;const I_=Ti(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Da)/Jl,e=>e.getDate()-1);I_.range;const Rk=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jl,e=>e.getUTCDate()-1);Rk.range;const Tee=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jl,e=>Math.floor(e/Jl));Tee.range;function wf(e){return Ti(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Da)/SN)}const Fk=wf(0),Ew=wf(1),vRe=wf(2),yRe=wf(3),Np=wf(4),_Re=wf(5),xRe=wf(6);Fk.range;Ew.range;vRe.range;yRe.range;Np.range;_Re.range;xRe.range;function kf(e){return Ti(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/SN)}const Bk=kf(0),jw=kf(1),bRe=kf(2),wRe=kf(3),Ip=kf(4),kRe=kf(5),TRe=kf(6);Bk.range;jw.range;bRe.range;wRe.range;Ip.range;kRe.range;TRe.range;const AN=Ti(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AN.range;const ON=Ti(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ON.range;const ec=Ti(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ec.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ec.range;const tc=Ti(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());tc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});tc.range;function Mee(e,t,r,n,i,s){const a=[[Ad,1,Nl],[Ad,5,5*Nl],[Ad,15,15*Nl],[Ad,30,30*Nl],[s,1,Da],[s,5,5*Da],[s,15,15*Da],[s,30,30*Da],[i,1,Il],[i,3,3*Il],[i,6,6*Il],[i,12,12*Il],[n,1,Jl],[n,2,2*Jl],[r,1,SN],[t,1,N5],[t,3,3*N5],[e,1,oP]];function o(c,f,d){const h=f<c;h&&([c,f]=[f,c]);const p=d&&typeof d.range=="function"?d:l(c,f,d),m=p?p.range(c,+f+1):[];return h?m.reverse():m}function l(c,f,d){const h=Math.abs(f-c)/d,p=pN(([,,x])=>x).right(a,h);if(p===a.length)return e.every(e2(c/oP,f/oP,d));if(p===0)return Pw.every(Math.max(e2(c,f,d),1));const[m,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return m.every(g)}return[o,l]}const[MRe,SRe]=Mee(tc,ON,Bk,Tee,CN,EN),[PRe,ERe]=Mee(ec,AN,Fk,I_,jN,PN);function lP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Tg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function jRe(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=Mg(i),f=Sg(i),d=Mg(s),h=Sg(s),p=Mg(a),m=Sg(a),g=Mg(o),x=Sg(o),y=Mg(l),v=Sg(l),_={a:H,A:O,b:q,B:ee,c:null,d:B5,e:B5,f:ZRe,g:lFe,G:uFe,H:XRe,I:YRe,j:QRe,L:See,m:JRe,M:eFe,p:B,q:D,Q:U5,s:W5,S:tFe,u:rFe,U:nFe,V:iFe,w:sFe,W:aFe,x:null,X:null,y:oFe,Y:cFe,Z:dFe,"%":V5},b={a:K,A:oe,b:_e,B:ue,c:null,d:z5,e:z5,f:mFe,g:MFe,G:PFe,H:fFe,I:hFe,j:pFe,L:Eee,m:gFe,M:vFe,p:ye,q:$e,Q:U5,s:W5,S:yFe,u:_Fe,U:xFe,V:bFe,w:wFe,W:kFe,x:null,X:null,y:TFe,Y:SFe,Z:EFe,"%":V5},w={a:C,A:R,b:I,B:N,c:z,d:R5,e:R5,f:GRe,g:L5,G:D5,H:F5,I:F5,j:zRe,L:WRe,m:BRe,M:VRe,p:j,q:FRe,Q:KRe,s:qRe,S:URe,u:NRe,U:IRe,V:DRe,w:$Re,W:LRe,x:V,X:G,y:L5,Y:D5,Z:RRe,"%":HRe};_.x=k(r,_),_.X=k(n,_),_.c=k(t,_),b.x=k(r,b),b.X=k(n,b),b.c=k(t,b);function k(Se,ge){return function(te){var re=[],J=-1,we=0,Ne=Se.length,je,Pe,Z;for(te instanceof Date||(te=new Date(+te));++J<Ne;)Se.charCodeAt(J)===37&&(re.push(Se.slice(we,J)),(Pe=I5[je=Se.charAt(++J)])!=null?je=Se.charAt(++J):Pe=je==="e"?" ":"0",(Z=ge[je])&&(je=Z(te,Pe)),re.push(je),we=J+1);return re.push(Se.slice(we,J)),re.join("")}}function T(Se,ge){return function(te){var re=Tg(1900,void 0,1),J=M(re,Se,te+="",0),we,Ne;if(J!=te.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ge&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(we=cP(Tg(re.y,0,1)),Ne=we.getUTCDay(),we=Ne>4||Ne===0?jw.ceil(we):jw(we),we=Rk.offset(we,(re.V-1)*7),re.y=we.getUTCFullYear(),re.m=we.getUTCMonth(),re.d=we.getUTCDate()+(re.w+6)%7):(we=lP(Tg(re.y,0,1)),Ne=we.getDay(),we=Ne>4||Ne===0?Ew.ceil(we):Ew(we),we=I_.offset(we,(re.V-1)*7),re.y=we.getFullYear(),re.m=we.getMonth(),re.d=we.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ne="Z"in re?cP(Tg(re.y,0,1)).getUTCDay():lP(Tg(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ne+5)%7:re.w+re.U*7-(Ne+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,cP(re)):lP(re)}}function M(Se,ge,te,re){for(var J=0,we=ge.length,Ne=te.length,je,Pe;J<we;){if(re>=Ne)return-1;if(je=ge.charCodeAt(J++),je===37){if(je=ge.charAt(J++),Pe=w[je in I5?ge.charAt(J++):je],!Pe||(re=Pe(Se,te,re))<0)return-1}else if(je!=te.charCodeAt(re++))return-1}return re}function j(Se,ge,te){var re=c.exec(ge.slice(te));return re?(Se.p=f.get(re[0].toLowerCase()),te+re[0].length):-1}function C(Se,ge,te){var re=p.exec(ge.slice(te));return re?(Se.w=m.get(re[0].toLowerCase()),te+re[0].length):-1}function R(Se,ge,te){var re=d.exec(ge.slice(te));return re?(Se.w=h.get(re[0].toLowerCase()),te+re[0].length):-1}function I(Se,ge,te){var re=y.exec(ge.slice(te));return re?(Se.m=v.get(re[0].toLowerCase()),te+re[0].length):-1}function N(Se,ge,te){var re=g.exec(ge.slice(te));return re?(Se.m=x.get(re[0].toLowerCase()),te+re[0].length):-1}function z(Se,ge,te){return M(Se,t,ge,te)}function V(Se,ge,te){return M(Se,r,ge,te)}function G(Se,ge,te){return M(Se,n,ge,te)}function H(Se){return a[Se.getDay()]}function O(Se){return s[Se.getDay()]}function q(Se){return l[Se.getMonth()]}function ee(Se){return o[Se.getMonth()]}function B(Se){return i[+(Se.getHours()>=12)]}function D(Se){return 1+~~(Se.getMonth()/3)}function K(Se){return a[Se.getUTCDay()]}function oe(Se){return s[Se.getUTCDay()]}function _e(Se){return l[Se.getUTCMonth()]}function ue(Se){return o[Se.getUTCMonth()]}function ye(Se){return i[+(Se.getUTCHours()>=12)]}function $e(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var ge=k(Se+="",_);return ge.toString=function(){return Se},ge},parse:function(Se){var ge=T(Se+="",!1);return ge.toString=function(){return Se},ge},utcFormat:function(Se){var ge=k(Se+="",b);return ge.toString=function(){return Se},ge},utcParse:function(Se){var ge=T(Se+="",!0);return ge.toString=function(){return Se},ge}}}var I5={"-":"",_:" ",0:"0"},$i=/^\s*\d+/,CRe=/^%/,ARe=/[\\^$*+?|[\]().{}]/g;function Ir(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function ORe(e){return e.replace(ARe,"\\$&")}function Mg(e){return new RegExp("^(?:"+e.map(ORe).join("|")+")","i")}function Sg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function $Re(e,t,r){var n=$i.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function NRe(e,t,r){var n=$i.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function IRe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function DRe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function LRe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function D5(e,t,r){var n=$i.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function L5(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function RRe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function FRe(e,t,r){var n=$i.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function BRe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function R5(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function zRe(e,t,r){var n=$i.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function F5(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function VRe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function URe(e,t,r){var n=$i.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function WRe(e,t,r){var n=$i.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function GRe(e,t,r){var n=$i.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function HRe(e,t,r){var n=CRe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function KRe(e,t,r){var n=$i.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function qRe(e,t,r){var n=$i.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function B5(e,t){return Ir(e.getDate(),t,2)}function XRe(e,t){return Ir(e.getHours(),t,2)}function YRe(e,t){return Ir(e.getHours()%12||12,t,2)}function QRe(e,t){return Ir(1+I_.count(ec(e),e),t,3)}function See(e,t){return Ir(e.getMilliseconds(),t,3)}function ZRe(e,t){return See(e,t)+"000"}function JRe(e,t){return Ir(e.getMonth()+1,t,2)}function eFe(e,t){return Ir(e.getMinutes(),t,2)}function tFe(e,t){return Ir(e.getSeconds(),t,2)}function rFe(e){var t=e.getDay();return t===0?7:t}function nFe(e,t){return Ir(Fk.count(ec(e)-1,e),t,2)}function Pee(e){var t=e.getDay();return t>=4||t===0?Np(e):Np.ceil(e)}function iFe(e,t){return e=Pee(e),Ir(Np.count(ec(e),e)+(ec(e).getDay()===4),t,2)}function sFe(e){return e.getDay()}function aFe(e,t){return Ir(Ew.count(ec(e)-1,e),t,2)}function oFe(e,t){return Ir(e.getFullYear()%100,t,2)}function lFe(e,t){return e=Pee(e),Ir(e.getFullYear()%100,t,2)}function cFe(e,t){return Ir(e.getFullYear()%1e4,t,4)}function uFe(e,t){var r=e.getDay();return e=r>=4||r===0?Np(e):Np.ceil(e),Ir(e.getFullYear()%1e4,t,4)}function dFe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ir(t/60|0,"0",2)+Ir(t%60,"0",2)}function z5(e,t){return Ir(e.getUTCDate(),t,2)}function fFe(e,t){return Ir(e.getUTCHours(),t,2)}function hFe(e,t){return Ir(e.getUTCHours()%12||12,t,2)}function pFe(e,t){return Ir(1+Rk.count(tc(e),e),t,3)}function Eee(e,t){return Ir(e.getUTCMilliseconds(),t,3)}function mFe(e,t){return Eee(e,t)+"000"}function gFe(e,t){return Ir(e.getUTCMonth()+1,t,2)}function vFe(e,t){return Ir(e.getUTCMinutes(),t,2)}function yFe(e,t){return Ir(e.getUTCSeconds(),t,2)}function _Fe(e){var t=e.getUTCDay();return t===0?7:t}function xFe(e,t){return Ir(Bk.count(tc(e)-1,e),t,2)}function jee(e){var t=e.getUTCDay();return t>=4||t===0?Ip(e):Ip.ceil(e)}function bFe(e,t){return e=jee(e),Ir(Ip.count(tc(e),e)+(tc(e).getUTCDay()===4),t,2)}function wFe(e){return e.getUTCDay()}function kFe(e,t){return Ir(jw.count(tc(e)-1,e),t,2)}function TFe(e,t){return Ir(e.getUTCFullYear()%100,t,2)}function MFe(e,t){return e=jee(e),Ir(e.getUTCFullYear()%100,t,2)}function SFe(e,t){return Ir(e.getUTCFullYear()%1e4,t,4)}function PFe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ip(e):Ip.ceil(e),Ir(e.getUTCFullYear()%1e4,t,4)}function EFe(){return"+0000"}function V5(){return"%"}function U5(e){return+e}function W5(e){return Math.floor(+e/1e3)}var Qf,Cee,Aee;jFe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jFe(e){return Qf=jRe(e),Cee=Qf.format,Qf.parse,Aee=Qf.utcFormat,Qf.utcParse,Qf}function CFe(e){return new Date(e)}function AFe(e){return e instanceof Date?+e:+new Date(+e)}function $N(e,t,r,n,i,s,a,o,l,c){var f=_N(),d=f.invert,h=f.domain,p=c(".%L"),m=c(":%S"),g=c("%I:%M"),x=c("%I %p"),y=c("%a %d"),v=c("%b %d"),_=c("%B"),b=c("%Y");function w(k){return(l(k)<k?p:o(k)<k?m:a(k)<k?g:s(k)<k?x:n(k)<k?i(k)<k?y:v:r(k)<k?_:b)(k)}return f.invert=function(k){return new Date(d(k))},f.domain=function(k){return arguments.length?h(Array.from(k,AFe)):h().map(CFe)},f.ticks=function(k){var T=h();return e(T[0],T[T.length-1],k??10)},f.tickFormat=function(k,T){return T==null?w:c(T)},f.nice=function(k){var T=h();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?h(vee(T,k)):f},f.copy=function(){return N_(f,$N(e,t,r,n,i,s,a,o,l,c))},f}function OFe(){return Ha.apply($N(PRe,ERe,ec,AN,Fk,I_,jN,PN,Ad,Cee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $Fe(){return Ha.apply($N(MRe,SRe,tc,ON,Bk,Rk,CN,EN,Ad,Aee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zk(){var e=0,t=1,r,n,i,s,a=Ts,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-r)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([e,t]=d,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(h){var p,m;return arguments.length?([p,m]=h,a=d(p,m),c):[a(0),a(1)]}}return c.range=f(Em),c.rangeRound=f(yN),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,r=d(e),n=d(t),i=r===n?0:1/(n-r),c}}function $u(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Oee(){var e=Ou(zk()(Ts));return e.copy=function(){return $u(e,Oee())},lc.apply(e,arguments)}function $ee(){var e=wN(zk()).domain([1,10]);return e.copy=function(){return $u(e,$ee()).base(e.base())},lc.apply(e,arguments)}function Nee(){var e=kN(zk());return e.copy=function(){return $u(e,Nee()).constant(e.constant())},lc.apply(e,arguments)}function NN(){var e=TN(zk());return e.copy=function(){return $u(e,NN()).exponent(e.exponent())},lc.apply(e,arguments)}function NFe(){return NN.apply(null,arguments).exponent(.5)}function Iee(){var e=[],t=Ts;function r(n){if(n!=null&&!isNaN(n=+n))return t((O_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(au),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>xLe(e,s/n))},r.copy=function(){return Iee(t).domain(e)},lc.apply(r,arguments)}function Vk(){var e=0,t=.5,r=1,n=1,i,s,a,o,l,c=Ts,f,d=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+f(g))-s)*(n*g<n*s?o:l),c(d?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,i=f(e=+e),s=f(t=+t),a=f(r=+r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(d=!!g,p):d},p.interpolator=function(g){return arguments.length?(c=g,p):c};function m(g){return function(x){var y,v,_;return arguments.length?([y,v,_]=x,c=HLe(g,[y,v,_]),p):[c(0),c(.5),c(1)]}}return p.range=m(Em),p.rangeRound=m(yN),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return f=g,i=g(e),s=g(t),a=g(r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,p}}function Dee(){var e=Ou(Vk()(Ts));return e.copy=function(){return $u(e,Dee())},lc.apply(e,arguments)}function Lee(){var e=wN(Vk()).domain([.1,1,10]);return e.copy=function(){return $u(e,Lee()).base(e.base())},lc.apply(e,arguments)}function Ree(){var e=kN(Vk());return e.copy=function(){return $u(e,Ree()).constant(e.constant())},lc.apply(e,arguments)}function IN(){var e=TN(Vk());return e.copy=function(){return $u(e,IN()).exponent(e.exponent())},lc.apply(e,arguments)}function IFe(){return IN.apply(null,arguments).exponent(.5)}const G5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gy,scaleDiverging:Dee,scaleDivergingLog:Lee,scaleDivergingPow:IN,scaleDivergingSqrt:IFe,scaleDivergingSymlog:Ree,scaleIdentity:gee,scaleImplicit:t2,scaleLinear:Sw,scaleLog:yee,scaleOrdinal:mN,scalePoint:wv,scalePow:MN,scaleQuantile:bee,scaleQuantize:wee,scaleRadial:xee,scaleSequential:Oee,scaleSequentialLog:$ee,scaleSequentialPow:NN,scaleSequentialQuantile:Iee,scaleSequentialSqrt:NFe,scaleSequentialSymlog:Nee,scaleSqrt:mRe,scaleSymlog:_ee,scaleThreshold:kee,scaleTime:OFe,scaleUtc:$Fe,tickFormat:mee},Symbol.toStringTag,{value:"Module"}));var DFe=xm;function LFe(e,t,r){for(var n=-1,i=e.length;++n<i;){var s=e[n],a=t(s);if(a!=null&&(o===void 0?a===a&&!DFe(a):r(a,o)))var o=a,l=s}return l}var Uk=LFe;function RFe(e,t){return e>t}var Fee=RFe,FFe=Uk,BFe=Fee,zFe=Pm;function VFe(e){return e&&e.length?FFe(e,zFe,BFe):void 0}var UFe=VFe;const Wk=Dr(UFe);function WFe(e,t){return e<t}var Bee=WFe,GFe=Uk,HFe=Bee,KFe=Pm;function qFe(e){return e&&e.length?GFe(e,KFe,HFe):void 0}var XFe=qFe;const Gk=Dr(XFe);var YFe=q$,QFe=Au,ZFe=qJ,JFe=Gs;function e3e(e,t){var r=JFe(e)?YFe:ZFe;return r(e,QFe(t))}var t3e=e3e,r3e=HJ,n3e=t3e;function i3e(e,t){return r3e(n3e(e,t),1)}var s3e=i3e;const a3e=Dr(s3e);var o3e=uN;function l3e(e,t){return o3e(e,t)}var c3e=l3e;const Hk=Dr(c3e);var jm=1e9,u3e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},LN,En=!0,Va="[DecimalError] ",Gd=Va+"Invalid argument: ",DN=Va+"Exponent out of range: ",Cm=Math.floor,vd=Math.pow,d3e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,aa,ji=1e7,yn=7,zee=9007199254740991,Cw=Cm(zee/yn),Tt={};Tt.absoluteValue=Tt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Tt.comparedTo=Tt.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Tt.decimalPlaces=Tt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Tt.dividedBy=Tt.div=function(e){return Ul(this,new this.constructor(e))};Tt.dividedToIntegerBy=Tt.idiv=function(e){var t=this,r=t.constructor;return Qr(Ul(t,new r(e),0,1),r.precision)};Tt.equals=Tt.eq=function(e){return!this.cmp(e)};Tt.exponent=function(){return oi(this)};Tt.greaterThan=Tt.gt=function(e){return this.cmp(e)>0};Tt.greaterThanOrEqualTo=Tt.gte=function(e){return this.cmp(e)>=0};Tt.isInteger=Tt.isint=function(){return this.e>this.d.length-2};Tt.isNegative=Tt.isneg=function(){return this.s<0};Tt.isPositive=Tt.ispos=function(){return this.s>0};Tt.isZero=function(){return this.s===0};Tt.lessThan=Tt.lt=function(e){return this.cmp(e)<0};Tt.lessThanOrEqualTo=Tt.lte=function(e){return this.cmp(e)<1};Tt.logarithm=Tt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(aa))throw Error(Va+"NaN");if(r.s<1)throw Error(Va+(r.s?"NaN":"-Infinity"));return r.eq(aa)?new n(0):(En=!1,t=Ul(by(r,s),by(e,s),s),En=!0,Qr(t,i))};Tt.minus=Tt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Wee(t,e):Vee(t,(e.s=-e.s,e))};Tt.modulo=Tt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Va+"NaN");return r.s?(En=!1,t=Ul(r,e,0,1).times(e),En=!0,r.minus(t)):Qr(new n(r),i)};Tt.naturalExponential=Tt.exp=function(){return Uee(this)};Tt.naturalLogarithm=Tt.ln=function(){return by(this)};Tt.negated=Tt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Tt.plus=Tt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vee(t,e):Wee(t,(e.s=-e.s,e))};Tt.precision=Tt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Gd+e);if(t=oi(i)+1,n=i.d.length-1,r=n*yn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Tt.squareRoot=Tt.sqrt=function(){var e,t,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Va+"NaN")}for(e=oi(o),En=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Yo(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Cm((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=a=r+3;;)if(s=n,n=s.plus(Ul(o,s,a+2)).times(.5),Yo(s.d).slice(0,a)===(t=Yo(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Qr(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;a+=4}return En=!0,Qr(n,r)};Tt.times=Tt.mul=function(e){var t,r,n,i,s,a,o,l,c,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,c=p.length,l<c&&(s=h,h=p,p=s,a=l,l=c,c=a),s=[],a=l+c,n=a;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=s[i]+p[n]*h[i-n-1]+t,s[i--]=o%ji|0,t=o/ji|0;s[i]=(s[i]+t)%ji|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,En?Qr(e,d.precision):e};Tt.toDecimalPlaces=Tt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ll(e,0,jm),t===void 0?t=n.rounding:ll(t,0,8),Qr(r,e+oi(r)+1,t))};Tt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=sf(n,!0):(ll(e,0,jm),t===void 0?t=i.rounding:ll(t,0,8),n=Qr(new i(n),e+1,t),r=sf(n,!0,e+1)),r};Tt.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?sf(i):(ll(e,0,jm),t===void 0?t=s.rounding:ll(t,0,8),n=Qr(new s(i),e+oi(i)+1,t),r=sf(n.abs(),!1,e+oi(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Tt.toInteger=Tt.toint=function(){var e=this,t=e.constructor;return Qr(new t(e),oi(e)+1,t.rounding)};Tt.toNumber=function(){return+this};Tt.toPower=Tt.pow=function(e){var t,r,n,i,s,a,o=this,l=o.constructor,c=12,f=+(e=new l(e));if(!e.s)return new l(aa);if(o=new l(o),!o.s){if(e.s<1)throw Error(Va+"Infinity");return o}if(o.eq(aa))return o;if(n=l.precision,e.eq(aa))return Qr(o,n);if(t=e.e,r=e.d.length-1,a=t>=r,s=o.s,a){if((r=f<0?-f:f)<=zee){for(i=new l(aa),t=Math.ceil(n/yn+4),En=!1;r%2&&(i=i.times(o),K5(i.d,t)),r=Cm(r/2),r!==0;)o=o.times(o),K5(o.d,t);return En=!0,e.s<0?new l(aa).div(i):Qr(i,n)}}else if(s<0)throw Error(Va+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,En=!1,i=e.times(by(o,n+c)),En=!0,i=Uee(i),i.s=s,i};Tt.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=oi(i),n=sf(i,r<=s.toExpNeg||r>=s.toExpPos)):(ll(e,1,jm),t===void 0?t=s.rounding:ll(t,0,8),i=Qr(new s(i),e,t),r=oi(i),n=sf(i,e<=r||r<=s.toExpNeg,e)),n};Tt.toSignificantDigits=Tt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ll(e,1,jm),t===void 0?t=n.rounding:ll(t,0,8)),Qr(new n(r),e,t)};Tt.toString=Tt.valueOf=Tt.val=Tt.toJSON=Tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=oi(e),r=e.constructor;return sf(e,t<=r.toExpNeg||t>=r.toExpPos)};function Vee(e,t){var r,n,i,s,a,o,l,c,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),En?Qr(t,d):t;if(l=e.d,c=t.d,a=e.e,i=t.e,l=l.slice(),s=a-i,s){for(s<0?(n=l,s=-s,o=c.length):(n=c,i=a,o=l.length),a=Math.ceil(d/yn),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/ji|0,l[s]%=ji;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,En?Qr(t,d):t}function ll(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Gd+e)}function Yo(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)n=e[t]+"",r=yn-n.length,r&&(s+=Nc(r)),s+=n;a=e[t],n=a+"",r=yn-n.length,r&&(s+=Nc(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ul=function(){function e(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%ji|0,a=s/ji|0;return a&&n.unshift(a),n}function t(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*ji+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,l,c,f,d,h,p,m,g,x,y,v,_,b,w,k,T,M,j=n.constructor,C=n.s==i.s?1:-1,R=n.d,I=i.d;if(!n.s)return new j(n);if(!i.s)throw Error(Va+"Division by zero");for(l=n.e-i.e,T=I.length,w=R.length,p=new j(C),m=p.d=[],c=0;I[c]==(R[c]||0);)++c;if(I[c]>(R[c]||0)&&--l,s==null?v=s=j.precision:a?v=s+(oi(n)-oi(i))+1:v=s,v<0)return new j(0);if(v=v/yn+2|0,c=0,T==1)for(f=0,I=I[0],v++;(c<w||f)&&v--;c++)_=f*ji+(R[c]||0),m[c]=_/I|0,f=_%I|0;else{for(f=ji/(I[0]+1)|0,f>1&&(I=e(I,f),R=e(R,f),T=I.length,w=R.length),b=T,g=R.slice(0,T),x=g.length;x<T;)g[x++]=0;M=I.slice(),M.unshift(0),k=I[0],I[1]>=ji/2&&++k;do f=0,o=t(I,g,T,x),o<0?(y=g[0],T!=x&&(y=y*ji+(g[1]||0)),f=y/k|0,f>1?(f>=ji&&(f=ji-1),d=e(I,f),h=d.length,x=g.length,o=t(d,g,h,x),o==1&&(f--,r(d,T<h?M:I,h))):(f==0&&(o=f=1),d=I.slice()),h=d.length,h<x&&d.unshift(0),r(g,d,x),o==-1&&(x=g.length,o=t(I,g,T,x),o<1&&(f++,r(g,T<x?M:I,x))),x=g.length):o===0&&(f++,g=[0]),m[c++]=f,o&&g[0]?g[x++]=R[b]||0:(g=[R[b]],x=1);while((b++<w||g[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=l,Qr(p,a?s+oi(p)+1:s)}}();function Uee(e,t){var r,n,i,s,a,o,l=0,c=0,f=e.constructor,d=f.precision;if(oi(e)>16)throw Error(DN+oi(e));if(!e.s)return new f(aa);for(t==null?(En=!1,o=d):o=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),c+=5;for(n=Math.log(vd(2,c))/Math.LN10*2+5|0,o+=n,r=i=s=new f(aa),f.precision=o;;){if(i=Qr(i.times(e),o),r=r.times(++l),a=s.plus(Ul(i,r,o)),Yo(a.d).slice(0,o)===Yo(s.d).slice(0,o)){for(;c--;)s=Qr(s.times(s),o);return f.precision=d,t==null?(En=!0,Qr(s,d)):s}s=a}}function oi(e){for(var t=e.e*yn,r=e.d[0];r>=10;r/=10)t++;return t}function uP(e,t,r){if(t>e.LN10.sd())throw En=!0,r&&(e.precision=r),Error(Va+"LN10 precision limit exceeded");return Qr(new e(e.LN10),t)}function Nc(e){for(var t="";e--;)t+="0";return t}function by(e,t){var r,n,i,s,a,o,l,c,f,d=1,h=10,p=e,m=p.d,g=p.constructor,x=g.precision;if(p.s<1)throw Error(Va+(p.s?"NaN":"-Infinity"));if(p.eq(aa))return new g(0);if(t==null?(En=!1,c=x):c=t,p.eq(10))return t==null&&(En=!0),uP(g,c);if(c+=h,g.precision=c,r=Yo(m),n=r.charAt(0),s=oi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Yo(p.d),n=r.charAt(0),d++;s=oi(p),n>1?(p=new g("0."+r),s++):p=new g(n+"."+r.slice(1))}else return l=uP(g,c+2,x).times(s+""),p=by(new g(n+"."+r.slice(1)),c-h).plus(l),g.precision=x,t==null?(En=!0,Qr(p,x)):p;for(o=a=p=Ul(p.minus(aa),p.plus(aa),c),f=Qr(p.times(p),c),i=3;;){if(a=Qr(a.times(f),c),l=o.plus(Ul(a,new g(i),c)),Yo(l.d).slice(0,c)===Yo(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(uP(g,c+2,x).times(s+""))),o=Ul(o,new g(d),c),g.precision=x,t==null?(En=!0,Qr(o,x)):o;o=l,i+=2}}function H5(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Cm(r/yn),e.d=[],n=(r+1)%yn,r<0&&(n+=yn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=yn;n<i;)e.d.push(+t.slice(n,n+=yn));t=t.slice(n),n=yn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),En&&(e.e>Cw||e.e<-Cw))throw Error(DN+r)}else e.s=0,e.e=0,e.d=[0];return e}function Qr(e,t,r){var n,i,s,a,o,l,c,f,d=e.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(n=t-a,n<0)n+=yn,i=t,c=d[f=0];else{if(f=Math.ceil((n+1)/yn),s=d.length,f>=s)return e;for(c=s=d[f],a=1;s>=10;s/=10)a++;n%=yn,i=n-yn+a}if(r!==void 0&&(s=vd(10,a-i-1),o=c/s%10|0,l=t<0||d[f+1]!==void 0||c%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/vd(10,a-i):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(s=oi(e),d.length=1,t=t-s-1,d[0]=vd(10,(yn-t%yn)%yn),e.e=Cm(-t/yn)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,s=1,f--):(d.length=f+1,s=vd(10,yn-n),d[f]=i>0?(c/vd(10,a-i)%vd(10,i)|0)*s:0),l)for(;;)if(f==0){(d[0]+=s)==ji&&(d[0]=1,++e.e);break}else{if(d[f]+=s,d[f]!=ji)break;d[f--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(En&&(e.e>Cw||e.e<-Cw))throw Error(DN+oi(e));return e}function Wee(e,t){var r,n,i,s,a,o,l,c,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),En?Qr(t,p):t;if(l=e.d,d=t.d,n=t.e,c=e.e,l=l.slice(),a=c-n,a){for(f=a<0,f?(r=l,a=-a,o=d.length):(r=d,n=c,o=l.length),i=Math.max(Math.ceil(p/yn),o)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=d.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}a=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=ji-1;--l[s],l[i]+=ji}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,En?Qr(t,p):t):new h(0)}function sf(e,t,r){var n,i=oi(e),s=Yo(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+Nc(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Nc(-i-1)+s,r&&(n=r-a)>0&&(s+=Nc(n))):i>=a?(s+=Nc(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+Nc(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=Nc(n))),e.s<0?"-"+s:s}function K5(e,t){if(e.length>t)return e.length=t,!0}function Gee(e){var t,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Gd+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return H5(a,s.toString())}else if(typeof s!="string")throw Error(Gd+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,d3e.test(s))H5(a,s);else throw Error(Gd+s)}if(i.prototype=Tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Gee,i.config=i.set=f3e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function f3e(e){if(!e||typeof e!="object")throw Error(Va+"Object expected");var t,r,n,i=["precision",1,jm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Cm(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Gd+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Gd+r+": "+n);return this}var LN=Gee(u3e);aa=new LN(1);const qr=LN;function h3e(e){return v3e(e)||g3e(e)||m3e(e)||p3e()}function p3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m3e(e,t){if(e){if(typeof e=="string")return s2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s2(e,t)}}function g3e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function v3e(e){if(Array.isArray(e))return s2(e)}function s2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y3e=function(t){return t},Hee={"@@functional/placeholder":!0},Kee=function(t){return t===Hee},q5=function(t){return function r(){return arguments.length===0||arguments.length===1&&Kee(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},_3e=function e(t,r){return t===1?r:q5(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==Hee}).length;return a>=t?r.apply(void 0,i):e(t-a,q5(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var f=i.map(function(d){return Kee(d)?l.shift():d});return r.apply(void 0,h3e(f).concat(l))}))})},Kk=function(t){return _3e(t.length,t)},a2=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},x3e=Kk(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),b3e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return y3e;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},o2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},qee=function(t){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r&&s.every(function(o,l){return o===r[l]})||(r=s,n=t.apply(void 0,s)),n}};function w3e(e){var t;return e===0?t=1:t=Math.floor(new qr(e).abs().log(10).toNumber())+1,t}function k3e(e,t,r){for(var n=new qr(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var T3e=Kk(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),M3e=Kk(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),S3e=Kk(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const qk={rangeStep:k3e,getDigitCount:w3e,interpolateNumber:T3e,uninterpolateNumber:M3e,uninterpolateTruncation:S3e};function l2(e){return j3e(e)||E3e(e)||Xee(e)||P3e()}function P3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E3e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function j3e(e){if(Array.isArray(e))return c2(e)}function wy(e,t){return O3e(e)||A3e(e,t)||Xee(e,t)||C3e()}function C3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(e,t){if(e){if(typeof e=="string")return c2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c2(e,t)}}function c2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A3e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,s=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function O3e(e){if(Array.isArray(e))return e}function Yee(e){var t=wy(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function Qee(e,t,r){if(e.lte(0))return new qr(0);var n=qk.getDigitCount(e.toNumber()),i=new qr(10).pow(n),s=e.div(i),a=n!==1?.05:.1,o=new qr(Math.ceil(s.div(a).toNumber())).add(r).mul(a),l=o.mul(i);return t?l:new qr(Math.ceil(l))}function $3e(e,t,r){var n=1,i=new qr(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new qr(10).pow(qk.getDigitCount(e)-1),i=new qr(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new qr(Math.floor(e)))}else e===0?i=new qr(Math.floor((t-1)/2)):r||(i=new qr(Math.floor(e)));var a=Math.floor((t-1)/2),o=b3e(x3e(function(l){return i.add(new qr(l-a).mul(n)).toNumber()}),a2);return o(0,t)}function Zee(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new qr(0),tickMin:new qr(0),tickMax:new qr(0)};var s=Qee(new qr(t).sub(e).div(r-1),n,i),a;e<=0&&t>=0?a=new qr(0):(a=new qr(e).add(t).div(2),a=a.sub(new qr(a).mod(s)));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new qr(t).sub(a).div(s).toNumber()),c=o+l+1;return c>r?Zee(e,t,r,n,i+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:s,tickMin:a.sub(new qr(o).mul(s)),tickMax:a.add(new qr(l).mul(s))})}function N3e(e){var t=wy(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=Yee([r,n]),l=wy(o,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var d=f===1/0?[c].concat(l2(a2(0,i-1).map(function(){return 1/0}))):[].concat(l2(a2(0,i-1).map(function(){return-1/0})),[f]);return r>n?o2(d):d}if(c===f)return $3e(c,i,s);var h=Zee(c,f,a,s),p=h.step,m=h.tickMin,g=h.tickMax,x=qk.rangeStep(m,g.add(new qr(.1).mul(p)),p);return r>n?o2(x):x}function I3e(e,t){var r=wy(e,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Yee([n,i]),o=wy(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var f=Math.max(t,2),d=Qee(new qr(c).sub(l).div(f-1),s,0),h=[].concat(l2(qk.rangeStep(new qr(l),new qr(c).sub(new qr(.99).mul(d)),d)),[c]);return n>i?o2(h):h}var D3e=qee(N3e),L3e=qee(I3e),R3e="Invariant failed";function af(e,t){throw new Error(R3e)}var F3e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aw.apply(this,arguments)}function B3e(e,t){return W3e(e)||U3e(e,t)||V3e(e,t)||z3e()}function z3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V3e(e,t){if(e){if(typeof e=="string")return X5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X5(e,t)}}function X5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function W3e(e){if(Array.isArray(e))return e}function G3e(e,t){if(e==null)return{};var r=H3e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function K3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q3e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tte(n.key),n)}}function X3e(e,t,r){return t&&q3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y3e(e,t,r){return t=Ow(t),Q3e(e,Jee()?Reflect.construct(t,r||[],Ow(e).constructor):t.apply(e,r))}function Q3e(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z3e(e)}function Z3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jee=function(){return!!e})()}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ow(e)}function J3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u2(e,t)}function u2(e,t){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},u2(e,t)}function ete(e,t,r){return t=tte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tte(e){var t=e4e(e,"string");return Dp(t)=="symbol"?t:t+""}function e4e(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xk=function(e){function t(){return K3e(this,t),Y3e(this,t,arguments)}return J3e(t,e),X3e(t,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,a=n.width,o=n.dataKey,l=n.data,c=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=G3e(n,F3e),p=Qt(h,!1);this.props.direction==="x"&&f.type!=="number"&&af();var m=l.map(function(g){var x=c(g,o),y=x.x,v=x.y,_=x.value,b=x.errorVal;if(!b)return null;var w=[],k,T;if(Array.isArray(b)){var M=B3e(b,2);k=M[0],T=M[1]}else k=T=b;if(s==="vertical"){var j=f.scale,C=v+i,R=C+a,I=C-a,N=j(_-k),z=j(_+T);w.push({x1:z,y1:R,x2:z,y2:I}),w.push({x1:N,y1:C,x2:z,y2:C}),w.push({x1:N,y1:R,x2:N,y2:I})}else if(s==="horizontal"){var V=d.scale,G=y+i,H=G-a,O=G+a,q=V(_-k),ee=V(_+T);w.push({x1:H,y1:ee,x2:O,y2:ee}),w.push({x1:G,y1:q,x2:G,y2:ee}),w.push({x1:H,y1:q,x2:O,y2:q})}return ae.createElement(Wr,Aw({className:"recharts-errorBar",key:"bar-".concat(w.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},p),w.map(function(B){return ae.createElement("line",Aw({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return ae.createElement(Wr,{className:"recharts-errorBars"},m)}}])}(ae.Component);ete(Xk,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ete(Xk,"displayName","ErrorBar");function ky(e){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(e)}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(n){t4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t4e(e,t,r){return t=r4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r4e(e){var t=n4e(e,"string");return ky(t)=="symbol"?t:t+""}function n4e(e,t){if(ky(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ky(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rte=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,a=ta(r,Jh);if(!a)return null;var o=Jh.defaultProps,l=o!==void 0?id(id({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,m=p.sectors||p.data||[];return f.concat(m.map(function(g){return{type:a.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?id(id({},h),d.props):{},m=p.dataKey,g=p.name,x=p.legendType,y=p.hide;return{inactive:y,dataKey:m,type:l.iconType||x||"square",color:RN(d),value:g||m,payload:p}}),id(id(id({},l),Jh.getWithHeight(a,i)),{},{payload:c,item:a})};function Ty(e){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ty(e)}function Q5(e){return o4e(e)||a4e(e)||s4e(e)||i4e()}function i4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s4e(e,t){if(e){if(typeof e=="string")return d2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d2(e,t)}}function a4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o4e(e){if(Array.isArray(e))return d2(e)}function d2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(r),!0).forEach(function(n){tp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tp(e,t,r){return t=l4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l4e(e){var t=c4e(e,"string");return Ty(t)=="symbol"?t:t+""}function c4e(e,t){if(Ty(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ty(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function is(e,t,r){return yr(e)||yr(t)?r:xi(t)?fa(e,t,r):lr(t)?t(e):r}function kv(e,t,r,n){var i=a3e(e,function(o){return is(o,t)});if(r==="number"){var s=i.filter(function(o){return dt(o)||parseFloat(o)});return s.length?[Gk(s),Wk(s)]:[1/0,-1/0]}var a=n?i.filter(function(o){return!yr(o)}):i;return a.map(function(o){return xi(o)||o instanceof Date?o:""})}var u4e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var f=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,h=c>=o-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(ws(d-f)!==ws(h-d)){var m=[];if(ws(h-d)===ws(l[1]-l[0])){p=h;var g=d+l[1]-l[0];m[0]=Math.min(g,(g+f)/2),m[1]=Math.max(g,(g+f)/2)}else{p=f;var x=h+l[1]-l[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>y[0]&&t<=y[1]||t>=m[0]&&t<=m[1]){a=i[c].index;break}}else{var v=Math.min(f,h),_=Math.max(f,h);if(t>(v+d)/2&&t<=(_+d)/2){a=i[c].index;break}}}else for(var b=0;b<o;b++)if(b===0&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<o-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===o-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){a=n[b].index;break}return a},RN=function(t){var r,n=t,i=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},d4e=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var f=s[o[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var m=f[d[h]],g=m.items,x=m.cateAxisId,y=g.filter(function(T){return Bl(T.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,_=v!==void 0?Un(Un({},v),y[0].props):y[0].props,b=_.barSize,w=_[x];a[w]||(a[w]=[]);var k=yr(b)?r:b;a[w].push({item:y[0],stackList:y.slice(1),barSize:yr(k)?void 0:ks(k,n,0)})}}return a},f4e=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,s=t.sizeList,a=s===void 0?[]:s,o=t.maxBarSize,l=a.length;if(l<1)return null;var c=ks(r,i,0,!0),f,d=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/l,m=a.reduce(function(b,w){return b+w.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,x={offset:g-c,size:0};f=a.reduce(function(b,w){var k={item:w.item,position:{offset:x.offset+x.size+c,size:h?p:w.barSize}},T=[].concat(Q5(b),[k]);return x=T[T.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(M){T.push({item:M,position:x})}),T},d)}else{var y=ks(n,i,0,!0);i-2*y-(l-1)*c<=0&&(c=0);var v=(i-2*y-(l-1)*c)/l;v>1&&(v>>=0);var _=o===+o?Math.min(v,o):v;f=a.reduce(function(b,w,k){var T=[].concat(Q5(b),[{item:w.item,position:{offset:y+(v+c)*k+(v-_)/2,size:_}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(M){T.push({item:M,position:T[T.length-1].position})}),T},d)}return f},h4e=function(t,r,n,i){var s=n.children,a=n.width,o=n.margin,l=a-(o.left||0)-(o.right||0),c=rte({children:s,legendWidth:l});if(c){var f=i||{},d=f.width,h=f.height,p=c.align,m=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&dt(t[p]))return Un(Un({},t),{},tp({},p,t[p]+(d||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&dt(t[m]))return Un(Un({},t),{},tp({},m,t[m]+(h||0)))}return t},p4e=function(t,r,n){return yr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},nte=function(t,r,n,i,s){var a=r.props.children,o=Ra(a,Xk).filter(function(c){return p4e(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return t.reduce(function(c,f){var d=is(f,n);if(yr(d))return c;var h=Array.isArray(d)?[Gk(d),Wk(d)]:[d,d],p=l.reduce(function(m,g){var x=is(f,g,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),v=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},m4e=function(t,r,n,i,s){var a=r.map(function(o){return nte(t,o,n,s,i)}).filter(function(o){return!yr(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},ite=function(t,r,n,i,s){var a=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&nte(t,l,c,i)||kv(t,c,n,s)});if(n==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var f=0,d=c.length;f<d;f++)o[c[f]]||(o[c[f]]=!0,l.push(c[f]));return l},[])},ste=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Od=function(t,r,n){if(!t)return null;var i=t.scale,s=t.duplicateDomain,a=t.type,o=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ws(o[0]-o[1])*2*c:c,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return f.filter(function(d){return!C_(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:s?s[d]:d,index:h,offset:c}})},dP=new WeakMap,vx=function(t,r){if(typeof r!="function")return t;dP.has(t)||dP.set(t,new WeakMap);var n=dP.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},ate=function(t,r,n){var i=t.scale,s=t.type,a=t.layout,o=t.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:gy(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:Sw(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wv(),realScaleType:"point"}:s==="category"?{scale:gy(),realScaleType:"band"}:{scale:Sw(),realScaleType:"linear"};if(j_(i)){var l="scale".concat(jk(i));return{scale:(G5[l]||wv)(),realScaleType:G5[l]?l:"point"}}return lr(i)?{scale:i}:{scale:wv(),realScaleType:"point"}},J5=1e-4,ote=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),s=Math.min(i[0],i[1])-J5,a=Math.max(i[0],i[1])+J5,o=t(r[0]),l=t(r[n-1]);(o<s||o>a||l<s||l>a)&&t.domain([r[0],r[n-1]])}},g4e=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},v4e=function(t,r){if(!r||r.length!==2||!dt(r[0])||!dt(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!dt(t[0])||t[0]<n)&&(s[0]=n),(!dt(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},y4e=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,a=0,o=0;o<r;++o){var l=C_(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1]):(t[o][n][0]=a,t[o][n][1]=a+l,a=t[o][n][1])}},_4e=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,a=0;a<r;++a){var o=C_(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},x4e={sign:y4e,expand:REe,none:Ep,silhouette:FEe,wiggle:BEe,positive:_4e},b4e=function(t,r,n){var i=r.map(function(o){return o.props.dataKey}),s=x4e[n],a=LEe().keys(i).value(function(o,l){return+is(o,l,0)}).order(DC).offset(s);return a(t)},w4e=function(t,r,n,i,s,a){if(!t)return null;var o=a?r.reverse():r,l={},c=o.reduce(function(d,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Un(Un({},h.type.defaultProps),h.props):h.props,g=m.stackId,x=m.hide;if(x)return d;var y=m[n],v=d[y]||{hasStack:!1,stackGroups:{}};if(xi(g)){var _=v.stackGroups[g]||{numericAxisId:n,cateAxisId:i,items:[]};_.items.push(h),v.hasStack=!0,v.stackGroups[g]=_}else v.stackGroups[A_("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Un(Un({},d),{},tp({},y,v))},l),f={};return Object.keys(c).reduce(function(d,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,x){var y=p.stackGroups[x];return Un(Un({},g),{},tp({},x,{numericAxisId:n,cateAxisId:i,items:y.items,stackedData:b4e(t,y.items,s)}))},m)}return Un(Un({},d),{},tp({},h,p))},f)},lte=function(t,r){var n=r.realScaleType,i=r.type,s=r.tickCount,a=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=t.domain();if(!c.length)return null;var f=D3e(c,s,o);return t.domain([Gk(f),Wk(f)]),{niceTicks:f}}if(s&&i==="number"){var d=t.domain(),h=L3e(d,s,o);return{niceTicks:h}}return null},e6=function(t){var r=t.axis,n=t.ticks,i=t.offset,s=t.bandSize,a=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=is(a,r.dataKey,r.domain[o]);return yr(l)?null:r.scale(l)-s/2+i},k4e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},T4e=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(xi(s)){var a=r[s];if(a){var o=a.items.indexOf(t);return o>=0?a.stackedData[o]:null}}return null},M4e=function(t){return t.reduce(function(r,n){return[Gk(n.concat([r[0]]).filter(dt)),Wk(n.concat([r[1]]).filter(dt))]},[1/0,-1/0])},cte=function(t,r,n){return Object.keys(t).reduce(function(i,s){var a=t[s],o=a.stackedData,l=o.reduce(function(c,f){var d=M4e(f.slice(r,n+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},t6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f2=function(t,r,n){if(lr(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(dt(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(t6.test(t[0])){var s=+t6.exec(t[0])[1];i[0]=r[0]-s}else lr(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(dt(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(r6.test(t[1])){var a=+r6.exec(t[1])[1];i[1]=r[1]+a}else lr(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},$w=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var s=fN(r,function(d){return d.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],f=s[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},n6=function(t,r,n){return!t||!t.length||Hk(t,fa(n,"type.defaultProps.domain"))?r:t},ute=function(t,r){var n=t.type.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,i=n.dataKey,s=n.name,a=n.unit,o=n.formatter,l=n.tooltipType,c=n.chartType,f=n.hide;return Un(Un({},Qt(t,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:RN(t),value:is(r,i),type:l,payload:r,chartType:c,hide:f})};function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){dte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dte(e,t,r){return t=S4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S4e(e){var t=P4e(e,"string");return My(t)=="symbol"?t:t+""}function P4e(e,t){if(My(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(My(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E4e(e,t){return O4e(e)||A4e(e,t)||C4e(e,t)||j4e()}function j4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C4e(e,t){if(e){if(typeof e=="string")return s6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s6(e,t)}}function s6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function O4e(e){if(Array.isArray(e))return e}var Nw=Math.PI/180,$4e=function(t){return t*180/Math.PI},cn=function(t,r,n,i){return{x:t+Math.cos(-Nw*i)*n,y:r+Math.sin(-Nw*i)*n}},fte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},N4e=function(t,r,n,i,s){var a=t.width,o=t.height,l=t.startAngle,c=t.endAngle,f=ks(t.cx,a,a/2),d=ks(t.cy,o,o/2),h=fte(a,o,n),p=ks(t.innerRadius,h,0),m=ks(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(x,y){var v=r[y],_=v.domain,b=v.reversed,w;if(yr(v.range))i==="angleAxis"?w=[l,c]:i==="radiusAxis"&&(w=[p,m]),b&&(w=[w[1],w[0]]);else{w=v.range;var k=w,T=E4e(k,2);l=T[0],c=T[1]}var M=ate(v,s),j=M.realScaleType,C=M.scale;C.domain(_).range(w),ote(C);var R=lte(C,jl(jl({},v),{},{realScaleType:j})),I=jl(jl(jl({},v),R),{},{range:w,radius:m,realScaleType:j,scale:C,cx:f,cy:d,innerRadius:p,outerRadius:m,startAngle:l,endAngle:c});return jl(jl({},x),{},dte({},y,I))},{})},I4e=function(t,r){var n=t.x,i=t.y,s=r.x,a=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-a,2))},D4e=function(t,r){var n=t.x,i=t.y,s=r.cx,a=r.cy,o=I4e({x:n,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(n-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:$4e(c),angleInRadian:c}},L4e=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),a=Math.min(i,s);return{startAngle:r-a*360,endAngle:n-a*360}},R4e=function(t,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),a=Math.floor(i/360),o=Math.min(s,a);return t+o*360},a6=function(t,r){var n=t.x,i=t.y,s=D4e({x:n,y:i},r),a=s.radius,o=s.angle,l=r.innerRadius,c=r.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var f=L4e(r),d=f.startAngle,h=f.endAngle,p=o,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?jl(jl({},r),{},{radius:a,angle:R4e(p,r)}):null},hte=function(t){return!E.isValidElement(t)&&!lr(t)&&typeof t!="boolean"?t.className:""};function Sy(e){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sy(e)}var F4e=["offset"];function B4e(e){return W4e(e)||U4e(e)||V4e(e)||z4e()}function z4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4e(e,t){if(e){if(typeof e=="string")return h2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(e,t)}}function U4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W4e(e){if(Array.isArray(e))return h2(e)}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G4e(e,t){if(e==null)return{};var r=H4e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){K4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K4e(e,t,r){return t=q4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q4e(e){var t=X4e(e,"string");return Sy(t)=="symbol"?t:t+""}function X4e(e,t){if(Sy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py.apply(this,arguments)}var Y4e=function(t){var r=t.value,n=t.formatter,i=yr(t.children)?r:t.children;return lr(n)?n(i):i},Q4e=function(t,r){var n=ws(r-t),i=Math.min(Math.abs(r-t),360);return n*i},Z4e=function(t,r,n){var i=t.position,s=t.viewBox,a=t.offset,o=t.className,l=s,c=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,x=(d+h)/2,y=Q4e(p,m),v=y>=0?1:-1,_,b;i==="insideStart"?(_=p+v*a,b=g):i==="insideEnd"?(_=m-v*a,b=!g):i==="end"&&(_=m+v*a,b=g),b=y<=0?b:!b;var w=cn(c,f,x,_),k=cn(c,f,x,_+(b?1:-1)*359),T="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(b?0:1,`,
    `).concat(k.x,",").concat(k.y),M=yr(t.id)?A_("recharts-radial-line-"):t.id;return ae.createElement("text",Py({},n,{dominantBaseline:"central",className:dr("recharts-radial-bar-label",o)}),ae.createElement("defs",null,ae.createElement("path",{id:M,d:T})),ae.createElement("textPath",{xlinkHref:"#".concat(M)},r))},J4e=function(t){var r=t.viewBox,n=t.offset,i=t.position,s=r,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(i==="outside"){var p=cn(a,o,c+n,h),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+c)/2,y=cn(a,o,x,h),v=y.x,_=y.y;return{x:v,y:_,textAnchor:"middle",verticalAnchor:"middle"}},eBe=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,s=t.position,a=r,o=a.x,l=a.y,c=a.width,f=a.height,d=f>=0?1:-1,h=d*i,p=d>0?"end":"start",m=d>0?"start":"end",g=c>=0?1:-1,x=g*i,y=g>0?"end":"start",v=g>0?"start":"end";if(s==="top"){var _={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return gi(gi({},_),n?{height:Math.max(l-n.y,0),width:c}:{})}if(s==="bottom"){var b={x:o+c/2,y:l+f+h,textAnchor:"middle",verticalAnchor:m};return gi(gi({},b),n?{height:Math.max(n.y+n.height-(l+f),0),width:c}:{})}if(s==="left"){var w={x:o-x,y:l+f/2,textAnchor:y,verticalAnchor:"middle"};return gi(gi({},w),n?{width:Math.max(w.x-n.x,0),height:f}:{})}if(s==="right"){var k={x:o+c+x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return gi(gi({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:f}:{})}var T=n?{width:c,height:f}:{};return s==="insideLeft"?gi({x:o+x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},T):s==="insideRight"?gi({x:o+c-x,y:l+f/2,textAnchor:y,verticalAnchor:"middle"},T):s==="insideTop"?gi({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},T):s==="insideBottom"?gi({x:o+c/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},T):s==="insideTopLeft"?gi({x:o+x,y:l+h,textAnchor:v,verticalAnchor:m},T):s==="insideTopRight"?gi({x:o+c-x,y:l+h,textAnchor:y,verticalAnchor:m},T):s==="insideBottomLeft"?gi({x:o+x,y:l+f-h,textAnchor:v,verticalAnchor:p},T):s==="insideBottomRight"?gi({x:o+c-x,y:l+f-h,textAnchor:y,verticalAnchor:p},T):bm(s)&&(dt(s.x)||jd(s.x))&&(dt(s.y)||jd(s.y))?gi({x:o+ks(s.x,c),y:l+ks(s.y,f),textAnchor:"end",verticalAnchor:"end"},T):gi({x:o+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},T)},tBe=function(t){return"cx"in t&&dt(t.cx)};function Ai(e){var t=e.offset,r=t===void 0?5:t,n=G4e(e,F4e),i=gi({offset:r},n),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!s||yr(o)&&yr(l)&&!E.isValidElement(c)&&!lr(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(lr(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=Y4e(i);var m=tBe(s),g=Qt(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Z4e(i,p,g);var x=m?J4e(i):eBe(i);return ae.createElement(nf,Py({className:dr("recharts-label",d)},g,x,{breakAll:h}),p)}Ai.displayName="Label";var pte=function(t){var r=t.cx,n=t.cy,i=t.angle,s=t.startAngle,a=t.endAngle,o=t.r,l=t.radius,c=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,m=t.left,g=t.width,x=t.height,y=t.clockWise,v=t.labelViewBox;if(v)return v;if(dt(g)&&dt(x)){if(dt(d)&&dt(h))return{x:d,y:h,width:g,height:x};if(dt(p)&&dt(m))return{x:p,y:m,width:g,height:x}}return dt(d)&&dt(h)?{x:d,y:h,width:0,height:0}:dt(r)&&dt(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:f||l||o||0,clockWise:y}:t.viewBox?t.viewBox:{}},rBe=function(t,r){return t?t===!0?ae.createElement(Ai,{key:"label-implicit",viewBox:r}):xi(t)?ae.createElement(Ai,{key:"label-implicit",viewBox:r,value:t}):E.isValidElement(t)?t.type===Ai?E.cloneElement(t,{key:"label-implicit",viewBox:r}):ae.createElement(Ai,{key:"label-implicit",content:t,viewBox:r}):lr(t)?ae.createElement(Ai,{key:"label-implicit",content:t,viewBox:r}):bm(t)?ae.createElement(Ai,Py({viewBox:r},t,{key:"label-implicit"})):null:null},nBe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,s=pte(t),a=Ra(i,Ai).map(function(l,c){return E.cloneElement(l,{viewBox:r||s,key:"label-".concat(c)})});if(!n)return a;var o=rBe(t.label,r||s);return[o].concat(B4e(a))};Ai.parseViewBox=pte;Ai.renderCallByParent=nBe;function iBe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var sBe=iBe;const aBe=Dr(sBe);function Ey(e){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ey(e)}var oBe=["valueAccessor"],lBe=["data","dataKey","clockWise","id","textBreakAll"];function cBe(e){return hBe(e)||fBe(e)||dBe(e)||uBe()}function uBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dBe(e,t){if(e){if(typeof e=="string")return p2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p2(e,t)}}function fBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hBe(e){if(Array.isArray(e))return p2(e)}function p2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iw.apply(this,arguments)}function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function c6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(r),!0).forEach(function(n){pBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pBe(e,t,r){return t=mBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mBe(e){var t=gBe(e,"string");return Ey(t)=="symbol"?t:t+""}function gBe(e,t){if(Ey(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ey(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u6(e,t){if(e==null)return{};var r=vBe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yBe=function(t){return Array.isArray(t.value)?aBe(t.value):t.value};function ou(e){var t=e.valueAccessor,r=t===void 0?yBe:t,n=u6(e,oBe),i=n.data,s=n.dataKey,a=n.clockWise,o=n.id,l=n.textBreakAll,c=u6(n,lBe);return!i||!i.length?null:ae.createElement(Wr,{className:"recharts-label-list"},i.map(function(f,d){var h=yr(s)?r(f,d):is(f&&f.payload,s),p=yr(o)?{}:{id:"".concat(o,"-").concat(d)};return ae.createElement(Ai,Iw({},Qt(f,!0),c,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:Ai.parseViewBox(yr(a)?f:c6(c6({},f),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}ou.displayName="LabelList";function _Be(e,t){return e?e===!0?ae.createElement(ou,{key:"labelList-implicit",data:t}):ae.isValidElement(e)||lr(e)?ae.createElement(ou,{key:"labelList-implicit",data:t,content:e}):bm(e)?ae.createElement(ou,Iw({data:t},e,{key:"labelList-implicit"})):null:null}function xBe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=Ra(n,ou).map(function(a,o){return E.cloneElement(a,{data:t,key:"labelList-".concat(o)})});if(!r)return i;var s=_Be(e.label,t);return[s].concat(cBe(i))}ou.renderCallByParent=xBe;function jy(e){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jy(e)}function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(this,arguments)}function d6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function f6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(r),!0).forEach(function(n){bBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bBe(e,t,r){return t=wBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wBe(e){var t=kBe(e,"string");return jy(t)=="symbol"?t:t+""}function kBe(e,t){if(jy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TBe=function(t,r){var n=ws(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},yx=function(t){var r=t.cx,n=t.cy,i=t.radius,s=t.angle,a=t.sign,o=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,f=l*(o?1:-1)+i,d=Math.asin(l/f)/Nw,h=c?s:s+a*d,p=cn(r,n,f,h),m=cn(r,n,i,h),g=c?s-a*d:s,x=cn(r,n,f*Math.cos(d*Nw),g);return{center:p,circleTangency:m,lineTangency:x,theta:d}},mte=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.startAngle,o=t.endAngle,l=TBe(a,o),c=a+l,f=cn(r,n,s,a),d=cn(r,n,s,c),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=cn(r,n,i,a),m=cn(r,n,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},MBe=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,f=t.endAngle,d=ws(f-c),h=yx({cx:r,cy:n,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,g=h.theta,x=yx({cx:r,cy:n,radius:s,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:l}),y=x.circleTangency,v=x.lineTangency,_=x.theta,b=l?Math.abs(c-f):Math.abs(c-f)-g-_;if(b<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):mte({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:f});var w="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var k=yx({cx:r,cy:n,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),T=k.circleTangency,M=k.lineTangency,j=k.theta,C=yx({cx:r,cy:n,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=C.circleTangency,I=C.lineTangency,N=C.theta,z=l?Math.abs(c-f):Math.abs(c-f)-j-N;if(z<0&&a===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(z>180),",").concat(+(d>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(M.x,",").concat(M.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},SBe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gte=function(t){var r=f6(f6({},SBe),t),n=r.cx,i=r.cy,s=r.innerRadius,a=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(a<s||f===d)return null;var p=dr("recharts-sector",h),m=a-s,g=ks(o,m,0,!0),x;return g>0&&Math.abs(f-d)<360?x=MBe({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d}):x=mte({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:f,endAngle:d}),ae.createElement("path",m2({},Qt(r,!0),{className:p,d:x,role:"img"}))};function Cy(e){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(e)}function g2(){return g2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g2.apply(this,arguments)}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function p6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(n){PBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PBe(e,t,r){return t=EBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EBe(e){var t=jBe(e,"string");return Cy(t)=="symbol"?t:t+""}function jBe(e,t){if(Cy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m6={curveBasisClosed:SEe,curveBasisOpen:PEe,curveBasis:MEe,curveBumpX:dEe,curveBumpY:fEe,curveLinearClosed:EEe,curveLinear:Ak,curveMonotoneX:jEe,curveMonotoneY:CEe,curveNatural:AEe,curveStep:OEe,curveStepAfter:NEe,curveStepBefore:$Ee},_x=function(t){return t.x===+t.x&&t.y===+t.y},Pg=function(t){return t.x},Eg=function(t){return t.y},CBe=function(t,r){if(lr(t))return t;var n="curve".concat(jk(t));return(n==="curveMonotone"||n==="curveBump")&&r?m6["".concat(n).concat(r==="vertical"?"Y":"X")]:m6[n]||Ak},ABe=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,a=t.baseLine,o=t.layout,l=t.connectNulls,c=l===void 0?!1:l,f=CBe(n,o),d=c?s.filter(function(g){return _x(g)}):s,h;if(Array.isArray(a)){var p=c?a.filter(function(g){return _x(g)}):a,m=d.map(function(g,x){return p6(p6({},g),{},{base:p[x]})});return o==="vertical"?h=cx().y(Eg).x1(Pg).x0(function(g){return g.base.x}):h=cx().x(Pg).y1(Eg).y0(function(g){return g.base.y}),h.defined(_x).curve(f),h(m)}return o==="vertical"&&dt(a)?h=cx().y(Eg).x1(Pg).x0(a):dt(a)?h=cx().x(Pg).y1(Eg).y0(a):h=fJ().x(Pg).y(Eg),h.defined(_x).curve(f),h(d)},v2=function(t){var r=t.className,n=t.points,i=t.path,s=t.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?ABe(t):i;return ae.createElement("path",g2({},Qt(t,!1),aw(t),{className:dr("recharts-curve",r),d:a,ref:s}))},vte={exports:{}},OBe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$Be=OBe,NBe=$Be;function yte(){}function _te(){}_te.resetWarningCache=yte;var IBe=function(){function e(n,i,s,a,o,l){if(l!==NBe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_te,resetWarningCache:yte};return r.PropTypes=r,r};vte.exports=IBe();var DBe=vte.exports;const or=Dr(DBe);var LBe=Object.getOwnPropertyNames,RBe=Object.getOwnPropertySymbols,FBe=Object.prototype.hasOwnProperty;function g6(e,t){return function(n,i,s){return e(n,i,s)&&t(n,i,s)}}function xx(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var s=i.cache,a=s.get(r),o=s.get(n);if(a&&o)return a===n&&o===r;s.set(r,n),s.set(n,r);var l=e(r,n,i);return s.delete(r),s.delete(n),l}}function v6(e){return LBe(e).concat(RBe(e))}var xte=Object.hasOwn||function(e,t){return FBe.call(e,t)};function Am(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var bte="_owner",y6=Object.getOwnPropertyDescriptor,_6=Object.keys;function BBe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function zBe(e,t){return Am(e.getTime(),t.getTime())}function x6(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),s=0,a,o;(a=i.next())&&!a.done;){for(var l=t.entries(),c=!1,f=0;(o=l.next())&&!o.done;){var d=a.value,h=d[0],p=d[1],m=o.value,g=m[0],x=m[1];!c&&!n[f]&&(c=r.equals(h,g,s,f,e,t,r)&&r.equals(p,x,h,g,e,t,r))&&(n[f]=!0),f++}if(!c)return!1;s++}return!0}function VBe(e,t,r){var n=_6(e),i=n.length;if(_6(t).length!==i)return!1;for(var s;i-- >0;)if(s=n[i],s===bte&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!xte(t,s)||!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function jg(e,t,r){var n=v6(e),i=n.length;if(v6(t).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=n[i],s===bte&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!xte(t,s)||!r.equals(e[s],t[s],s,s,e,t,r)||(a=y6(e,s),o=y6(t,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function UBe(e,t){return Am(e.valueOf(),t.valueOf())}function WBe(e,t){return e.source===t.source&&e.flags===t.flags}function b6(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),s,a;(s=i.next())&&!s.done;){for(var o=t.values(),l=!1,c=0;(a=o.next())&&!a.done;)!l&&!n[c]&&(l=r.equals(s.value,a.value,s.value,a.value,e,t,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function GBe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var HBe="[object Arguments]",KBe="[object Boolean]",qBe="[object Date]",XBe="[object Map]",YBe="[object Number]",QBe="[object Object]",ZBe="[object RegExp]",JBe="[object Set]",eze="[object String]",tze=Array.isArray,w6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,k6=Object.assign,rze=Object.prototype.toString.call.bind(Object.prototype.toString);function nze(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,s=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,o=e.areSetsEqual,l=e.areTypedArraysEqual;return function(f,d,h){if(f===d)return!0;if(f==null||d==null||typeof f!="object"||typeof d!="object")return f!==f&&d!==d;var p=f.constructor;if(p!==d.constructor)return!1;if(p===Object)return i(f,d,h);if(tze(f))return t(f,d,h);if(w6!=null&&w6(f))return l(f,d,h);if(p===Date)return r(f,d,h);if(p===RegExp)return a(f,d,h);if(p===Map)return n(f,d,h);if(p===Set)return o(f,d,h);var m=rze(f);return m===qBe?r(f,d,h):m===ZBe?a(f,d,h):m===XBe?n(f,d,h):m===JBe?o(f,d,h):m===QBe?typeof f.then!="function"&&typeof d.then!="function"&&i(f,d,h):m===HBe?i(f,d,h):m===KBe||m===YBe||m===eze?s(f,d,h):!1}}function ize(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?jg:BBe,areDatesEqual:zBe,areMapsEqual:n?g6(x6,jg):x6,areObjectsEqual:n?jg:VBe,arePrimitiveWrappersEqual:UBe,areRegExpsEqual:WBe,areSetsEqual:n?g6(b6,jg):b6,areTypedArraysEqual:n?jg:GBe};if(r&&(i=k6({},i,r(i))),t){var s=xx(i.areArraysEqual),a=xx(i.areMapsEqual),o=xx(i.areObjectsEqual),l=xx(i.areSetsEqual);i=k6({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function sze(e){return function(t,r,n,i,s,a,o){return e(t,r,o)}}function aze(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(l,c){var f=n(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,p=f.meta;return r(l,c,{cache:h,equals:i,meta:p,strict:s})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return r(l,c,a)}}var oze=Nu();Nu({strict:!0});Nu({circular:!0});Nu({circular:!0,strict:!0});Nu({createInternalComparator:function(){return Am}});Nu({strict:!0,createInternalComparator:function(){return Am}});Nu({circular:!0,createInternalComparator:function(){return Am}});Nu({circular:!0,createInternalComparator:function(){return Am},strict:!0});function Nu(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,s=e.strict,a=s===void 0?!1:s,o=ize(e),l=nze(o),c=n?n(l):sze(l);return aze({circular:r,comparator:l,createState:i,equals:c,strict:a})}function lze(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function T6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):lze(i)};requestAnimationFrame(n)}function y2(e){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y2(e)}function cze(e){return hze(e)||fze(e)||dze(e)||uze()}function uze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dze(e,t){if(e){if(typeof e=="string")return M6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M6(e,t)}}function M6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hze(e){if(Array.isArray(e))return e}function pze(){var e={},t=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,o=cze(a),l=o[0],c=o.slice(1);if(typeof l=="number"){T6(i.bind(null,c),l);return}i(l),T6(i.bind(null,c));return}y2(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function S6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function P6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(r),!0).forEach(function(n){wte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wte(e,t,r){return t=mze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mze(e){var t=gze(e,"string");return Ay(t)==="symbol"?t:String(t)}function gze(e,t){if(Ay(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ay(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vze=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},yze=function(t){return t},_ze=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Tv=function(t,r){return Object.keys(r).reduce(function(n,i){return P6(P6({},n),{},wte({},i,t(i,r[i])))},{})},E6=function(t,r,n){return t.map(function(i){return"".concat(_ze(i)," ").concat(r,"ms ").concat(n)}).join(",")};function xze(e,t){return kze(e)||wze(e,t)||kte(e,t)||bze()}function bze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wze(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function kze(e){if(Array.isArray(e))return e}function Tze(e){return Pze(e)||Sze(e)||kte(e)||Mze()}function Mze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(e,t){if(e){if(typeof e=="string")return _2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _2(e,t)}}function Sze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pze(e){if(Array.isArray(e))return _2(e)}function _2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dw=1e-4,Tte=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Mte=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},j6=function(t,r){return function(n){var i=Tte(t,r);return Mte(i,n)}},Eze=function(t,r){return function(n){var i=Tte(t,r),s=[].concat(Tze(i.map(function(a,o){return a*o}).slice(1)),[0]);return Mte(s,n)}},C6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],s=r[1],a=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=xze(c,4);i=f[0],s=f[1],a=f[2],o=f[3]}}}var d=j6(i,a),h=j6(s,o),p=Eze(i,a),m=function(y){return y>1?1:y<0?0:y},g=function(y){for(var v=y>1?1:y,_=v,b=0;b<8;++b){var w=d(_)-v,k=p(_);if(Math.abs(w-v)<Dw||k<Dw)return h(_);_=m(_-w/k)}return h(_)};return g.isStepper=!1,g},jze=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,a=t.dt,o=a===void 0?17:a,l=function(f,d,h){var p=-(f-d)*n,m=h*s,g=h+(p-m)*o/1e3,x=h*o/1e3+f;return Math.abs(x-d)<Dw&&Math.abs(g)<Dw?[d,0]:[x,g]};return l.isStepper=!0,l.dt=o,l},Cze=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return C6(i);case"spring":return jze();default:if(i.split("(")[0]==="cubic-bezier")return C6(i)}return typeof i=="function"?i:null};function Oy(e){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(e)}function A6(e){return $ze(e)||Oze(e)||Ste(e)||Aze()}function Aze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ze(e){if(Array.isArray(e))return b2(e)}function O6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(r),!0).forEach(function(n){x2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x2(e,t,r){return t=Nze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nze(e){var t=Ize(e,"string");return Oy(t)==="symbol"?t:String(t)}function Ize(e,t){if(Oy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dze(e,t){return Fze(e)||Rze(e,t)||Ste(e,t)||Lze()}function Lze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ste(e,t){if(e){if(typeof e=="string")return b2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b2(e,t)}}function b2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rze(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Fze(e){if(Array.isArray(e))return e}var Lw=function(t,r,n){return t+(r-t)*n},w2=function(t){var r=t.from,n=t.to;return r!==n},Bze=function e(t,r,n){var i=Tv(function(s,a){if(w2(a)){var o=t(a.from,a.to,a.velocity),l=Dze(o,2),c=l[0],f=l[1];return Di(Di({},a),{},{from:c,velocity:f})}return a},r);return n<1?Tv(function(s,a){return w2(a)?Di(Di({},a),{},{velocity:Lw(a.velocity,i[s].velocity,n),from:Lw(a.from,i[s].from,n)}):a},r):e(t,i,n-1)};const zze=function(e,t,r,n,i){var s=vze(e,t),a=s.reduce(function(x,y){return Di(Di({},x),{},x2({},y,[e[y],t[y]]))},{}),o=s.reduce(function(x,y){return Di(Di({},x),{},x2({},y,{from:e[y],velocity:0,to:t[y]}))},{}),l=-1,c,f,d=function(){return null},h=function(){return Tv(function(y,v){return v.from},o)},p=function(){return!Object.values(o).filter(w2).length},m=function(y){c||(c=y);var v=y-c,_=v/r.dt;o=Bze(r,o,_),i(Di(Di(Di({},e),t),h())),c=y,p()||(l=requestAnimationFrame(d))},g=function(y){f||(f=y);var v=(y-f)/n,_=Tv(function(w,k){return Lw.apply(void 0,A6(k).concat([r(v)]))},a);if(i(Di(Di(Di({},e),t),_)),v<1)l=requestAnimationFrame(d);else{var b=Tv(function(w,k){return Lw.apply(void 0,A6(k).concat([r(1)]))},a);i(Di(Di(Di({},e),t),b))}};return d=r.isStepper?m:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}var Vze=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Uze(e,t){if(e==null)return{};var r=Wze(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wze(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function fP(e){return qze(e)||Kze(e)||Hze(e)||Gze()}function Gze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hze(e,t){if(e){if(typeof e=="string")return k2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k2(e,t)}}function Kze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qze(e){if(Array.isArray(e))return k2(e)}function k2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(n){Qg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qg(e,t,r){return t=Pte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pte(n.key),n)}}function Qze(e,t,r){return t&&Yze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pte(e){var t=Zze(e,"string");return Lp(t)==="symbol"?t:String(t)}function Zze(e,t){if(Lp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T2(e,t)}function T2(e,t){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},T2(e,t)}function eVe(e){var t=tVe();return function(){var n=Rw(e),i;if(t){var s=Rw(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return M2(this,i)}}function M2(e,t){if(t&&(Lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S2(e)}function S2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rw(e)}var rc=function(e){Jze(r,e);var t=eVe(r);function r(n,i){var s;Xze(this,r),s=t.call(this,n,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,f=a.to,d=a.steps,h=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(S2(s)),s.changeStyle=s.changeStyle.bind(S2(s)),!o||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),M2(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof h=="function")return s.state={style:c},M2(s);s.state={style:l?Qg({},l,c):c}}else s.state={style:{}};return s}return Qze(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(o){if(!a){var p={style:l?Qg({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(oze(i.to,f)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||c?d:i.to;if(this.state&&h){var x={style:l?Qg({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(x)}this.runAnimation(eo(eo({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=zze(a,o,Cze(c),l,this.changeStyle),m=function(){s.stopJSAnimation=p()};this.manager.start([h,f,m,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],f=c.style,d=c.duration,h=d===void 0?0:d,p=function(g,x,y){if(y===0)return g;var v=x.duration,_=x.easing,b=_===void 0?"ease":_,w=x.style,k=x.properties,T=x.onAnimationEnd,M=y>0?a[y-1]:x,j=k||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(fP(g),[s.runJSAnimation.bind(s,{from:M.style,to:w,duration:v,easing:b}),v]);var C=E6(j,v,b),R=eo(eo(eo({},M.style),w),{},{transition:C});return[].concat(fP(g),[R,v,T]).filter(yze)};return this.manager.start([l].concat(fP(a.reduce(p,[f,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=pze());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=o?Qg({},o,l):l,x=E6(Object.keys(g),a,c);m.start([f,s,eo(eo({},g),{},{transition:x}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Uze(i,Vze),c=E.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!o||c===0||a<=0)return s;var d=function(p){var m=p.props,g=m.style,x=g===void 0?{}:g,y=m.className,v=E.cloneElement(p,eo(eo({},l),{},{style:eo(eo({},x),f),className:y}));return v};return c===1?d(E.Children.only(s)):ae.createElement("div",null,E.Children.map(s,function(h){return d(h)}))}}]),r}(E.PureComponent);rc.displayName="Animate";rc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};rc.propTypes={from:or.oneOfType([or.object,or.string]),to:or.oneOfType([or.object,or.string]),attributeName:or.string,duration:or.number,begin:or.number,easing:or.oneOfType([or.string,or.func]),steps:or.arrayOf(or.shape({duration:or.number.isRequired,style:or.object.isRequired,easing:or.oneOfType([or.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),or.func]),properties:or.arrayOf("string"),onAnimationEnd:or.func})),children:or.oneOfType([or.node,or.func]),isActive:or.bool,canBegin:or.bool,onAnimationEnd:or.func,shouldReAnimate:or.bool,onAnimationStart:or.func,onAnimationReStart:or.func};or.object,or.object,or.object,or.element;or.object,or.object,or.object,or.oneOfType([or.array,or.element]),or.any;function $y(e){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$y(e)}function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fw.apply(this,arguments)}function rVe(e,t){return aVe(e)||sVe(e,t)||iVe(e,t)||nVe()}function nVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iVe(e,t){if(e){if(typeof e=="string")return N6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N6(e,t)}}function N6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sVe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function aVe(e){if(Array.isArray(e))return e}function I6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function D6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(r),!0).forEach(function(n){oVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oVe(e,t,r){return t=lVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lVe(e){var t=cVe(e,"string");return $y(t)=="symbol"?t:t+""}function cVe(e,t){if($y(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L6=function(t,r,n,i,s){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),o=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,f;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=s[h]>a?a:s[h];f="M".concat(t,",").concat(r+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(r+o*d[1])),f+="L ".concat(t+n,",").concat(r+i-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+n-l*d[2],",").concat(r+i)),f+="L ".concat(t+l*d[3],",").concat(r+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(r+i-o*d[3])),f+="Z"}else if(a>0&&s===+s&&s>0){var m=Math.min(a,s);f="M ".concat(t,",").concat(r+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n,",").concat(r+o*m,`
            L `).concat(t+n,",").concat(r+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n-l*m,",").concat(r+i,`
            L `).concat(t+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t,",").concat(r+i-o*m," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return f},uVe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,s=r.x,a=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),f=Math.max(s,s+o),d=Math.min(a,a+l),h=Math.max(a,a+l);return n>=c&&n<=f&&i>=d&&i<=h}return!1},dVe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FN=function(t){var r=D6(D6({},dVe),t),n=E.useRef(),i=E.useState(-1),s=rVe(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var l=r.x,c=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,y=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||f===0||d===0)return null;var _=dr("recharts-rectangle",p);return v?ae.createElement(rc,{canBegin:a>0,from:{width:f,height:d,x:l,y:c},to:{width:f,height:d,x:l,y:c},duration:g,animationEasing:m,isActive:v},function(b){var w=b.width,k=b.height,T=b.x,M=b.y;return ae.createElement(rc,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:y,easing:m},ae.createElement("path",Fw({},Qt(r,!0),{className:_,d:L6(T,M,w,k,h),ref:n})))}):ae.createElement("path",Fw({},Qt(r,!0),{className:_,d:L6(l,c,f,d,h)}))},fVe=["points","className","baseLinePoints","connectNulls"];function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nh.apply(this,arguments)}function hVe(e,t){if(e==null)return{};var r=pVe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pVe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function R6(e){return yVe(e)||vVe(e)||gVe(e)||mVe()}function mVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gVe(e,t){if(e){if(typeof e=="string")return P2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P2(e,t)}}function vVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yVe(e){if(Array.isArray(e))return P2(e)}function P2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F6=function(t){return t&&t.x===+t.x&&t.y===+t.y},_Ve=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){F6(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),F6(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Mv=function(t,r){var n=_Ve(t);r&&(n=[n.reduce(function(s,a){return[].concat(R6(s),R6(a))},[])]);var i=n.map(function(s){return s.reduce(function(a,o,l){return"".concat(a).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},xVe=function(t,r,n){var i=Mv(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Mv(r.reverse(),n).slice(1))},bVe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,s=t.connectNulls,a=hVe(t,fVe);if(!r||!r.length)return null;var o=dr("recharts-polygon",n);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=xVe(r,i,s);return ae.createElement("g",{className:o},ae.createElement("path",Nh({},Qt(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?ae.createElement("path",Nh({},Qt(a,!0),{fill:"none",d:Mv(r,s)})):null,l?ae.createElement("path",Nh({},Qt(a,!0),{fill:"none",d:Mv(i,s)})):null)}var f=Mv(r,s);return ae.createElement("path",Nh({},Qt(a,!0),{fill:f.slice(-1)==="Z"?a.fill:"none",className:o,d:f}))};function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E2.apply(this,arguments)}var BN=function(t){var r=t.cx,n=t.cy,i=t.r,s=t.className,a=dr("recharts-dot",s);return r===+r&&n===+n&&i===+i?ae.createElement("circle",E2({},Qt(t,!1),aw(t),{className:a,cx:r,cy:n,r:i})):null};function Ny(e){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ny(e)}var wVe=["x","y","top","left","width","height","className"];function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j2.apply(this,arguments)}function B6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kVe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(r),!0).forEach(function(n){TVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TVe(e,t,r){return t=MVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MVe(e){var t=SVe(e,"string");return Ny(t)=="symbol"?t:t+""}function SVe(e,t){if(Ny(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ny(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PVe(e,t){if(e==null)return{};var r=EVe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EVe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jVe=function(t,r,n,i,s,a){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},CVe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,a=t.top,o=a===void 0?0:a,l=t.left,c=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,m=t.className,g=PVe(t,wVe),x=kVe({x:n,y:s,top:o,left:c,width:d,height:p},g);return!dt(n)||!dt(s)||!dt(d)||!dt(p)||!dt(o)||!dt(c)?null:ae.createElement("path",j2({},Qt(x,!0),{className:dr("recharts-cross",m),d:jVe(n,s,d,p,o,c)}))},AVe=Uk,OVe=Fee,$Ve=Au;function NVe(e,t){return e&&e.length?AVe(e,$Ve(t),OVe):void 0}var IVe=NVe;const DVe=Dr(IVe);var LVe=Uk,RVe=Au,FVe=Bee;function BVe(e,t){return e&&e.length?LVe(e,RVe(t),FVe):void 0}var zVe=BVe;const VVe=Dr(zVe);var UVe=["cx","cy","angle","ticks","axisLine"],WVe=["ticks","tick","angle","tickFormatter","stroke"];function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(this,arguments)}function z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(r),!0).forEach(function(n){Yk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V6(e,t){if(e==null)return{};var r=GVe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GVe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jte(n.key),n)}}function KVe(e,t,r){return t&&U6(e.prototype,t),r&&U6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qVe(e,t,r){return t=Bw(t),XVe(e,Ete()?Reflect.construct(t,r||[],Bw(e).constructor):t.apply(e,r))}function XVe(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YVe(e)}function YVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ete(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ete=function(){return!!e})()}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bw(e)}function QVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C2(e,t)}function C2(e,t){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},C2(e,t)}function Yk(e,t,r){return t=jte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jte(e){var t=ZVe(e,"string");return Rp(t)=="symbol"?t:t+""}function ZVe(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qk=function(e){function t(){return HVe(this,t),qVe(this,t,arguments)}return QVe(t,e),KVe(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,a=s.angle,o=s.cx,l=s.cy;return cn(o,l,i,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,o=n.ticks,l=DVe(o,function(f){return f.coordinate||0}),c=VVe(o,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,o=n.ticks,l=n.axisLine,c=V6(n,UVe),f=o.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),d=cn(i,s,f[0],a),h=cn(i,s,f[1],a),p=sd(sd(sd({},Qt(c,!1)),{},{fill:"none"},Qt(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return ae.createElement("line",Sv({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,f=V6(i,WVe),d=this.getTickTextAnchor(),h=Qt(f,!1),p=Qt(a,!1),m=s.map(function(g,x){var y=n.getTickValueCoord(g),v=sd(sd(sd(sd({textAnchor:d,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:c},p),{},{index:x},y),{},{payload:g});return ae.createElement(Wr,Sv({className:dr("recharts-polar-radius-axis-tick",hte(a)),key:"tick-".concat(g.coordinate)},rf(n.props,g,x)),t.renderTickItem(a,v,l?l(g.value,x):g.value))});return ae.createElement(Wr,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,a=n.tick;return!i||!i.length?null:ae.createElement(Wr,{className:dr("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),Ai.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return ae.isValidElement(n)?a=ae.cloneElement(n,i):lr(n)?a=n(i):a=ae.createElement(nf,Sv({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(E.PureComponent);Yk(Qk,"displayName","PolarRadiusAxis");Yk(Qk,"axisType","radiusAxis");Yk(Qk,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xd.apply(this,arguments)}function W6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ad(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W6(Object(r),!0).forEach(function(n){Zk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ate(n.key),n)}}function eUe(e,t,r){return t&&G6(e.prototype,t),r&&G6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tUe(e,t,r){return t=zw(t),rUe(e,Cte()?Reflect.construct(t,r||[],zw(e).constructor):t.apply(e,r))}function rUe(e,t){if(t&&(Fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nUe(e)}function nUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cte=function(){return!!e})()}function zw(e){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zw(e)}function iUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t)}function A2(e,t){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},A2(e,t)}function Zk(e,t,r){return t=Ate(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ate(e){var t=sUe(e,"string");return Fp(t)=="symbol"?t:t+""}function sUe(e,t){if(Fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aUe=Math.PI/180,H6=1e-5,Jk=function(e){function t(){return JVe(this,t),tUe(this,t,arguments)}return iUe(t,e),eUe(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,a=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,f=c||8,d=cn(s,a,o,n.coordinate),h=cn(s,a,o+(l==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*aUe),a;return s>H6?a=i==="outer"?"start":"end":s<-H6?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.radius,o=n.axisLine,l=n.axisLineType,c=ad(ad({},Qt(this.props,!1)),{},{fill:"none"},Qt(o,!1));if(l==="circle")return ae.createElement(BN,xd({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:s,r:a}));var f=this.props.ticks,d=f.map(function(h){return cn(i,s,a,h.coordinate)});return ae.createElement(bVe,xd({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,f=Qt(this.props,!1),d=Qt(a,!1),h=ad(ad({},f),{},{fill:"none"},Qt(o,!1)),p=s.map(function(m,g){var x=n.getTickLineCoord(m),y=n.getTickTextAnchor(m),v=ad(ad(ad({textAnchor:y},f),{},{stroke:"none",fill:c},d),{},{index:g,payload:m,x:x.x2,y:x.y2});return ae.createElement(Wr,xd({className:dr("recharts-polar-angle-axis-tick",hte(a)),key:"tick-".concat(m.coordinate)},rf(n.props,m,g)),o&&ae.createElement("line",xd({className:"recharts-polar-angle-axis-tick-line"},h,x)),a&&t.renderTickItem(a,v,l?l(m.value,g):m.value))});return ae.createElement(Wr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!i||!i.length?null:ae.createElement(Wr,{className:dr("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var a;return ae.isValidElement(n)?a=ae.cloneElement(n,i):lr(n)?a=n(i):a=ae.createElement(nf,xd({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(E.PureComponent);Zk(Jk,"displayName","PolarAngleAxis");Zk(Jk,"axisType","angleAxis");Zk(Jk,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var oUe=DJ,lUe=oUe(Object.getPrototypeOf,Object),cUe=lUe,uUe=ac,dUe=cUe,fUe=oc,hUe="[object Object]",pUe=Function.prototype,mUe=Object.prototype,Ote=pUe.toString,gUe=mUe.hasOwnProperty,vUe=Ote.call(Object);function yUe(e){if(!fUe(e)||uUe(e)!=hUe)return!1;var t=dUe(e);if(t===null)return!0;var r=gUe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ote.call(r)==vUe}var _Ue=yUe;const xUe=Dr(_Ue);var bUe=ac,wUe=oc,kUe="[object Boolean]";function TUe(e){return e===!0||e===!1||wUe(e)&&bUe(e)==kUe}var MUe=TUe;const SUe=Dr(MUe);function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vw.apply(this,arguments)}function PUe(e,t){return AUe(e)||CUe(e,t)||jUe(e,t)||EUe()}function EUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jUe(e,t){if(e){if(typeof e=="string")return K6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K6(e,t)}}function K6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CUe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function AUe(e){if(Array.isArray(e))return e}function q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(r),!0).forEach(function(n){OUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OUe(e,t,r){return t=$Ue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ue(e){var t=NUe(e,"string");return Iy(t)=="symbol"?t:t+""}function NUe(e,t){if(Iy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y6=function(t,r,n,i,s){var a=n-i,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-a/2,",").concat(r+s),o+="L ".concat(t+n-a/2-i,",").concat(r+s),o+="L ".concat(t,",").concat(r," Z"),o},IUe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DUe=function(t){var r=X6(X6({},IUe),t),n=E.useRef(),i=E.useState(-1),s=PUe(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&o(_)}catch{}},[]);var l=r.x,c=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,y=r.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var v=dr("recharts-trapezoid",p);return y?ae.createElement(rc,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:c},duration:g,animationEasing:m,isActive:y},function(_){var b=_.upperWidth,w=_.lowerWidth,k=_.height,T=_.x,M=_.y;return ae.createElement(rc,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:m},ae.createElement("path",Vw({},Qt(r,!0),{className:v,d:Y6(T,M,b,w,k),ref:n})))}):ae.createElement("g",null,ae.createElement("path",Vw({},Qt(r,!0),{className:v,d:Y6(l,c,f,d,h)})))},LUe=["option","shapeType","propTransformer","activeClassName","isActive"];function Dy(e){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(e)}function RUe(e,t){if(e==null)return{};var r=FUe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FUe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q6(Object(r),!0).forEach(function(n){BUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BUe(e,t,r){return t=zUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zUe(e){var t=VUe(e,"string");return Dy(t)=="symbol"?t:t+""}function VUe(e,t){if(Dy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UUe(e,t){return Uw(Uw({},t),e)}function WUe(e,t){return e==="symbols"}function Z6(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ae.createElement(FN,r);case"trapezoid":return ae.createElement(DUe,r);case"sector":return ae.createElement(gte,r);case"symbols":if(WUe(t))return ae.createElement(nN,r);break;default:return null}}function GUe(e){return E.isValidElement(e)?e.props:e}function $te(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?UUe:n,s=e.activeClassName,a=s===void 0?"recharts-active-shape":s,o=e.isActive,l=RUe(e,LUe),c;if(E.isValidElement(t))c=E.cloneElement(t,Uw(Uw({},l),GUe(t)));else if(lr(t))c=t(l);else if(xUe(t)&&!SUe(t)){var f=i(t,l);c=ae.createElement(Z6,{shapeType:r,elementProps:f})}else{var d=l;c=ae.createElement(Z6,{shapeType:r,elementProps:d})}return o?ae.createElement(Wr,{className:a},c):c}function eT(e,t){return t!=null&&"trapezoids"in e.props}function tT(e,t){return t!=null&&"sectors"in e.props}function Ly(e,t){return t!=null&&"points"in e.props}function HUe(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&s}function KUe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function qUe(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function XUe(e,t){var r;return eT(e,t)?r=HUe:tT(e,t)?r=KUe:Ly(e,t)&&(r=qUe),r}function YUe(e,t){var r;return eT(e,t)?r="trapezoids":tT(e,t)?r="sectors":Ly(e,t)&&(r="points"),r}function QUe(e,t){if(eT(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(tT(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ly(e,t)?t.payload:{}}function ZUe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=YUe(r,t),s=QUe(r,t),a=n.filter(function(l,c){var f=Hk(s,l),d=r.props[i].filter(function(m){var g=XUe(r,t);return g(m,t)}),h=r.props[i].indexOf(d[d.length-1]),p=c===h;return f&&p}),o=n.indexOf(a[a.length-1]);return o}var lb;function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(this,arguments)}function J6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(r),!0).forEach(function(n){$a(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ite(n.key),n)}}function e5e(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t5e(e,t,r){return t=Ww(t),r5e(e,Nte()?Reflect.construct(t,r||[],Ww(e).constructor):t.apply(e,r))}function r5e(e,t){if(t&&(Bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n5e(e)}function n5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nte=function(){return!!e})()}function Ww(e){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ww(e)}function i5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O2(e,t)}function O2(e,t){return O2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},O2(e,t)}function $a(e,t,r){return t=Ite(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ite(e){var t=s5e(e,"string");return Bp(t)=="symbol"?t:t+""}function s5e(e,t){if(Bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cc=function(e){function t(r){var n;return JUe(this,t),n=t5e(this,t,[r]),$a(n,"pieRef",null),$a(n,"sectorRefs",[]),$a(n,"id",A_("recharts-pie-")),$a(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),lr(i)&&i()}),$a(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),lr(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return i5e(t,e),e5e(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,o=s.labelLine,l=s.dataKey,c=s.valueKey,f=Qt(this.props,!1),d=Qt(a,!1),h=Qt(o,!1),p=a&&a.offsetRadius||20,m=n.map(function(g,x){var y=(g.startAngle+g.endAngle)/2,v=cn(g.cx,g.cy,g.outerRadius+p,y),_=rn(rn(rn(rn({},f),g),{},{stroke:"none"},d),{},{index:x,textAnchor:t.getTextAnchor(v.x,g.cx)},v),b=rn(rn(rn(rn({},f),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[cn(g.cx,g.cy,g.outerRadius,y),v]}),w=l;return yr(l)&&yr(c)?w="value":yr(l)&&(w=c),ae.createElement(Wr,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},o&&t.renderLabelLineItem(o,b,"line"),t.renderLabelItem(a,_,is(g,w)))});return ae.createElement(Wr,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,a=s.activeShape,o=s.blendStroke,l=s.inactiveShape;return n.map(function(c,f){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&n.length!==1)return null;var d=i.isActiveIndex(f),h=l&&i.hasActiveIndex()?l:null,p=d?a:h,m=rn(rn({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return ae.createElement(Wr,Ih({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},rf(i.props,c,f),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(f)}),ae.createElement($te,Ih({option:p,isActive:d,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,a=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,f=i.animationId,d=this.state,h=d.prevSectors,p=d.prevIsAnimationActive;return ae.createElement(rc,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,x=[],y=s&&s[0],v=y.startAngle;return s.forEach(function(_,b){var w=h&&h[b],k=b>0?fa(_,"paddingAngle",0):0;if(w){var T=$c(w.endAngle-w.startAngle,_.endAngle-_.startAngle),M=rn(rn({},_),{},{startAngle:v+k,endAngle:v+T(g)+k});x.push(M),v=M.endAngle}else{var j=_.endAngle,C=_.startAngle,R=$c(0,j-C),I=R(g),N=rn(rn({},_),{},{startAngle:v+k,endAngle:v+I+k});x.push(N),v=N.endAngle}}),ae.createElement(Wr,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!Hk(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,a=i.sectors,o=i.className,l=i.label,c=i.cx,f=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(s||!a||!a.length||!dt(c)||!dt(f)||!dt(d)||!dt(h))return null;var g=dr("recharts-pie",o);return ae.createElement(Wr,{tabIndex:this.props.rootTabIndex,className:g,ref:function(y){n.pieRef=y}},this.renderSectors(),l&&this.renderLabels(a),Ai.renderCallByParent(this.props,null,!1),(!p||m)&&ou.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(ae.isValidElement(n))return ae.cloneElement(n,i);if(lr(n))return n(i);var a=dr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ae.createElement(v2,Ih({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,i,s){if(ae.isValidElement(n))return ae.cloneElement(n,i);var a=s;if(lr(n)&&(a=n(i),ae.isValidElement(a)))return a;var o=dr("recharts-pie-label-text",typeof n!="boolean"&&!lr(n)?n.className:"");return ae.createElement(nf,Ih({},i,{alignmentBaseline:"middle",className:o}),a)}}])}(E.PureComponent);lb=cc;$a(cc,"displayName","Pie");$a(cc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Vl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$a(cc,"parseDeltaAngle",function(e,t){var r=ws(t-e),n=Math.min(Math.abs(t-e),360);return r*n});$a(cc,"getRealPieData",function(e){var t=e.data,r=e.children,n=Qt(e,!1),i=Ra(r,Dk);return t&&t.length?t.map(function(s,a){return rn(rn(rn({payload:s},n),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return rn(rn({},n),s.props)}):[]});$a(cc,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,s=t.height,a=fte(i,s),o=n+ks(e.cx,i,i/2),l=r+ks(e.cy,s,s/2),c=ks(e.innerRadius,a,0),f=ks(e.outerRadius,a,a*.8),d=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:f,maxRadius:d}});$a(cc,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?rn(rn({},t.type.defaultProps),t.props):t.props,i=lb.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,a=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,f=n.nameKey,d=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),m=lb.parseCoordinateOfPie(n,r),g=lb.parseDeltaAngle(a,o),x=Math.abs(g),y=c;yr(c)&&yr(d)?(zl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):yr(c)&&(zl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=d);var v=i.filter(function(M){return is(M,y,0)!==0}).length,_=(x>=360?v:v-1)*l,b=x-v*p-_,w=i.reduce(function(M,j){var C=is(j,y,0);return M+(dt(C)?C:0)},0),k;if(w>0){var T;k=i.map(function(M,j){var C=is(M,y,0),R=is(M,f,j),I=(dt(C)?C:0)/w,N;j?N=T.endAngle+ws(g)*l*(C!==0?1:0):N=a;var z=N+ws(g)*((C!==0?p:0)+I*b),V=(N+z)/2,G=(m.innerRadius+m.outerRadius)/2,H=[{name:R,value:C,payload:M,dataKey:y,type:h}],O=cn(m.cx,m.cy,G,V);return T=rn(rn(rn({percent:I,cornerRadius:s,name:R,tooltipPayload:H,midAngle:V,middleRadius:G,tooltipPosition:O},M),m),{},{value:is(M,y),startAngle:N,endAngle:z,payload:M,paddingAngle:ws(g)*l}),T})}return rn(rn({},m),{},{sectors:k,data:i})});var a5e=Math.ceil,o5e=Math.max;function l5e(e,t,r,n){for(var i=-1,s=o5e(a5e((t-e)/(r||1)),0),a=Array(s);s--;)a[n?s:++i]=e,e+=r;return a}var c5e=l5e,u5e=eee,t8=1/0,d5e=17976931348623157e292;function f5e(e){if(!e)return e===0?e:0;if(e=u5e(e),e===t8||e===-t8){var t=e<0?-1:1;return t*d5e}return e===e?e:0}var h5e=f5e,p5e=c5e,m5e=Ik,hP=h5e;function g5e(e){return function(t,r,n){return n&&typeof n!="number"&&m5e(t,r,n)&&(r=n=void 0),t=hP(t),r===void 0?(r=t,t=0):r=hP(r),n=n===void 0?t<r?1:-1:hP(n),p5e(t,r,n,e)}}var v5e=g5e,y5e=v5e,_5e=y5e(),x5e=_5e;const Gw=Dr(x5e);function Ry(e){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ry(e)}function r8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function n8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(r),!0).forEach(function(n){Dte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dte(e,t,r){return t=b5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5e(e){var t=w5e(e,"string");return Ry(t)=="symbol"?t:t+""}function w5e(e,t){if(Ry(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ry(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k5e=["Webkit","Moz","O","ms"],T5e=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=k5e.reduce(function(s,a){return n8(n8({},s),{},Dte({},a+n,r))},{});return i[t]=r,i};function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hw.apply(this,arguments)}function i8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(r),!0).forEach(function(n){Xs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rte(n.key),n)}}function S5e(e,t,r){return t&&s8(e.prototype,t),r&&s8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P5e(e,t,r){return t=Kw(t),E5e(e,Lte()?Reflect.construct(t,r||[],Kw(e).constructor):t.apply(e,r))}function E5e(e,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j5e(e)}function j5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lte=function(){return!!e})()}function Kw(e){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kw(e)}function C5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$2(e,t)}function $2(e,t){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$2(e,t)}function Xs(e,t,r){return t=Rte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rte(e){var t=A5e(e,"string");return zp(t)=="symbol"?t:t+""}function A5e(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O5e=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,s=t.x,a=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=wv().domain(Gw(0,l)).range([s,s+a-o]),f=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:f}},a8=function(t){return t.changedTouches&&!!t.changedTouches.length},Vp=function(e){function t(r){var n;return M5e(this,t),n=P5e(this,t,[r]),Xs(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Xs(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Xs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),n.detachDragEndListener()}),Xs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Xs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Xs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Xs(n,"handleSlideDragStart",function(i){var s=a8(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return C5e(t,e),S5e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,f=c.length-1,d=Math.min(i,s),h=Math.max(i,s),p=t.getIndexInRange(a,d),m=t.getIndexInRange(a,h);return{startIndex:p-p%l,endIndex:m===f?f:m-m%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=is(s[n],o,n);return lr(a)?a(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,g=n.pageX-s;g>0?g=Math.min(g,c+f-d-o,c+f-d-a):g<0&&(g=Math.max(g,c-a,c-o));var x=this.getIndex({startX:a+g,endX:o+g});(x.startIndex!==h||x.endIndex!==p)&&m&&m(x),this.setState({startX:a+g,endX:o+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=a8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,m=f.onChange,g=f.gap,x=f.data,y={startX:this.state.startX,endX:this.state.endX},v=n.pageX-s;v>0?v=Math.min(v,d+h-p-c):v<0&&(v=Math.max(v,d-c)),y[a]=c+v;var _=this.getIndex(y),b=_.startIndex,w=_.endIndex,k=function(){var M=x.length-1;return a==="startX"&&(o>l?b%g===0:w%g===0)||o<l&&w===M||a==="endX"&&(o>l?w%g===0:b%g===0)||o>l&&w===M};this.setState(Xs(Xs({},a,c+v),"brushMoveStartX",n.pageX),function(){m&&k()&&m(_)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,f=this.state[i],d=o.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=c||i==="endX"&&p<=l||this.setState(Xs({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.fill,c=n.stroke;return ae.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.data,c=n.children,f=n.padding,d=E.Children.only(c);return d?ae.cloneElement(d,{x:i,y:s,width:a,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,a,o=this,l=this.props,c=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,x=l.endIndex,y=Math.max(n,this.props.x),v=pP(pP({},Qt(this.props,!1)),{},{x:y,y:c,width:f,height:d}),_=p||"Min value: ".concat((s=m[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=m[x])===null||a===void 0?void 0:a.name);return ae.createElement(Wr,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,v))}},{key:"renderSlide",value:function(n,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,f=Math.min(n,i)+c,d=Math.max(Math.abs(i-n)-c,0);return ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:a,width:d,height:o})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,a=n.y,o=n.height,l=n.travellerWidth,c=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,m={pointerEvents:"none",fill:c};return ae.createElement(Wr,{className:"recharts-brush-texts"},ae.createElement(nf,Hw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:a+o/2},m),this.getTextOfTick(i)),ae.createElement(nf,Hw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:a+o/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,a=n.children,o=n.x,l=n.y,c=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,g=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,v=h.isTravellerFocused;if(!i||!i.length||!dt(o)||!dt(l)||!dt(c)||!dt(f)||c<=0||f<=0)return null;var _=dr("recharts-brush",s),b=ae.Children.count(a)===1,w=T5e("userSelect","none");return ae.createElement(Wr,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||x||y||v||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,a=n.width,o=n.height,l=n.stroke,c=Math.floor(s+o/2)-1;return ae.createElement(ae.Fragment,null,ae.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),ae.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),ae.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return ae.isValidElement(n)?s=ae.cloneElement(n,i):lr(n)?s=n(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,a=n.width,o=n.x,l=n.travellerWidth,c=n.updateId,f=n.startIndex,d=n.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return pP({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?O5e({data:s,width:a,x:o,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);n[l]>i?o=l:a=l}return i>=n[o]?o:a}}])}(E.PureComponent);Xs(Vp,"displayName","Brush");Xs(Vp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $5e=dN;function N5e(e,t){var r;return $5e(e,function(n,i,s){return r=t(n,i,s),!r}),!!r}var I5e=N5e,D5e=EJ,L5e=Au,R5e=I5e,F5e=Gs,B5e=Ik;function z5e(e,t,r){var n=F5e(e)?D5e:R5e;return r&&B5e(e,t,r)&&(t=void 0),n(e,L5e(t))}var V5e=z5e;const U5e=Dr(V5e);var sl=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},o8=XJ;function W5e(e,t,r){t=="__proto__"&&o8?o8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var G5e=W5e,H5e=G5e,K5e=KJ,q5e=Au;function X5e(e,t){var r={};return t=q5e(t),K5e(e,function(n,i,s){H5e(r,i,t(n,i,s))}),r}var Y5e=X5e;const Q5e=Dr(Y5e);function Z5e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var J5e=Z5e,e6e=dN;function t6e(e,t){var r=!0;return e6e(e,function(n,i,s){return r=!!t(n,i,s),r}),r}var r6e=t6e,n6e=J5e,i6e=r6e,s6e=Au,a6e=Gs,o6e=Ik;function l6e(e,t,r){var n=a6e(e)?n6e:i6e;return r&&o6e(e,t,r)&&(t=void 0),n(e,s6e(t))}var c6e=l6e;const u6e=Dr(c6e);var d6e=["x","y"];function Fy(e){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(e)}function N2(){return N2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N2.apply(this,arguments)}function l8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(r),!0).forEach(function(n){f6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f6e(e,t,r){return t=h6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h6e(e){var t=p6e(e,"string");return Fy(t)=="symbol"?t:t+""}function p6e(e,t){if(Fy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m6e(e,t){if(e==null)return{};var r=g6e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v6e(e,t){var r=e.x,n=e.y,i=m6e(e,d6e),s="".concat(r),a=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),f=parseInt(c,10),d="".concat(t.width||i.width),h=parseInt(d,10);return Cg(Cg(Cg(Cg(Cg({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function c8(e){return ae.createElement($te,N2({shapeType:"rectangle",propTransformer:v6e,activeClassName:"recharts-active-bar"},e))}var y6e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var s=typeof n=="number";return s?t(n,i):(s||af(),r)}},_6e=["value","background"],Fte;function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function x6e(e,t){if(e==null)return{};var r=b6e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qw.apply(this,arguments)}function u8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(r),!0).forEach(function(n){Xc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zte(n.key),n)}}function k6e(e,t,r){return t&&d8(e.prototype,t),r&&d8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function T6e(e,t,r){return t=Xw(t),M6e(e,Bte()?Reflect.construct(t,r||[],Xw(e).constructor):t.apply(e,r))}function M6e(e,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S6e(e)}function S6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bte=function(){return!!e})()}function Xw(e){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xw(e)}function P6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}function I2(e,t){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},I2(e,t)}function Xc(e,t,r){return t=zte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zte(e){var t=E6e(e,"string");return Up(t)=="symbol"?t:t+""}function E6e(e,t){if(Up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tf=function(e){function t(){var r;w6e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=T6e(this,t,[].concat(i)),Xc(r,"state",{isAnimationFinished:!1}),Xc(r,"id",A_("recharts-bar-")),Xc(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Xc(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return P6e(t,e),k6e(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,f=Qt(this.props,!1);return n&&n.map(function(d,h){var p=h===l,m=p?c:a,g=si(si(si({},f),d),{},{isActive:p,option:m,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ae.createElement(Wr,qw({className:"recharts-bar-rectangle"},rf(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),ae.createElement(c8,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,f=i.animationEasing,d=i.animationId,h=this.state.prevData;return ae.createElement(rc,{begin:l,duration:c,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=s.map(function(x,y){var v=h&&h[y];if(v){var _=$c(v.x,x.x),b=$c(v.y,x.y),w=$c(v.width,x.width),k=$c(v.height,x.height);return si(si({},x),{},{x:_(m),y:b(m),width:w(m),height:k(m)})}if(a==="horizontal"){var T=$c(0,x.height),M=T(m);return si(si({},x),{},{y:x.y+x.height-M,height:M})}var j=$c(0,x.width),C=j(m);return si(si({},x),{},{width:C})});return ae.createElement(Wr,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!Hk(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=Qt(this.props.background,!1);return s.map(function(c,f){c.value;var d=c.background,h=x6e(c,_6e);if(!d)return null;var p=si(si(si(si(si({},h),{},{fill:"#eee"},d),l),rf(n.props,c,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return ae.createElement(c8,qw({key:"background-bar-".concat(f),option:n.props.background,isActive:f===o},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,f=s.children,d=Ra(f,Xk);if(!d)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,p=function(x,y){var v=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:v,errorVal:is(x,y)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ae.createElement(Wr,m,d.map(function(g){return ae.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,a=n.className,o=n.xAxis,l=n.yAxis,c=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,m=n.background,g=n.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=dr("recharts-bar",a),v=o&&o.allowDataOverflow,_=l&&l.allowDataOverflow,b=v||_,w=yr(g)?this.id:g;return ae.createElement(Wr,{className:y},v||_?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(w)},ae.createElement("rect",{x:v?c:c-d/2,y:_?f:f-h/2,width:v?d:d*2,height:_?h:h*2}))):null,ae.createElement(Wr,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!p||x)&&ou.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(E.PureComponent);Fte=Tf;Xc(Tf,"displayName","Bar");Xc(Tf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Vl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xc(Tf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,s=e.xAxis,a=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=g4e(n,r);if(!p)return null;var m=t.layout,g=r.type.defaultProps,x=g!==void 0?si(si({},g),r.props):r.props,y=x.dataKey,v=x.children,_=x.minPointSize,b=m==="horizontal"?a:s,w=c?b.scale.domain():null,k=k4e({numericAxis:b}),T=Ra(v,Dk),M=d.map(function(j,C){var R,I,N,z,V,G;c?R=v4e(c[f+C],w):(R=is(j,y),Array.isArray(R)||(R=[k,R]));var H=y6e(_,Fte.defaultProps.minPointSize)(R[1],C);if(m==="horizontal"){var O,q=[a.scale(R[0]),a.scale(R[1])],ee=q[0],B=q[1];I=e6({axis:s,ticks:o,bandSize:i,offset:p.offset,entry:j,index:C}),N=(O=B??ee)!==null&&O!==void 0?O:void 0,z=p.size;var D=ee-B;if(V=Number.isNaN(D)?0:D,G={x:I,y:a.y,width:z,height:a.height},Math.abs(H)>0&&Math.abs(V)<Math.abs(H)){var K=ws(V||H)*(Math.abs(H)-Math.abs(V));N-=K,V+=K}}else{var oe=[s.scale(R[0]),s.scale(R[1])],_e=oe[0],ue=oe[1];if(I=_e,N=e6({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:j,index:C}),z=ue-_e,V=p.size,G={x:s.x,y:N,width:s.width,height:V},Math.abs(H)>0&&Math.abs(z)<Math.abs(H)){var ye=ws(z||H)*(Math.abs(H)-Math.abs(z));z+=ye}}return si(si(si({},j),{},{x:I,y:N,width:z,height:V,value:c?R:R[1],payload:j,background:G},T&&T[C]&&T[C].props),{},{tooltipPayload:[ute(r,j)],tooltipPosition:{x:I+z/2,y:N+V/2}})});return si({data:M,layout:m},h)});function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function j6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vte(n.key),n)}}function C6e(e,t,r){return t&&f8(e.prototype,t),r&&f8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(n){rT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rT(e,t,r){return t=Vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vte(e){var t=A6e(e,"string");return By(t)=="symbol"?t:t+""}function A6e(e,t){if(By(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(By(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O6e=function(t,r,n,i,s){var a=t.width,o=t.height,l=t.layout,c=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!ta(c,Tf);return f.reduce(function(p,m){var g=r[m],x=g.orientation,y=g.domain,v=g.padding,_=v===void 0?{}:v,b=g.mirror,w=g.reversed,k="".concat(x).concat(b?"Mirror":""),T,M,j,C,R;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=y[1]-y[0],N=1/0,z=g.categoricalDomain.sort();if(z.forEach(function(oe,_e){_e>0&&(N=Math.min((oe||0)-(z[_e-1]||0),N))}),Number.isFinite(N)){var V=N/I,G=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(T=V*G/2),g.padding==="no-gap"){var H=ks(t.barCategoryGap,V*G),O=V*G/2;T=O-H-(O-H)/G*H}}}i==="xAxis"?M=[n.left+(_.left||0)+(T||0),n.left+n.width-(_.right||0)-(T||0)]:i==="yAxis"?M=l==="horizontal"?[n.top+n.height-(_.bottom||0),n.top+(_.top||0)]:[n.top+(_.top||0)+(T||0),n.top+n.height-(_.bottom||0)-(T||0)]:M=g.range,w&&(M=[M[1],M[0]]);var q=ate(g,s,h),ee=q.scale,B=q.realScaleType;ee.domain(y).range(M),ote(ee);var D=lte(ee,mo(mo({},g),{},{realScaleType:B}));i==="xAxis"?(R=x==="top"&&!b||x==="bottom"&&b,j=n.left,C=d[k]-R*g.height):i==="yAxis"&&(R=x==="left"&&!b||x==="right"&&b,j=d[k]-R*g.width,C=n.top);var K=mo(mo(mo({},g),D),{},{realScaleType:B,x:j,y:C,scale:ee,width:i==="xAxis"?n.width:g.width,height:i==="yAxis"?n.height:g.height});return K.bandSize=$w(K,D),!g.hide&&i==="xAxis"?d[k]+=(R?-1:1)*K.height:g.hide||(d[k]+=(R?-1:1)*K.width),mo(mo({},p),{},rT({},m,K))},{})},Ute=function(t,r){var n=t.x,i=t.y,s=r.x,a=r.y;return{x:Math.min(n,s),y:Math.min(i,a),width:Math.abs(s-n),height:Math.abs(a-i)}},$6e=function(t){var r=t.x1,n=t.y1,i=t.x2,s=t.y2;return Ute({x:r,y:n},{x:i,y:s})},Wte=function(){function e(t){j6e(this,e),this.scale=t}return C6e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();rT(Wte,"EPS",1e-4);var zN=function(t){var r=Object.keys(t).reduce(function(n,i){return mo(mo({},n),{},rT({},i,Wte.create(t[i])))},{});return mo(mo({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return Q5e(i,function(l,c){return r[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return u6e(i,function(s,a){return r[a].isInRange(s)})}})};function N6e(e){return(e%180+180)%180}var I6e=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=N6e(i),a=s*Math.PI/180,o=Math.atan(n/r),l=a>o&&a<Math.PI-o?n/Math.sin(a):r/Math.cos(a);return Math.abs(l)},D6e=iSe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Gte=E.createContext(void 0),Hte=E.createContext(void 0),Kte=E.createContext(void 0),L6e=E.createContext({}),qte=E.createContext(void 0),Xte=E.createContext(0),Yte=E.createContext(0),p8=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,a=t.clipPathId,o=t.children,l=t.width,c=t.height,f=D6e(s);return ae.createElement(Gte.Provider,{value:n},ae.createElement(Hte.Provider,{value:i},ae.createElement(L6e.Provider,{value:s},ae.createElement(Kte.Provider,{value:f},ae.createElement(qte.Provider,{value:a},ae.createElement(Xte.Provider,{value:c},ae.createElement(Yte.Provider,{value:l},o)))))))},R6e=function(){return E.useContext(qte)},Qte=function(t){var r=E.useContext(Gte);r==null&&af();var n=r[t];return n==null&&af(),n},Zte=function(t){var r=E.useContext(Hte);r==null&&af();var n=r[t];return n==null&&af(),n},F6e=function(){var t=E.useContext(Kte);return t},Jte=function(){return E.useContext(Yte)},ere=function(){return E.useContext(Xte)};function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function B6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rre(n.key),n)}}function V6e(e,t,r){return t&&z6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U6e(e,t,r){return t=Yw(t),W6e(e,tre()?Reflect.construct(t,r||[],Yw(e).constructor):t.apply(e,r))}function W6e(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G6e(e)}function G6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tre=function(){return!!e})()}function Yw(e){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yw(e)}function H6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},D2(e,t)}function m8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function g8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(r),!0).forEach(function(n){VN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VN(e,t,r){return t=rre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rre(e){var t=K6e(e,"string");return Wp(t)=="symbol"?t:t+""}function K6e(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q6e(e,t){return Z6e(e)||Q6e(e,t)||Y6e(e,t)||X6e()}function X6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6e(e,t){if(e){if(typeof e=="string")return v8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v8(e,t)}}function v8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Z6e(e){if(Array.isArray(e))return e}function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L2.apply(this,arguments)}var J6e=function(t,r){var n;return ae.isValidElement(t)?n=ae.cloneElement(t,r):lr(t)?n=t(r):n=ae.createElement("line",L2({},r,{className:"recharts-reference-line-line"})),n},e8e=function(t,r,n,i,s,a,o,l,c){var f=s.x,d=s.y,h=s.width,p=s.height;if(n){var m=c.y,g=t.y.apply(m,{position:a});if(sl(c,"discard")&&!t.y.isInRange(g))return null;var x=[{x:f+h,y:g},{x:f,y:g}];return l==="left"?x.reverse():x}if(r){var y=c.x,v=t.x.apply(y,{position:a});if(sl(c,"discard")&&!t.x.isInRange(v))return null;var _=[{x:v,y:d+p},{x:v,y:d}];return o==="top"?_.reverse():_}if(i){var b=c.segment,w=b.map(function(k){return t.apply(k,{position:a})});return sl(c,"discard")&&U5e(w,function(k){return!t.isInRange(k)})?null:w}return null};function t8e(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,a=e.shape,o=e.className,l=e.alwaysShow,c=R6e(),f=Qte(i),d=Zte(s),h=F6e();if(!c||!h)return null;zl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=zN({x:f.scale,y:d.scale}),m=xi(t),g=xi(r),x=n&&n.length===2,y=e8e(p,m,g,x,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var v=q6e(y,2),_=v[0],b=_.x,w=_.y,k=v[1],T=k.x,M=k.y,j=sl(e,"hidden")?"url(#".concat(c,")"):void 0,C=g8(g8({clipPath:j},Qt(e,!0)),{},{x1:b,y1:w,x2:T,y2:M});return ae.createElement(Wr,{className:dr("recharts-reference-line",o)},J6e(a,C),Ai.renderCallByParent(e,$6e({x1:b,y1:w,x2:T,y2:M})))}var UN=function(e){function t(){return B6e(this,t),U6e(this,t,arguments)}return H6e(t,e),V6e(t,[{key:"render",value:function(){return ae.createElement(t8e,this.props)}}])}(ae.Component);VN(UN,"displayName","ReferenceLine");VN(UN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R2.apply(this,arguments)}function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(r),!0).forEach(function(n){nT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ire(n.key),n)}}function i8e(e,t,r){return t&&n8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s8e(e,t,r){return t=Qw(t),a8e(e,nre()?Reflect.construct(t,r||[],Qw(e).constructor):t.apply(e,r))}function a8e(e,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o8e(e)}function o8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nre=function(){return!!e})()}function Qw(e){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qw(e)}function l8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F2(e,t)}function F2(e,t){return F2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},F2(e,t)}function nT(e,t,r){return t=ire(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ire(e){var t=c8e(e,"string");return Gp(t)=="symbol"?t:t+""}function c8e(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u8e=function(t){var r=t.x,n=t.y,i=t.xAxis,s=t.yAxis,a=zN({x:i.scale,y:s.scale}),o=a.apply({x:r,y:n},{bandAware:!0});return sl(t,"discard")&&!a.isInRange(o)?null:o},iT=function(e){function t(){return r8e(this,t),s8e(this,t,arguments)}return l8e(t,e),i8e(t,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,a=n.r,o=n.alwaysShow,l=n.clipPathId,c=xi(i),f=xi(s);if(zl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!f)return null;var d=u8e(this.props);if(!d)return null;var h=d.x,p=d.y,m=this.props,g=m.shape,x=m.className,y=sl(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=_8(_8({clipPath:y},Qt(this.props,!0)),{},{cx:h,cy:p});return ae.createElement(Wr,{className:dr("recharts-reference-dot",x)},t.renderDot(g,v),Ai.renderCallByParent(this.props,{x:h-a,y:p-a,width:2*a,height:2*a}))}}])}(ae.Component);nT(iT,"displayName","ReferenceDot");nT(iT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});nT(iT,"renderDot",function(e,t){var r;return ae.isValidElement(e)?r=ae.cloneElement(e,t):lr(e)?r=e(t):r=ae.createElement(BN,R2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function B2(){return B2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B2.apply(this,arguments)}function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function x8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(r),!0).forEach(function(n){sT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,are(n.key),n)}}function h8e(e,t,r){return t&&f8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function p8e(e,t,r){return t=Zw(t),m8e(e,sre()?Reflect.construct(t,r||[],Zw(e).constructor):t.apply(e,r))}function m8e(e,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g8e(e)}function g8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sre=function(){return!!e})()}function Zw(e){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zw(e)}function v8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z2(e,t)}function z2(e,t){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},z2(e,t)}function sT(e,t,r){return t=are(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function are(e){var t=y8e(e,"string");return Hp(t)=="symbol"?t:t+""}function y8e(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _8e=function(t,r,n,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=zN({x:f.scale,y:d.scale}),p={x:t?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return sl(s,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:Ute(p,m)},aT=function(e){function t(){return d8e(this,t),p8e(this,t,arguments)}return v8e(t,e),h8e(t,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,a=n.y1,o=n.y2,l=n.className,c=n.alwaysShow,f=n.clipPathId;zl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=xi(i),h=xi(s),p=xi(a),m=xi(o),g=this.props.shape;if(!d&&!h&&!p&&!m&&!g)return null;var x=_8e(d,h,p,m,this.props);if(!x&&!g)return null;var y=sl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ae.createElement(Wr,{className:dr("recharts-reference-area",l)},t.renderRect(g,b8(b8({clipPath:y},Qt(this.props,!0)),x)),Ai.renderCallByParent(this.props,x))}}])}(ae.Component);sT(aT,"displayName","ReferenceArea");sT(aT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});sT(aT,"renderRect",function(e,t){var r;return ae.isValidElement(e)?r=ae.cloneElement(e,t):lr(e)?r=e(t):r=ae.createElement(FN,B2({},t,{className:"recharts-reference-area-rect"})),r});function ore(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function x8e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return I6e(n,r)}function b8e(e,t,r){var n=r==="width",i=e.x,s=e.y,a=e.width,o=e.height;return t===1?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function Jw(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function w8e(e,t){return ore(e,t+1)}function k8e(e,t,r,n,i){for(var s=(n||[]).slice(),a=t.start,o=t.end,l=0,c=1,f=a,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:ore(n,c)};var g=l,x,y=function(){return x===void 0&&(x=r(m,g)),x},v=m.coordinate,_=l===0||Jw(e,v,y,f,o);_||(l=0,f=a,c+=1),_&&(f=v+e*(y()/2+i),l+=c)},h;c<=s.length;)if(h=d(),h)return h.v;return[]}function zy(e){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(e)}function w8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(r),!0).forEach(function(n){T8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T8e(e,t,r){return t=M8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M8e(e){var t=S8e(e,"string");return zy(t)=="symbol"?t:t+""}function S8e(e,t){if(zy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P8e(e,t,r,n,i){for(var s=(n||[]).slice(),a=s.length,o=t.start,l=t.end,c=function(h){var p=s[h],m,g=function(){return m===void 0&&(m=r(p,h)),m};if(h===a-1){var x=e*(p.coordinate+e*g()/2-l);s[h]=p=es(es({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else s[h]=p=es(es({},p),{},{tickCoord:p.coordinate});var y=Jw(e,p.tickCoord,g,o,l);y&&(l=p.tickCoord-e*(g()/2+i),s[h]=es(es({},p),{},{isShow:!0}))},f=a-1;f>=0;f--)c(f);return s}function E8e(e,t,r,n,i,s){var a=(n||[]).slice(),o=a.length,l=t.start,c=t.end;if(s){var f=n[o-1],d=r(f,o-1),h=e*(f.coordinate+e*d/2-c);a[o-1]=f=es(es({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=Jw(e,f.tickCoord,function(){return d},l,c);p&&(c=f.tickCoord-e*(d/2+i),a[o-1]=es(es({},f),{},{isShow:!0}))}for(var m=s?o-1:o,g=function(v){var _=a[v],b,w=function(){return b===void 0&&(b=r(_,v)),b};if(v===0){var k=e*(_.coordinate-e*w()/2-l);a[v]=_=es(es({},_),{},{tickCoord:k<0?_.coordinate-k*e:_.coordinate})}else a[v]=_=es(es({},_),{},{tickCoord:_.coordinate});var T=Jw(e,_.tickCoord,w,l,c);T&&(l=_.tickCoord+e*(w()/2+i),a[v]=es(es({},_),{},{isShow:!0}))},x=0;x<m;x++)g(x);return a}function j8e(e,t,r){var n=e.tick,i=e.ticks,s=e.viewBox,a=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,f=e.unit,d=e.angle;if(!i||!i.length||!n)return[];if(dt(l)||Vl.isSsr)return w8e(i,typeof l=="number"&&dt(l)?l:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",m=f&&p==="width"?bv(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(_,b){var w=lr(c)?c(_.value,b):_.value;return p==="width"?x8e(bv(w,{fontSize:t,letterSpacing:r}),m,d):bv(w,{fontSize:t,letterSpacing:r})[p]},x=i.length>=2?ws(i[1].coordinate-i[0].coordinate):1,y=b8e(s,x,p);return l==="equidistantPreserveStart"?k8e(x,y,g,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=E8e(x,y,g,i,a,l==="preserveStartEnd"):h=P8e(x,y,g,i,a),h.filter(function(v){return v.isShow}))}var C8e=["viewBox"],A8e=["viewBox"],O8e=["ticks"];function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(this,arguments)}function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(r),!0).forEach(function(n){WN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mP(e,t){if(e==null)return{};var r=$8e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function N8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cre(n.key),n)}}function I8e(e,t,r){return t&&T8(e.prototype,t),r&&T8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D8e(e,t,r){return t=e1(t),L8e(e,lre()?Reflect.construct(t,r||[],e1(e).constructor):t.apply(e,r))}function L8e(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R8e(e)}function R8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lre=function(){return!!e})()}function e1(e){return e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e1(e)}function F8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V2(e,t)}function V2(e,t){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},V2(e,t)}function WN(e,t,r){return t=cre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cre(e){var t=B8e(e,"string");return Kp(t)=="symbol"?t:t+""}function B8e(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oT=function(e){function t(r){var n;return N8e(this,t),n=D8e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return F8e(t,e),I8e(t,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,a=mP(n,C8e),o=this.props,l=o.viewBox,c=mP(o,A8e);return!Zh(s,l)||!Zh(a,c)||!Zh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,f=i.tickSize,d=i.mirror,h=i.tickMargin,p,m,g,x,y,v,_=d?-1:1,b=n.tickSize||f,w=dt(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":p=m=n.coordinate,x=a+ +!d*l,g=x-_*b,v=g-_*h,y=w;break;case"left":g=x=n.coordinate,m=s+ +!d*o,p=m-_*b,y=p-_*h,v=w;break;case"right":g=x=n.coordinate,m=s+ +d*o,p=m+_*b,y=p+_*h,v=w;break;default:p=m=n.coordinate,x=a+ +d*l,g=x+_*b,v=g+_*h,y=w;break}return{line:{x1:p,y1:g,x2:m,y2:x},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.orientation,c=n.mirror,f=n.axisLine,d=hs(hs(hs({},Qt(this.props,!1)),Qt(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=hs(hs({},d),{},{x1:i,y1:s+h*o,x2:i+a,y2:s+h*o})}else{var p=+(l==="left"&&!c||l==="right"&&c);d=hs(hs({},d),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+o})}return ae.createElement("line",Dh({},d,{className:dr("recharts-cartesian-axis-line",fa(f,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,f=o.tick,d=o.tickFormatter,h=o.unit,p=j8e(hs(hs({},this.props),{},{ticks:n}),i,s),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=Qt(this.props,!1),y=Qt(f,!1),v=hs(hs({},x),{},{fill:"none"},Qt(l,!1)),_=p.map(function(b,w){var k=a.getTickLineCoord(b),T=k.line,M=k.tick,j=hs(hs(hs(hs({textAnchor:m,verticalAnchor:g},x),{},{stroke:"none",fill:c},y),M),{},{index:w,payload:b,visibleTicksCount:p.length,tickFormatter:d});return ae.createElement(Wr,Dh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},rf(a.props,b,w)),l&&ae.createElement("line",Dh({},v,T,{className:dr("recharts-cartesian-axis-tick-line",fa(l,"className"))})),f&&t.renderTickItem(f,j,"".concat(lr(d)?d(b.value,w):b.value).concat(h||"")))});return ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,f=i.hide;if(f)return null;var d=this.props,h=d.ticks,p=mP(d,O8e),m=h;return lr(l)&&(m=h&&h.length>0?l(this.props):l(p)),a<=0||o<=0||!m||!m.length?null:ae.createElement(Wr,{className:dr("recharts-cartesian-axis",c),ref:function(x){n.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Ai.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return ae.isValidElement(n)?a=ae.cloneElement(n,i):lr(n)?a=n(i):a=ae.createElement(nf,Dh({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(E.Component);WN(oT,"displayName","CartesianAxis");WN(oT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function z8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fre(n.key),n)}}function U8e(e,t,r){return t&&V8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W8e(e,t,r){return t=t1(t),G8e(e,ure()?Reflect.construct(t,r||[],t1(e).constructor):t.apply(e,r))}function G8e(e,t){if(t&&(qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H8e(e)}function H8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ure(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ure=function(){return!!e})()}function t1(e){return t1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t1(e)}function K8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U2(e,t)}function U2(e,t){return U2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},U2(e,t)}function dre(e,t,r){return t=fre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fre(e){var t=q8e(e,"string");return qp(t)=="symbol"?t:t+""}function q8e(e,t){if(qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W2.apply(this,arguments)}function X8e(e){var t=e.xAxisId,r=Jte(),n=ere(),i=Qte(t);return i==null?null:ae.createElement(oT,W2({},i,{className:dr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return Od(a,!0)}}))}var lT=function(e){function t(){return z8e(this,t),W8e(this,t,arguments)}return K8e(t,e),U8e(t,[{key:"render",value:function(){return ae.createElement(X8e,this.props)}}])}(ae.Component);dre(lT,"displayName","XAxis");dre(lT,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xp(e){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xp(e)}function Y8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mre(n.key),n)}}function Z8e(e,t,r){return t&&Q8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J8e(e,t,r){return t=r1(t),eWe(e,hre()?Reflect.construct(t,r||[],r1(e).constructor):t.apply(e,r))}function eWe(e,t){if(t&&(Xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tWe(e)}function tWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hre=function(){return!!e})()}function r1(e){return r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r1(e)}function rWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},G2(e,t)}function pre(e,t,r){return t=mre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mre(e){var t=nWe(e,"string");return Xp(t)=="symbol"?t:t+""}function nWe(e,t){if(Xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H2.apply(this,arguments)}var iWe=function(t){var r=t.yAxisId,n=Jte(),i=ere(),s=Zte(r);return s==null?null:ae.createElement(oT,H2({},s,{className:dr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return Od(o,!0)}}))},cT=function(e){function t(){return Y8e(this,t),J8e(this,t,arguments)}return rWe(t,e),Z8e(t,[{key:"render",value:function(){return ae.createElement(iWe,this.props)}}])}(ae.Component);pre(cT,"displayName","YAxis");pre(cT,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function M8(e){return lWe(e)||oWe(e)||aWe(e)||sWe()}function sWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aWe(e,t){if(e){if(typeof e=="string")return K2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K2(e,t)}}function oWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lWe(e){if(Array.isArray(e))return K2(e)}function K2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q2=function(t,r,n,i,s){var a=Ra(t,UN),o=Ra(t,iT),l=[].concat(M8(a),M8(o)),c=Ra(t,aT),f="".concat(i,"Id"),d=i[0],h=r;if(l.length&&(h=l.reduce(function(g,x){if(x.props[f]===n&&sl(x.props,"extendDomain")&&dt(x.props[d])){var y=x.props[d];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},h)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(g,x){if(x.props[f]===n&&sl(x.props,"extendDomain")&&dt(x.props[p])&&dt(x.props[m])){var y=x.props[p],v=x.props[m];return[Math.min(g[0],y,v),Math.max(g[1],y,v)]}return g},h)}return s&&s.length&&(h=s.reduce(function(g,x){return dt(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},h)),h},gre={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||l,h),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)t.call(f,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=r?r+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var f=r?r+c:c,d=this._events[f];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,f,d,h,p,m){var g=r?r+c:c;if(!this._events[g])return!1;var x=this._events[g],y=arguments.length,v,_;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,p),!0;case 6:return x.fn.call(x.context,f,d,h,p,m),!0}for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];x.fn.apply(x.context,v)}else{var b=x.length,w;for(_=0;_<b;_++)switch(x[_].once&&this.removeListener(c,x[_].fn,void 0,!0),y){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,f);break;case 3:x[_].fn.call(x[_].context,f,d);break;case 4:x[_].fn.call(x[_].context,f,d,h);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];x[_].fn.apply(x[_].context,v)}}return!0},o.prototype.on=function(c,f,d){return s(this,c,f,d,!1)},o.prototype.once=function(c,f,d){return s(this,c,f,d,!0)},o.prototype.removeListener=function(c,f,d,h){var p=r?r+c:c;if(!this._events[p])return this;if(!f)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!h||m.once)&&(!d||m.context===d)&&a(this,p);else{for(var g=0,x=[],y=m.length;g<y;g++)(m[g].fn!==f||h&&!m[g].once||d&&m[g].context!==d)&&x.push(m[g]);x.length?this._events[p]=x.length===1?x[0]:x:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=r?r+c:c,this._events[f]&&a(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(gre);var cWe=gre.exports;const uWe=Dr(cWe);var gP=new uWe,vP="recharts.syncMouseEvents";function Vy(e){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(e)}function dWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vre(n.key),n)}}function hWe(e,t,r){return t&&fWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yP(e,t,r){return t=vre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vre(e){var t=pWe(e,"string");return Vy(t)=="symbol"?t:t+""}function pWe(e,t){if(Vy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mWe=function(){function e(){dWe(this,e),yP(this,"activeIndex",0),yP(this,"coordinateList",[]),yP(this,"layout","horizontal")}return hWe(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,a=r.container,o=a===void 0?null:a,l=r.layout,c=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=s+l+c,h=a+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function gWe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&dt(n)&&dt(i))return!0}return!1}function vWe(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function yre(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle,a=cn(t,r,n,i),o=cn(t,r,n,s);return{points:[a,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function yWe(e,t,r){var n,i,s,a;if(e==="horizontal")n=t.x,s=n,i=r.top,a=r.top+r.height;else if(e==="vertical")i=t.y,a=i,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,l=t.cy,c=t.innerRadius,f=t.outerRadius,d=t.angle,h=cn(o,l,c,d),p=cn(o,l,f,d);n=h.x,i=h.y,s=p.x,a=p.y}else return yre(t);return[{x:n,y:i},{x:s,y:a}]}function Uy(e){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uy(e)}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){_We(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _We(e,t,r){return t=xWe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xWe(e){var t=bWe(e,"string");return Uy(t)=="symbol"?t:t+""}function bWe(e,t){if(Uy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wWe(e){var t,r,n=e.element,i=e.tooltipEventType,s=e.isActive,a=e.activeCoordinate,o=e.activePayload,l=e.offset,c=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var m,g=v2;if(h==="ScatterChart")m=a,g=CVe;else if(h==="BarChart")m=vWe(d,a,l,f),g=FN;else if(d==="radial"){var x=yre(a),y=x.cx,v=x.cy,_=x.radius,b=x.startAngle,w=x.endAngle;m={cx:y,cy:v,startAngle:b,endAngle:w,innerRadius:_,outerRadius:_},g=gte}else m={points:yWe(d,a,l)},g=v2;var k=bx(bx(bx(bx({stroke:"#ccc",pointerEvents:"none"},l),m),Qt(p,!1)),{},{payload:o,payloadIndex:c,className:dr("recharts-tooltip-cursor",p.className)});return E.isValidElement(p)?E.cloneElement(p,k):E.createElement(g,k)}var kWe=["item"],TWe=["children","className","width","height","style","compact","title","desc"];function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(this,arguments)}function P8(e,t){return PWe(e)||SWe(e,t)||xre(e,t)||MWe()}function MWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SWe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function PWe(e){if(Array.isArray(e))return e}function E8(e,t){if(e==null)return{};var r=EWe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EWe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CWe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bre(n.key),n)}}function AWe(e,t,r){return t&&CWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OWe(e,t,r){return t=n1(t),$We(e,_re()?Reflect.construct(t,r||[],n1(e).constructor):t.apply(e,r))}function $We(e,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NWe(e)}function NWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_re=function(){return!!e})()}function n1(e){return n1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n1(e)}function IWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X2(e,t)}function X2(e,t){return X2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},X2(e,t)}function Qp(e){return RWe(e)||LWe(e)||xre(e)||DWe()}function DWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(e,t){if(e){if(typeof e=="string")return Y2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y2(e,t)}}function LWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RWe(e){if(Array.isArray(e))return Y2(e)}function Y2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j8(Object(r),!0).forEach(function(n){Xt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xt(e,t,r){return t=bre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bre(e){var t=FWe(e,"string");return Yp(t)=="symbol"?t:t+""}function FWe(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BWe={xAxis:["bottom","top"],yAxis:["left","right"]},zWe={width:"100%",height:"100%"},wre={x:0,y:0};function wx(e){return e}var VWe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},UWe=function(t,r,n,i){var s=r.find(function(f){return f&&f.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var a=s.coordinate,o=i.radius;return Ve(Ve(Ve({},i),cn(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return Ve(Ve(Ve({},i),cn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return wre},uT=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,a=(n??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Qp(o),Qp(c)):o},[]);return a.length>0?a:t&&t.length&&dt(i)&&dt(s)?t.slice(i,s+1):[]};function kre(e){return e==="number"?[0,"auto"]:void 0}var Q2=function(t,r,n,i){var s=t.graphicalItems,a=t.tooltipAxis,o=uT(r,t);return n<0||!s||!s.length||n>=o.length?null:s.reduce(function(l,c){var f,d=(f=c.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=d===void 0?o:d;h=MC(p,a.dataKey,i)}else h=d&&d[n]||o[n];return h?[].concat(Qp(l),[ute(c,h)]):l},[])},C8=function(t,r,n,i){var s=i||{x:t.chartX,y:t.chartY},a=VWe(s,n),o=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,f=u4e(a,o,c,l);if(f>=0&&c){var d=c[f]&&c[f].value,h=Q2(t,r,f,d),p=UWe(n,o,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},WWe=function(t,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=ste(f,s);return n.reduce(function(m,g){var x,y=g.type.defaultProps!==void 0?Ve(Ve({},g.type.defaultProps),g.props):g.props,v=y.type,_=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,k=y.scale,T=y.ticks,M=y.includeHidden,j=y[a];if(m[j])return m;var C=uT(t.data,{graphicalItems:i.filter(function(D){var K,oe=a in D.props?D.props[a]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[a];return oe===j}),dataStartIndex:l,dataEndIndex:c}),R=C.length,I,N,z;gWe(y.domain,b,v)&&(I=f2(y.domain,null,b),p&&(v==="number"||k!=="auto")&&(z=kv(C,_,"category")));var V=kre(v);if(!I||I.length===0){var G,H=(G=y.domain)!==null&&G!==void 0?G:V;if(_){if(I=kv(C,_,v),v==="category"&&p){var O=ePe(I);w&&O?(N=I,I=Gw(0,R)):w||(I=n6(H,I,g).reduce(function(D,K){return D.indexOf(K)>=0?D:[].concat(Qp(D),[K])},[]))}else if(v==="category")w?I=I.filter(function(D){return D!==""&&!yr(D)}):I=n6(H,I,g).reduce(function(D,K){return D.indexOf(K)>=0||K===""||yr(K)?D:[].concat(Qp(D),[K])},[]);else if(v==="number"){var q=m4e(C,i.filter(function(D){var K,oe,_e=a in D.props?D.props[a]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[a],ue="hide"in D.props?D.props.hide:(oe=D.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return _e===j&&(M||!ue)}),_,s,f);q&&(I=q)}p&&(v==="number"||k!=="auto")&&(z=kv(C,_,"category"))}else p?I=Gw(0,R):o&&o[j]&&o[j].hasStack&&v==="number"?I=h==="expand"?[0,1]:cte(o[j].stackGroups,l,c):I=ite(C,i.filter(function(D){var K=a in D.props?D.props[a]:D.type.defaultProps[a],oe="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return K===j&&(M||!oe)}),v,f,!0);if(v==="number")I=q2(d,I,j,s,T),H&&(I=f2(H,I,b));else if(v==="category"&&H){var ee=H,B=I.every(function(D){return ee.indexOf(D)>=0});B&&(I=ee)}}return Ve(Ve({},m),{},Xt({},j,Ve(Ve({},y),{},{axisType:s,domain:I,categoricalDomain:z,duplicateDomain:N,originalDomain:(x=y.domain)!==null&&x!==void 0?x:V,isCategorical:p,layout:f})))},{})},GWe=function(t,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=t.layout,d=t.children,h=uT(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=ste(f,s),g=-1;return n.reduce(function(x,y){var v=y.type.defaultProps!==void 0?Ve(Ve({},y.type.defaultProps),y.props):y.props,_=v[a],b=kre("number");if(!x[_]){g++;var w;return m?w=Gw(0,p):o&&o[_]&&o[_].hasStack?(w=cte(o[_].stackGroups,l,c),w=q2(d,w,_,s)):(w=f2(b,ite(h,n.filter(function(k){var T,M,j=a in k.props?k.props[a]:(T=k.type.defaultProps)===null||T===void 0?void 0:T[a],C="hide"in k.props?k.props.hide:(M=k.type.defaultProps)===null||M===void 0?void 0:M.hide;return j===_&&!C}),"number",f),i.defaultProps.allowDataOverflow),w=q2(d,w,_,s)),Ve(Ve({},x),{},Xt({},_,Ve(Ve({axisType:s},i.defaultProps),{},{hide:!0,orientation:fa(BWe,"".concat(s,".").concat(g%2),null),domain:w,originalDomain:b,isCategorical:m,layout:f})))}return x},{})},HWe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,a=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=t.children,d="".concat(i,"Id"),h=Ra(f,s),p={};return h&&h.length?p=WWe(t,{axes:h,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(p=GWe(t,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),p},KWe=function(t){var r=oh(t),n=Od(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:fN(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:$w(r,n)}},A8=function(t){var r=t.children,n=t.defaultShowTooltip,i=ta(r,Vp),s=0,a=0;return t.data&&t.data.length!==0&&(a=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},qWe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Bl(r&&r.type);return n&&n.indexOf("Bar")>=0})},O8=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XWe=function(t,r){var n=t.props,i=t.graphicalItems,s=t.xAxisMap,a=s===void 0?{}:s,o=t.yAxisMap,l=o===void 0?{}:o,c=n.width,f=n.height,d=n.children,h=n.margin||{},p=ta(d,Vp),m=ta(d,Jh),g=Object.keys(l).reduce(function(w,k){var T=l[k],M=T.orientation;return!T.mirror&&!T.hide?Ve(Ve({},w),{},Xt({},M,w[M]+T.width)):w},{left:h.left||0,right:h.right||0}),x=Object.keys(a).reduce(function(w,k){var T=a[k],M=T.orientation;return!T.mirror&&!T.hide?Ve(Ve({},w),{},Xt({},M,fa(w,"".concat(M))+T.height)):w},{top:h.top||0,bottom:h.bottom||0}),y=Ve(Ve({},x),g),v=y.bottom;p&&(y.bottom+=p.props.height||Vp.defaultProps.height),m&&r&&(y=h4e(y,i,n,r));var _=c-y.left-y.right,b=f-y.top-y.bottom;return Ve(Ve({brushBottom:v},y),{},{width:Math.max(_,0),height:Math.max(b,0)})},YWe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Tre=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,a=t.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=t.axisComponents,c=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(x,y){var v=y.graphicalItems,_=y.stackGroups,b=y.offset,w=y.updateId,k=y.dataStartIndex,T=y.dataEndIndex,M=x.barSize,j=x.layout,C=x.barGap,R=x.barCategoryGap,I=x.maxBarSize,N=O8(j),z=N.numericAxisName,V=N.cateAxisName,G=qWe(v),H=[];return v.forEach(function(O,q){var ee=uT(x.data,{graphicalItems:[O],dataStartIndex:k,dataEndIndex:T}),B=O.type.defaultProps!==void 0?Ve(Ve({},O.type.defaultProps),O.props):O.props,D=B.dataKey,K=B.maxBarSize,oe=B["".concat(z,"Id")],_e=B["".concat(V,"Id")],ue={},ye=l.reduce(function(fe,Me){var Ce=y["".concat(Me.axisType,"Map")],me=B["".concat(Me.axisType,"Id")];Ce&&Ce[me]||Me.axisType==="zAxis"||af();var Fe=Ce[me];return Ve(Ve({},fe),{},Xt(Xt({},Me.axisType,Fe),"".concat(Me.axisType,"Ticks"),Od(Fe)))},ue),$e=ye[V],Se=ye["".concat(V,"Ticks")],ge=_&&_[oe]&&_[oe].hasStack&&T4e(O,_[oe].stackGroups),te=Bl(O.type).indexOf("Bar")>=0,re=$w($e,Se),J=[],we=G&&d4e({barSize:M,stackGroups:_,totalSize:YWe(ye,V)});if(te){var Ne,je,Pe=yr(K)?I:K,Z=(Ne=(je=$w($e,Se,!0))!==null&&je!==void 0?je:Pe)!==null&&Ne!==void 0?Ne:0;J=f4e({barGap:C,barCategoryGap:R,bandSize:Z!==re?Z:re,sizeList:we[_e],maxBarSize:Pe}),Z!==re&&(J=J.map(function(fe){return Ve(Ve({},fe),{},{position:Ve(Ve({},fe.position),{},{offset:fe.position.offset-Z/2})})}))}var ne=O&&O.type&&O.type.getComposedData;ne&&H.push({props:Ve(Ve({},ne(Ve(Ve({},ye),{},{displayedData:ee,props:x,dataKey:D,item:O,bandSize:re,barPosition:J,offset:b,stackedData:ge,layout:j,dataStartIndex:k,dataEndIndex:T}))),{},Xt(Xt(Xt({key:O.key||"item-".concat(q)},z,ye[z]),V,ye[V]),"animationId",w)),childIndex:dPe(O,x.children),item:O})}),H},p=function(x,y){var v=x.props,_=x.dataStartIndex,b=x.dataEndIndex,w=x.updateId;if(!YV({props:v}))return null;var k=v.children,T=v.layout,M=v.stackOffset,j=v.data,C=v.reverseStackOrder,R=O8(T),I=R.numericAxisName,N=R.cateAxisName,z=Ra(k,n),V=w4e(j,z,"".concat(I,"Id"),"".concat(N,"Id"),M,C),G=l.reduce(function(B,D){var K="".concat(D.axisType,"Map");return Ve(Ve({},B),{},Xt({},K,HWe(v,Ve(Ve({},D),{},{graphicalItems:z,stackGroups:D.axisType===I&&V,dataStartIndex:_,dataEndIndex:b}))))},{}),H=XWe(Ve(Ve({},G),{},{props:v,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(G).forEach(function(B){G[B]=f(v,G[B],H,B.replace("Map",""),r)});var O=G["".concat(N,"Map")],q=KWe(O),ee=h(v,Ve(Ve({},G),{},{dataStartIndex:_,dataEndIndex:b,updateId:w,graphicalItems:z,stackGroups:V,offset:H}));return Ve(Ve({formattedGraphicalItems:ee,graphicalItems:z,offset:H,stackGroups:V},q),G)},m=function(g){function x(y){var v,_,b;return jWe(this,x),b=OWe(this,x,[y]),Xt(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(b,"accessibilityManager",new mWe),Xt(b,"handleLegendBBoxUpdate",function(w){if(w){var k=b.state,T=k.dataStartIndex,M=k.dataEndIndex,j=k.updateId;b.setState(Ve({legendBBox:w},p({props:b.props,dataStartIndex:T,dataEndIndex:M,updateId:j},Ve(Ve({},b.state),{},{legendBBox:w}))))}}),Xt(b,"handleReceiveSyncEvent",function(w,k,T){if(b.props.syncId===w){if(T===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(k)}}),Xt(b,"handleBrushChange",function(w){var k=w.startIndex,T=w.endIndex;if(k!==b.state.dataStartIndex||T!==b.state.dataEndIndex){var M=b.state.updateId;b.setState(function(){return Ve({dataStartIndex:k,dataEndIndex:T},p({props:b.props,dataStartIndex:k,dataEndIndex:T,updateId:M},b.state))}),b.triggerSyncEvent({dataStartIndex:k,dataEndIndex:T})}}),Xt(b,"handleMouseEnter",function(w){var k=b.getMouseInfo(w);if(k){var T=Ve(Ve({},k),{},{isTooltipActive:!0});b.setState(T),b.triggerSyncEvent(T);var M=b.props.onMouseEnter;lr(M)&&M(T,w)}}),Xt(b,"triggeredAfterMouseMove",function(w){var k=b.getMouseInfo(w),T=k?Ve(Ve({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(T),b.triggerSyncEvent(T);var M=b.props.onMouseMove;lr(M)&&M(T,w)}),Xt(b,"handleItemMouseEnter",function(w){b.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Xt(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Xt(b,"handleMouseMove",function(w){w.persist(),b.throttleTriggeredAfterMouseMove(w)}),Xt(b,"handleMouseLeave",function(w){b.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};b.setState(k),b.triggerSyncEvent(k);var T=b.props.onMouseLeave;lr(T)&&T(k,w)}),Xt(b,"handleOuterEvent",function(w){var k=uPe(w),T=fa(b.props,"".concat(k));if(k&&lr(T)){var M,j;/.*touch.*/i.test(k)?j=b.getMouseInfo(w.changedTouches[0]):j=b.getMouseInfo(w),T((M=j)!==null&&M!==void 0?M:{},w)}}),Xt(b,"handleClick",function(w){var k=b.getMouseInfo(w);if(k){var T=Ve(Ve({},k),{},{isTooltipActive:!0});b.setState(T),b.triggerSyncEvent(T);var M=b.props.onClick;lr(M)&&M(T,w)}}),Xt(b,"handleMouseDown",function(w){var k=b.props.onMouseDown;if(lr(k)){var T=b.getMouseInfo(w);k(T,w)}}),Xt(b,"handleMouseUp",function(w){var k=b.props.onMouseUp;if(lr(k)){var T=b.getMouseInfo(w);k(T,w)}}),Xt(b,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Xt(b,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.handleMouseDown(w.changedTouches[0])}),Xt(b,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.handleMouseUp(w.changedTouches[0])}),Xt(b,"triggerSyncEvent",function(w){b.props.syncId!==void 0&&gP.emit(vP,b.props.syncId,w,b.eventEmitterSymbol)}),Xt(b,"applySyncEvent",function(w){var k=b.props,T=k.layout,M=k.syncMethod,j=b.state.updateId,C=w.dataStartIndex,R=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)b.setState(Ve({dataStartIndex:C,dataEndIndex:R},p({props:b.props,dataStartIndex:C,dataEndIndex:R,updateId:j},b.state)));else if(w.activeTooltipIndex!==void 0){var I=w.chartX,N=w.chartY,z=w.activeTooltipIndex,V=b.state,G=V.offset,H=V.tooltipTicks;if(!G)return;if(typeof M=="function")z=M(H,w);else if(M==="value"){z=-1;for(var O=0;O<H.length;O++)if(H[O].value===w.activeLabel){z=O;break}}var q=Ve(Ve({},G),{},{x:G.left,y:G.top}),ee=Math.min(I,q.x+q.width),B=Math.min(N,q.y+q.height),D=H[z]&&H[z].value,K=Q2(b.state,b.props.data,z),oe=H[z]?{x:T==="horizontal"?H[z].coordinate:ee,y:T==="horizontal"?B:H[z].coordinate}:wre;b.setState(Ve(Ve({},w),{},{activeLabel:D,activeCoordinate:oe,activePayload:K,activeTooltipIndex:z}))}else b.setState(w)}),Xt(b,"renderCursor",function(w){var k,T=b.state,M=T.isTooltipActive,j=T.activeCoordinate,C=T.activePayload,R=T.offset,I=T.activeTooltipIndex,N=T.tooltipAxisBandSize,z=b.getTooltipEventType(),V=(k=w.props.active)!==null&&k!==void 0?k:M,G=b.props.layout,H=w.key||"_recharts-cursor";return ae.createElement(wWe,{key:H,activeCoordinate:j,activePayload:C,activeTooltipIndex:I,chartName:r,element:w,isActive:V,layout:G,offset:R,tooltipAxisBandSize:N,tooltipEventType:z})}),Xt(b,"renderPolarAxis",function(w,k,T){var M=fa(w,"type.axisType"),j=fa(b.state,"".concat(M,"Map")),C=w.type.defaultProps,R=C!==void 0?Ve(Ve({},C),w.props):w.props,I=j&&j[R["".concat(M,"Id")]];return E.cloneElement(w,Ve(Ve({},I),{},{className:dr(M,I.className),key:w.key||"".concat(k,"-").concat(T),ticks:Od(I,!0)}))}),Xt(b,"renderPolarGrid",function(w){var k=w.props,T=k.radialLines,M=k.polarAngles,j=k.polarRadius,C=b.state,R=C.radiusAxisMap,I=C.angleAxisMap,N=oh(R),z=oh(I),V=z.cx,G=z.cy,H=z.innerRadius,O=z.outerRadius;return E.cloneElement(w,{polarAngles:Array.isArray(M)?M:Od(z,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(j)?j:Od(N,!0).map(function(q){return q.coordinate}),cx:V,cy:G,innerRadius:H,outerRadius:O,key:w.key||"polar-grid",radialLines:T})}),Xt(b,"renderLegend",function(){var w=b.state.formattedGraphicalItems,k=b.props,T=k.children,M=k.width,j=k.height,C=b.props.margin||{},R=M-(C.left||0)-(C.right||0),I=rte({children:T,formattedGraphicalItems:w,legendWidth:R,legendContent:c});if(!I)return null;var N=I.item,z=E8(I,kWe);return E.cloneElement(N,Ve(Ve({},z),{},{chartWidth:M,chartHeight:j,margin:C,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Xt(b,"renderTooltip",function(){var w,k=b.props,T=k.children,M=k.accessibilityLayer,j=ta(T,El);if(!j)return null;var C=b.state,R=C.isTooltipActive,I=C.activeCoordinate,N=C.activePayload,z=C.activeLabel,V=C.offset,G=(w=j.props.active)!==null&&w!==void 0?w:R;return E.cloneElement(j,{viewBox:Ve(Ve({},V),{},{x:V.left,y:V.top}),active:G,label:z,payload:G?N:[],coordinate:I,accessibilityLayer:M})}),Xt(b,"renderBrush",function(w){var k=b.props,T=k.margin,M=k.data,j=b.state,C=j.offset,R=j.dataStartIndex,I=j.dataEndIndex,N=j.updateId;return E.cloneElement(w,{key:w.key||"_recharts-brush",onChange:vx(b.handleBrushChange,w.props.onChange),data:M,x:dt(w.props.x)?w.props.x:C.left,y:dt(w.props.y)?w.props.y:C.top+C.height+C.brushBottom-(T.bottom||0),width:dt(w.props.width)?w.props.width:C.width,startIndex:R,endIndex:I,updateId:"brush-".concat(N)})}),Xt(b,"renderReferenceElement",function(w,k,T){if(!w)return null;var M=b,j=M.clipPathId,C=b.state,R=C.xAxisMap,I=C.yAxisMap,N=C.offset,z=w.type.defaultProps||{},V=w.props,G=V.xAxisId,H=G===void 0?z.xAxisId:G,O=V.yAxisId,q=O===void 0?z.yAxisId:O;return E.cloneElement(w,{key:w.key||"".concat(k,"-").concat(T),xAxis:R[H],yAxis:I[q],viewBox:{x:N.left,y:N.top,width:N.width,height:N.height},clipPathId:j})}),Xt(b,"renderActivePoints",function(w){var k=w.item,T=w.activePoint,M=w.basePoint,j=w.childIndex,C=w.isRange,R=[],I=k.props.key,N=k.item.type.defaultProps!==void 0?Ve(Ve({},k.item.type.defaultProps),k.item.props):k.item.props,z=N.activeDot,V=N.dataKey,G=Ve(Ve({index:j,dataKey:V,cx:T.x,cy:T.y,r:4,fill:RN(k.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Qt(z,!1)),aw(z));return R.push(x.renderActiveDot(z,G,"".concat(I,"-activePoint-").concat(j))),M?R.push(x.renderActiveDot(z,Ve(Ve({},G),{},{cx:M.x,cy:M.y}),"".concat(I,"-basePoint-").concat(j))):C&&R.push(null),R}),Xt(b,"renderGraphicChild",function(w,k,T){var M=b.filterFormatItem(w,k,T);if(!M)return null;var j=b.getTooltipEventType(),C=b.state,R=C.isTooltipActive,I=C.tooltipAxis,N=C.activeTooltipIndex,z=C.activeLabel,V=b.props.children,G=ta(V,El),H=M.props,O=H.points,q=H.isRange,ee=H.baseLine,B=M.item.type.defaultProps!==void 0?Ve(Ve({},M.item.type.defaultProps),M.item.props):M.item.props,D=B.activeDot,K=B.hide,oe=B.activeBar,_e=B.activeShape,ue=!!(!K&&R&&G&&(D||oe||_e)),ye={};j!=="axis"&&G&&G.props.trigger==="click"?ye={onClick:vx(b.handleItemMouseEnter,w.props.onClick)}:j!=="axis"&&(ye={onMouseLeave:vx(b.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:vx(b.handleItemMouseEnter,w.props.onMouseEnter)});var $e=E.cloneElement(w,Ve(Ve({},M.props),ye));function Se(Me){return typeof I.dataKey=="function"?I.dataKey(Me.payload):null}if(ue)if(N>=0){var ge,te;if(I.dataKey&&!I.allowDuplicatedCategory){var re=typeof I.dataKey=="function"?Se:"payload.".concat(I.dataKey.toString());ge=MC(O,re,z),te=q&&ee&&MC(ee,re,z)}else ge=O==null?void 0:O[N],te=q&&ee&&ee[N];if(_e||oe){var J=w.props.activeIndex!==void 0?w.props.activeIndex:N;return[E.cloneElement(w,Ve(Ve(Ve({},M.props),ye),{},{activeIndex:J})),null,null]}if(!yr(ge))return[$e].concat(Qp(b.renderActivePoints({item:M,activePoint:ge,basePoint:te,childIndex:N,isRange:q})))}else{var we,Ne=(we=b.getItemByXY(b.state.activeCoordinate))!==null&&we!==void 0?we:{graphicalItem:$e},je=Ne.graphicalItem,Pe=je.item,Z=Pe===void 0?w:Pe,ne=je.childIndex,fe=Ve(Ve(Ve({},M.props),ye),{},{activeIndex:ne});return[E.cloneElement(Z,fe),null,null]}return q?[$e,null,null]:[$e,null]}),Xt(b,"renderCustomized",function(w,k,T){return E.cloneElement(w,Ve(Ve({key:"recharts-customized-".concat(T)},b.props),b.state))}),Xt(b,"renderMap",{CartesianGrid:{handler:wx,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:wx},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:wx},YAxis:{handler:wx},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((v=y.id)!==null&&v!==void 0?v:A_("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=tee(b.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),b.state={},b}return IWe(x,g),AWe(x,[{key:"componentDidMount",value:function(){var v,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,_=v.children,b=v.data,w=v.height,k=v.layout,T=ta(_,El);if(T){var M=T.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,C=Q2(this.state,b,M,j),R=this.state.tooltipTicks[M].coordinate,I=(this.state.offset.top+w)/2,N=k==="horizontal",z=N?{x:R,y:I}:{y:R,x:I},V=this.state.formattedGraphicalItems.find(function(H){var O=H.item;return O.type.name==="Scatter"});V&&(z=Ve(Ve({},z),V.props.points[M].tooltipPosition),C=V.props.points[M].tooltipPayload);var G={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:j,activePayload:C,activeCoordinate:z};this.setState(G),this.renderCursor(T),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var b,w;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(v){PC([ta(v.children,El)],[ta(this.props.children,El)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=ta(this.props.children,El);if(v&&typeof v.props.shared=="boolean"){var _=v.props.shared?"axis":"item";return o.indexOf(_)>=0?_:s}return s}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var _=this.container,b=_.getBoundingClientRect(),w=RDe(b),k={chartX:Math.round(v.pageX-w.left),chartY:Math.round(v.pageY-w.top)},T=b.width/_.offsetWidth||1,M=this.inRange(k.chartX,k.chartY,T);if(!M)return null;var j=this.state,C=j.xAxisMap,R=j.yAxisMap,I=this.getTooltipEventType();if(I!=="axis"&&C&&R){var N=oh(C).scale,z=oh(R).scale,V=N&&N.invert?N.invert(k.chartX):null,G=z&&z.invert?z.invert(k.chartY):null;return Ve(Ve({},k),{},{xValue:V,yValue:G})}var H=C8(this.state,this.props.data,this.props.layout,M);return H?Ve(Ve({},k),H):null}},{key:"inRange",value:function(v,_){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,k=v/b,T=_/b;if(w==="horizontal"||w==="vertical"){var M=this.state.offset,j=k>=M.left&&k<=M.left+M.width&&T>=M.top&&T<=M.top+M.height;return j?{x:k,y:T}:null}var C=this.state,R=C.angleAxisMap,I=C.radiusAxisMap;if(R&&I){var N=oh(R);return a6({x:k,y:T},N)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,_=this.getTooltipEventType(),b=ta(v,El),w={};b&&_==="axis"&&(b.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var k=aw(this.props,this.handleOuterEvent);return Ve(Ve({},k),w)}},{key:"addListener",value:function(){gP.on(vP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){gP.removeListener(vP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,_,b){for(var w=this.state.formattedGraphicalItems,k=0,T=w.length;k<T;k++){var M=w[k];if(M.item===v||M.props.key===v.key||_===Bl(M.item.type)&&b===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,_=this.state.offset,b=_.left,w=_.top,k=_.height,T=_.width;return ae.createElement("defs",null,ae.createElement("clipPath",{id:v},ae.createElement("rect",{x:b,y:w,height:k,width:T})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(_,b){var w=P8(b,2),k=w[0],T=w[1];return Ve(Ve({},_),{},Xt({},k,T.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(_,b){var w=P8(b,2),k=w[0],T=w[1];return Ve(Ve({},_),{},Xt({},k,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[v])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(v){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[v])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(v){var _=this.state,b=_.formattedGraphicalItems,w=_.activeItem;if(b&&b.length)for(var k=0,T=b.length;k<T;k++){var M=b[k],j=M.props,C=M.item,R=C.type.defaultProps!==void 0?Ve(Ve({},C.type.defaultProps),C.props):C.props,I=Bl(C.type);if(I==="Bar"){var N=(j.data||[]).find(function(H){return uVe(v,H)});if(N)return{graphicalItem:M,payload:N}}else if(I==="RadialBar"){var z=(j.data||[]).find(function(H){return a6(v,H)});if(z)return{graphicalItem:M,payload:z}}else if(eT(M,w)||tT(M,w)||Ly(M,w)){var V=ZUe({graphicalItem:M,activeTooltipItem:w,itemData:R.data}),G=R.activeIndex===void 0?V:R.activeIndex;return{graphicalItem:Ve(Ve({},M),{},{childIndex:G}),payload:Ly(M,w)?R.data[V]:M.props.data[V]}}}return null}},{key:"render",value:function(){var v=this;if(!YV(this))return null;var _=this.props,b=_.children,w=_.className,k=_.width,T=_.height,M=_.style,j=_.compact,C=_.title,R=_.desc,I=E8(_,TWe),N=Qt(I,!1);if(j)return ae.createElement(p8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement(jC,Pv({},N,{width:k,height:T,title:C,desc:R}),this.renderClipPath(),ZV(b,this.renderMap)));if(this.props.accessibilityLayer){var z,V;N.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,N.role=(V=this.props.role)!==null&&V!==void 0?V:"application",N.onKeyDown=function(H){v.accessibilityManager.keyboardEvent(H)},N.onFocus=function(){v.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return ae.createElement(p8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement("div",Pv({className:dr("recharts-wrapper",w),style:Ve({position:"relative",cursor:"default",width:k,height:T},M)},G,{ref:function(O){v.container=O}}),ae.createElement(jC,Pv({},N,{width:k,height:T,title:C,desc:R,style:zWe}),this.renderClipPath(),ZV(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(E.Component);return Xt(m,"displayName",r),Xt(m,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Xt(m,"getDerivedStateFromProps",function(g,x){var y=g.dataKey,v=g.data,_=g.children,b=g.width,w=g.height,k=g.layout,T=g.stackOffset,M=g.margin,j=x.dataStartIndex,C=x.dataEndIndex;if(x.updateId===void 0){var R=A8(g);return Ve(Ve(Ve({},R),{},{updateId:0},p(Ve(Ve({props:g},R),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:v,prevWidth:b,prevHeight:w,prevLayout:k,prevStackOffset:T,prevMargin:M,prevChildren:_})}if(y!==x.prevDataKey||v!==x.prevData||b!==x.prevWidth||w!==x.prevHeight||k!==x.prevLayout||T!==x.prevStackOffset||!Zh(M,x.prevMargin)){var I=A8(g),N={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},z=Ve(Ve({},C8(x,v,k)),{},{updateId:x.updateId+1}),V=Ve(Ve(Ve({},I),N),z);return Ve(Ve(Ve({},V),p(Ve({props:g},V),x)),{},{prevDataKey:y,prevData:v,prevWidth:b,prevHeight:w,prevLayout:k,prevStackOffset:T,prevMargin:M,prevChildren:_})}if(!PC(_,x.prevChildren)){var G,H,O,q,ee=ta(_,Vp),B=ee&&(G=(H=ee.props)===null||H===void 0?void 0:H.startIndex)!==null&&G!==void 0?G:j,D=ee&&(O=(q=ee.props)===null||q===void 0?void 0:q.endIndex)!==null&&O!==void 0?O:C,K=B!==j||D!==C,oe=!yr(v),_e=oe&&!K?x.updateId:x.updateId+1;return Ve(Ve({updateId:_e},p(Ve(Ve({props:g},x),{},{updateId:_e,dataStartIndex:B,dataEndIndex:D}),x)),{},{prevChildren:_,dataStartIndex:B,dataEndIndex:D})}return null}),Xt(m,"renderActiveDot",function(g,x,y){var v;return E.isValidElement(g)?v=E.cloneElement(g,x):lr(g)?v=g(x):v=ae.createElement(BN,x),ae.createElement(Wr,{className:"recharts-active-dot",key:y},v)}),function(x){return ae.createElement(m,x)}},QWe=Tre({chartName:"BarChart",GraphicalChild:Tf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:lT},{axisType:"yAxis",AxisComp:cT}],formatAxisMap:O6e}),ZWe=Tre({chartName:"PieChart",GraphicalChild:cc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Jk},{axisType:"radiusAxis",AxisComp:Qk}],formatAxisMap:N4e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const JWe={DollarSign:lhe,Users:Ub,TrendingUp:qq,Shield:ca,Zap:$O,Settings:Kq,Database:qv},eGe=({content:e})=>{const t=(r,n)=>{var i,s,a,o;switch(r.type){case"heading":return u.jsx("h2",{className:"text-3xl font-bold mb-6 text-black border-b-2 border-black pb-2",children:r.content},n);case"subheading":return u.jsx("h3",{className:"text-2xl font-semibold mb-4 text-black",children:r.content},n);case"paragraph":return u.jsx("p",{className:"text-gray-800 mb-6 leading-relaxed text-lg",children:r.content},n);case"list":return u.jsx("ul",{className:"list-disc list-inside mb-6 space-y-2",children:(i=r.items)==null?void 0:i.map((c,f)=>u.jsx("li",{className:"text-gray-800 leading-relaxed",children:c},f))},n);case"icon-list":return u.jsx("div",{className:"grid gap-4 mb-8",children:(s=r.items)==null?void 0:s.map((c,f)=>{const d=[ca,$O,Kq,qv],h=d[f%d.length];return u.jsx(sn,{className:"border-2 border-black",children:u.jsxs(an,{className:"p-4 flex items-start space-x-4",children:[u.jsx("div",{className:"bg-black p-2 rounded-lg",children:u.jsx(h,{className:"h-6 w-6 text-white"})}),u.jsx("p",{className:"text-gray-800 leading-relaxed flex-1",children:c})]})},f)})},n);case"bibliography":return u.jsx("div",{className:"mb-8",children:u.jsx("ol",{className:"list-none space-y-3",children:(a=r.items)==null?void 0:a.map((c,f)=>u.jsx("li",{className:"text-gray-800 leading-relaxed text-sm bg-gray-50 p-3 rounded border-l-4 border-black",children:c},f))})},n);case"stats":return u.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:(o=r.statsData)==null?void 0:o.map((c,f)=>{const d=JWe[c.icon]||qq;return u.jsx(sn,{className:"border-2 border-black text-center",children:u.jsxs(an,{className:"p-6",children:[u.jsx("div",{className:"bg-black p-3 rounded-full inline-block mb-4",children:u.jsx(d,{className:"h-8 w-8 text-white"})}),u.jsx("div",{className:"text-3xl font-bold text-black mb-2",children:c.value}),u.jsx("div",{className:"text-gray-700 font-medium",children:c.label})]})},f)})},n);case"chart":if(!r.chartData)return null;const l=["#000000","#666666","#999999","#CCCCCC"];return u.jsx(sn,{className:"border-2 border-black mb-8",children:u.jsxs(an,{className:"p-6",children:[u.jsx("h4",{className:"text-xl font-semibold mb-4 text-black text-center",children:r.chartData.title}),u.jsx("div",{className:"h-64 w-full",children:r.chartData.title.includes("Market Growth")?u.jsx(XU,{width:"100%",height:"100%",children:u.jsxs(QWe,{data:r.chartData.data,children:[u.jsx(lT,{dataKey:"name",stroke:"#000"}),u.jsx(cT,{stroke:"#000"}),u.jsx(Tf,{dataKey:"value",fill:"#000000"})]})}):u.jsx(XU,{width:"100%",height:"100%",children:u.jsx(ZWe,{children:u.jsx(cc,{data:r.chartData.data,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:c=>`${c.name}: ${c.value}%`,children:r.chartData.data.map((c,f)=>u.jsx(Dk,{fill:l[f%l.length]},`cell-${f}`))})})})})]})},n);case"table":return r.tableData?u.jsx(sn,{className:"border-2 border-black mb-8 overflow-hidden",children:u.jsx(an,{className:"p-0",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-black text-white",children:u.jsx("tr",{children:r.tableData.headers.map((c,f)=>u.jsx("th",{className:"p-4 text-left font-semibold",children:c},f))})}),u.jsx("tbody",{children:r.tableData.rows.map((c,f)=>u.jsx("tr",{className:f%2===0?"bg-gray-50":"bg-white",children:c.map((d,h)=>u.jsx("td",{className:"p-4 border-b border-gray-200",children:d},h))},f))})]})})},n):null;case"quote":return u.jsx(sn,{className:"border-2 border-black bg-black text-white mb-8",children:u.jsx(an,{className:"p-8 text-center",children:u.jsxs("blockquote",{className:"text-xl italic font-medium",children:['"',r.content,'"']})})},n);default:return null}};return u.jsx("div",{className:"prose prose-lg max-w-none",children:e.map((r,n)=>t(r,n))})},tGe=()=>{const{slug:e}=YO(),t=ah.find(r=>r.slug===e);return t?u.jsxs(bi,{children:[u.jsx(xf,{title:`${t.title} - WRLDS`,description:t.metaDescription||t.excerpt,imageUrl:t.imageUrl,keywords:t.keywords,isBlogPost:!0,publishDate:new Date(t.date).toISOString(),author:t.author,category:t.category,type:"article"}),u.jsxs("article",{className:"w-full pt-16 pb-16",children:[u.jsxs("div",{className:"banner-container h-96 sm:h-[450px] md:h-[500px] lg:h-[550px] relative",children:[t.imageUrl&&u.jsx("img",{src:t.imageUrl,alt:t.title,className:"absolute inset-0 w-full h-full object-cover filter grayscale"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/60 to-black/80"}),u.jsx("div",{className:"banner-overlay",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 w-full h-full flex items-center justify-start md:justify-center",children:u.jsxs("div",{className:"w-full max-w-4xl mx-auto text-left md:text-center",children:[u.jsxs(Tn,{to:"/blog",className:"inline-flex items-center text-gray-300 hover:text-white mb-4 transition-colors text-sm",children:[u.jsx(du,{className:"mr-2 h-3 w-3"}),"Back to Blog"]}),u.jsx("h1",{className:"text-white text-xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 leading-tight break-words max-w-full",children:t.title}),u.jsxs("div",{className:"flex flex-col gap-3 text-gray-300 mb-4 sm:mb-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-start md:justify-center gap-2 sm:gap-6",children:[u.jsxs("div",{className:"flex items-center text-xs sm:text-base",children:[u.jsx(ihe,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),u.jsx("span",{children:t.date})]}),u.jsxs("div",{className:"flex items-center text-xs sm:text-base",children:[u.jsx(H1,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),u.jsx("span",{children:t.author})]})]}),u.jsx("div",{className:"flex justify-start md:justify-center",children:u.jsx("div",{className:"px-3 py-1 sm:px-4 sm:py-2 bg-white/15 backdrop-blur-sm rounded-full text-xs sm:text-sm font-medium border border-white/20",children:t.category})})]}),u.jsx("p",{className:"text-gray-200 text-sm sm:text-lg md:text-xl leading-relaxed max-w-3xl mx-auto font-light",children:t.excerpt})]})})})]}),u.jsx("div",{className:"container mx-auto px-4 py-8 sm:py-12 md:py-16",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx(eGe,{content:t.content})})})]})]}):u.jsx(bi,{children:u.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Post Not Found"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"The blog post you're looking for doesn't exist."}),u.jsx(Tn,{to:"/blog",children:u.jsxs(ln,{variant:"outline",children:[u.jsx(du,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})})},rGe=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState({}),i=E.useRef(null),s=a=>{n(o=>({...o,[a]:!o[a]}))};return E.useEffect(()=>{const a=new IntersectionObserver(o=>{o[0].isIntersecting?t(!0):t(!1)},{threshold:.6,rootMargin:"-50px 0px -50px 0px"});return i.current&&a.observe(i.current),()=>a.disconnect()},[]),u.jsxs(bi,{children:[u.jsx(xf,{title:"Identiteettiturva - Turvaa rahasi ja henkiltietosi",description:"Kattava identiteettiturva joka havaitsee tietovuodot, tarjoaa vakuutusturvan 13 500  asti ja suojaa huijauksilta."}),u.jsxs("div",{className:"min-h-screen relative",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(
              to bottom,
              transparent 0%,
              transparent 18%,
              rgba(30, 58, 138, 0.2) 23%,
              rgba(30, 58, 138, 0.4) 28%,
              rgba(30, 58, 138, 0.6) 33%,
              rgba(30, 58, 138, 0.8) 38%,
              rgba(30, 58, 138, 0.9) 43%,
              rgba(30, 58, 138, 0.95) 48%,
              rgba(30, 58, 138, 1) 53%,
              rgba(30, 58, 138, 0.7) 58%,
              rgba(30, 58, 138, 0.4) 63%,
              rgba(30, 58, 138, 0.2) 68%,
              rgba(30, 58, 138, 0.1) 73%,
              rgba(30, 58, 138, 0.05) 78%,
              transparent 83%,
              transparent 88%,
              transparent 100%
            )`,zIndex:-1}}),u.jsx("div",{className:"container mx-auto px-4 py-24",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"mb-8",children:u.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Turvaa rahasi ja henkiltietosi helposti yhdell ratkaisulla"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start space-x-4",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Havaitsee jos tietosi joutuvat vriin ksiin"}),u.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Palvelu monitoroi ja ilmoittaa, mikli tietojasi ptyy verkossa vriin ksiin."})]})}),u.jsx("div",{className:"flex items-start space-x-4",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Vakuutusturva 13 500  asti"}),u.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Korvaa taloudelliset vahingot ilman omavastuuta."})]})}),u.jsx("div",{className:"flex items-start space-x-4",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Kattaa mys huijaukset"}),u.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Suojaa tietojenkalastelun, petosten ja vrinkytsten seurauksilta, 0  omavastuu."})]})})]}),u.jsx("div",{className:"mt-8",children:u.jsx("a",{href:"/verkkokauppa",className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity",style:{background:"var(--gradient-navy)"},children:"Verkkokauppaan"})})]}),u.jsx("div",{className:"hidden lg:block"})]})}),u.jsxs("div",{className:"container mx-auto px-4 py-24",children:[u.jsx("div",{className:"text-center mb-32",children:u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Kuinka henkilsuoja sitten toimii?"})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ymprivuorokautinen tietosuoja"}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Henkilsuoja valvoo trkeimpi tietojasi, kuten puhelinnumeroa, shkpostia, henkiltunnusta, passia ja maksukortteja ympri vuorokauden."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Hlytys heti, jos tietosi vuotavat"}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Se tarkistaa ne jatkuvasti tietovuototietokannoista ja dark webist. Jos tietojasi lytyy, saat heti hlytyksen ja selket ohjeet vahinkojen estmiseksi."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Taloudellinen turva vahinkotilanteissa"}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Koska nettirikolliset kehittyvt jatkuvasti eik mikn palvelu ole tysin aukoton, tuotteeseemme sisltyy mys vakuutus, joka tarjoaa taloudellista turvaa vahinkotilanteissa."})]})]}),u.jsx("div",{className:"hidden lg:block"})]})})]}),u.jsx("div",{className:"relative py-24 px-6 lg:px-12",children:u.jsx("div",{className:"relative py-24",children:u.jsx("div",{className:"relative container mx-auto px-4",children:u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Identiteetti on nykyajan valuutta"}),u.jsx("h3",{className:"text-2xl lg:text-3xl font-semibold text-foreground mt-6 mb-8",children:"Yksi tietovuoto voi maksaa tuhansia euroja"}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("p",{className:"text-lg text-foreground leading-relaxed mb-12",children:"Verkkorikollisuus, tietovuodot ja identiteettivarkaudet ovat yleistyneet merkittvsti viime vuosina. Jo pelkn shkpostiosoitteen ja salasanan avulla rikolliset voivat saada psyn henkilkohtaisiin tileihisi, tehd ostoksia nimisssi tai hakea lainaa luvattomasti. Digitaalinen identiteetti on nyky-yhteiskunnassa arvokas resurssi ja sen vrinkytt voi aiheuttaa vakavia taloudellisia sek juridisia seurauksia. Siksi yksiln tunnistetietojen suojaaminen tulisi nhd yht trken kuin pankkitunnusten turvaaminen."}),u.jsxs("div",{className:"flex flex-col lg:flex-row justify-center space-y-6 lg:space-y-0 lg:space-x-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md mx-auto lg:mx-0",children:[u.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"62,9M "}),u.jsx("p",{className:"text-white text-sm",children:"Vuonna 2024 suomalaiset menettivt nettihuijauksiin 62,9 miljoonaa euroa, joka on 40 % enemmn kuin vuonna 2023, jolloin summa oli 44,2 miljoonaa euroa."}),u.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md mx-auto lg:mx-0",children:[u.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"107,8M "}),u.jsx("p",{className:"text-white text-sm",children:"Yritettyj huijausyrityksi oli 107,2 milj. euroa vuonna 2024, kun taas pankit onnistuivat estmn ja palauttamaan 44,3 milj. euroa."}),u.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-950 to-blue-900 rounded-2xl py-8 px-4 text-center max-w-md mx-auto lg:mx-0",children:[u.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"70%"}),u.jsx("p",{className:"text-white text-sm",children:"Lhes 70 % suomalaisista on ollut digihuijausten uhreja tai kohdannut yrityksi, joissa heit on yritetty huijata."}),u.jsx("p",{className:"text-white/80 text-xs mt-2",children:"* Finanssiala ry"})]})]})]})]})})})}),u.jsxs("div",{className:"w-full py-16 mb-16 relative",children:[u.jsxs("div",{className:"absolute inset-0 w-full h-full z-0",children:[u.jsx("img",{src:"/lovable-uploads/iStock-1394172078.jpg",alt:"Scam Cases Background",className:"w-full h-full object-cover object-top"}),u.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),u.jsxs("div",{className:"relative z-20",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold text-white leading-tight",children:["Esimerkkitapauksia",u.jsx("br",{}),"identiteettivarkaudesta"]})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 gap-10 items-start",children:[u.jsxs(mt.div,{className:`p-6 rounded-2xl cursor-pointer transition-all duration-300 ${r.tietojenkalastelu?"w-full max-w-4xl bg-transparent border border-white/20 shadow-lg":"w-full max-w-2xl"} justify-self-start mr-auto`,initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut"},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("tietojenkalastelu"),children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Tietojenkalastelu"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.tietojenkalastelu?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),u.jsx("div",{className:"overflow-hidden",children:r.tietojenkalastelu&&u.jsx(mt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Nina sai aidolta nyttvn shkpostin pankiltaan. Hn klikkasi viestiss ollutta linkki ja kirjautui sisn sivulle, joka olikin huijaussivusto. Tietojen avulla rikollinen otti hnen nimissn kolme pikavippi (yhteens 11 200), vaihdatutti hnen postiosoitteensa sek puhelinnumeronsa ja yritti avata verkkopankkitilej ja maksukortteja. Palveluun sisltyv vakuutus korvaa jopa 13 500  taloudelliset menetykset ja asiantuntijat auttavat asian lpivienniss."})})]}),u.jsxs(mt.div,{className:`p-6 rounded-2xl cursor-pointer transition-all duration-300 -mt-16 ${r.verkkokauppahuijaus?"w-full max-w-4xl bg-transparent border border-white/20 shadow-lg":"w-full max-w-2xl"} justify-self-end ml-auto`,initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.2},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("verkkokauppahuijaus"),children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Verkkokauppahuijaus"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.verkkokauppahuijaus?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),u.jsx("div",{className:"overflow-hidden",children:r.verkkokauppahuijaus&&u.jsx(mt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Timo lysi verkosta edullisen tarjouksen uusista kuulokkeista tunnetulta brndilt. Hinta oli lhes puolet halvempi kuin muualla, ja verkkosivusto nytti aidolla. Logo, arvostelut ja maksutavat kaikki kunnossa. Hn maksoi 129  pankkikortilla. Tilauksen jlkeen tuotetta ei koskaan saapunut ja verkkokauppa katosi muutamassa pivss. Koska ostoksen hinta oli 50-700  vlill, Timo saa rahansa takaisin verkkokauppahuijaukset kattavan vakuutuksen ansiosta."})})]}),u.jsxs(mt.div,{className:`p-6 rounded-2xl cursor-pointer transition-all duration-300 ${r.sovellushankinnat?"w-full max-w-4xl bg-transparent border border-white/20 shadow-lg":"w-full max-w-2xl"} justify-self-start mr-auto`,initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.4},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("sovellushankinnat"),children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sovellushankinnat"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.sovellushankinnat?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),u.jsx("div",{className:"overflow-hidden",children:r.sovellushankinnat&&u.jsx(mt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Sannan 9-vuotias poika sai pelata hetken idin puhelimella. Hn latasi vahingossa pelisovelluksen, joka nytti ilmaiselta mutta sislsi kalliin 112 euron tilauksen. Maksu veloittui heti, koska maksukortti oli tallennettuna puhelimeen. Vakuutus korvaa kulut, jotka liittyvt alle 10-vuotiaan vahingossa tekemiin sovellusostoihin (alle 135 ) suurimmilla alustoilla, kuten mm. App Storessa, Google Playssa tai Steamissa."})})]}),u.jsxs(mt.div,{className:`p-6 rounded-2xl cursor-pointer transition-all duration-300 -mt-16 ${r.nettikiusaaminen?"w-full max-w-4xl bg-transparent border border-white/20 shadow-lg":"w-full max-w-2xl"} justify-self-end ml-auto`,initial:{opacity:0,y:20},animate:{opacity:1,y:[-4,4,-4]},transition:{opacity:{duration:.8,ease:"easeOut",delay:.6},y:{duration:4,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}},onClick:()=>s("nettikiusaaminen"),children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-900/80 rounded-lg flex items-center justify-center shadow-lg mx-auto mb-2",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Nettikiusaaminen"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r.nettikiusaaminen?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),u.jsx("div",{className:"overflow-hidden",children:r.nettikiusaaminen&&u.jsx(mt.p,{className:"text-white leading-relaxed",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Emilia joutui nettikiusaaminen kohteeksi sen jlkeen, kun hnen TikTok-videonsa levisi ylltten laajalle. Tuntemattomat ihmiset alkoivat kommentoida videoita loukkaavasti ja joku perusti tekaistun tilin hnen nimelln ja profiilikuvallaan. Vrennetyll tilill julkaistiin sislt, joka sai Emilian nyttmn nololta. Hn saa asiantuntijoilta neuvoja ja apuja (25 h) sislln poistoon ja tilien palautukseen. Tarvittaessa hnen kytss on mys oikeudellinen tuki ja psykologinen kriisiapu."})})]})]})})]})]}),u.jsxs("div",{className:"container mx-auto px-4 py-24",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white leading-tight",children:"Vakuutus - 0 omavastuulla"})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Taloudelliset tappiot"}),u.jsx("p",{className:"text-white leading-relaxed",children:"Premium-tason vakuutuksemme korvaa kyberhykkyksen aiheuttamat taloudelliset vahingot aina 13 500 euroon saakka. Tm koskee muun muassa huijauksia, kuten shkpostin, puheluiden tai tekstiviestien kautta tapahtuvaa tietojen kalastelua, sek tilanteita, joissa sinut on johdettu vrennetylle verkkosivulle. Jos rikollinen on saanut haltuunsa esimerkiksi verkkopankkitunnuksesi, mobiilivarmenteesi tai muita arkaluontoisia tietoja ja kyttnyt niit rahallisen vahingon aiheuttamiseen, vakuutus auttaa kattamaan menetykset."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Suoja sovellusostoksille"}),u.jsx("p",{className:"text-white leading-relaxed",children:"Jos alle 10-vuotias lapsi kotitaloudessasi tekee vahingossa tai ilman lupaa sovellusten tai sovellusten sisisi ostoksia esimerkiksi App Storesta, Google Playsta, Playstation Storesta, Microsoft Storesta tai Steamista, vakuutus korvaa kulut aina 135 euroon asti."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Turva verkko-ostoksille"}),u.jsx("p",{className:"text-white leading-relaxed",children:"Jos ostat tuotteen verkosta tai yksityiselt myyjlt 50700 euron hintaluokassa ja saat vrn tuotteen, toimituksesta puuttuu osa tavaroista tai lhetyst ei saavu lainkaan, vakuutus maksaa sinulle korvauksen."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-4,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-2,scale:1.005,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"SIM-kortin vrinkytn suoja"}),u.jsx("p",{className:"text-white leading-relaxed",children:"Jos puhelimesi tai tablettisi varastetaan ja SIM-korttiasi kytetn luvatta, vakuutus kattaa aiheutuneet kustannukset jopa 135 euroon asti. Suoja on voimassa enintn 48 tuntia varkauden jlkeen."})]})]})})]}),u.jsxs("div",{className:"container mx-auto px-4 py-32",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Saat tukea mys muutenkin kuin taloudellisesti"})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Tietojen suoja"}),u.jsx("p",{className:"text-foreground leading-relaxed",children:"Valvo henkilkohtaisia tietojasi ja saa ilmoituksia, jos ne ptyvt luvattomiin ksiin. Se seuraa puhelinnumeroita, shkposteja, henkiltunnuksia sek pankki- ja korttitietoja ja ohjeistaa tietovuotojen estmisess."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Psyykkinen tuki"}),u.jsx("p",{className:"text-foreground leading-relaxed",children:"Kriisiapu kyberhykkyksen seurauksena, jopa 1 350  saakka."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Nettikiusaamistuki"}),u.jsx("p",{className:"text-foreground leading-relaxed",children:"25 h ohjausta ja neuvoja ei-toivotun sislln levimisen estmiseen sek vrennettyjen profiilien ja hakkeroitujen tilien hallinnan palauttamiseen."})]}),u.jsxs(mt.div,{className:"bg-transparent border border-white/20 rounded-2xl p-8 cursor-pointer",initial:{y:0,scale:1},animate:{y:0,scale:1},whileHover:{y:-8,scale:1.02,transition:{duration:.15,ease:"easeOut"}},whileTap:{y:-4,scale:1.01,transition:{duration:.1,ease:"easeOut"}},transition:{duration:.2,ease:"easeOut"},children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Oikeusapu"}),u.jsx("p",{className:"text-foreground leading-relaxed",children:"Oikeudellinen apu suomalaiselta asianajajalta, vakuutettu 135 000  saakka tietyiss tilanteissa."})]})]})})]}),u.jsxs("div",{className:"container mx-auto py-24 relative",children:[u.jsxs("div",{className:"absolute inset-0 w-full h-full z-0",children:[u.jsx("img",{src:"/lovable-uploads/iStock-2222199654.jpg",alt:"Identity Protection Background",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-white/80"})]}),u.jsxs("div",{className:"relative z-20",children:[u.jsxs("div",{className:"text-center mb-16 relative z-10",children:[u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight mb-6",children:"Valitse suojaksesi"}),u.jsx("p",{className:"text-lg text-muted-foreground",children:"Jokaisessa tilauksessa on 14vrk maksuton peruutosoikeus."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto relative z-10",children:[u.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilsuoja Yhdelle"}),u.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"21,99 /kk"}),u.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[u.jsx("li",{children:" Tietojen monitorointi ja ilmoitus tietovuodoista"}),u.jsx("li",{children:" Vakuutus, joka turvaa sinut vahinkojen varalta"}),u.jsx("li",{children:" Apu ja tuki"})]}),u.jsx("button",{onClick:()=>{const a={id:"henkilosuoja-yhdelle",name:"Henkilsuoja Yhdelle",price:21.99,type:"subscription"},o=JSON.parse(localStorage.getItem("cart")||"[]");o.push(a),localStorage.setItem("cart",JSON.stringify(o)),window.location.href="/verkkokauppa"},className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity cursor-pointer",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]}),u.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilsuoja Tupla"}),u.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"28,99 /kk"}),u.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[u.jsx("li",{children:" Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek lheisellesi"}),u.jsx("li",{children:" Vakuutus, joka turvaa sinut ja lheisesi vahinkojen varalta"}),u.jsx("li",{children:" Apu ja tuki"})]}),u.jsx("button",{onClick:()=>{const a={id:"henkilosuoja-tupla",name:"Henkilsuoja Tupla",price:28.99,type:"subscription"},o=JSON.parse(localStorage.getItem("cart")||"[]");o.push(a),localStorage.setItem("cart",JSON.stringify(o)),window.location.href="/verkkokauppa"},className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity cursor-pointer",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]}),u.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Henkilsuoja Perhe"}),u.jsx("div",{className:"text-4xl font-bold text-primary mb-6",children:"32,99 /kk"}),u.jsxs("ul",{className:"space-y-3 text-muted-foreground mb-8",children:[u.jsx("li",{children:" Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek koko perheellesi"}),u.jsx("li",{children:" Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta"}),u.jsx("li",{children:" Apu ja tuki"})]}),u.jsx("button",{onClick:()=>{const a={id:"henkilosuoja-perhe",name:"Henkilsuoja Perhe",price:32.99,type:"subscription"},o=JSON.parse(localStorage.getItem("cart")||"[]");o.push(a),localStorage.setItem("cart",JSON.stringify(o)),window.location.href="/verkkokauppa"},className:"inline-flex items-center justify-center px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity cursor-pointer",style:{background:"var(--gradient-navy)"},children:"Suojaa laite"})]})]})]})]}),u.jsxs("div",{className:"container mx-auto px-4 py-24",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Usein kysyttyj kysymyksi"})}),u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx(mt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},onClick:()=>s("faq1"),children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Onko tietosuoja pakollinen?"}),u.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq1?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("div",{className:"overflow-hidden",children:r.faq1&&u.jsx(mt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Ei, henkiltietojen suojaaminen ei ole lain mukaan pakollista yksityishenkilille, mutta se on erittin suositeltavaa, koska tietomurrot ja huijaukset ovat yleistyneet merkittvsti."})})]})}),u.jsx(mt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.1},onClick:()=>s("faq2"),children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-xl font-bold text-foreground",children:"On mys ilmaisia tietoturvapalveluita  miksi maksaisin tst?"}),u.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq2?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("div",{className:"overflow-hidden",children:r.faq2&&u.jsx(mt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Ilmaiset palvelut tarjoavat yleens vain rajallista seurantaa, eivtk sisll esimerkiksi vakuutusturvaa, reaaliaikaista hlytyst tai asiantuntijan toimintaohjeita. Maksullinen palvelu tarjoaa laajemman suojan ja konkreettista apua vahinkotilanteissa."})})]})}),u.jsx(mt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.2},onClick:()=>s("faq3"),children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Jos tietoni lytyvt verkosta, voitteko poistaa ne?"}),u.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq3?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("div",{className:"overflow-hidden",children:r.faq3&&u.jsx(mt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Kaikkia tietoja ei valitettavasti voida poistaa, jos ne ovat jo ptyneet rikollisille. Palvelumme kuitenkin opastaa, miten minimoit riskit ja estt tietojen vrinkytn."})})]})}),u.jsx(mt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.3},onClick:()=>s("faq4"),children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Miten usein tietojani tarkastetaan?"}),u.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq4?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("div",{className:"overflow-hidden",children:r.faq4&&u.jsx(mt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Tietoja seurataan jatkuvasti eri lhteist, ja mahdollisista havainnoista ilmoitetaan heti."})})]})}),u.jsx(mt.div,{className:"bg-card border border-border rounded-2xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.4},onClick:()=>s("faq5"),children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Voiko palvelu est huijauksen tapahtumasta?"}),u.jsx("svg",{className:`w-6 h-6 text-foreground transition-transform duration-200 ${r.faq5?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("div",{className:"overflow-hidden",children:r.faq5&&u.jsx(mt.p,{className:"text-muted-foreground leading-relaxed mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:"Palvelu ei voi est kaikkia hykkyksi, mutta se voi havaita riskit ajoissa ja antaa selket ohjeet, joilla voit est tai minimoida vahingot."})})]})})]})})]})]})]})};var D_=e=>e.type==="checkbox",$d=e=>e instanceof Date,vs=e=>e==null;const Mre=e=>typeof e=="object";var Jn=e=>!vs(e)&&!Array.isArray(e)&&Mre(e)&&!$d(e),Sre=e=>Jn(e)&&e.target?D_(e.target)?e.target.checked:e.target.value:e,nGe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Pre=(e,t)=>e.has(nGe(t)),iGe=e=>{const t=e.constructor&&e.constructor.prototype;return Jn(t)&&t.hasOwnProperty("isPrototypeOf")},GN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Is(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(GN&&(e instanceof Blob||e instanceof FileList))&&(r||Jn(e)))if(t=r?[]:{},!r&&!iGe(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=Is(e[n]));else return e;return t}var dT=e=>Array.isArray(e)?e.filter(Boolean):[],Vn=e=>e===void 0,lt=(e,t,r)=>{if(!t||!Jn(e))return r;const n=dT(t.split(/[,[\].]+?/)).reduce((i,s)=>vs(i)?i:i[s],e);return Vn(n)||n===e?Vn(e[t])?r:e[t]:n},Ca=e=>typeof e=="boolean",HN=e=>/^\w*$/.test(e),Ere=e=>dT(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Br=(e,t,r)=>{let n=-1;const i=HN(t)?[t]:Ere(t),s=i.length,a=s-1;for(;++n<s;){const o=i[n];let l=r;if(n!==a){const c=e[o];l=Jn(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(o==="__proto__")return;e[o]=l,e=e[o]}return e};const i1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_o={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_l={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jre=ae.createContext(null),fT=()=>ae.useContext(jre),sGe=e=>{const{children:t,...r}=e;return ae.createElement(jre.Provider,{value:r},t)};var Cre=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==_o.all&&(t._proxyFormState[a]=!n||_o.all),r&&(r[a]=!0),e[a]}});return i},Ds=e=>Jn(e)&&!Object.keys(e).length,Are=(e,t,r,n)=>{r(e);const{name:i,...s}=e;return Ds(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!n||_o.all))},Ev=e=>Array.isArray(e)?e:[e],Ore=(e,t,r)=>!e||!t||e===t||Ev(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n)));function KN(e){const t=ae.useRef(e);t.current=e,ae.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function aGe(e){const t=fT(),{control:r=t.control,disabled:n,name:i,exact:s}=e||{},[a,o]=ae.useState(r._formState),l=ae.useRef(!0),c=ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=ae.useRef(i);return f.current=i,KN({disabled:n,next:d=>l.current&&Ore(f.current,d.name,s)&&Are(d,c.current,r._updateFormState)&&o({...r._formState,...d}),subject:r._subjects.state}),ae.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),Cre(a,r,c.current,!1)}var Qo=e=>typeof e=="string",$re=(e,t,r,n,i)=>Qo(e)?(n&&t.watch.add(e),lt(r,e,i)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),lt(r,s))):(n&&(t.watchAll=!0),r);function oGe(e){const t=fT(),{control:r=t.control,name:n,defaultValue:i,disabled:s,exact:a}=e||{},o=ae.useRef(n);o.current=n,KN({disabled:s,subject:r._subjects.values,next:f=>{Ore(o.current,f.name,a)&&c(Is($re(o.current,r._names,f.values||r._formValues,!1,i)))}});const[l,c]=ae.useState(r._getWatch(n,i));return ae.useEffect(()=>r._removeUnmounted()),l}function lGe(e){const t=fT(),{name:r,disabled:n,control:i=t.control,shouldUnregister:s}=e,a=Pre(i._names.array,r),o=oGe({control:i,name:r,defaultValue:lt(i._formValues,r,lt(i._defaultValues,r,e.defaultValue)),exact:!0}),l=aGe({control:i,name:r,exact:!0}),c=ae.useRef(i.register(r,{...e.rules,value:o,...Ca(e.disabled)?{disabled:e.disabled}:{}}));return ae.useEffect(()=>{const f=i._options.shouldUnregister||s,d=(h,p)=>{const m=lt(i._fields,h);m&&m._f&&(m._f.mount=p)};if(d(r,!0),f){const h=Is(lt(i._options.defaultValues,r));Br(i._defaultValues,r,h),Vn(lt(i._formValues,r))&&Br(i._formValues,r,h)}return()=>{(a?f&&!i._state.action:f)?i.unregister(r):d(r,!1)}},[r,i,a,s]),ae.useEffect(()=>{lt(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:lt(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:o,...Ca(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:ae.useCallback(f=>c.current.onChange({target:{value:Sre(f),name:r},type:i1.CHANGE}),[r]),onBlur:ae.useCallback(()=>c.current.onBlur({target:{value:lt(i._formValues,r),name:r},type:i1.BLUR}),[r,i]),ref:ae.useCallback(f=>{const d=lt(i._fields,r);d&&f&&(d._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:h=>f.setCustomValidity(h),reportValidity:()=>f.reportValidity()})},[i._fields,r])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!lt(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!lt(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!lt(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!lt(l.validatingFields,r)},error:{enumerable:!0,get:()=>lt(l.errors,r)}})}}const cGe=e=>e.render(lGe(e));var Nre=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},$8=e=>({isOnSubmit:!e||e===_o.onSubmit,isOnBlur:e===_o.onBlur,isOnChange:e===_o.onChange,isOnAll:e===_o.all,isOnTouch:e===_o.onTouched}),N8=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const jv=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const s=lt(e,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],i)&&!n)return!0;if(a.ref&&t(a.ref,a.name)&&!n)return!0;if(jv(o,t))break}else if(Jn(o)&&jv(o,t))break}}};var uGe=(e,t,r)=>{const n=Ev(lt(e,r));return Br(n,"root",t[r]),Br(e,r,n),e},qN=e=>e.type==="file",Dl=e=>typeof e=="function",s1=e=>{if(!GN)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cb=e=>Qo(e),XN=e=>e.type==="radio",a1=e=>e instanceof RegExp;const I8={value:!1,isValid:!1},D8={value:!0,isValid:!0};var Ire=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Vn(e[0].attributes.value)?Vn(e[0].value)||e[0].value===""?D8:{value:e[0].value,isValid:!0}:D8:I8}return I8};const L8={isValid:!1,value:null};var Dre=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,L8):L8;function R8(e,t,r="validate"){if(cb(e)||Array.isArray(e)&&e.every(cb)||Ca(e)&&!e)return{type:r,message:cb(e)?e:"",ref:t}}var Zf=e=>Jn(e)&&!a1(e)?e:{value:e,message:""},F8=async(e,t,r,n,i)=>{const{ref:s,refs:a,required:o,maxLength:l,minLength:c,min:f,max:d,pattern:h,validate:p,name:m,valueAsNumber:g,mount:x,disabled:y}=e._f,v=lt(t,m);if(!x||y)return{};const _=a?a[0]:s,b=I=>{n&&_.reportValidity&&(_.setCustomValidity(Ca(I)?"":I||""),_.reportValidity())},w={},k=XN(s),T=D_(s),M=k||T,j=(g||qN(s))&&Vn(s.value)&&Vn(v)||s1(s)&&s.value===""||v===""||Array.isArray(v)&&!v.length,C=Nre.bind(null,m,r,w),R=(I,N,z,V=_l.maxLength,G=_l.minLength)=>{const H=I?N:z;w[m]={type:I?V:G,message:H,ref:s,...C(I?V:G,H)}};if(i?!Array.isArray(v)||!v.length:o&&(!M&&(j||vs(v))||Ca(v)&&!v||T&&!Ire(a).isValid||k&&!Dre(a).isValid)){const{value:I,message:N}=cb(o)?{value:!!o,message:o}:Zf(o);if(I&&(w[m]={type:_l.required,message:N,ref:_,...C(_l.required,N)},!r))return b(N),w}if(!j&&(!vs(f)||!vs(d))){let I,N;const z=Zf(d),V=Zf(f);if(!vs(v)&&!isNaN(v)){const G=s.valueAsNumber||v&&+v;vs(z.value)||(I=G>z.value),vs(V.value)||(N=G<V.value)}else{const G=s.valueAsDate||new Date(v),H=ee=>new Date(new Date().toDateString()+" "+ee),O=s.type=="time",q=s.type=="week";Qo(z.value)&&v&&(I=O?H(v)>H(z.value):q?v>z.value:G>new Date(z.value)),Qo(V.value)&&v&&(N=O?H(v)<H(V.value):q?v<V.value:G<new Date(V.value))}if((I||N)&&(R(!!I,z.message,V.message,_l.max,_l.min),!r))return b(w[m].message),w}if((l||c)&&!j&&(Qo(v)||i&&Array.isArray(v))){const I=Zf(l),N=Zf(c),z=!vs(I.value)&&v.length>+I.value,V=!vs(N.value)&&v.length<+N.value;if((z||V)&&(R(z,I.message,N.message),!r))return b(w[m].message),w}if(h&&!j&&Qo(v)){const{value:I,message:N}=Zf(h);if(a1(I)&&!v.match(I)&&(w[m]={type:_l.pattern,message:N,ref:s,...C(_l.pattern,N)},!r))return b(N),w}if(p){if(Dl(p)){const I=await p(v,t),N=R8(I,_);if(N&&(w[m]={...N,...C(_l.validate,N.message)},!r))return b(N.message),w}else if(Jn(p)){let I={};for(const N in p){if(!Ds(I)&&!r)break;const z=R8(await p[N](v,t),_,N);z&&(I={...z,...C(N,z.message)},b(z.message),r&&(w[m]=I))}if(!Ds(I)&&(w[m]={ref:_,...I},!r))return w}}return b(!0),w};function dGe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Vn(e)?n++:e[t[n++]];return e}function fGe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Vn(e[t]))return!1;return!0}function vi(e,t){const r=Array.isArray(t)?t:HN(t)?[t]:Ere(t),n=r.length===1?e:dGe(e,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(Jn(n)&&Ds(n)||Array.isArray(n)&&fGe(n))&&vi(e,r.slice(0,-1)),e}var _P=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},Z2=e=>vs(e)||!Mre(e);function Rc(e,t){if(Z2(e)||Z2(t))return e===t;if($d(e)&&$d(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const s=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const a=t[i];if($d(s)&&$d(a)||Jn(s)&&Jn(a)||Array.isArray(s)&&Array.isArray(a)?!Rc(s,a):s!==a)return!1}}return!0}var Lre=e=>e.type==="select-multiple",hGe=e=>XN(e)||D_(e),xP=e=>s1(e)&&e.isConnected,Rre=e=>{for(const t in e)if(Dl(e[t]))return!0;return!1};function o1(e,t={}){const r=Array.isArray(e);if(Jn(e)||r)for(const n in e)Array.isArray(e[n])||Jn(e[n])&&!Rre(e[n])?(t[n]=Array.isArray(e[n])?[]:{},o1(e[n],t[n])):vs(e[n])||(t[n]=!0);return t}function Fre(e,t,r){const n=Array.isArray(e);if(Jn(e)||n)for(const i in e)Array.isArray(e[i])||Jn(e[i])&&!Rre(e[i])?Vn(t)||Z2(r[i])?r[i]=Array.isArray(e[i])?o1(e[i],[]):{...o1(e[i])}:Fre(e[i],vs(t)?{}:t[i],r[i]):r[i]=!Rc(e[i],t[i]);return r}var Ag=(e,t)=>Fre(e,t,o1(t)),Bre=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Vn(e)?e:t?e===""?NaN:e&&+e:r&&Qo(e)?new Date(e):n?n(e):e;function bP(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return qN(t)?t.files:XN(t)?Dre(e.refs).value:Lre(t)?[...t.selectedOptions].map(({value:r})=>r):D_(t)?Ire(e.refs).value:Bre(Vn(t.value)?e.ref.value:t.value,e)}var pGe=(e,t,r,n)=>{const i={};for(const s of e){const a=lt(t,s);a&&Br(i,s,a._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},Og=e=>Vn(e)?e:a1(e)?e.source:Jn(e)?a1(e.value)?e.value.source:e.value:e;const B8="AsyncFunction";var mGe=e=>(!e||!e.validate)&&!!(Dl(e.validate)&&e.validate.constructor.name===B8||Jn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===B8)),gGe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function z8(e,t,r){const n=lt(e,r);if(n||HN(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),a=lt(t,s),o=lt(e,s);if(a&&!Array.isArray(a)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:r}}var vGe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,yGe=(e,t)=>!dT(lt(e,t)).length&&vi(e,t);const _Ge={mode:_o.onSubmit,reValidateMode:_o.onChange,shouldFocusError:!0};function xGe(e={}){let t={..._Ge,...e},r={submitCount:0,isDirty:!1,isLoading:Dl(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=Jn(t.defaultValues)||Jn(t.values)?Is(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Is(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:_P(),array:_P(),state:_P()},h=$8(t.mode),p=$8(t.reValidateMode),m=t.criteriaMode===_o.all,g=Z=>ne=>{clearTimeout(c),c=setTimeout(Z,ne)},x=async Z=>{if(!e.disabled&&(f.isValid||Z)){const ne=t.resolver?Ds((await M()).errors):await C(n,!0);ne!==r.isValid&&d.state.next({isValid:ne})}},y=(Z,ne)=>{!e.disabled&&(f.isValidating||f.validatingFields)&&((Z||Array.from(o.mount)).forEach(fe=>{fe&&(ne?Br(r.validatingFields,fe,ne):vi(r.validatingFields,fe))}),d.state.next({validatingFields:r.validatingFields,isValidating:!Ds(r.validatingFields)}))},v=(Z,ne=[],fe,Me,Ce=!0,me=!0)=>{if(Me&&fe&&!e.disabled){if(a.action=!0,me&&Array.isArray(lt(n,Z))){const Fe=fe(lt(n,Z),Me.argA,Me.argB);Ce&&Br(n,Z,Fe)}if(me&&Array.isArray(lt(r.errors,Z))){const Fe=fe(lt(r.errors,Z),Me.argA,Me.argB);Ce&&Br(r.errors,Z,Fe),yGe(r.errors,Z)}if(f.touchedFields&&me&&Array.isArray(lt(r.touchedFields,Z))){const Fe=fe(lt(r.touchedFields,Z),Me.argA,Me.argB);Ce&&Br(r.touchedFields,Z,Fe)}f.dirtyFields&&(r.dirtyFields=Ag(i,s)),d.state.next({name:Z,isDirty:I(Z,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Br(s,Z,ne)},_=(Z,ne)=>{Br(r.errors,Z,ne),d.state.next({errors:r.errors})},b=Z=>{r.errors=Z,d.state.next({errors:r.errors,isValid:!1})},w=(Z,ne,fe,Me)=>{const Ce=lt(n,Z);if(Ce){const me=lt(s,Z,Vn(fe)?lt(i,Z):fe);Vn(me)||Me&&Me.defaultChecked||ne?Br(s,Z,ne?me:bP(Ce._f)):V(Z,me),a.mount&&x()}},k=(Z,ne,fe,Me,Ce)=>{let me=!1,Fe=!1;const ze={name:Z};if(!e.disabled){const Je=!!(lt(n,Z)&&lt(n,Z)._f&&lt(n,Z)._f.disabled);if(!fe||Me){f.isDirty&&(Fe=r.isDirty,r.isDirty=ze.isDirty=I(),me=Fe!==ze.isDirty);const He=Je||Rc(lt(i,Z),ne);Fe=!!(!Je&&lt(r.dirtyFields,Z)),He||Je?vi(r.dirtyFields,Z):Br(r.dirtyFields,Z,!0),ze.dirtyFields=r.dirtyFields,me=me||f.dirtyFields&&Fe!==!He}if(fe){const He=lt(r.touchedFields,Z);He||(Br(r.touchedFields,Z,fe),ze.touchedFields=r.touchedFields,me=me||f.touchedFields&&He!==fe)}me&&Ce&&d.state.next(ze)}return me?ze:{}},T=(Z,ne,fe,Me)=>{const Ce=lt(r.errors,Z),me=f.isValid&&Ca(ne)&&r.isValid!==ne;if(e.delayError&&fe?(l=g(()=>_(Z,fe)),l(e.delayError)):(clearTimeout(c),l=null,fe?Br(r.errors,Z,fe):vi(r.errors,Z)),(fe?!Rc(Ce,fe):Ce)||!Ds(Me)||me){const Fe={...Me,...me&&Ca(ne)?{isValid:ne}:{},errors:r.errors,name:Z};r={...r,...Fe},d.state.next(Fe)}},M=async Z=>{y(Z,!0);const ne=await t.resolver(s,t.context,pGe(Z||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return y(Z),ne},j=async Z=>{const{errors:ne}=await M(Z);if(Z)for(const fe of Z){const Me=lt(ne,fe);Me?Br(r.errors,fe,Me):vi(r.errors,fe)}else r.errors=ne;return ne},C=async(Z,ne,fe={valid:!0})=>{for(const Me in Z){const Ce=Z[Me];if(Ce){const{_f:me,...Fe}=Ce;if(me){const ze=o.array.has(me.name),Je=Ce._f&&mGe(Ce._f);Je&&f.validatingFields&&y([Me],!0);const He=await F8(Ce,s,m,t.shouldUseNativeValidation&&!ne,ze);if(Je&&f.validatingFields&&y([Me]),He[me.name]&&(fe.valid=!1,ne))break;!ne&&(lt(He,me.name)?ze?uGe(r.errors,He,me.name):Br(r.errors,me.name,He[me.name]):vi(r.errors,me.name))}!Ds(Fe)&&await C(Fe,ne,fe)}}return fe.valid},R=()=>{for(const Z of o.unMount){const ne=lt(n,Z);ne&&(ne._f.refs?ne._f.refs.every(fe=>!xP(fe)):!xP(ne._f.ref))&&ue(Z)}o.unMount=new Set},I=(Z,ne)=>!e.disabled&&(Z&&ne&&Br(s,Z,ne),!Rc(B(),i)),N=(Z,ne,fe)=>$re(Z,o,{...a.mount?s:Vn(ne)?i:Qo(Z)?{[Z]:ne}:ne},fe,ne),z=Z=>dT(lt(a.mount?s:i,Z,e.shouldUnregister?lt(i,Z,[]):[])),V=(Z,ne,fe={})=>{const Me=lt(n,Z);let Ce=ne;if(Me){const me=Me._f;me&&(!me.disabled&&Br(s,Z,Bre(ne,me)),Ce=s1(me.ref)&&vs(ne)?"":ne,Lre(me.ref)?[...me.ref.options].forEach(Fe=>Fe.selected=Ce.includes(Fe.value)):me.refs?D_(me.ref)?me.refs.length>1?me.refs.forEach(Fe=>(!Fe.defaultChecked||!Fe.disabled)&&(Fe.checked=Array.isArray(Ce)?!!Ce.find(ze=>ze===Fe.value):Ce===Fe.value)):me.refs[0]&&(me.refs[0].checked=!!Ce):me.refs.forEach(Fe=>Fe.checked=Fe.value===Ce):qN(me.ref)?me.ref.value="":(me.ref.value=Ce,me.ref.type||d.values.next({name:Z,values:{...s}})))}(fe.shouldDirty||fe.shouldTouch)&&k(Z,Ce,fe.shouldTouch,fe.shouldDirty,!0),fe.shouldValidate&&ee(Z)},G=(Z,ne,fe)=>{for(const Me in ne){const Ce=ne[Me],me=`${Z}.${Me}`,Fe=lt(n,me);(o.array.has(Z)||Jn(Ce)||Fe&&!Fe._f)&&!$d(Ce)?G(me,Ce,fe):V(me,Ce,fe)}},H=(Z,ne,fe={})=>{const Me=lt(n,Z),Ce=o.array.has(Z),me=Is(ne);Br(s,Z,me),Ce?(d.array.next({name:Z,values:{...s}}),(f.isDirty||f.dirtyFields)&&fe.shouldDirty&&d.state.next({name:Z,dirtyFields:Ag(i,s),isDirty:I(Z,me)})):Me&&!Me._f&&!vs(me)?G(Z,me,fe):V(Z,me,fe),N8(Z,o)&&d.state.next({...r}),d.values.next({name:a.mount?Z:void 0,values:{...s}})},O=async Z=>{a.mount=!0;const ne=Z.target;let fe=ne.name,Me=!0;const Ce=lt(n,fe),me=()=>ne.type?bP(Ce._f):Sre(Z),Fe=ze=>{Me=Number.isNaN(ze)||$d(ze)&&isNaN(ze.getTime())||Rc(ze,lt(s,fe,ze))};if(Ce){let ze,Je;const He=me(),We=Z.type===i1.BLUR||Z.type===i1.FOCUS_OUT,nt=!gGe(Ce._f)&&!t.resolver&&!lt(r.errors,fe)&&!Ce._f.deps||vGe(We,lt(r.touchedFields,fe),r.isSubmitted,p,h),ct=N8(fe,o,We);Br(s,fe,He),We?(Ce._f.onBlur&&Ce._f.onBlur(Z),l&&l(0)):Ce._f.onChange&&Ce._f.onChange(Z);const Ht=k(fe,He,We,!1),Ut=!Ds(Ht)||ct;if(!We&&d.values.next({name:fe,type:Z.type,values:{...s}}),nt)return f.isValid&&(e.mode==="onBlur"?We&&x():x()),Ut&&d.state.next({name:fe,...ct?{}:Ht});if(!We&&ct&&d.state.next({...r}),t.resolver){const{errors:$t}=await M([fe]);if(Fe(He),Me){const xn=z8(r.errors,n,fe),Zr=z8($t,n,xn.name||fe);ze=Zr.error,fe=Zr.name,Je=Ds($t)}}else y([fe],!0),ze=(await F8(Ce,s,m,t.shouldUseNativeValidation))[fe],y([fe]),Fe(He),Me&&(ze?Je=!1:f.isValid&&(Je=await C(n,!0)));Me&&(Ce._f.deps&&ee(Ce._f.deps),T(fe,Je,ze,Ht))}},q=(Z,ne)=>{if(lt(r.errors,ne)&&Z.focus)return Z.focus(),1},ee=async(Z,ne={})=>{let fe,Me;const Ce=Ev(Z);if(t.resolver){const me=await j(Vn(Z)?Z:Ce);fe=Ds(me),Me=Z?!Ce.some(Fe=>lt(me,Fe)):fe}else Z?(Me=(await Promise.all(Ce.map(async me=>{const Fe=lt(n,me);return await C(Fe&&Fe._f?{[me]:Fe}:Fe)}))).every(Boolean),!(!Me&&!r.isValid)&&x()):Me=fe=await C(n);return d.state.next({...!Qo(Z)||f.isValid&&fe!==r.isValid?{}:{name:Z},...t.resolver||!Z?{isValid:fe}:{},errors:r.errors}),ne.shouldFocus&&!Me&&jv(n,q,Z?Ce:o.mount),Me},B=Z=>{const ne={...a.mount?s:i};return Vn(Z)?ne:Qo(Z)?lt(ne,Z):Z.map(fe=>lt(ne,fe))},D=(Z,ne)=>({invalid:!!lt((ne||r).errors,Z),isDirty:!!lt((ne||r).dirtyFields,Z),error:lt((ne||r).errors,Z),isValidating:!!lt(r.validatingFields,Z),isTouched:!!lt((ne||r).touchedFields,Z)}),K=Z=>{Z&&Ev(Z).forEach(ne=>vi(r.errors,ne)),d.state.next({errors:Z?r.errors:{}})},oe=(Z,ne,fe)=>{const Me=(lt(n,Z,{_f:{}})._f||{}).ref,Ce=lt(r.errors,Z)||{},{ref:me,message:Fe,type:ze,...Je}=Ce;Br(r.errors,Z,{...Je,...ne,ref:Me}),d.state.next({name:Z,errors:r.errors,isValid:!1}),fe&&fe.shouldFocus&&Me&&Me.focus&&Me.focus()},_e=(Z,ne)=>Dl(Z)?d.values.subscribe({next:fe=>Z(N(void 0,ne),fe)}):N(Z,ne,!0),ue=(Z,ne={})=>{for(const fe of Z?Ev(Z):o.mount)o.mount.delete(fe),o.array.delete(fe),ne.keepValue||(vi(n,fe),vi(s,fe)),!ne.keepError&&vi(r.errors,fe),!ne.keepDirty&&vi(r.dirtyFields,fe),!ne.keepTouched&&vi(r.touchedFields,fe),!ne.keepIsValidating&&vi(r.validatingFields,fe),!t.shouldUnregister&&!ne.keepDefaultValue&&vi(i,fe);d.values.next({values:{...s}}),d.state.next({...r,...ne.keepDirty?{isDirty:I()}:{}}),!ne.keepIsValid&&x()},ye=({disabled:Z,name:ne,field:fe,fields:Me,value:Ce})=>{if(Ca(Z)&&a.mount||Z){const me=Z?void 0:Vn(Ce)?bP(fe?fe._f:lt(Me,ne)._f):Ce;Br(s,ne,me),k(ne,me,!1,!1,!0)}},$e=(Z,ne={})=>{let fe=lt(n,Z);const Me=Ca(ne.disabled)||Ca(e.disabled);return Br(n,Z,{...fe||{},_f:{...fe&&fe._f?fe._f:{ref:{name:Z}},name:Z,mount:!0,...ne}}),o.mount.add(Z),fe?ye({field:fe,disabled:Ca(ne.disabled)?ne.disabled:e.disabled,name:Z,value:ne.value}):w(Z,!0,ne.value),{...Me?{disabled:ne.disabled||e.disabled}:{},...t.progressive?{required:!!ne.required,min:Og(ne.min),max:Og(ne.max),minLength:Og(ne.minLength),maxLength:Og(ne.maxLength),pattern:Og(ne.pattern)}:{},name:Z,onChange:O,onBlur:O,ref:Ce=>{if(Ce){$e(Z,ne),fe=lt(n,Z);const me=Vn(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,Fe=hGe(me),ze=fe._f.refs||[];if(Fe?ze.find(Je=>Je===me):me===fe._f.ref)return;Br(n,Z,{_f:{...fe._f,...Fe?{refs:[...ze.filter(xP),me,...Array.isArray(lt(i,Z))?[{}]:[]],ref:{type:me.type,name:Z}}:{ref:me}}}),w(Z,!1,void 0,me)}else fe=lt(n,Z,{}),fe._f&&(fe._f.mount=!1),(t.shouldUnregister||ne.shouldUnregister)&&!(Pre(o.array,Z)&&a.action)&&o.unMount.add(Z)}}},Se=()=>t.shouldFocusError&&jv(n,q,o.mount),ge=Z=>{Ca(Z)&&(d.state.next({disabled:Z}),jv(n,(ne,fe)=>{const Me=lt(n,fe);Me&&(ne.disabled=Me._f.disabled||Z,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(Ce=>{Ce.disabled=Me._f.disabled||Z}))},0,!1))},te=(Z,ne)=>async fe=>{let Me;fe&&(fe.preventDefault&&fe.preventDefault(),fe.persist&&fe.persist());let Ce=Is(s);if(d.state.next({isSubmitting:!0}),t.resolver){const{errors:me,values:Fe}=await M();r.errors=me,Ce=Fe}else await C(n);if(vi(r.errors,"root"),Ds(r.errors)){d.state.next({errors:{}});try{await Z(Ce,fe)}catch(me){Me=me}}else ne&&await ne({...r.errors},fe),Se(),setTimeout(Se);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ds(r.errors)&&!Me,submitCount:r.submitCount+1,errors:r.errors}),Me)throw Me},re=(Z,ne={})=>{lt(n,Z)&&(Vn(ne.defaultValue)?H(Z,Is(lt(i,Z))):(H(Z,ne.defaultValue),Br(i,Z,Is(ne.defaultValue))),ne.keepTouched||vi(r.touchedFields,Z),ne.keepDirty||(vi(r.dirtyFields,Z),r.isDirty=ne.defaultValue?I(Z,Is(lt(i,Z))):I()),ne.keepError||(vi(r.errors,Z),f.isValid&&x()),d.state.next({...r}))},J=(Z,ne={})=>{const fe=Z?Is(Z):i,Me=Is(fe),Ce=Ds(Z),me=Ce?i:Me;if(ne.keepDefaultValues||(i=fe),!ne.keepValues){if(ne.keepDirtyValues){const Fe=new Set([...o.mount,...Object.keys(Ag(i,s))]);for(const ze of Array.from(Fe))lt(r.dirtyFields,ze)?Br(me,ze,lt(s,ze)):H(ze,lt(me,ze))}else{if(GN&&Vn(Z))for(const Fe of o.mount){const ze=lt(n,Fe);if(ze&&ze._f){const Je=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(s1(Je)){const He=Je.closest("form");if(He){He.reset();break}}}}n={}}s=e.shouldUnregister?ne.keepDefaultValues?Is(i):{}:Is(me),d.array.next({values:{...me}}),d.values.next({values:{...me}})}o={mount:ne.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!f.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,a.watch=!!e.shouldUnregister,d.state.next({submitCount:ne.keepSubmitCount?r.submitCount:0,isDirty:Ce?!1:ne.keepDirty?r.isDirty:!!(ne.keepDefaultValues&&!Rc(Z,i)),isSubmitted:ne.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ce?{}:ne.keepDirtyValues?ne.keepDefaultValues&&s?Ag(i,s):r.dirtyFields:ne.keepDefaultValues&&Z?Ag(i,Z):ne.keepDirty?r.dirtyFields:{},touchedFields:ne.keepTouched?r.touchedFields:{},errors:ne.keepErrors?r.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},we=(Z,ne)=>J(Dl(Z)?Z(s):Z,ne);return{control:{register:$e,unregister:ue,getFieldState:D,handleSubmit:te,setError:oe,_executeSchema:M,_getWatch:N,_getDirty:I,_updateValid:x,_removeUnmounted:R,_updateFieldArray:v,_updateDisabledField:ye,_getFieldArray:z,_reset:J,_resetDefaultValues:()=>Dl(t.defaultValues)&&t.defaultValues().then(Z=>{we(Z,t.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:Z=>{r={...r,...Z}},_disableForm:ge,_subjects:d,_proxyFormState:f,_setErrors:b,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(Z){a=Z},get _defaultValues(){return i},get _names(){return o},set _names(Z){o=Z},get _formState(){return r},set _formState(Z){r=Z},get _options(){return t},set _options(Z){t={...t,...Z}}},trigger:ee,register:$e,handleSubmit:te,watch:_e,setValue:H,getValues:B,reset:we,resetField:re,clearErrors:K,unregister:ue,setError:oe,setFocus:(Z,ne={})=>{const fe=lt(n,Z),Me=fe&&fe._f;if(Me){const Ce=Me.refs?Me.refs[0]:Me.ref;Ce.focus&&(Ce.focus(),ne.shouldSelect&&Ce.select())}},getFieldState:D}}function zre(e={}){const t=ae.useRef(),r=ae.useRef(),[n,i]=ae.useState({isDirty:!1,isValidating:!1,isLoading:Dl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Dl(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...xGe(e),formState:n});const s=t.current.control;return s._options=e,KN({subject:s._subjects.state,next:a=>{Are(a,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),ae.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ae.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),ae.useEffect(()=>{e.values&&!Rc(e.values,r.current)?(s._reset(e.values,s._options.resetOptions),r.current=e.values,i(a=>({...a}))):s._resetDefaultValues()},[e.values,s]),ae.useEffect(()=>{e.errors&&s._setErrors(e.errors)},[e.errors,s]),ae.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),ae.useEffect(()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[e.shouldUnregister,s]),ae.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[n]),t.current.formState=Cre(n,s),t.current}const V8=(e,t,r)=>{if(e&&"reportValidity"in e){const n=lt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},Vre=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?V8(n.ref,r,e):n&&n.refs&&n.refs.forEach(i=>V8(i,r,e))}},bGe=(e,t)=>{t.shouldUseNativeValidation&&Vre(e,t);const r={};for(const n in e){const i=lt(t.fields,n),s=Object.assign(e[n]||{},{ref:i&&i.ref});if(wGe(t.names||Object.keys(e),n)){const a=Object.assign({},lt(r,n));Br(a,"root",s),Br(r,n,a)}else Br(r,n,s)}return r},wGe=(e,t)=>{const r=U8(t);return e.some(n=>U8(n).match(`^${r}\\.\\d+`))};function U8(e){return e.replace(/\]|\[/g,"")}function kGe(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[a]={message:o.message,type:o.code}}else r[a]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(f){return f.errors.forEach(function(d){return e.push(d)})}),t){var l=r[a].types,c=l&&l[n.code];r[a]=Nre(a,t,r,i,c?[].concat(c,n.message):n.message)}e.shift()}return r}function Ure(e,t,r){return r===void 0&&(r={}),function(n,i,s){try{return Promise.resolve(function(a,o){try{var l=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(c){return s.shouldUseNativeValidation&&Vre({},s),{errors:{},values:r.raw?Object.assign({},n):c}})}catch(c){return o(c)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:bGe(kGe(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}}var Sr;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Sr||(Sr={}));var J2;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(J2||(J2={}));const yt=Sr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fc=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},rt=Sr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),TGe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ha extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof ha))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Sr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ha.create=e=>new ha(e);const Zp=(e,t)=>{let r;switch(e.code){case rt.invalid_type:e.received===yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case rt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Sr.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Sr.joinValues(e.keys,", ")}`;break;case rt.invalid_union:r="Invalid input";break;case rt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Sr.joinValues(e.options)}`;break;case rt.invalid_enum_value:r=`Invalid enum value. Expected ${Sr.joinValues(e.options)}, received '${e.received}'`;break;case rt.invalid_arguments:r="Invalid function arguments";break;case rt.invalid_return_type:r="Invalid function return type";break;case rt.invalid_date:r="Invalid date";break;case rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Sr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case rt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case rt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case rt.custom:r="Invalid input";break;case rt.invalid_intersection_types:r="Intersection results could not be merged";break;case rt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case rt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Sr.assertNever(e)}return{message:r}};let Wre=Zp;function MGe(e){Wre=e}function l1(){return Wre}const c1=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},SGe=[];function gt(e,t){const r=l1(),n=c1({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Zp?void 0:Zp].filter(i=>!!i)});e.common.issues.push(n)}class ls{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return Yt;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const s=await i.key,a=await i.value;n.push({key:s,value:a})}return ls.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return Yt;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:t.value,value:n}}}const Yt=Object.freeze({status:"aborted"}),Lh=e=>({status:"dirty",value:e}),Ss=e=>({status:"valid",value:e}),eA=e=>e.status==="aborted",tA=e=>e.status==="dirty",Wy=e=>e.status==="valid",Gy=e=>typeof Promise<"u"&&e instanceof Promise;function u1(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Gre(e,t,r,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var Nt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Nt||(Nt={}));var Zg,Jg;class cl{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W8=(e,t)=>{if(Wy(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ha(e.common.issues);return this._error=r,this._error}}};function sr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{var l,c;const{message:f}=e;return a.code==="invalid_enum_value"?{message:f??o.defaultError}:typeof o.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=f??r)!==null&&c!==void 0?c:o.defaultError}},description:i}}class fr{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Fc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Fc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ls,ctx:{common:t.parent.common,data:t.data,parsedType:Fc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Gy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fc(t)},s=this._parseSync({data:t,path:i.path,parent:i});return W8(i,s)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fc(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(Gy(i)?i:Promise.resolve(i));return W8(n,s)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:rt.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Co({schema:this,typeName:Gt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return al.create(this,this._def)}nullable(){return wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mo.create(this,this._def)}promise(){return em.create(this,this._def)}or(t){return Xy.create([this,t],this._def)}and(t){return Yy.create(this,t,this._def)}transform(t){return new Co({...sr(this._def),schema:this,typeName:Gt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new t_({...sr(this._def),innerType:this,defaultValue:r,typeName:Gt.ZodDefault})}brand(){return new YN({typeName:Gt.ZodBranded,type:this,...sr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new r_({...sr(this._def),innerType:this,catchValue:r,typeName:Gt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return L_.create(this,t)}readonly(){return n_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const PGe=/^c[^\s-]{8,}$/i,EGe=/^[0-9a-z]+$/,jGe=/^[0-9A-HJKMNP-TV-Z]{26}$/,CGe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AGe=/^[a-z0-9_-]{21}$/i,OGe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$Ge=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NGe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wP;const IGe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DGe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,LGe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Hre="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RGe=new RegExp(`^${Hre}$`);function Kre(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function FGe(e){return new RegExp(`^${Kre(e)}$`)}function qre(e){let t=`${Hre}T${Kre(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function BGe(e,t){return!!((t==="v4"||!t)&&IGe.test(e)||(t==="v6"||!t)&&DGe.test(e))}class wo extends fr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){const s=this._getOrReturnCtx(t);return gt(s,{code:rt.invalid_type,expected:yt.string,received:s.parsedType}),Yt}const n=new ls;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?gt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&gt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")$Ge.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"email",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")wP||(wP=new RegExp(NGe,"u")),wP.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"emoji",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")CGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"uuid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")AGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"nanoid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")PGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"cuid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")EGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"cuid2",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")jGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"ulid",code:rt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),gt(i,{validation:"url",code:rt.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"regex",code:rt.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?qre(s).test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?RGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?FGe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?OGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"duration",code:rt.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?BGe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"ip",code:rt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?LGe.test(t.data)||(i=this._getOrReturnCtx(t,i),gt(i,{validation:"base64",code:rt.invalid_string,message:s.message}),n.dirty()):Sr.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:rt.invalid_string,...Nt.errToObj(n)})}_addCheck(t){return new wo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Nt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Nt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Nt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Nt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Nt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Nt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Nt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Nt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Nt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Nt.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Nt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Nt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Nt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Nt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Nt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Nt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Nt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Nt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Nt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Nt.errToObj(r)})}nonempty(t){return this.min(1,Nt.errToObj(t))}trim(){return new wo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}wo.create=e=>{var t;return new wo({checks:[],typeName:Gt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...sr(e)})};function zGe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),a=parseInt(t.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class _u extends fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){const s=this._getOrReturnCtx(t);return gt(s,{code:rt.invalid_type,expected:yt.number,received:s.parsedType}),Yt}let n;const i=new ls;for(const s of this._def.checks)s.kind==="int"?Sr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?zGe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.not_finite,message:s.message}),i.dirty()):Sr.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Nt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Nt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Nt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Nt.toString(r))}setLimit(t,r,n,i){return new _u({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Nt.toString(i)}]})}_addCheck(t){return new _u({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Nt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Nt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Nt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Nt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Nt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Nt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Nt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Nt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Nt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Sr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}_u.create=e=>new _u({checks:[],typeName:Gt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...sr(e)});class xu extends fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==yt.bigint){const s=this._getOrReturnCtx(t);return gt(s,{code:rt.invalid_type,expected:yt.bigint,received:s.parsedType}),Yt}let n;const i=new ls;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),gt(n,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Sr.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Nt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Nt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Nt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Nt.toString(r))}setLimit(t,r,n,i){return new xu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Nt.toString(i)}]})}_addCheck(t){return new xu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Nt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Nt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Nt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Nt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Nt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}xu.create=e=>{var t;return new xu({checks:[],typeName:Gt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...sr(e)})};class Hy extends fr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.boolean,received:n.parsedType}),Yt}return Ss(t.data)}}Hy.create=e=>new Hy({typeName:Gt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...sr(e)});class of extends fr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){const s=this._getOrReturnCtx(t);return gt(s,{code:rt.invalid_type,expected:yt.date,received:s.parsedType}),Yt}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return gt(s,{code:rt.invalid_date}),Yt}const n=new ls;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),gt(i,{code:rt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Sr.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new of({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Nt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Nt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}of.create=e=>new of({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Gt.ZodDate,...sr(e)});class d1 extends fr{_parse(t){if(this._getType(t)!==yt.symbol){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.symbol,received:n.parsedType}),Yt}return Ss(t.data)}}d1.create=e=>new d1({typeName:Gt.ZodSymbol,...sr(e)});class Ky extends fr{_parse(t){if(this._getType(t)!==yt.undefined){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.undefined,received:n.parsedType}),Yt}return Ss(t.data)}}Ky.create=e=>new Ky({typeName:Gt.ZodUndefined,...sr(e)});class qy extends fr{_parse(t){if(this._getType(t)!==yt.null){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.null,received:n.parsedType}),Yt}return Ss(t.data)}}qy.create=e=>new qy({typeName:Gt.ZodNull,...sr(e)});class Jp extends fr{constructor(){super(...arguments),this._any=!0}_parse(t){return Ss(t.data)}}Jp.create=e=>new Jp({typeName:Gt.ZodAny,...sr(e)});class Hd extends fr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ss(t.data)}}Hd.create=e=>new Hd({typeName:Gt.ZodUnknown,...sr(e)});class nc extends fr{_parse(t){const r=this._getOrReturnCtx(t);return gt(r,{code:rt.invalid_type,expected:yt.never,received:r.parsedType}),Yt}}nc.create=e=>new nc({typeName:Gt.ZodNever,...sr(e)});class f1 extends fr{_parse(t){if(this._getType(t)!==yt.undefined){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.void,received:n.parsedType}),Yt}return Ss(t.data)}}f1.create=e=>new f1({typeName:Gt.ZodVoid,...sr(e)});class Mo extends fr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==yt.array)return gt(r,{code:rt.invalid_type,expected:yt.array,received:r.parsedType}),Yt;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(gt(r,{code:a?rt.too_big:rt.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(gt(r,{code:rt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(gt(r,{code:rt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new cl(r,a,r.path,o)))).then(a=>ls.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new cl(r,a,r.path,o)));return ls.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new Mo({...this._def,minLength:{value:t,message:Nt.toString(r)}})}max(t,r){return new Mo({...this._def,maxLength:{value:t,message:Nt.toString(r)}})}length(t,r){return new Mo({...this._def,exactLength:{value:t,message:Nt.toString(r)}})}nonempty(t){return this.min(1,t)}}Mo.create=(e,t)=>new Mo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Gt.ZodArray,...sr(t)});function lh(e){if(e instanceof An){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=al.create(lh(n))}return new An({...e._def,shape:()=>t})}else return e instanceof Mo?new Mo({...e._def,type:lh(e.element)}):e instanceof al?al.create(lh(e.unwrap())):e instanceof wu?wu.create(lh(e.unwrap())):e instanceof ul?ul.create(e.items.map(t=>lh(t))):e}class An extends fr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Sr.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==yt.object){const c=this._getOrReturnCtx(t);return gt(c,{code:rt.invalid_type,expected:yt.object,received:c.parsedType}),Yt}const{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof nc&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const f=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:f._parse(new cl(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof nc){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(c==="strict")o.length>0&&(gt(i,{code:rt.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of o){const d=i.data[f];l.push({key:{status:"valid",value:f},value:c._parse(new cl(i,d,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of l){const d=await f.key,h=await f.value;c.push({key:d,value:h,alwaysSet:f.alwaysSet})}return c}).then(c=>ls.mergeObjectSync(n,c)):ls.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Nt.errToObj,new An({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=Nt.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new An({...this._def,unknownKeys:"strip"})}passthrough(){return new An({...this._def,unknownKeys:"passthrough"})}extend(t){return new An({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new An({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Gt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new An({...this._def,catchall:t})}pick(t){const r={};return Sr.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new An({...this._def,shape:()=>r})}omit(t){const r={};return Sr.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new An({...this._def,shape:()=>r})}deepPartial(){return lh(this)}partial(t){const r={};return Sr.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new An({...this._def,shape:()=>r})}required(t){const r={};return Sr.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof al;)s=s._def.innerType;r[n]=s}}),new An({...this._def,shape:()=>r})}keyof(){return Xre(Sr.objectKeys(this.shape))}}An.create=(e,t)=>new An({shape:()=>e,unknownKeys:"strip",catchall:nc.create(),typeName:Gt.ZodObject,...sr(t)});An.strictCreate=(e,t)=>new An({shape:()=>e,unknownKeys:"strict",catchall:nc.create(),typeName:Gt.ZodObject,...sr(t)});An.lazycreate=(e,t)=>new An({shape:e,unknownKeys:"strip",catchall:nc.create(),typeName:Gt.ZodObject,...sr(t)});class Xy extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new ha(o.ctx.common.issues));return gt(r,{code:rt.invalid_union,unionErrors:a}),Yt}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new ha(l));return gt(r,{code:rt.invalid_union,unionErrors:o}),Yt}}get options(){return this._def.options}}Xy.create=(e,t)=>new Xy({options:e,typeName:Gt.ZodUnion,...sr(t)});const Ml=e=>e instanceof Zy?Ml(e.schema):e instanceof Co?Ml(e.innerType()):e instanceof Jy?[e.value]:e instanceof bu?e.options:e instanceof e_?Sr.objectValues(e.enum):e instanceof t_?Ml(e._def.innerType):e instanceof Ky?[void 0]:e instanceof qy?[null]:e instanceof al?[void 0,...Ml(e.unwrap())]:e instanceof wu?[null,...Ml(e.unwrap())]:e instanceof YN||e instanceof n_?Ml(e.unwrap()):e instanceof r_?Ml(e._def.innerType):[];class hT extends fr{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return gt(r,{code:rt.invalid_type,expected:yt.object,received:r.parsedType}),Yt;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(gt(r,{code:rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Yt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const s of r){const a=Ml(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);i.set(o,s)}}return new hT({typeName:Gt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...sr(n)})}}function rA(e,t){const r=Fc(e),n=Fc(t);if(e===t)return{valid:!0,data:e};if(r===yt.object&&n===yt.object){const i=Sr.objectKeys(t),s=Sr.objectKeys(e).filter(o=>i.indexOf(o)!==-1),a={...e,...t};for(const o of s){const l=rA(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===yt.array&&n===yt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],l=rA(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===yt.date&&n===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Yy extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(s,a)=>{if(eA(s)||eA(a))return Yt;const o=rA(s.value,a.value);return o.valid?((tA(s)||tA(a))&&r.dirty(),{status:r.value,value:o.data}):(gt(n,{code:rt.invalid_intersection_types}),Yt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Yy.create=(e,t,r)=>new Yy({left:e,right:t,typeName:Gt.ZodIntersection,...sr(r)});class ul extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.array)return gt(n,{code:rt.invalid_type,expected:yt.array,received:n.parsedType}),Yt;if(n.data.length<this._def.items.length)return gt(n,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Yt;!this._def.rest&&n.data.length>this._def.items.length&&(gt(n,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new cl(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>ls.mergeArray(r,a)):ls.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new ul({...this._def,rest:t})}}ul.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ul({items:e,typeName:Gt.ZodTuple,rest:null,...sr(t)})};class Qy extends fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return gt(n,{code:rt.invalid_type,expected:yt.object,received:n.parsedType}),Yt;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new cl(n,o,n.path,o)),value:a._parse(new cl(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?ls.mergeObjectAsync(r,i):ls.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof fr?new Qy({keyType:t,valueType:r,typeName:Gt.ZodRecord,...sr(n)}):new Qy({keyType:wo.create(),valueType:t,typeName:Gt.ZodRecord,...sr(r)})}}class h1 extends fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.map)return gt(n,{code:rt.invalid_type,expected:yt.map,received:n.parsedType}),Yt;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],c)=>({key:i._parse(new cl(n,o,n.path,[c,"key"])),value:s._parse(new cl(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,f=await l.value;if(c.status==="aborted"||f.status==="aborted")return Yt;(c.status==="dirty"||f.status==="dirty")&&r.dirty(),o.set(c.value,f.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,f=l.value;if(c.status==="aborted"||f.status==="aborted")return Yt;(c.status==="dirty"||f.status==="dirty")&&r.dirty(),o.set(c.value,f.value)}return{status:r.value,value:o}}}}h1.create=(e,t,r)=>new h1({valueType:t,keyType:e,typeName:Gt.ZodMap,...sr(r)});class lf extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.set)return gt(n,{code:rt.invalid_type,expected:yt.set,received:n.parsedType}),Yt;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(gt(n,{code:rt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(gt(n,{code:rt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(l){const c=new Set;for(const f of l){if(f.status==="aborted")return Yt;f.status==="dirty"&&r.dirty(),c.add(f.value)}return{status:r.value,value:c}}const o=[...n.data.values()].map((l,c)=>s._parse(new cl(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,r){return new lf({...this._def,minSize:{value:t,message:Nt.toString(r)}})}max(t,r){return new lf({...this._def,maxSize:{value:t,message:Nt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}lf.create=(e,t)=>new lf({valueType:e,minSize:null,maxSize:null,typeName:Gt.ZodSet,...sr(t)});class rp extends fr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.function)return gt(r,{code:rt.invalid_type,expected:yt.function,received:r.parsedType}),Yt;function n(o,l){return c1({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,l1(),Zp].filter(c=>!!c),issueData:{code:rt.invalid_arguments,argumentsError:l}})}function i(o,l){return c1({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,l1(),Zp].filter(c=>!!c),issueData:{code:rt.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof em){const o=this;return Ss(async function(...l){const c=new ha([]),f=await o._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(n(l,p)),c}),d=await Reflect.apply(a,this,f);return await o._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})})}else{const o=this;return Ss(function(...l){const c=o._def.args.safeParse(l,s);if(!c.success)throw new ha([n(l,c.error)]);const f=Reflect.apply(a,this,c.data),d=o._def.returns.safeParse(f,s);if(!d.success)throw new ha([i(f,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new rp({...this._def,args:ul.create(t).rest(Hd.create())})}returns(t){return new rp({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new rp({args:t||ul.create([]).rest(Hd.create()),returns:r||Hd.create(),typeName:Gt.ZodFunction,...sr(n)})}}class Zy extends fr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Zy.create=(e,t)=>new Zy({getter:e,typeName:Gt.ZodLazy,...sr(t)});class Jy extends fr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return gt(r,{received:r.data,code:rt.invalid_literal,expected:this._def.value}),Yt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Jy.create=(e,t)=>new Jy({value:e,typeName:Gt.ZodLiteral,...sr(t)});function Xre(e,t){return new bu({values:e,typeName:Gt.ZodEnum,...sr(t)})}class bu extends fr{constructor(){super(...arguments),Zg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return gt(r,{expected:Sr.joinValues(n),received:r.parsedType,code:rt.invalid_type}),Yt}if(u1(this,Zg)||Gre(this,Zg,new Set(this._def.values)),!u1(this,Zg).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return gt(r,{received:r.data,code:rt.invalid_enum_value,options:n}),Yt}return Ss(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return bu.create(t,{...this._def,...r})}exclude(t,r=this._def){return bu.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Zg=new WeakMap;bu.create=Xre;class e_ extends fr{constructor(){super(...arguments),Jg.set(this,void 0)}_parse(t){const r=Sr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){const i=Sr.objectValues(r);return gt(n,{expected:Sr.joinValues(i),received:n.parsedType,code:rt.invalid_type}),Yt}if(u1(this,Jg)||Gre(this,Jg,new Set(Sr.getValidEnumValues(this._def.values))),!u1(this,Jg).has(t.data)){const i=Sr.objectValues(r);return gt(n,{received:n.data,code:rt.invalid_enum_value,options:i}),Yt}return Ss(t.data)}get enum(){return this._def.values}}Jg=new WeakMap;e_.create=(e,t)=>new e_({values:e,typeName:Gt.ZodNativeEnum,...sr(t)});class em extends fr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.promise&&r.common.async===!1)return gt(r,{code:rt.invalid_type,expected:yt.promise,received:r.parsedType}),Yt;const n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return Ss(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}em.create=(e,t)=>new em({type:e,typeName:Gt.ZodPromise,...sr(t)});class Co extends fr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Gt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:a=>{gt(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return Yt;const l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?Yt:l.status==="dirty"||r.value==="dirty"?Lh(l.value):l});{if(r.value==="aborted")return Yt;const o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?Yt:o.status==="dirty"||r.value==="dirty"?Lh(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Yt:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?Yt:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Wy(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Wy(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);Sr.assertNever(i)}}Co.create=(e,t,r)=>new Co({schema:e,typeName:Gt.ZodEffects,effect:t,...sr(r)});Co.createWithPreprocess=(e,t,r)=>new Co({schema:t,effect:{type:"preprocess",transform:e},typeName:Gt.ZodEffects,...sr(r)});class al extends fr{_parse(t){return this._getType(t)===yt.undefined?Ss(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}al.create=(e,t)=>new al({innerType:e,typeName:Gt.ZodOptional,...sr(t)});class wu extends fr{_parse(t){return this._getType(t)===yt.null?Ss(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}wu.create=(e,t)=>new wu({innerType:e,typeName:Gt.ZodNullable,...sr(t)});class t_ extends fr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}t_.create=(e,t)=>new t_({innerType:e,typeName:Gt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...sr(t)});class r_ extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Gy(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ha(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ha(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}r_.create=(e,t)=>new r_({innerType:e,typeName:Gt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...sr(t)});class p1 extends fr{_parse(t){if(this._getType(t)!==yt.nan){const n=this._getOrReturnCtx(t);return gt(n,{code:rt.invalid_type,expected:yt.nan,received:n.parsedType}),Yt}return{status:"valid",value:t.data}}}p1.create=e=>new p1({typeName:Gt.ZodNaN,...sr(e)});const VGe=Symbol("zod_brand");class YN extends fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class L_ extends fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Yt:s.status==="dirty"?(r.dirty(),Lh(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Yt:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new L_({in:t,out:r,typeName:Gt.ZodPipeline})}}class n_ extends fr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Wy(i)&&(i.value=Object.freeze(i.value)),i);return Gy(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}n_.create=(e,t)=>new n_({innerType:e,typeName:Gt.ZodReadonly,...sr(t)});function Yre(e,t={},r){return e?Jp.create().superRefine((n,i)=>{var s,a;if(!e(n)){const o=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...c,fatal:l})}}):Jp.create()}const UGe={object:An.lazycreate};var Gt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Gt||(Gt={}));const WGe=(e,t={message:`Input not instance of ${e.name}`})=>Yre(r=>r instanceof e,t),bd=wo.create,Qre=_u.create,GGe=p1.create,HGe=xu.create,QN=Hy.create,KGe=of.create,qGe=d1.create,XGe=Ky.create,YGe=qy.create,QGe=Jp.create,ZGe=Hd.create,JGe=nc.create,eHe=f1.create,tHe=Mo.create,Zre=An.create,rHe=An.strictCreate,nHe=Xy.create,iHe=hT.create,sHe=Yy.create,aHe=ul.create,oHe=Qy.create,lHe=h1.create,cHe=lf.create,uHe=rp.create,dHe=Zy.create,fHe=Jy.create,hHe=bu.create,pHe=e_.create,mHe=em.create,G8=Co.create,gHe=al.create,vHe=wu.create,yHe=Co.createWithPreprocess,_He=L_.create,xHe=()=>bd().optional(),bHe=()=>Qre().optional(),wHe=()=>QN().optional(),kHe={string:e=>wo.create({...e,coerce:!0}),number:e=>_u.create({...e,coerce:!0}),boolean:e=>Hy.create({...e,coerce:!0}),bigint:e=>xu.create({...e,coerce:!0}),date:e=>of.create({...e,coerce:!0})},THe=Yt;var xl=Object.freeze({__proto__:null,defaultErrorMap:Zp,setErrorMap:MGe,getErrorMap:l1,makeIssue:c1,EMPTY_PATH:SGe,addIssueToContext:gt,ParseStatus:ls,INVALID:Yt,DIRTY:Lh,OK:Ss,isAborted:eA,isDirty:tA,isValid:Wy,isAsync:Gy,get util(){return Sr},get objectUtil(){return J2},ZodParsedType:yt,getParsedType:Fc,ZodType:fr,datetimeRegex:qre,ZodString:wo,ZodNumber:_u,ZodBigInt:xu,ZodBoolean:Hy,ZodDate:of,ZodSymbol:d1,ZodUndefined:Ky,ZodNull:qy,ZodAny:Jp,ZodUnknown:Hd,ZodNever:nc,ZodVoid:f1,ZodArray:Mo,ZodObject:An,ZodUnion:Xy,ZodDiscriminatedUnion:hT,ZodIntersection:Yy,ZodTuple:ul,ZodRecord:Qy,ZodMap:h1,ZodSet:lf,ZodFunction:rp,ZodLazy:Zy,ZodLiteral:Jy,ZodEnum:bu,ZodNativeEnum:e_,ZodPromise:em,ZodEffects:Co,ZodTransformer:Co,ZodOptional:al,ZodNullable:wu,ZodDefault:t_,ZodCatch:r_,ZodNaN:p1,BRAND:VGe,ZodBranded:YN,ZodPipeline:L_,ZodReadonly:n_,custom:Yre,Schema:fr,ZodSchema:fr,late:UGe,get ZodFirstPartyTypeKind(){return Gt},coerce:kHe,any:QGe,array:tHe,bigint:HGe,boolean:QN,date:KGe,discriminatedUnion:iHe,effect:G8,enum:hHe,function:uHe,instanceof:WGe,intersection:sHe,lazy:dHe,literal:fHe,map:lHe,nan:GGe,nativeEnum:pHe,never:JGe,null:YGe,nullable:vHe,number:Qre,object:Zre,oboolean:wHe,onumber:bHe,optional:gHe,ostring:xHe,pipeline:_He,preprocess:yHe,promise:mHe,record:oHe,set:cHe,strictObject:rHe,string:bd,symbol:qGe,transformer:G8,tuple:aHe,undefined:XGe,union:nHe,unknown:ZGe,void:eHe,NEVER:THe,ZodIssueCode:rt,quotelessJson:TGe,ZodError:ha});const i_={_origin:"https://api.emailjs.com"},MHe=(e,t="https://api.emailjs.com")=>{i_._userID=e,i_._origin=t},Jre=(e,t,r)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class H8{constructor(t){this.status=t.status,this.text=t.responseText}}const ene=(e,t,r={})=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:a})=>{const o=new H8(a);o.status===200||o.text==="OK"?n(o):i(o)}),s.addEventListener("error",({target:a})=>{i(new H8(a))}),s.open("POST",i_._origin+e,!0),Object.keys(r).forEach(a=>{s.setRequestHeader(a,r[a])}),s.send(t)}),SHe=(e,t,r,n)=>{const i=n||i_._userID;return Jre(i,e,t),ene("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},PHe=e=>{let t;if(typeof e=="string"?t=document.querySelector(e):t=e,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},EHe=(e,t,r,n)=>{const i=n||i_._userID,s=PHe(r);Jre(i,e,t);const a=new FormData(s);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),ene("/api/v1.0/email/send-form",a)},ZN={init:MHe,send:SHe,sendForm:EHe},tne=sGe,rne=E.createContext({}),Ls=({...e})=>u.jsx(rne.Provider,{value:{name:e.name},children:u.jsx(cGe,{...e})}),pT=()=>{const e=E.useContext(rne),t=E.useContext(nne),{getFieldState:r,formState:n}=fT(),i=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},nne=E.createContext({}),ys=E.forwardRef(({className:e,...t},r)=>{const n=E.useId();return u.jsx(nne.Provider,{value:{id:n},children:u.jsx("div",{ref:r,className:St("space-y-2",e),...t})})});ys.displayName="FormItem";const na=E.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:i}=pT();return u.jsx(Ur,{ref:r,className:St(n&&"text-destructive",e),htmlFor:i,...t})});na.displayName="FormLabel";const _s=E.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:s}=pT();return u.jsx(uu,{ref:t,id:n,"aria-describedby":r?`${i} ${s}`:`${i}`,"aria-invalid":!!r,...e})});_s.displayName="FormControl";const jHe=E.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=pT();return u.jsx("p",{ref:r,id:n,className:St("text-sm text-muted-foreground",e),...t})});jHe.displayName="FormDescription";const ia=E.forwardRef(({className:e,children:t,...r},n)=>{const{error:i,formMessageId:s}=pT(),a=i?String(i==null?void 0:i.message):t;return a?u.jsx("p",{ref:n,id:s,className:St("text-sm font-medium text-destructive",e),...r,children:a}):null});ia.displayName="FormMessage";function K8(e,[t,r]){return Math.min(r,Math.max(t,e))}var kP=0;function ine(){E.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??q8()),document.body.insertAdjacentElement("beforeend",e[1]??q8()),kP++,()=>{kP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),kP--}},[])}function q8(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var TP="focusScope.autoFocusOnMount",MP="focusScope.autoFocusOnUnmount",X8={bubbles:!1,cancelable:!0},CHe="FocusScope",JN=E.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=E.useState(null),c=Qn(i),f=Qn(s),d=E.useRef(null),h=Nr(t,g=>l(g)),p=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let g=function(_){if(p.paused||!o)return;const b=_.target;o.contains(b)?d.current=b:jc(d.current,{select:!0})},x=function(_){if(p.paused||!o)return;const b=_.relatedTarget;b!==null&&(o.contains(b)||jc(d.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&jc(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(y);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[n,o,p.paused]),E.useEffect(()=>{if(o){Q8.add(p);const g=document.activeElement;if(!o.contains(g)){const y=new CustomEvent(TP,X8);o.addEventListener(TP,c),o.dispatchEvent(y),y.defaultPrevented||(AHe(DHe(sne(o)),{select:!0}),document.activeElement===g&&jc(o))}return()=>{o.removeEventListener(TP,c),setTimeout(()=>{const y=new CustomEvent(MP,X8);o.addEventListener(MP,f),o.dispatchEvent(y),y.defaultPrevented||jc(g??document.body,{select:!0}),o.removeEventListener(MP,f),Q8.remove(p)},0)}}},[o,c,f,p]);const m=E.useCallback(g=>{if(!r&&!n||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(x&&y){const v=g.currentTarget,[_,b]=OHe(v);_&&b?!g.shiftKey&&y===b?(g.preventDefault(),r&&jc(_,{select:!0})):g.shiftKey&&y===_&&(g.preventDefault(),r&&jc(b,{select:!0})):y===v&&g.preventDefault()}},[r,n,p.paused]);return u.jsx(Ft.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});JN.displayName=CHe;function AHe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(jc(n,{select:t}),document.activeElement!==r)return}function OHe(e){const t=sne(e),r=Y8(t,e),n=Y8(t.reverse(),e);return[r,n]}function sne(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Y8(e,t){for(const r of e)if(!$He(r,{upTo:t}))return r}function $He(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function NHe(e){return e instanceof HTMLInputElement&&"select"in e}function jc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&NHe(e)&&t&&e.select()}}var Q8=IHe();function IHe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Z8(e,t),e.unshift(t)},remove(t){var r;e=Z8(e,t),(r=e[0])==null||r.resume()}}}function Z8(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function DHe(e){return e.filter(t=>t.tagName!=="A")}var LHe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Jf=new WeakMap,kx=new WeakMap,Tx={},SP=0,ane=function(e){return e&&(e.host||ane(e.parentNode))},RHe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=ane(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},FHe=function(e,t,r,n){var i=RHe(t,Array.isArray(e)?e:[e]);Tx[r]||(Tx[r]=new WeakMap);var s=Tx[r],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var f=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))f(h);else try{var p=h.getAttribute(n),m=p!==null&&p!=="false",g=(Jf.get(h)||0)+1,x=(s.get(h)||0)+1;Jf.set(h,g),s.set(h,x),a.push(h),g===1&&m&&kx.set(h,!0),x===1&&h.setAttribute(r,"true"),m||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),o.clear(),SP++,function(){a.forEach(function(d){var h=Jf.get(d)-1,p=s.get(d)-1;Jf.set(d,h),s.set(d,p),h||(kx.has(d)||d.removeAttribute(n),kx.delete(d)),p||d.removeAttribute(r)}),SP--,SP||(Jf=new WeakMap,Jf=new WeakMap,kx=new WeakMap,Tx={})}},one=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=LHe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),FHe(n,i,r,"aria-hidden")):function(){return null}},Xo=function(){return Xo=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Xo.apply(this,arguments)};function lne(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function BHe(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var ub="right-scroll-bar-position",db="width-before-scroll-bar",zHe="with-scroll-bars-hidden",VHe="--removed-body-scroll-bar-size";function PP(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function UHe(e,t){var r=E.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var WHe=typeof window<"u"?E.useLayoutEffect:E.useEffect,J8=new WeakMap;function GHe(e,t){var r=UHe(null,function(n){return e.forEach(function(i){return PP(i,n)})});return WHe(function(){var n=J8.get(r);if(n){var i=new Set(n),s=new Set(e),a=r.current;i.forEach(function(o){s.has(o)||PP(o,null)}),s.forEach(function(o){i.has(o)||PP(o,a)})}J8.set(r,e)},[e]),r}function HHe(e){return e}function KHe(e,t){t===void 0&&(t=HHe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var a=t(s,n);return r.push(a),function(){r=r.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(o){return s(o)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var o=r;r=[],o.forEach(s),a=r}var l=function(){var f=a;a=[],f.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(f){a.push(f),c()},filter:function(f){return a=a.filter(f),r}}}};return i}function qHe(e){e===void 0&&(e={});var t=KHe(null);return t.options=Xo({async:!0,ssr:!1},e),t}var cne=function(e){var t=e.sideCar,r=lne(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,Xo({},r))};cne.isSideCarExport=!0;function XHe(e,t){return e.useMedium(t),cne}var une=qHe(),EP=function(){},mT=E.forwardRef(function(e,t){var r=E.useRef(null),n=E.useState({onScrollCapture:EP,onWheelCapture:EP,onTouchMoveCapture:EP}),i=n[0],s=n[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,v=e.gapMode,_=lne(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,w=GHe([r,t]),k=Xo(Xo({},_),i);return E.createElement(E.Fragment,null,f&&E.createElement(b,{sideCar:une,removeScrollBar:c,shards:d,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:v}),a?E.cloneElement(E.Children.only(o),Xo(Xo({},k),{ref:w})):E.createElement(y,Xo({},k,{className:l,ref:w}),o))});mT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mT.classNames={fullWidth:db,zeroRight:ub};var YHe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function QHe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=YHe();return t&&e.setAttribute("nonce",t),e}function ZHe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function JHe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var e9e=function(){var e=0,t=null;return{add:function(r){e==0&&(t=QHe())&&(ZHe(t,r),JHe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},t9e=function(){var e=e9e();return function(t,r){E.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dne=function(){var e=t9e(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},r9e={left:0,top:0,right:0,gap:0},jP=function(e){return parseInt(e||"",10)||0},n9e=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[jP(r),jP(n),jP(i)]},i9e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return r9e;var t=n9e(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},s9e=dne(),np="data-scroll-locked",a9e=function(e,t,r,n){var i=e.left,s=e.top,a=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(zHe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(np,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ub,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(db,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ub," .").concat(ub,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(db," .").concat(db,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(np,`] {
    `).concat(VHe,": ").concat(o,`px;
  }
`)},eW=function(){var e=parseInt(document.body.getAttribute(np)||"0",10);return isFinite(e)?e:0},o9e=function(){E.useEffect(function(){return document.body.setAttribute(np,(eW()+1).toString()),function(){var e=eW()-1;e<=0?document.body.removeAttribute(np):document.body.setAttribute(np,e.toString())}},[])},l9e=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;o9e();var s=E.useMemo(function(){return i9e(i)},[i]);return E.createElement(s9e,{styles:a9e(s,!t,i,r?"":"!important")})},nA=!1;if(typeof window<"u")try{var Mx=Object.defineProperty({},"passive",{get:function(){return nA=!0,!0}});window.addEventListener("test",Mx,Mx),window.removeEventListener("test",Mx,Mx)}catch{nA=!1}var eh=nA?{passive:!1}:!1,c9e=function(e){return e.tagName==="TEXTAREA"},fne=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!c9e(e)&&r[t]==="visible")},u9e=function(e){return fne(e,"overflowY")},d9e=function(e){return fne(e,"overflowX")},tW=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=hne(e,n);if(i){var s=pne(e,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},f9e=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},h9e=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},hne=function(e,t){return e==="v"?u9e(t):d9e(t)},pne=function(e,t){return e==="v"?f9e(t):h9e(t)},p9e=function(e,t){return e==="h"&&t==="rtl"?-1:1},m9e=function(e,t,r,n,i){var s=p9e(e,window.getComputedStyle(t).direction),a=s*n,o=r.target,l=t.contains(o),c=!1,f=a>0,d=0,h=0;do{var p=pne(e,o),m=p[0],g=p[1],x=p[2],y=g-x-s*m;(m||y)&&hne(e,o)&&(d+=y,h+=m),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(f&&(Math.abs(d)<1||!i)||!f&&(Math.abs(h)<1||!i))&&(c=!0),c},Sx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rW=function(e){return[e.deltaX,e.deltaY]},nW=function(e){return e&&"current"in e?e.current:e},g9e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},v9e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},y9e=0,th=[];function _9e(e){var t=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),i=E.useState(y9e++)[0],s=E.useState(dne)[0],a=E.useRef(e);E.useEffect(function(){a.current=e},[e]),E.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=BHe([e.lockRef.current],(e.shards||[]).map(nW),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=E.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var y=Sx(g),v=r.current,_="deltaX"in g?g.deltaX:v[0]-y[0],b="deltaY"in g?g.deltaY:v[1]-y[1],w,k=g.target,T=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in g&&T==="h"&&k.type==="range")return!1;var M=tW(T,k);if(!M)return!0;if(M?w=T:(w=T==="v"?"h":"v",M=tW(T,k)),!M)return!1;if(!n.current&&"changedTouches"in g&&(_||b)&&(n.current=w),!w)return!0;var j=n.current||w;return m9e(j,x,g,j==="h"?_:b,!0)},[]),l=E.useCallback(function(g){var x=g;if(!(!th.length||th[th.length-1]!==s)){var y="deltaY"in x?rW(x):Sx(x),v=t.current.filter(function(w){return w.name===x.type&&(w.target===x.target||x.target===w.shadowParent)&&g9e(w.delta,y)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var _=(a.current.shards||[]).map(nW).filter(Boolean).filter(function(w){return w.contains(x.target)}),b=_.length>0?o(x,_[0]):!a.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),c=E.useCallback(function(g,x,y,v){var _={name:g,delta:x,target:y,should:v,shadowParent:x9e(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(b){return b!==_})},1)},[]),f=E.useCallback(function(g){r.current=Sx(g),n.current=void 0},[]),d=E.useCallback(function(g){c(g.type,rW(g),g.target,o(g,e.lockRef.current))},[]),h=E.useCallback(function(g){c(g.type,Sx(g),g.target,o(g,e.lockRef.current))},[]);E.useEffect(function(){return th.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,eh),document.addEventListener("touchmove",l,eh),document.addEventListener("touchstart",f,eh),function(){th=th.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,eh),document.removeEventListener("touchmove",l,eh),document.removeEventListener("touchstart",f,eh)}},[]);var p=e.removeScrollBar,m=e.inert;return E.createElement(E.Fragment,null,m?E.createElement(s,{styles:v9e(i)}):null,p?E.createElement(l9e,{gapMode:e.gapMode}):null)}function x9e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const b9e=XHe(une,_9e);var eI=E.forwardRef(function(e,t){return E.createElement(mT,Xo({},e,{ref:t,sideCar:b9e}))});eI.classNames=mT.classNames;var w9e=[" ","Enter","ArrowUp","ArrowDown"],k9e=[" ","Enter"],R_="Select",[gT,vT,T9e]=m_(R_),[Om,vXe]=vf(R_,[T9e,Y1]),yT=Y1(),[M9e,Iu]=Om(R_),[S9e,P9e]=Om(R_),mne=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:f,autoComplete:d,disabled:h,required:p,form:m}=e,g=yT(t),[x,y]=E.useState(null),[v,_]=E.useState(null),[b,w]=E.useState(!1),k=hk(c),[T=!1,M]=ql({prop:n,defaultProp:i,onChange:s}),[j,C]=ql({prop:a,defaultProp:o,onChange:l}),R=E.useRef(null),I=x?m||!!x.closest("form"):!0,[N,z]=E.useState(new Set),V=Array.from(N).map(G=>G.props.value).join(";");return u.jsx(Yme,{...g,children:u.jsxs(M9e,{required:p,scope:t,trigger:x,onTriggerChange:y,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:tl(),value:j,onValueChange:C,open:T,onOpenChange:M,dir:k,triggerPointerDownPosRef:R,disabled:h,children:[u.jsx(gT.Provider,{scope:t,children:u.jsx(S9e,{scope:e.__scopeSelect,onNativeOptionAdd:E.useCallback(G=>{z(H=>new Set(H).add(G))},[]),onNativeOptionRemove:E.useCallback(G=>{z(H=>{const O=new Set(H);return O.delete(G),O})},[]),children:r})}),I?u.jsxs(Bne,{"aria-hidden":!0,required:p,tabIndex:-1,name:f,autoComplete:d,value:j,onChange:G=>C(G.target.value),disabled:h,form:m,children:[j===void 0?u.jsx("option",{value:""}):null,Array.from(N)]},V):null]})})};mne.displayName=R_;var gne="SelectTrigger",vne=E.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=yT(r),a=Iu(gne,r),o=a.disabled||n,l=Nr(t,a.onTriggerChange),c=vT(r),f=E.useRef("touch"),[d,h,p]=zne(g=>{const x=c().filter(_=>!_.disabled),y=x.find(_=>_.value===a.value),v=Vne(x,g,y);v!==void 0&&a.onValueChange(v.value)}),m=g=>{o||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return u.jsx(TX,{asChild:!0,...s,children:u.jsx(Ft.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Fne(a.value)?"":void 0,...i,ref:l,onClick:xt(i.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&m(g)}),onPointerDown:xt(i.onPointerDown,g=>{f.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:xt(i.onKeyDown,g=>{const x=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(x&&g.key===" ")&&w9e.includes(g.key)&&(m(),g.preventDefault())})})})});vne.displayName=gne;var yne="SelectValue",_ne=E.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...o}=e,l=Iu(yne,r),{onValueNodeHasChildrenChange:c}=l,f=s!==void 0,d=Nr(t,l.onValueNodeChange);return ki(()=>{c(f)},[c,f]),u.jsx(Ft.span,{...o,ref:d,style:{pointerEvents:"none"},children:Fne(l.value)?u.jsx(u.Fragment,{children:a}):s})});_ne.displayName=yne;var E9e="SelectIcon",xne=E.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return u.jsx(Ft.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});xne.displayName=E9e;var j9e="SelectPortal",bne=e=>u.jsx(B1,{asChild:!0,...e});bne.displayName=j9e;var cf="SelectContent",wne=E.forwardRef((e,t)=>{const r=Iu(cf,e.__scopeSelect),[n,i]=E.useState();if(ki(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?gf.createPortal(u.jsx(kne,{scope:e.__scopeSelect,children:u.jsx(gT.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),s):null}return u.jsx(Tne,{...e,ref:t})});wne.displayName=cf;var lo=10,[kne,Du]=Om(cf),C9e="SelectContentImpl",Tne=E.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:x,...y}=e,v=Iu(cf,r),[_,b]=E.useState(null),[w,k]=E.useState(null),T=Nr(t,ye=>b(ye)),[M,j]=E.useState(null),[C,R]=E.useState(null),I=vT(r),[N,z]=E.useState(!1),V=E.useRef(!1);E.useEffect(()=>{if(_)return one(_)},[_]),ine();const G=E.useCallback(ye=>{const[$e,...Se]=I().map(re=>re.ref.current),[ge]=Se.slice(-1),te=document.activeElement;for(const re of ye)if(re===te||(re==null||re.scrollIntoView({block:"nearest"}),re===$e&&w&&(w.scrollTop=0),re===ge&&w&&(w.scrollTop=w.scrollHeight),re==null||re.focus(),document.activeElement!==te))return},[I,w]),H=E.useCallback(()=>G([M,_]),[G,M,_]);E.useEffect(()=>{N&&H()},[N,H]);const{onOpenChange:O,triggerPointerDownPosRef:q}=v;E.useEffect(()=>{if(_){let ye={x:0,y:0};const $e=ge=>{var te,re;ye={x:Math.abs(Math.round(ge.pageX)-(((te=q.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((re=q.current)==null?void 0:re.y)??0))}},Se=ge=>{ye.x<=10&&ye.y<=10?ge.preventDefault():_.contains(ge.target)||O(!1),document.removeEventListener("pointermove",$e),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$e),document.removeEventListener("pointerup",Se,{capture:!0})}}},[_,O,q]),E.useEffect(()=>{const ye=()=>O(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[O]);const[ee,B]=zne(ye=>{const $e=I().filter(te=>!te.disabled),Se=$e.find(te=>te.ref.current===document.activeElement),ge=Vne($e,ye,Se);ge&&setTimeout(()=>ge.ref.current.focus())}),D=E.useCallback((ye,$e,Se)=>{const ge=!V.current&&!Se;(v.value!==void 0&&v.value===$e||ge)&&(j(ye),ge&&(V.current=!0))},[v.value]),K=E.useCallback(()=>_==null?void 0:_.focus(),[_]),oe=E.useCallback((ye,$e,Se)=>{const ge=!V.current&&!Se;(v.value!==void 0&&v.value===$e||ge)&&R(ye)},[v.value]),_e=n==="popper"?iA:Mne,ue=_e===iA?{side:o,sideOffset:l,align:c,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:x}:{};return u.jsx(kne,{scope:r,content:_,viewport:w,onViewportChange:k,itemRefCallback:D,selectedItem:M,onItemLeave:K,itemTextRefCallback:oe,focusSelectedItem:H,selectedItemText:C,position:n,isPositioned:N,searchRef:ee,children:u.jsx(eI,{as:uu,allowPinchZoom:!0,children:u.jsx(JN,{asChild:!0,trapped:v.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:xt(i,ye=>{var $e;($e=v.trigger)==null||$e.focus({preventScroll:!0}),ye.preventDefault()}),children:u.jsx(am,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:u.jsx(_e,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:ye=>ye.preventDefault(),...y,...ue,onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:xt(y.onKeyDown,ye=>{const $e=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!$e&&ye.key.length===1&&B(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let ge=I().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const te=ye.target,re=ge.indexOf(te);ge=ge.slice(re+1)}setTimeout(()=>G(ge)),ye.preventDefault()}})})})})})})});Tne.displayName=C9e;var A9e="SelectItemAlignedPosition",Mne=E.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=Iu(cf,r),a=Du(cf,r),[o,l]=E.useState(null),[c,f]=E.useState(null),d=Nr(t,T=>f(T)),h=vT(r),p=E.useRef(!1),m=E.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:y,focusSelectedItem:v}=a,_=E.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&g&&x&&y){const T=s.trigger.getBoundingClientRect(),M=c.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),C=y.getBoundingClientRect();if(s.dir!=="rtl"){const te=C.left-M.left,re=j.left-te,J=T.left-re,we=T.width+J,Ne=Math.max(we,M.width),je=window.innerWidth-lo,Pe=K8(re,[lo,Math.max(lo,je-Ne)]);o.style.minWidth=we+"px",o.style.left=Pe+"px"}else{const te=M.right-C.right,re=window.innerWidth-j.right-te,J=window.innerWidth-T.right-re,we=T.width+J,Ne=Math.max(we,M.width),je=window.innerWidth-lo,Pe=K8(re,[lo,Math.max(lo,je-Ne)]);o.style.minWidth=we+"px",o.style.right=Pe+"px"}const R=h(),I=window.innerHeight-lo*2,N=g.scrollHeight,z=window.getComputedStyle(c),V=parseInt(z.borderTopWidth,10),G=parseInt(z.paddingTop,10),H=parseInt(z.borderBottomWidth,10),O=parseInt(z.paddingBottom,10),q=V+G+N+O+H,ee=Math.min(x.offsetHeight*5,q),B=window.getComputedStyle(g),D=parseInt(B.paddingTop,10),K=parseInt(B.paddingBottom,10),oe=T.top+T.height/2-lo,_e=I-oe,ue=x.offsetHeight/2,ye=x.offsetTop+ue,$e=V+G+ye,Se=q-$e;if($e<=oe){const te=R.length>0&&x===R[R.length-1].ref.current;o.style.bottom="0px";const re=c.clientHeight-g.offsetTop-g.offsetHeight,J=Math.max(_e,ue+(te?K:0)+re+H),we=$e+J;o.style.height=we+"px"}else{const te=R.length>0&&x===R[0].ref.current;o.style.top="0px";const J=Math.max(oe,V+g.offsetTop+(te?D:0)+ue)+Se;o.style.height=J+"px",g.scrollTop=$e-oe+g.offsetTop}o.style.margin=`${lo}px 0`,o.style.minHeight=ee+"px",o.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,o,c,g,x,y,s.dir,n]);ki(()=>_(),[_]);const[b,w]=E.useState();ki(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const k=E.useCallback(T=>{T&&m.current===!0&&(_(),v==null||v(),m.current=!1)},[_,v]);return u.jsx($9e,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:u.jsx(Ft.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Mne.displayName=A9e;var O9e="SelectPopperPosition",iA=E.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=lo,...s}=e,a=yT(r);return u.jsx(MX,{...a,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});iA.displayName=O9e;var[$9e,tI]=Om(cf,{}),sA="SelectViewport",Sne=E.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=Du(sA,r),a=tI(sA,r),o=Nr(t,s.onViewportChange),l=E.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),u.jsx(gT.Slot,{scope:r,children:u.jsx(Ft.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:xt(i.onScroll,c=>{const f=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const p=Math.abs(l.current-f.scrollTop);if(p>0){const m=window.innerHeight-lo*2,g=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(g,x);if(y<m){const v=y+p,_=Math.min(m,v),b=v-_;d.style.height=_+"px",d.style.bottom==="0px"&&(f.scrollTop=b>0?b:0,d.style.justifyContent="flex-end")}}}l.current=f.scrollTop})})})]})});Sne.displayName=sA;var Pne="SelectGroup",[N9e,I9e]=Om(Pne),D9e=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=tl();return u.jsx(N9e,{scope:r,id:i,children:u.jsx(Ft.div,{role:"group","aria-labelledby":i,...n,ref:t})})});D9e.displayName=Pne;var Ene="SelectLabel",jne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=I9e(Ene,r);return u.jsx(Ft.div,{id:i.id,...n,ref:t})});jne.displayName=Ene;var m1="SelectItem",[L9e,Cne]=Om(m1),Ane=E.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=e,o=Iu(m1,r),l=Du(m1,r),c=o.value===n,[f,d]=E.useState(s??""),[h,p]=E.useState(!1),m=Nr(t,v=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,v,n,i)}),g=tl(),x=E.useRef("touch"),y=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(L9e,{scope:r,value:n,disabled:i,textId:g,isSelected:c,onItemTextChange:E.useCallback(v=>{d(_=>_||((v==null?void 0:v.textContent)??"").trim())},[]),children:u.jsx(gT.ItemSlot,{scope:r,value:n,disabled:i,textValue:f,children:u.jsx(Ft.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:xt(a.onFocus,()=>p(!0)),onBlur:xt(a.onBlur,()=>p(!1)),onClick:xt(a.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:xt(a.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:xt(a.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:xt(a.onPointerMove,v=>{var _;x.current=v.pointerType,i?(_=l.onItemLeave)==null||_.call(l):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xt(a.onPointerLeave,v=>{var _;v.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:xt(a.onKeyDown,v=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&v.key===" "||(k9e.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});Ane.displayName=m1;var ev="SelectItemText",One=E.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,a=Iu(ev,r),o=Du(ev,r),l=Cne(ev,r),c=P9e(ev,r),[f,d]=E.useState(null),h=Nr(t,y=>d(y),l.onItemTextChange,y=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,y,l.value,l.disabled)}),p=f==null?void 0:f.textContent,m=E.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=c;return ki(()=>(g(m),()=>x(m)),[g,x,m]),u.jsxs(u.Fragment,{children:[u.jsx(Ft.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?gf.createPortal(s.children,a.valueNode):null]})});One.displayName=ev;var $ne="SelectItemIndicator",Nne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Cne($ne,r).isSelected?u.jsx(Ft.span,{"aria-hidden":!0,...n,ref:t}):null});Nne.displayName=$ne;var aA="SelectScrollUpButton",Ine=E.forwardRef((e,t)=>{const r=Du(aA,e.__scopeSelect),n=tI(aA,e.__scopeSelect),[i,s]=E.useState(!1),a=Nr(t,n.onScrollButtonChange);return ki(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollTop>0;s(c)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?u.jsx(Lne,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Ine.displayName=aA;var oA="SelectScrollDownButton",Dne=E.forwardRef((e,t)=>{const r=Du(oA,e.__scopeSelect),n=tI(oA,e.__scopeSelect),[i,s]=E.useState(!1),a=Nr(t,n.onScrollButtonChange);return ki(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<c;s(f)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?u.jsx(Lne,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Dne.displayName=oA;var Lne=E.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=Du("SelectScrollButton",r),a=E.useRef(null),o=vT(r),l=E.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),ki(()=>{var f;const c=o().find(d=>d.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[o]),u.jsx(Ft.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:xt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xt(i.onPointerLeave,()=>{l()})})}),R9e="SelectSeparator",Rne=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return u.jsx(Ft.div,{"aria-hidden":!0,...n,ref:t})});Rne.displayName=R9e;var lA="SelectArrow",F9e=E.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=yT(r),s=Iu(lA,r),a=Du(lA,r);return s.open&&a.position==="popper"?u.jsx(SX,{...i,...n,ref:t}):null});F9e.displayName=lA;function Fne(e){return e===""||e===void 0}var Bne=E.forwardRef((e,t)=>{const{value:r,...n}=e,i=E.useRef(null),s=Nr(t,i),a=N$(r);return E.useEffect(()=>{const o=i.current,l=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==r&&f){const d=new Event("change",{bubbles:!0});f.call(o,r),o.dispatchEvent(d)}},[a,r]),u.jsx(g_,{asChild:!0,children:u.jsx("select",{...n,ref:s,defaultValue:r})})});Bne.displayName="BubbleSelect";function zne(e){const t=Qn(e),r=E.useRef(""),n=E.useRef(0),i=E.useCallback(a=>{const o=r.current+a;t(o),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=E.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function Vne(e,t,r){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let a=B9e(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==r));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function B9e(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var z9e=mne,Une=vne,V9e=_ne,U9e=xne,W9e=bne,Wne=wne,G9e=Sne,Gne=jne,Hne=Ane,H9e=One,K9e=Nne,Kne=Ine,qne=Dne,Xne=Rne;const Yne=z9e,Qne=V9e,rI=E.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(Une,{ref:n,className:St("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,u.jsx(U9e,{asChild:!0,children:u.jsx(Jd,{className:"h-4 w-4 opacity-50"})})]}));rI.displayName=Une.displayName;const Zne=E.forwardRef(({className:e,...t},r)=>u.jsx(Kne,{ref:r,className:St("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(AO,{className:"h-4 w-4"})}));Zne.displayName=Kne.displayName;const Jne=E.forwardRef(({className:e,...t},r)=>u.jsx(qne,{ref:r,className:St("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(Jd,{className:"h-4 w-4"})}));Jne.displayName=qne.displayName;const nI=E.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>u.jsx(W9e,{children:u.jsxs(Wne,{ref:i,className:St("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[u.jsx(Zne,{}),u.jsx(G9e,{className:St("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),u.jsx(Jne,{})]})}));nI.displayName=Wne.displayName;const q9e=E.forwardRef(({className:e,...t},r)=>u.jsx(Gne,{ref:r,className:St("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));q9e.displayName=Gne.displayName;const Rh=E.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(Hne,{ref:n,className:St("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(K9e,{children:u.jsx(CO,{className:"h-4 w-4"})})}),u.jsx(H9e,{children:t})]}));Rh.displayName=Hne.displayName;const X9e=E.forwardRef(({className:e,...t},r)=>u.jsx(Xne,{ref:r,className:St("-mx-1 my-1 h-px bg-muted",e),...t}));X9e.displayName=Xne.displayName;const iW="service_6r9m8wf",sW="template_on07od7",aW="wRFDBmEPD5mCrpb2a",Y9e=Zre({name:bd().min(1,"Nimi on pakollinen"),email:bd().email("Virheellinen shkpostiosoite").min(1,"Shkpostiosoite on pakollinen"),phone:bd().min(1,"Puhelinnumero on pakollinen"),address:bd().min(1,"Katuosoite on pakollinen"),reason:bd().min(1,"Syy peruutukselle on pakollinen"),confirmation:QN().refine(e=>e===!0,"Vahvistus on pakollinen")}),Q9e=()=>{const[e,t]=E.useState(!1),{toast:r}=Oo(),n=zre({resolver:Ure(Y9e),defaultValues:{name:"",email:"",phone:"",address:"",reason:"",confirmation:!1}});E.useEffect(()=>{window.scrollTo(0,0)},[]);const i=async a=>{t(!0);try{console.log("EmailJS Configuration:",{SERVICE_ID:iW,TEMPLATE_ID:sW,PUBLIC_KEY:aW.substring(0,5)+"..."});const o={subject:"Irtisanomislomake",from_name:a.name,phone:a.phone,from_email:a.email,message:`Irtisanomislomake:

Nimi: ${a.name}
Shkposti: ${a.email}
Puhelinnumero: ${a.phone}
Osoite: ${a.address}
Syy peruutukselle: ${a.reason}
Vahvistus: ${a.confirmation?"Kyll":"Ei"}`,to_name:"OmaVerkkoturva Team",reply_to:a.email};console.log("Template Parameters:",o);const l=await ZN.send(iW,sW,o,aW);console.log("EmailJS Success:",l),r({title:"Irtisanomislomake lhetetty",description:"Kiitos irtisanomislomakkeestasi. Ksittelemme sen mahdollisimman pian."}),n.reset()}catch(o){console.error("EmailJS error:",o),r({title:"Virhe",description:"Lomakkeen lhetyksess tapahtui virhe. Yrit uudelleen.",variant:"destructive"})}finally{t(!1)}},s=["En tarvitse palvelua en","Palvelu on liian kallis","Lysin paremman vaihtoehdon","Teknisi ongelmia","Huono asiakaspalvelu","Muu syy"];return u.jsx(bi,{showContact:!1,children:u.jsx("section",{className:"pt-32 pb-16 px-4 sm:px-6 lg:px-8 bg-gray-50 min-h-screen",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Tlt pystyt irtisanomaan palvelun"})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-24",children:[u.jsxs("div",{className:"flex flex-col justify-center",children:[u.jsx("p",{className:"text-gray-900 text-xl font-semibold leading-relaxed mb-6",children:"Kiitos, ett olet ollut mukana turvaamassa verkkoa kanssamme."}),u.jsx("p",{className:"text-gray-900 text-lg leading-relaxed mb-6",children:"Arvostamme sit, ett valitsit OmaVerkkoturvan suojaamaan digitaalisia tietojasi ja identiteettisi. Jokainen asiakas on meille trke, ja olemme kiitollisia luottamuksesta, jonka olet meille antanut."}),u.jsx("p",{className:"text-gray-900 text-lg leading-relaxed mb-6",children:"Ymmrrmme, ett elmntilanteet ja tarpeet voivat muuttua. Jos ptt lopettaa palvelun, toivomme, ett kokemuksesi on ollut hydyllinen ja ett tarjoamamme turva on tuonut sinulle mielenrauhaa verkossa liikkuessasi."}),u.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:"Jos mielesssi on kysyttv irtisanomiseen tai tietoturvaan liittyen, asiakastukemme auttaa mielelln. Ja mikli joskus tulevaisuudessa haluat palata asiakkaaksemme, toivotamme sinut lmpimsti tervetulleeksi takaisin."})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("img",{src:"/lovable-uploads/e965541f-fa90-41e5-a251-5e576e0ac7bd.png",alt:"Tiimity ja yhteisty",className:"w-full h-auto rounded-lg shadow-lg"})})]}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Irtisanomislomake"}),u.jsx(tne,{...n,children:u.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[u.jsx(Ls,{control:n.control,name:"name",render:({field:a})=>u.jsxs(ys,{children:[u.jsx(na,{children:"Etu- ja sukunimi"}),u.jsx(_s,{children:u.jsx(wr,{placeholder:"Nimi",...a})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:n.control,name:"email",render:({field:a})=>u.jsxs(ys,{children:[u.jsx(na,{children:"Shkpostiosoite *"}),u.jsx(_s,{children:u.jsx(wr,{type:"email",placeholder:"shkposti@esimerkki.fi",...a})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:n.control,name:"phone",render:({field:a})=>u.jsxs(ys,{children:[u.jsx(na,{children:"Puhelinnumero *"}),u.jsx(_s,{children:u.jsx(wr,{placeholder:"040 123 4567",...a})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:n.control,name:"address",render:({field:a})=>u.jsxs(ys,{children:[u.jsx(na,{children:"Katuosoite *"}),u.jsx(_s,{children:u.jsx(wr,{placeholder:"Katuosoite 1, 00100 Helsinki",...a})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:n.control,name:"reason",render:({field:a})=>u.jsxs(ys,{children:[u.jsx(na,{children:"Syy peruutukselle *"}),u.jsxs(Yne,{onValueChange:a.onChange,defaultValue:a.value,children:[u.jsx(_s,{children:u.jsx(rI,{children:u.jsx(Qne,{placeholder:"Valitse syy"})})}),u.jsx(nI,{children:s.map(o=>u.jsx(Rh,{value:o,children:o},o))})]}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:n.control,name:"confirmation",render:({field:a})=>u.jsxs(ys,{className:"flex flex-row items-start space-x-3 space-y-0",children:[u.jsx(_s,{children:u.jsx(_m,{checked:a.value,onCheckedChange:a.onChange})}),u.jsx("div",{className:"space-y-1 leading-none",children:u.jsx(na,{className:"text-sm",children:"Vahvistan tyttneeni lomakkeen omilla tiedoillani."})}),u.jsx(ia,{})]})}),u.jsx(ln,{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-blue-900 to-blue-800 hover:from-blue-800 hover:to-blue-700 text-white py-3 px-6 rounded-full transition-all font-medium disabled:opacity-70",children:e?"Lhetetn...":"Lhet irtisanomislomake"})]})})]})})]})})})},eie=E.forwardRef(({className:e,...t},r)=>u.jsx("textarea",{className:St("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));eie.displayName="Textarea";const Z9e=xl.object({subject:xl.string().min(1,"Valitse yhteydenoton aihe"),name:xl.string().min(2,"Nimi on pakollinen"),phone:xl.string().min(5,"Puhelinnumero on pakollinen"),email:xl.string().email("Syt kelvollinen shkpostiosoite"),message:xl.string().min(1,"Viesti on pakollinen"),privacy:xl.boolean().refine(e=>e===!0,"Hyvksy henkiltietojenksittely"),honeypot:xl.string().max(0,"Bot detected"),timestamp:xl.number()}),J9e="service_6r9m8wf",eKe="template_on07od7",tKe="wRFDBmEPD5mCrpb2a",rKe=()=>{const[e,t]=E.useState(!1),[r]=E.useState(Date.now()),n=js(),{toast:i}=Oo(),s=zre({resolver:Ure(Z9e),defaultValues:{subject:"",name:"",phone:"",email:"",message:"",privacy:!1,honeypot:"",timestamp:r}}),a=async o=>{t(!0);try{if(o.honeypot){i({title:"Virhe",description:"Lomakkeen lhetyksess tapahtui virhe. Yrit uudelleen.",variant:"destructive"});return}if(Date.now()-o.timestamp<3e3){i({title:"Virhe",description:"Tarkista viestisi ennen lhettmist.",variant:"destructive"}),t(!1);return}const{honeypot:c,timestamp:f,privacy:d,...h}=o,p={subject:h.subject,from_name:h.name,phone:h.phone,from_email:h.email,message:`Yhteydenotto: ${h.subject}

Lhettjn tiedot:
Nimi: ${h.name}
Shkposti: ${h.email}
Puhelinnumero: ${h.phone}

Viesti:
${h.message}`,to_name:"OmaVerkkoturva Team",reply_to:h.email};await ZN.send(J9e,eKe,p,tKe),i({title:"Viesti lhetetty!",description:"Otamme sinuun yhteytt pian.",variant:"default"}),s.reset({subject:"",name:"",phone:"",email:"",message:"",privacy:!1,honeypot:"",timestamp:Date.now()})}catch(l){console.error("Error sending email:",l),i({title:"Virhe",description:"Viestin lhetyksess tapahtui virhe. Yrit myhemmin uudelleen.",variant:"destructive"})}finally{t(!1)}};return u.jsx("section",{id:"contact",className:"pt-32 pb-16 px-4 sm:px-6 lg:px-8 bg-gray-50",children:u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[u.jsx("div",{className:"space-y-8",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Ota yhteytt"}),u.jsx("div",{className:"mb-8",children:u.jsx("a",{href:"mailto:tuki@omaverkkoturva.fi",className:"text-xl text-black hover:underline font-medium",children:"tuki@omaverkkoturva.fi"})}),u.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[u.jsx(y_,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{children:[u.jsx("a",{href:"tel:0451211663",className:"text-xl font-medium text-gray-900 underline hover:no-underline",children:"0451211663"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Asiakaspalvelumme palvelee puhelimitse jokaisena arkipivn klo. 10:00-16:00. Puhelun hinta: mpm/pvm"})]})]}),u.jsx("div",{className:"space-y-4 text-gray-700",children:u.jsx("p",{children:"Pyrimme vastaamaan shkpostiyhteydenottoihin 1-2 arkipivn sisll. Asiakkaanamme olet oikeutettu nopeaan sek veloituksettomaan apuun ja tukeen."})}),u.jsxs("div",{className:"mt-32",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Haluatko irtisanoa tuotteen?"}),u.jsx("button",{onClick:()=>n("/irtisanomislomake"),className:"px-6 py-3 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-100 transition-colors",children:"Irtisanomislomake"}),u.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[u.jsx("strong",{children:"HUOM:"})," Irtisanomiset ksitelln vain puhelimitse tai irtisanomislomakkeella."]})]})]})}),u.jsx("div",{className:"rounded-lg p-8 text-white",style:{background:`linear-gradient(
                to bottom,
                rgba(30, 58, 138, 1) 0%,
                rgba(30, 58, 138, 0.95) 25%,
                rgba(30, 58, 138, 0.9) 50%,
                rgba(30, 58, 138, 0.85) 75%,
                rgba(30, 58, 138, 0.8) 100%
              )`},children:u.jsx(tne,{...s,children:u.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-6",children:[u.jsx(Ls,{control:s.control,name:"subject",render:({field:o})=>u.jsxs(ys,{children:[u.jsx(na,{className:"text-white font-medium",children:"Yhteydenoton aihe *"}),u.jsxs(Yne,{onValueChange:o.onChange,defaultValue:o.value,children:[u.jsx(_s,{children:u.jsx(rI,{className:"bg-white text-gray-900",children:u.jsx(Qne,{placeholder:"Valitse aihe"})})}),u.jsxs(nI,{children:[u.jsx(Rh,{value:"tuki",children:"Tuki ja apu"}),u.jsx(Rh,{value:"laskutus",children:"Laskutus"}),u.jsx(Rh,{value:"tekninen",children:"Tekninen ongelma"}),u.jsx(Rh,{value:"muu",children:"Muu aihe"})]})]}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:s.control,name:"name",render:({field:o})=>u.jsxs(ys,{children:[u.jsx(na,{className:"text-white font-medium",children:"Etu- ja sukunimi *"}),u.jsx(_s,{children:u.jsx(wr,{placeholder:"Etu- ja sukunimi",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:s.control,name:"phone",render:({field:o})=>u.jsxs(ys,{children:[u.jsx(na,{className:"text-white font-medium",children:"Puhelinnumero *"}),u.jsx(_s,{children:u.jsx(wr,{placeholder:"044 123 4567",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:s.control,name:"email",render:({field:o})=>u.jsxs(ys,{children:[u.jsx(na,{className:"text-white font-medium",children:"Shkpostiosoite *"}),u.jsx(_s,{children:u.jsx(wr,{type:"email",placeholder:"esimerkki@esimerkki.fi",className:"bg-white text-gray-900 placeholder-gray-500",...o})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:s.control,name:"message",render:({field:o})=>u.jsxs(ys,{children:[u.jsx(na,{className:"text-white font-medium",children:"Viesti *"}),u.jsx(_s,{children:u.jsx(eie,{placeholder:"Kerro listietoja yhteydenottosi liittyen",className:"min-h-[120px] bg-white text-gray-900 placeholder-gray-500 resize-none",...o})}),u.jsx(ia,{})]})}),u.jsx(Ls,{control:s.control,name:"privacy",render:({field:o})=>u.jsxs(ys,{className:"flex flex-row items-start space-x-3 space-y-0",children:[u.jsx(_s,{children:u.jsx(_m,{checked:o.value,onCheckedChange:o.onChange,className:"bg-white"})}),u.jsxs("div",{className:"space-y-1 leading-none",children:[u.jsxs(na,{className:"text-sm text-white",children:["Lhettmll tmn lomakkeen vakuutan, ett antamani tiedot ovat oikeita. Lisksi hyvksyn henkiltietojeni ksittelyn OmaVerkkoturvan"," ",u.jsx("a",{href:"/tietosuojaseloste",className:"underline hover:no-underline",children:"tietosuojaselosteen"})," ","mukaisesti."]}),u.jsx(ia,{})]})]})}),u.jsx(Ls,{control:s.control,name:"honeypot",render:({field:o})=>u.jsx(ys,{className:"hidden",children:u.jsx(_s,{children:u.jsx(wr,{...o,tabIndex:-1})})})}),u.jsx(Ls,{control:s.control,name:"timestamp",render:({field:o})=>u.jsx(ys,{className:"hidden",children:u.jsx(_s,{children:u.jsx(wr,{type:"hidden",...o})})})}),u.jsx("button",{type:"submit",disabled:e,className:"w-full bg-white hover:bg-gray-100 text-black py-3 px-6 rounded-full transition-colors font-medium disabled:opacity-70",children:e?"Lhetetn...":"Lhet yhteydenotto"})]})})})]})})})},nKe=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx(bi,{showContact:!1,children:u.jsx(rKe,{})})),fb=new Map,yd=[],iKe=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=fb.get(e);if(n===void 0)fb.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const i=yd.indexOf(e);i!==-1&&yd.splice(i,1);for(let s=0;s<yd.length;s++)if(fb.get(yd[s]).priority<=r){yd.splice(s,0,e);return}yd.push(e)}return}throw new TypeError("not a valid backend")},sKe=async e=>{const t=fb.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},aKe=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?yd:r;let i;const s=[],a=new Set;for(const l of n){const c=await sKe(l);typeof c=="string"?s.push({name:l,err:c}):(i||(i=c),i===c&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);const o=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,c)=>c==="executionProviders"?o:Reflect.get(l,c)})]},oKe="1.21.0";let oW="warning";const So={wasm:{},webgl:{},webgpu:{},versions:{common:oKe},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);oW=e}},get logLevel(){return oW}};Object.defineProperty(So,"logLevel",{enumerable:!0});const lKe=So,cKe=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let i,s;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);const a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",o=t==null?void 0:t.norm;let l,c;o===void 0||o.mean===void 0?l=[255,255,255,255]:typeof o.mean=="number"?l=[o.mean,o.mean,o.mean,o.mean]:(l=[o.mean[0],o.mean[1],o.mean[2],0],o.mean[3]!==void 0&&(l[3]=o.mean[3])),o===void 0||o.bias===void 0?c=[0,0,0,0]:typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:(c=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(c[3]=o.bias[3]));const f=s*i;let d=0,h=f,p=f*2,m=-1;a==="RGBA"?(d=0,h=f,p=f*2,m=f*3):a==="RGB"?(d=0,h=f,p=f*2):a==="RBG"&&(d=0,p=f,h=f*2);for(let g=0;g<s;g++)for(let x=0;x<i;x++){const y=(e.data[d++]-c[0])*l[0],v=(e.data[h++]-c[1])*l[1],_=(e.data[p++]-c[2])*l[2],b=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+y+","+v+","+_+","+b+")",n.fillRect(x,g,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},uKe=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let i,s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],a=e.dims[3]):(i=e.dims[3],s=e.dims[2],a=e.dims[1]);const o=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm;let c,f;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?f=[0,0,0,0]:typeof l.bias=="number"?f=[l.bias,l.bias,l.bias,l.bias]:(f=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(f[3]=l.bias[3]));const d=s*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const h=4;let p=0,m=1,g=2,x=3,y=0,v=d,_=d*2,b=-1;o==="RGBA"?(y=0,v=d,_=d*2,b=d*3):o==="RGB"?(y=0,v=d,_=d*2):o==="RBG"&&(y=0,_=d,v=d*2),n=r.createImageData(i,s);for(let w=0;w<s*i;p+=h,m+=h,g+=h,x+=h,w++)n.data[p]=(e.data[y++]-f[0])*c[0],n.data[m]=(e.data[v++]-f[1])*c[1],n.data[g]=(e.data[_++]-f[2])*c[2],n.data[x]=b===-1?255:(e.data[b++]-f[3])*c[3]}else throw new Error("Can not access image data");return n},CP=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,i=t.norm??{mean:255,bias:0};let s,a;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];const o=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,f=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3);let d=4,h=0,p=1,m=2,g=3,x=0,y=c,v=c*2,_=-1;o==="RGB"&&(d=3,h=0,p=1,m=2,g=-1),l==="RGBA"?_=c*3:l==="RBG"?(x=0,v=c,y=c*2):l==="BGR"&&(v=0,y=c,x=c*2);for(let w=0;w<c;w++,h+=d,m+=d,p+=d,g+=d)f[x++]=(e[h]+a[0])/s[0],f[y++]=(e[p]+a[1])/s[1],f[v++]=(e[m]+a[2])/s[2],_!==-1&&g!==-1&&(f[_++]=(e[g]+a[3])/s[3]);return l==="RGBA"?new Na("float32",f,[1,4,r,n]):new Na("float32",f,[1,3,r,n])},dKe=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string";let a,o=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=f=>typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||f instanceof OffscreenCanvas?f.getContext("2d"):null;if(r){const f=l();f.width=e.width,f.height=e.height;const d=c(f);if(d!=null){let h=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(o=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");o.tensorFormat="RGBA",o.height=h,o.width=p}else o.tensorFormat="RGBA",o.height=h,o.width=p;d.drawImage(e,0,0),a=d.getImageData(0,0,p,h).data}else throw new Error("Can not access image data")}else if(n){let f,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(f=t.resizedHeight,d=t.resizedWidth):(f=e.height,d=e.width),t!==void 0&&(o=t),o.format="RGBA",o.height=f,o.width=d,t!==void 0){const h=l();h.width=d,h.height=f;const p=c(h);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,d,f).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const f=l();f.width=e.width,f.height=e.height;const d=c(f);if(d!=null){const h=e.height,p=e.width;return d.drawImage(e,0,0,p,h),a=d.getImageData(0,0,p,h).data,o.height=h,o.width=p,CP(a,o)}else throw new Error("Can not access image data")}else{if(s)return new Promise((f,d)=>{const h=l(),p=c(h);if(!e||!p)return d();const m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{h.width=m.width,h.height=m.height,p.drawImage(m,0,0,h.width,h.height);const g=p.getImageData(0,0,h.width,h.height);o.height=h.height,o.width=h.width,f(CP(g.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return CP(a,o);throw new Error("Input data provided is not supported - aborted tensor creation")},fKe=(e,t)=>{const{width:r,height:n,download:i,dispose:s}=t,a=[1,n,r,4];return new Na({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:s})},hKe=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Na({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},pKe=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Na({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},mKe=(e,t,r)=>new Na({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),Fh=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),hb=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let lW=!1;const gKe=()=>{if(!lW){lW=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(Fh.set("int64",BigInt64Array),hb.set(BigInt64Array,"int64")),t&&(Fh.set("uint64",BigUint64Array),hb.set(BigUint64Array,"uint64")),n?(Fh.set("float16",r),hb.set(r,"float16")):Fh.set("float16",Uint16Array)}},vKe=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},yKe=(e,t)=>{switch(e.location){case"cpu":return new Na(e.type,e.data,t);case"cpu-pinned":return new Na({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Na({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Na({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Na({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Na=class{constructor(t,r,n){gKe();let i,s;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,s=t.dims,t.location){case"cpu-pinned":{const o=Fh.get(i);if(!o)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint64"&&i!=="int8"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,l;if(typeof t=="string")if(i=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");o=r}else{const c=Fh.get(t);if(c===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&c===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${c.name} as data.`);t==="uint64"||t==="int64"?o=c.from(r,BigInt):o=c.from(r)}else if(r instanceof c)o=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")o=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&c!==Uint16Array)o=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${i} tensor's data must be type of ${c}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const c=typeof t[0];if(c==="string")i="string",o=t;else if(c==="boolean")i="bool",o=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${c}.`)}else if(t instanceof Uint8ClampedArray)i="uint8",o=Uint8Array.from(t);else{const c=hb.get(t.constructor);if(c===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=c,o=t}if(l===void 0)l=[o.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");s=l,this.cpuData=o,this.dataLocation="cpu"}const a=vKe(s);if(this.cpuData&&a!==this.cpuData.length&&!((i==="uint4"||i==="int4")&&Math.ceil(a/2)===this.cpuData.length))throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=s,this.size=a}static async fromImage(t,r){return dKe(t,r)}static fromTexture(t,r){return fKe(t,r)}static fromGpuBuffer(t,r){return hKe(t,r)}static fromMLTensor(t,r){return pKe(t,r)}static fromPinnedBuffer(t,r,n){return mKe(t,r,n)}toDataURL(t){return cKe(this,t)}toImageData(t){return uKe(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return yKe(this,t)}};const ch=Na,tie=(e,t)=>{(typeof So.trace>"u"?!So.wasm.trace:!So.trace)||console.timeStamp(`${e}::ORT::${t}`)},rie=(e,t)=>{var i;const r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[];let n=!1;for(let s=0;s<r.length;s++){if(n&&!r[s].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[s].trim().split(" ")[1]}`;t&&(a+=`::${t}`),tie("CPU",a);return}r[s].includes("TRACE_FUNC")&&(n=!0)}},cA=e=>{(typeof So.trace>"u"?!So.wasm.trace:!So.trace)||rie("BEGIN",e)},uA=e=>{(typeof So.trace>"u"?!So.wasm.trace:!So.trace)||rie("END",e)};let _Ke=class nie{constructor(t){this.handler=t}async run(t,r,n){cA();const i={};let s={};if(typeof t!="object"||t===null||t instanceof ch||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof ch)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(const c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);i[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1;const f=Object.getOwnPropertyNames(r);for(const d of this.outputNames)if(f.indexOf(d)!==-1){const h=r[d];(h===null||h instanceof ch)&&(c=!0,a=!1,i[d]=h)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(a)for(const c of this.outputNames)i[c]=null;const o=await this.handler.run(t,i,s),l={};for(const c in o)if(Object.hasOwnProperty.call(o,c)){const f=o[c];f instanceof ch?l[c]=f:l[c]=new ch(f.type,f.data,f.dims)}return uA(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){cA();let s,a={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const f=t;let d=0,h=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=f.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${f.byteLength}).`);if(h=t.byteLength-d,typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||d+h>f.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${f.byteLength-d}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(f,d,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[o,l]=await aKe(a),c=await o.createInferenceSessionHandler(s,l);return uA(),new nie(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const xKe=_Ke,bKe=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:xKe,TRACE:tie,TRACE_FUNC_BEGIN:cA,TRACE_FUNC_END:uA,Tensor:ch,env:lKe,registerBackend:iKe},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.22.0-dev.20250409-89f8206ba4
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var iI=Object.defineProperty,wKe=Object.getOwnPropertyDescriptor,kKe=Object.getOwnPropertyNames,TKe=Object.prototype.hasOwnProperty,MKe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Ze=(e,t)=>()=>(e&&(t=e(e=0)),t),$m=(e,t)=>{for(var r in t)iI(e,r,{get:t[r],enumerable:!0})},SKe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of kKe(t))!TKe.call(e,i)&&i!==r&&iI(e,i,{get:()=>t[i],enumerable:!(n=wKe(t,i))||n.enumerable});return e},s_=e=>SKe(iI({},"__esModule",{value:!0}),e),$g,kc,Nd,cW,iie,sie=Ze(()=>{$g=new Map,kc=[],Nd=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=$g.get(e);if(n===void 0)$g.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let i=kc.indexOf(e);i!==-1&&kc.splice(i,1);for(let s=0;s<kc.length;s++)if($g.get(kc[s]).priority<=r){kc.splice(s,0,e);return}kc.push(e)}return}throw new TypeError("not a valid backend")},cW=async e=>{let t=$g.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},iie=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?kc:r,i,s=[],a=new Set;for(let l of n){let c=await cW(l);typeof c=="string"?s.push({name:l,err:c}):(i||(i=c),i===c&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);let o=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,c)=>c==="executionProviders"?o:Reflect.get(l,c)})]}}),PKe=Ze(()=>{sie()}),aie,EKe=Ze(()=>{aie="1.22.0-dev.20250409-89f8206ba4"}),AP,Ea,oie=Ze(()=>{EKe(),AP="warning",Ea={wasm:{},webgl:{},webgpu:{},versions:{common:aie},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);AP=e}},get logLevel(){return AP}},Object.defineProperty(Ea,"logLevel",{enumerable:!0})}),Yr,jKe=Ze(()=>{oie(),Yr=Ea}),lie,cie,CKe=Ze(()=>{lie=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let i,s;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);let a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",o=t==null?void 0:t.norm,l,c;o===void 0||o.mean===void 0?l=[255,255,255,255]:typeof o.mean=="number"?l=[o.mean,o.mean,o.mean,o.mean]:(l=[o.mean[0],o.mean[1],o.mean[2],0],o.mean[3]!==void 0&&(l[3]=o.mean[3])),o===void 0||o.bias===void 0?c=[0,0,0,0]:typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:(c=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(c[3]=o.bias[3]));let f=s*i,d=0,h=f,p=f*2,m=-1;a==="RGBA"?(d=0,h=f,p=f*2,m=f*3):a==="RGB"?(d=0,h=f,p=f*2):a==="RBG"&&(d=0,p=f,h=f*2);for(let g=0;g<s;g++)for(let x=0;x<i;x++){let y=(e.data[d++]-c[0])*l[0],v=(e.data[h++]-c[1])*l[1],_=(e.data[p++]-c[2])*l[2],b=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+y+","+v+","+_+","+b+")",n.fillRect(x,g,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},cie=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],a=e.dims[3]):(i=e.dims[3],s=e.dims[2],a=e.dims[1]);let o=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm,c,f;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?f=[0,0,0,0]:typeof l.bias=="number"?f=[l.bias,l.bias,l.bias,l.bias]:(f=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(f[3]=l.bias[3]));let d=s*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,p=0,m=1,g=2,x=3,y=0,v=d,_=d*2,b=-1;o==="RGBA"?(y=0,v=d,_=d*2,b=d*3):o==="RGB"?(y=0,v=d,_=d*2):o==="RBG"&&(y=0,_=d,v=d*2),n=r.createImageData(i,s);for(let w=0;w<s*i;p+=h,m+=h,g+=h,x+=h,w++)n.data[p]=(e.data[y++]-f[0])*c[0],n.data[m]=(e.data[v++]-f[1])*c[1],n.data[g]=(e.data[_++]-f[2])*c[2],n.data[x]=b===-1?255:(e.data[b++]-f[3])*c[3]}else throw new Error("Can not access image data");return n}}),Px,uie,die,fie,hie,pie,AKe=Ze(()=>{sI(),Px=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,i=t.norm??{mean:255,bias:0},s,a;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let o=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,f=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3),d=4,h=0,p=1,m=2,g=3,x=0,y=c,v=c*2,_=-1;o==="RGB"&&(d=3,h=0,p=1,m=2,g=-1),l==="RGBA"?_=c*3:l==="RBG"?(x=0,v=c,y=c*2):l==="BGR"&&(v=0,y=c,x=c*2);for(let b=0;b<c;b++,h+=d,m+=d,p+=d,g+=d)f[x++]=(e[h]+a[0])/s[0],f[y++]=(e[p]+a[1])/s[1],f[v++]=(e[m]+a[2])/s[2],_!==-1&&g!==-1&&(f[_++]=(e[g]+a[3])/s[3]);return l==="RGBA"?new sa("float32",f,[1,4,r,n]):new sa("float32",f,[1,3,r,n])},uie=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",a,o=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=f=>typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||f instanceof OffscreenCanvas?f.getContext("2d"):null;if(r){let f=l();f.width=e.width,f.height=e.height;let d=c(f);if(d!=null){let h=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(o=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");o.tensorFormat="RGBA",o.height=h,o.width=p}else o.tensorFormat="RGBA",o.height=h,o.width=p;d.drawImage(e,0,0),a=d.getImageData(0,0,p,h).data}else throw new Error("Can not access image data")}else if(n){let f,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(f=t.resizedHeight,d=t.resizedWidth):(f=e.height,d=e.width),t!==void 0&&(o=t),o.format="RGBA",o.height=f,o.width=d,t!==void 0){let h=l();h.width=d,h.height=f;let p=c(h);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,d,f).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let f=l();f.width=e.width,f.height=e.height;let d=c(f);if(d!=null){let h=e.height,p=e.width;return d.drawImage(e,0,0,p,h),a=d.getImageData(0,0,p,h).data,o.height=h,o.width=p,Px(a,o)}else throw new Error("Can not access image data")}else{if(s)return new Promise((f,d)=>{let h=l(),p=c(h);if(!e||!p)return d();let m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{h.width=m.width,h.height=m.height,p.drawImage(m,0,0,h.width,h.height);let g=p.getImageData(0,0,h.width,h.height);o.height=h.height,o.width=h.width,f(Px(g.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return Px(a,o);throw new Error("Input data provided is not supported - aborted tensor creation")},die=(e,t)=>{let{width:r,height:n,download:i,dispose:s}=t,a=[1,n,r,4];return new sa({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:s})},fie=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new sa({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},hie=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new sa({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},pie=(e,t,r)=>new sa({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),wd,tv,OP,mie,OKe=Ze(()=>{wd=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),tv=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),OP=!1,mie=()=>{if(!OP){OP=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(wd.set("int64",BigInt64Array),tv.set(BigInt64Array,"int64")),t&&(wd.set("uint64",BigUint64Array),tv.set(BigUint64Array,"uint64")),n?(wd.set("float16",r),tv.set(r,"float16")):wd.set("float16",Uint16Array)}}}),gie,vie,$Ke=Ze(()=>{sI(),gie=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},vie=(e,t)=>{switch(e.location){case"cpu":return new sa(e.type,e.data,t);case"cpu-pinned":return new sa({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new sa({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new sa({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new sa({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),sa,sI=Ze(()=>{CKe(),AKe(),OKe(),$Ke(),sa=class{constructor(e,t,r){mie();let n,i;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{let a=wd.get(n);if(!a)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,o;if(typeof e=="string")if(n=e,o=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{let l=wd.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?a=l.from(t,BigInt):a=l.from(t)}else if(t instanceof l)a=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")a=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)a=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(o=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",a=e;else if(l==="boolean")n="bool",a=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",a=Uint8Array.from(e);else{let l=tv.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,a=e}if(o===void 0)o=[a.length];else if(!Array.isArray(o))throw new TypeError("A tensor's dims must be a number array");i=o,this.cpuData=a,this.dataLocation="cpu"}let s=gie(i);if(this.cpuData&&s!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(s/2)===this.cpuData.length))throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=s}static async fromImage(e,t){return uie(e,t)}static fromTexture(e,t){return die(e,t)}static fromGpuBuffer(e,t){return fie(e,t)}static fromMLTensor(e,t){return hie(e,t)}static fromPinnedBuffer(e,t,r){return pie(e,t,r)}toDataURL(e){return lie(this,e)}toImageData(e){return cie(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return vie(this,e)}}}),xo,yie=Ze(()=>{sI(),xo=sa}),a_,$P,Ao,Fa,_ie=Ze(()=>{oie(),a_=(e,t)=>{(typeof Ea.trace>"u"?!Ea.wasm.trace:!Ea.trace)||console.timeStamp(`${e}::ORT::${t}`)},$P=(e,t)=>{var i;let r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[],n=!1;for(let s=0;s<r.length;s++){if(n&&!r[s].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[s].trim().split(" ")[1]}`;t&&(a+=`::${t}`),a_("CPU",a);return}r[s].includes("TRACE_FUNC")&&(n=!0)}},Ao=e=>{(typeof Ea.trace>"u"?!Ea.wasm.trace:!Ea.trace)||$P("BEGIN",e)},Fa=e=>{(typeof Ea.trace>"u"?!Ea.wasm.trace:!Ea.trace)||$P("END",e)}}),xie,NKe=Ze(()=>{sie(),yie(),_ie(),xie=class bie{constructor(t){this.handler=t}async run(t,r,n){Ao();let i={},s={};if(typeof t!="object"||t===null||t instanceof xo||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof xo)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(let c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);i[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1,f=Object.getOwnPropertyNames(r);for(let d of this.outputNames)if(f.indexOf(d)!==-1){let h=r[d];(h===null||h instanceof xo)&&(c=!0,a=!1,i[d]=h)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(a)for(let c of this.outputNames)i[c]=null;let o=await this.handler.run(t,i,s),l={};for(let c in o)if(Object.hasOwnProperty.call(o,c)){let f=o[c];f instanceof xo?l[c]=f:l[c]=new xo(f.type,f.data,f.dims)}return Fa(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){Ao();let s,a={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let f=t,d=0,h=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=f.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${f.byteLength}).`);if(h=t.byteLength-d,typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||d+h>f.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${f.byteLength-d}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(f,d,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[o,l]=await iie(a),c=await o.createInferenceSessionHandler(s,l);return Fa(),new bie(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),aI,IKe=Ze(()=>{NKe(),aI=xie}),DKe=Ze(()=>{}),LKe=Ze(()=>{}),RKe=Ze(()=>{}),FKe=Ze(()=>{}),wie={};$m(wie,{InferenceSession:()=>aI,TRACE:()=>a_,TRACE_FUNC_BEGIN:()=>Ao,TRACE_FUNC_END:()=>Fa,Tensor:()=>xo,env:()=>Yr,registerBackend:()=>Nd});var Io=Ze(()=>{PKe(),jKe(),IKe(),yie(),DKe(),LKe(),_ie(),RKe(),FKe()}),oI=Ze(()=>{}),kie={};$m(kie,{default:()=>Tie});var NP,IP,Tie,BKe=Ze(()=>{var e;joe(),Mf(),lI(),NP="ort-wasm-proxy-worker",IP=((e=globalThis.self)==null?void 0:e.name)===NP,IP&&(self.onmessage=t=>{let{type:r,in:n}=t.data;try{switch(r){case"init-wasm":cI(n.wasm).then(()=>{PI(n).then(()=>{postMessage({type:r})},i=>{postMessage({type:r,err:i})})},i=>{postMessage({type:r,err:i})});break;case"init-ep":{let{epName:i,env:s}=n;EI(s,i).then(()=>{postMessage({type:r})},a=>{postMessage({type:r,err:a})});break}case"copy-from":{let{buffer:i}=n,s=w1(i);postMessage({type:r,out:s});break}case"create":{let{model:i,options:s}=n;jI(i,s).then(a=>{postMessage({type:r,out:a})},a=>{postMessage({type:r,err:a})});break}case"release":CI(n),postMessage({type:r});break;case"run":{let{sessionId:i,inputIndices:s,inputs:a,outputIndices:o,options:l}=n;AI(i,s,a,o,new Array(o.length).fill(null),l).then(c=>{c.some(f=>f[3]!=="cpu")?postMessage({type:r,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:r,out:c},$I([...a,...c]))},c=>{postMessage({type:r,err:c})});break}case"end-profiling":OI(n),postMessage({type:r});break;default:}}catch(i){postMessage({type:r,err:i})}}),Tie=IP?null:t=>new Worker(t??qs,{type:"module",name:NP})}),Mie={};$m(Mie,{default:()=>Sie});var DP,LP,Sie,uW,zKe=Ze(()=>{var e,t;LP=(DP=import.meta.url,async function(r={}){var Rf;var n,i,s=r,a=new Promise((S,$)=>{n=S,i=$}),o=typeof window=="object",l=typeof WorkerGlobalScope<"u",c=l&&((Rf=self.name)==null?void 0:Rf.startsWith("em-pthread"));s.mountExternalData=(S,$)=>{S.startsWith("./")&&(S=S.substring(2)),(s.Eb||(s.Eb=new Map)).set(S,$)},s.unmountExternalData=()=>{delete s.Eb};var f=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let d=S=>async(...$)=>{var W;try{if(s.Fb)throw Error("Session already started");let Y=s.Fb={dc:$[0],errors:[]},se=await S(...$);if(s.Fb!==Y)throw Error("Session mismatch");(W=s.Jb)==null||W.flush();let be=Y.errors;if(0<be.length){let Le=await Promise.all(be);if(Le=Le.filter(Ke=>Ke),0<Le.length)throw Error(Le.join(`
`))}return se}finally{s.Fb=null}};s.jsepInit=(S,$)=>{if(S==="webgpu"){[s.Jb,s.Ub,s.Yb,s.Kb,s.Xb,s.jb,s.Zb,s.ac,s.Vb,s.Wb,s.$b]=$;let W=s.Jb;s.jsepRegisterBuffer=(Y,se,be,Le)=>W.registerBuffer(Y,se,be,Le),s.jsepGetBuffer=Y=>W.getBuffer(Y),s.jsepCreateDownloader=(Y,se,be)=>W.createDownloader(Y,se,be),s.jsepOnCreateSession=Y=>{W.onCreateSession(Y)},s.jsepOnReleaseSession=Y=>{W.onReleaseSession(Y)},s.jsepOnRunStart=Y=>W.onRunStart(Y),s.bc=(Y,se)=>{W.upload(Y,se)}}else if(S==="webnn"){let W=$[0];[s.nc,s.Nb,s.webnnEnsureTensor,s.Ob,s.webnnDownloadTensor]=$.slice(1),s.webnnReleaseTensorId=s.Nb,s.webnnUploadTensor=s.Ob,s.webnnOnRunStart=Y=>W.onRunStart(Y),s.webnnOnRunEnd=W.onRunEnd.bind(W),s.webnnRegisterMLContext=(Y,se)=>{W.registerMLContext(Y,se)},s.webnnOnReleaseSession=Y=>{W.onReleaseSession(Y)},s.webnnCreateMLTensorDownloader=(Y,se)=>W.createMLTensorDownloader(Y,se),s.webnnRegisterMLTensor=(Y,se,be,Le)=>W.registerMLTensor(Y,se,be,Le),s.webnnCreateMLContext=Y=>W.createMLContext(Y),s.webnnRegisterMLConstant=(Y,se,be,Le,Ke,st)=>W.registerMLConstant(Y,se,be,Le,Ke,s.Eb,st),s.webnnRegisterGraphInput=W.registerGraphInput.bind(W),s.webnnIsGraphInput=W.isGraphInput.bind(W),s.webnnCreateTemporaryTensor=W.createTemporaryTensor.bind(W),s.webnnIsInt64Supported=W.isInt64Supported.bind(W)}};let h=()=>{let S=($,W,Y)=>(...se)=>{let be=Hn,Le=W==null?void 0:W();se=$(...se);let Ke=W==null?void 0:W();return Le!==Ke&&($=Ke,Y(Le),W=Y=null),Hn!=be?new Promise((st,_t)=>{Ni={resolve:st,reject:_t}}):se};(()=>{for(let $ of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])s[$]=S(s[$],()=>s[$],W=>s[$]=W)})(),d!==void 0&&(s._OrtRun=d(s._OrtRun),s._OrtRunWithBinding=d(s._OrtRunWithBinding)),h=void 0};s.asyncInit=()=>{h==null||h()};var p,m,g=Object.assign({},s),x=(S,$)=>{throw $},y="";(o||l)&&(l?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),DP&&(y=DP),y=y.startsWith("blob:")?"":y.slice(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(m=S=>{var $=new XMLHttpRequest;return $.open("GET",S,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),p=async S=>{if(B(S))return new Promise((W,Y)=>{var se=new XMLHttpRequest;se.open("GET",S,!0),se.responseType="arraybuffer",se.onload=()=>{se.status==200||se.status==0&&se.response?W(se.response):Y(se.status)},se.onerror=Y,se.send(null)});var $=await fetch(S,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw Error($.status+" : "+$.url)});var v=console.log.bind(console),_=console.error.bind(console),b=v,w=_;Object.assign(s,g),g=null;var k,T,M,j,C,R,I,N,z,V,G,H,O,q=s.wasmBinary,ee=!1,B=S=>S.startsWith("file://");function D(){return k.buffer!=j.buffer&&re(),j}function K(){return k.buffer!=j.buffer&&re(),C}function oe(){return k.buffer!=j.buffer&&re(),R}function _e(){return k.buffer!=j.buffer&&re(),I}function ue(){return k.buffer!=j.buffer&&re(),N}function ye(){return k.buffer!=j.buffer&&re(),z}function $e(){return k.buffer!=j.buffer&&re(),V}function Se(){return k.buffer!=j.buffer&&re(),O}if(c){let S=function($){try{var W=$.data,Y=W.Bb;if(Y==="load"){let se=[];self.onmessage=be=>se.push(be),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let be of se)S(be);self.onmessage=S};for(let be of W.Rb)s[be]&&!s[be].proxy||(s[be]=(...Le)=>{postMessage({Bb:"callHandler",Qb:be,args:Le})},be=="print"&&(b=s[be]),be=="printErr"&&(w=s[be]));k=W.kc,re(),ge(W.lc)}else if(Y==="run"){kr(W.Ab),$f(W.Ab,0,0,1,0,0),Cs(),ke(W.Ab),te||(Ym(),te=!0);try{li(W.fc,W.Hb)}catch(se){if(se!="unwind")throw se}}else W.target!=="setimmediate"&&(Y==="checkMailbox"?te&&De():Y&&(w(`worker: received unknown command ${Y}`),w(W)))}catch(se){throw Nf(),se}};var ge,te=!1;w=function(...$){$=$.join(" "),console.error($)},self.alert=function(...$){postMessage({Bb:"alert",text:$.join(" "),ic:Gu()})},self.onunhandledrejection=$=>{throw $.reason||$},self.onmessage=S}function re(){var S=k.buffer;s.HEAP8=j=new Int8Array(S),s.HEAP16=R=new Int16Array(S),s.HEAPU8=C=new Uint8Array(S),s.HEAPU16=I=new Uint16Array(S),s.HEAP32=N=new Int32Array(S),s.HEAPU32=z=new Uint32Array(S),s.HEAPF32=V=new Float32Array(S),s.HEAPF64=O=new Float64Array(S),s.HEAP64=G=new BigInt64Array(S),s.HEAPU64=H=new BigUint64Array(S)}function J(){c?startWorker(s):Ct.Ca()}c||(k=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),re());var we,Ne=0,je=null;function Pe(){if(--Ne==0&&je){var S=je;je=null,S()}}function Z(S){throw w(S="Aborted("+S+")"),ee=!0,S=new WebAssembly.RuntimeError(S+". Build with -sASSERTIONS for more info."),i(S),S}function ne(){return{a:{L:Ce,Aa:Me,b:Hs,$:Lo,A:F,pa:ce,X:pe,Z:Oe,qa:Ue,na:ht,ga:Dt,ma:At,J:Wt,Y:pt,V:xr,oa:Pr,W:zi,va:ui,E:Bo,Q:Wi,O:Gi,D:Ye,u:ut,r:Vr,P:pl,z:U,R:ie,ja:he,T:Qe,aa:it,M:ft,F:Rt,ia:ke,sa:br,t:Or,Ba:Gn,w:xa,o:wn,l:Ki,c:Ka,n:Pf,j:B_,v:z_,p:V_,f:fc,s:U_,m:W_,e:G_,k:H_,i:K_,g:hc,d:q_,da:X_,ea:Rm,fa:Y_,ba:Fm,ca:Ef,N:zm,xa:Vm,ua:Q_,h:Cf,C:Z_,G:J_,ta:xT,x:e0,ra:t0,U:r0,q:Bm,y:n0,K:i0,S:s0,za:Um,ya:a0,ka:o0,la:Gm,_:Ht,B:l0,I:Hm,ha:Af,H:Km,a:k,wa:nt}}}var fe={829644:(S,$,W,Y,se)=>{if(s===void 0||!s.Eb)return 1;if((S=zr(Number(S>>>0))).startsWith("./")&&(S=S.substring(2)),!(S=s.Eb.get(S)))return 2;if($=Number($>>>0),W=Number(W>>>0),Y=Number(Y>>>0),$+W>S.byteLength)return 3;try{let be=S.subarray($,$+W);switch(se){case 0:K().set(be,Y>>>0);break;case 1:s.mc?s.mc(Y,be):s.bc(Y,be);break;default:return 4}return 0}catch{return 4}},830468:(S,$,W)=>{s.Ob(S,K().subarray($>>>0,$+W>>>0))},830532:()=>s.nc(),830574:S=>{s.Nb(S)},830611:()=>{s.Vb()},830642:()=>{s.Wb()},830671:()=>{s.$b()},830696:S=>s.Ub(S),830729:S=>s.Yb(S),830761:(S,$,W)=>{s.Kb(Number(S),Number($),Number(W),!0)},830824:(S,$,W)=>{s.Kb(Number(S),Number($),Number(W))},830881:()=>typeof wasmOffsetConverter<"u",830938:S=>{s.jb("Abs",S,void 0)},830989:S=>{s.jb("Neg",S,void 0)},831040:S=>{s.jb("Floor",S,void 0)},831093:S=>{s.jb("Ceil",S,void 0)},831145:S=>{s.jb("Reciprocal",S,void 0)},831203:S=>{s.jb("Sqrt",S,void 0)},831255:S=>{s.jb("Exp",S,void 0)},831306:S=>{s.jb("Erf",S,void 0)},831357:S=>{s.jb("Sigmoid",S,void 0)},831412:(S,$,W)=>{s.jb("HardSigmoid",S,{alpha:$,beta:W})},831491:S=>{s.jb("Log",S,void 0)},831542:S=>{s.jb("Sin",S,void 0)},831593:S=>{s.jb("Cos",S,void 0)},831644:S=>{s.jb("Tan",S,void 0)},831695:S=>{s.jb("Asin",S,void 0)},831747:S=>{s.jb("Acos",S,void 0)},831799:S=>{s.jb("Atan",S,void 0)},831851:S=>{s.jb("Sinh",S,void 0)},831903:S=>{s.jb("Cosh",S,void 0)},831955:S=>{s.jb("Asinh",S,void 0)},832008:S=>{s.jb("Acosh",S,void 0)},832061:S=>{s.jb("Atanh",S,void 0)},832114:S=>{s.jb("Tanh",S,void 0)},832166:S=>{s.jb("Not",S,void 0)},832217:(S,$,W)=>{s.jb("Clip",S,{min:$,max:W})},832286:S=>{s.jb("Clip",S,void 0)},832338:(S,$)=>{s.jb("Elu",S,{alpha:$})},832396:S=>{s.jb("Gelu",S,void 0)},832448:S=>{s.jb("Relu",S,void 0)},832500:(S,$)=>{s.jb("LeakyRelu",S,{alpha:$})},832564:(S,$)=>{s.jb("ThresholdedRelu",S,{alpha:$})},832634:(S,$)=>{s.jb("Cast",S,{to:$})},832692:S=>{s.jb("Add",S,void 0)},832743:S=>{s.jb("Sub",S,void 0)},832794:S=>{s.jb("Mul",S,void 0)},832845:S=>{s.jb("Div",S,void 0)},832896:S=>{s.jb("Pow",S,void 0)},832947:S=>{s.jb("Equal",S,void 0)},833e3:S=>{s.jb("Greater",S,void 0)},833055:S=>{s.jb("GreaterOrEqual",S,void 0)},833117:S=>{s.jb("Less",S,void 0)},833169:S=>{s.jb("LessOrEqual",S,void 0)},833228:(S,$,W,Y,se)=>{s.jb("ReduceMean",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},833403:(S,$,W,Y,se)=>{s.jb("ReduceMax",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},833577:(S,$,W,Y,se)=>{s.jb("ReduceMin",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},833751:(S,$,W,Y,se)=>{s.jb("ReduceProd",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},833926:(S,$,W,Y,se)=>{s.jb("ReduceSum",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834100:(S,$,W,Y,se)=>{s.jb("ReduceL1",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834273:(S,$,W,Y,se)=>{s.jb("ReduceL2",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834446:(S,$,W,Y,se)=>{s.jb("ReduceLogSum",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834623:(S,$,W,Y,se)=>{s.jb("ReduceSumSquare",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834803:(S,$,W,Y,se)=>{s.jb("ReduceLogSumExp",S,{keepDims:!!$,noopWithEmptyAxes:!!W,axes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},834983:S=>{s.jb("Where",S,void 0)},835036:(S,$,W)=>{s.jb("Transpose",S,{perm:$?Array.from(ue().subarray(Number($)>>>0,Number(W)>>>0)):[]})},835160:(S,$,W,Y)=>{s.jb("DepthToSpace",S,{blocksize:$,mode:zr(W),format:Y?"NHWC":"NCHW"})},835293:(S,$,W,Y)=>{s.jb("DepthToSpace",S,{blocksize:$,mode:zr(W),format:Y?"NHWC":"NCHW"})},835426:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti,zo)=>{s.jb("ConvTranspose",S,{format:st?"NHWC":"NCHW",autoPad:$,dilations:[W],group:Y,kernelShape:[se],pads:[be,Le],strides:[Ke],wIsConst:()=>!!D()[_t>>>0],outputPadding:Kt?Array.from(ue().subarray(Number(Kt)>>>0,Number(pr)>>>0)):[],outputShape:$r?Array.from(ue().subarray(Number($r)>>>0,Number(ti)>>>0)):[],activation:zr(zo)})},835859:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("ConvTranspose",S,{format:Ke?"NHWC":"NCHW",autoPad:$,dilations:Array.from(ue().subarray(Number(W)>>>0,2+(Number(W)>>>0)>>>0)),group:Y,kernelShape:Array.from(ue().subarray(Number(se)>>>0,2+(Number(se)>>>0)>>>0)),pads:Array.from(ue().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(ue().subarray(Number(Le)>>>0,2+(Number(Le)>>>0)>>>0)),wIsConst:()=>!!D()[st>>>0],outputPadding:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],outputShape:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[],activation:zr(ti)})},836520:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti,zo)=>{s.jb("ConvTranspose",S,{format:st?"NHWC":"NCHW",autoPad:$,dilations:[W],group:Y,kernelShape:[se],pads:[be,Le],strides:[Ke],wIsConst:()=>!!D()[_t>>>0],outputPadding:Kt?Array.from(ue().subarray(Number(Kt)>>>0,Number(pr)>>>0)):[],outputShape:$r?Array.from(ue().subarray(Number($r)>>>0,Number(ti)>>>0)):[],activation:zr(zo)})},836953:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("ConvTranspose",S,{format:Ke?"NHWC":"NCHW",autoPad:$,dilations:Array.from(ue().subarray(Number(W)>>>0,2+(Number(W)>>>0)>>>0)),group:Y,kernelShape:Array.from(ue().subarray(Number(se)>>>0,2+(Number(se)>>>0)>>>0)),pads:Array.from(ue().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(ue().subarray(Number(Le)>>>0,2+(Number(Le)>>>0)>>>0)),wIsConst:()=>!!D()[st>>>0],outputPadding:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],outputShape:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[],activation:zr(ti)})},837614:(S,$)=>{s.jb("GlobalAveragePool",S,{format:$?"NHWC":"NCHW"})},837705:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("AveragePool",S,{format:ti?"NHWC":"NCHW",auto_pad:$,ceil_mode:W,count_include_pad:Y,storage_order:se,dilations:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[],kernel_shape:Ke?Array.from(ue().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[]})},838184:(S,$)=>{s.jb("GlobalAveragePool",S,{format:$?"NHWC":"NCHW"})},838275:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("AveragePool",S,{format:ti?"NHWC":"NCHW",auto_pad:$,ceil_mode:W,count_include_pad:Y,storage_order:se,dilations:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[],kernel_shape:Ke?Array.from(ue().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[]})},838754:(S,$)=>{s.jb("GlobalMaxPool",S,{format:$?"NHWC":"NCHW"})},838841:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("MaxPool",S,{format:ti?"NHWC":"NCHW",auto_pad:$,ceil_mode:W,count_include_pad:Y,storage_order:se,dilations:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[],kernel_shape:Ke?Array.from(ue().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[]})},839316:(S,$)=>{s.jb("GlobalMaxPool",S,{format:$?"NHWC":"NCHW"})},839403:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti)=>{s.jb("MaxPool",S,{format:ti?"NHWC":"NCHW",auto_pad:$,ceil_mode:W,count_include_pad:Y,storage_order:se,dilations:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[],kernel_shape:Ke?Array.from(ue().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],pads:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],strides:pr?Array.from(ue().subarray(Number(pr)>>>0,Number($r)>>>0)):[]})},839878:(S,$,W,Y,se)=>{s.jb("Gemm",S,{alpha:$,beta:W,transA:Y,transB:se})},839982:S=>{s.jb("MatMul",S,void 0)},840036:(S,$,W,Y)=>{s.jb("ArgMax",S,{keepDims:!!$,selectLastIndex:!!W,axis:Y})},840144:(S,$,W,Y)=>{s.jb("ArgMin",S,{keepDims:!!$,selectLastIndex:!!W,axis:Y})},840252:(S,$)=>{s.jb("Softmax",S,{axis:$})},840315:(S,$)=>{s.jb("Concat",S,{axis:$})},840375:(S,$,W,Y,se)=>{s.jb("Split",S,{axis:$,numOutputs:W,splitSizes:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},840531:S=>{s.jb("Expand",S,void 0)},840585:(S,$)=>{s.jb("Gather",S,{axis:Number($)})},840656:(S,$)=>{s.jb("GatherElements",S,{axis:Number($)})},840735:(S,$)=>{s.jb("GatherND",S,{batch_dims:Number($)})},840814:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt)=>{s.jb("Resize",S,{antialias:$,axes:W?Array.from(ue().subarray(Number(W)>>>0,Number(Y)>>>0)):[],coordinateTransformMode:zr(se),cubicCoeffA:be,excludeOutside:Le,extrapolationValue:Ke,keepAspectRatioPolicy:zr(st),mode:zr(_t),nearestMode:zr(Kt)})},841176:(S,$,W,Y,se,be,Le)=>{s.jb("Slice",S,{starts:$?Array.from(ue().subarray(Number($)>>>0,Number(W)>>>0)):[],ends:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[],axes:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[]})},841440:S=>{s.jb("Tile",S,void 0)},841492:(S,$,W)=>{s.jb("InstanceNormalization",S,{epsilon:$,format:W?"NHWC":"NCHW"})},841606:(S,$,W)=>{s.jb("InstanceNormalization",S,{epsilon:$,format:W?"NHWC":"NCHW"})},841720:S=>{s.jb("Range",S,void 0)},841773:(S,$)=>{s.jb("Einsum",S,{equation:zr($)})},841854:(S,$,W,Y,se)=>{s.jb("Pad",S,{mode:$,value:W,pads:Y?Array.from(ue().subarray(Number(Y)>>>0,Number(se)>>>0)):[]})},841997:(S,$,W,Y,se,be)=>{s.jb("BatchNormalization",S,{epsilon:$,momentum:W,spatial:!!se,trainingMode:!!Y,format:be?"NHWC":"NCHW"})},842166:(S,$,W,Y,se,be)=>{s.jb("BatchNormalization",S,{epsilon:$,momentum:W,spatial:!!se,trainingMode:!!Y,format:be?"NHWC":"NCHW"})},842335:(S,$,W)=>{s.jb("CumSum",S,{exclusive:Number($),reverse:Number(W)})},842432:(S,$,W)=>{s.jb("DequantizeLinear",S,{axis:$,blockSize:W})},842522:(S,$,W,Y,se)=>{s.jb("GridSample",S,{align_corners:$,mode:zr(W),padding_mode:zr(Y),format:se?"NHWC":"NCHW"})},842692:(S,$,W,Y,se)=>{s.jb("GridSample",S,{align_corners:$,mode:zr(W),padding_mode:zr(Y),format:se?"NHWC":"NCHW"})},842862:(S,$)=>{s.jb("ScatterND",S,{reduction:zr($)})},842947:(S,$,W,Y,se,be,Le,Ke,st)=>{s.jb("Attention",S,{numHeads:$,isUnidirectional:W,maskFilterValue:Y,scale:se,doRotary:be,qkvHiddenSizes:Le?Array.from(ue().subarray(Number(Ke)>>>0,Number(Ke)+Le>>>0)):[],pastPresentShareBuffer:!!st})},843219:S=>{s.jb("BiasAdd",S,void 0)},843274:S=>{s.jb("BiasSplitGelu",S,void 0)},843335:S=>{s.jb("FastGelu",S,void 0)},843391:(S,$,W,Y,se,be,Le,Ke,st,_t,Kt,pr,$r,ti,zo,u0)=>{s.jb("Conv",S,{format:pr?"NHWC":"NCHW",auto_pad:$,dilations:W?Array.from(ue().subarray(Number(W)>>>0,Number(Y)>>>0)):[],group:se,kernel_shape:be?Array.from(ue().subarray(Number(be)>>>0,Number(Le)>>>0)):[],pads:Ke?Array.from(ue().subarray(Number(Ke)>>>0,Number(st)>>>0)):[],strides:_t?Array.from(ue().subarray(Number(_t)>>>0,Number(Kt)>>>0)):[],w_is_const:()=>!!D()[Number($r)>>>0],activation:zr(ti),activation_params:zo?Array.from($e().subarray(Number(zo)>>>0,Number(u0)>>>0)):[]})},843975:S=>{s.jb("Gelu",S,void 0)},844027:(S,$,W,Y,se,be,Le,Ke,st)=>{s.jb("GroupQueryAttention",S,{numHeads:$,kvNumHeads:W,scale:Y,softcap:se,doRotary:be,rotaryInterleaved:Le,smoothSoftmax:Ke,localWindowSize:st})},844244:(S,$,W,Y)=>{s.jb("LayerNormalization",S,{axis:$,epsilon:W,simplified:!!Y})},844355:(S,$,W,Y)=>{s.jb("LayerNormalization",S,{axis:$,epsilon:W,simplified:!!Y})},844466:(S,$,W,Y,se,be)=>{s.jb("MatMulNBits",S,{k:$,n:W,accuracyLevel:Y,bits:se,blockSize:be})},844593:(S,$,W,Y,se,be)=>{s.jb("MultiHeadAttention",S,{numHeads:$,isUnidirectional:W,maskFilterValue:Y,scale:se,doRotary:be})},844752:(S,$)=>{s.jb("QuickGelu",S,{alpha:$})},844816:(S,$,W,Y,se)=>{s.jb("RotaryEmbedding",S,{interleaved:!!$,numHeads:W,rotaryEmbeddingDim:Y,scale:se})},844955:(S,$,W)=>{s.jb("SkipLayerNormalization",S,{epsilon:$,simplified:!!W})},845057:(S,$,W)=>{s.jb("SkipLayerNormalization",S,{epsilon:$,simplified:!!W})},845159:(S,$,W,Y)=>{s.jb("GatherBlockQuantized",S,{gatherAxis:$,quantizeAxis:W,blockSize:Y})},845280:S=>{s.Zb(S)},845314:(S,$)=>s.ac(Number(S),Number($),s.Fb.dc,s.Fb.errors)};function Me(S,$,W){return hi(async()=>{await s.Xb(Number(S),Number($),Number(W))})}function Ce(){return typeof wasmOffsetConverter<"u"}class me{constructor($){de(this,"name","ExitStatus");this.message=`Program terminated with exit(${$})`,this.status=$}}var Fe=S=>{S.terminate(),S.onmessage=()=>{}},ze=[],Je=S=>{Ut.length==0&&(er(),vt(Ut[0]));var $=Ut.pop();if(!$)return 6;$t.push($),Zr[S.Ab]=$,$.Ab=S.Ab;var W={Bb:"run",fc:S.ec,Hb:S.Hb,Ab:S.Ab};return $.postMessage(W,S.Mb),0},He=0,We=(S,$,...W)=>{for(var Y=2*W.length,se=Xu(),be=Df(8*Y),Le=be>>>3,Ke=0;Ke<W.length;Ke++){var st=W[Ke];typeof st=="bigint"?(G[Le+2*Ke]=1n,G[Le+2*Ke+1]=st):(G[Le+2*Ke]=0n,Se()[Le+2*Ke+1>>>0]=st)}return S=Qm(S,0,Y,be,$),qu(se),S};function nt(S){if(c)return We(0,1,S);if(M=S,!(0<He)){for(var $ of $t)Fe($);for($ of Ut)Fe($);Ut=[],$t=[],Zr={},ee=!0}x(0,new me(S))}function ct(S){if(c)return We(1,0,S);Ht(S)}var Ht=S=>{if(M=S,c)throw ct(S),"unwind";nt(S)},Ut=[],$t=[],xn=[],Zr={},dn=S=>{var $=S.Ab;delete Zr[$],Ut.push(S),$t.splice($t.indexOf(S),1),S.Ab=0,Zm($)};function Cs(){xn.forEach(S=>S())}var vt=S=>new Promise($=>{S.onmessage=se=>{var be=(se=se.data).Bb;if(se.Gb&&se.Gb!=Gu()){var Le=Zr[se.Gb];Le?Le.postMessage(se,se.Mb):w(`Internal error! Worker sent a message "${be}" to target pthread ${se.Gb}, but that thread no longer exists!`)}else be==="checkMailbox"?De():be==="spawnThread"?Je(se):be==="cleanupThread"?dn(Zr[se.hc]):be==="loaded"?(S.loaded=!0,$(S)):be==="alert"?alert(`Thread ${se.ic}: ${se.text}`):se.target==="setimmediate"?S.postMessage(se):be==="callHandler"?s[se.Qb](...se.args):be&&w(`worker sent an unknown command ${be}`)},S.onerror=se=>{throw w(`worker sent an error! ${se.filename}:${se.lineno}: ${se.message}`),se};var W,Y=[];for(W of[])s.propertyIsEnumerable(W)&&Y.push(W);S.postMessage({Bb:"load",Rb:Y,kc:k,lc:T})});function er(){var S=new Worker((()=>{let $=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new $("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Ut.push(S)}var kr=S=>{re();var $=ye()[S+52>>>2>>>0];S=ye()[S+56>>>2>>>0],If($,$-S),qu($)},li=(S,$)=>{He=0,S=tg(S,$),0<He?M=S:Ku(S)};class ci{constructor($){this.Ib=$-24}}function Hs(S,$,W){var Y=new ci(S>>>=0);throw $>>>=0,W>>>=0,ye()[Y.Ib+16>>>2>>>0]=0,ye()[Y.Ib+4>>>2>>>0]=$,ye()[Y.Ib+8>>>2>>>0]=W,S}function Et(S,$,W,Y){return c?We(2,1,S,$,W,Y):Lo(S,$,W,Y)}function Lo(S,$,W,Y){if(S>>>=0,W>>>=0,Y>>>=0,f===void 0)return 6;var se=[];return c&&se.length===0?Et(S,$>>>=0,W,Y):(S={ec:W,Ab:S,Hb:Y,Mb:se},c?(S.Bb="spawnThread",postMessage(S,se),0):Je(S))}var Ro=typeof TextDecoder<"u"?new TextDecoder:void 0,tr=(S,$=0,W=NaN)=>{var Y=($>>>=0)+W;for(W=$;S[W]&&!(W>=Y);)++W;if(16<W-$&&S.buffer&&Ro)return Ro.decode(S.buffer instanceof ArrayBuffer?S.subarray($,W):S.slice($,W));for(Y="";$<W;){var se=S[$++];if(128&se){var be=63&S[$++];if((224&se)==192)Y+=String.fromCharCode((31&se)<<6|be);else{var Le=63&S[$++];65536>(se=(240&se)==224?(15&se)<<12|be<<6|Le:(7&se)<<18|be<<12|Le<<6|63&S[$++])?Y+=String.fromCharCode(se):(se-=65536,Y+=String.fromCharCode(55296|se>>10,56320|1023&se))}}else Y+=String.fromCharCode(se)}return Y},zr=(S,$)=>(S>>>=0)?tr(K(),S,$):"";function F(S,$,W){return c?We(3,1,S,$,W):0}function ce(S,$){if(c)return We(4,1,S,$)}var Q=S=>{for(var $=0,W=0;W<S.length;++W){var Y=S.charCodeAt(W);127>=Y?$++:2047>=Y?$+=2:55296<=Y&&57343>=Y?($+=4,++W):$+=3}return $},le=(S,$,W)=>{var Y=K();if($>>>=0,0<W){var se=$;W=$+W-1;for(var be=0;be<S.length;++be){var Le=S.charCodeAt(be);if(55296<=Le&&57343>=Le&&(Le=65536+((1023&Le)<<10)|1023&S.charCodeAt(++be)),127>=Le){if($>=W)break;Y[$++>>>0]=Le}else{if(2047>=Le){if($+1>=W)break;Y[$++>>>0]=192|Le>>6}else{if(65535>=Le){if($+2>=W)break;Y[$++>>>0]=224|Le>>12}else{if($+3>=W)break;Y[$++>>>0]=240|Le>>18,Y[$++>>>0]=128|Le>>12&63}Y[$++>>>0]=128|Le>>6&63}Y[$++>>>0]=128|63&Le}}Y[$>>>0]=0,S=$-se}else S=0;return S};function pe(S,$){if(c)return We(5,1,S,$)}function Oe(S,$,W){if(c)return We(6,1,S,$,W)}function Ue(S,$,W){return c?We(7,1,S,$,W):0}function ht(S,$){if(c)return We(8,1,S,$)}function Dt(S,$,W){if(c)return We(9,1,S,$,W)}function At(S,$,W,Y){if(c)return We(10,1,S,$,W,Y)}function Wt(S,$,W,Y){if(c)return We(11,1,S,$,W,Y)}function pt(S,$,W,Y){if(c)return We(12,1,S,$,W,Y)}function xr(S){if(c)return We(13,1,S)}function Pr(S,$){if(c)return We(14,1,S,$)}function zi(S,$,W){if(c)return We(15,1,S,$,W)}var cs,fn,ui=()=>Z(""),di=S=>{for(var $="";K()[S>>>0];)$+=cs[K()[S++>>>0]];return $},Vi={},_a={};function fi(S,$,W={}){return function(Y,se,be={}){var Le=se.name;if(!Y)throw new fn(`type "${Le}" must have a positive integer typeid pointer`);if(_a.hasOwnProperty(Y)){if(be.Sb)return;throw new fn(`Cannot register type '${Le}' twice`)}_a[Y]=se,Vi.hasOwnProperty(Y)&&(se=Vi[Y],delete Vi[Y],se.forEach(Ke=>Ke()))}(S,$,W)}var Fo=(S,$,W)=>{switch($){case 1:return W?Y=>D()[Y>>>0]:Y=>K()[Y>>>0];case 2:return W?Y=>oe()[Y>>>1>>>0]:Y=>_e()[Y>>>1>>>0];case 4:return W?Y=>ue()[Y>>>2>>>0]:Y=>ye()[Y>>>2>>>0];case 8:return W?Y=>G[Y>>>3]:Y=>H[Y>>>3];default:throw new TypeError(`invalid integer width (${$}): ${S}`)}};function Bo(S,$,W){W>>>=0,fi(S>>>=0,{name:$=di($>>>0),fromWireType:Y=>Y,toWireType:function(Y,se){if(typeof se!="bigint"&&typeof se!="number")throw se=se===null?"null":(Y=typeof se)=="object"||Y==="array"||Y==="function"?se.toString():""+se,new TypeError(`Cannot convert "${se}" to ${this.name}`);return typeof se=="number"&&(se=BigInt(se)),se},Cb:Ui,readValueFromPointer:Fo($,W,$.indexOf("u")==-1),Db:null})}var Ui=8;function Wi(S,$,W,Y){fi(S>>>=0,{name:$=di($>>>0),fromWireType:function(se){return!!se},toWireType:function(se,be){return be?W:Y},Cb:Ui,readValueFromPointer:function(se){return this.fromWireType(K()[se>>>0])},Db:null})}var As=[],Mi=[];function Ka(S){9<(S>>>=0)&&--Mi[S+1]==0&&(Mi[S]=void 0,As.push(S))}var Ln=S=>{if(!S)throw new fn("Cannot use deleted val. handle = "+S);return Mi[S]},Wn=S=>{switch(S){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let $=As.pop()||Mi.length;return Mi[$]=S,Mi[$+1]=1,$}};function us(S){return this.fromWireType(ye()[S>>>2>>>0])}var hl={name:"emscripten::val",fromWireType:S=>{var $=Ln(S);return Ka(S),$},toWireType:(S,$)=>Wn($),Cb:Ui,readValueFromPointer:us,Db:null};function Gi(S){return fi(S>>>0,hl)}var Xe=(S,$)=>{switch($){case 4:return function(W){return this.fromWireType($e()[W>>>2>>>0])};case 8:return function(W){return this.fromWireType(Se()[W>>>3>>>0])};default:throw new TypeError(`invalid float width (${$}): ${S}`)}};function Ye(S,$,W){W>>>=0,fi(S>>>=0,{name:$=di($>>>0),fromWireType:Y=>Y,toWireType:(Y,se)=>se,Cb:Ui,readValueFromPointer:Xe($,W),Db:null})}function ut(S,$,W,Y,se){if(S>>>=0,W>>>=0,$=di($>>>0),se===-1&&(se=4294967295),se=Ke=>Ke,Y===0){var be=32-8*W;se=Ke=>Ke<<be>>>be}var Le=$.includes("unsigned")?function(Ke,st){return st>>>0}:function(Ke,st){return st};fi(S,{name:$,fromWireType:se,toWireType:Le,Cb:Ui,readValueFromPointer:Fo($,W,Y!==0),Db:null})}function Vr(S,$,W){function Y(be){var Le=ye()[be>>>2>>>0];return be=ye()[be+4>>>2>>>0],new se(D().buffer,be,Le)}var se=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][$];fi(S>>>=0,{name:W=di(W>>>0),fromWireType:Y,Cb:Ui,readValueFromPointer:Y},{Sb:!0})}function pl(S,$){fi(S>>>=0,{name:$=di($>>>0),fromWireType:function(W){for(var Y,se=ye()[W>>>2>>>0],be=W+4,Le=be,Ke=0;Ke<=se;++Ke){var st=be+Ke;Ke!=se&&K()[st>>>0]!=0||(Le=zr(Le,st-Le),Y===void 0?Y=Le:(Y+="\0",Y+=Le),Le=st+1)}return Os(W),Y},toWireType:function(W,Y){Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y));var se=typeof Y=="string";if(!(se||Y instanceof Uint8Array||Y instanceof Uint8ClampedArray||Y instanceof Int8Array))throw new fn("Cannot pass non-string to std::string");var be=se?Q(Y):Y.length,Le=Hu(4+be+1),Ke=Le+4;if(ye()[Le>>>2>>>0]=be,se)le(Y,Ke,be+1);else if(se)for(se=0;se<be;++se){var st=Y.charCodeAt(se);if(255<st)throw Os(Le),new fn("String has UTF-16 code units that do not fit in 8 bits");K()[Ke+se>>>0]=st}else for(se=0;se<be;++se)K()[Ke+se>>>0]=Y[se];return W!==null&&W.push(Os,Le),Le},Cb:Ui,readValueFromPointer:us,Db(W){Os(W)}})}var qa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ml=(S,$)=>{for(var W=S>>1,Y=W+$/2;!(W>=Y)&&_e()[W>>>0];)++W;if(32<(W<<=1)-S&&qa)return qa.decode(K().slice(S,W));for(W="",Y=0;!(Y>=$/2);++Y){var se=oe()[S+2*Y>>>1>>>0];if(se==0)break;W+=String.fromCharCode(se)}return W},Xa=(S,$,W)=>{if(W??(W=2147483647),2>W)return 0;var Y=$;W=(W-=2)<2*S.length?W/2:S.length;for(var se=0;se<W;++se){var be=S.charCodeAt(se);oe()[$>>>1>>>0]=be,$+=2}return oe()[$>>>1>>>0]=0,$-Y},Ru=S=>2*S.length,Fu=(S,$)=>{for(var W=0,Y="";!(W>=$/4);){var se=ue()[S+4*W>>>2>>>0];if(se==0)break;++W,65536<=se?(se-=65536,Y+=String.fromCharCode(55296|se>>10,56320|1023&se)):Y+=String.fromCharCode(se)}return Y},Bu=(S,$,W)=>{if($>>>=0,W??(W=2147483647),4>W)return 0;var Y=$;W=Y+W-4;for(var se=0;se<S.length;++se){var be=S.charCodeAt(se);if(55296<=be&&57343>=be&&(be=65536+((1023&be)<<10)|1023&S.charCodeAt(++se)),ue()[$>>>2>>>0]=be,($+=4)+4>W)break}return ue()[$>>>2>>>0]=0,$-Y},Te=S=>{for(var $=0,W=0;W<S.length;++W){var Y=S.charCodeAt(W);55296<=Y&&57343>=Y&&++W,$+=4}return $};function U(S,$,W){if(S>>>=0,$>>>=0,W=di(W>>>=0),$===2)var Y=ml,se=Xa,be=Ru,Le=Ke=>_e()[Ke>>>1>>>0];else $===4&&(Y=Fu,se=Bu,be=Te,Le=Ke=>ye()[Ke>>>2>>>0]);fi(S,{name:W,fromWireType:Ke=>{for(var st,_t=ye()[Ke>>>2>>>0],Kt=Ke+4,pr=0;pr<=_t;++pr){var $r=Ke+4+pr*$;pr!=_t&&Le($r)!=0||(Kt=Y(Kt,$r-Kt),st===void 0?st=Kt:(st+="\0",st+=Kt),Kt=$r+$)}return Os(Ke),st},toWireType:(Ke,st)=>{if(typeof st!="string")throw new fn(`Cannot pass non-string to C++ string type ${W}`);var _t=be(st),Kt=Hu(4+_t+$);return ye()[Kt>>>2>>>0]=_t/$,se(st,Kt+4,_t+$),Ke!==null&&Ke.push(Os,Kt),Kt},Cb:Ui,readValueFromPointer:us,Db(Ke){Os(Ke)}})}function ie(S,$){fi(S>>>=0,{Tb:!0,name:$=di($>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function he(S){$f(S>>>0,!l,1,!o,131072,!1),Cs()}var xe=S=>{if(!ee)try{if(S(),!(0<He))try{c?Ku(M):Ht(M)}catch($){$ instanceof me||$=="unwind"||x(0,$)}}catch($){$ instanceof me||$=="unwind"||x(0,$)}};function ke(S){S>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(ue(),S>>>2,S).value.then(De),S+=128,Atomics.store(ue(),S>>>2,1))}var De=()=>{var S=Gu();S&&(ke(S),xe(eg))};function Qe(S,$){(S>>>=0)==$>>>0?setTimeout(De):c?postMessage({Gb:S,Bb:"checkMailbox"}):(S=Zr[S])&&S.postMessage({Bb:"checkMailbox"})}var at=[];function it(S,$,W,Y,se){for($>>>=0,Y/=2,at.length=Y,W=se>>>0>>>3,se=0;se<Y;se++)at[se]=G[W+2*se]?G[W+2*se+1]:Se()[W+2*se+1>>>0];return($?fe[$]:Of[S])(...at)}var ft=()=>{He=0};function Rt(S){S>>>=0,c?postMessage({Bb:"cleanupThread",hc:S}):dn(Zr[S])}function br(S){}var mr=(S,$)=>{var W=_a[S];if(W===void 0)throw S=Xm(S),W=di(S),Os(S),new fn(`${$} has unknown type ${W}`);return W},hn=(S,$,W)=>{var Y=[];return S=S.toWireType(Y,W),Y.length&&(ye()[$>>>2>>>0]=Wn(Y)),S};function Or(S,$,W){return $>>>=0,W>>>=0,S=Ln(S>>>0),$=mr($,"emval::as"),hn($,W,S)}function Gn(S,$){return $>>>=0,S=Ln(S>>>0),($=mr($,"emval::as")).toWireType(null,S)}var ei=S=>{try{S()}catch($){Z($)}},bn=0,Hn=null,Si=0,ds=[],Xr={},Kn={},Hi=0,Ni=null,Ya=[];function hi(S){return function($){if(!ee){if(bn===0){var W=!1,Y=!1;$((se=0)=>{if(!ee&&(Si=se,W=!0,Y)){bn=2,ei(()=>ng(Hn)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),se=!1;try{var be=function(){var st=ue()[Hn+8>>>2>>>0];return st=Ct[Kn[st]],--He,st()}()}catch(st){be=st,se=!0}var Le=!1;if(!Hn){var Ke=Ni;Ke&&(Ni=null,(se?Ke.reject:Ke.resolve)(be),Le=!0)}if(se&&!Le)throw be}}),Y=!0,W||(bn=1,Hn=function(){var se=Hu(65548),be=se+12;ye()[se>>>2>>>0]=be,ye()[se+4>>>2>>>0]=be+65536,be=ds[0];var Le=Xr[be];return Le===void 0&&(Le=Hi++,Xr[be]=Le,Kn[Le]=be),be=Le,ue()[se+8>>>2>>>0]=be,se}(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),ei(()=>rg(Hn)))}else bn===2?(bn=0,ei(ig),Os(Hn),Hn=null,Ya.forEach(xe)):Z(`invalid state: ${bn}`);return Si}}($=>{S().then($)})}function xa(S){return S>>>=0,hi(async()=>{var $=await Ln(S);return Wn($)})}var jn=[];function wn(S,$,W,Y){return W>>>=0,Y>>>=0,(S=jn[S>>>0])(null,$=Ln($>>>0),W,Y)}var Rn={},pn=S=>{var $=Rn[S];return $===void 0?di(S):$};function Ki(S,$,W,Y,se){return W>>>=0,Y>>>=0,se>>>=0,(S=jn[S>>>0])($=Ln($>>>0),$[W=pn(W)],Y,se)}var gl=()=>typeof globalThis=="object"?globalThis:Function("return this")();function Pf(S){return(S>>>=0)==0?Wn(gl()):(S=pn(S),Wn(gl()[S]))}var dc=S=>{var $=jn.length;return jn.push(S),$},F_=(S,$)=>{for(var W=Array(S),Y=0;Y<S;++Y)W[Y]=mr(ye()[$+4*Y>>>2>>>0],"parameter "+Y);return W},Nm=(S,$)=>Object.defineProperty($,"name",{value:S});function B_(S,$,W){var Y=($=F_(S,$>>>0)).shift();S--;var se=`return function (obj, func, destructorsRef, args) {
`,be=0,Le=[];W===0&&Le.push("obj");for(var Ke=["retType"],st=[Y],_t=0;_t<S;++_t)Le.push("arg"+_t),Ke.push("argType"+_t),st.push($[_t]),se+=`  var arg${_t} = argType${_t}.readValueFromPointer(args${be?"+"+be:""});
`,be+=$[_t].Cb;return se+=`  var rv = ${W===1?"new func":"func.call"}(${Le.join(", ")});
`,Y.Tb||(Ke.push("emval_returnValue"),st.push(hn),se+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Ke.push(se+`};
`),S=function(Kt){var pr=Function;if(!(pr instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof pr} which is not a function`);var $r=Nm(pr.name||"unknownFunctionName",function(){});return $r.prototype=pr.prototype,$r=new $r,(Kt=pr.apply($r,Kt))instanceof Object?Kt:$r}(Ke)(...st),W=`methodCaller<(${$.map(Kt=>Kt.name).join(", ")}) => ${Y.name}>`,dc(Nm(W,S))}function z_(S){return S=pn(S>>>0),Wn(s[S])}function V_(S,$){return $>>>=0,S=Ln(S>>>0),$=Ln($),Wn(S[$])}function fc(S){9<(S>>>=0)&&(Mi[S+1]+=1)}function U_(){return Wn([])}function W_(S){S=Ln(S>>>0);for(var $=Array(S.length),W=0;W<S.length;W++)$[W]=S[W];return Wn($)}function G_(S){return Wn(pn(S>>>0))}function H_(){return Wn({})}function K_(S){for(var $=Ln(S>>>=0);$.length;){var W=$.pop();$.pop()(W)}Ka(S)}function hc(S,$,W){$>>>=0,W>>>=0,S=Ln(S>>>0),$=Ln($),W=Ln(W),S[$]=W}function q_(S,$){return $>>>=0,S=(S=mr(S>>>0,"_emval_take_value")).readValueFromPointer($),Wn(S)}function X_(S,$){S=-9007199254740992>S||9007199254740992<S?NaN:Number(S),$>>>=0,S=new Date(1e3*S),ue()[$>>>2>>>0]=S.getUTCSeconds(),ue()[$+4>>>2>>>0]=S.getUTCMinutes(),ue()[$+8>>>2>>>0]=S.getUTCHours(),ue()[$+12>>>2>>>0]=S.getUTCDate(),ue()[$+16>>>2>>>0]=S.getUTCMonth(),ue()[$+20>>>2>>>0]=S.getUTCFullYear()-1900,ue()[$+24>>>2>>>0]=S.getUTCDay(),S=(S.getTime()-Date.UTC(S.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ue()[$+28>>>2>>>0]=S}var Im=S=>S%4==0&&(S%100!=0||S%400==0),Dm=[0,31,60,91,121,152,182,213,244,274,305,335],Lm=[0,31,59,90,120,151,181,212,243,273,304,334];function Rm(S,$){S=-9007199254740992>S||9007199254740992<S?NaN:Number(S),$>>>=0,S=new Date(1e3*S),ue()[$>>>2>>>0]=S.getSeconds(),ue()[$+4>>>2>>>0]=S.getMinutes(),ue()[$+8>>>2>>>0]=S.getHours(),ue()[$+12>>>2>>>0]=S.getDate(),ue()[$+16>>>2>>>0]=S.getMonth(),ue()[$+20>>>2>>>0]=S.getFullYear()-1900,ue()[$+24>>>2>>>0]=S.getDay();var W=(Im(S.getFullYear())?Dm:Lm)[S.getMonth()]+S.getDate()-1|0;ue()[$+28>>>2>>>0]=W,ue()[$+36>>>2>>>0]=-60*S.getTimezoneOffset(),W=new Date(S.getFullYear(),6,1).getTimezoneOffset();var Y=new Date(S.getFullYear(),0,1).getTimezoneOffset();S=0|(W!=Y&&S.getTimezoneOffset()==Math.min(Y,W)),ue()[$+32>>>2>>>0]=S}function Y_(S){S>>>=0;var $=new Date(ue()[S+20>>>2>>>0]+1900,ue()[S+16>>>2>>>0],ue()[S+12>>>2>>>0],ue()[S+8>>>2>>>0],ue()[S+4>>>2>>>0],ue()[S>>>2>>>0],0),W=ue()[S+32>>>2>>>0],Y=$.getTimezoneOffset(),se=new Date($.getFullYear(),6,1).getTimezoneOffset(),be=new Date($.getFullYear(),0,1).getTimezoneOffset(),Le=Math.min(be,se);return 0>W?ue()[S+32>>>2>>>0]=+(se!=be&&Le==Y):0<W!=(Le==Y)&&(se=Math.max(be,se),$.setTime($.getTime()+6e4*((0<W?Le:se)-Y))),ue()[S+24>>>2>>>0]=$.getDay(),W=(Im($.getFullYear())?Dm:Lm)[$.getMonth()]+$.getDate()-1|0,ue()[S+28>>>2>>>0]=W,ue()[S>>>2>>>0]=$.getSeconds(),ue()[S+4>>>2>>>0]=$.getMinutes(),ue()[S+8>>>2>>>0]=$.getHours(),ue()[S+12>>>2>>>0]=$.getDate(),ue()[S+16>>>2>>>0]=$.getMonth(),ue()[S+20>>>2>>>0]=$.getYear(),S=$.getTime(),BigInt(isNaN(S)?-1:S/1e3)}function Fm(S,$,W,Y,se,be,Le){return c?We(16,1,S,$,W,Y,se,be,Le):-52}function Ef(S,$,W,Y,se,be){if(c)return We(17,1,S,$,W,Y,se,be)}var pc={},Bm=()=>performance.timeOrigin+performance.now();function zm(S,$){if(c)return We(18,1,S,$);if(pc[S]&&(clearTimeout(pc[S].id),delete pc[S]),!$)return 0;var W=setTimeout(()=>{delete pc[S],xe(()=>Jm(S,performance.timeOrigin+performance.now()))},$);return pc[S]={id:W,qc:$},0}function Vm(S,$,W,Y){S>>>=0,$>>>=0,W>>>=0,Y>>>=0;var se=new Date().getFullYear(),be=new Date(se,0,1).getTimezoneOffset();se=new Date(se,6,1).getTimezoneOffset();var Le=Math.max(be,se);ye()[S>>>2>>>0]=60*Le,ue()[$>>>2>>>0]=+(be!=se),S=($=Ke=>{var st=Math.abs(Ke);return`UTC${0<=Ke?"-":"+"}${String(Math.floor(st/60)).padStart(2,"0")}${String(st%60).padStart(2,"0")}`})(be),$=$(se),se<be?(le(S,W,17),le($,Y,17)):(le(S,Y,17),le($,W,17))}var xT=()=>Date.now();function Q_(S,$,W){return 0<=S&&3>=S?(S===0?S=Date.now():S=performance.timeOrigin+performance.now(),G[W>>>0>>>3]=BigInt(Math.round(1e6*S)),0):28}var zu=[],jf=(S,$)=>{zu.length=0;for(var W;W=K()[S++>>>0];){var Y=W!=105;$+=(Y&=W!=112)&&$%8?4:0,zu.push(W==112?ye()[$>>>2>>>0]:W==106?G[$>>>3]:W==105?ue()[$>>>2>>>0]:Se()[$>>>3>>>0]),$+=Y?8:4}return zu};function Cf(S,$,W){return S>>>=0,$=jf($>>>0,W>>>0),fe[S](...$)}function Z_(S,$,W){return S>>>=0,$=jf($>>>0,W>>>0),fe[S](...$)}var J_=()=>{};function e0(S,$){return w(zr(S>>>0,$>>>0))}var t0=()=>{throw He+=1,"unwind"};function r0(){return 4294901760}var n0=()=>navigator.hardwareConcurrency;function i0(){return Z("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function s0(S){S>>>=0;var $=K().length;if(S<=$||4294901760<S)return!1;for(var W=1;4>=W;W*=2){var Y=$*(1+.2/W);Y=Math.min(Y,S+100663296);e:{Y=(Math.min(4294901760,65536*Math.ceil(Math.max(S,Y)/65536))-k.buffer.byteLength+65535)/65536|0;try{k.grow(Y),re();var se=1;break e}catch{}se=void 0}if(se)return!0}return!1}var mc=()=>(Z("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),gc={},Vu=S=>{S.forEach($=>{mc()})};function Um(){var S=Error().stack.toString().split(`
`);return S[0]=="Error"&&S.shift(),Vu(S),gc.Lb=mc(),gc.cc=S,gc.Lb}function a0(S,$,W){if(S>>>=0,$>>>=0,gc.Lb==S)var Y=gc.cc;else(Y=Error().stack.toString().split(`
`))[0]=="Error"&&Y.shift(),Vu(Y);for(var se=3;Y[se]&&mc()!=S;)++se;for(S=0;S<W&&Y[S+se];++S)ue()[$+4*S>>>2>>>0]=mc();return S}var Uu,Qa={},Wm=()=>{if(!Uu){var S,$={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(S in Qa)Qa[S]===void 0?delete $[S]:$[S]=Qa[S];var W=[];for(S in $)W.push(`${S}=${$[S]}`);Uu=W}return Uu};function o0(S,$){if(c)return We(19,1,S,$);S>>>=0,$>>>=0;var W=0;return Wm().forEach((Y,se)=>{var be=$+W;for(se=ye()[S+4*se>>>2>>>0]=be,be=0;be<Y.length;++be)D()[se++>>>0]=Y.charCodeAt(be);D()[se>>>0]=0,W+=Y.length+1}),0}function Gm(S,$){if(c)return We(20,1,S,$);S>>>=0,$>>>=0;var W=Wm();ye()[S>>>2>>>0]=W.length;var Y=0;return W.forEach(se=>Y+=se.length+1),ye()[$>>>2>>>0]=Y,0}function l0(S){return c?We(21,1,S):52}function Hm(S,$,W,Y){return c?We(22,1,S,$,W,Y):52}function Af(S,$,W,Y){return c?We(23,1,S,$,W,Y):70}var c0=[null,[],[]];function Km(S,$,W,Y){if(c)return We(24,1,S,$,W,Y);$>>>=0,W>>>=0,Y>>>=0;for(var se=0,be=0;be<W;be++){var Le=ye()[$>>>2>>>0],Ke=ye()[$+4>>>2>>>0];$+=8;for(var st=0;st<Ke;st++){var _t=K()[Le+st>>>0],Kt=c0[S];_t===0||_t===10?((S===1?b:w)(tr(Kt)),Kt.length=0):Kt.push(_t)}se+=Ke}return ye()[Y>>>2>>>0]=se,0}c||function(){for(var S=s.numThreads-1;S--;)er();ze.unshift(()=>{Ne++,function($){c?$():Promise.all(Ut.map(vt)).then($)}(()=>Pe())})}();for(var qm=Array(256),Wu=0;256>Wu;++Wu)qm[Wu]=String.fromCharCode(Wu);cs=qm,fn=s.BindingError=class extends Error{constructor(S){super(S),this.name="BindingError"}},s.InternalError=class extends Error{constructor(S){super(S),this.name="InternalError"}},Mi.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=()=>Mi.length/2-5-As.length;var Ct,Of=[nt,ct,Et,F,ce,pe,Oe,Ue,ht,Dt,At,Wt,pt,xr,Pr,zi,Fm,Ef,zm,o0,Gm,l0,Hm,Af,Km];(async function(){function S(Y,se){return Ct=Y.exports,Ct=function(){var be=Ct,Le={};for(let[Ke,st]of Object.entries(be))Le[Ke]=typeof st=="function"?(..._t)=>{ds.push(Ke);try{return st(..._t)}finally{ee||(ds.pop(),Hn&&bn===1&&ds.length===0&&(bn=0,He+=1,ei(Lf),typeof Fibers<"u"&&Fibers.rc()))}}:st;return Le}(),Ct=function(){var be=Ct,Le=st=>_t=>st(_t)>>>0,Ke=st=>()=>st()>>>0;return(be=Object.assign({},be)).Da=Le(be.Da),be.fb=Ke(be.fb),be.hb=Le(be.hb),be.tb=Le(be.tb),be.ub=Ke(be.ub),be.__cxa_get_exception_ptr=Le(be.__cxa_get_exception_ptr),be}(),xn.push(Ct.ib),T=se,Pe(),Ct}Ne++;var $=ne();if(s.instantiateWasm)return new Promise(Y=>{s.instantiateWasm($,(se,be)=>{S(se,be),Y(se.exports)})});if(c)return new Promise(Y=>{ge=se=>{var be=new WebAssembly.Instance(se,ne());Y(S(be,se))}});we??(we=s.locateFile?s.locateFile?s.locateFile("ort-wasm-simd-threaded.jsep.wasm",y):y+"ort-wasm-simd-threaded.jsep.wasm":new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href);try{var W=await async function(Y){var se=we;if(!q&&typeof WebAssembly.instantiateStreaming=="function"&&!B(se))try{var be=fetch(se,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(be,Y)}catch(Le){w(`wasm streaming compile failed: ${Le}`),w("falling back to ArrayBuffer instantiation")}return async function(Le,Ke){try{var st=await async function(_t){if(!q)try{var Kt=await p(_t);return new Uint8Array(Kt)}catch{}if(_t==we&&q)_t=new Uint8Array(q);else{if(!m)throw"both async and sync fetching of the wasm failed";_t=m(_t)}return _t}(Le);return await WebAssembly.instantiate(st,Ke)}catch(_t){w(`failed to asynchronously prepare wasm: ${_t}`),Z(_t)}}(se,Y)}($);return S(W.instance,W.module)}catch(Y){return i(Y),Promise.reject(Y)}})();var Xm=S=>(Xm=Ct.Da)(S),Ym=()=>(Ym=Ct.Ea)();s._OrtInit=(S,$)=>(s._OrtInit=Ct.Fa)(S,$),s._OrtGetLastError=(S,$)=>(s._OrtGetLastError=Ct.Ga)(S,$),s._OrtCreateSessionOptions=(S,$,W,Y,se,be,Le,Ke,st,_t)=>(s._OrtCreateSessionOptions=Ct.Ha)(S,$,W,Y,se,be,Le,Ke,st,_t),s._OrtAppendExecutionProvider=(S,$,W,Y,se)=>(s._OrtAppendExecutionProvider=Ct.Ia)(S,$,W,Y,se),s._OrtAddFreeDimensionOverride=(S,$,W)=>(s._OrtAddFreeDimensionOverride=Ct.Ja)(S,$,W),s._OrtAddSessionConfigEntry=(S,$,W)=>(s._OrtAddSessionConfigEntry=Ct.Ka)(S,$,W),s._OrtReleaseSessionOptions=S=>(s._OrtReleaseSessionOptions=Ct.La)(S),s._OrtCreateSession=(S,$,W)=>(s._OrtCreateSession=Ct.Ma)(S,$,W),s._OrtReleaseSession=S=>(s._OrtReleaseSession=Ct.Na)(S),s._OrtGetInputOutputCount=(S,$,W)=>(s._OrtGetInputOutputCount=Ct.Oa)(S,$,W),s._OrtGetInputOutputMetadata=(S,$,W,Y)=>(s._OrtGetInputOutputMetadata=Ct.Pa)(S,$,W,Y),s._OrtFree=S=>(s._OrtFree=Ct.Qa)(S),s._OrtCreateTensor=(S,$,W,Y,se,be)=>(s._OrtCreateTensor=Ct.Ra)(S,$,W,Y,se,be),s._OrtGetTensorData=(S,$,W,Y,se)=>(s._OrtGetTensorData=Ct.Sa)(S,$,W,Y,se),s._OrtReleaseTensor=S=>(s._OrtReleaseTensor=Ct.Ta)(S),s._OrtCreateRunOptions=(S,$,W,Y)=>(s._OrtCreateRunOptions=Ct.Ua)(S,$,W,Y),s._OrtAddRunConfigEntry=(S,$,W)=>(s._OrtAddRunConfigEntry=Ct.Va)(S,$,W),s._OrtReleaseRunOptions=S=>(s._OrtReleaseRunOptions=Ct.Wa)(S),s._OrtCreateBinding=S=>(s._OrtCreateBinding=Ct.Xa)(S),s._OrtBindInput=(S,$,W)=>(s._OrtBindInput=Ct.Ya)(S,$,W),s._OrtBindOutput=(S,$,W,Y)=>(s._OrtBindOutput=Ct.Za)(S,$,W,Y),s._OrtClearBoundOutputs=S=>(s._OrtClearBoundOutputs=Ct._a)(S),s._OrtReleaseBinding=S=>(s._OrtReleaseBinding=Ct.$a)(S),s._OrtRunWithBinding=(S,$,W,Y,se)=>(s._OrtRunWithBinding=Ct.ab)(S,$,W,Y,se),s._OrtRun=(S,$,W,Y,se,be,Le,Ke)=>(s._OrtRun=Ct.bb)(S,$,W,Y,se,be,Le,Ke),s._OrtEndProfiling=S=>(s._OrtEndProfiling=Ct.cb)(S),s._JsepOutput=(S,$,W)=>(s._JsepOutput=Ct.db)(S,$,W),s._JsepGetNodeName=S=>(s._JsepGetNodeName=Ct.eb)(S);var Gu=()=>(Gu=Ct.fb)(),Os=s._free=S=>(Os=s._free=Ct.gb)(S),Hu=s._malloc=S=>(Hu=s._malloc=Ct.hb)(S),$f=(S,$,W,Y,se,be)=>($f=Ct.kb)(S,$,W,Y,se,be),Nf=()=>(Nf=Ct.lb)(),Qm=(S,$,W,Y,se)=>(Qm=Ct.mb)(S,$,W,Y,se),Zm=S=>(Zm=Ct.nb)(S),Ku=S=>(Ku=Ct.ob)(S),Jm=(S,$)=>(Jm=Ct.pb)(S,$),eg=()=>(eg=Ct.qb)(),If=(S,$)=>(If=Ct.rb)(S,$),qu=S=>(qu=Ct.sb)(S),Df=S=>(Df=Ct.tb)(S),Xu=()=>(Xu=Ct.ub)(),tg=s.dynCall_ii=(S,$)=>(tg=s.dynCall_ii=Ct.vb)(S,$),rg=S=>(rg=Ct.wb)(S),Lf=()=>(Lf=Ct.xb)(),ng=S=>(ng=Ct.yb)(S),ig=()=>(ig=Ct.zb)();return s.stackSave=()=>Xu(),s.stackRestore=S=>qu(S),s.stackAlloc=S=>Df(S),s.setValue=function(S,$,W="i8"){switch(W.endsWith("*")&&(W="*"),W){case"i1":case"i8":D()[S>>>0]=$;break;case"i16":oe()[S>>>1>>>0]=$;break;case"i32":ue()[S>>>2>>>0]=$;break;case"i64":G[S>>>3]=BigInt($);break;case"float":$e()[S>>>2>>>0]=$;break;case"double":Se()[S>>>3>>>0]=$;break;case"*":ye()[S>>>2>>>0]=$;break;default:Z(`invalid type for setValue: ${W}`)}},s.getValue=function(S,$="i8"){switch($.endsWith("*")&&($="*"),$){case"i1":case"i8":return D()[S>>>0];case"i16":return oe()[S>>>1>>>0];case"i32":return ue()[S>>>2>>>0];case"i64":return G[S>>>3];case"float":return $e()[S>>>2>>>0];case"double":return Se()[S>>>3>>>0];case"*":return ye()[S>>>2>>>0];default:Z(`invalid type for getValue: ${$}`)}},s.UTF8ToString=zr,s.stringToUTF8=le,s.lengthBytesUTF8=Q,function S(){if(0<Ne)je=S;else if(c)n(s),J();else{for(;0<ze.length;)ze.shift()(s);0<Ne?je=S:(s.calledRun=!0,ee||(J(),n(s)))}}(),s.PTR_SIZE=4,a}),Sie=LP,uW=(t=(e=globalThis.self)==null?void 0:e.name)==null?void 0:t.startsWith("em-pthread"),uW&&LP()}),RP,dA,dW,qs,Pie,Ex,fW,hW,FP,pW,BP,Eie,zP,jie,lI=Ze(()=>{oI(),RP=typeof location>"u"?void 0:location.origin,dA=import.meta.url>"file:"&&import.meta.url<"file;",dW=()=>{{if(dA){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,RP).href}return import.meta.url}},qs=dW(),Pie=()=>{if(qs&&!qs.startsWith("blob:"))return qs.substring(0,qs.lastIndexOf("/")+1)},Ex=(e,t)=>{try{let r=t??qs;return(r?new URL(e,r):new URL(e)).origin===RP}catch{return!1}},fW=(e,t)=>{let r=t??qs;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},hW=(e,t)=>`${t??"./"}${e}`,FP=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},pW=async e=>(await import(e)).default,BP=(BKe(),s_(kie)).default,Eie=async()=>{if(!qs)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(Ex(qs))return[void 0,BP()];let e=await FP(qs);return[e,BP(e)]},zP=(zKe(),s_(Mie)).default,jie=async(e,t,r)=>{if(!e&&!t&&zP&&qs&&Ex(qs))return[void 0,zP];{let n="ort-wasm-simd-threaded.jsep.mjs",i=e??fW(n,t),s=r&&i&&!Ex(i,t),a=s?await FP(i):i??hW(n,t);return[s?a:void 0,await pW(a)]}}}),VP,jx,Ng,UP,mW,gW,vW,cI,Kr,Mf=Ze(()=>{lI(),jx=!1,Ng=!1,UP=!1,mW=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},gW=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vW=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},cI=async e=>{if(jx)return Promise.resolve();if(Ng)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(UP)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ng=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!vW())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!gW())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=mW();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let i=e.wasmPaths,s=typeof i=="string"?i:void 0,a=i==null?void 0:i.mjs,o=(a==null?void 0:a.href)??a,l=i==null?void 0:i.wasm,c=(l==null?void 0:l.href)??l,f=e.wasmBinary,[d,h]=await jie(o,s,r>1),p=!1,m=[];if(t>0&&m.push(new Promise(g=>{setTimeout(()=>{p=!0,g()},t)})),m.push(new Promise((g,x)=>{let y={numThreads:r};if(f)y.wasmBinary=f;else if(c||s)y.locateFile=v=>c??s+v;else if(o&&o.indexOf("blob:")!==0)y.locateFile=v=>new URL(v,o).href;else if(d){let v=Pie();v&&(y.locateFile=_=>v+_)}h(y).then(v=>{Ng=!1,jx=!0,VP=v,g(),d&&URL.revokeObjectURL(d)},v=>{Ng=!1,UP=!0,x(v)})})),await Promise.race(m),p)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Kr=()=>{if(jx&&VP)return VP;throw new Error("WebAssembly is not initialized yet.")}}),vo,g1,Rr,uI=Ze(()=>{Mf(),vo=(e,t)=>{let r=Kr(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i},g1=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,s])=>{let a=t?t+i:i;if(typeof s=="object")g1(s,a+".",r,n);else if(typeof s=="string"||typeof s=="number")n(a,s.toString());else if(typeof s=="boolean")n(a,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},Rr=e=>{let t=Kr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetLastError(i,i+n);let s=Number(t.getValue(i,n===4?"i32":"i64")),a=t.getValue(i+n,"*"),o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${s}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}}),Cie,VKe=Ze(()=>{Mf(),uI(),Cie=e=>{let t=Kr(),r=0,n=[],i=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(i.terminate=!1);let s=0;return(e==null?void 0:e.tag)!==void 0&&(s=vo(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,s),r===0&&Rr("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&g1(e.extra,"",new WeakSet,(a,o)=>{let l=vo(a,n),c=vo(o,n);t._OrtAddRunConfigEntry(r,l,c)!==0&&Rr(`Can't set a run config entry: ${a} - ${o}.`)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(a=>t._free(a)),s}}}),yW,_W,xW,Ig,bW,Aie,UKe=Ze(()=>{Mf(),uI(),yW=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},_W=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},xW=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},Ig=(e,t,r,n)=>{let i=vo(t,n),s=vo(r,n);Kr()._OrtAddSessionConfigEntry(e,i,s)!==0&&Rr(`Can't set a session config entry: ${t} - ${r}.`)},bW=async(e,t,r)=>{for(let n of t){let i=typeof n=="string"?n:n.name,s=[];switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let f=n==null?void 0:n.deviceType;f&&Ig(e,"deviceType",f,r)}break;case"webgpu":if(i="JS",typeof n!="string"){let f=n;if(f!=null&&f.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);Ig(e,"preferredLayout",f.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let a=vo(i,r),o=s.length,l=0,c=0;if(o>0){l=Kr()._malloc(o*Kr().PTR_SIZE),r.push(l),c=Kr()._malloc(o*Kr().PTR_SIZE),r.push(c);for(let f=0;f<o;f++)Kr().setValue(l+f*Kr().PTR_SIZE,s[f][0],"*"),Kr().setValue(c+f*Kr().PTR_SIZE,s[f][1],"*")}await Kr()._OrtAppendExecutionProvider(e,a,l,c,o)!==0&&Rr(`Can't append execution provider: ${i}.`)}},Aie=async e=>{let t=Kr(),r=0,n=[],i=e||{};xW(i);try{let s=yW(i.graphOptimizationLevel??"all"),a=_W(i.executionMode??"sequential"),o=typeof i.logId=="string"?vo(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let c=i.logVerbosityLevel??0;if(!Number.isInteger(c)||c<0||c>4)throw new Error(`log verbosity level is not valid: ${c}`);let f=typeof i.optimizedModelFilePath=="string"?vo(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(s,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,o,l,c,f),r===0&&Rr("Can't create session options."),i.executionProviders&&await bW(r,i.executionProviders,n),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);Ig(r,"enableGraphCapture",i.enableGraphCapture.toString(),n)}if(i.freeDimensionOverrides)for(let[d,h]of Object.entries(i.freeDimensionOverrides)){if(typeof d!="string")throw new Error(`free dimension override name must be a string: ${d}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let p=vo(d,n);t._OrtAddFreeDimensionOverride(r,p,h)!==0&&Rr(`Can't set a free dimension override: ${d} - ${h}.`)}return i.extra!==void 0&&g1(i.extra,"",new WeakSet,(d,h)=>{Ig(r,d,h,n)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&Rr("Can't release session options."),n.forEach(a=>t._free(a)),s}}}),uh,Al,kd,dI,v1,fI,hI,fA,Lt=Ze(()=>{uh=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},Al=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},kd=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((i,s)=>i*s,1);return r>0?Math.ceil(n*r):void 0},dI=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},v1=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},fI=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",hI=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",fA=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),pI,Oie=Ze(()=>{oI(),pI=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),s;try{s=new ArrayBuffer(n)}catch(o){if(o instanceof RangeError){let l=Math.ceil(n/65536);s=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw o}let a=0;for(;;){let{done:o,value:l}=await i.read();if(o)break;let c=l.byteLength;new Uint8Array(s,a,c).set(l),a+=c}return new Uint8Array(s,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),wW,kW,TW,MW,mI,SW,vr,uc=Ze(()=>{Lt(),wW=["V","I","W","E","F"],kW=(e,t)=>{console.log(`[${wW[e]},${new Date().toISOString()}]${t}`)},mI=(e,t)=>{TW=e,MW=t},SW=(e,t)=>{let r=v1(e),n=v1(TW);r>=n&&kW(r,typeof t=="function"?t():t)},vr=(...e)=>{MW&&SW(...e)}}),PW,tm,Ie,y1,$ie,Nie,Iie,Zt=Ze(()=>{PW=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},tm=class{static calcShape(e,t,r=!1){let n=e.length,i=t.length;if(n===0)return t;if(i===0)return e;let s=Math.max(e.length,t.length),a=new Array(s);if(r){if(n<2||i<2)return;let o=PW.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(o===void 0)return;[a[s-2],a[s-1]]=o}for(let o=r?3:1;o<=s;o++){let l=n-o<0?1:e[n-o],c=i-o<0?1:t[i-o];if(l!==c&&l>1&&c>1)return;let f=Math.max(l,c);if(l&&c)a[s-o]=Math.max(l,c);else{if(f>1)return;a[s-o]=0}}return a}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(e[r-i]!==1&&e[r-i]!==t[n-i])return!1;return!0}},Ie=class pb{static size(t){return pb.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let i=new Array(n),s=n-1;for(;s>=0;){if(t[s]%r===0){i[s]=t[s]/r;break}if(r%t[s]!==0)throw new Error("cannot convert shape");i[s]=1,r/=t[s],s--}for(s--;s>=0;s--)i[s]=t[s];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return pb.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return pb.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let i=1;for(let s=r;s<n;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=Number(t[s])}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((i,s)=>i+r[s]+r[s+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,i)=>n===r[i])}},y1=class rv{static adjustPoolAttributes(t,r,n,i,s,a){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let o=0;o<r.length-2;o++)o>=n.length?n.push(r[o+2]):n[o]=r[o+2];for(let o=0;o<n.length;o++)if(o<i.length){if(i[o]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let o=0;o<n.length;o++)if(o<s.length){if(s[o]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let o=0;o<n.length*2;o++)if(o<a.length){if(a[o]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let o=0;o<n.length;o++){if(n[o]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[o]>=n[o]||a[o+n.length]>=n[o])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,i,s,a,o){if(o){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)rv.adjustPadAndReturnShape(t[l+(a?1:2)],r[l],n[l],i[l],s,l,l+t.length-2,o)}}static computePoolOutputShape(t,r,n,i,s,a,o){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return rv.computeShapeHelper(t,r,l,n,i,s,a,o),l}static computeConvOutputShape(t,r,n,i,s,a,o){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return rv.computeShapeHelper(!1,t,l,n,i,s,a,o),l}static computeShapeHelper(t,r,n,i,s,a,o,l){if(t)for(let c=0;c<r.length-2;c++)n.push(1);else for(let c=0;c<r.length-2;c++)n.push(rv.adjustPadAndReturnShape(r[c+2],i[c],s[c],a[c],o,c,c+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,i,s,a,o,l){let c=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return s[a]=0,s[o]=0,Math.floor((t-c)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let f=((t+r-1)/r-1)*r+i-t;return s[a]=Math.floor(l==="SAME_LOWER"?(f+1)/2:f/2),s[o]=f-s[a],Math.floor((t+f-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[a]+s[o]-c)/r+1)}},$ie=class{static getShapeOfGemmResult(e,t,r,n,i){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let s,a,o;t?(s=e[1],a=e[0]):(s=e[0],a=e[1]);let l=-1;if(n?(o=r[0],l=1):(o=r[1],l=0),r[l]!==a)throw new Error("dimension mismatch");if(s<=0||o<=0||a<=0)throw new Error("invalid shape specified");if(i&&!tm.isValidBroadcast(i,[s,o]))throw new Error("gemm: invalid bias shape for broadcast");return[s,o,a]}},Nie=-34028234663852886e22,Iie=34028234663852886e22}),gI,Die=Ze(()=>{Lt(),gI=(e,t)=>new(dI(t))(e)}),hA,WP,EW,GP,jW,HP,KP,qP,CW,Lie,WKe=Ze(()=>{uc(),hA=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),i=new Int32Array(r);for(let s=0;s<r;s++){let a=n[s];if(a>2147483647n||a<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${s}: ${a}`);i[s]=Number(a)}return t?new Uint8Array(i.buffer):i},WP=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),i=BigInt64Array.from(n,BigInt);return t?new Uint8Array(i.buffer):i},EW=1,GP=()=>EW++,jW=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),HP=(e,t)=>{let r=jW.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,i)=>n*i)*r/8):0},KP=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:i,shape:s,shouldConvertInt64toInt32:a=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=i,this.tensorShape=s,this.shouldConvertInt64toInt32=a}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return HP(this.dataType,this.tensorShape)}destroy(){vr("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=WP(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,i)=>n===r[i])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},qP=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let i=t,s=this.tensorManager.getMLContext(e),a=i==="int64"&&!s.opSupportLimits().input.dataTypes.includes("int64");if(a&&(i="int32",vr("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(s,i,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==HP(i,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let o=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,i,r,o,!0,!0,a),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=hA(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else vr("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){var t,r,n;if(this.activeUpload){let i=(t=this.wrapper)!=null&&t.isInt64ToInt32Converted?WP(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(i):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(i);return}else return i.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read((r=this.wrapper)==null?void 0:r.shouldConvertInt64toInt32,e):this.wrapper.read((n=this.wrapper)==null?void 0:n.shouldConvertInt64toInt32)}},CW=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=GP();return this.tensorTrackersById.set(e,new qP(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,i){vr("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${i}}`);let s=this.tensorTrackersById.get(t);if(!s)throw new Error("Tensor not found.");return s.ensureTensor(e,r,n,i)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){vr("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t==null?void 0:t.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let i=this.getMLContext(e),s=GP(),a=new KP({sessionId:e,context:i,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(s,new qP(this,a)),this.externalTensors.add(a),s}async getCachedTensor(e,t,r,n,i,s,a=!1){let o=this.getMLContext(e);for(let[c,f]of this.freeTensors.entries())if(f.canReuseTensor(o,t,r)){vr("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let d=this.freeTensors.splice(c,1)[0];return d.sessionId=e,d}vr("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await o.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:i,readable:s});return new KP({sessionId:e,context:o,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:a})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},Lie=(...e)=>new CW(...e)}),Cx,AW,Rie,GKe=Ze(()=>{Lt(),Mf(),Die(),WKe(),uc(),Cx=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),AW=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((i,s)=>i===n[s]&&e[i]===t[i])},Rie=class{constructor(e){this.tensorManager=Lie(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,mI(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){vr("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){vr("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)vr("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>AW(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(i=>i.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){vr("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,i){let s=Cx.get(r);if(!s)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,s,n,i)}async createTemporaryTensor(e,t,r){vr("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=Cx.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let i=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,i,n,r,!1);let s=this.temporarySessionTensorIds.get(e);return s?s.push(i):this.temporarySessionTensorIds.set(e,[i]),i}uploadTensor(e,t){if(!Kr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");vr("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return gI(r,t)}}registerMLTensor(e,t,r,n){let i=Cx.get(r);if(!i)throw new Error(`Unsupported ONNX data type: ${r}`);let s=this.tensorManager.registerTensor(e,t,i,n);return vr("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${i}, dimensions: ${n}} -> {tensorId: ${s}}`),s}registerMLConstant(e,t,r,n,i,s,a=!1){if(!s)throw new Error("External mounted files are not available.");let o=e;e.startsWith("./")&&(o=e.substring(2));let l=s.get(o);if(!l)throw new Error(`File with name ${o} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let c=l.slice(t,t+r).buffer,f;switch(i.dataType){case"float32":f=new Float32Array(c);break;case"float16":f=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(c):new Uint16Array(c);break;case"int32":f=new Int32Array(c);break;case"uint32":f=new Uint32Array(c);break;case"int64":a?(f=hA(new Uint8Array(c),!1),i.dataType="int32"):f=new BigInt64Array(c);break;case"uint64":f=new BigUint64Array(c);break;case"int8":f=new Int8Array(c);break;case"int4":case"uint4":case"uint8":f=new Uint8Array(c);break;default:throw new Error(`Unsupported data type: ${i.dataType} in creating WebNN Constant from external data.`)}return vr("verbose",()=>`[WebNN] registerMLConstant {dataType: ${i.dataType}, shape: ${i.shape}}} ${a?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(i,f)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){var t;return!!((t=this.mlContextBySessionId.get(e))!=null&&t.opSupportLimits().input.dataTypes.includes("int64"))}flush(){}}}),vI=Ze(()=>{}),XP,Ax,Ox,OW,$W,YP,pA,NW,Fie,HKe=Ze(()=>{uc(),vI(),XP=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),Ax=[],Ox=e=>Math.ceil(Number(e)/16)*16,OW=e=>{for(let t=0;t<Ax.length;t++){let r=Ax[t];if(e<=r)return r}return Math.ceil(e/16)*16},$W=1,YP=()=>$W++,pA=async(e,t,r,n)=>{let i=Ox(r),s=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,s,0,i),e.flush(),await s.mapAsync(GPUMapMode.READ);let o=s.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(o,0,r)),l}else return new Uint8Array(o.slice(0,r))}finally{s.destroy()}},NW=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of XP)Ax.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,i=t.byteLength,s=Ox(i),a=this.storageCache.get(e);if(!a)throw new Error("gpu data for uploading does not exist");if(Number(a.originalSize)!==i)throw new Error(`inconsistent data size. gpu data size=${a.originalSize}, data size=${i}`);let o=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=o.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,i)),o.unmap();let c=this.backend.device.createCommandEncoder();c.copyBufferToBuffer(o,0,a.gpuData.buffer,0,s),this.backend.device.queue.submit([c.finish()]),o.destroy(),vr("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let i=Ox(r.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,i)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return vr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=YP();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),vr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),vr("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=OW(e),n,i=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(i||s){let o=(i?this.freeBuffers:this.freeUniformBuffers).get(r);o?o.length>0?n=o.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let a={id:YP(),type:0,buffer:n};return this.storageCache.set(a.id,{gpuData:a,originalSize:Number(e)}),vr("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${a.id}`),a}get(e){var t;return(t=this.storageCache.get(e))==null?void 0:t.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return vr("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await pA(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=XP.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(vr("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},Fie=(...e)=>new NW(...e)}),IW,Ar,Dn=Ze(()=>{IW=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Ar=e=>new IW(e)}),rm,$x,wi,ts,Pt,Pn,mA,Bh,ku,Mt,Dg,Be,bt,Bie,yI,DW,zie,Jt=Ze(()=>{Lt(),Zt(),rm=64,$x=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},wi=(e,t=1)=>{let r=$x(e,t);return typeof r=="string"?r:r[0]},ts=(e,t=1)=>{let r=$x(e,t);return typeof r=="string"?r:r[1]},Pt=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:Ie.computeStrides(r)})}),t},Pn=e=>e%4===0?4:e%2===0?2:1,mA=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,Bh=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,ku=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,Mt=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Dg=(e,t,r,n,i)=>{let s=typeof r=="number",a=s?r:r.length,o=[...new Array(a).keys()],l=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,c=$x(t,i),f=typeof c=="string"?c:c[1],d=typeof c=="string"?c:c[0],h={indices:l,value:f,storage:d,tensor:t},p=B=>typeof B=="string"?B:`${B}u`,m={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},g=s?"uniforms.":"",x=`${g}${e}_shape`,y=`${g}${e}_strides`,v="";for(let B=0;B<a-1;B++)v+=`
    let dim${B} = current / ${Mt(y,B,a)};
    let rest${B} = current % ${Mt(y,B,a)};
    indices[${B}] = dim${B};
    current = rest${B};
    `;v+=`indices[${a-1}] = current;`;let _=a<2?"":`
  fn o2i_${e}(offset: u32) -> ${h.indices} {
    var indices: ${h.indices};
    var current = offset;
    ${v}
    return indices;
  }`,b=B=>(m.offsetToIndices=!0,a<2?B:`o2i_${e}(${B})`),w=[];if(a>=2)for(let B=a-1;B>=0;B--)w.push(`${Mt(y,B,a)} * (indices[${B}])`);let k=a<2?"":`
  fn i2o_${e}(indices: ${h.indices}) -> u32 {
    return ${w.join("+")};
  }`,T=B=>(m.indicesToOffset=!0,a<2?B:`i2o_${e}(${B})`),M=(...B)=>a===0?"0u":`${h.indices}(${B.map(p).join(",")})`,j=(B,D)=>a<2?`${B}`:`${Mt(B,D,a)}`,C=(B,D,K)=>a<2?`${B}=${K};`:`${Mt(B,D,a)}=${K};`,R={},I=(B,D)=>{m.broadcastedIndicesToOffset=!0;let K=`${D.name}broadcastedIndicesTo${e}Offset`;if(K in R)return`${K}(${B})`;let oe=[];for(let _e=a-1;_e>=0;_e--){let ue=D.indicesGet("outputIndices",_e+D.rank-a);oe.push(`${j(y,_e)} * (${ue} % ${j(x,_e)})`)}return R[K]=`fn ${K}(outputIndices: ${D.type.indices}) -> u32 {
             return ${oe.length>0?oe.join("+"):"0u"};
           }`,`${K}(${B})`},N=(B,D)=>(()=>{if(h.storage===h.value)return`${e}[${B}]=${D};`;if(h.storage==="vec2<u32>"&&h.value==="i32")return`${e}[${B}]=vec2<u32>(u32(${D}), select(0u, 0xFFFFFFFFu, ${D} < 0));`;if(h.storage==="vec2<u32>"&&h.value==="u32")return`${e}[${B}]=vec2<u32>(u32(${D}), 0u);`;if(h.storage==="u32"&&h.value==="vec4<bool>")return`${e}[${B}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${D}));`;throw new Error(`not supported combination of storage type ${h.storage} and value type ${h.value} yet`)})(),z=B=>(()=>{if(h.storage===h.value)return`${e}[${B}]`;if(h.storage==="vec2<u32>"&&h.value==="i32")return`i32(${e}[${B}].x)`;if(h.storage==="vec2<u32>"&&h.value==="u32")return`u32(${e}[${B}].x)`;if(h.storage==="u32"&&h.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${B}] & 0xFFu), bool(${e}[${B}] & 0xFF00u), bool(${e}[${B}] & 0xFF0000u), bool(${e}[${B}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${h.storage} and value type ${h.value} yet`)})(),V=a<2?"":`
  fn get_${e}ByIndices(indices: ${h.indices}) -> ${f} {
    return ${z(`i2o_${e}(indices)`)};
  }`,G=a<2?"":(()=>{let B=o.map(K=>`d${K}: u32`).join(", "),D=o.map(K=>`d${K}`).join(", ");return`
  fn get_${e}(${B}) -> ${f} {
    return get_${e}ByIndices(${M(D)});
  }`})(),H=(...B)=>{if(B.length!==a)throw new Error(`indices length must be ${a}`);let D=B.map(p).join(",");return a===0?z("0u"):a===1?z(D[0]):(m.get=!0,m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}(${D})`)},O=B=>a<2?z(B):(m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}ByIndices(${B})`),q=a<2?"":`
  fn set_${e}ByIndices(indices: ${h.indices}, value: ${f}) {
    ${N(`i2o_${e}(indices)`,"value")}
  }`,ee=a<2?"":(()=>{let B=o.map(K=>`d${K}: u32`).join(", "),D=o.map(K=>`d${K}`).join(", ");return`
  fn set_${e}(${B}, value: ${f}) {
    set_${e}ByIndices(${M(D)}, value);
  }`})();return{impl:()=>{let B=[],D=!1;return m.offsetToIndices&&(B.push(_),D=!0),m.indicesToOffset&&(B.push(k),D=!0),m.broadcastedIndicesToOffset&&(Object.values(R).forEach(K=>B.push(K)),D=!0),m.set&&(B.push(ee),D=!0),m.setByIndices&&(B.push(q),D=!0),m.get&&(B.push(G),D=!0),m.getByIndices&&(B.push(V),D=!0),!s&&D&&B.unshift(`const ${x} = ${h.indices}(${r.join(",")});`,`const ${y} = ${h.indices}(${Ie.computeStrides(r).join(",")});`),B.join(`
`)},type:h,offsetToIndices:b,indicesToOffset:T,broadcastedIndicesToOffset:I,indices:M,indicesGet:j,indicesSet:C,set:(...B)=>{if(B.length!==a+1)throw new Error(`indices length must be ${a}`);let D=B[a];if(typeof D!="string")throw new Error("value must be string");let K=B.slice(0,a).map(p).join(",");return a===0?N("0u",D):a===1?N(K[0],D):(m.set=!0,m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}(${K}, ${D})`)},setByOffset:N,setByIndices:(B,D)=>a<2?N(B,D):(m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}ByIndices(${B}, ${D});`),get:H,getByOffset:z,getByIndices:O,usage:n,name:e,strides:y,shape:x,rank:a}},Be=(e,t,r,n=1)=>Dg(e,t,r,"input",n),bt=(e,t,r,n=1)=>Dg(e,t,r,"output",n),Bie=(e,t,r)=>Dg(e,t,r,"atomicOutput",1),yI=(e,t,r,n=1)=>Dg(e,t,r,"internal",n),DW=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=rm){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let i=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=i?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,a=i?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${s}) {
    ${a}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let i=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${i}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},zie=(e,t)=>new DW(e,t)}),LW,QP,RW,FW,BW,zW,pa,Vie,Uie,Lu=Ze(()=>{Lt(),Zt(),Dn(),Jt(),LW=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},QP=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),RW=(e,t)=>Ie.sortBasedOnPerm(e,QP(e.length,t)),FW=(e,t,r,n)=>{let i=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let s=0;s<t;++s)i+=`a[${e[s]}]=i[${s}];`;return i+="return a;}"},BW=(e,t)=>{let r=[],n=[];for(let i=0;i<e.length;++i)e[i]!==1&&r.push(e[i]),e[t[i]]!==1&&n.push(t[i]);return{newShape:r,newPerm:n}},zW=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},pa=(e,t)=>{let r=e.dataType,n=e.dims.length,i=QP(n,t),s=RW(e.dims,i),a=e.dims,o=s,l=n<2||zW(i,e.dims),c;if(l)return c=m=>{let g=Be("input",r,a,4),x=bt("output",r,o,4);return`
  ${m.registerUniform("output_size","u32").declareVariables(g,x)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let m=Ie.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64/4)},programUniforms:[{type:12,data:Math.ceil(m/4)}]}},getShaderSource:c};let{newShape:f,newPerm:d}=BW(e.dims,i),h=Ie.areEqual(d,[2,3,1]),p=Ie.areEqual(d,[3,1,2]);if(f.length===2||h||p){a=h?[f[0],f[1]*f[2]]:p?[f[0]*f[1],f[2]]:f,o=[a[1],a[0]];let m=16;return c=g=>{let x=Be("a",r,a.length),y=bt("output",r,o.length);return`
  ${g.registerUniform("output_size","u32").declareVariables(x,y)}
  var<workgroup> tile : array<array<${y.type.value}, ${m+1}>, ${m}>;
  ${g.mainStart([m,m,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${m} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${m}u + local_id.x;
    let input_row = workgroup_id_x * ${m}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${x.getByIndices(`${x.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${m}u + local_id.x;
    let output_row = workgroup_id_y * ${m}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${y.setByIndices(`${y.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let g=Ie.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(o[1]/m),y:Math.ceil(o[0]/m)},programUniforms:[{type:12,data:g},...Pt(a,o)]}},getShaderSource:c}}return c=m=>{let g=Be("a",r,a.length),x=bt("output",r,o.length);return`
  ${m.registerUniform("output_size","u32").declareVariables(g,x)}

  ${FW(i,n,g,x)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${x.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${x.setByOffset("global_idx",g.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let m=Ie.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...Pt(a,o)]}},getShaderSource:c}},Vie=(e,t)=>{LW(e.inputs,t.perm),e.compute(pa(e.inputs[0],t.perm))},Uie=e=>Ar({perm:e.perm})}),VW,UW,WW,GW,HW,KW,qW,XW,YW,QW,to,Wie,Gie,Hie,Kie,qie,Xie,Yie,Qie,Zie,Jie,KKe=Ze(()=>{Lt(),Zt(),Jt(),_I(),Lu(),VW={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},UW={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},WW={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},GW={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},HW=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},KW=(e,t)=>{let r=[],n=e.length;for(let s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);let i=t.map(s=>e[s]);return[r,i]},qW=(e,t)=>{let r=e.length+t.length,n=[],i=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?n.push(e[i++]):n.push(1);return n},XW=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},YW=(e,t)=>{let r=[];if(!XW(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},QW=(e,t,r,n,i,s,a)=>{let o=r[0].dims,l=Ie.size(s),c=Ie.size(a),f=Be("_A",r[0].dataType,o),d=bt("output",i,s),h=64;l===1&&(h=256);let p=`
          var<workgroup> aBestValues : array<f32, ${h}>;
       `,m=g=>`
        ${g.registerUniform("reduceSize","u32").declareVariables(f,d)}
        ${p}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${g.mainStart(h)}

          let outputIndex = global_idx / ${h};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${WW[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${h}) {
           let candidate = f32(${f.getByOffset("offset + k")});
           bestValue = ${VW[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${h}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${UW[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${d.setByOffset("outputIndex",`${n==="mean"?`${d.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${d.type.storage}(${GW[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${h}`,inputDependencies:["type"]},getShaderSource:m,getRunData:()=>({outputs:[{dims:s,dataType:i}],dispatchGroup:{x:l},programUniforms:[{type:12,data:c}]})}},to=(e,t,r,n)=>{let i=e.inputs.length===1?r:gA(e.inputs,r),s=i.axes;s.length===0&&!i.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((p,m)=>m));let a=Ie.normalizeAxes(s,e.inputs[0].dims.length),o=a,l=e.inputs[0],c=YW(o,e.inputs[0].dims.length);c.length>0&&(l=e.compute(pa(e.inputs[0],c),{inputs:[0],outputs:[-1]})[0],o=HW(o.length,l.dims.length));let[f,d]=KW(l.dims,o),h=f;i.keepDims&&(h=qW(f,a)),e.compute(QW(t,i.cacheKey,[l],n,e.inputs[0].dataType,h,d),{inputs:[l]})},Wie=(e,t)=>{to(e,"ReduceMeanShared",t,"mean")},Gie=(e,t)=>{to(e,"ReduceL1Shared",t,"l1")},Hie=(e,t)=>{to(e,"ReduceL2Shared",t,"l2")},Kie=(e,t)=>{to(e,"ReduceLogSumExpShared",t,"logSumExp")},qie=(e,t)=>{to(e,"ReduceMaxShared",t,"max")},Xie=(e,t)=>{to(e,"ReduceMinShared",t,"min")},Yie=(e,t)=>{to(e,"ReduceProdShared",t,"prod")},Qie=(e,t)=>{to(e,"ReduceSumShared",t,"sum")},Zie=(e,t)=>{to(e,"ReduceSumSquareShared",t,"sumSquare")},Jie=(e,t)=>{to(e,"ReduceLogSumShared",t,"logSum")}}),ro,ZW,_1,gA,no,JW,eG,tG,rG,nG,iG,sG,aG,oG,lG,io,ese,tse,rse,nse,ise,sse,ase,ose,lse,cse,_I=Ze(()=>{Lt(),Zt(),Dn(),Jt(),KKe(),ro=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},ZW=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],_1=(e,t,r,n,i,s,a=!1,o=!1)=>{let l=[],c=r[0].dims,f=c.length,d=Ie.normalizeAxes(i,f),h=!o&&d.length===0;c.forEach((g,x)=>{h||d.indexOf(x)>=0?a&&l.push(1):l.push(g)});let p=l.length,m=Ie.size(l);return{name:e,shaderCache:t,getShaderSource:g=>{let x=[],y=Be("_A",r[0].dataType,f),v=bt("output",s,p),_=n(y,v,d),b=_[2];for(let w=0,k=0;w<f;w++)h||d.indexOf(w)>=0?(a&&k++,b=`for(var j${w}: u32 = 0; j${w} < ${c[w]}; j${w}++) {
                  ${_[2].includes("last_index")?`let last_index = j${w};`:""}
                  ${y.indicesSet("input_indices",w,`j${w}`)}
                  ${b}
                }`):(x.push(`${y.indicesSet("input_indices",w,v.indicesGet("output_indices",k))};`),k++);return`

        ${g.registerUniform("output_size","u32").declareVariables(y,v)}

        ${g.mainStart()}
          ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${y.type.indices};
          let output_indices = ${v.offsetToIndices("global_idx")};

          ${x.join(`
`)}
          ${_[0]}       // init ops for reduce max/min
          ${_[1]}
          ${b}
          ${_[3]}
          ${_.length===4?v.setByOffset("global_idx","value"):_.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:s}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...Pt(c,l)]})}},gA=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),Ar({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},no=(e,t,r,n)=>{let i=e.inputs,s=i.length===1?r:gA(i,r);e.compute(_1(t,{hint:s.cacheKey,inputDependencies:["rank"]},[i[0]],s.noopWithEmptyAxes&&s.axes.length===0?ZW:n,s.axes,i[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},JW=(e,t)=>{ro(e.inputs),no(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},eG=(e,t)=>{ro(e.inputs),no(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},tG=(e,t)=>{ro(e.inputs),no(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},rG=(e,t)=>{ro(e.inputs),no(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},nG=(e,t)=>{ro(e.inputs),no(e,"ReduceMax",t,(r,n,i)=>{let s=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&s.push(r.indicesSet("input_indices",a,0));return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},iG=(e,t)=>{ro(e.inputs),no(e,"ReduceMean",t,(r,n,i)=>{let s=1;for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&(s*=e.inputs[0].dims[a]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${s});`]})},sG=(e,t)=>{ro(e.inputs),no(e,"ReduceMin",t,(r,n,i)=>{let s=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&s.push(`input_indices[${a}] = 0;`);return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},aG=(e,t)=>{ro(e.inputs),no(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},oG=(e,t)=>{ro(e.inputs),no(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},lG=(e,t)=>{ro(e.inputs),no(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},io=(e,t,r)=>{if(t.length===0)return r;let n=1,i=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?n*=e[s]:i*=e[s];return i<32&&n>1024},ese=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?iG(e,t):Wie(e,t)},tse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?eG(e,t):Gie(e,t)},rse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?tG(e,t):Hie(e,t)},nse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?rG(e,t):Kie(e,t)},ise=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?nG(e,t):qie(e,t)},sse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?sG(e,t):Xie(e,t)},ase=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?aG(e,t):Yie(e,t)},ose=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?oG(e,t):Qie(e,t)},lse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?lG(e,t):Zie(e,t)},cse=(e,t)=>{io(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?JW(e,t):Jie(e,t)}}),ZP,use,dse,vA,qKe=Ze(()=>{Lt(),Dn(),_I(),ZP=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},use=(e,t)=>{ZP(e.inputs);let r=(n,i,s)=>{let a=[];for(let o=0;o<n.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(`input_indices[${o}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(_1("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},dse=(e,t)=>{ZP(e.inputs);let r=(n,i,s)=>{let a=[];for(let o=0;o<n.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(`input_indices[${o}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(_1("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},vA=e=>Ar(e)}),cG,Nx,uG,dG,fG,o_,hG,fse,xI=Ze(()=>{Lt(),Zt(),vI(),Jt(),cG=(e,t)=>{let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5];if(a&&o)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],c=r.dims[1],f=r.dims[2];if(i.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==f)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let d=i.dims[0]/3,h=d,p=h;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let _ of t.qkvHiddenSizes)if(_%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");d=t.qkvHiddenSizes[0],h=t.qkvHiddenSizes[1],p=t.qkvHiddenSizes[2]}let m=c;if(d!==h)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==d+h+p)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let g=0;if(a){if(h!==p)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(a.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(a.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(a.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(a.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(a.dims[4]!==h/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(g=a.dims[3])}let x=m+g,y=-1,v=0;if(s)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");if(o){if(o.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(o.dims[0]!==l||o.dims[1]!==t.numHeads||o.dims[2]!==c||o.dims[3]!==x)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:c,pastSequenceLength:g,kvSequenceLength:m,totalSequenceLength:x,maxSequenceLength:y,inputHiddenSize:f,hiddenSize:d,vHiddenSize:p,headSize:Math.floor(d/t.numHeads),vHeadSize:Math.floor(p/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:v,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},Nx=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e==null?void 0:e.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,uG=(e,t,r,n,i,s,a,o)=>{let l=Pn(a?1:s),c=64,f=s/l;f<c&&(c=32);let d=Math.ceil(s/l/c),h=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:i},{type:12,data:f},{type:12,data:d}],p=wi(e.dataType,l),m=ts(1,l),g=["type"];a&&g.push("type"),o&&g.push("type");let x=y=>{let v=bt("x",e.dataType,e.dims,l),_=[v],b=a?Be("seq_lens",a.dataType,a.dims):void 0;b&&_.push(b);let w=o?Be("total_sequence_length_input",o.dataType,o.dims):void 0;w&&_.push(w);let k=ts(e.dataType),T=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${c}>;
  var<workgroup> thread_sum: array<f32, ${c}>;
  ${y.registerUniforms(T).declareVariables(..._)}
  ${y.mainStart([c,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${Nx(b,w,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${c}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${a?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${m}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${m}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${c}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${m}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${m}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${c}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${v.type.value}(${k}(1.0) / ${k}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${m}(x[offset + i]);
        x[offset + i] = ${v.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${a?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${v.type.value}(${k}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${c};${p};${l}`,inputDependencies:g},getShaderSource:x,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:i,z:t*r},programUniforms:h})}},dG=(e,t,r,n,i,s,a,o,l)=>{let c=a+s.kvSequenceLength,f=[s.batchSize,s.numHeads,s.sequenceLength,c],d=e>1&&n,h=s.kvNumHeads?s.kvNumHeads:s.numHeads,p=d?[s.batchSize,h,c,s.headSize]:void 0,m=s.nReps?s.nReps:1,g=s.scale===0?1/Math.sqrt(s.headSize):s.scale,x=Pn(s.headSize),y=s.headSize/x,v=12,_={x:Math.ceil(c/v),y:Math.ceil(s.sequenceLength/v),z:s.batchSize*s.numHeads},b=[{type:12,data:s.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:1,data:g},{type:12,data:a},{type:12,data:s.kvSequenceLength},{type:12,data:m}],w=d&&n&&Ie.size(n.dims)>0,k=["type","type"];w&&k.push("type"),i&&k.push("type"),o&&k.push("type"),l&&k.push("type");let T=[{dims:f,dataType:t.dataType,gpuDataType:0}];d&&T.push({dims:p,dataType:t.dataType,gpuDataType:0});let M=j=>{let C=Be("q",t.dataType,t.dims,x),R=Be("key",r.dataType,r.dims,x),I=[C,R];if(w){let q=Be("past_key",n.dataType,n.dims,x);I.push(q)}i&&I.push(Be("attention_bias",i.dataType,i.dims));let N=o?Be("seq_lens",o.dataType,o.dims):void 0;N&&I.push(N);let z=l?Be("total_sequence_length_input",l.dataType,l.dims):void 0;z&&I.push(z);let V=bt("output",t.dataType,f),G=[V];d&&G.push(bt("present_key",t.dataType,p,x));let H=ts(1,x),O=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${v}u;

  var<workgroup> tileQ: array<${C.type.storage}, ${v*v}>;
  var<workgroup> tileK: array<${C.type.storage}, ${v*v}>;
  ${j.registerUniforms(O).declareVariables(...I,...G)}
  ${j.mainStart([v,v,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${m===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${m===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${Nx(N,z,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${w&&d?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${d?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${H}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${w&&d?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${d?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${H}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(x){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${x}`)}})()};
        output[outputIdx] = ${V.type.value} (sum * uniforms.alpha) + ${i?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${x};${i!==void 0};${n!==void 0};${e}`,inputDependencies:k},getRunData:()=>({outputs:T,dispatchGroup:_,programUniforms:b}),getShaderSource:M}},fG=(e,t,r,n,i,s,a=void 0,o=void 0)=>{let l=s+i.kvSequenceLength,c=i.nReps?i.nReps:1,f=i.vHiddenSize*c,d=e>1&&n,h=i.kvNumHeads?i.kvNumHeads:i.numHeads,p=d?[i.batchSize,h,l,i.headSize]:void 0,m=[i.batchSize,i.sequenceLength,f],g=12,x={x:Math.ceil(i.vHeadSize/g),y:Math.ceil(i.sequenceLength/g),z:i.batchSize*i.numHeads},y=[{type:12,data:i.sequenceLength},{type:12,data:l},{type:12,data:i.vHeadSize},{type:12,data:i.numHeads},{type:12,data:i.headSize},{type:12,data:f},{type:12,data:s},{type:12,data:i.kvSequenceLength},{type:12,data:c}],v=d&&n&&Ie.size(n.dims)>0,_=["type","type"];v&&_.push("type"),a&&_.push("type"),o&&_.push("type");let b=[{dims:m,dataType:t.dataType,gpuDataType:0}];d&&b.push({dims:p,dataType:t.dataType,gpuDataType:0});let w=k=>{let T=Be("probs",t.dataType,t.dims),M=Be("v",r.dataType,r.dims),j=[T,M];v&&j.push(Be("past_value",n.dataType,n.dims));let C=a?Be("seq_lens",a.dataType,a.dims):void 0;a&&j.push(C);let R=o?Be("total_sequence_length_input",o.dataType,o.dims):void 0;o&&j.push(R);let I=[bt("output",t.dataType,m)];d&&I.push(bt("present_value",t.dataType,p));let N=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${g}u;
  var<workgroup> tileQ: array<${T.type.value}, ${g*g}>;
  var<workgroup> tileV: array<${T.type.value}, ${g*g}>;
  ${k.registerUniforms(N).declareVariables(...j,...I)}
  ${k.mainStart([g,g,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${c===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${c===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${Nx(C,R,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${v&&d?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${d?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${T.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${v&&d?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${d?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:_},getRunData:()=>({outputs:b,dispatchGroup:x,programUniforms:y}),getShaderSource:w}},o_=(e,t,r,n,i,s,a,o,l,c,f=void 0,d=void 0)=>{let h=Math.min(e.outputCount,1+(a?1:0)+(o?1:0)),p=h>1?c.pastSequenceLength:0,m=p+c.kvSequenceLength,g=l&&Ie.size(l.dims)>0?l:void 0,x=[t,r];h>1&&a&&Ie.size(a.dims)>0&&x.push(a),g&&x.push(g),f&&x.push(f),d&&x.push(d);let y=e.compute(dG(h,t,r,a,g,c,p,f,d),{inputs:x,outputs:h>1?[-1,1]:[-1]})[0];e.compute(uG(y,c.batchSize,c.numHeads,p,c.sequenceLength,m,f,d),{inputs:f&&d?[y,f,d]:[y],outputs:[]});let v=[y,n];h>1&&o&&Ie.size(o.dims)>0&&v.push(o),f&&v.push(f),d&&v.push(d),e.compute(fG(h,y,n,o,c,p,f,d),{inputs:v,outputs:h>1?[0,2]:[0]})},hG=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,i=t.inputHiddenSize,s=t.headSize,a=12,o={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],c=[{type:12,data:n},{type:12,data:i},{type:12,data:s},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],f=d=>{let h=bt("output_q",l[0].dataType,r),p=bt("output_k",l[0].dataType,r),m=bt("output_v",l[0].dataType,r),g=Be("input",l[0].dataType,l[0].dims),x=Be("weight",l[1].dataType,l[1].dims),y=Be("bias",l[2].dataType,l[2].dims),v=g.type.storage,_=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${a}u;
  var<workgroup> tileInput: array<${v}, ${a*a}>;
  var<workgroup> tileWeightQ: array<${v}, ${a*a}>;
  var<workgroup> tileWeightK: array<${v}, ${a*a}>;
  var<workgroup> tileWeightV: array<${v}, ${a*a}>;
  ${d.registerUniforms(_).declareVariables(g,x,y,h,p,m)}
  ${d.mainStart([a,a,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${v}(0);
    var valueK = ${v}(0);
    var valueV = ${v}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:o,programUniforms:c}),getShaderSource:f},{inputs:l,outputs:[-1,-1,-1]})},fse=(e,t)=>{let r=cG(e.inputs,t),[n,i,s]=hG(e,r);return o_(e,n,i,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),pG,mG,gG,hse,XKe=Ze(()=>{Io(),Lt(),Zt(),Dn(),Jt(),pG=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,i,s)=>{let a=i.length;if(a!==n.length)throw new Error(`${s}: num dimensions != ${a}`);i.forEach((o,l)=>{if(o!==n[l])throw new Error(`${s}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},mG=(e,t)=>{let{epsilon:r,spatial:n,format:i}=t,s=e[0].dims,a=n?Pn(s[s.length-1]):1,o=i==="NHWC"&&s.length>1?a:1,l=Ie.size(s)/a,c=n,f=c?s.length:s,d=Be("x",e[0].dataType,e[0].dims,a),h=Be("scale",e[1].dataType,e[1].dims,o),p=Be("bias",e[2].dataType,e[2].dims,o),m=Be("inputMean",e[3].dataType,e[3].dims,o),g=Be("inputVar",e[4].dataType,e[4].dims,o),x=bt("y",e[0].dataType,f,a),y=()=>{let _="";if(n)_=`let cOffset = ${s.length===1?"0u":i==="NHWC"?`outputIndices[${s.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")_=`
            ${x.indicesSet("outputIndices","0","0")}
            let cOffset = ${x.indicesToOffset("outputIndices")};`;else{_=`var cIndices = ${h.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let b=1;b<h.rank;b++)_+=`cIndices[${b}] = outputIndices[${b}];`;_+=`let cOffset = ${h.indicesToOffset("cIndices")};`}return _},v=_=>`
  const epsilon = ${r};
  ${_.registerUniform("outputSize","u32").declareVariables(d,h,p,m,g,x)}
  ${_.mainStart()}
  ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${x.offsetToIndices(`global_idx * ${a}`)};
    ${y()}
    let scale = ${h.getByOffset("cOffset")};
    let bias = ${p.getByOffset("cOffset")};
    let inputMean = ${m.getByOffset("cOffset")};
    let inputVar = ${g.getByOffset("cOffset")};
    let x = ${d.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${x.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${a}`,inputDependencies:c?["rank","type","type","type","type"]:void 0},getShaderSource:v,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c?[{type:12,data:l},...Pt(s)]:[{type:12,data:l}]})}},gG=e=>Ar(e),hse=(e,t)=>{let{inputs:r,outputCount:n}=e,i=gG({...t,outputCount:n});if(Yr.webgpu.validateInputContent&&pG(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(mG(r,i))}}),vG,yG,pse,YKe=Ze(()=>{Zt(),Jt(),vG=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},yG=e=>{let t=e[0].dims,r=e[0].dims[2],n=Ie.size(t)/4,i=e[0].dataType,s=Be("input",i,t,4),a=Be("bias",i,[r],4),o=Be("residual",i,t,4),l=bt("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:c=>`
  const channels = ${r}u / 4;
  ${c.declareVariables(s,a,o,l)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${s.getByOffset("global_idx")}
      + ${a.getByOffset("global_idx % channels")} + ${o.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},pse=e=>{vG(e.inputs),e.compute(yG(e.inputs))}}),_G,Mr,mse,gse,vse,yse,_se,xse,bse,wse,kse,xG,Tse,Mse,Sse,Pse,nv,Ese,mb,jse,Cse,Ase,Ose,$se,Nse,Ise,Dse,Lse,Rse,Fse,Bse,zse,Vse,Use,Wse,JP,Gse,yA,_A,Hse,Kse,qse,bG,wG,Xse,bI=Ze(()=>{Lt(),Zt(),Dn(),Jt(),_G=(e,t,r,n,i,s,a)=>{let o=Math.ceil(t/4),l="";typeof i=="string"?l=`${i}(a)`:l=i("a");let c=Be("inputData",r,[o],4),f=bt("outputData",n,[o],4),d=[{name:"vec_size",type:"u32"}];return a&&d.push(...a),`
      ${e.registerUniforms(d).declareVariables(c,f)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${c.getByOffset("global_idx")};
    ${f.setByOffset("global_idx",l)}
  }`},Mr=(e,t,r,n,i,s=e.dataType,a,o)=>{let l=[{type:12,data:Math.ceil(Ie.size(e.dims)/4)}];return a&&l.push(...a),{name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:c=>_G(c,Ie.size(e.dims),e.dataType,s,r,n,o),getRunData:c=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(Ie.size(c[0].dims)/64/4)},programUniforms:l})}},mse=e=>{e.compute(Mr(e.inputs[0],"Abs","abs"))},gse=e=>{e.compute(Mr(e.inputs[0],"Acos","acos"))},vse=e=>{e.compute(Mr(e.inputs[0],"Acosh","acosh"))},yse=e=>{e.compute(Mr(e.inputs[0],"Asin","asin"))},_se=e=>{e.compute(Mr(e.inputs[0],"Asinh","asinh"))},xse=e=>{e.compute(Mr(e.inputs[0],"Atan","atan"))},bse=e=>{e.compute(Mr(e.inputs[0],"Atanh","atanh"))},wse=e=>Ar(e),kse=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(Mr(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},xG=e=>{let t,r,n=e.length>=2&&e[1].data!==0,i=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=i?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=i?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return Ar({min:t,max:r})},Tse=(e,t)=>{let r=t||xG(e.inputs),n=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Clip",i=>`clamp(${i}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},Mse=e=>{e.compute(Mr(e.inputs[0],"Ceil","ceil"))},Sse=e=>{e.compute(Mr(e.inputs[0],"Cos","cos"))},Pse=e=>{e.compute(Mr(e.inputs[0],"Cosh","cosh"))},nv=e=>Ar(e),Ese=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},mb=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,jse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,mb(t)))},Cse=e=>{e.compute(Mr(e.inputs[0],"Exp","exp"))},Ase=e=>{e.compute(Mr(e.inputs[0],"Floor","floor"))},Ose=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,mb(t)))},$se=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},Nse=e=>{e.compute(Mr(e.inputs[0],"Not",t=>`!${t}`))},Ise=e=>{e.compute(Mr(e.inputs[0],"Neg",t=>`-${t}`))},Dse=e=>{e.compute(Mr(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},Lse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Rse=e=>{e.compute(Mr(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},Fse=e=>Ar(e),Bse=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},zse=e=>{e.compute(Mr(e.inputs[0],"Sin","sin"))},Vse=e=>{e.compute(Mr(e.inputs[0],"Sinh","sinh"))},Use=e=>{e.compute(Mr(e.inputs[0],"Sqrt","sqrt"))},Wse=e=>{e.compute(Mr(e.inputs[0],"Tan","tan"))},JP=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Gse=e=>{e.compute(Mr(e.inputs[0],"Tanh",JP))},yA=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${JP("v")};
}
`,_A=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Hse=e=>{let t=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"FastGelu",_A,yA(t),void 0,e.inputs[0].dataType))},Kse=(e,t)=>{let r=ts(e.inputs[0].dataType);return e.compute(Mr(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},qse=e=>{e.compute(Mr(e.inputs[0],"Log","log"))},bG=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,wG=e=>`quick_gelu_impl(${e})`,Xse=(e,t)=>{let r=ts(e.inputs[0].dataType);e.compute(Mr(e.inputs[0],"QuickGelu",wG,bG(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),kG,TG,Yse,QKe=Ze(()=>{Zt(),Jt(),bI(),kG=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},TG=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=Be("input",e[0].dataType,e[0].dims,4),n=Be("bias",e[0].dataType,[e[0].dims[2]],4),i=bt("output",e[0].dataType,t,4),s=Ie.size(t)/4,a=wi(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:o=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${o.declareVariables(r,n,i)}

  ${mb(a)}

  ${o.mainStart()}
    ${o.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${i.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Yse=e=>{kG(e.inputs),e.compute(TG(e.inputs))}}),MG,SG,so,Qse,Zse,Jse,eae,tae,rae,nae,iae,sae,aae,ZKe=Ze(()=>{Lt(),Zt(),Jt(),MG=(e,t,r,n,i,s,a,o,l,c,f,d)=>{let h,p;typeof o=="string"?h=p=(v,_)=>`${o}((${v}),(${_}))`:typeof o=="function"?h=p=o:(h=o.scalar,p=o.vector);let m=bt("outputData",f,n.length,4),g=Be("aData",l,t.length,4),x=Be("bData",c,r.length,4),y;if(i)if(s){let v=Ie.size(t)===1,_=Ie.size(r)===1,b=t.length>0&&t[t.length-1]%4===0,w=r.length>0&&r[r.length-1]%4===0;v||_?y=m.setByOffset("global_idx",p(v?`${g.type.value}(${g.getByOffset("0")}.x)`:g.getByOffset("global_idx"),_?`${x.type.value}(${x.getByOffset("0")}.x)`:x.getByOffset("global_idx"))):y=`
            let outputIndices = ${m.offsetToIndices("global_idx * 4u")};
            let offsetA = ${g.broadcastedIndicesToOffset("outputIndices",m)};
            let offsetB = ${x.broadcastedIndicesToOffset("outputIndices",m)};
            ${m.setByOffset("global_idx",p(a||b?g.getByOffset("offsetA / 4u"):`${g.type.value}(${g.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||w?x.getByOffset("offsetB / 4u"):`${x.type.value}(${x.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else y=m.setByOffset("global_idx",p(g.getByOffset("global_idx"),x.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let v=(_,b,w="")=>{let k=`aData[indexA${b}][componentA${b}]`,T=`bData[indexB${b}][componentB${b}]`;return`
            let outputIndices${b} = ${m.offsetToIndices(`global_idx * 4u + ${b}u`)};
            let offsetA${b} = ${g.broadcastedIndicesToOffset(`outputIndices${b}`,m)};
            let offsetB${b} = ${x.broadcastedIndicesToOffset(`outputIndices${b}`,m)};
            let indexA${b} = offsetA${b} / 4u;
            let indexB${b} = offsetB${b} / 4u;
            let componentA${b} = offsetA${b} % 4u;
            let componentB${b} = offsetB${b} % 4u;
            ${_}[${b}] = ${w}(${h(k,T)});
          `};f===9?y=`
            var data = vec4<u32>(0);
            ${v("data",0,"u32")}
            ${v("data",1,"u32")}
            ${v("data",2,"u32")}
            ${v("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:y=`
            ${v("outputData[global_idx]",0)}
            ${v("outputData[global_idx]",1)}
            ${v("outputData[global_idx]",2)}
            ${v("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(g,x,m)}

        ${d??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${y}
      }`},SG=(e,t,r,n,i,s,a=r.dataType)=>{let o=r.dims.map(g=>Number(g)??1),l=n.dims.map(g=>Number(g)??1),c=!Ie.areEqual(o,l),f=o,d=Ie.size(o),h=!1,p=!1,m=[c];if(c){let g=tm.calcShape(o,l,!1);if(!g)throw new Error("Can't perform binary op on the given tensors");f=g.slice(),d=Ie.size(f);let x=Ie.size(o)===1,y=Ie.size(l)===1,v=o.length>0&&o[o.length-1]%4===0,_=l.length>0&&l[l.length-1]%4===0;m.push(x),m.push(y),m.push(v),m.push(_);let b=1;for(let w=1;w<f.length;w++){let k=o[o.length-w],T=l[l.length-w];if(k===T)b*=k;else break}b%4===0?(p=!0,h=!0):(x||y||v||_)&&(h=!0)}else h=!0;return m.push(h),{name:e,shaderCache:{hint:t+m.map(g=>g.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:g=>MG(g,o,l,f,h,c,p,i,r.dataType,n.dataType,a,s),getRunData:()=>({outputs:[{dims:f,dataType:a}],dispatchGroup:{x:Math.ceil(d/64/4)},programUniforms:[{type:12,data:Math.ceil(Ie.size(f)/4)},...Pt(o,l,f)]})}},so=(e,t,r,n,i,s)=>{e.compute(SG(t,i??"",e.inputs[0],e.inputs[1],r,n,s))},Qse=e=>{so(e,"Add",(t,r)=>`${t}+${r}`)},Zse=e=>{so(e,"Div",(t,r)=>`${t}/${r}`)},Jse=e=>{so(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},eae=e=>{so(e,"Mul",(t,r)=>`${t}*${r}`)},tae=e=>{let t=Be("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;so(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},rae=e=>{so(e,"Sub",(t,r)=>`${t}-${r}`)},nae=e=>{so(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},iae=e=>{so(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},sae=e=>{so(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},aae=e=>{so(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),PG,EG,jG,CG,oae,lae,JKe=Ze(()=>{Lt(),Zt(),Dn(),Jt(),PG=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],i=n.dataType,s=n.dims.length;e.forEach((a,o)=>{if(o!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==s)throw new Error("input tensors should have the same shape");a.dims.forEach((l,c)=>{if(c!==t&&l!==n.dims[c])throw new Error("non concat dimensions must match")})}})},EG=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,jG=(e,t)=>{let r=e.length,n=[];for(let i=0;i<r;++i){let s=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?n.push(s):i===0?n.push(`if (inputIndex == ${i}u) { ${s} }`):i===r-1?n.push(`else { ${s} }`):n.push(`else if (inputIndex == ${i}) { ${s} }`)}return n.join(`
`)},CG=(e,t,r,n)=>{let i=Ie.size(r),s=new Array(e.length),a=new Array(e.length),o=0,l=[],c=[],f=[{type:12,data:i}];for(let g=0;g<e.length;++g)o+=e[g].dims[t],s[g]=o,c.push(e[g].dims.length),a[g]=Be(`input${g}`,n,c[g]),l.push("rank"),f.push({type:12,data:s[g]});for(let g=0;g<e.length;++g)f.push(...Pt(e[g].dims));f.push(...Pt(r));let d=bt("output",n,r.length),h=d.indicesGet("indices",t),p=Array.from(Array(s.length).keys()).map(g=>`uniforms.sizeInConcatAxis${g}`).join(","),m=g=>`

  ${(()=>{g.registerUniform("outputSize","u32");for(let x=0;x<e.length;x++)g.registerUniform(`sizeInConcatAxis${x}`,"u32");return g.declareVariables(...a,d)})()}

  ${EG(s.length,p)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${d.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${h});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${p});
      ${h} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${jG(a,d)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:f}),getShaderSource:m}},oae=(e,t)=>{let r=e.inputs,n=r[0].dims,i=Ie.normalizeAxis(t.axis,n.length);PG(r,i);let s=n.slice();s[i]=r.reduce((o,l)=>o+(l.dims.length>i?l.dims[i]:0),0);let a=r.filter(o=>Ie.size(o.dims)>0);e.compute(CG(a,i,s,r[0].dataType),{inputs:a})},lae=e=>Ar({axis:e.axis})}),uf,df,ff,wI,Sf=Ze(()=>{Lt(),Zt(),uf=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},df=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},ff=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},wI=e=>{let t=(e==null?void 0:e.activation)||"";if(t==="HardSigmoid"){let[r,n]=(e==null?void 0:e.activation_params)||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=(e==null?void 0:e.activation_params)||[Nie,Iie];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=(e==null?void 0:e.activation_params)||[.01];return{activation:t,alpha:r}}return{activation:t}}}),Ei,cae,kI=Ze(()=>{Ei=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},cae=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),uae,e7e=Ze(()=>{uae=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),Cv,TI,MI=Ze(()=>{Lt(),Zt(),Jt(),Sf(),Cv=(e,t,r,n,i)=>{let s=n-r;return`
      ${Array.from({length:r}).map((a,o)=>`
      if (${Mt(t.shape,o,t.rank)} != 1) {
        ${t.indicesSet(e,o,Mt(i,o+s,n))}
      } else {
        ${t.indicesSet(e,o,0)}
      }`).join("")}
`},TI=(e,t,r,n,i=!1,s)=>{let a=e[0].dims,o=e[1].dims,l=a[a.length-2],c=o[o.length-1],f=a[a.length-1],d=Pn(c),h=Pn(f),p=Pn(l),m=Ie.size(r)/d/p,g=e.length>2,x=n?n.slice(0,-2):r.slice(0,-2),y=[Ie.size(x),l,c],v=[{type:12,data:m},{type:12,data:l},{type:12,data:c},{type:12,data:f}];df(t,v),v.push(...Pt(x,a,o)),g&&v.push(...Pt(e[2].dims)),v.push(...Pt(y));let _=b=>{let w=yI("batch_dims",e[0].dataType,x.length),k=Be("a",e[0].dataType,a.length,h),T=Be("b",e[1].dataType,o.length,d),M=bt("output",e[0].dataType,y.length,d),j=wi(M.type.tensor),C=uf(t,M.type.value,j),R=[k,T],I="";if(g){let V=i?d:1;R.push(Be("bias",e[2].dataType,e[2].dims.length,V)),I=`${i?`value += bias[col / ${V}];`:`value += ${M.type.value}(bias[row + i]);`}`}let N=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];ff(t,N);let z=()=>{let V=`var a_data: ${k.type.value};`;for(let G=0;G<h;G++)V+=`
              let b_data${G} = b[(b_offset + (k + ${G}) * uniforms.N + col) / ${d}];`;for(let G=0;G<p;G++){V+=`a_data = a[(a_offset + (row + ${G}) * uniforms.K + k) / ${h}];`;for(let H=0;H<h;H++)V+=`
            values[${G}] = fma(${T.type.value}(a_data${h===1?"":`[${H}]`}), b_data${H}, values[${G}]);
`}return V};return`
  ${b.registerUniforms(N).registerInternalVariables(w).declareVariables(...R,M)}
  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${d})) * ${d};
    var index1 = global_idx / (uniforms.N / ${d});
    let stride1 = uniforms.M / ${p};
    let row = (index1 % stride1) * ${p};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${w.offsetToIndices("batch")};`}

    var a_indices: ${k.type.indices};
    ${Cv("a_indices",k,k.rank-2,w.rank,"batch_indices")}
    ${k.indicesSet("a_indices",k.rank-2,0)}
    ${k.indicesSet("a_indices",k.rank-1,0)}
    let a_offset = ${k.indicesToOffset("a_indices")};

    var b_indices: ${T.type.indices};
    ${Cv("b_indices",T,T.rank-2,w.rank,"batch_indices")}
    ${T.indicesSet("b_indices",T.rank-2,0)}
    ${T.indicesSet("b_indices",T.rank-1,0)}
    let b_offset = ${T.indicesToOffset("b_indices")};
    var values: array<${M.type.value}, ${p}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${h}) {
      ${z()}
    }
    for (var i = 0u; i < ${p}u; i++) {
      var value = values[i];
      ${I}
      ${C}
      let cur_indices = ${M.type.indices}(batch, row + i, col);
      let offset = ${M.indicesToOffset("cur_indices")};
      ${M.setByOffset(`offset / ${d}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${h};${p};${i}`,inputDependencies:g?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:v}),getShaderSource:_}}}),AG,OG,xA,eE,$G,bA,NG,x1,SI=Ze(()=>{Lt(),Zt(),Jt(),Sf(),MI(),kI(),AG=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,OG=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,xA=(e,t,r="f32",n,i=!1,s=32,a=!1,o=32)=>{let l=t[1]*e[1],c=t[0]*e[0],f=i?l:s,d=i?s:l,h=f/t[0],p=s/t[1];if(!((i&&h===4&&e[1]===4||!i&&(h===3||h===4))&&f%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${h} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${h} must be 3 or 4.
  tileAWidth ${f} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${h}<${r}>, ${f/h}>, ${d}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${c/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${h};
const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${a?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${a?`${Math.ceil(o/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${p};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${AG(i,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${h===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${OG(i,h)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},eE=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,$G=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",bA=(e,t,r="f32",n,i=!1,s=32,a=!1,o=32,l=!1)=>{let c=e[1]*t[1],f=e[0]*t[0],d=i?c:s,h=i?s:c;if(!(h%t[1]===0&&d%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${h} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let p=h/t[1],m=d/t[0],g=s/t[1],x=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${c};
    let globalColStart = i32(workgroupId.x) * ${f};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${h}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {
          ${eE(i,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${f}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${c};

let tileRowA = i32(localId.y) * ${p};
let tileColA = i32(localId.x) * ${m};
let tileRowB = i32(localId.y) * ${g};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${m}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${eE(i,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${g}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$G(i)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${d}>, ${h}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${f}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${a?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${a?`${Math.ceil(o/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${x}
  }
`},NG=(e,t,r,n,i=!1)=>{let[s,a,o,l]=n,c=wi(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Ei(e,c)} {
      var value = ${Ei(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${a.type.indices};
        ${Cv("aIndices",a,a.rank-2,s.rank,"batchIndices")}
        ${a.indicesSet("aIndices",a.rank-2,"u32(row)")}
        ${a.indicesSet("aIndices",a.rank-1,"u32(colIn)")}
        value = ${a.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Ei(e,c)} {
      var value = ${Ei(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${o.type.indices};
        ${Cv("bIndices",o,o.rank-2,s.rank,"batchIndices")}
        ${o.indicesSet("bIndices",o.rank-2,"u32(row)")}
        ${o.indicesSet("bIndices",o.rank-1,"u32(colIn)")}
        value = ${o.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${Ei(e,c)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${i?"bias[colIn]":`${Ei(e,c)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},x1=(e,t,r,n,i=!1,s)=>{let a=e[0].dims,o=e[1].dims,l=a.slice(0,-2),c=o.slice(0,-2),f=n?n.slice(0,-2):r.slice(0,-2),d=Ie.size(f),h=a[a.length-2],p=a[a.length-1],m=o[o.length-1],g=p%4===0&&m%4===0,x=h<=8?[4,1,1]:[4,4,1],y=[8,8,1],v=[Math.ceil(m/y[0]/x[0]),Math.ceil(h/y[1]/x[1]),Math.ceil(d/y[2]/x[2])],_=g?4:1,b=[...l,h,p/_],w=b.length,k=[...c,p,m/_],T=k.length,M=[d,h,m/_],j=[{type:6,data:h},{type:6,data:m},{type:6,data:p}];df(t,j),j.push(...Pt(f,b,k));let C=["rank","rank"],R=e.length>2;R&&(j.push(...Pt(e[2].dims)),C.push("rank")),j.push(...Pt(M));let I=N=>{let z=f.length,V=yI("batchDims",e[0].dataType,z,1),G=wi(e[0].dataType),H=Be("a",e[0].dataType,w,_),O=Be("b",e[1].dataType,T,_),q=bt("result",e[0].dataType,M.length,_),ee=[H,O];if(R){let _e=i?_:1;ee.push(Be("bias",e[2].dataType,e[2].dims.length,_e))}let B=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];ff(t,B);let D=wi(q.type.tensor),K=uf(t,q.type.value,D),oe=NG(_,R,K,[V,H,O,q],i);return`
  ${N.registerUniforms(B).registerInternalVariables(V).declareVariables(...ee,q)}
  ${oe}
  ${g?xA(x,y,G,V):bA(x,y,G,V)}
                   `};return{name:"MatMul",shaderCache:{hint:`${x};${t.activation};${g};${i}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:v[0],y:v[1],z:v[2]},programUniforms:j}),getShaderSource:I}}}),IG,dae,t7e=Ze(()=>{Lt(),uc(),Jt(),Sf(),kI(),e7e(),SI(),IG=(e,t,r,n,i=!1,s,a=4,o=4,l=4,c="f32")=>{let f=j=>{switch(j){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${c}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${j} is not supported.`)}},d=j=>{switch(j){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${j} is not supported.`)}},h=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,p=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,m=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",g=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",x=e?"row":"col",y=e?"col":"row",v=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${x} / outWidth;
    let outCol = ${x} % outWidth;

    let WRow = ${y} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${y} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${y} % inChannels;
    var resData = ${Ei(a,c)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${m} && xCol >= 0 && xCol < ${g}) {
      ${h}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${f(a)}
    }
    return resData;`,_=e?t&&n?`
    let col = colIn * ${a};
    ${v}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${v}
    }
    return ${Ei(a,c)}(0.0);`:n&&r?`
    let col = colIn * ${a};
    ${v}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${v}
    }
    return ${Ei(a,c)}(0.0);`,b=e?n&&r?d(o):`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${d(o)}
    }
    return ${Ei(o,c)}(0.0);`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${d(o)}
    }
    return ${Ei(o,c)}(0.0);`,w=Ei(l,c),k=Ei(e?a:o,c),T=Ei(e?o:a,c),M=uf(s,w,c);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${k} {
      ${e?_:b}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${T} {
      ${e?b:_}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${w}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${p}
      ${cae(i)}
      ${M}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},dae=(e,t,r,n,i,s,a,o,l)=>{let c=t.format==="NHWC",f=c?e[0].dims[3]:e[0].dims[1],d=r[0],h=c?r[2]:r[3],p=c?r[1]:r[2],m=c?r[3]:r[1],g=c&&(f%4===0||f%3===0)&&m%4===0,x=c?m:h*p,y=c?h*p:m,v=[8,8,1],_=n<=8?[4,1,1]:[4,4,1],b=[Math.ceil(x/v[0]/_[0]),Math.ceil(y/v[1]/_[1]),Math.ceil(d/v[2]/_[2])];vr("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${b}`);let w=g?c&&f%4!==0?3:4:1,k=v[1]*_[1],T=v[0]*_[0],M=Math.max(v[0]*w,v[1]),j=n%k===0,C=i%T===0,R=s%M===0,I=g?[w,4,4]:[1,1,1],N=[{type:6,data:n},{type:6,data:i},{type:6,data:s},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];df(t,N),N.push(...Pt(e[0].dims,e[1].dims));let z=["rank","rank"];a&&(N.push(...Pt(e[2].dims)),z.push("rank")),N.push(...Pt(r));let V=G=>{let H=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];ff(t,H);let O=g?4:1,q=wi(e[0].dataType),ee=`
      fn setOutputAtIndex(flatIndex : i32, value : ${g?`vec4<${q}>`:q}) {
        result[flatIndex] = ${g?`vec4<${q}>`:q}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${g?`vec4<${q}>`:q}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${g?"/ 4":""}, value);
      }`,B=Be("x",e[0].dataType,e[0].dims.length,w===3?1:w),D=Be("w",e[1].dataType,e[1].dims.length,O),K=[B,D],oe=bt("result",e[0].dataType,r.length,O);if(a){let _e=Be("bias",e[2].dataType,e[2].dims.length,O);K.push(_e),ee+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${g?`vec4<${q}>`:q} {
          return bias[coords.${c?"w":"y"}${g?"/ 4":""}];
        }`}return`
        ${uae("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${G.registerUniforms(H).declareVariables(...K,oe)}
        ${ee}
        ${IG(c,j,C,R,a,t,I[0],I[1],I[2],q)}
        ${g?xA(_,v,q,void 0,!c,M):bA(_,v,q,void 0,!c,M,!1,void 0,o)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${w};${g};${j};${C};${R};${k};${T};${M}`,inputDependencies:z},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:b[0],y:b[1],z:b[2]},programUniforms:N}),getShaderSource:V}}}),DG,tE,Lg,LG,rE,RG,fae,hae,r7e=Ze(()=>{Lt(),uc(),Zt(),Jt(),Sf(),kI(),DG=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},tE=e=>typeof e=="number"?[e,e,e]:e,Lg=(e,t)=>t<=1?e:e+(e-1)*(t-1),LG=(e,t,r,n=1)=>{let i=Lg(t,n);return Math.floor((e[0]*(r-1)-r+i)/2)},rE=(e,t,r,n,i)=>{i==null&&(i=LG(e,t[0],n[0]));let s=[0,0,0,r];for(let a=0;a<3;a++)e[a]+2*i>=t[a]&&(s[a]=Math.trunc((e[a]-t[a]+2*i)/n[a]+1));return s},RG=(e,t,r,n,i,s,a,o,l,c)=>{let f,d,h,p;if(e==="VALID"&&(e=0),typeof e=="number"){f={top:e,bottom:e,left:e,right:e,front:e,back:e};let m=rE([t,r,n,1],[o,l,c],1,[i,s,a],e);d=m[0],h=m[1],p=m[2]}else if(Array.isArray(e)){if(!e.every((g,x,y)=>g===y[0]))throw Error(`Unsupported padding parameter: ${e}`);f={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let m=rE([t,r,n,1],[o,l,c],1,[i,s,a],e[0]);d=m[0],h=m[1],p=m[2]}else if(e==="SAME_UPPER"){d=Math.ceil(t/i),h=Math.ceil(r/s),p=Math.ceil(n/a);let m=(d-1)*i+o-t,g=(h-1)*s+l-r,x=(p-1)*a+c-n,y=Math.floor(m/2),v=m-y,_=Math.floor(g/2),b=g-_,w=Math.floor(x/2),k=x-w;f={top:_,bottom:b,left:w,right:k,front:y,back:v}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}},fae=(e,t,r,n,i,s=!1,a="channelsLast")=>{let o,l,c,f,d;if(a==="channelsLast")[o,l,c,f,d]=e;else if(a==="channelsFirst")[o,d,l,c,f]=e;else throw new Error(`Unknown dataFormat ${a}`);let[h,,p,m,g]=t,[x,y,v]=tE(r),[_,b,w]=tE(n),k=Lg(p,_),T=Lg(m,b),M=Lg(g,w),{padInfo:j,outDepth:C,outHeight:R,outWidth:I}=RG(i,l,c,f,x,y,v,k,T,M),N=s?h*d:h,z=[0,0,0,0,0];return a==="channelsFirst"?z=[o,N,C,R,I]:a==="channelsLast"&&(z=[o,C,R,I,N]),{batchSize:o,dataFormat:a,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:C,outHeight:R,outWidth:I,outChannels:N,padInfo:j,strideDepth:x,strideHeight:y,strideWidth:v,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:T,effectiveFilterWidth:M,dilationDepth:_,dilationHeight:b,dilationWidth:w,inShape:e,outShape:z,filterShape:t}},hae=(e,t,r,n,i,s)=>{let a=s==="channelsLast";a?e[0].dims[3]:e[0].dims[1];let o=[64,1,1],l={x:r.map((x,y)=>y)},c=[Math.ceil(DG(l.x.map(x=>r[x]))/o[0]),1,1];vr("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${c}`);let f=1,d=Ie.size(r),h=[{type:12,data:d},{type:12,data:n},{type:12,data:i},{type:12,data:t.strides},{type:12,data:t.dilations}];df(t,h),h.push(...Pt(e[0].dims,e[1].dims));let p=["rank","rank"],m=e.length===3;m&&(h.push(...Pt(e[2].dims)),p.push("rank")),h.push(...Pt(r));let g=x=>{let y=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:i.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];ff(t,y);let v=1,_=wi(e[0].dataType),b=Be("x",e[0].dataType,e[0].dims.length,f),w=Be("W",e[1].dataType,e[1].dims.length,v),k=[b,w],T=bt("result",e[0].dataType,r.length,v),M="";if(m){let R=Be("bias",e[2].dataType,e[2].dims.length,v);k.push(R),M+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${_} {
          return bias[${a?Mt("coords",4,5):Mt("coords",1,5)}];
        }`}let j=Ei(f,_),C=uf(t,j,_);return`
            ${M}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${b.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${w.getByIndices("aIndices")};
            }
          ${x.registerUniforms(y).declareVariables(...k,T)}
          ${x.mainStart()}
          ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${T.offsetToIndices("global_idx")};
              let batch = ${Mt("coords",0,b.rank)};
              let d2 = ${a?Mt("coords",b.rank-1,b.rank):Mt("coords",1,b.rank)};
              let xFRCCorner = vec3<u32>(${a?Mt("coords",1,b.rank):Mt("coords",2,b.rank)},
              ${a?Mt("coords",2,b.rank):Mt("coords",3,b.rank)},
              ${a?Mt("coords",3,b.rank):Mt("coords",4,b.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${a?Mt("uniforms.x_shape",1,b.rank):Mt("uniforms.x_shape",2,b.rank)};
              let xShapeZ = ${a?Mt("uniforms.x_shape",2,b.rank):Mt("uniforms.x_shape",3,b.rank)};
              let xShapeW = ${a?Mt("uniforms.x_shape",3,b.rank):Mt("uniforms.x_shape",4,b.rank)};
              let xShapeU = ${a?Mt("uniforms.x_shape",4,b.rank):Mt("uniforms.x_shape",1,b.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${a?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${a?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${a?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${a?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${m?"value = value + getBiasByOutputCoords(coords)":""};
              ${C}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${a};${f};${m}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:c[0],y:c[1],z:c[2]},programUniforms:h}),getShaderSource:g}}}),pae,mae,n7e=Ze(()=>{Lt(),Zt(),Jt(),Sf(),pae=(e,t,r,n)=>{let i=e.length>2,s=i?"value += b[output_channel];":"",a=e[0].dims,o=e[1].dims,l=t.format==="NHWC",c=l?r[3]:r[1],f=c/t.group,d=l&&f>=4?Pn(c):1,h=Ie.size(r)/d,p=[{type:12,data:h},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:f}];df(t,p),p.push(...Pt(a,[o[0],o[1],o[2],o[3]/d]));let m=i?["rank","rank","rank"]:["rank","rank"];p.push(...Pt([r[0],r[1],r[2],r[3]/d]));let g=x=>{let y=bt("output",e[0].dataType,r.length,d),v=wi(y.type.tensor),_=uf(t,y.type.value,v),b=Be("x",e[0].dataType,a.length),w=Be("w",e[1].dataType,o.length,d),k=[b,w];i&&k.push(Be("b",e[2].dataType,e[2].dims,d));let T=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];ff(t,T);let M=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${b.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${w.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${b.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${w.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${x.registerUniforms(T).declareVariables(...k,y)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${y.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${d} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${y.type.value} = ${y.type.value}(0);
    ${M}
    ${s}
    ${_}
    ${y.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${d}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:p}),getShaderSource:g}},mae=(e,t,r,n)=>{let i=e.length>2,s=Pn(r[3]),a=Pn(r[2]),o=Ie.size(r)/s/a,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/s],c=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/s],f=[r[0],r[1],r[2],r[3]/s],d=[{type:12,data:o},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];df(t,d),d.push(...Pt(l,c,f));let h=(a-1)*t.strides[1]+c[1],p=m=>{let g=bt("output",e[0].dataType,f.length,s),x=wi(g.type.tensor),y=uf(t,g.type.value,x),v=Be("x",e[0].dataType,l.length,s),_=Be("w",e[1].dataType,c.length,s),b=[v,_];i&&b.push(Be("b",e[2].dataType,e[2].dims,s));let w=i?"value += b[output_channel];":"",k=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return ff(t,k),`
  ${m.registerUniforms(k).declareVariables(...b,g)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${a}u;
    let col = (index1 % width1) * ${a}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${v.type.value}, ${h}>;
    var values: array<${g.type.value}, ${a}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${c[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${h}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${v.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${v.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${c[1]}; w_width++) {
          let w_val = ${_.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${a}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${a}u; i++) {
      var value = values[i];
      ${w}
      ${y}
      ${g.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${s};${a};${h};${c[0]};${c[1]}`,inputDependencies:i?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:d}),getShaderSource:p}}}),FG,Ix,BG,Dx,wA,nE,zG,VG,kA,i7e=Ze(()=>{Zt(),t7e(),r7e(),SI(),n7e(),Sf(),MI(),Lu(),FG=(e,t,r,n,i,s)=>{let a=e[0],o=e.slice(s?1:2,s?3:4),l=o.length,c=t[0],f=t.slice(2).map((h,p)=>h+(h-1)*(r[p]-1)),d=o.map((h,p)=>h+n[p]+n[p+l]).map((h,p)=>Math.floor((h-f[p]+i[p])/i[p]));return d.splice(0,0,a),d.splice(s?3:1,0,c),d},Ix=[2,3,1,0],BG=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},Dx=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let s=2;s<t[1].dims.length;++s)r[s-2]===0&&(r[s-2]=t[1].dims[s]);let n=e.pads.slice();y1.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n}),i},wA=e=>{let t=wI(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,s=e.group,a=e.kernel_shape,o=e.pads,l=e.strides,c=e.w_is_const();return{autoPad:n,format:r,dilations:i,group:s,kernelShape:a,pads:o,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},nE=(e,t,r,n)=>{let i=r.format==="NHWC",s=FG(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,i);if(r.group!==1){let k=[t[0]];if(i){let T=e.kernelCustomData.wT??e.compute(pa(t[1],Ix),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=T),k.push(T)}else k.push(t[1]);t.length===3&&k.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(mae(k,r,s,n),{inputs:k}):e.compute(pae(k,r,s,n),{inputs:k});return}let a=t.length===3,o=t[0].dims[i?1:2],l=t[0].dims[i?2:3],c=t[0].dims[i?3:1],f=t[1].dims[2],d=t[1].dims[3],h=s[i?1:2],p=s[i?2:3],m=s[i?3:1],g=i&&f===o&&d===l&&r.pads[0]===0&&r.pads[1]===0;if(g||f===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let k=s[0],T,M,j,C=[];if(i){let N=e.kernelCustomData.wT??e.compute(pa(t[1],Ix),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N),g){let z=o*l*c;T=t[0].reshape([1,k,z]),M=N.reshape([1,z,m]),j=[1,k,m]}else T=t[0].reshape([k,o*l,c]),M=N.reshape([1,c,m]),j=[k,h*p,m];C.push(T),C.push(M)}else T=t[0].reshape([k,c,o*l]),M=t[1].reshape([1,m,c]),j=[k,m,h*p],C.push(M),C.push(T);a&&C.push(t[2]);let R=j[2],I=C[0].dims[C[0].dims.length-1];R<8&&I<8?e.compute(TI(C,r,s,j,i,n),{inputs:C}):e.compute(x1(C,r,s,j,i,n),{inputs:C});return}let x=!0,y=e.kernelCustomData.wT??e.compute(pa(t[1],Ix),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=y);let v=[t[0],y];a&&v.push(t[2]);let _=i?h*p:m,b=i?m:h*p,w=f*d*c;e.compute(dae(v,r,s,_,b,w,a,x,n),{inputs:v})},zG=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),a=[1].concat(t.dilations),o=[1].concat(t.kernelShape),l=Dx({...t,pads:i,strides:s,dilations:a,kernelShape:o},n);nE(e,n,l,c=>r?[c[0],c[2],c[3]]:[c[0],c[1],c[3]])},VG=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",i=Dx(r,t),s=r.autoPad==="NOTSET"?r.pads:r.autoPad,a=fae(t[0].dims,t[1].dims,r.strides,r.dilations,s,!1,n);e.compute(hae(t,i,a.outShape,[a.filterDepth,a.filterHeight,a.filterWidth],[a.padInfo.front,a.padInfo.top,a.padInfo.left],n))},kA=(e,t)=>{if(BG(e.inputs,t),e.inputs[0].dims.length===3)zG(e,t);else if(e.inputs[0].dims.length===5)VG(e,e.inputs,t);else{let r=Dx(t,e.inputs);nE(e,e.inputs,r)}}}),gae,s7e=Ze(()=>{Lt(),uc(),Zt(),Jt(),gae=(e,t,r)=>{let n=e.length>2,i=t.outputShape,s=t.format==="NHWC",a=t.group,o=e[1].dims,l=o[2]/a,c=o[3],f=s?Pn(l):1,d=s&&c===1&&l>=4,h=d?Math.floor(l/4)*4:Math.floor(l/f)*f,p=l-h,m=s?Pn(c):1,g=s?c===1?f:m:1,x=Ie.size(i)/m,y=[Math.ceil(x/64),1,1];vr("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${y}`);let v=["rank","rank"],_=[t.strides[0],t.strides[1]],b=[t.kernelShape[s?1:2],t.kernelShape[s?2:3]],w=[t.dilations[0],t.dilations[1]],k=[b[0]+(t.dilations[0]<=1?0:(t.kernelShape[s?1:2]-1)*(t.dilations[0]-1)),b[1]+(t.dilations[1]<=1?0:(t.kernelShape[s?2:3]-1)*(t.dilations[1]-1))],T=[k[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),k[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],M=[{type:12,data:x},{type:12,data:_},{type:12,data:b},{type:12,data:w},{type:12,data:k},{type:6,data:T},{type:12,data:h},{type:12,data:l},{type:12,data:c},...Pt(e[0].dims,e[1].dims)];n&&(M.push(...Pt(e[2].dims)),v.push("rank")),M.push(...Pt(i));let j=C=>{let R=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:_.length},{name:"filter_dims",type:"u32",length:b.length},{name:"dilations",type:"u32",length:b.length},{name:"effective_filter_dims",type:"u32",length:k.length},{name:"pads",type:"i32",length:T.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],I=wi(e[0].dataType),N=s?1:2,z=s?2:3,V=s?3:1,G=Be("W",e[1].dataType,e[1].dims.length,g),H=Be("Dy",e[0].dataType,e[0].dims.length,f),O=[H,G];n&&O.push(Be("bias",e[2].dataType,[i[V]].length,m));let q=bt("result",e[0].dataType,i.length,m),ee=()=>{let K="";if(d)f===4?K+=`
        let xValue = ${H.getByOffset("x_offset")};
        let wValue = ${G.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:f===2?K+=`
          dotProd = dotProd + dot(vec4<${I}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}), vec4<${I}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:f===1&&(K+=`
          dotProd = dotProd + dot(vec4<${I}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}, ${H.getByOffset("x_offset + 2u")}, ${H.getByOffset("x_offset + 3u")}), vec4<${I}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}, ${G.getByOffset("w_offset + 2u")}, ${G.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(K+=`
                  let xValue = ${s?H.getByOffset(`${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${f}`):H.get("batch","inputChannel","idyR","idyC")};
        `,f===1)K+=`
          let w_offset = ${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${G.getByOffset(`w_offset / ${g}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let oe=0;oe<f;oe++)K+=`
            let wValue${oe} = ${G.getByOffset(`${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${oe}, wOutChannel)`)} / ${g}`)};
            dotProd = dotProd + xValue[${oe}] * wValue${oe};`;return K},B=()=>{if(p===0)return"";if(!d)throw new Error(`packInputAs4 ${d} is not true.`);let K="";if(f===1){K+="dotProd = dotProd";for(let oe=0;oe<p;oe++)K+=`
            + ${H.getByOffset(`x_offset + ${oe}`)} * ${G.getByOffset(`w_offset + ${oe}`)}`;K+=";"}else if(f===2){if(p!==2)throw new Error(`Invalid inputChannelsRemainder ${p}.`);K+=`
          let xValue = ${H.getByOffset("x_offset")};
          let wValue = ${G.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return K},D=`
            let outputIndices = ${q.offsetToIndices(`global_idx * ${m}`)};
            let batch = ${q.indicesGet("outputIndices",0)};
            let d1 = ${q.indicesGet("outputIndices",V)};
            let r = ${q.indicesGet("outputIndices",N)};
            let c = ${q.indicesGet("outputIndices",z)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${q.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${I}(dyRCorner) + ${I}(wR)) / ${I}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${I}(uniforms.Dy_shape[${N}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${I}(dyCCorner) + ${I}(wC)) / ${I}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${I}(uniforms.Dy_shape[${z}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${d?`
                var x_offset = ${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${f};
                var w_offset = ${G.indicesToOffset(`${G.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${g};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${d?4:f}) {
                  ${ee()}
                  inputChannel = inputChannel + ${d?4:f};
                }
                ${B()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${m}]`:""};
            ${q.setByOffset("global_idx","value")};
          `;return`
    ${C.registerUniforms(R).declareVariables(...O,q)}
      ${C.mainStart()}
      ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${D}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${f}${g}${m}${d}${p}`,inputDependencies:v},getRunData:()=>({dispatchGroup:{x:y[0],y:y[1],z:y[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:M}),getShaderSource:j}}}),UG,WG,GG,iE,vae,HG,sE,KG,yae,a7e=Ze(()=>{s7e(),Sf(),Lu(),UG=(e,t,r,n,i,s)=>(e-1)*t+r+(n-1)*i+1-s,WG=(e,t,r,n,i)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=s,r[i]=e-s):t==="SAME_LOWER"&&(r[n]=e-s,r[i]=s)},GG=(e,t,r,n,i,s,a,o,l,c)=>{let f=e.length-2,d=c.length===0;l.length<f&&l.push(...Array(f-l.length).fill(0));let h=e[0],p=t[o?3:1]*i;for(let m=0,g=e.length-f-(o?1:0);m<f;++m,++g){let x=e[g],y=d?x*a[m]:c[m],v=UG(x,a[m],s[m],t[g],r[m],y);WG(v,n,s,m,m+f),d&&c.push(a[m]*(x-1)+l[m]+(t[g]-1)*r[m]+1-s[m]-s[m+f])}c.splice(0,0,h),c.splice(o?3:1,0,p)},iE=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((d,h)=>d*h,1)===0){r.length=0;for(let d=2;d<t[1].dims.length;++d)r.push(t[1].dims[d])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let i=e.pads.slice(),s=e.outputShape.slice(),a=e.outputPadding.slice(),o=t[0].dims,l=e.dilations.slice();if(l.reduce((d,h)=>d+h,0)===0){let d=t[0].dims.length-2;l=new Array(d).fill(1)}let c=e.strides.slice();if(c.reduce((d,h)=>d+h,0)===0){let d=t[0].dims.length-2;c=new Array(d).fill(1)}GG(o,r,l,e.autoPad,e.group,i,c,n,a,s);let f=Object.assign({},e);return Object.assign(f,{kernelShape:r,pads:i,outputPadding:a,outputShape:s,dilations:l,strides:c}),f},vae=e=>{let t=wI(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,s=e.group,a=e.kernelShape,o=e.pads,l=e.strides,c=e.wIsConst(),f=e.outputPadding,d=e.outputShape;return{autoPad:n,format:r,dilations:i,group:s,kernelShape:a,outputPadding:f,outputShape:d,pads:o,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},HG=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((a,o)=>a+o,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((a,o)=>a+o,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((a,o)=>a+o,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((a,o)=>a+o,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},sE=(e,t,r,n)=>{let i=e.kernelCustomData.wT??e.compute(pa(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=i);let s=[t[0],i];t.length===3&&s.push(t[2]),e.compute(gae(s,r,n),{inputs:s})},KG=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let o=t.pads;o.length===0&&(o=[0,0]),o=[0,o[0],0,o[1]],a=[1].concat(a),s=[1].concat(s),i=[1].concat(i);let l=t.outputPadding;l=[0].concat(l);let c=iE({...t,pads:o,strides:a,dilations:s,kernelShape:i,outputPadding:l},n);sE(e,n,c,f=>r?[f[0],f[2],f[3]]:[f[0],f[1],f[3]])},yae=(e,t)=>{if(HG(e.inputs,t),e.inputs[0].dims.length===3)KG(e,t);else{let r=iE(t,e.inputs);sE(e,e.inputs,r)}}}),qG,_ae,xae,o7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),qG=(e,t,r,n)=>{let i=Ie.size(t),s=t.length,a=Be("input",e,s),o=bt("output",e,s),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),c=Ie.normalizeAxis(l,s),f=d=>{let h=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,p=Mt("uniforms.input_shape","uniforms.axis",s),m=n.reverse?h+(n.exclusive?" + 1":""):"0",g=n.reverse?p:h+(n.exclusive?"":" + 1");return`
                ${d.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,o)}
                ${d.mainStart()}
                  ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${o.offsetToIndices("global_idx")};
                  var sum = ${o.type.value}(0);
                  let first : i32 = ${m};
                  let last : i32 = ${g};
                  for (var i : i32 = first; i < last; i++) {
                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${a.getByIndices("inputIndices")};
                  }
                  ${o.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:c},...Pt(t,t)]}),getShaderSource:f}},_ae=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,i=e.inputs[1];e.compute(qG(n,r,i,t),{inputs:[0]})},xae=e=>{let t=e.exclusive===1,r=e.reverse===1;return Ar({exclusive:t,reverse:r})}}),XG,YG,QG,bae,wae,l7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),XG=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},YG=(e,t,r,n)=>{let i=[];i.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let s=0;s<t;++s)i.push(r.indicesSet("a",e[s],`i[${s}]`));return i.push("return a;}"),i.join(`
`)},QG=(e,t)=>{let r,n,i,s,a,o,l=t.format==="NHWC",c=t.blocksize,f=t.mode==="DCR";l?([r,n,i,s]=e.dims,a=f?[r,n,i,c,c,s/c**2]:[r,n,i,s/c**2,c,c],o=f?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,i,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=f?[r,c,c,s/c**2,n,i]:[r,s/c**2,c,c,n,i],o=f?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let d=e.reshape(a),h=d.dims.length,p=e.dataType,m=Be("a",p,h),g=bt("output",p,h),x=y=>`
  ${y.registerUniform("output_size","u32").declareVariables(m,g)}

  ${YG(o,h,m,g)}

  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${g.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${g.setByOffset("global_idx",m.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:y=>{let v=l?[r,n*c,i*c,s/c**2]:[r,s/c**2,n*c,i*c],_=Ie.size(v),b=d.dims,w=Ie.sortBasedOnPerm(b,o);return{outputs:[{dims:v,dataType:y[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:[{type:12,data:_},...Pt(b,w)]}},getShaderSource:x}},bae=(e,t)=>{XG(e.inputs),e.compute(QG(e.inputs[0],t))},wae=e=>Ar({blocksize:e.blocksize,mode:e.mode,format:e.format})}),Lx,Rg,aE,ZG,JG,eH,tH,oE,rH,kae,Tae,c7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),Lx="[a-zA-Z]|\\.\\.\\.",Rg="("+Lx+")+",aE="^"+Rg+"$",ZG="("+Rg+",)*"+Rg,JG="^"+ZG+"$",eH=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},tH=class{constructor(e,t){var i;this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp(JG)))throw new Error("Invalid LHS term");if(r.split(",").forEach((s,a)=>{let o=e[a].dims.slice();if(!s.match(RegExp(aE)))throw new Error("Invalid LHS term");let l=this.processTerm(s,!0,o,a);this.lhs.push(l)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([s,a])=>a.count===1||s==="...").map(([s])=>s).join("");else if(!n.match(RegExp(Rg)))throw new Error("Invalid RHS");(i=n.match(RegExp(Lx,"g")))==null||i.forEach(s=>{if(s==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let a=this.symbolToInfo.get(s);if(a===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(a.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let i=r.length,s=!1,a=[],o=0;if(!e.match(RegExp(aE))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(Lx,"g")),c=new eH(n);return l==null||l.forEach((f,d)=>{if(f==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let h=i-l.length+1;if(h<0)throw new Error("Ellipsis out of bounds");if(a=r.slice(o,o+h),this.hasEllipsis){if(this.ellipsisDims.length!==a.length||this.ellipsisDims.toString()!==a.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=a;else throw new Error("Ellipsis must be specified in the LHS");for(let p=0;p<a.length;p++){let m=String.fromCharCode(48+p);c.addSymbol(m,d+p),this.addSymbol(m,r[o++],n)}}else c.addSymbol(f,d+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(f,r[o++],n)}),c}},oE=e=>e+"_max",rH=(e,t,r,n)=>{let i=e.map(c=>c.length).map((c,f)=>Be(`input${f}`,t,c)),s=Ie.size(n),a=bt("output",t,n.length),o=[...r.symbolToInfo.keys()].filter(c=>!r.rhs.symbolToIndices.has(c)),l=c=>{let f=[],d="var prod = 1.0;",h="var sum = 0.0;",p="sum += prod;",m=[],g=[],x=[],y=[],v=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((b,w)=>{var k;if(r.rhs.symbolToIndices.has(w)){let T=(k=r.rhs.symbolToIndices.get(w))==null?void 0:k[0];T!==void 0&&r.lhs.forEach((M,j)=>{if(b.inputIndices.includes(j)){let C=M.symbolToIndices.get(w);if(C===void 0)throw new Error("Invalid symbol error");C.forEach(R=>{f.push(`${i[j].indicesSet(`input${j}Indices`,R,a.indicesGet("outputIndices",T))}`)})}})}else r.lhs.forEach((T,M)=>{if(b.inputIndices.includes(M)){let j=T.symbolToIndices.get(w);if(j===void 0)throw new Error("Invalid symbol error");j.forEach(C=>{m.push(`${i[M].indicesSet(`input${M}Indices`,C,`${w}`)}`)}),y.push(`prod *= ${i[M].getByIndices(`input${M}Indices`)};`)}}),g.push(`for(var ${w}: u32 = 0; ${w} < uniforms.${oE(w)}; ${w}++) {`),x.push("}")});let _=v?[...f,`let sum = ${i.map((b,w)=>b.getByIndices(`input${w}Indices`)).join(" * ")};`]:[...f,h,...g,...m,d,...y,p,...x];return`
            ${c.registerUniforms(o.map(b=>({name:`${oE(b)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...i,a)}

            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${a.offsetToIndices("global_idx")};
            ${i.map((b,w)=>`var input${w}Indices: ${i[w].type.indices};`).join(`
`)}
            ${_.join(`
`)};
            ${a.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let c=o.filter(d=>r.symbolToInfo.has(d)).map(d=>{var h;return{type:12,data:((h=r.symbolToInfo.get(d))==null?void 0:h.dimValue)||0}});c.push({type:12,data:s});let f=e.map((d,h)=>[...Pt(d)]).reduce((d,h)=>d.concat(h),c);return f.push(...Pt(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:f}},getShaderSource:l}},kae=(e,t)=>{let r=new tH(e.inputs,t.equation),n=r.outputDims,i=e.inputs.map((s,a)=>s.dims);e.compute(rH(i,e.inputs[0].dataType,r,n))},Tae=e=>{let t=e.equation.replace(/\s+/g,"");return Ar({equation:t})}}),nH,lE,iH,sH,Mae,u7e=Ze(()=>{Lt(),Zt(),Jt(),nH=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;n<r.length&&i<t.length;++n,++i)if(r[n]!==t[i]&&r[n]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},lE=(e,t)=>{let r=e.length-t.length,n=[];for(let i=0;i<r;++i)n.push(e[i]);for(let i=0;i<t.length;++i)n.push(t[i]===1?e[i+r]:t[i]);return n},iH=(e,t)=>e.length>t.length?lE(e,t):lE(t,e),sH=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=iH(t,r),i=e[0].dataType,s=i===9||Ie.size(t)===1,a=i===9||t.length>0&&t[t.length-1]%4===0?4:1,o=s||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(Ie.size(n)/o),c=d=>{let h=Be("input",i,t.length,a),p=bt("output",i,n.length,o),m;if(i===9){let g=(x,y,v="")=>`
          let outputIndices${y} = ${p.offsetToIndices(`outputOffset + ${y}u`)};
          let offset${y} = ${h.broadcastedIndicesToOffset(`outputIndices${y}`,p)};
          let index${y} = offset${y} / 4u;
          let component${y} = offset${y} % 4u;
          ${x}[${y}] = ${v}(${h.getByOffset(`index${y}`)}[component${y}]);
        `;m=`
        let outputOffset = global_idx * ${o};
        var data = vec4<u32>(0);
        ${g("data",0,"u32")}
        ${g("data",1,"u32")}
        ${g("data",2,"u32")}
        ${g("data",3,"u32")}
        ${p.setByOffset("global_idx","data")}
      }`}else m=`
        let outputIndices = ${p.offsetToIndices(`global_idx * ${o}`)};
        let inputOffset = ${h.broadcastedIndicesToOffset("outputIndices",p)};
        let data = ${p.type.value}(${h.getByOffset(`inputOffset / ${a}`)});
        ${p.setByOffset("global_idx","data")}
      }`;return`
    ${d.registerUniform("vec_size","u32").declareVariables(h,p)}
    ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${m}`},f=[{type:12,data:l},...Pt(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${a}${o}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:f})}},Mae=e=>{nH(e.inputs),e.compute(sH(e.inputs),{inputs:[0]})}}),aH,Sae,d7e=Ze(()=>{Lt(),Zt(),Jt(),bI(),aH=e=>{let t=e[0].dataType,r=Ie.size(e[0].dims),n=Ie.size(e[1].dims),i=n%4===0,s=a=>{let o=Be("x",t,[1],4),l=Be("bias",t,[1],4),c=bt("y",t,[1],4),f=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],d=p=>`
      let bias${p}_offset: u32 = (global_idx * 4 + ${p}) % uniforms.bias_size;
      let bias${p} = ${l.getByOffset(`bias${p}_offset / 4`)}[bias${p}_offset % 4];`,h=i?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${d(0)}${d(1)}${d(2)}${d(3)}
      let bias = ${o.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(f).declareVariables(o,l,c)}

    ${yA(ts(t))}

    ${a.mainStart(rm)}
      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${o.getByOffset("global_idx")};
      ${h}
      let x_in = x + bias;
      ${c.setByOffset("global_idx",_A("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/rm/4)}})}},Sae=e=>{e.inputs.length<2||Ie.size(e.inputs[1].dims)===0?Hse(e):e.compute(aH(e.inputs))}}),oH,lH,Pae,Eae,f7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),oH=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},lH=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ie.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(s,1,...n);let o=r[s],l=e[0].dataType===9?4:1,c=Math.ceil(Ie.size(a)/l),f=[{type:12,data:c},{type:6,data:o},{type:12,data:s},...Pt(e[0].dims,e[1].dims,a)],d=h=>{let p=Be("data",e[0].dataType,e[0].dims.length,l),m=Be("inputIndices",e[1].dataType,e[1].dims.length),g=bt("output",e[0].dataType,a.length,l),x=v=>{let _=n.length,b=`var indicesIndices${v}  = ${m.type.indices}(0);`;for(let w=0;w<_;w++)b+=`${_>1?`indicesIndices${v}[${w}]`:`indicesIndices${v}`} = ${a.length>1?`outputIndices${v}[uniforms.axis + ${w}]`:`outputIndices${v}`};`;b+=`
          var idx${v} = ${m.getByIndices(`indicesIndices${v}`)};
          if (idx${v} < 0) {
            idx${v} = idx${v} + uniforms.axisDimLimit;
          }
          var dataIndices${v} : ${p.type.indices};
        `;for(let w=0,k=0;w<i;w++)w===s?(b+=`${i>1?`dataIndices${v}[${w}]`:`dataIndices${v}`} = u32(idx${v});`,k+=_):(b+=`${i>1?`dataIndices${v}[${w}]`:`dataIndices${v}`} = ${a.length>1?`outputIndices${v}[${k}]`:`outputIndices${v}`};`,k++);return b},y;if(e[0].dataType===9){let v=(_,b,w="")=>`
          let outputIndices${b} = ${g.offsetToIndices(`outputOffset + ${b}u`)};
          ${x(b)};
          let offset${b} = ${p.indicesToOffset(`dataIndices${b}`)};
          let index${b} = offset${b} / 4u;
          let component${b} = offset${b} % 4u;
          ${_}[${b}] = ${w}(${p.getByOffset(`index${b}`)}[component${b}]);
        `;y=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${v("value",0,"u32")}
        ${v("value",1,"u32")}
        ${v("value",2,"u32")}
        ${v("value",3,"u32")}
        ${g.setByOffset("global_idx","value")}
      `}else y=`
      let outputIndices = ${g.offsetToIndices("global_idx")};
      ${x("")};
      let value = ${p.getByIndices("dataIndices")};
      ${g.setByOffset("global_idx","value")};
      `;return`
      ${h.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(p,m,g)}
      ${h.mainStart()}
        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${y}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:f}),getShaderSource:d}},Pae=e=>Ar({axis:e.axis}),Eae=(e,t)=>{let r=e.inputs;oH(r),e.compute(lH(e.inputs,t))}}),cH,jae,Cae,h7e=Ze(()=>{Lt(),Zt(),Jt(),cH=(e,t,r,n,i,s,a,o,l)=>{let c=[{type:12,data:s},{type:12,data:n},{type:12,data:i},{type:12,data:r},{type:12,data:a},{type:12,data:o},{type:12,data:l}],f=[s];c.push(...Pt(t.dims,f));let d=h=>{let p=Be("indices_data",t.dataType,t.dims.length),m=bt("input_slice_offsets_data",12,1,1),g=[p,m],x=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:i.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${h.registerUniforms(x).declareVariables(...g)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${i.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${i.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:f,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:c}),getShaderSource:d},{inputs:[t],outputs:[-1]})[0]},jae=(e,t)=>{let r=e.inputs,n=r[0].dims,i=r[0].dataType,s=r[1].dims,a=s[s.length-1],o=Ie.sizeToDimension(s,s.length-1),l=Ie.sizeFromDimension(n,t.batchDims+a),c=Ie.sizeToDimension(n,t.batchDims),f=Ie.sizeFromDimension(n,t.batchDims),d=o/c,h=new Array(a),p=l;for(let b=0;b<a;++b)h[a-1-b]=p,p*=n[t.batchDims+a-1-b];let m=cH(e,r[1],h,t.batchDims,n,o,d,f,a),g=t.batchDims+a;if(g>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let x=s.slice(0,-1).concat(n.slice(g)),y=Ie.size(x),v=[{type:12,data:y},{type:12,data:l},...Pt(r[0].dims,m.dims,x)],_=b=>{let w=Be("data",r[0].dataType,r[0].dims.length),k=Be("slice_offsets",12,m.dims.length),T=bt("output",r[0].dataType,x.length);return`
          ${b.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(w,k,T)}
            ${b.mainStart()}
            ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:x,dataType:i}],dispatchGroup:{x:Math.ceil(y/64)},programUniforms:v}),getShaderSource:_},{inputs:[r[0],m]})},Cae=e=>({batchDims:e.batch_dims,cacheKey:""})}),uH,dH,Aae,Oae,p7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),uH=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=Ie.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,i=e[0],s=e[2],a=e.length===4?e[3]:void 0;if(s.dims.length!==i.dims.length||!i.dims.map((o,l)=>l===r?Math.ceil(o/n)===s.dims[l]:o===s.dims[l]).reduce((o,l)=>o&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(a){if(a.dataType!==i.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(a.dims.length!==s.dims.length||!a.dims.map((o,l)=>o===s.dims[l]).reduce((o,l)=>o&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},dH=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ie.normalizeAxis(t.gatherAxis,i),a=Ie.normalizeAxis(t.quantizeAxis,i),o=r.slice(0);o.splice(s,1,...n);let l=Ie.size(o),c=e[2].dataType,f=e[0].dataType===22,d=[{type:12,data:l},{type:12,data:a},{type:12,data:s},{type:12,data:t.blockSize},...Pt(...e.map((p,m)=>p.dims),o)],h=p=>{let m=Be("data",e[0].dataType,e[0].dims.length),g=Be("inputIndices",e[1].dataType,e[1].dims.length),x=Be("scales",e[2].dataType,e[2].dims.length),y=e.length>3?Be("zeroPoint",e[3].dataType,e[3].dims.length):void 0,v=bt("output",c,o.length),_=[m,g,x];y&&_.push(y);let b=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${p.registerUniforms(b).declareVariables(..._,v)}
        ${p.mainStart()}
        let output_indices = ${v.offsetToIndices("global_idx")};
        var indices_indices = ${g.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${v.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${g.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${v.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${m.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${v.indicesGet("output_indices","i")};
          ${m.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${g.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[s]};
        }
        ${m.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${o.length}; i++) {
          let index = ${v.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${m.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${m.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${m.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${f?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${x.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${x.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${x.getByIndices("scale_indices")};
        ${y?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${y.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${y.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${f?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${ts(c)}(quantized_data - zero_point) * scale;
        ${v.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((p,m)=>m!==1).map(p=>p.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(p,m)=>"rank")},getRunData:()=>({outputs:[{dims:o,dataType:c}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d}),getShaderSource:h}},Aae=(e,t)=>{let r=e.inputs;uH(r,t),e.compute(dH(e.inputs,t))},Oae=e=>Ar({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),fH,hH,$ae,Nae,m7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),fH=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},hH=(e,t)=>{let r=e[0].dims,n=e[0].dataType,i=r.length,s=e[1].dims,a=e[1].dataType,o=Ie.normalizeAxis(t.axis,i),l=r[o],c=s.slice(0),f=Ie.size(c),d=Be("input",n,i),h=Be("indicesInput",a,s.length),p=bt("output",n,c.length),m=[{type:12,data:f},{type:6,data:l},{type:12,data:o}];return m.push(...Pt(r,s,c)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:m}),getShaderSource:g=>`
      ${g.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(d,h,p)}
      ${g.mainStart()}
      ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${p.offsetToIndices("global_idx")};

      var idx = ${h.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${d.type.indices}(outputIndices);
      ${d.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${d.getByIndices("inputIndices")};

      ${p.setByOffset("global_idx","value")};
  }`}},$ae=e=>Ar({axis:e.axis}),Nae=(e,t)=>{let r=e.inputs;fH(r),e.compute(hH(e.inputs,t))}}),pH,mH,Iae,Dae,g7e=Ze(()=>{Lt(),Zt(),Jt(),pH=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},mH=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[i,s,a]=$ie.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),o=[i,s];if(!o)throw new Error("Can't use gemm on the given tensors");let l=16,c=Math.ceil(s/l),f=Math.ceil(i/l),d=!0,h=Ie.size(o),p=[{type:12,data:d?c:h},{type:12,data:i},{type:12,data:s},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],m=["type","type"];e.length===3&&(p.push(...Pt(e[2].dims)),m.push("rank")),p.push(...Pt(o));let g=y=>{let v="";t.transA&&t.transB?v="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?v="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?v="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(v="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let _=t.alpha===1?"":"value *= uniforms.alpha;",b=Be("a",e[0].dataType,e[0].dims),w=Be("b",e[1].dataType,e[1].dims),k=b.type.value,T=null,M=[b,w];e.length===3&&(T=Be("c",e[2].dataType,e[2].dims.length),M.push(T));let j=bt("output",e[0].dataType,o.length);M.push(j);let C=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${y.registerUniforms(C).declareVariables(...M)}

  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${k}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${v}
    }

    ${_}
    ${T!=null?`let cOffset = ${T.broadcastedIndicesToOffset("vec2(m, n)",j)}; value += ${k}(uniforms.beta) * ${T.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},x=y=>{let v=Be("a",e[0].dataType,e[0].dims),_=Be("b",e[1].dataType,e[1].dims),b=null,w=[v,_];e.length===3&&(b=Be("c",e[2].dataType,e[2].dims.length),w.push(b));let k=bt("output",e[0].dataType,o.length);w.push(k);let T=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],M="",j="";t.transA&&t.transB?(j=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${v.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${_.type.value}(0);
      }
      `,M="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(j=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${v.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${_.type.value}(0);
      }
      `,M="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(j=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${v.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${_.type.value}(0);
      }
      `,M="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(j=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${v.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${_.type.value}(0);
      }
      `,M="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let C=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${y.registerUniforms(T).declareVariables(...w)}
  var<workgroup> tile_a: array<array<${v.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${_.type.storage}, ${l}>, ${l}>;
  ${y.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${k.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${j}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${M}
      }
      workgroupBarrier();
    }

    ${C}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${b!=null?`let cOffset = ${b.broadcastedIndicesToOffset("vec2(m, n)",k)}; value += ${k.type.value}(uniforms.beta) * ${b.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return d?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:c*f},programUniforms:p}),getShaderSource:x}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:p}),getShaderSource:g}},Iae=e=>{let t=e.transA,r=e.transB,n=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:n,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Dae=(e,t)=>{pH(e.inputs),e.compute(mH(e.inputs,t))}}),Uo,bl,od,ld,gH,vH,yH,_H,xH,bH,wH,kH,Lae,Rae,v7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),[Uo,bl,od,ld]=[0,1,2,3],gH=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},vH=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,yH=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,_H=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,xH=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,bH=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Uo}] = batch;
     indices[${bl}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${od}] = u32(r);
            indices[${ld}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${od}] = u32(clamp(r, 0, H - 1));
          indices[${ld}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${od}] = gs_reflect(r, border[1], border[3]);
          indices[${ld}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,wH=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Uo}], indices[${bl}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Uo}], indices[${bl}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Uo}], indices[${bl}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Uo}], indices[${bl}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Uo}], indices[${bl}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Uo}], indices[${bl}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,kH=(e,t)=>{let r=Be("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],i=Be("grid",e[1].dataType,n.length,2),s=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(s=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Uo,bl,od,ld]=[0,3,1,2]);let a=bt("output",e[0].dataType,s.length),o=r.type.value,l=Ie.size(s),c=[{type:12,data:l},...Pt(e[0].dims,n,s)],f=d=>`
  ${d.registerUniform("output_size","u32").declareVariables(r,i,a)}
  ${vH}
  ${yH(o)}
  ${_H(t)}
  ${xH(t)}
  ${bH(r,o,t)}

  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${od}]);
      let W_in = i32(uniforms.x_shape[${ld}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${a.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Uo}], indices[${od}], indices[${ld}]);
      let nxy = ${i.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${wH(a,o,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:d=>{let h=Ie.size(s);return{outputs:[{dims:s,dataType:d[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:c}},getShaderSource:f}},Lae=(e,t)=>{gH(e.inputs),e.compute(kH(e.inputs,t))},Rae=e=>Ar({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),ps,TH,Fae,cE,MH,iv,Bae,zae=Ze(()=>{Lt(),Zt(),Dn(),vI(),xI(),Jt(),Lu(),ps=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,TH=(e,t)=>{let r=e[0],n=ps(e,1),i=ps(e,2),s=ps(e,3),a=ps(e,4),o=ps(e,5),l=ps(e,6),c=ps(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let f=r.dims[0],d=r.dims[1],h=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],p=d,m=0,g=0,x=Math.floor(h/t.numHeads);if(l&&c&&Ie.size(l.dims)&&Ie.size(c.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==f||l.dims[1]!==t.numHeads||l.dims[3]!==x)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(c.dims[0]!==f||c.dims[1]!==t.numHeads||c.dims[3]!==x)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==c.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(c.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=l.dims[2],g=l.dims[2]}else if(l&&Ie.size(l.dims)||c&&Ie.size(c.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let y;if(n&&Ie.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');y=2,p=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==x)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');y=5,p=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==x)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');y=0,p=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');y=3}if(s&&Ie.size(s.dims)>0){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let v=m+p,_=0;if(a&&Ie.size(a.dims)>0){_=8;let T=a.dims;throw T.length===1?T[0]===f?_=1:T[0]===3*f+2&&(_=3):T.length===2&&T[0]===f&&T[1]===v&&(_=5),_===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let b=!1,w=h;if(i&&Ie.size(i.dims)>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(p!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');w=i.dims[2]}else{if(p!==i.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');w=i.dims[1]*i.dims[3],b=!0}}let k=!1;if(a&&Ie.size(a.dims)>0)throw new Error("Key padding mask is not supported");if(o&&Ie.size(o.dims)>0){if(o.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(o.dims[0]!==f||o.dims[1]!==t.numHeads||o.dims[2]!==d||o.dims[3]!==v)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:f,sequenceLength:d,pastSequenceLength:m,kvSequenceLength:p,totalSequenceLength:v,maxSequenceLength:g,inputHiddenSize:0,hiddenSize:h,vHiddenSize:w,headSize:x,vHeadSize:Math.floor(w/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:_,scale:t.scale,broadcastResPosBias:k,passPastInKv:b,qkvFormat:y}},Fae=e=>Ar({...e}),cE=Ar({perm:[0,2,1,3]}),MH=(e,t,r,n,i,s,a)=>{let o=[n,i,s],l=Ie.size(o),c=[{type:12,data:l},{type:12,data:a},{type:12,data:s}],f=d=>{let h=bt("qkv_with_bias",t.dataType,o),p=Be("qkv",t.dataType,o),m=Be("bias",r.dataType,o),g=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${d.registerUniforms(g).declareVariables(p,m,h)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c}),getShaderSource:f},{inputs:[t,r],outputs:[-1]})[0]},iv=(e,t,r,n,i,s,a,o)=>{let l=s;if(a&&Ie.size(a.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=MH(e,s,a,t,n,r*i,o),l=l.reshape([t,n,r,i]),r===1||n===1?l:e.compute(pa(l,cE.perm),{inputs:[l],outputs:[-1]})[0]}else return s.dims.length===3&&(l=s.reshape([t,n,r,i])),r===1||n===1?l:e.compute(pa(l,cE.perm),{inputs:[l],outputs:[-1]})[0]},Bae=(e,t)=>{let r=TH(e.inputs,t),n=e.inputs[0],i=ps(e.inputs,1),s=ps(e.inputs,2),a=ps(e.inputs,3),o=ps(e.inputs,4),l=ps(e.inputs,5),c=ps(e.inputs,6),f=ps(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if((i==null?void 0:i.dims.length)===5)throw new Error("Packed KV is not implemented");let d=i&&s&&i.dims.length===4&&s.dims.length===4,h=iv(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,a,0);if(d)return o_(e,h,i,s,o,void 0,c,f,l,r);if(!i||!s)throw new Error("key and value must be provided");let p=iv(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),m=iv(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,s,a,2*r.hiddenSize);o_(e,h,p,m,o,void 0,c,f,l,r)}}),SH,PH,EH,jH,TA,Vae,Uae,Wae=Ze(()=>{Lt(),Zt(),Dn(),Jt(),SH=e=>{if(!e||e.length<1)throw new Error("too few inputs")},PH=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),n=r.length),Ar({numOutputs:n,axis:t.axis,splitSizes:r})},EH=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${Mt("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,jH=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let i=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(i):n===0?r.push(`if (output_number == ${n}u) { ${i} }`):n===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${n}) { ${i} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},TA=(e,t)=>{let r=e[0].dims,n=Ie.size(r),i=e[0].dataType,s=Ie.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),o=Be("input",i,r.length),l=new Array(t.numOutputs),c=[],f=[],d=0,h=[{type:12,data:n}];for(let m=0;m<t.numOutputs;m++){d+=t.splitSizes[m],l[m]=d;let g=r.slice();g[s]=t.splitSizes[m],f.push(g),a[m]=bt(`output${m}`,i,g.length),c.push({dims:f[m],dataType:e[0].dataType})}h.push({type:12,data:l},...Pt(r,...f));let p=m=>`
  ${m.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(o,...a)}
  ${EH(l.length)}
  ${jH(a)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${o.offsetToIndices("global_idx")};
    var index = ${o.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${Mt("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${o.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:p,getRunData:()=>({outputs:c,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:h})}},Vae=(e,t)=>{SH(e.inputs);let r=e.inputs.length===1?t:PH(e.inputs,t);e.compute(TA(e.inputs,r),{inputs:[0]})},Uae=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return Ar({axis:t,numOutputs:n,splitSizes:r})}}),CH,b1,Gae,Hae=Ze(()=>{Lt(),Zt(),Dn(),Jt(),CH=(e,t)=>{let[r,n,i,s]=e,{numHeads:a,rotaryEmbeddingDim:o}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!Ie.areEqual(n.dims,[])&&!Ie.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(i.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${i.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!Ie.areEqual(i.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(o>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],c=r.dims[r.dims.length-2],f=i.dims[0],d=Ie.sizeFromDimension(r.dims,1)/c,h=o===0?i.dims[1]*2:d/a;if(o>h)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(c!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(h/2!==i.dims[1]&&o/2!==i.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(c>f)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},b1=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:i,scale:s}=t,a=e[0].dims[0],o=Ie.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],c=o/l,f=e[2].dims[1],d=i===0?f*2:c/n,h=new Array(a,l,c/d,d-f),p=Ie.computeStrides(h),m=[{type:1,data:s},{type:12,data:h},{type:12,data:p},...e[0].dims.length===3?new Array({type:12,data:[o,c,d,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[o,d,l*d,1]}):[],...Pt(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],g=x=>{let y=Be("input",e[0].dataType,e[0].dims.length),v=Be("position_ids",e[1].dataType,e[1].dims.length),_=Be("cos_cache",e[2].dataType,e[2].dims.length),b=Be("sin_cache",e[3].dataType,e[3].dims.length),w=bt("output",e[0].dataType,e[0].dims.length);return x.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:h.length},{name:"global_strides",type:"u32",length:p.length},{name:"input_output_strides",type:"u32",length:p.length}]),`
        ${x.declareVariables(y,v,_,b,w)}

        ${x.mainStart(rm)}
          let half_rotary_emb_dim = uniforms.${_.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${x.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${v.broadcastedIndicesToOffset("bsnh.xy",bt("",v.type.tensor,2))};
            let position_id =
                u32(${v.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${y.getByOffset("i")} * ${_.get("position_id","bsnh[3]")} -
                ${y.getByOffset("j")} * ${b.get("position_id","bsnh[3]")};
            ${w.setByOffset("i","re")}
            let im = ${y.getByOffset("i")} * ${b.get("position_id","bsnh[3]")} +
                ${y.getByOffset("j")} * ${_.get("position_id","bsnh[3]")};
            ${w.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${w.setByOffset("k",y.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:Ar({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:g,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ie.size(h)/rm)},programUniforms:m})}},Gae=(e,t)=>{CH(e.inputs,t),e.compute(b1(e.inputs,t))}}),AH,OH,uE,$H,Kae,y7e=Ze(()=>{Dn(),Lt(),xI(),zae(),Wae(),Lu(),Hae(),Jt(),AH=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let o=!1,l=r.dims[0],c=r.dims[1],f=r.dims.length===3?o?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],d=c,h=0,p=!n||n.dims.length===0,m=Math.floor(p?f/(t.numHeads+2*t.kvNumHeads):f/t.numHeads);p&&(f=m*t.numHeads);let g=s&&s.dims.length!==0,x=a&&a.dims.length!==0;if(g&&s.dims.length===4&&s.dims[0]===l&&s.dims[1]!==t.kvNumHeads&&s.dims[2]===t.kvNumHeads&&s.dims[3]===m)throw new Error("BSNH pastKey/pastValue is not supported");if(g&&x){if(s.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(a.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');h=s.dims[2]}else if(g||x)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let y=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');d=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==m)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');d=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==m)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');d=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');y=3}let v=0,_=!1,b=t.kvNumHeads?m*t.kvNumHeads:f;if(i&&i.dims.length>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(d!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');b=i.dims[2]}else{if(d!==i.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');b=i.dims[1]*i.dims[3],_=!0}}let w=e.length>4?e[5]:void 0;if(w&&w.dims.length!==1&&w.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:c,pastSequenceLength:h,kvSequenceLength:d,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:f,vHiddenSize:b,headSize:m,vHeadSize:Math.floor(b/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:v,scale:t.scale,broadcastResPosBias:!1,passPastInKv:_,qkvFormat:y}},OH=Ar({perm:[0,2,1,3]}),uE=(e,t,r)=>{let n=t,i=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,i,r.headSize]),n=e.compute(pa(n,OH.perm),{inputs:[n],outputs:[-1]})[0]),n},$H=(e,t,r,n)=>{let i=7,s=["type","type"],a=[e*t],o=e*t,l=[{type:12,data:o},{type:12,data:t},{type:12,data:e}],c=f=>{let d=Be("seq_lens",r.dataType,r.dims),h=Be("total_seq_lens",n.dataType,n.dims),p=bt("pos_ids",i,a),m=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${f.registerUniforms(m).declareVariables(d,h,p)}
  ${f.mainStart()}
    ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${h.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${d.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${p.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:l}),getShaderSource:c}},Kae=(e,t)=>{var b;let r=AH(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(((b=e.inputs[1])==null?void 0:b.dims.length)===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],i=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,s=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,a=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,o=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,c=e.inputs.length>5?e.inputs[6]:void 0,f=r.kvNumHeads?r.kvNumHeads:r.numHeads,d=Ar({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,f*r.headSize,f*r.headSize]}),[h,p,m]=!i&&!s?e.compute(TA([n],d),{inputs:[n],outputs:[-1,-1,-1]}):[n,i,s],g,x;if(t.doRotary){let w=e.compute($H(r.batchSize,r.sequenceLength,l,c),{inputs:[l,c],outputs:[-1]})[0],k=e.inputs[7],T=e.inputs[8],M=Ar({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),j=[h,w,k,T],C=[-1];g=e.compute(b1(j,M),{inputs:j,outputs:C})[0],j.splice(0,1,p);let R=Ar({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});x=e.compute(b1(j,R),{inputs:j,outputs:C})[0]}let y=iv(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?g:h,void 0,0),v=uE(e,t.doRotary?x:p,r),_=uE(e,m,r);o_(e,y,v,_,void 0,void 0,a,o,void 0,r,l,c)}}),dE,NH,IH,qae,_7e=Ze(()=>{Lt(),Zt(),Lu(),Jt(),dE=(e,t,r,n,i,s,a,o)=>{let l=Pn(s),c=l===1?"f32":`vec${l}f`,f=l===1?"vec2f":`mat2x${l}f`,d=i*a,h=64;d===1&&(h=256);let p=[i,a,s/l],m=[i,a,2],g=["rank","type","type"],x=[];x.push(...Pt(p,m));let y=v=>{let _=Be("x",t.dataType,3,l),b=Be("scale",r.dataType,r.dims),w=Be("bias",n.dataType,n.dims),k=bt("output",1,3,2),T=[_,b,w,k];return`
  var<workgroup> workgroup_shared : array<${f}, ${h}>;
  const workgroup_size = ${h}u;
  ${v.declareVariables(...T)}
  ${v.mainStart(h)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${c}(0);
    var squared_sum = ${c}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${c}(${_.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${f}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${ku("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${ku("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${o}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${o};${h}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:m,dataType:1}],dispatchGroup:{x:d},programUniforms:x}),getShaderSource:y},{inputs:[t,r,n],outputs:[-1]})[0]},NH=(e,t,r)=>{let n=t[0].dims,i=n,s=2,a=n[0],o=n[1],l=Ie.sizeFromDimension(n,s),c=Pn(l),f=Ie.size(i)/c,d=dE(e,t[0],t[1],t[2],a,l,o,r.epsilon),h=[a,o,l/c],p=[a,o],m=["type","none"],g=x=>{let y=Be("x",t[0].dataType,h.length,c),v=Be("scale_shift",1,p.length,2),_=bt("output",t[0].dataType,h.length,c),b=[y,v,_];return`
  ${x.registerUniform("output_size","u32").declareVariables(...b)}
  ${x.mainStart()}
  ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${_.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${v.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${y.getByOffset("global_idx")} * ${_.type.value}(scale_shift.x) + ${_.type.value}(scale_shift.y);
      ${_.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${c}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},...Pt(h,p,h)]}),getShaderSource:g},{inputs:[t[0],d]})},IH=(e,t,r)=>{let n=t[0].dims,i=n,s=n[0],a=n[n.length-1],o=Ie.sizeFromDimension(n,1)/a,l=Pn(a),c=Ie.size(i)/l,f=[{type:12,data:o},{type:12,data:Math.floor(a/l)}],d=["type","type"],h=!1,p=[0,n.length-1];for(let y=0;y<n.length-2;y++)h=h||n[y+1]!==1,p.push(y+1);h=h&&n[n.length-1]!==1;let m=h?e.compute(pa(e.inputs[0],p),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(y,v)=>n[p[v]])),g=dE(e,m,t[1],t[2],s,o,a,r.epsilon),x=y=>{let v=wi(t[0].dataType),_=l===1?"vec2f":`mat${l}x2f`,b=T=>{let M=T===0?"x":"y",j=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${v}(${j}(scale.${M}))`;case 2:return`vec2<${v}>(${j}(scale[0].${M}, scale[1].${M}))`;case 4:return`vec4<${v}>(${j}(scale[0].${M}, scale[1].${M}, scale[2].${M}, scale[3].${M}))`;default:throw new Error(`Not supported compoents ${l}`)}},w=Be("input",t[0].dataType,t[0].dims,l),k=bt("output",t[0].dataType,i,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${w.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${_}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${k.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${y.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${b(0)}, ${b(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:f}),getShaderSource:x},{inputs:[t[0],g]})},qae=(e,t)=>{t.format==="NHWC"?IH(e,e.inputs,t):NH(e,e.inputs,t)}}),DH,LH,Xae,x7e=Ze(()=>{Lt(),Zt(),Jt(),DH=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},LH=(e,t,r)=>{let n=t.simplified,i=e[0].dims,s=e[1],a=!n&&e[2],o=i,l=Ie.normalizeAxis(t.axis,i.length),c=Ie.sizeToDimension(i,l),f=Ie.sizeFromDimension(i,l),d=Ie.size(s.dims),h=a?Ie.size(a.dims):0;if(d!==f||a&&h!==f)throw new Error(`Size of X.shape()[axis:] == ${f}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${d} and bias size of ${h}`);let p=[];for(let w=0;w<i.length;++w)w<l?p.push(i[w]):p.push(1);let m=Pn(f),g=["type","type"],x=[{type:12,data:c},{type:1,data:f},{type:12,data:Math.floor(f/m)},{type:1,data:t.epsilon}];a&&g.push("type");let y=r>1,v=r>2,_=w=>{let k=wi(e[0].dataType),T=[Be("x",e[0].dataType,e[0].dims,m),Be("scale",s.dataType,s.dims,m)];a&&T.push(Be("bias",a.dataType,a.dims,m)),T.push(bt("output",e[0].dataType,o,m)),y&&T.push(bt("mean_data_output",1,p)),v&&T.push(bt("inv_std_output",1,p));let M=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${w.registerUniforms(M).declareVariables(...T)}
  ${w.mainStart()}
    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${mA("f32",m)};
    var mean_square_vector = ${mA("f32",m)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${Bh(k,m,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${ku("mean_vector",m)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${ku("mean_square_vector",m)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${Bh(k,m,"x[j + offset]")};
      let f32scale = ${Bh(k,m,"scale[j]")};
      output[j + offset] = ${T[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${a?`+ ${Bh(k,m,"bias[j]")}`:""}
      );
    }

    ${y?"mean_data_output[global_idx] = mean":""};
    ${v?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},b=[{dims:o,dataType:e[0].dataType}];return y&&b.push({dims:p,dataType:1}),v&&b.push({dims:p,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${m};${r};${n}`,inputDependencies:g},getRunData:()=>({outputs:b,dispatchGroup:{x:Math.ceil(c/64)},programUniforms:x}),getShaderSource:_}},Xae=(e,t)=>{DH(e.inputs),e.compute(LH(e.inputs,t,e.outputCount))}}),RH,Yae,b7e=Ze(()=>{Zt(),MI(),SI(),RH=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},Yae=e=>{RH(e.inputs);let t=tm.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(TI(e.inputs,{activation:""},t));else{let i=t[t.length-2],s=Ie.size(e.inputs[0].dims.slice(0,-2)),a=Ie.size(e.inputs[1].dims.slice(0,-2));if(s!==1&&i===1&&a===1){let o=e.inputs[0].reshape([1,s,n]),l=e.inputs[1].reshape([1,n,r]),c=[1,s,r],f=[o,l];e.compute(x1(f,{activation:""},t,c),{inputs:f})}else e.compute(x1(e.inputs,{activation:""},t))}}}),FH,BH,zH,Qae,Zae,w7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),FH=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),s=t.blockSize/8*t.bits,a=e[1];if(!Ie.areEqual(a.dims,[t.n,i,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let o=e[2].dims;if(Ie.size(o)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,c=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(Ie.size(l)!==c)throw new Error("zeroPoints input size error.")}},BH=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,a=t.n,o=r.slice(0,n-2),l=Ie.size(o),c=e[1].dims[2]/4,f=e[0].dataType,d=Pn(t.k),h=Pn(c),p=Pn(a),m=o.concat([i,a]),g=i>1&&a/p%2===0?2:1,x=Ie.size(m)/p/g,y=64,v=[],_=[l,i,s/d],b=Ie.convertShape(e[1].dims).slice();b.splice(-1,1,c/h),v.push(...Pt(_)),v.push(...Pt(b)),v.push(...Pt(e[2].dims)),e.length===4&&v.push(...Pt(Ie.convertShape(e[3].dims)));let w=[l,i,a/p];v.push(...Pt(w));let k=T=>{let M=_.length,j=Be("a",e[0].dataType,M,d),C=Be("b",12,b.length,h),R=Be("scales",e[2].dataType,e[2].dims.length),I=[j,C,R],N=e.length===4?Be("zero_points",12,e[3].dims.length):void 0;N&&I.push(N);let z=w.length,V=bt("output",e[0].dataType,z,p),G=wi(e[0].dataType),H=(()=>{switch(d){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${d}-component is not supported.`)}})(),O=()=>{let B=`
          // reuse a data
            var input_offset = ${j.indicesToOffset(`${j.type.indices}(batch, row, word_offset)`)};
            var a_data: ${H};
            for (var j: u32 = 0; j < ${8/d}; j++) {
              a_data[j] = ${j.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let D=0;D<p*g;D++)B+=`
            b_value = ${h===1?`b${D}_data`:`b${D}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${H}(${Array.from({length:4},(K,oe)=>`${G}(b_value_lower[${oe}]), ${G}(b_value_upper[${oe}])`).join(", ")});
            b_dequantized_values = ${d===1?`${H}(${Array.from({length:8},(K,oe)=>`(b_quantized_values[${oe}] - ${N?`zero_point${D}`:"zero_point"}) * scale${D}`).join(", ")});`:`(b_quantized_values - ${H}(${Array(8).fill(`${N?`zero_point${D}`:"zero_point"}`).join(",")})) * scale${D};`};
            workgroup_shared[local_id.x * ${g} + ${Math.floor(D/p)}]${p>1?`[${D%p}]`:""} += ${Array.from({length:8/d},(K,oe)=>`${d===1?`a_data[${oe}] * b_dequantized_values[${oe}]`:`dot(a_data[${oe}], b_dequantized_values[${oe}])`}`).join(" + ")};
          `;return B},q=()=>{let B=`
            var col_index = col * ${p};
            ${N?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${G}(8);`}
            `;for(let D=0;D<p*g;D++)B+=`
            let scale${D} = ${R.getByOffset("col_index * nBlocksPerCol + block")};
            ${N?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${N.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${D} = ${G}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return B},ee=()=>{let B=`col_index = col * ${p};`;for(let D=0;D<p*g;D++)B+=`
            let b${D}_data = ${C.getByIndices(`${C.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return B+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${H};
            var b_dequantized_values: ${H};`,B};return`
        var<workgroup> workgroup_shared: array<${V.type.value}, ${g*y}>;
        ${T.declareVariables(...I,V)}
        ${T.mainStart([y,1,1])}
          let output_indices = ${V.offsetToIndices(`(global_idx / ${y}) * ${g}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${y}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/d};
            ${q()}
            for (var word: u32 = 0; word < ${c}; word += ${h}) {
              ${ee()}
              for (var i: u32 = 0; i < ${h}; i++) {
                ${O()}
                word_offset += ${8/d};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${g}) {
            var output_value: ${V.type.value} = ${V.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${y}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${g};
            }
            ${V.setByIndices(`${V.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${d};${h};${p};${g};${y}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:m,dataType:f}],dispatchGroup:{x},programUniforms:v}),getShaderSource:k}},zH=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,a=t.n,o=r.slice(0,n-2),l=Ie.size(o),c=e[1].dims[2]/4,f=e[0].dataType,d=Pn(t.k),h=Pn(c),p=o.concat([i,a]),m=128,g=a%8===0?8:a%4===0?4:1,x=m/g,y=x*h*8,v=y/d,_=y/t.blockSize,b=Ie.size(p)/g,w=[],k=[l,i,s/d],T=Ie.convertShape(e[1].dims).slice();T.splice(-1,1,c/h),w.push(...Pt(k)),w.push(...Pt(T)),w.push(...Pt(e[2].dims)),e.length===4&&w.push(...Pt(Ie.convertShape(e[3].dims)));let M=[l,i,a];w.push(...Pt(M));let j=C=>{let R=k.length,I=Be("a",e[0].dataType,R,d),N=Be("b",12,T.length,h),z=Be("scales",e[2].dataType,e[2].dims.length),V=[I,N,z],G=e.length===4?Be("zero_points",12,e[3].dims.length):void 0;G&&V.push(G);let H=M.length,O=bt("output",e[0].dataType,H),q=wi(e[0].dataType),ee=()=>{switch(d){case 1:return`
          let a_data0 = vec4<${q}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${q}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${q}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${q}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${d}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${I.type.value}, ${v}>;
        var<workgroup> inter_results: array<array<${O.type.value}, ${x}>, ${g}>;
        ${C.declareVariables(...V,O)}
        ${C.mainStart([x,g,1])}
          let output_indices = ${O.offsetToIndices(`workgroup_index * ${g}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${_} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${v};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${v}; a_offset += ${m})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${I.getByIndices(`${I.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${I.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${_} + local_id.x;
            ${G?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${G.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${q}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${q}(8);`}
            let scale = ${z.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${N.getByIndices(`${N.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/d};
            for (var i: u32 = 0; i < ${h}; i++) {
              ${ee()}
              let b_value = ${h===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${q}>(${Array.from({length:4},(B,D)=>`${q}(b_value_lower[${D}]), ${q}(b_value_upper[${D}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${q}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(B,D)=>`${`dot(a_data${D}, b_dequantized_values[${D}])`}`).join(" + ")};
              word_offset += ${8/d};
            }
            workgroupBarrier();
          }

          if (local_idx < ${g}) {
            var output_value: ${O.type.value} = ${O.type.value}(0);
            for (var b = 0u; b < ${x}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${O.setByIndices(`${O.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${d};${h};${x};${g}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:p,dataType:f}],dispatchGroup:{x:b},programUniforms:w}),getShaderSource:j}},Qae=(e,t)=>{FH(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(zH(e.inputs,t)):e.compute(BH(e.inputs,t))},Zae=e=>Ar(e)}),VH,UH,WH,GH,HH,KH,qH,XH,Jae,k7e=Ze(()=>{Lt(),Zt(),Jt(),VH=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},UH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
            k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
              break;
            }
            offset += k * i32(${Mt("uniforms.x_strides",i,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},WH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${Mt("uniforms.x_shape",i,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},GH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                  k = i32(${Mt("uniforms.x_shape",i,t)}) - 1;
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},HH=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Mt("uniforms.pads",i,r)};
                if (k < 0)  {
                  k += i32(${Mt("uniforms.x_shape",i,t)}]);
                }
                if (k >= i32(${Mt("uniforms.x_shape",i,t)})) {
                  k -= i32(${Mt("uniforms.x_shape",i,t)});
                }
                offset += k * i32(${Mt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},KH=(e,t,r)=>{switch(r.mode){case 0:return UH(e,t,r.pads.length);case 1:return WH(e,t,r.pads.length);case 2:return GH(e,t,r.pads.length);case 3:return HH(e,t,r.pads.length);default:throw new Error("Invalid mode")}},qH=(e,t)=>{let r=Ie.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,i=Ie.size(r),s=[{type:12,data:i},{type:6,data:t.pads}],a=e.length>=3&&e[2].data;t.mode===0&&s.push({type:a?e[2].dataType:1,data:t.value}),s.push(...Pt(e[0].dims,r));let o=["rank"],l=c=>{let f=bt("output",e[0].dataType,r.length),d=Be("x",e[0].dataType,n.length),h=d.type.value,p=KH(f,n.length,t),m=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&m.push({name:"constant_value",type:a?h:"f32"}),`
            ${c.registerUniforms(m).declareVariables(d,f)}
            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${f.offsetToIndices("global_idx")};

            var value = ${h}(0);
            ${p}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${a}`,inputDependencies:o},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ie.size(r)/64)},programUniforms:s}),getShaderSource:l}},XH=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,i=e[0].dims.length,s=new Int32Array(2*i).fill(0);if(e.length>=4){let o=e[3].getBigInt64Array();for(let l=0;l<o.length;l++)s[Number(o[l])]=Number(r[l]),s[Number(o[l])+i]=Number(r[l+o.length])}else r.forEach((o,l)=>s[Number(l)]=Number(o));let a=[];return s.forEach(o=>a.push(o)),{mode:t.mode,value:n,pads:a}}else return t},Jae=(e,t)=>{VH(e.inputs);let r=XH(e.inputs,t);e.compute(qH(e.inputs,r),{inputs:[0]})}}),Fg,fE,hE,pE,mE,YH,QH,gE,vE,eoe,toe,yE,roe,noe,_E,ioe,soe,aoe,ooe,T7e=Ze(()=>{Io(),Lt(),Zt(),Jt(),Fg=e=>{if(Yr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},fE=(e,t,r)=>{let n=t.format==="NHWC",i=e.dims.slice();n&&i.splice(1,0,i.pop());let s=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),o=t.strides.slice(),l=s?t.dilations.slice():[],c=t.pads.slice();y1.adjustPoolAttributes(r,i,a,o,l,c);let f=y1.computePoolOutputShape(r,i,o,l,a,c,t.autoPad),d=Object.assign({},t);s?Object.assign(d,{kernelShape:a,strides:o,pads:c,dilations:l,cacheKey:t.cacheKey}):Object.assign(d,{kernelShape:a,strides:o,pads:c,cacheKey:t.cacheKey});let h=f.slice();return h.push(h.splice(1,1)[0]),[d,n?h:f]},hE=(e,t)=>{let r=t.format==="NHWC",n=Ie.size(e),i=Ie.size(t.kernelShape),s=[{type:12,data:n},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let o=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],c=t.pads[t.pads.length/2-1],f=t.pads[t.pads.length-1],d=!!(c+f);s.push({type:12,data:o},{type:12,data:l},{type:12,data:c},{type:12,data:f}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let h=!1;if(t.kernelShape.length===2){let p=t.kernelShape[t.kernelShape.length-2],m=t.strides[t.strides.length-2],g=t.pads[t.pads.length/2-2],x=t.pads[t.pads.length-2];h=!!(g+x),s.push({type:12,data:p},{type:12,data:m},{type:12,data:g},{type:12,data:x}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,a,!0,d,h]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let o=Ie.computeStrides(t.kernelShape);s.push({type:12,data:o},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:o.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((c,f)=>c+f);return[s,a,!!l,!1,!1]}},pE=(e,t,r,n,i,s,a,o,l,c,f,d)=>{let h=i.format==="NHWC",p=t.type.value,m=bt("output",t.type.tensor,n);if(i.kernelShape.length<=2){let g="",x="",y="",v=r-(h?2:1);if(f?g=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${v}] = indices[${v}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${v}] < 0 || xIndices[${v}]
                      >= uniforms.x_shape[${v}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`:g=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${v}] = indices[${v}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`,i.kernelShape.length===2){let _=r-(h?3:2);d?x=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${_}] < 0 || xIndices[${_}] >= uniforms.x_shape[${_}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:x=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sh - uniforms.phStart + j;
                `,y=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var value = ${p}(${o});
              var pad = 0;
              ${x}
              ${g}
              ${y}
              ${a}

              output[global_idx] = value;
            }`}else{if(h)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let g=i.kernelShape.length,x=i.pads.length,y="";return c?y=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${s}
              }`:y=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var offsets: array<u32, ${g}>;

              var value = ${p}(${o});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${g-1}u; j++) {
                  offsets[j] = offset / ${Mt("uniforms.kernelStrides","j",g)};
                  offset -= offsets[j] * ${Mt("uniforms.kernelStrides","j",g)};
                }
                offsets[${g-1}] = offset;

                isPad = false;
                for (var j = ${r-g}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${Mt("uniforms.strides",`j - ${r-g}u`,g)}
                    + offsets[j - ${r-g}u] - ${Mt("uniforms.pads","j - 2u",x)};
                  ${y}
              }
              ${a}

              output[global_idx] = value;
            }`}},mE=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,YH=e=>`${mE(e)};${e.countIncludePad}`,QH=e=>`${mE(e)};${e.storageOrder};${e.dilations}`,gE=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),vE=(e,t,r,n)=>{let[i,s]=fE(t,n,r),a=Be("x",t.dataType,t.dims.length),o=a.type.value,l="value += x_val;",c="";i.countIncludePad?c+=`value /= ${o}(uniforms.kernelSize);`:c+=`value /= ${o}(i32(uniforms.kernelSize) - pad);`;let[f,d,h,p,m]=hE(s,i);f.push(...Pt(t.dims,s));let g=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${h};${p};${m}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ie.size(s)/64)},programUniforms:f}),getShaderSource:x=>pE(x,a,t.dims.length,s.length,i,l,c,0,d,h,p,m)}},eoe=e=>{let t=e.count_include_pad!==0,r=gE(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:YH(n)}},toe=(e,t)=>{Fg(e.inputs),e.compute(vE("AveragePool",e.inputs[0],!1,t))},yE={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},roe=e=>{let t=e.format;return{format:t,...yE,cacheKey:t}},noe=(e,t)=>{Fg(e.inputs),e.compute(vE("GlobalAveragePool",e.inputs[0],!0,t))},_E=(e,t,r,n)=>{let[i,s]=fE(t,n,r),a=`
      value = max(x_val, value);
    `,o="",l=Be("x",t.dataType,t.dims.length),c=["rank"],[f,d,h,p,m]=hE(s,i);return f.push(...Pt(t.dims,s)),{name:e,shaderCache:{hint:`${n.cacheKey};${h};${p};${m}`,inputDependencies:c},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ie.size(s)/64)},programUniforms:f}),getShaderSource:g=>pE(g,l,t.dims.length,s.length,i,a,o,t.dataType===10?-65504:-1e5,d,h,p,m)}},ioe=(e,t)=>{Fg(e.inputs),e.compute(_E("MaxPool",e.inputs[0],!1,t))},soe=e=>{let t=e.storage_order,r=e.dilations,n=gE(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...n,cacheKey:""};return{...i,cacheKey:QH(i)}},aoe=e=>{let t=e.format;return{format:t,...yE,cacheKey:t}},ooe=(e,t)=>{Fg(e.inputs),e.compute(_E("GlobalMaxPool",e.inputs[0],!0,t))}}),ZH,JH,loe,coe,M7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),ZH=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((i,s)=>s===t.axis||i===e[0].dims[s]).reduce((i,s)=>i&&s,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},JH=(e,t)=>{let r=Ie.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,i=n===3,s=e[0].dims,a=e[1].dataType,o=Ie.size(s),l=n===3||n===2,c=l?[Math.ceil(Ie.size(e[0].dims)/4)]:e[0].dims,f=e[1].dims,d=e.length>2?e[2]:void 0,h=d?l?[Math.ceil(Ie.size(d.dims)/4)]:d.dims:void 0,p=f.length===0||f.length===1&&f[0]===1,m=p===!1&&f.length===1,g=Pn(o),x=p&&(!l||g===4),y=x?g:1,v=x&&!l?g:1,_=Be("input",l?12:n,c.length,v),b=Be("scale",a,f.length),w=d?Be("zero_point",l?12:n,h.length):void 0,k=bt("output",a,s.length,y),T=[_,b];w&&T.push(w);let M=[c,f];d&&M.push(h);let j=[{type:12,data:o/y},{type:12,data:r},{type:12,data:t.blockSize},...Pt(...M,s)],C=R=>{let I=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${R.registerUniforms(I).declareVariables(...T,k)}
      ${R.mainStart()}
          ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${k.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${_.getByOffset("global_idx / 4")};
            let x_vec = ${i?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${y===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${_.getByOffset("global_idx")};`};

          // Set scale input
          ${p?`let scale_value= ${b.getByOffset("0")}`:m?`
            let scale_index = ${k.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${b.getByOffset("scale_index")};`:`
            var scale_indices: ${b.type.indices} = output_indices;
            let index = ${b.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${b.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${b.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${w?p?l?`
                let zero_point_input = ${w.getByOffset("0")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${w.getByOffset("0")}`:m?l?`
                let zero_point_index = ${k.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${w.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${k.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${w.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${b.indicesToOffset("scale_indices")};
                let zero_point_input = ${w.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${w.getByIndices("scale_indices")};`:`let zero_point_value = ${l?i?"i32":"u32":_.type.value}(0);`};
      // Compute and write output
      ${k.setByOffset("global_idx",`${k.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:w?["rank","rank","rank"]:["rank","rank"]},getShaderSource:C,getRunData:()=>({outputs:[{dims:s,dataType:a}],dispatchGroup:{x:Math.ceil(o/y/64),y:1,z:1},programUniforms:j})}},loe=(e,t)=>{ZH(e.inputs,t),e.compute(JH(e.inputs,t))},coe=e=>Ar({axis:e.axis,blockSize:e.blockSize})}),e9,t9,uoe,S7e=Ze(()=>{Io(),Lt(),Jt(),e9=(e,t,r)=>{let n=e===t,i=e<t&&r<0,s=e>t&&r>0;if(n||i||s)throw new Error("Range these inputs' contents are invalid.")},t9=(e,t,r,n)=>{let i=Math.abs(Math.ceil((t-e)/r)),s=[i],a=i,o=[{type:12,data:a},{type:n,data:e},{type:n,data:r},...Pt(s)],l=c=>{let f=bt("output",n,s.length),d=f.type.value,h=[{name:"outputSize",type:"u32"},{name:"start",type:d},{name:"delta",type:d}];return`
        ${c.registerUniforms(h).declareVariables(f)}
        ${c.mainStart()}
        ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${d}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:s,dataType:n}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:o})}},uoe=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),Yr.webgpu.validateInputContent&&e9(t,r,n),e.compute(t9(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),r9,xE,bE,n9,doe,foe,P7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),r9=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let i=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,s=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${i}bitcast<${n}>(oldValue) + (${r})${s}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${i}max(bitcast<f32>(oldValue), (${r}))${s}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${i}min(bitcast<${n}>(oldValue), (${r}))${s}`;case"mul":return`${i}(bitcast<${n}>(oldValue) * (${r}))${s}`;default:throw new Error(`Reduction ${e} is not supported.`)}},xE=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,bE=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${r9(e.reduction,"output[data_offset + i]","value",t)}
      }`,n9=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r,s=1,a=Math.ceil(Ie.size(n)/s),o=n[n.length-1],l=Ie.sizeFromDimension(r,o),c=Ie.sizeFromDimension(n,0)/o,f=[{type:12,data:a},{type:12,data:o},{type:12,data:l},...Pt(e[1].dims,e[2].dims,i)],d=h=>{let p=Be("indices",e[1].dataType,e[1].dims.length),m=Be("updates",e[2].dataType,e[2].dims.length,s),g=t.reduction!=="none"&&t.reduction!==""?Bie("output",e[0].dataType,i.length):bt("output",e[0].dataType,i.length,s);return`
      ${h.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(p,m,g)}
      ${h.mainStart()}
        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${c}; i = i + 1) {
      for (var j = i + 1; j < ${c}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${c}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${xE(r.length,!1)}
      }
      ${bE(t,g.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${xE(r.length,!0)}
  }
  ${bE(t,g.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:f}),getShaderSource:d}},doe=e=>Ar({reduction:e.reduction}),foe=(e,t)=>{e.compute(n9(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),i9,s9,a9,wE,o9,l9,c9,u9,d9,f9,h9,p9,kE,m9,g9,v9,y9,_9,hoe,poe,E7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),i9=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},s9=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((i,s)=>n[i]=e[s]),n},a9=(e,t,r,n,i,s)=>{let[a,o,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],c=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(f=>s.push(f));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(o>0&&e.length>o&&e[o].dims.length===1&&e[o].dims[0]>0){if(e[o].getFloat32Array().forEach(f=>n.push(f)),n.length!==0&&n.length!==c&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");i9(n,t),t.axes.length>0&&s9(n,t.axes,c).forEach((f,d)=>n[d]=f)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(f=>i.push(Number(f))),i.length!==0&&i.length!==c&&r>=18&&i.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(i.length!==0&&i.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof i<"u"&&n.length>0&&i.length>c)throw new Error("Resize requires only of scales or sizes to be specified")},wE=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,o9=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${wE("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${wE("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",l9=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",c9=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?n:e.slice();return t.length>0?(t.forEach((s,a)=>{n[s]=i[a],n[a+r]=i[t.length+a]}),n):i},u9=(e,t,r,n)=>{let i=[];if(r.length>0)if(n.length>0){if(e.forEach(s=>i.push(s)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((s,a)=>i[s]=r[a])}else r.forEach(s=>i.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((s,a)=>Math.round(s*t[a]))}return i},d9=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(s=>t[s]=n),r.axes.forEach(s=>i[s]=Math.round(e[s]*t[s]))):(t.fill(n,0,t.length),i.forEach((s,a)=>i[a]=Math.round(s*t[a]))),i},f9=(e,t,r,n,i)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${Mt("uniforms.scales","i",n)};
        var roi_low = ${Mt("uniforms.roi","i",i)};
        var roi_hi = ${Mt("uniforms.roi",`i + ${t.length}`,i)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${Mt("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${Mt("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,h9=(e,t,r,n,i,s,a)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${Mt("uniforms.scales","i",i)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${Mt("uniforms.roi","i",s)};
          var roi_hi = ${Mt("uniforms.roi",`i + ${r.length}`,s)};
          var input_shape_i = ${Mt("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${Mt("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,p9=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${Mt("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,kE=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",m9=(e,t,r,n,i)=>{let[s,a,o,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],c=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${c} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(row, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",o,`max(0, min(col, ${r[o]} - 1))`)};
      ${kE(e,l,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${c} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${c} = originalIndices[${a}];
      var col:${c} = originalIndices[${o}];
      ${n?`if (row < 0 || row > (${r[a]} - 1) || col < 0 || col > (${r[o]} - 1)) {
        return ${i};
      }`:""};
      row = max(0, min(row, ${r[a]} - 1));
      col = max(0, min(col, ${r[o]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${c} = getInputValue(batch, channel, row1, col1);
      var x12: ${c} = getInputValue(batch, channel, row1, col2);
      var x21: ${c} = getInputValue(batch, channel, row2, col1);
      var x22: ${c} = getInputValue(batch, channel, row2, col2);
      var dx1: ${c} = abs(row - ${c}(row1));
      var dx2: ${c} = abs(${c}(row2) - row);
      var dy1: ${c} = abs(col - ${c}(col1));
      var dy2: ${c} = abs(${c}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},g9=(e,t,r,n,i,s,a,o,l,c)=>{let f=r.length===2,[d,h]=f?[0,1]:[2,3],p=e.type.value,m=g=>{let x=g===d?"row":"col";return`
      fn ${x}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${p} {
        var output_index = ${t.indicesGet("output_indices",g)};
        var originalIdx: ${p} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[g]},
        ${n[g]}, ${r[g]}, ${s[g]}, ${s[g]} + ${r.length});
        var fractOriginalIdx: ${p} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${o} && (originalIdx < 0 || originalIdx > (${r[g]} - 1))) {
          return ${l};
        }
        var data: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${x}: ${p} = originalIdx + ${p}(i);
          if (${x} < 0 || ${x} >= ${r[g]}) {
            ${c?`coefs[i + 1] = 0.0;
                        continue;`:o?`return ${l};`:`${x} = max(0, min(${x}, ${r[g]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",g,`u32(${x})`)};
          data[i + 1] = ${g===d?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${m(d)};
    ${m(h)};
  fn getCubicInterpolationCoefs(s: ${p}) -> array<${p}, 4> {
    var absS = abs(s);
    var coeffs: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${p} = 1.0 - absS;
    var twoMinusAbsS: ${p} = 2.0 - absS;
    var onePlusAbsS: ${p} = 1.0 + absS;
    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};
    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;
    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${p}, 4>, coefs: array<${p}, 4>) -> ${p} {
    var coefsSum: ${p} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${p} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},v9=(e,t,r,n,i)=>{let[s,a,o,l,c]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],f=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${f} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(depth, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",o,`max(0, min(height, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${kE(e,c,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${f} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${f} = originalIndices[${a}];
      var height:${f} = originalIndices[${o}];
      var width:${f} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[a]} - 1) || height < 0 || height > (${r[o]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${i};
        }`:""};

    depth = max(0, min(depth, ${r[a]} - 1));
      height = max(0, min(height, ${r[o]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${c}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${f} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${f} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${f} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${f} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${f} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${f} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${f} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${f} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${f} = abs(depth - ${f}(depth1));
      var dx2: ${f} = abs(${f}(depth2) - depth);
      var dy1: ${f} = abs(height - ${f}(height1));
      var dy2: ${f} = abs(${f}(height2) - height);
      var dz1: ${f} = abs(width - ${f}(width1));
      var dz2: ${f} = abs(${f}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},y9=(e,t,r,n,i,s)=>{let a=e.dims,o=c9(s,t.axes,a.length),l=u9(a,n,i,t.axes),c=n.slice();n.length===0&&(c=a.map((v,_)=>v===0?1:l[_]/v),t.keepAspectRatioPolicy!=="stretch"&&(l=d9(a,c,t)));let f=bt("output",e.dataType,l.length),d=Be("input",e.dataType,a.length),h=Ie.size(l),p=a.length===l.length&&a.every((v,_)=>v===l[_]),m=t.coordinateTransformMode==="tf_crop_and_resize",g=t.extrapolationValue,x=d.type.value,y=v=>`
      ${p?"":`
      ${o9(t.coordinateTransformMode,x)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${p9(d,a)};
              ${l9(t.nearestMode,r,x)};
              ${h9(d,f,a,l,c.length,o.length,m)};
              `;case"linear":return`
              ${f9(f,a,l,c.length,o.length)};
              ${(()=>{if(a.length===2||a.length===4)return`${m9(d,f,a,m,g)}`;if(a.length===3||a.length===5)return`${v9(d,f,a,m,g)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(a.length===2||a.length===4)return`${g9(d,f,a,l,c,o,t.cubicCoeffA,m,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${v.registerUniform("output_size","u32").registerUniform("scales","f32",c.length).registerUniform("roi","f32",o.length).declareVariables(d,f)}
      ${v.mainStart()}
        ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${p?"output[global_idx] = input[global_idx];":`
        let output_indices = ${f.offsetToIndices("global_idx")};
        var input_indices: ${d.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${d.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${c.length>0?t.mode==="cubic"?c:c.length:""}|${i.length>0?i:""}|${o.length>0?o:""}|${p}|${t.mode==="nearest"?a.length:a}`,inputDependencies:["rank"]},getShaderSource:y,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},{type:1,data:c},{type:1,data:o},...Pt(a,l)]})}},_9=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hoe=(e,t)=>{let r=[],n=[],i=[],s=_9(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");a9(e.inputs,t,s,r,n,i),e.compute(y9(e.inputs[0],t,s,r,n,i),{inputs:[0]})},poe=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,i=e.cubicCoeffA,s=e.excludeOutside!==0,a=e.extrapolationValue,o=e.keepAspectRatioPolicy,l=e.mode,c=e.nearestMode===""?"simple":e.nearestMode;return Ar({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:i,excludeOutside:s,extrapolationValue:a,keepAspectRatioPolicy:o,mode:l,nearestMode:c})}}),x9,b9,moe,j7e=Ze(()=>{Lt(),Zt(),Jt(),x9=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},b9=(e,t,r,n)=>{let i=t.simplified,s=e[0].dims,a=Ie.size(s),o=s,l=a,c=s.slice(-1)[0],f=n?s.slice(0,-1).concat(1):[],d=!i&&e.length>3,h=e.length>4,p=n&&r>1,m=n&&r>2,g=r>3,x=64,y=Pn(c),v=[{type:12,data:l},{type:12,data:y},{type:12,data:c},{type:1,data:t.epsilon}],_=w=>{let k=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],T=[Be("x",e[0].dataType,e[0].dims,y),Be("skip",e[1].dataType,e[1].dims,y),Be("gamma",e[2].dataType,e[2].dims,y)];d&&T.push(Be("beta",e[3].dataType,e[3].dims,y)),h&&T.push(Be("bias",e[4].dataType,e[4].dims,y)),T.push(bt("output",e[0].dataType,o,y)),p&&T.push(bt("mean_output",1,f)),m&&T.push(bt("inv_std_output",1,f)),g&&T.push(bt("input_skip_bias_sum",e[0].dataType,o,y));let M=wi(e[0].dataType),j=wi(1,y);return`

      ${w.registerUniforms(k).declareVariables(...T)}
      var<workgroup> sum_shared : array<${j}, ${x}>;
      var<workgroup> sum_squared_shared : array<${j}, ${x}>;

      ${w.mainStart([x,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${x};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${x};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${x-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${h?"bias[offset1d + i]":M+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${g?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${Bh(M,y,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${x};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${ku("sum",y)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${ku("square_sum",y)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);
        ${p?"mean_output[global_idx] = mean;":""}
        ${m?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${i?"":`- ${M}(mean)`}) *
            ${M}(inv_std_dev) * gamma[offset1d + i]
            ${d?"+ beta[offset1d + i]":""};
        }
      }`},b=[{dims:o,dataType:e[0].dataType}];return r>1&&b.push({dims:f,dataType:1}),r>2&&b.push({dims:f,dataType:1}),r>3&&b.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${y};${p};${m};${g}`,inputDependencies:e.map((w,k)=>"type")},getShaderSource:_,getRunData:()=>({outputs:b,dispatchGroup:{x:Math.ceil(l/c)},programUniforms:v})}},moe=(e,t)=>{x9(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(b9(e.inputs,t,e.outputCount,!1),{outputs:r})}}),w9,Bg,k9,TE,T9,M9,goe,voe,C7e=Ze(()=>{Lt(),Zt(),Dn(),Jt(),w9=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},Bg=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},k9=(e,t)=>{if(e.length>1){let r=Bg(e,1),n=Bg(e,2),i=Bg(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),Ar({starts:r,ends:n,axes:i})}else return t},TE=(e,t,r,n,i)=>{let s=e;return e<0&&(s+=r[n[t]]),i[t]<0?Math.max(0,Math.min(s,r[n[t]]-1)):Math.max(0,Math.min(s,r[n[t]]))},T9=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${Mt("uniforms.input_shape","i",r.length)};
            let steps_i = ${Mt("uniforms.steps","i",r.length)};
            let signs_i = ${Mt("uniforms.signs","i",r.length)};
            let starts_i = ${Mt("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,M9=(e,t)=>{let r=e[0].dims,n=Ie.size(r),i=t.axes.length>0?Ie.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],s=Bg(e,4);s.forEach(y=>y!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(i.length).fill(1));let a=t.starts.map((y,v)=>TE(y,v,r,i,s)),o=t.ends.map((y,v)=>TE(y,v,r,i,s));if(i.length!==a.length||i.length!==o.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let y=0;y<r.length;++y)i.includes(y)||(a.splice(y,0,0),o.splice(y,0,r[y]),s.splice(y,0,1));let l=s.map(y=>Math.sign(y));s.forEach((y,v,_)=>{if(y<0){let b=(o[v]-a[v])/y,w=a[v],k=w+b*s[v];a[v]=k,o[v]=w,_[v]=-y}});let c=r.slice(0);i.forEach((y,v)=>{c[y]=Math.ceil((o[y]-a[y])/s[y])});let f={dims:c,dataType:e[0].dataType},d=bt("output",e[0].dataType,c.length),h=Be("input",e[0].dataType,e[0].dims.length),p=Ie.size(c),m=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:s.length}],g=[{type:12,data:p},{type:12,data:a},{type:6,data:l},{type:12,data:s},...Pt(e[0].dims,c)],x=y=>`
      ${y.registerUniforms(m).declareVariables(h,d)}
        ${T9(h,d,r)}
        ${y.mainStart()}
          ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${d.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${d.setByOffset("global_idx",h.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${a.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:x,getRunData:()=>({outputs:[f],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:g})}},goe=(e,t)=>{w9(e.inputs,t);let r=k9(e.inputs,t);e.compute(M9(e.inputs,r),{inputs:[0]})},voe=e=>{let t=e.starts,r=e.ends,n=e.axes;return Ar({starts:t,ends:r,axes:n})}}),S9,P9,yoe,_oe,A7e=Ze(()=>{Lt(),Zt(),Dn(),Lu(),Jt(),S9=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},P9=(e,t)=>{let r=e.inputs[0],n=r.dims,i=Ie.size(n),s=n.length,a=Ie.normalizeAxis(t.axis,s),o=a<n.length-1,l,c=[];o?(c=Array.from({length:s},(T,M)=>M),c[a]=s-1,c[s-1]=a,l=e.compute(pa(r,c),{inputs:[r],outputs:[-1]})[0]):l=r;let f=l.dims,d=f[s-1],h=i/d,p=Pn(d),m=d/p,g=64;h===1&&(g=256);let x=(T,M)=>M===4?`max(max(${T}.x, ${T}.y), max(${T}.z, ${T}.w))`:M===2?`max(${T}.x, ${T}.y)`:M===3?`max(max(${T}.x, ${T}.y), ${T}.z)`:T,y=Be("x",l.dataType,l.dims,p),v=bt("result",l.dataType,l.dims,p),_=y.type.value,b=wi(l.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,w=T=>`
      var<workgroup> rowMaxShared : ${_};
      var<workgroup> rowSumShared : ${_};
      var<workgroup> threadShared : array<${_}, ${g}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${T.registerUniform("packedCols","i32").declareVariables(y,v)}
      ${T.mainStart(g)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${g};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${b}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${_}(${x("threadShared[0]",p)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${_}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${_}(${ku("threadShared[0]",p)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,k=e.compute({name:"Softmax",shaderCache:{hint:`${p};${g}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:f,dataType:l.dataType}],dispatchGroup:{x:h},programUniforms:[{type:6,data:m}]}),getShaderSource:w},{inputs:[l],outputs:[o?-1:0]})[0];o&&e.compute(pa(k,c),{inputs:[k]})},yoe=(e,t)=>{S9(e.inputs),P9(e,t)},_oe=e=>Ar({axis:e.axis})}),ME,E9,j9,C9,xoe,O7e=Ze(()=>{Lt(),Zt(),Jt(),ME=e=>Array.from(e.getBigInt64Array(),Number),E9=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(ME(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},j9=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},C9=(e,t)=>{let r=e[0].dims,n=t??ME(e[1]),i=j9(r,n),s=Ie.size(i),a=e[0].dataType,o=Be("input",a,r.length),l=bt("output",a,i.length),c=f=>`
      const inputShape = ${o.indices(...r)};
      ${f.registerUniform("output_size","u32").declareVariables(o,l)}
      ${f.mainStart()}
      ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${o.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${o.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${o.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",o.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},...Pt(e[0].dims,i)]}),getShaderSource:c}},xoe=e=>{E9(e.inputs),e.compute(C9(e.inputs),{inputs:[0]})}}),A9,O9,boe,$7e=Ze(()=>{Lt(),Zt(),Jt(),A9=(e,t,r,n,i)=>{let s=bt("output_data",i,r.length,4),a=Be("a_data",t[1].dataType,t[1].dims.length,4),o=Be("b_data",t[2].dataType,t[2].dims.length,4),l=Be("c_data",t[0].dataType,t[0].dims.length,4),c,f=(d,h,p)=>`select(${h}, ${d}, ${p})`;if(!n)c=s.setByOffset("global_idx",f(a.getByOffset("global_idx"),o.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let d=(h,p,m="")=>{let g=`a_data[index_a${p}][component_a${p}]`,x=`b_data[index_b${p}][component_b${p}]`,y=`bool(c_data[index_c${p}] & (0xffu << (component_c${p} * 8)))`;return`
            let output_indices${p} = ${s.offsetToIndices(`global_idx * 4u + ${p}u`)};
            let offset_a${p} = ${a.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_b${p} = ${o.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_c${p} = ${l.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let index_a${p} = offset_a${p} / 4u;
            let index_b${p} = offset_b${p} / 4u;
            let index_c${p} = offset_c${p} / 4u;
            let component_a${p} = offset_a${p} % 4u;
            let component_b${p} = offset_b${p} % 4u;
            let component_c${p} = offset_c${p} % 4u;
            ${h}[${p}] = ${m}(${f(g,x,y)});
          `};i===9?c=`
            var data = vec4<u32>(0);
            ${d("data",0,"u32")}
            ${d("data",1,"u32")}
            ${d("data",2,"u32")}
            ${d("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:c=`
            ${d("output_data[global_idx]",0)}
            ${d("output_data[global_idx]",1)}
            ${d("output_data[global_idx]",2)}
            ${d("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,a,o,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${c}
      }`},O9=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,i=e[1].dataType,s=!(Ie.areEqual(t,r)&&Ie.areEqual(r,n)),a=t,o=Ie.size(t);if(s){let c=tm.calcShape(tm.calcShape(t,r,!1),n,!1);if(!c)throw new Error("Can't perform where op on the given tensors");a=c,o=Ie.size(a)}let l=Math.ceil(o/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:c=>A9(c,e,a,s,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(o/64/4)},programUniforms:[{type:12,data:l},...Pt(n,t,r,a)]})}},boe=e=>{e.compute(O9(e.inputs))}}),woe,N7e=Ze(()=>{qKe(),xI(),XKe(),YKe(),QKe(),ZKe(),JKe(),i7e(),a7e(),o7e(),l7e(),c7e(),u7e(),d7e(),f7e(),h7e(),p7e(),m7e(),g7e(),v7e(),y7e(),_7e(),x7e(),b7e(),w7e(),zae(),k7e(),T7e(),M7e(),S7e(),P7e(),_I(),E7e(),Hae(),j7e(),C7e(),A7e(),Wae(),O7e(),Lu(),bI(),$7e(),woe=new Map([["Abs",[mse]],["Acos",[gse]],["Acosh",[vse]],["Add",[Qse]],["ArgMax",[dse,vA]],["ArgMin",[use,vA]],["Asin",[yse]],["Asinh",[_se]],["Atan",[xse]],["Atanh",[bse]],["Attention",[fse]],["AveragePool",[toe,eoe]],["BatchNormalization",[hse]],["BiasAdd",[pse]],["BiasSplitGelu",[Yse]],["Cast",[kse,wse]],["Ceil",[Mse]],["Clip",[Tse]],["Concat",[oae,lae]],["Conv",[kA,wA]],["ConvTranspose",[yae,vae]],["Cos",[Sse]],["Cosh",[Pse]],["CumSum",[_ae,xae]],["DepthToSpace",[bae,wae]],["DequantizeLinear",[loe,coe]],["Div",[Zse]],["Einsum",[kae,Tae]],["Elu",[Ese,nv]],["Equal",[Jse]],["Erf",[jse]],["Exp",[Cse]],["Expand",[Mae]],["FastGelu",[Sae]],["Floor",[Ase]],["FusedConv",[kA,wA]],["Gather",[Eae,Pae]],["GatherElements",[Nae,$ae]],["GatherBlockQuantized",[Aae,Oae]],["GatherND",[jae,Cae]],["Gelu",[Ose]],["Gemm",[Dae,Iae]],["GlobalAveragePool",[noe,roe]],["GlobalMaxPool",[ooe,aoe]],["Greater",[nae]],["GreaterOrEqual",[sae]],["GridSample",[Lae,Rae]],["GroupQueryAttention",[Kae]],["HardSigmoid",[Bse,Fse]],["InstanceNormalization",[qae]],["LayerNormalization",[Xae]],["LeakyRelu",[$se,nv]],["Less",[iae]],["LessOrEqual",[aae]],["Log",[qse]],["MatMul",[Yae]],["MatMulNBits",[Qae,Zae]],["MaxPool",[ioe,soe]],["Mul",[eae]],["MultiHeadAttention",[Bae,Fae]],["Neg",[Ise]],["Not",[Nse]],["Pad",[Jae]],["Pow",[tae]],["QuickGelu",[Xse,nv]],["Range",[uoe]],["Reciprocal",[Dse]],["ReduceMin",[sse]],["ReduceMean",[ese]],["ReduceMax",[ise]],["ReduceSum",[ose]],["ReduceProd",[ase]],["ReduceL1",[tse]],["ReduceL2",[rse]],["ReduceLogSum",[cse]],["ReduceLogSumExp",[nse]],["ReduceSumSquare",[lse]],["Relu",[Lse]],["Resize",[hoe,poe]],["RotaryEmbedding",[Gae]],["ScatterND",[foe,doe]],["Sigmoid",[Rse]],["Sin",[zse]],["Sinh",[Vse]],["Slice",[goe,voe]],["SkipLayerNormalization",[moe]],["Split",[Vae,Uae]],["Sqrt",[Use]],["Softmax",[yoe,_oe]],["Sub",[rae]],["Tan",[Wse]],["Tanh",[Gse]],["ThresholdedRelu",[Kse,nv]],["Tile",[xoe]],["Transpose",[Vie,Uie]],["Where",[boe]]])}),koe,I7e=Ze(()=>{Io(),uc(),Jt(),koe=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,i){Ao(e.programInfo.name);let s=this.backend.device,a=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let o=[];for(let c of t)o.push({binding:o.length,resource:{buffer:c.buffer}});for(let c of r)o.push({binding:o.length,resource:{buffer:c.buffer}});i&&o.push({binding:o.length,resource:i});let l=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:o,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let c={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(c)}a.setPipeline(e.computePipeline),a.setBindGroup(0,l),a.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Fa(e.programInfo.name)}dispose(){}build(e,t){Ao(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(c=>{r.features.has(c.feature)&&n.push(`enable ${c.extension};`)});let i=zie(t,this.backend.device.limits),s=e.getShaderSource(i),a=`${n.join(`
`)}
${i.additionalImplementations}
${s}`,o=r.createShaderModule({code:a,label:e.name});vr("verbose",()=>`[WebGPU] ${e.name} shader code: ${a}`);let l=r.createComputePipeline({compute:{module:o,entryPoint:"main"},layout:"auto",label:e.name});return Fa(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:i.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,i=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=i&&r<=i&&n<=i)return[t,r,n];let s=t*r*n,a=Math.ceil(Math.sqrt(s));if(a>i){if(a=Math.ceil(Math.cbrt(s)),a>i)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a]}else return[a,a,1]}}}),Toe={};$m(Toe,{WebGpuBackend:()=>Moe});var $9,N9,I9,Moe,D7e=Ze(()=>{Io(),Lt(),uc(),Die(),HKe(),N7e(),I7e(),$9=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let i=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let s=e[n].dims.length;r.push(`${i};${s}`);break}case"dims":{let s=e[n].dims.join(",");r.push(`${i};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},N9=(e,t,r)=>{var i,s;let n=e.name;return(i=e.shaderCache)!=null&&i.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${$9(t,((s=e.shaderCache)==null?void 0:s.inputDependencies)??new Array(t.length).fill("dims"))}`,n},I9=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},Moe=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},i=s=>t.features.has(s)&&r.push(s)&&!0;i("chromium-experimental-timestamp-query-inside-passes")||i("timestamp-query"),i("shader-f16"),i("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new I9(t.info||await t.requestAdapterInfo()),this.gpuDataManager=Fie(this),this.programManager=new koe(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,mI(e.logLevel,!!e.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;Ao(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{var n;let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let i=0;i<t.length/2;i++){let s=r[i],a=s.kernelId,o=this.kernels.get(a),l=o.kernelType,c=o.kernelName,f=s.programName,d=s.inputTensorViews,h=s.outputTensorViews,p=t[i*2],m=t[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=p);let g=Number(p-this.queryTimeBase),x=Number(m-this.queryTimeBase);if(!Number.isSafeInteger(g)||!Number.isSafeInteger(x))throw new RangeError("incorrect timestamp range");if((n=this.env.webgpu.profiling)!=null&&n.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:d.map(y=>({dims:y.dims,dataType:Al(y.dataType)})),outputsMetadata:h.map(y=>({dims:y.dims,dataType:Al(y.dataType)})),kernelId:a,kernelType:l,kernelName:c,programName:f,startTime:g,endTime:x});else{let y="";d.forEach((_,b)=>{y+=`input[${b}]: [${_.dims}] | ${Al(_.dataType)}, `});let v="";h.forEach((_,b)=>{v+=`output[${b}]: [${_.dims}] | ${Al(_.dataType)}, `}),console.log(`[profiling] kernel "${a}|${l}|${c}|${f}" ${y}${v}execution time: ${x-g} ns`)}a_("GPU",`${f}::${p}::${m}`)}e.unmap(),this.pendingQueries.delete(e)}),Fa()}run(e,t,r,n,i,s){Ao(e.name);let a=[];for(let v=0;v<t.length;++v){let _=t[v].data;if(_===0)continue;let b=this.gpuDataManager.get(_);if(!b)throw new Error(`no GPU data for input: ${_}`);a.push(b)}let{outputs:o,dispatchGroup:l,programUniforms:c}=e.getRunData(t),f=r.length===0?o.map((v,_)=>_):r;if(f.length!==o.length)throw new Error(`Output size ${f.length} must be equal to ${o.length}.`);let d=[],h=[];for(let v=0;v<o.length;++v){if(!Number.isInteger(f[v])||f[v]<-3||f[v]>=s)throw new Error(`Invalid output index: ${f[v]}`);if(f[v]===-3)continue;let _=f[v]===-1,b=f[v]===-2,w=_||b?i(o[v].dataType,o[v].dims):n(f[v],o[v].dataType,o[v].dims);if(d.push(w),w.data===0)continue;let k=this.gpuDataManager.get(w.data);if(!k)throw new Error(`no GPU data for output: ${w.data}`);if(_&&this.temporaryData.push(k),b){let T=this.kernelPersistentData.get(this.currentKernelId);T||(T=[],this.kernelPersistentData.set(this.currentKernelId,T)),T.push(k)}h.push(k)}if(a.length!==t.length||h.length!==d.length){if(h.length===0)return Fa(e.name),d;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let p;if(c){let v=0,_=[];c.forEach(T=>{let M=typeof T.data=="number"?[T.data]:T.data;if(M.length===0)return;let j=T.type===10?2:4,C,R;T.type===10?(R=M.length>4?16:M.length>2?8:M.length*j,C=M.length>4?16:j*M.length):(R=M.length<=2?M.length*j:16,C=16),v=Math.ceil(v/R)*R,_.push(v);let I=T.type===10?8:4;v+=M.length>4?Math.ceil(M.length/I)*C:M.length*j});let b=16;v=Math.ceil(v/b)*b;let w=new ArrayBuffer(v);c.forEach((T,M)=>{let j=_[M],C=typeof T.data=="number"?[T.data]:T.data;if(T.type===6)new Int32Array(w,j,C.length).set(C);else if(T.type===12)new Uint32Array(w,j,C.length).set(C);else if(T.type===10)new Uint16Array(w,j,C.length).set(C);else if(T.type===1)new Float32Array(w,j,C.length).set(C);else throw new Error(`Unsupported uniform type: ${Al(T.type)}`)});let k=this.gpuDataManager.create(v,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(k.buffer,0,w,0,v),this.gpuDataManager.release(k.id),p={offset:0,size:v,buffer:k.buffer}}let m=this.programManager.normalizeDispatchGroupSize(l),g=m[1]===1&&m[2]===1,x=N9(e,t,g),y=this.programManager.getArtifact(x);if(y||(y=this.programManager.build(e,m),this.programManager.setArtifact(x,y),vr("info",()=>`[artifact] key: ${x}, programName: ${e.name}`)),c&&y.uniformVariablesInfo){if(c.length!==y.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${y.uniformVariablesInfo.length}, got ${c.length} in program "${y.programInfo.name}".`);for(let v=0;v<c.length;v++){let _=c[v],b=_.type,w=typeof _.data=="number"?1:_.data.length,[k,T]=y.uniformVariablesInfo[v];if(b!==k||w!==T)throw new Error(`Uniform variable ${v} mismatch: expect type ${k} with size ${T}, got type ${b} with size ${w} in program "${y.programInfo.name}".`)}}if(vr("info",()=>`[ProgramManager] run "${e.name}" (key=${x}) with ${m[0]}x${m[1]}x${m[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let v={kernelId:this.currentKernelId,programName:y.programInfo.name,inputTensorViews:t,outputTensorViews:d};this.pendingKernels.push(v),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(v)}return this.programManager.run(y,a,h,m,p),Fa(e.name),d}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let i=woe.get(e);if(!i)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:n,kernelEntry:i[0],attributes:[i[1],r]};this.kernels.set(t,s)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let i=n.kernelType,s=n.kernelName,a=n.kernelEntry,o=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${i}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,o[0]&&(o[1]=o[0](o[1]),o[0]=void 0),vr("info",()=>`[WebGPU] Start to run kernel "[${i}] ${s}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),a(t,o[1]),0}catch(c){return r.push(Promise.resolve(`[WebGPU] Kernel "[${i}] ${s}" failed. ${c}`)),1}finally{l&&r.push(this.device.popErrorScope().then(c=>c?`GPU validation error for kernel "[${i}] ${s}": ${c.message}`:null));for(let c of this.temporaryData)this.gpuDataManager.release(c.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let i=this.sessionExternalDataMapping.get(e);i||(i=new Map,this.sessionExternalDataMapping.set(e,i));let s=i.get(t),a=this.gpuDataManager.registerExternalBuffer(r,n,s);return i.set(t,[a,r]),a}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await pA(this,e,t);return gI(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){var e;this.queryType="none",(((e=this.env.webgpu.profiling)==null?void 0:e.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){vr("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){vr("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){vr("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let i=this.getComputePassEncoder(),s=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),i.setPipeline(s.computePipeline),i.setBindGroup(0,s.bindGroup),i.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),Soe={};$m(Soe,{init:()=>Poe});var Rx,D9,Poe,L7e=Ze(()=>{Lt(),uc(),Zt(),GKe(),Rx=class Eoe{constructor(t,r,n,i){this.module=t,this.dataType=r,this.data=n,this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Ie.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Ie.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Ie.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Ie.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Ie.size(t)!==Ie.size(this.dims))throw new Error("Invalid new shape");return new Eoe(this.module,this.dataType,this.data,t)}},D9=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,i=r/e.PTR_SIZE,s=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*i++,s));let a=Number(e.getValue(n*i++,s));this.outputCount=Number(e.getValue(n*i++,s)),this.customDataOffset=Number(e.getValue(n*i++,"*")),this.customDataSize=Number(e.getValue(n*i++,s));let o=[];for(let l=0;l<a;l++){let c=Number(e.getValue(n*i++,s)),f=Number(e.getValue(n*i++,"*")),d=Number(e.getValue(n*i++,s)),h=[];for(let p=0;p<d;p++)h.push(Number(e.getValue(n*i++,s)));o.push(new Rx(e,c,f,h))}this.inputs=o}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){var a;let r=((a=t==null?void 0:t.inputs)==null?void 0:a.map(o=>typeof o=="number"?this.inputs[o]:o))??this.inputs,n=(t==null?void 0:t.outputs)??[],i=(o,l,c)=>new Rx(this.module,l,this.output(o,c),c),s=(o,l)=>{let c=kd(o,l);if(!c)throw new Error(`Unsupported data type: ${o}`);let f=c>0?this.backend.gpuDataManager.create(c).id:0;return new Rx(this.module,o,f,l)};return this.backend.run(e,r,n,i,s,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,i=n===4?"i32":"i64",s=this.module.stackAlloc((1+t.length)*n);this.module.setValue(s,t.length,i);for(let a=0;a<t.length;a++)this.module.setValue(s+n*(a+1),t[a],i);return this.module._JsepOutput(this.opKernelContext,e,s)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},Poe=async(e,t,r,n)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=(D7e(),s_(Toe)).WebGpuBackend,a=new s;await a.initialize(r,n),i("webgpu",[a,o=>a.alloc(Number(o)),o=>a.free(o),(o,l,c,f=!1)=>{if(f)vr("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(o)}, dst=${Number(l)}, size=${Number(c)}`),a.memcpy(Number(o),Number(l));else{vr("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(o)}, gpuDataId=${Number(l)}, size=${Number(c)}`);let d=t.HEAPU8.subarray(Number(o>>>0),Number(o>>>0)+Number(c));a.upload(Number(l),d)}},async(o,l,c)=>{vr("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${o}, dataOffset=${l}, size=${c}`),await a.download(Number(o),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+c)>>>0))},(o,l,c)=>a.createKernel(o,Number(l),c,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),o=>a.releaseKernel(o),(o,l,c,f)=>{vr("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${c}, kernel=${o}, contextDataOffset=${l}`);let d=new D9(t,a,Number(l));return a.computeKernel(Number(o),d,f)},()=>a.captureBegin(),()=>a.captureEnd(),()=>a.replay()])}else{let s=new Rie(r);i("webnn",[s,()=>s.reserveTensorId(),a=>s.releaseTensorId(a),async(a,o,l,c,f)=>s.ensureTensor(a,o,l,c,f),(a,o)=>{s.uploadTensor(a,o)},async(a,o)=>s.downloadTensor(a,o)])}}}),L9,PI,EI,Tc,R9,SE,w1,jI,CI,PE,AI,OI,$I,joe=Ze(()=>{VKe(),UKe(),Lt(),Mf(),uI(),Oie(),L9=(e,t)=>{Kr()._OrtInit(e,t)!==0&&Rr("Can't initialize onnxruntime.")},PI=async e=>{L9(e.wasm.numThreads,v1(e.logLevel))},EI=async(e,t)=>{var r,n;(n=(r=Kr()).asyncInit)==null||n.call(r);{let i=(L7e(),s_(Soe)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let s=e.webgpu.adapter;if(s){if(typeof s.limits!="object"||typeof s.features!="object"||typeof s.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let a=e.webgpu.powerPreference;if(a!==void 0&&a!=="low-power"&&a!=="high-performance")throw new Error(`Invalid powerPreference setting: "${a}"`);let o=e.webgpu.forceFallbackAdapter;if(o!==void 0&&typeof o!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${o}"`);if(s=await navigator.gpu.requestAdapter({powerPreference:a,forceFallbackAdapter:o}),!s)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await i("webgpu",Kr(),e,s)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await i("webnn",Kr(),e)}}},Tc=new Map,R9=e=>{let t=Kr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,i,i+n)!==0&&Rr("Can't get session input/output count.");let s=n===4?"i32":"i64";return[Number(t.getValue(i,s)),Number(t.getValue(i+n,s))]}finally{t.stackRestore(r)}},SE=(e,t)=>{let r=Kr(),n=r.stackSave(),i=0;try{let s=r.PTR_SIZE,a=r.stackAlloc(2*s);r._OrtGetInputOutputMetadata(e,t,a,a+s)!==0&&Rr("Can't get session input/output metadata.");let o=Number(r.getValue(a,"*"));i=Number(r.getValue(a+s,"*"));let l=r.HEAP32[i/4];if(l===0)return[o,0];let c=r.HEAPU32[i/4+1],f=[];for(let d=0;d<c;d++){let h=Number(r.getValue(i+8+d*s,"*"));f.push(h!==0?r.UTF8ToString(h):Number(r.getValue(i+8+(d+c)*s,"*")))}return[o,l,f]}finally{r.stackRestore(n),i!==0&&r._OrtFree(i)}},w1=e=>{let t=Kr(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},jI=async(e,t)=>{var d,h,p,m;let r,n,i=Kr();Array.isArray(e)?[r,n]=e:e.buffer===i.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=w1(e);let s=0,a=0,o=0,l=[],c=[],f=[];try{if([a,l]=await Aie(t),(t==null?void 0:t.externalData)&&i.mountExternalData){let M=[];for(let j of t.externalData){let C=typeof j=="string"?j:j.path;M.push(pI(typeof j=="string"?j:j.data).then(R=>{i.mountExternalData(C,R)}))}await Promise.all(M)}for(let M of(t==null?void 0:t.executionProviders)??[])if((typeof M=="string"?M:M.name)==="webnn"){if(i.shouldTransferToMLTensor=!1,typeof M!="string"){let j=M,C=j==null?void 0:j.context,R=j==null?void 0:j.gpuDevice,I=j==null?void 0:j.deviceType,N=j==null?void 0:j.powerPreference;C?i.currentContext=C:R?i.currentContext=await i.webnnCreateMLContext(R):i.currentContext=await i.webnnCreateMLContext({deviceType:I,powerPreference:N})}else i.currentContext=await i.webnnCreateMLContext();break}s=await i._OrtCreateSession(r,n,a),(d=i.webgpuOnCreateSession)==null||d.call(i,s),s===0&&Rr("Can't create a session."),(h=i.jsepOnCreateSession)==null||h.call(i),i.currentContext&&(i.webnnRegisterMLContext(s,i.currentContext),i.currentContext=void 0,i.shouldTransferToMLTensor=!0);let[g,x]=R9(s),y=!!(t!=null&&t.enableGraphCapture),v=[],_=[],b=[],w=[],k=[];for(let M=0;M<g;M++){let[j,C,R]=SE(s,M);j===0&&Rr("Can't get an input name."),c.push(j);let I=i.UTF8ToString(j);v.push(I),b.push(C===0?{name:I,isTensor:!1}:{name:I,isTensor:!0,type:Al(C),shape:R})}for(let M=0;M<x;M++){let[j,C,R]=SE(s,M+g);j===0&&Rr("Can't get an output name."),f.push(j);let I=i.UTF8ToString(j);_.push(I),w.push(C===0?{name:I,isTensor:!1}:{name:I,isTensor:!0,type:Al(C),shape:R});{if(y&&(t==null?void 0:t.preferredOutputLocation)===void 0){k.push("gpu-buffer");continue}let N=typeof(t==null?void 0:t.preferredOutputLocation)=="string"?t.preferredOutputLocation:((p=t==null?void 0:t.preferredOutputLocation)==null?void 0:p[I])??"cpu";if(N!=="cpu"&&N!=="cpu-pinned"&&N!=="gpu-buffer"&&N!=="ml-tensor")throw new Error(`Not supported preferred output location: ${N}.`);if(y&&N!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${N}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);k.push(N)}}let T=null;return k.some(M=>M==="gpu-buffer"||M==="ml-tensor")&&(o=i._OrtCreateBinding(s),o===0&&Rr("Can't create IO binding."),T={handle:o,outputPreferredLocations:k,outputPreferredLocationsEncoded:k.map(M=>fA(M))}),Tc.set(s,[s,c,f,T,y,!1]),[s,v,_,b,w]}catch(g){throw c.forEach(x=>i._OrtFree(x)),f.forEach(x=>i._OrtFree(x)),o!==0&&i._OrtReleaseBinding(o)!==0&&Rr("Can't release IO binding."),s!==0&&i._OrtReleaseSession(s)!==0&&Rr("Can't release session."),g}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a)!==0&&Rr("Can't release session options."),l.forEach(g=>i._free(g)),(m=i.unmountExternalData)==null||m.call(i)}},CI=e=>{var l,c,f;let t=Kr(),r=Tc.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,i,s,a,o]=r;a&&(o&&t._OrtClearBoundOutputs(a.handle)!==0&&Rr("Can't clear bound outputs."),t._OrtReleaseBinding(a.handle)!==0&&Rr("Can't release IO binding.")),(l=t.jsepOnReleaseSession)==null||l.call(t,e),(c=t.webnnOnReleaseSession)==null||c.call(t,e),(f=t.webgpuOnReleaseSession)==null||f.call(t,e),i.forEach(d=>t._OrtFree(d)),s.forEach(d=>t._OrtFree(d)),t._OrtReleaseSession(n)!==0&&Rr("Can't release session."),Tc.delete(e)},PE=async(e,t,r,n,i,s,a=!1)=>{if(!e){t.push(0);return}let o=Kr(),l=o.PTR_SIZE,c=e[0],f=e[1],d=e[3],h=d,p,m;if(c==="string"&&(d==="gpu-buffer"||d==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(a&&d!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${s} when enableGraphCapture is true.`);if(d==="gpu-buffer"){let y=e[2].gpuBuffer;m=kd(uh(c),f);{let v=o.jsepRegisterBuffer;if(!v)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');p=v(n,s,y,m)}}else if(d==="ml-tensor"){let y=e[2].mlTensor;m=kd(uh(c),f);let v=o.webnnRegisterMLTensor;if(!v)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');p=v(n,y,uh(c),f)}else{let y=e[2];if(Array.isArray(y)){m=l*y.length,p=o._malloc(m),r.push(p);for(let v=0;v<y.length;v++){if(typeof y[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);o.setValue(p+v*l,vo(y[v],r),"*")}}else{let v=o.webnnIsGraphInput;if(c!=="string"&&v){let _=o.UTF8ToString(i);if(v(n,_)){let b=uh(c);m=kd(b,f),h="ml-tensor";let w=o.webnnCreateTemporaryTensor,k=o.webnnUploadTensor;if(!w||!k)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let T=await w(n,b,f);k(T,new Uint8Array(y.buffer,y.byteOffset,y.byteLength)),p=T}else m=y.byteLength,p=o._malloc(m),r.push(p),o.HEAPU8.set(new Uint8Array(y.buffer,y.byteOffset,m),p)}else m=y.byteLength,p=o._malloc(m),r.push(p),o.HEAPU8.set(new Uint8Array(y.buffer,y.byteOffset,m),p)}}let g=o.stackSave(),x=o.stackAlloc(4*f.length);try{f.forEach((v,_)=>o.setValue(x+_*l,v,l===4?"i32":"i64"));let y=o._OrtCreateTensor(uh(c),p,m,x,f.length,fA(h));y===0&&Rr(`Can't create tensor for input/output. session=${n}, index=${s}.`),t.push(y)}finally{o.stackRestore(g)}},AI=async(e,t,r,n,i,s)=>{var R,I,N,z;let a=Kr(),o=a.PTR_SIZE,l=Tc.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let c=l[0],f=l[1],d=l[2],h=l[3],p=l[4],m=l[5],g=t.length,x=n.length,y=0,v=[],_=[],b=[],w=[],k=a.stackSave(),T=a.stackAlloc(g*o),M=a.stackAlloc(g*o),j=a.stackAlloc(x*o),C=a.stackAlloc(x*o);try{[y,v]=Cie(s);for(let H=0;H<g;H++)await PE(r[H],_,w,e,f[t[H]],t[H],p);for(let H=0;H<x;H++)await PE(i[H],b,w,e,d[n[H]],g+n[H],p);for(let H=0;H<g;H++)a.setValue(T+H*o,_[H],"*"),a.setValue(M+H*o,f[t[H]],"*");for(let H=0;H<x;H++)a.setValue(j+H*o,b[H],"*"),a.setValue(C+H*o,d[n[H]],"*");if(h&&!m){let{handle:H,outputPreferredLocations:O,outputPreferredLocationsEncoded:q}=h;if(f.length!==g)throw new Error(`input count from feeds (${g}) is expected to be always equal to model's input count (${f.length}).`);for(let ee=0;ee<g;ee++){let B=t[ee];await a._OrtBindInput(H,f[B],_[ee])!==0&&Rr(`Can't bind input[${ee}] for session=${e}.`)}for(let ee=0;ee<x;ee++){let B=n[ee];(R=i[ee])!=null&&R[3]?a._OrtBindOutput(H,d[B],b[ee],0)!==0&&Rr(`Can't bind pre-allocated output[${ee}] for session=${e}.`):a._OrtBindOutput(H,d[B],0,q[B])!==0&&Rr(`Can't bind output[${ee}] to ${O[ee]} for session=${e}.`)}Tc.set(e,[c,f,d,h,p,!0])}(I=a.jsepOnRunStart)==null||I.call(a,c),(N=a.webnnOnRunStart)==null||N.call(a,c);let V;h?V=await a._OrtRunWithBinding(c,h.handle,x,j,y):V=await a._OrtRun(c,M,T,g,C,x,j,y),V!==0&&Rr("failed to call OrtRun().");let G=[];for(let H=0;H<x;H++){let O=Number(a.getValue(j+H*o,"*"));if(O===b[H]){G.push(i[H]);continue}let q=a.stackSave(),ee=a.stackAlloc(4*o),B=!1,D,K=0;try{a._OrtGetTensorData(O,ee,ee+o,ee+2*o,ee+3*o)!==0&&Rr(`Can't access output tensor data on index ${H}.`);let oe=o===4?"i32":"i64",_e=Number(a.getValue(ee,oe));K=a.getValue(ee+o,"*");let ue=a.getValue(ee+o*2,"*"),ye=Number(a.getValue(ee+o*3,oe)),$e=[];for(let te=0;te<ye;te++)$e.push(Number(a.getValue(ue+te*o,oe)));a._OrtFree(ue)!==0&&Rr("Can't free memory for tensor dims.");let Se=$e.reduce((te,re)=>te*re,1);D=Al(_e);let ge=h==null?void 0:h.outputPreferredLocations[n[H]];if(D==="string"){if(ge==="gpu-buffer"||ge==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let te=[];for(let re=0;re<Se;re++){let J=a.getValue(K+re*o,"*"),we=a.getValue(K+(re+1)*o,"*"),Ne=re===Se-1?void 0:we-J;te.push(a.UTF8ToString(J,Ne))}G.push([D,$e,te,"cpu"])}else if(ge==="gpu-buffer"&&Se>0){let te=a.jsepGetBuffer;if(!te)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let re=te(K),J=kd(_e,Se);if(J===void 0||!fI(D))throw new Error(`Unsupported data type: ${D}`);B=!0,G.push([D,$e,{gpuBuffer:re,download:a.jsepCreateDownloader(re,J,D),dispose:()=>{a._OrtReleaseTensor(O)!==0&&Rr("Can't release tensor.")}},"gpu-buffer"])}else if(ge==="ml-tensor"&&Se>0){let te=a.webnnEnsureTensor,re=a.webnnIsInt64Supported;if(!te||!re)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(kd(_e,Se)===void 0||!hI(D))throw new Error(`Unsupported data type: ${D}`);if(D==="int64"&&!re(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let J=await te(e,K,_e,$e,!1);B=!0,G.push([D,$e,{mlTensor:J,download:a.webnnCreateMLTensorDownloader(K,D),dispose:()=>{a.webnnReleaseTensorId(K),a._OrtReleaseTensor(O)}},"ml-tensor"])}else{let te=dI(D),re=new te(Se);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(a.HEAPU8.subarray(K,K+re.byteLength)),G.push([D,$e,re,"cpu"])}}finally{a.stackRestore(q),D==="string"&&K&&a._free(K),B||a._OrtReleaseTensor(O),(z=a.webnnOnRunEnd)==null||z.call(a,c)}}return h&&!p&&(a._OrtClearBoundOutputs(h.handle)!==0&&Rr("Can't clear bound outputs."),Tc.set(e,[c,f,d,h,p,!1])),G}finally{a.stackRestore(k),_.forEach(V=>a._OrtReleaseTensor(V)),b.forEach(V=>a._OrtReleaseTensor(V)),w.forEach(V=>a._free(V)),y!==0&&a._OrtReleaseRunOptions(y),v.forEach(V=>a._free(V))}},OI=e=>{let t=Kr(),r=Tc.get(e);if(!r)throw new Error("invalid session id");let n=r[0],i=t._OrtEndProfiling(n);i===0&&Rr("Can't get an profile file name."),t._OrtFree(i)},$I=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),Mc,Ns,rh,zg,Vg,Fx,EE,Bx,cd,ud,F9,Coe,Aoe,Ooe,$oe,Noe,Ioe,Doe,Loe=Ze(()=>{Io(),joe(),Mf(),lI(),Mc=()=>!!Yr.wasm.proxy&&typeof document<"u",rh=!1,zg=!1,Vg=!1,Bx=new Map,cd=(e,t)=>{let r=Bx.get(e);r?r.push(t):Bx.set(e,[t])},ud=()=>{if(rh||!zg||Vg||!Ns)throw new Error("worker not ready")},F9=e=>{switch(e.data.type){case"init-wasm":rh=!1,e.data.err?(Vg=!0,EE[1](e.data.err)):(zg=!0,EE[0]()),Fx&&(URL.revokeObjectURL(Fx),Fx=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=Bx.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},Coe=async()=>{if(!zg){if(rh)throw new Error("multiple calls to 'initWasm()' detected.");if(Vg)throw new Error("previous call to 'initWasm()' failed.");if(rh=!0,Mc())return new Promise((e,t)=>{Ns==null||Ns.terminate(),Eie().then(([r,n])=>{try{Ns=n,Ns.onerror=s=>t(s),Ns.onmessage=F9,EE=[e,t];let i={type:"init-wasm",in:Yr};!i.in.wasm.wasmPaths&&(r||dA)&&(i.in.wasm.wasmPaths={wasm:new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),Ns.postMessage(i),Fx=r}catch(i){t(i)}},t)});try{await cI(Yr.wasm),await PI(Yr),zg=!0}catch(e){throw Vg=!0,e}finally{rh=!1}}},Aoe=async e=>{if(Mc())return ud(),new Promise((t,r)=>{cd("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:Yr}};Ns.postMessage(n)});await EI(Yr,e)},Ooe=async e=>Mc()?(ud(),new Promise((t,r)=>{cd("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};Ns.postMessage(n,[e.buffer])})):w1(e),$oe=async(e,t)=>{if(Mc()){if(t!=null&&t.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ud(),new Promise((r,n)=>{cd("create",[r,n]);let i={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),Ns.postMessage(i,s)})}else return jI(e,t)},Noe=async e=>{if(Mc())return ud(),new Promise((t,r)=>{cd("release",[t,r]);let n={type:"release",in:e};Ns.postMessage(n)});CI(e)},Ioe=async(e,t,r,n,i,s)=>{if(Mc()){if(r.some(a=>a[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(a=>a))throw new Error("pre-allocated output tensor is not supported for proxy.");return ud(),new Promise((a,o)=>{cd("run",[a,o]);let l=r,c={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:s}};Ns.postMessage(c,$I(l))})}else return AI(e,t,r,n,i,s)},Doe=async e=>{if(Mc())return ud(),new Promise((t,r)=>{cd("end-profiling",[t,r]);let n={type:"end-profiling",in:e};Ns.postMessage(n)});OI(e)}}),jE,B9,Roe,R7e=Ze(()=>{Io(),Loe(),Lt(),oI(),Oie(),jE=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},B9=e=>{switch(e[3]){case"cpu":return new xo(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!fI(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=e[2];return xo.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:i})}case"ml-tensor":{let t=e[0];if(!hI(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:i}=e[2];return xo.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${e[3]}`)}},Roe=class{async fetchModelAndCopyToWasmMemory(e){return Ooe(await pI(e))}async loadModel(e,t){Ao();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await $oe(r,t),Fa()}async dispose(){return Noe(this.sessionId)}async run(e,t,r){Ao();let n=[],i=[];Object.entries(e).forEach(d=>{let h=d[0],p=d[1],m=this.inputNames.indexOf(h);if(m===-1)throw new Error(`invalid input '${h}'`);n.push(p),i.push(m)});let s=[],a=[];Object.entries(t).forEach(d=>{let h=d[0],p=d[1],m=this.outputNames.indexOf(h);if(m===-1)throw new Error(`invalid output '${h}'`);s.push(p),a.push(m)});let o=n.map((d,h)=>jE(d,()=>`input "${this.inputNames[i[h]]}"`)),l=s.map((d,h)=>d?jE(d,()=>`output "${this.outputNames[a[h]]}"`):null),c=await Ioe(this.sessionId,i,o,a,l,r),f={};for(let d=0;d<c.length;d++)f[this.outputNames[a[d]]]=s[d]??B9(c[d]);return Fa(),f}startProfiling(){}endProfiling(){Doe(this.sessionId)}}}),Foe={};$m(Foe,{OnnxruntimeWebAssemblyBackend:()=>SA,initializeFlags:()=>MA,wasmBackend:()=>Boe});var MA,SA,Boe,F7e=Ze(()=>{Io(),Loe(),R7e(),MA=()=>{(typeof Yr.wasm.initTimeout!="number"||Yr.wasm.initTimeout<0)&&(Yr.wasm.initTimeout=0);let e=Yr.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),Yr.wasm.simd=!1),typeof Yr.wasm.proxy!="boolean"&&(Yr.wasm.proxy=!1),typeof Yr.wasm.trace!="boolean"&&(Yr.wasm.trace=!1),typeof Yr.wasm.numThreads!="number"||!Number.isInteger(Yr.wasm.numThreads)||Yr.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)Yr.wasm.numThreads=1;else{let t=typeof navigator>"u"?MKe("node:os").cpus().length:navigator.hardwareConcurrency;Yr.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},SA=class{async init(e){MA(),await Coe(),await Aoe(e)}async createInferenceSessionHandler(e,t){let r=new Roe;return await r.loadModel(e,t),r}},Boe=new SA});Io();Io();Io();var B7e="1.22.0-dev.20250409-89f8206ba4",z7e=wie;{let e=(F7e(),s_(Foe)).wasmBackend;Nd("webgpu",e,5),Nd("webnn",e,5),Nd("cpu",e,10),Nd("wasm",e,10)}Object.defineProperty(Yr.versions,"web",{value:B7e,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V7e=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return aI},get TRACE(){return a_},get TRACE_FUNC_BEGIN(){return Ao},get TRACE_FUNC_END(){return Fa},get Tensor(){return xo},default:z7e,get env(){return Yr},get registerBackend(){return Nd}},Symbol.toStringTag,{value:"Module"}));var wl={},U7e={"onnxruntime-common":e=>{e.exports=bKe},"onnxruntime-web":e=>{e.exports=V7e},"?2ce3":()=>{},"?7992":()=>{},"?5af5":()=>{},"?2b25":()=>{},"?db59":()=>{},"?383f":()=>{},"?fa4b":()=>{},"./node_modules/@huggingface/jinja/dist/index.js":(e,t,r)=>{r.r(t),r.d(t,{Environment:()=>We,Interpreter:()=>ct,Template:()=>zr,parse:()=>ue,tokenize:()=>f});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),i=class{constructor(F,ce){this.value=F,this.type=ce}};function s(F){return/\w/.test(F)}function a(F){return/[0-9]/.test(F)}var o=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["~",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],l=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function c(F,ce={}){return F.endsWith(`
`)&&(F=F.slice(0,-1)),ce.lstrip_blocks&&(F=F.replace(/^[ \t]*({[#%-])/gm,"$1")),ce.trim_blocks&&(F=F.replace(/([#%-]})\n/g,"$1")),F.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}function f(F,ce={}){var ht,Dt;const Q=[],le=c(F,ce);let pe=0,Oe=0;const Ue=At=>{let Wt="";for(;At(le[pe]);){if(le[pe]==="\\"){if(++pe,pe>=le.length)throw new SyntaxError("Unexpected end of input");const pt=le[pe++],xr=l.get(pt);if(xr===void 0)throw new SyntaxError(`Unexpected escaped character: ${pt}`);Wt+=xr;continue}if(Wt+=le[pe++],pe>=le.length)throw new SyntaxError("Unexpected end of input")}return Wt};e:for(;pe<le.length;){const At=(ht=Q.at(-1))==null?void 0:ht.type;if(At===void 0||At===n.CloseStatement||At===n.CloseExpression||At===n.Comment){let pt="";for(;pe<le.length&&!(le[pe]==="{"&&(le[pe+1]==="%"||le[pe+1]==="{"||le[pe+1]==="#"));)pt+=le[pe++];if(pt.length>0){Q.push(new i(pt,n.Text));continue}}if(le[pe]==="{"&&le[pe+1]==="#"){pe+=2;let pt="";for(;le[pe]!=="#"||le[pe+1]!=="}";){if(pe+2>=le.length)throw new SyntaxError("Missing end of comment tag");pt+=le[pe++]}Q.push(new i(pt,n.Comment)),pe+=2;continue}Ue(pt=>/\s/.test(pt));const Wt=le[pe];if(Wt==="-"||Wt==="+"){const pt=(Dt=Q.at(-1))==null?void 0:Dt.type;if(pt===n.Text||pt===void 0)throw new SyntaxError(`Unexpected character: ${Wt}`);switch(pt){case n.Identifier:case n.NumericLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++pe;const xr=Ue(a);Q.push(new i(`${Wt}${xr}`,xr.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[pt,xr]of o){if(pt==="}}"&&Oe>0)continue;if(le.slice(pe,pe+pt.length)===pt){Q.push(new i(pt,xr)),xr===n.OpenExpression?Oe=0:xr===n.OpenCurlyBracket?++Oe:xr===n.CloseCurlyBracket&&--Oe,pe+=pt.length;continue e}}if(Wt==="'"||Wt==='"'){++pe;const pt=Ue(xr=>xr!==Wt);Q.push(new i(pt,n.StringLiteral)),++pe;continue}if(a(Wt)){let pt=Ue(a);if(le[pe]==="."&&a(le[pe+1])){++pe;const xr=Ue(a);pt=`${pt}.${xr}`}Q.push(new i(pt,n.NumericLiteral));continue}if(s(Wt)){const pt=Ue(s);Q.push(new i(pt,n.Identifier));continue}throw new SyntaxError(`Unexpected character: ${Wt}`)}return Q}var d=class{constructor(){de(this,"type","Statement")}},h=class extends d{constructor(ce){super();de(this,"type","Program");this.body=ce}},p=class extends d{constructor(ce,Q,le){super();de(this,"type","If");this.test=ce,this.body=Q,this.alternate=le}},m=class extends d{constructor(ce,Q,le,pe){super();de(this,"type","For");this.loopvar=ce,this.iterable=Q,this.body=le,this.defaultBlock=pe}},g=class extends d{constructor(){super(...arguments);de(this,"type","Break")}},x=class extends d{constructor(){super(...arguments);de(this,"type","Continue")}},y=class extends d{constructor(ce,Q,le){super();de(this,"type","Set");this.assignee=ce,this.value=Q,this.body=le}},v=class extends d{constructor(ce,Q,le){super();de(this,"type","Macro");this.name=ce,this.args=Q,this.body=le}},_=class extends d{constructor(ce){super();de(this,"type","Comment");this.value=ce}},b=class extends d{constructor(){super(...arguments);de(this,"type","Expression")}},w=class extends b{constructor(ce,Q,le){super();de(this,"type","MemberExpression");this.object=ce,this.property=Q,this.computed=le}},k=class extends b{constructor(ce,Q){super();de(this,"type","CallExpression");this.callee=ce,this.args=Q}},T=class extends b{constructor(ce){super();de(this,"type","Identifier");this.value=ce}},M=class extends b{constructor(ce){super();de(this,"type","Literal");this.value=ce}},j=class extends M{constructor(){super(...arguments);de(this,"type","IntegerLiteral")}},C=class extends M{constructor(){super(...arguments);de(this,"type","FloatLiteral")}},R=class extends M{constructor(){super(...arguments);de(this,"type","StringLiteral")}},I=class extends M{constructor(){super(...arguments);de(this,"type","ArrayLiteral")}},N=class extends M{constructor(){super(...arguments);de(this,"type","TupleLiteral")}},z=class extends M{constructor(){super(...arguments);de(this,"type","ObjectLiteral")}},V=class extends b{constructor(ce,Q,le){super();de(this,"type","BinaryExpression");this.operator=ce,this.left=Q,this.right=le}},G=class extends b{constructor(ce,Q){super();de(this,"type","FilterExpression");this.operand=ce,this.filter=Q}},H=class extends d{constructor(ce,Q){super();de(this,"type","FilterStatement");this.filter=ce,this.body=Q}},O=class extends b{constructor(ce,Q){super();de(this,"type","SelectExpression");this.lhs=ce,this.test=Q}},q=class extends b{constructor(ce,Q,le){super();de(this,"type","TestExpression");this.operand=ce,this.negate=Q,this.test=le}},ee=class extends b{constructor(ce,Q){super();de(this,"type","UnaryExpression");this.operator=ce,this.argument=Q}},B=class extends b{constructor(ce=void 0,Q=void 0,le=void 0){super();de(this,"type","SliceExpression");this.start=ce,this.stop=Q,this.step=le}},D=class extends b{constructor(ce,Q){super();de(this,"type","KeywordArgumentExpression");this.key=ce,this.value=Q}},K=class extends b{constructor(ce){super();de(this,"type","SpreadExpression");this.argument=ce}},oe=class extends d{constructor(ce,Q,le){super();de(this,"type","CallStatement");this.call=ce,this.callerArgs=Q,this.body=le}},_e=class extends b{constructor(ce,Q,le){super();de(this,"type","Ternary");this.condition=ce,this.trueExpr=Q,this.falseExpr=le}};function ue(F){const ce=new h([]);let Q=0;function le(Xe,Ye){const ut=F[Q++];if(!ut||ut.type!==Xe)throw new Error(`Parser Error: ${Ye}. ${ut.type} !== ${Xe}.`);return ut}function pe(Xe){if(!Dt(Xe))throw new SyntaxError(`Expected ${Xe}`);++Q}function Oe(){switch(F[Q].type){case n.Comment:return new _(F[Q++].value);case n.Text:return At();case n.OpenStatement:return Wt();case n.OpenExpression:return pt();default:throw new SyntaxError(`Unexpected token type: ${F[Q].type}`)}}function Ue(...Xe){return Q+Xe.length<=F.length&&Xe.every((Ye,ut)=>Ye===F[Q+ut].type)}function ht(...Xe){var Ye,ut,Vr;return((Ye=F[Q])==null?void 0:Ye.type)===n.OpenStatement&&((ut=F[Q+1])==null?void 0:ut.type)===n.Identifier&&Xe.includes((Vr=F[Q+1])==null?void 0:Vr.value)}function Dt(...Xe){return Q+Xe.length<=F.length&&Xe.every((Ye,ut)=>F[Q+ut].type==="Identifier"&&Ye===F[Q+ut].value)}function At(){return new R(le(n.Text,"Expected text token").value)}function Wt(){if(le(n.OpenStatement,"Expected opening statement token"),F[Q].type!==n.Identifier)throw new SyntaxError(`Unknown statement, got ${F[Q].type}`);const Xe=F[Q].value;let Ye;switch(Xe){case"set":++Q,Ye=xr();break;case"if":++Q,Ye=Pr(),le(n.OpenStatement,"Expected {% token"),pe("endif"),le(n.CloseStatement,"Expected %} token");break;case"macro":++Q,Ye=zi(),le(n.OpenStatement,"Expected {% token"),pe("endmacro"),le(n.CloseStatement,"Expected %} token");break;case"for":++Q,Ye=fn(),le(n.OpenStatement,"Expected {% token"),pe("endfor"),le(n.CloseStatement,"Expected %} token");break;case"call":{++Q;let ut=null;Ue(n.OpenParen)&&(ut=As());const Vr=Gi();if(Vr.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const pl=As();le(n.CloseStatement,"Expected closing statement token");const qa=[];for(;!ht("endcall");)qa.push(Oe());le(n.OpenStatement,"Expected '{%'"),pe("endcall"),le(n.CloseStatement,"Expected closing statement token");const ml=new k(Vr,pl);Ye=new oe(ml,ut,qa);break}case"break":++Q,le(n.CloseStatement,"Expected closing statement token"),Ye=new g;break;case"continue":++Q,le(n.CloseStatement,"Expected closing statement token"),Ye=new x;break;case"filter":{++Q;let ut=Gi();ut instanceof T&&Ue(n.OpenParen)&&(ut=Wi(ut)),le(n.CloseStatement,"Expected closing statement token");const Vr=[];for(;!ht("endfilter");)Vr.push(Oe());le(n.OpenStatement,"Expected '{%'"),pe("endfilter"),le(n.CloseStatement,"Expected '%}'"),Ye=new H(ut,Vr);break}default:throw new SyntaxError(`Unknown statement type: ${Xe}`)}return Ye}function pt(){le(n.OpenExpression,"Expected opening expression token");const Xe=ui();return le(n.CloseExpression,"Expected closing expression token"),Xe}function xr(){const Xe=cs();let Ye=null;const ut=[];if(Ue(n.Equals))++Q,Ye=cs();else{for(le(n.CloseStatement,"Expected %} token");!ht("endset");)ut.push(Oe());le(n.OpenStatement,"Expected {% token"),pe("endset")}return le(n.CloseStatement,"Expected closing statement token"),new y(Xe,Ye,ut)}function Pr(){const Xe=ui();le(n.CloseStatement,"Expected closing statement token");const Ye=[],ut=[];for(;!ht("elif","else","endif");)Ye.push(Oe());if(ht("elif")){++Q,++Q;const Vr=Pr();ut.push(Vr)}else if(ht("else"))for(++Q,++Q,le(n.CloseStatement,"Expected closing statement token");!ht("endif");)ut.push(Oe());return new p(Xe,Ye,ut)}function zi(){const Xe=Gi();if(Xe.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Ye=As();le(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!ht("endmacro");)ut.push(Oe());return new v(Xe,Ye,ut)}function cs(Xe=!1){const Ye=Xe?Gi:ui,ut=[Ye()],Vr=Ue(n.Comma);for(;Vr&&(++Q,ut.push(Ye()),!!Ue(n.Comma)););return Vr?new N(ut):ut[0]}function fn(){const Xe=cs(!0);if(!(Xe instanceof T||Xe instanceof N))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Xe.type} instead`);if(!Dt("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++Q;const Ye=ui();le(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!ht("endfor","else");)ut.push(Oe());const Vr=[];if(ht("else"))for(++Q,++Q,le(n.CloseStatement,"Expected closing statement token");!ht("endfor");)Vr.push(Oe());return new m(Xe,Ye,ut,Vr)}function ui(){return di()}function di(){const Xe=Vi();if(Dt("if")){++Q;const Ye=Vi();if(Dt("else")){++Q;const ut=di();return new _e(Ye,Xe,ut)}else return new O(Xe,Ye)}return Xe}function Vi(){let Xe=_a();for(;Dt("or");){const Ye=F[Q];++Q;const ut=_a();Xe=new V(Ye,Xe,ut)}return Xe}function _a(){let Xe=fi();for(;Dt("and");){const Ye=F[Q];++Q;const ut=fi();Xe=new V(Ye,Xe,ut)}return Xe}function fi(){let Xe;for(;Dt("not");){const Ye=F[Q];++Q;const ut=fi();Xe=new ee(Ye,ut)}return Xe??Fo()}function Fo(){let Xe=Bo();for(;;){let Ye;if(Dt("not","in"))Ye=new i("not in",n.Identifier),Q+=2;else if(Dt("in"))Ye=F[Q++];else if(Ue(n.ComparisonBinaryOperator))Ye=F[Q++];else break;const ut=Bo();Xe=new V(Ye,Xe,ut)}return Xe}function Bo(){let Xe=Wn();for(;Ue(n.AdditiveBinaryOperator);){const Ye=F[Q];++Q;const ut=Wn();Xe=new V(Ye,Xe,ut)}return Xe}function Ui(){const Xe=Ln(Gi());return Ue(n.OpenParen)?Wi(Xe):Xe}function Wi(Xe){let Ye=new k(Xe,As());return Ye=Ln(Ye),Ue(n.OpenParen)&&(Ye=Wi(Ye)),Ye}function As(){le(n.OpenParen,"Expected opening parenthesis for arguments list");const Xe=Mi();return le(n.CloseParen,"Expected closing parenthesis for arguments list"),Xe}function Mi(){const Xe=[];for(;!Ue(n.CloseParen);){let Ye;if(F[Q].type===n.MultiplicativeBinaryOperator&&F[Q].value==="*"){++Q;const ut=ui();Ye=new K(ut)}else if(Ye=ui(),Ue(n.Equals)){if(++Q,!(Ye instanceof T))throw new SyntaxError("Expected identifier for keyword argument");const ut=ui();Ye=new D(Ye,ut)}Xe.push(Ye),Ue(n.Comma)&&++Q}return Xe}function Ka(){const Xe=[];let Ye=!1;for(;!Ue(n.CloseSquareBracket);)Ue(n.Colon)?(Xe.push(void 0),++Q,Ye=!0):(Xe.push(ui()),Ue(n.Colon)&&(++Q,Ye=!0));if(Xe.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ye){if(Xe.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new B(...Xe)}return Xe[0]}function Ln(Xe){for(;Ue(n.Dot)||Ue(n.OpenSquareBracket);){const Ye=F[Q];++Q;let ut;const Vr=Ye.type===n.OpenSquareBracket;if(Vr)ut=Ka(),le(n.CloseSquareBracket,"Expected closing square bracket");else if(ut=Gi(),ut.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Xe=new w(Xe,ut,Vr)}return Xe}function Wn(){let Xe=us();for(;Ue(n.MultiplicativeBinaryOperator);){const Ye=F[Q++],ut=us();Xe=new V(Ye,Xe,ut)}return Xe}function us(){let Xe=hl();for(;Dt("is");){++Q;const Ye=Dt("not");Ye&&++Q;const ut=Gi();if(!(ut instanceof T))throw new SyntaxError("Expected identifier for the test");Xe=new q(Xe,Ye,ut)}return Xe}function hl(){let Xe=Ui();for(;Ue(n.Pipe);){++Q;let Ye=Gi();if(!(Ye instanceof T))throw new SyntaxError("Expected identifier for the filter");Ue(n.OpenParen)&&(Ye=Wi(Ye)),Xe=new G(Xe,Ye)}return Xe}function Gi(){const Xe=F[Q++];switch(Xe.type){case n.NumericLiteral:{const Ye=Xe.value;return Ye.includes(".")?new C(Number(Ye)):new j(Number(Ye))}case n.StringLiteral:{let Ye=Xe.value;for(;Ue(n.StringLiteral);)Ye+=F[Q++].value;return new R(Ye)}case n.Identifier:return new T(Xe.value);case n.OpenParen:{const Ye=cs();return le(n.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Ye}case n.OpenSquareBracket:{const Ye=[];for(;!Ue(n.CloseSquareBracket);)Ye.push(ui()),Ue(n.Comma)&&++Q;return++Q,new I(Ye)}case n.OpenCurlyBracket:{const Ye=new Map;for(;!Ue(n.CloseCurlyBracket);){const ut=ui();le(n.Colon,"Expected colon between key and value in object literal");const Vr=ui();Ye.set(ut,Vr),Ue(n.Comma)&&++Q}return++Q,new z(Ye)}default:throw new SyntaxError(`Unexpected token: ${Xe.type}`)}}for(;Q<F.length;)ce.body.push(Oe());return ce}function ye(F,ce,Q=1){ce===void 0&&(ce=F,F=0);const le=[];for(let pe=F;pe<ce;pe+=Q)le.push(pe);return le}function $e(F,ce,Q,le=1){const pe=Math.sign(le);pe>=0?(ce=(ce??(ce=0))<0?Math.max(F.length+ce,0):Math.min(ce,F.length),Q=(Q??(Q=F.length))<0?Math.max(F.length+Q,0):Math.min(Q,F.length)):(ce=(ce??(ce=F.length-1))<0?Math.max(F.length+ce,-1):Math.min(ce,F.length-1),Q=(Q??(Q=-1))<-1?Math.max(F.length+Q,-1):Math.min(Q,F.length-1));const Oe=[];for(let Ue=ce;pe*Ue<pe*Q;Ue+=le)Oe.push(F[Ue]);return Oe}function Se(F){return F.replace(/\b\w/g,ce=>ce.toUpperCase())}function ge(F){return te(new Date,F)}function te(F,ce){const Q=new Intl.DateTimeFormat(void 0,{month:"long"}),le=new Intl.DateTimeFormat(void 0,{month:"short"}),pe=Oe=>Oe<10?"0"+Oe:Oe.toString();return ce.replace(/%[YmdbBHM%]/g,Oe=>{switch(Oe){case"%Y":return F.getFullYear().toString();case"%m":return pe(F.getMonth()+1);case"%d":return pe(F.getDate());case"%b":return le.format(F);case"%B":return Q.format(F);case"%H":return pe(F.getHours());case"%M":return pe(F.getMinutes());case"%%":return"%";default:return Oe}})}function re(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function J(F,ce,Q,le){if(le===0)return F;let pe=le==null||le<0?1/0:le;const Oe=ce.length===0?new RegExp("(?=)","gu"):new RegExp(re(ce),"gu");return F.replaceAll(Oe,Ue=>pe>0?(--pe,Q):Ue)}var we=class extends Error{},Ne=class extends Error{},je=class{constructor(F=void 0){de(this,"type","RuntimeValue");de(this,"value");de(this,"builtins",new Map);this.value=F}__bool__(){return new fe(!!this.value)}toString(){return String(this.value)}},Pe=class extends je{constructor(){super(...arguments);de(this,"type","IntegerValue")}},Z=class extends je{constructor(){super(...arguments);de(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},ne=class extends je{constructor(){super(...arguments);de(this,"type","StringValue");de(this,"builtins",new Map([["upper",new ze(()=>new ne(this.value.toUpperCase()))],["lower",new ze(()=>new ne(this.value.toLowerCase()))],["strip",new ze(()=>new ne(this.value.trim()))],["title",new ze(()=>new ne(Se(this.value)))],["capitalize",new ze(()=>new ne(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new Pe(this.value.length)],["rstrip",new ze(()=>new ne(this.value.trimEnd()))],["lstrip",new ze(()=>new ne(this.value.trimStart()))],["startswith",new ze(ce=>{if(ce.length===0)throw new Error("startswith() requires at least one argument");const Q=ce[0];if(Q instanceof ne)return new fe(this.value.startsWith(Q.value));if(Q instanceof me){for(const le of Q.value){if(!(le instanceof ne))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(le.value))return new fe(!0)}return new fe(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new ze(ce=>{if(ce.length===0)throw new Error("endswith() requires at least one argument");const Q=ce[0];if(Q instanceof ne)return new fe(this.value.endsWith(Q.value));if(Q instanceof me){for(const le of Q.value){if(!(le instanceof ne))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(le.value))return new fe(!0)}return new fe(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new ze(ce=>{const Q=ce[0]??new Je;if(!(Q instanceof ne||Q instanceof Je))throw new Error("sep argument must be a string or null");const le=ce[1]??new Pe(-1);if(!(le instanceof Pe))throw new Error("maxsplit argument must be a number");let pe=[];if(Q instanceof Je){const Oe=this.value.trimStart();for(const{0:Ue,index:ht}of Oe.matchAll(/\S+/g)){if(le.value!==-1&&pe.length>=le.value&&ht!==void 0){pe.push(Ue+Oe.slice(ht+Ue.length));break}pe.push(Ue)}}else{if(Q.value==="")throw new Error("empty separator");pe=this.value.split(Q.value),le.value!==-1&&pe.length>le.value&&pe.push(pe.splice(le.value).join(Q.value))}return new me(pe.map(Oe=>new ne(Oe)))})],["replace",new ze(ce=>{if(ce.length<2)throw new Error("replace() requires at least two arguments");const Q=ce[0],le=ce[1];if(!(Q instanceof ne&&le instanceof ne))throw new Error("replace() arguments must be strings");let pe;if(ce.length>2?ce[2].type==="KeywordArgumentsValue"?pe=ce[2].value.get("count")??new Je:pe=ce[2]:pe=new Je,!(pe instanceof Pe||pe instanceof Je))throw new Error("replace() count argument must be a number or null");return new ne(J(this.value,Q.value,le.value,pe.value))})]]))}},fe=class extends je{constructor(){super(...arguments);de(this,"type","BooleanValue")}},Me=class extends je{constructor(){super(...arguments);de(this,"type","ObjectValue");de(this,"builtins",new Map([["get",new ze(([ce,Q])=>{if(!(ce instanceof ne))throw new Error(`Object key must be a string: got ${ce.type}`);return this.value.get(ce.value)??Q??new Je})],["items",new ze(()=>this.items())],["keys",new ze(()=>this.keys())],["values",new ze(()=>this.values())]]))}__bool__(){return new fe(this.value.size>0)}items(){return new me(Array.from(this.value.entries()).map(([ce,Q])=>new me([new ne(ce),Q])))}keys(){return new me(Array.from(this.value.keys()).map(ce=>new ne(ce)))}values(){return new me(Array.from(this.value.values()))}},Ce=class extends Me{constructor(){super(...arguments);de(this,"type","KeywordArgumentsValue")}},me=class extends je{constructor(){super(...arguments);de(this,"type","ArrayValue");de(this,"builtins",new Map([["length",new Pe(this.value.length)]]))}__bool__(){return new fe(this.value.length>0)}},Fe=class extends me{constructor(){super(...arguments);de(this,"type","TupleValue")}},ze=class extends je{constructor(){super(...arguments);de(this,"type","FunctionValue")}},Je=class extends je{constructor(){super(...arguments);de(this,"type","NullValue")}},He=class extends je{constructor(){super(...arguments);de(this,"type","UndefinedValue")}},We=class{constructor(F){de(this,"variables",new Map([["namespace",new ze(F=>{if(F.length===0)return new Me(new Map);if(F.length!==1||!(F[0]instanceof Me))throw new Error("`namespace` expects either zero arguments or a single object argument");return F[0]})]]));de(this,"tests",new Map([["boolean",F=>F.type==="BooleanValue"],["callable",F=>F instanceof ze],["odd",F=>{if(!(F instanceof Pe))throw new Error(`cannot odd on ${F.type}`);return F.value%2!==0}],["even",F=>{if(!(F instanceof Pe))throw new Error(`cannot even on ${F.type}`);return F.value%2===0}],["false",F=>F.type==="BooleanValue"&&!F.value],["true",F=>F.type==="BooleanValue"&&F.value],["none",F=>F.type==="NullValue"],["string",F=>F.type==="StringValue"],["number",F=>F instanceof Pe||F instanceof Z],["integer",F=>F instanceof Pe],["iterable",F=>F.type==="ArrayValue"||F.type==="StringValue"],["mapping",F=>F.type==="ObjectValue"],["lower",F=>{const ce=F.value;return F.type==="StringValue"&&ce===ce.toLowerCase()}],["upper",F=>{const ce=F.value;return F.type==="StringValue"&&ce===ce.toUpperCase()}],["none",F=>F.type==="NullValue"],["defined",F=>F.type!=="UndefinedValue"],["undefined",F=>F.type==="UndefinedValue"],["equalto",(F,ce)=>F.value===ce.value],["eq",(F,ce)=>F.value===ce.value]]));this.parent=F}set(F,ce){return this.declareVariable(F,Ht(ce))}declareVariable(F,ce){if(this.variables.has(F))throw new SyntaxError(`Variable already declared: ${F}`);return this.variables.set(F,ce),ce}setVariable(F,ce){return this.variables.set(F,ce),ce}resolve(F){if(this.variables.has(F))return this;if(this.parent)return this.parent.resolve(F);throw new Error(`Unknown variable: ${F}`)}lookupVariable(F){try{return this.resolve(F).variables.get(F)??new He}catch{return new He}}};function nt(F){F.set("false",!1),F.set("true",!0),F.set("none",null),F.set("raise_exception",ce=>{throw new Error(ce)}),F.set("range",ye),F.set("strftime_now",ge),F.set("True",!0),F.set("False",!1),F.set("None",null)}var ct=class{constructor(F){de(this,"global");this.global=F??new We}run(F){return this.evaluate(F,this.global)}evaluateBinaryExpression(F,ce){const Q=this.evaluate(F.left,ce);switch(F.operator.value){case"and":return Q.__bool__().value?this.evaluate(F.right,ce):Q;case"or":return Q.__bool__().value?Q:this.evaluate(F.right,ce)}const le=this.evaluate(F.right,ce);switch(F.operator.value){case"==":return new fe(Q.value==le.value);case"!=":return new fe(Q.value!=le.value)}if(Q instanceof He||le instanceof He){if(le instanceof He&&["in","not in"].includes(F.operator.value))return new fe(F.operator.value==="not in");throw new Error(`Cannot perform operation ${F.operator.value} on undefined values`)}else{if(Q instanceof Je||le instanceof Je)throw new Error("Cannot perform operation on null values");if(F.operator.value==="~")return new ne(Q.value.toString()+le.value.toString());if((Q instanceof Pe||Q instanceof Z)&&(le instanceof Pe||le instanceof Z)){const pe=Q.value,Oe=le.value;switch(F.operator.value){case"+":case"-":case"*":{const Ue=F.operator.value==="+"?pe+Oe:F.operator.value==="-"?pe-Oe:pe*Oe;return Q instanceof Z||le instanceof Z?new Z(Ue):new Pe(Ue)}case"/":return new Z(pe/Oe);case"%":{const Ue=pe%Oe;return Q instanceof Z||le instanceof Z?new Z(Ue):new Pe(Ue)}case"<":return new fe(pe<Oe);case">":return new fe(pe>Oe);case">=":return new fe(pe>=Oe);case"<=":return new fe(pe<=Oe)}}else if(Q instanceof me&&le instanceof me)switch(F.operator.value){case"+":return new me(Q.value.concat(le.value))}else if(le instanceof me){const pe=le.value.find(Oe=>Oe.value===Q.value)!==void 0;switch(F.operator.value){case"in":return new fe(pe);case"not in":return new fe(!pe)}}}if(Q instanceof ne||le instanceof ne)switch(F.operator.value){case"+":return new ne(Q.value.toString()+le.value.toString())}if(Q instanceof ne&&le instanceof ne)switch(F.operator.value){case"in":return new fe(le.value.includes(Q.value));case"not in":return new fe(!le.value.includes(Q.value))}if(Q instanceof ne&&le instanceof Me)switch(F.operator.value){case"in":return new fe(le.value.has(Q.value));case"not in":return new fe(!le.value.has(Q.value))}throw new SyntaxError(`Unknown operator "${F.operator.value}" between ${Q.type} and ${le.type}`)}evaluateArguments(F,ce){const Q=[],le=new Map;for(const pe of F)if(pe.type==="SpreadExpression"){const Oe=pe,Ue=this.evaluate(Oe.argument,ce);if(!(Ue instanceof me))throw new Error(`Cannot unpack non-iterable type: ${Ue.type}`);for(const ht of Ue.value)Q.push(ht)}else if(pe.type==="KeywordArgumentExpression"){const Oe=pe;le.set(Oe.key.value,this.evaluate(Oe.value,ce))}else{if(le.size>0)throw new Error("Positional arguments must come before keyword arguments");Q.push(this.evaluate(pe,ce))}return[Q,le]}applyFilter(F,ce,Q){if(ce.type==="Identifier"){const le=ce;if(le.value==="tojson")return new ne(Ut(F));if(F instanceof me)switch(le.value){case"list":return F;case"first":return F.value[0];case"last":return F.value[F.value.length-1];case"length":return new Pe(F.value.length);case"reverse":return new me(F.value.reverse());case"sort":return new me(F.value.sort((pe,Oe)=>{if(pe.type!==Oe.type)throw new Error(`Cannot compare different types: ${pe.type} and ${Oe.type}`);switch(pe.type){case"IntegerValue":case"FloatValue":return pe.value-Oe.value;case"StringValue":return pe.value.localeCompare(Oe.value);default:throw new Error(`Cannot compare type: ${pe.type}`)}}));case"join":return new ne(F.value.map(pe=>pe.value).join(""));case"string":return new ne(Ut(F));case"unique":{const pe=new Set,Oe=[];for(const Ue of F.value)pe.has(Ue.value)||(pe.add(Ue.value),Oe.push(Ue));return new me(Oe)}default:throw new Error(`Unknown ArrayValue filter: ${le.value}`)}else if(F instanceof ne)switch(le.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const pe=F.builtins.get(le.value);if(pe instanceof ze)return pe.value([],Q);if(pe instanceof Pe)return pe;throw new Error(`Unknown StringValue filter: ${le.value}`)}case"trim":return new ne(F.value.trim());case"indent":return new ne(F.value.split(`
`).map((pe,Oe)=>Oe===0||pe.length===0?pe:"    "+pe).join(`
`));case"join":case"string":return F;case"int":{const pe=parseInt(F.value,10);return new Pe(isNaN(pe)?0:pe)}case"float":{const pe=parseFloat(F.value);return new Z(isNaN(pe)?0:pe)}default:throw new Error(`Unknown StringValue filter: ${le.value}`)}else if(F instanceof Pe||F instanceof Z)switch(le.value){case"abs":return F instanceof Pe?new Pe(Math.abs(F.value)):new Z(Math.abs(F.value));case"int":return new Pe(Math.floor(F.value));case"float":return new Z(F.value);default:throw new Error(`Unknown NumericValue filter: ${le.value}`)}else if(F instanceof Me)switch(le.value){case"items":return new me(Array.from(F.value.entries()).map(([pe,Oe])=>new me([new ne(pe),Oe])));case"length":return new Pe(F.value.size);default:throw new Error(`Unknown ObjectValue filter: ${le.value}`)}else if(F instanceof fe)switch(le.value){case"bool":return new fe(F.value);case"int":return new Pe(F.value?1:0);case"float":return new Z(F.value?1:0);case"string":return new ne(F.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${le.value}`)}throw new Error(`Cannot apply filter "${le.value}" to type: ${F.type}`)}else if(ce.type==="CallExpression"){const le=ce;if(le.callee.type!=="Identifier")throw new Error(`Unknown filter: ${le.callee.type}`);const pe=le.callee.value;if(pe==="tojson"){const[,Oe]=this.evaluateArguments(le.args,Q),Ue=Oe.get("indent")??new Je;if(!(Ue instanceof Pe||Ue instanceof Je))throw new Error("If set, indent must be a number");return new ne(Ut(F,Ue.value))}else if(pe==="join"){let Oe;if(F instanceof ne)Oe=Array.from(F.value);else if(F instanceof me)Oe=F.value.map(At=>At.value);else throw new Error(`Cannot apply filter "${pe}" to type: ${F.type}`);const[Ue,ht]=this.evaluateArguments(le.args,Q),Dt=Ue.at(0)??ht.get("separator")??new ne("");if(!(Dt instanceof ne))throw new Error("separator must be a string");return new ne(Oe.join(Dt.value))}else if(pe==="int"||pe==="float"){const[Oe,Ue]=this.evaluateArguments(le.args,Q),ht=Oe.at(0)??Ue.get("default")??(pe==="int"?new Pe(0):new Z(0));if(F instanceof ne){const Dt=pe==="int"?parseInt(F.value,10):parseFloat(F.value);return isNaN(Dt)?ht:pe==="int"?new Pe(Dt):new Z(Dt)}else{if(F instanceof Pe||F instanceof Z)return F;if(F instanceof fe)return pe==="int"?new Pe(F.value?1:0):new Z(F.value?1:0);throw new Error(`Cannot apply filter "${pe}" to type: ${F.type}`)}}else if(pe==="default"){const[Oe,Ue]=this.evaluateArguments(le.args,Q),ht=Oe[0]??new ne(""),Dt=Oe[1]??Ue.get("boolean")??new fe(!1);if(!(Dt instanceof fe))throw new Error("`default` filter flag must be a boolean");return F instanceof He||Dt.value&&!F.__bool__().value?ht:F}if(F instanceof me){switch(pe){case"selectattr":case"rejectattr":{const Oe=pe==="selectattr";if(F.value.some(pt=>!(pt instanceof Me)))throw new Error(`\`${pe}\` can only be applied to array of objects`);if(le.args.some(pt=>pt.type!=="StringLiteral"))throw new Error(`arguments of \`${pe}\` must be strings`);const[Ue,ht,Dt]=le.args.map(pt=>this.evaluate(pt,Q));let At;if(ht){const pt=Q.tests.get(ht.value);if(!pt)throw new Error(`Unknown test: ${ht.value}`);At=pt}else At=(...pt)=>pt[0].__bool__().value;const Wt=F.value.filter(pt=>{const xr=pt.value.get(Ue.value),Pr=xr?At(xr,Dt):!1;return Oe?Pr:!Pr});return new me(Wt)}case"map":{const[,Oe]=this.evaluateArguments(le.args,Q);if(Oe.has("attribute")){const Ue=Oe.get("attribute");if(!(Ue instanceof ne))throw new Error("attribute must be a string");const ht=Oe.get("default"),Dt=F.value.map(At=>{if(!(At instanceof Me))throw new Error("items in map must be an object");return At.value.get(Ue.value)??ht??new He});return new me(Dt)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${pe}`)}else if(F instanceof ne){switch(pe){case"indent":{const[Oe,Ue]=this.evaluateArguments(le.args,Q),ht=Oe.at(0)??Ue.get("width")??new Pe(4);if(!(ht instanceof Pe))throw new Error("width must be a number");const Dt=Oe.at(1)??Ue.get("first")??new fe(!1),At=Oe.at(2)??Ue.get("blank")??new fe(!1),Wt=F.value.split(`
`),pt=" ".repeat(ht.value),xr=Wt.map((Pr,zi)=>!Dt.value&&zi===0||!At.value&&Pr.length===0?Pr:pt+Pr);return new ne(xr.join(`
`))}case"replace":{const Oe=F.builtins.get("replace");if(!(Oe instanceof ze))throw new Error("replace filter not available");const[Ue,ht]=this.evaluateArguments(le.args,Q);return Oe.value([...Ue,new Ce(ht)],Q)}}throw new Error(`Unknown StringValue filter: ${pe}`)}else throw new Error(`Cannot apply filter "${pe}" to type: ${F.type}`)}throw new Error(`Unknown filter: ${ce.type}`)}evaluateFilterExpression(F,ce){const Q=this.evaluate(F.operand,ce);return this.applyFilter(Q,F.filter,ce)}evaluateTestExpression(F,ce){const Q=this.evaluate(F.operand,ce),le=ce.tests.get(F.test.value);if(!le)throw new Error(`Unknown test: ${F.test.value}`);const pe=le(Q);return new fe(F.negate?!pe:pe)}evaluateSelectExpression(F,ce){return this.evaluate(F.test,ce).__bool__().value?this.evaluate(F.lhs,ce):new He}evaluateUnaryExpression(F,ce){const Q=this.evaluate(F.argument,ce);switch(F.operator.value){case"not":return new fe(!Q.value);default:throw new SyntaxError(`Unknown operator: ${F.operator.value}`)}}evaluateTernaryExpression(F,ce){return this.evaluate(F.condition,ce).__bool__().value?this.evaluate(F.trueExpr,ce):this.evaluate(F.falseExpr,ce)}evalProgram(F,ce){return this.evaluateBlock(F.body,ce)}evaluateBlock(F,ce){let Q="";for(const le of F){const pe=this.evaluate(le,ce);pe.type!=="NullValue"&&pe.type!=="UndefinedValue"&&(Q+=pe.toString())}return new ne(Q)}evaluateIdentifier(F,ce){return ce.lookupVariable(F.value)}evaluateCallExpression(F,ce){const[Q,le]=this.evaluateArguments(F.args,ce);le.size>0&&Q.push(new Ce(le));const pe=this.evaluate(F.callee,ce);if(pe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${pe.type}`);return pe.value(Q,ce)}evaluateSliceExpression(F,ce,Q){if(!(F instanceof me||F instanceof ne))throw new Error("Slice object must be an array or string");const le=this.evaluate(ce.start,Q),pe=this.evaluate(ce.stop,Q),Oe=this.evaluate(ce.step,Q);if(!(le instanceof Pe||le instanceof He))throw new Error("Slice start must be numeric or undefined");if(!(pe instanceof Pe||pe instanceof He))throw new Error("Slice stop must be numeric or undefined");if(!(Oe instanceof Pe||Oe instanceof He))throw new Error("Slice step must be numeric or undefined");return F instanceof me?new me($e(F.value,le.value,pe.value,Oe.value)):new ne($e(Array.from(F.value),le.value,pe.value,Oe.value).join(""))}evaluateMemberExpression(F,ce){const Q=this.evaluate(F.object,ce);let le;if(F.computed){if(F.property.type==="SliceExpression")return this.evaluateSliceExpression(Q,F.property,ce);le=this.evaluate(F.property,ce)}else le=new ne(F.property.value);let pe;if(Q instanceof Me){if(!(le instanceof ne))throw new Error(`Cannot access property with non-string: got ${le.type}`);pe=Q.value.get(le.value)??Q.builtins.get(le.value)}else if(Q instanceof me||Q instanceof ne)if(le instanceof Pe)pe=Q.value.at(le.value),Q instanceof ne&&(pe=new ne(Q.value.at(le.value)));else if(le instanceof ne)pe=Q.builtins.get(le.value);else throw new Error(`Cannot access property with non-string/non-number: got ${le.type}`);else{if(!(le instanceof ne))throw new Error(`Cannot access property with non-string: got ${le.type}`);pe=Q.builtins.get(le.value)}return pe instanceof je?pe:new He}evaluateSet(F,ce){const Q=F.value?this.evaluate(F.value,ce):this.evaluateBlock(F.body,ce);if(F.assignee.type==="Identifier"){const le=F.assignee.value;ce.setVariable(le,Q)}else if(F.assignee.type==="TupleLiteral"){const le=F.assignee;if(!(Q instanceof me))throw new Error(`Cannot unpack non-iterable type in set: ${Q.type}`);const pe=Q.value;if(pe.length!==le.value.length)throw new Error(`Too ${le.value.length>pe.length?"few":"many"} items to unpack in set`);for(let Oe=0;Oe<le.value.length;++Oe){const Ue=le.value[Oe];if(Ue.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${Ue.type}`);ce.setVariable(Ue.value,pe[Oe])}}else if(F.assignee.type==="MemberExpression"){const le=F.assignee,pe=this.evaluate(le.object,ce);if(!(pe instanceof Me))throw new Error("Cannot assign to member of non-object");if(le.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");pe.value.set(le.property.value,Q)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(F.assignee)}`);return new Je}evaluateIf(F,ce){const Q=this.evaluate(F.test,ce);return this.evaluateBlock(Q.__bool__().value?F.body:F.alternate,ce)}evaluateFor(F,ce){const Q=new We(ce);let le,pe;if(F.iterable.type==="SelectExpression"){const At=F.iterable;pe=this.evaluate(At.lhs,Q),le=At.test}else pe=this.evaluate(F.iterable,Q);if(!(pe instanceof me||pe instanceof Me))throw new Error(`Expected iterable or object type in for loop: got ${pe.type}`);pe instanceof Me&&(pe=pe.keys());const Oe=[],Ue=[];for(let At=0;At<pe.value.length;++At){const Wt=new We(Q),pt=pe.value[At];let xr;if(F.loopvar.type==="Identifier")xr=Pr=>Pr.setVariable(F.loopvar.value,pt);else if(F.loopvar.type==="TupleLiteral"){const Pr=F.loopvar;if(pt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${pt.type}`);const zi=pt;if(Pr.value.length!==zi.value.length)throw new Error(`Too ${Pr.value.length>zi.value.length?"few":"many"} items to unpack`);xr=cs=>{for(let fn=0;fn<Pr.value.length;++fn){if(Pr.value[fn].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${Pr.value[fn].type}`);cs.setVariable(Pr.value[fn].value,zi.value[fn])}}}else throw new Error(`Invalid loop variable(s): ${F.loopvar.type}`);le&&(xr(Wt),!this.evaluate(le,Wt).__bool__().value)||(Oe.push(pt),Ue.push(xr))}let ht="",Dt=!0;for(let At=0;At<Oe.length;++At){const Wt=new Map([["index",new Pe(At+1)],["index0",new Pe(At)],["revindex",new Pe(Oe.length-At)],["revindex0",new Pe(Oe.length-At-1)],["first",new fe(At===0)],["last",new fe(At===Oe.length-1)],["length",new Pe(Oe.length)],["previtem",At>0?Oe[At-1]:new He],["nextitem",At<Oe.length-1?Oe[At+1]:new He]]);Q.setVariable("loop",new Me(Wt)),Ue[At](Q);try{const pt=this.evaluateBlock(F.body,Q);ht+=pt.value}catch(pt){if(pt instanceof Ne)continue;if(pt instanceof we)break;throw pt}Dt=!1}if(Dt){const At=this.evaluateBlock(F.defaultBlock,Q);ht+=At.value}return new ne(ht)}evaluateMacro(F,ce){return ce.setVariable(F.name.value,new ze((Q,le)=>{var Ue;const pe=new We(le);Q=Q.slice();let Oe;((Ue=Q.at(-1))==null?void 0:Ue.type)==="KeywordArgumentsValue"&&(Oe=Q.pop());for(let ht=0;ht<F.args.length;++ht){const Dt=F.args[ht],At=Q[ht];if(Dt.type==="Identifier"){const Wt=Dt;if(!At)throw new Error(`Missing positional argument: ${Wt.value}`);pe.setVariable(Wt.value,At)}else if(Dt.type==="KeywordArgumentExpression"){const Wt=Dt,pt=At??(Oe==null?void 0:Oe.value.get(Wt.key.value))??this.evaluate(Wt.value,pe);pe.setVariable(Wt.key.value,pt)}else throw new Error(`Unknown argument type: ${Dt.type}`)}return this.evaluateBlock(F.body,pe)})),new Je}evaluateCallStatement(F,ce){const Q=new ze((ht,Dt)=>{const At=new We(Dt);if(F.callerArgs)for(let Wt=0;Wt<F.callerArgs.length;++Wt){const pt=F.callerArgs[Wt];if(pt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${pt.type}`);At.setVariable(pt.value,ht[Wt]??new He)}return this.evaluateBlock(F.body,At)}),[le,pe]=this.evaluateArguments(F.call.args,ce);le.push(new Ce(pe));const Oe=this.evaluate(F.call.callee,ce);if(Oe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Oe.type}`);const Ue=new We(ce);return Ue.setVariable("caller",Q),Oe.value(le,Ue)}evaluateFilterStatement(F,ce){const Q=this.evaluateBlock(F.body,ce);return this.applyFilter(Q,F.filter,ce)}evaluate(F,ce){if(!F)return new He;switch(F.type){case"Program":return this.evalProgram(F,ce);case"Set":return this.evaluateSet(F,ce);case"If":return this.evaluateIf(F,ce);case"For":return this.evaluateFor(F,ce);case"Macro":return this.evaluateMacro(F,ce);case"CallStatement":return this.evaluateCallStatement(F,ce);case"Break":throw new we;case"Continue":throw new Ne;case"IntegerLiteral":return new Pe(F.value);case"FloatLiteral":return new Z(F.value);case"StringLiteral":return new ne(F.value);case"ArrayLiteral":return new me(F.value.map(Q=>this.evaluate(Q,ce)));case"TupleLiteral":return new Fe(F.value.map(Q=>this.evaluate(Q,ce)));case"ObjectLiteral":{const Q=new Map;for(const[le,pe]of F.value){const Oe=this.evaluate(le,ce);if(!(Oe instanceof ne))throw new Error(`Object keys must be strings: got ${Oe.type}`);Q.set(Oe.value,this.evaluate(pe,ce))}return new Me(Q)}case"Identifier":return this.evaluateIdentifier(F,ce);case"CallExpression":return this.evaluateCallExpression(F,ce);case"MemberExpression":return this.evaluateMemberExpression(F,ce);case"UnaryExpression":return this.evaluateUnaryExpression(F,ce);case"BinaryExpression":return this.evaluateBinaryExpression(F,ce);case"FilterExpression":return this.evaluateFilterExpression(F,ce);case"FilterStatement":return this.evaluateFilterStatement(F,ce);case"TestExpression":return this.evaluateTestExpression(F,ce);case"SelectExpression":return this.evaluateSelectExpression(F,ce);case"Ternary":return this.evaluateTernaryExpression(F,ce);case"Comment":return new Je;default:throw new SyntaxError(`Unknown node type: ${F.type}`)}}};function Ht(F){switch(typeof F){case"number":return Number.isInteger(F)?new Pe(F):new Z(F);case"string":return new ne(F);case"boolean":return new fe(F);case"undefined":return new He;case"object":return F===null?new Je:Array.isArray(F)?new me(F.map(Ht)):new Me(new Map(Object.entries(F).map(([ce,Q])=>[ce,Ht(Q)])));case"function":return new ze((ce,Q)=>{const le=F(...ce.map(pe=>pe.value))??null;return Ht(le)});default:throw new Error(`Cannot convert to runtime value: ${F}`)}}function Ut(F,ce,Q){const le=Q??0;switch(F.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(F.value);case"ArrayValue":case"ObjectValue":{const pe=ce?" ".repeat(ce):"",Oe=`
`+pe.repeat(le),Ue=Oe+pe;if(F.type==="ArrayValue"){const ht=F.value.map(Dt=>Ut(Dt,ce,le+1));return ce?`[${Ue}${ht.join(`,${Ue}`)}${Oe}]`:`[${ht.join(", ")}]`}else{const ht=Array.from(F.value.entries()).map(([Dt,At])=>{const Wt=`"${Dt}": ${Ut(At,ce,le+1)}`;return ce?`${Ue}${Wt}`:Wt});return ce?`{${ht.join(",")}${Oe}}`:`{${ht.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${F.type}`)}}var $t=`
`,xn="{%- ",Zr=" -%}";function dn(F){switch(F.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return F.operator.value==="and"?1:F.operator.value==="in"||F.operator.value==="not in"?2:0}return 0}function Cs(F,ce="	"){const Q=typeof ce=="number"?" ".repeat(ce):ce;return er(F.body,0,Q).replace(/\n$/,"")}function vt(...F){return xn+F.join(" ")+Zr}function er(F,ce,Q){return F.map(le=>kr(le,ce,Q)).join($t)}function kr(F,ce,Q){const le=Q.repeat(ce);switch(F.type){case"Program":return er(F.body,ce,Q);case"If":return li(F,ce,Q);case"For":return ci(F,ce,Q);case"Set":return Hs(F,ce,Q);case"Macro":return Et(F,ce,Q);case"Break":return le+vt("break");case"Continue":return le+vt("continue");case"CallStatement":return Lo(F,ce,Q);case"FilterStatement":return Ro(F,ce,Q);case"Comment":return le+"{# "+F.value+" #}";default:return le+"{{- "+tr(F)+" -}}"}}function li(F,ce,Q){const le=Q.repeat(ce),pe=[];let Oe=F;for(;Oe&&(pe.push({test:Oe.test,body:Oe.body}),Oe.alternate.length===1&&Oe.alternate[0].type==="If");)Oe=Oe.alternate[0];let Ue=le+vt("if",tr(pe[0].test))+$t+er(pe[0].body,ce+1,Q);for(let ht=1;ht<pe.length;++ht)Ue+=$t+le+vt("elif",tr(pe[ht].test))+$t+er(pe[ht].body,ce+1,Q);return Oe&&Oe.alternate.length>0&&(Ue+=$t+le+vt("else")+$t+er(Oe.alternate,ce+1,Q)),Ue+=$t+le+vt("endif"),Ue}function ci(F,ce,Q){const le=Q.repeat(ce);let pe="";if(F.iterable.type==="SelectExpression"){const Ue=F.iterable;pe=`${tr(Ue.lhs)} if ${tr(Ue.test)}`}else pe=tr(F.iterable);let Oe=le+vt("for",tr(F.loopvar),"in",pe)+$t+er(F.body,ce+1,Q);return F.defaultBlock.length>0&&(Oe+=$t+le+vt("else")+$t+er(F.defaultBlock,ce+1,Q)),Oe+=$t+le+vt("endfor"),Oe}function Hs(F,ce,Q){const le=Q.repeat(ce),pe=tr(F.assignee),Oe=F.value?tr(F.value):"",Ue=le+vt("set",`${pe}${F.value?" = "+Oe:""}`);return F.body.length===0?Ue:Ue+$t+er(F.body,ce+1,Q)+$t+le+vt("endset")}function Et(F,ce,Q){const le=Q.repeat(ce),pe=F.args.map(tr).join(", ");return le+vt("macro",`${F.name.value}(${pe})`)+$t+er(F.body,ce+1,Q)+$t+le+vt("endmacro")}function Lo(F,ce,Q){const le=Q.repeat(ce),pe=F.callerArgs&&F.callerArgs.length>0?`(${F.callerArgs.map(tr).join(", ")})`:"",Oe=tr(F.call);let Ue=le+vt(`call${pe}`,Oe)+$t;return Ue+=er(F.body,ce+1,Q)+$t,Ue+=le+vt("endcall"),Ue}function Ro(F,ce,Q){const le=Q.repeat(ce),pe=F.filter.type==="Identifier"?F.filter.value:tr(F.filter);let Oe=le+vt("filter",pe)+$t;return Oe+=er(F.body,ce+1,Q)+$t,Oe+=le+vt("endfilter"),Oe}function tr(F,ce=-1){switch(F.type){case"SpreadExpression":return`*${tr(F.argument)}`;case"Identifier":return F.value;case"IntegerLiteral":return`${F.value}`;case"FloatLiteral":return`${F.value}`;case"StringLiteral":return JSON.stringify(F.value);case"BinaryExpression":{const Q=F,le=dn(Q),pe=tr(Q.left,le),Oe=tr(Q.right,le+1),Ue=`${pe} ${Q.operator.value} ${Oe}`;return le<ce?`(${Ue})`:Ue}case"UnaryExpression":{const Q=F;return Q.operator.value+(Q.operator.value==="not"?" ":"")+tr(Q.argument,1/0)}case"CallExpression":{const Q=F,le=Q.args.map(tr).join(", ");return`${tr(Q.callee)}(${le})`}case"MemberExpression":{const Q=F;let le=tr(Q.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(Q.object.type)||(le=`(${le})`);let pe=tr(Q.property);return!Q.computed&&Q.property.type!=="Identifier"&&(pe=`(${pe})`),Q.computed?`${le}[${pe}]`:`${le}.${pe}`}case"FilterExpression":{const Q=F,le=tr(Q.operand,1/0);return Q.filter.type==="CallExpression"?`${le} | ${tr(Q.filter)}`:`${le} | ${Q.filter.value}`}case"SelectExpression":{const Q=F;return`${tr(Q.lhs)} if ${tr(Q.test)}`}case"TestExpression":{const Q=F;return`${tr(Q.operand)} is${Q.negate?" not":""} ${Q.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const Q=F.value.map(tr),le=F.type==="ArrayLiteral"?"[]":"()";return`${le[0]}${Q.join(", ")}${le[1]}`}case"ObjectLiteral":return`{${Array.from(F.value.entries()).map(([le,pe])=>`${tr(le)}: ${tr(pe)}`).join(", ")}}`;case"SliceExpression":{const Q=F,le=Q.start?tr(Q.start):"",pe=Q.stop?tr(Q.stop):"",Oe=Q.step?`:${tr(Q.step)}`:"";return`${le}:${pe}${Oe}`}case"KeywordArgumentExpression":{const Q=F;return`${Q.key.value}=${tr(Q.value)}`}case"Ternary":{const Q=F,le=`${tr(Q.trueExpr)} if ${tr(Q.condition,0)} else ${tr(Q.falseExpr)}`;return ce>-1?`(${le})`:le}default:throw new Error(`Unknown expression type: ${F.type}`)}}var zr=class{constructor(F){de(this,"parsed");const ce=f(F,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=ue(ce)}render(F){const ce=new We;if(nt(ce),F)for(const[pe,Oe]of Object.entries(F))ce.set(pe,Oe);return new ct(ce).run(this.parsed).value}format(F){return Cs(this.parsed,(F==null?void 0:F.indent)||"	")}}},"./src/backends/onnx.js":(e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>o.Tensor,createInferenceSession:()=>x,deviceToExecutionProviders:()=>m,isONNXProxy:()=>_,isONNXTensor:()=>y});var i=r("./src/env.js"),s=r("?2ce3"),a=r("onnxruntime-web"),o=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),c=[];let f,d;const h=Symbol.for("onnxruntime");if(h in globalThis)d=globalThis[h];else if(i.apis.IS_NODE_ENV){switch(d=s??(n||(n=r.t(s,2))),process.platform){case"win32":c.push("dml");break;case"linux":process.arch==="x64"&&c.push("cuda");break}c.push("cpu"),f=["cpu"]}else d=a,i.apis.IS_WEBNN_AVAILABLE&&c.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),i.apis.IS_WEBGPU_AVAILABLE&&c.push("webgpu"),c.push("wasm"),f=["wasm"];const p=d.InferenceSession;function m(b=null){if(!b)return f;switch(b){case"auto":return c;case"gpu":return c.filter(w=>["webgpu","cuda","dml","webnn-gpu"].includes(w))}if(c.includes(b))return[l[b]??b];throw new Error(`Unsupported device: "${b}". Should be one of: ${c.join(", ")}.`)}let g=null;async function x(b,w,k){g&&await g;const T=p.create(b,w);g??(g=T);const M=await T;return M.config=k,M}function y(b){return b instanceof d.Tensor}const v=d==null?void 0:d.env;v!=null&&v.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!v.wasm.wasmPaths&&(v.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${i.env.version}/dist/`),v.wasm.proxy=!1),v!=null&&v.webgpu&&(v.webgpu.powerPreference="high-performance");function _(){var b;return(b=v==null?void 0:v.wasm)==null?void 0:b.proxy}i.env.backends.onnx=v},"./src/base/feature_extraction_utils.js":(e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>a,validate_audio_inputs:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends i.Callable{constructor(c){super(),this.config=c}static async from_pretrained(c,f={}){const d=await(0,s.getModelJSON)(c,n.FEATURE_EXTRACTOR_NAME,!0,f);return new this(d)}}function o(l,c){var f;if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${c} expects input to be a Float32Array or a Float64Array, but got ${((f=l==null?void 0:l.constructor)==null?void 0:f.name)??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}},"./src/base/image_processors_utils.js":(e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>b,center_to_corners_format:()=>d,post_process_instance_segmentation:()=>_,post_process_object_detection:()=>h,post_process_panoptic_segmentation:()=>v,post_process_semantic_segmentation:()=>p});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/utils/image.js");var a=r("./src/utils/core.js"),o=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function c(w,k,T=0,M=null){const j=w/k;let C=(0,s.bankers_round)(j)*k;return M!==null&&C>M&&(C=Math.floor(j)*k),C<T&&(C=Math.ceil(j)*k),C}function f([w,k],T){return[Math.max(Math.floor(w/T),1)*T,Math.max(Math.floor(k/T),1)*T]}function d([w,k,T,M]){return[w-T/2,k-M/2,w+T/2,k+M/2]}function h(w,k=.5,T=null,M=!1){const j=w.logits,C=w.pred_boxes,[R,I,N]=j.dims;if(T!==null&&T.length!==R)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let z=[];for(let V=0;V<R;++V){let G=T!==null?T[V]:null,H={boxes:[],classes:[],scores:[]},O=j[V],q=C[V];for(let ee=0;ee<I;++ee){let B=O[ee],D=[],K;if(M){K=B.sigmoid().data;for(let oe=0;oe<K.length;++oe)K[oe]>k&&D.push(oe)}else{let oe=(0,s.max)(B.data)[1];if(oe===N-1||(K=(0,s.softmax)(B.data),K[oe]<k))continue;D.push(oe)}for(const oe of D){let _e=q[ee].data;_e=d(_e),G!==null&&(_e=_e.map((ue,ye)=>ue*G[(ye+1)%2])),H.boxes.push(_e),H.classes.push(oe),H.scores.push(K[oe])}}z.push(H)}return z}function p(w,k=null){const T=w.logits,M=T.dims[0];if(k!==null&&k.length!==M)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const j=[];for(let C=0;C<M;++C){const R=k!==null?k[C]:null;let I=T[C];R!==null&&(I=(0,i.interpolate)(I,R,"bilinear",!1));const[N,z]=R??I.dims.slice(-2),V=new i.Tensor("int32",new Int32Array(N*z),[N,z]),G=I[0].data,H=V.data;for(let ee=1;ee<I.dims[0];++ee){const B=I[ee].data;for(let D=0;D<B.length;++D)B[D]>G[D]&&(G[D]=B[D],H[D]=ee)}const O=new Array(I.dims[0]);for(let ee=0;ee<H.length;++ee){const B=H[ee];O[B]=B}const q=O.filter(ee=>ee!==void 0);j.push({segmentation:V,labels:q})}return j}function m(w,k,T,M){const j=[],C=[],R=[];for(let I=0;I<w.dims[0];++I){const N=w[I],z=k[I],V=(0,s.max)(N.data)[1];if(V===M)continue;const H=(0,s.softmax)(N.data)[V];H>T&&(j.push(z),C.push(H),R.push(V))}return[j,C,R]}function g(w,k,T,M=.5,j=.8){const C=[];let R=0,I=0;const N=k[T].data;for(let V=0;V<w.length;++V)w[V]===T&&(C.push(V),++R),N[V]>=M&&++I;let z=R>0&&I>0;return z&&(z=R/I>j),[z,C]}function x(w,k,T,M,j,C=null,R=null){const[I,N]=R??w[0].dims,z=new i.Tensor("int32",new Int32Array(I*N),[I,N]),V=[];if(R!==null)for(let ee=0;ee<w.length;++ee)w[ee]=(0,i.interpolate)(w[ee],R,"bilinear",!1);const G=new Int32Array(w[0].data.length),H=new Float32Array(w[0].data.length);for(let ee=0;ee<w.length;++ee){let B=k[ee];const D=w[ee].data;for(let K=0;K<D.length;++K)D[K]*=B,D[K]>H[K]&&(G[K]=ee,H[K]=D[K])}let O=0;const q=z.data;for(let ee=0;ee<T.length;++ee){const B=T[ee],[D,K]=g(G,w,ee,M,j);if(D){++O;for(const oe of K)q[oe]=O;V.push({id:O,label_id:B,score:k[ee]})}}return[z,V]}function y(w,k,T=28,M=56*56,j=14*14*4*1280){if(w<T||k<T)throw new Error(`height:${w} or width:${k} must be larger than factor:${T}`);if(Math.max(w,k)/Math.min(w,k)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(w,k)/Math.min(w,k)}`);let C=Math.round(w/T)*T,R=Math.round(k/T)*T;if(C*R>j){const I=Math.sqrt(w*k/j);C=Math.floor(w/I/T)*T,R=Math.floor(k/I/T)*T}else if(C*R<M){const I=Math.sqrt(M/(w*k));C=Math.ceil(w*I/T)*T,R=Math.ceil(k*I/T)*T}return[C,R]}function v(w,k=.5,T=.5,M=.8,j=null,C=null){j===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),j=new Set);const R=w.class_queries_logits??w.logits,N=(w.masks_queries_logits??w.pred_masks).sigmoid();let[z,V,G]=R.dims;if(G-=1,C!==null&&C.length!==z)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let H=[];for(let O=0;O<z;++O){let q=C!==null?C[O]:null,ee=R[O],B=N[O],[D,K,oe]=m(ee,B,k,G);if(oe.length===0){let[ye,$e]=q??B.dims.slice(-2),Se=new i.Tensor("int32",new Int32Array(ye*$e).fill(-1),[ye,$e]);H.push({segmentation:Se,segments_info:[]});continue}let[_e,ue]=x(D,K,oe,T,M,j,q);H.push({segmentation:_e,segments_info:ue})}return H}function _(w,k=.5,T=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class b extends n.Callable{constructor(k){super(),this.image_mean=k.image_mean??k.mean,this.image_std=k.image_std??k.std,this.resample=k.resample??2,this.do_rescale=k.do_rescale??!0,this.rescale_factor=k.rescale_factor??1/255,this.do_normalize=k.do_normalize,this.do_thumbnail=k.do_thumbnail,this.size=k.size??k.image_size,this.do_resize=k.do_resize??this.size!==void 0,this.size_divisibility=k.size_divisibility??k.size_divisor,this.do_center_crop=k.do_center_crop,this.crop_size=k.crop_size,this.do_convert_rgb=k.do_convert_rgb??!0,this.do_crop_margin=k.do_crop_margin,this.pad_size=k.pad_size,this.do_pad=k.do_pad,this.min_pixels=k.min_pixels,this.max_pixels=k.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=k.do_flip_channel_order??!1,this.config=k}async thumbnail(k,T,M=2){const j=k.height,C=k.width,R=T.height,I=T.width;let N=Math.min(j,R),z=Math.min(C,I);return N===j&&z===C?k:(j>C?z=Math.floor(C*N/j):C>j&&(N=Math.floor(j*z/C)),await k.resize(z,N,{resample:M}))}async crop_margin(k,T=200){const M=k.clone().grayscale(),j=(0,s.min)(M.data)[0],R=(0,s.max)(M.data)[0]-j;if(R===0)return k;const I=T/255;let N=M.width,z=M.height,V=0,G=0;const H=M.data;for(let O=0;O<M.height;++O){const q=O*M.width;for(let ee=0;ee<M.width;++ee)(H[q+ee]-j)/R<I&&(N=Math.min(N,ee),z=Math.min(z,O),V=Math.max(V,ee),G=Math.max(G,O))}return k=await k.crop([N,z,V,G]),k}pad_image(k,T,M,{mode:j="constant",center:C=!1,constant_values:R=0}={}){const[I,N,z]=T;let V,G;if(typeof M=="number"?(V=M,G=M):M==="square"?V=G=Math.max(I,N):(V=M.width,G=M.height),V!==N||G!==I){const H=new Float32Array(V*G*z);if(Array.isArray(R))for(let ee=0;ee<H.length;++ee)H[ee]=R[ee%z];else R!==0&&H.fill(R);const[O,q]=C?[Math.floor((V-N)/2),Math.floor((G-I)/2)]:[0,0];for(let ee=0;ee<I;++ee){const B=(ee+q)*V,D=ee*N;for(let K=0;K<N;++K){const oe=(B+K+O)*z,_e=(D+K)*z;for(let ue=0;ue<z;++ue)H[oe+ue]=k[_e+ue]}}if(j==="symmetric"){if(C)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ee=I-1,B=N-1;for(let D=0;D<G;++D){const K=D*V,oe=(0,a.calculateReflectOffset)(D,ee)*N;for(let _e=0;_e<V;++_e){if(D<I&&_e<N)continue;const ue=(K+_e)*z,ye=(oe+(0,a.calculateReflectOffset)(_e,B))*z;for(let $e=0;$e<z;++$e)H[ue+$e]=k[ye+$e]}}}k=H,T=[G,V,z]}return[k,T]}rescale(k){for(let T=0;T<k.length;++T)k[T]=this.rescale_factor*k[T]}get_resize_output_image_size(k,T){const[M,j]=k.size;let C,R;if(this.do_thumbnail){const{height:I,width:N}=T;C=Math.min(I,N)}else Number.isInteger(T)?(C=T,R=this.config.max_size??C):T!==void 0&&(C=T.shortest_edge,R=T.longest_edge);if(C!==void 0||R!==void 0){const I=C===void 0?1:Math.max(C/M,C/j),N=M*I,z=j*I,V=R===void 0?1:Math.min(R/N,R/z);let G=Math.floor(Number((N*V).toFixed(2))),H=Math.floor(Number((z*V).toFixed(2)));return this.size_divisibility!==void 0&&([G,H]=f([G,H],this.size_divisibility)),[G,H]}else if(T!==void 0&&T.width!==void 0&&T.height!==void 0){let I=T.width,N=T.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let z=N/j,V=I/M;Math.abs(1-V)<Math.abs(1-z)?z=V:V=z,N=c(z*j,this.config.ensure_multiple_of),I=c(V*M,this.config.ensure_multiple_of)}return[I,N]}else{if(this.size_divisibility!==void 0)return f([M,j],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const I=this.config.patch_size*this.config.merge_size;return y(j,M,I,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(T)}`)}}async resize(k){const[T,M]=this.get_resize_output_image_size(k,this.size);return await k.resize(T,M,{resample:this.resample})}async preprocess(k,{do_normalize:T=null,do_pad:M=null,do_convert_rgb:j=null,do_convert_grayscale:C=null,do_flip_channel_order:R=null}={}){this.do_crop_margin&&(k=await this.crop_margin(k));const[I,N]=k.size;if(j??this.do_convert_rgb?k=k.rgb():C&&(k=k.grayscale()),this.do_resize&&(k=await this.resize(k)),this.do_thumbnail&&(k=await this.thumbnail(k,this.size,this.resample)),this.do_center_crop){let O,q;Number.isInteger(this.crop_size)?(O=this.crop_size,q=this.crop_size):(O=this.crop_size.width,q=this.crop_size.height),k=await k.center_crop(O,q)}const z=[k.height,k.width];let V=Float32Array.from(k.data),G=[k.height,k.width,k.channels];if(this.do_rescale&&this.rescale(V),T??this.do_normalize){let O=this.image_mean;Array.isArray(this.image_mean)||(O=new Array(k.channels).fill(O));let q=this.image_std;if(Array.isArray(this.image_std)||(q=new Array(k.channels).fill(O)),O.length!==k.channels||q.length!==k.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${O.length}) and \`image_std\` (${q.length}) must match the number of channels in the image (${k.channels}).`);for(let ee=0;ee<V.length;ee+=k.channels)for(let B=0;B<k.channels;++B)V[ee+B]=(V[ee+B]-O[B])/q[B]}if(M??this.do_pad){if(this.pad_size)[V,G]=this.pad_image(V,[k.height,k.width,k.channels],this.pad_size);else if(this.size_divisibility){const[O,q]=f([G[1],G[0]],this.size_divisibility);[V,G]=this.pad_image(V,G,{width:O,height:q})}}if(R??this.do_flip_channel_order){if(G[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let O=0;O<V.length;O+=3){const q=V[O];V[O]=V[O+2],V[O+2]=q}}const H=new i.Tensor("float32",V,G).permute(2,0,1);return{original_size:[N,I],reshaped_input_size:z,pixel_values:H}}async _call(k,...T){Array.isArray(k)||(k=[k]);const M=await Promise.all(k.map(C=>this.preprocess(C)));return{pixel_values:(0,i.stack)(M.map(C=>C.pixel_values),0),original_sizes:M.map(C=>C.original_size),reshaped_input_sizes:M.map(C=>C.reshaped_input_size)}}static async from_pretrained(k,T={}){const M=await(0,o.getModelJSON)(k,l.IMAGE_PROCESSOR_NAME,!0,T);return new this(M)}}},"./src/base/processing_utils.js":(e,t,r)=>{r.r(t),r.d(t,{Processor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class a extends i.Callable{constructor(l,c,f){super(),this.config=l,this.components=c,this.chat_template=f}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,c={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...c})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...c){for(const f of[this.image_processor,this.feature_extractor,this.tokenizer])if(f)return f(l,...c);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,c={}){const[f,d,h]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(l,n.PROCESSOR_NAME,!0,c):{},Promise.all(this.classes.filter(p=>p in this).map(async p=>{const m=await this[p].from_pretrained(l,c);return[p.replace(/_class$/,""),m]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,c):null]);return new this(f,d,h)}}de(a,"classes",["image_processor_class","tokenizer_class","feature_extractor_class"]),de(a,"uses_processor_config",!1),de(a,"uses_chat_template_file",!1)},"./src/configs.js":(e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>f,PretrainedConfig:()=>c,getCacheShapes:()=>o});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js");async function s(d,h){return await(0,i.getModelJSON)(d,"config.json",!0,h)}function a(d){const h={};let p={};switch(d.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":p=a(d.text_config);break;case"moondream1":p=a(d.phi_config);break;case"musicgen":p=a(d.decoder);break;case"multi_modality":p=a(d.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":h.num_heads="n_head",h.num_layers="n_layer",h.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":h.num_heads="num_attention_heads",h.num_layers="num_hidden_layers",h.hidden_size="hidden_size";break;case"llama":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":h.num_heads="num_key_value_heads",h.num_layers="num_hidden_layers",h.hidden_size="hidden_size",h.num_attention_heads="num_attention_heads",h.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":h.num_heads="num_key_value_heads",h.num_layers="num_hidden_layers",h.dim_kv="head_dim";break;case"openelm":h.num_heads="num_kv_heads",h.num_layers="num_transformer_layers",h.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":h.num_heads="num_heads",h.num_layers="num_layers",h.hidden_size="hidden_size";break;case"bloom":h.num_heads="n_head",h.num_layers="n_layer",h.hidden_size="hidden_size";break;case"mpt":h.num_heads="n_heads",h.num_layers="n_layers",h.hidden_size="d_model";break;case"exaone":h.num_heads="num_key_value_heads",h.num_layers="num_layers",h.dim_kv="head_dim",h.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":h.num_decoder_layers="num_decoder_layers",h.num_decoder_heads="num_heads",h.decoder_dim_kv="d_kv",h.num_encoder_layers="num_layers",h.num_encoder_heads="num_heads",h.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":h.num_decoder_layers="decoder_layers",h.num_decoder_heads="decoder_attention_heads",h.decoder_hidden_size="d_model",h.num_encoder_layers="encoder_layers",h.num_encoder_heads="encoder_attention_heads",h.encoder_hidden_size="d_model";break;case"speecht5":h.num_decoder_layers="decoder_layers",h.num_decoder_heads="decoder_attention_heads",h.decoder_hidden_size="hidden_size",h.num_encoder_layers="encoder_layers",h.num_encoder_heads="encoder_attention_heads",h.encoder_hidden_size="hidden_size";break;case"trocr":h.num_encoder_layers=h.num_decoder_layers="decoder_layers",h.num_encoder_heads=h.num_decoder_heads="decoder_attention_heads",h.encoder_hidden_size=h.decoder_hidden_size="d_model";break;case"musicgen_decoder":h.num_encoder_layers=h.num_decoder_layers="num_hidden_layers",h.num_encoder_heads=h.num_decoder_heads="num_attention_heads",h.encoder_hidden_size=h.decoder_hidden_size="hidden_size";break;case"moonshine":h.num_decoder_layers="decoder_num_hidden_layers",h.num_decoder_heads="decoder_num_key_value_heads",h.num_encoder_layers="encoder_num_hidden_layers",h.num_encoder_heads="encoder_num_key_value_heads",h.encoder_hidden_size=h.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const g=a(d.decoder),x="num_decoder_layers"in g,y=(0,n.pick)(d,["model_type","is_encoder_decoder"]);return x?(y.num_decoder_layers=g.num_decoder_layers,y.num_decoder_heads=g.num_decoder_heads,y.decoder_hidden_size=g.decoder_hidden_size,y.num_encoder_layers=g.num_encoder_layers,y.num_encoder_heads=g.num_encoder_heads,y.encoder_hidden_size=g.encoder_hidden_size):(y.num_layers=g.num_layers,y.num_heads=g.num_heads,y.hidden_size=g.hidden_size),y}const m={...p,...(0,n.pick)(d,["model_type","multi_query","is_encoder_decoder"])};for(const g in h)m[g]=d[h[g]];return m}function o(d,h){if(d.model_type==="lfm2"){const p=(h==null?void 0:h.prefix)??"past_key_values",m=p==="present"?"present":"past",g={},{layer_types:x,num_attention_heads:y,num_key_value_heads:v,hidden_size:_,conv_L_cache:b}=d,w=_/y,k=(h==null?void 0:h.batch_size)??1;for(let T=0;T<x.length;++T)if(x[T]==="full_attention")for(const M of["key","value"])g[`${p}.${T}.${M}`]=[k,v,0,w];else if(x[T]==="conv")g[`${m}_conv.${T}`]=[k,_,b];else throw new Error(`Unsupported layer type: ${x[T]}`);return g}return l(d,h)}function l(d,{prefix:h="past_key_values",batch_size:p=1}={}){const m={},g=d.normalized_config;if(g.is_encoder_decoder&&"num_encoder_heads"in g&&"num_decoder_heads"in g){const x=g.encoder_dim_kv??g.encoder_hidden_size/g.num_encoder_heads,y=g.decoder_dim_kv??g.decoder_hidden_size/g.num_decoder_heads,v=[p,g.num_encoder_heads,0,x],_=[p,g.num_decoder_heads,0,y];for(let b=0;b<g.num_decoder_layers;++b)m[`${h}.${b}.encoder.key`]=v,m[`${h}.${b}.encoder.value`]=v,m[`${h}.${b}.decoder.key`]=_,m[`${h}.${b}.decoder.value`]=_}else{const x=g.num_heads,y=g.num_layers,v=g.dim_kv??g.hidden_size/(g.num_attention_heads??x);if(g.model_type==="falcon"){const _=[p*x,0,v];for(let b=0;b<y;++b)m[`${h}.${b}.key`]=_,m[`${h}.${b}.value`]=_}else if(g.multi_query){const _=[p*x,0,2*v];for(let b=0;b<y;++b)m[`${h}.${b}.key_value`]=_}else if(g.model_type==="bloom"){const _=[p*x,v,0],b=[p*x,0,v];for(let w=0;w<y;++w)m[`${h}.${w}.key`]=_,m[`${h}.${w}.value`]=b}else if(g.model_type==="openelm")for(let _=0;_<y;++_){const b=[p,x[_],0,v];m[`${h}.${_}.key`]=b,m[`${h}.${_}.value`]=b}else{const _=[p,x,0,v];for(let b=0;b<y;++b)m[`${h}.${b}.key`]=_,m[`${h}.${b}.value`]=_}}return m}class c{constructor(h){de(this,"model_type",null);de(this,"is_encoder_decoder",!1);de(this,"max_position_embeddings");de(this,"transformers.js_config");Object.assign(this,h),this.normalized_config=a(this)}static async from_pretrained(h,{progress_callback:p=null,config:m=null,cache_dir:g=null,local_files_only:x=!1,revision:y="main"}={}){m&&!(m instanceof c)&&(m=new c(m));const v=m??await s(h,{progress_callback:p,config:m,cache_dir:g,local_files_only:x,revision:y});return new this(v)}}class f{static async from_pretrained(...h){return c.from_pretrained(...h)}}},"./src/env.js":(e,t,r)=>{var j,C;r.r(t),r.d(t,{apis:()=>y,env:()=>T});var n=r("?db59"),i=r("?383f"),s=r("?fa4b");const a="3.7.0",o=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes((j=self.constructor)==null?void 0:j.name),c=typeof self<"u"&&"caches"in self,f=typeof navigator<"u"&&"gpu"in navigator,d=typeof navigator<"u"&&"ml"in navigator,h=typeof process<"u",p=h&&((C=process==null?void 0:process.release)==null?void 0:C.name)==="node",m=!M(n),g=!M(i),x=typeof globalThis.Deno<"u",y=Object.freeze({IS_BROWSER_ENV:o,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:c,IS_WEBGPU_AVAILABLE:f,IS_WEBNN_AVAILABLE:d,IS_PROCESS_AVAILABLE:h,IS_NODE_ENV:p,IS_FS_AVAILABLE:m,IS_PATH_AVAILABLE:g}),v=m&&g;let _="./";if(v){const R=Object(import.meta).url;R?_=i.dirname(i.dirname(s.fileURLToPath(R))):typeof __dirname<"u"&&(_=i.dirname(__dirname))}const b=v?i.join(_,"/.cache/"):null,w="/models/",k=v?i.join(_,w):w,T={version:a,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(o||l),localModelPath:k,useFS:m,useBrowserCache:c&&!x,useFSCache:m,cacheDir:b,useCustomCache:!1,customCache:null};function M(R){return Object.keys(R).length===0}},"./src/generation/configuration_utils.js":(e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>i});var n=r("./src/utils/core.js");class i{constructor(a){de(this,"max_length",20);de(this,"max_new_tokens",null);de(this,"min_length",0);de(this,"min_new_tokens",null);de(this,"early_stopping",!1);de(this,"max_time",null);de(this,"do_sample",!1);de(this,"num_beams",1);de(this,"num_beam_groups",1);de(this,"penalty_alpha",null);de(this,"use_cache",!0);de(this,"temperature",1);de(this,"top_k",50);de(this,"top_p",1);de(this,"typical_p",1);de(this,"epsilon_cutoff",0);de(this,"eta_cutoff",0);de(this,"diversity_penalty",0);de(this,"repetition_penalty",1);de(this,"encoder_repetition_penalty",1);de(this,"length_penalty",1);de(this,"no_repeat_ngram_size",0);de(this,"bad_words_ids",null);de(this,"force_words_ids",null);de(this,"renormalize_logits",!1);de(this,"constraints",null);de(this,"forced_bos_token_id",null);de(this,"forced_eos_token_id",null);de(this,"remove_invalid_values",!1);de(this,"exponential_decay_length_penalty",null);de(this,"suppress_tokens",null);de(this,"streamer",null);de(this,"begin_suppress_tokens",null);de(this,"forced_decoder_ids",null);de(this,"guidance_scale",null);de(this,"num_return_sequences",1);de(this,"output_attentions",!1);de(this,"output_hidden_states",!1);de(this,"output_scores",!1);de(this,"return_dict_in_generate",!1);de(this,"pad_token_id",null);de(this,"bos_token_id",null);de(this,"eos_token_id",null);de(this,"encoder_no_repeat_ngram_size",0);de(this,"decoder_start_token_id",null);de(this,"generation_kwargs",{});Object.assign(this,(0,n.pick)(a,Object.getOwnPropertyNames(this)))}}},"./src/generation/logits_process.js":(e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>y,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>c,LogitsProcessor:()=>s,LogitsProcessorList:()=>o,LogitsWarper:()=>a,MinLengthLogitsProcessor:()=>m,MinNewTokensLengthLogitsProcessor:()=>g,NoBadWordsLogitsProcessor:()=>x,NoRepeatNGramLogitsProcessor:()=>h,RepetitionPenaltyLogitsProcessor:()=>p,SuppressTokensAtBeginLogitsProcessor:()=>f,TemperatureLogitsWarper:()=>v,TopKLogitsWarper:()=>b,TopPLogitsWarper:()=>_,WhisperTimeStampLogitsProcessor:()=>d});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var i=r("./src/utils/maths.js");class s extends n.Callable{_call(k,T){throw Error("`_call` should be implemented in a subclass")}}class a extends n.Callable{_call(k,T){throw Error("`_call` should be implemented in a subclass")}}class o extends n.Callable{constructor(){super(),this.processors=[]}push(k){this.processors.push(k)}extend(k){this.processors.push(...k)}_call(k,T){let M=T;for(const j of this.processors)M=j(k,M);return M}[Symbol.iterator](){return this.processors.values()}}class l extends s{constructor(k){super(),this.bos_token_id=k}_call(k,T){for(let M=0;M<k.length;++M)if(k[M].length===1){const j=T[M].data;j.fill(-1/0),j[this.bos_token_id]=0}return T}}class c extends s{constructor(k,T){super(),this.max_length=k,this.eos_token_id=Array.isArray(T)?T:[T]}_call(k,T){for(let M=0;M<k.length;++M)if(k[M].length===this.max_length-1){const j=T[M].data;j.fill(-1/0);for(const C of this.eos_token_id)j[C]=0}return T}}class f extends s{constructor(k,T){super(),this.begin_suppress_tokens=k,this.begin_index=T}_call(k,T){for(let M=0;M<k.length;++M)if(k[M].length===this.begin_index){const j=T[M].data;for(const C of this.begin_suppress_tokens)j[C]=-1/0}return T}}class d extends s{constructor(k,T){super(),this.eos_token_id=Array.isArray(k.eos_token_id)?k.eos_token_id[0]:k.eos_token_id,this.no_timestamps_token_id=k.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=T.length,T.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=k.max_initial_timestamp_index}_call(k,T){for(let M=0;M<k.length;++M){const j=T[M].data;if(j[this.no_timestamps_token_id]=-1/0,k[M].length===this.begin_index-1){j.fill(-1/0),j[this.timestamp_begin]=0;continue}const C=k[M].slice(this.begin_index),R=C.length>=1&&C[C.length-1]>=this.timestamp_begin,I=C.length<2||C[C.length-2]>=this.timestamp_begin;if(R&&(I?j.subarray(this.timestamp_begin).fill(-1/0):j.subarray(0,this.eos_token_id).fill(-1/0)),k[M].length===this.begin_index&&this.max_initial_timestamp_index!==null){const G=this.timestamp_begin+this.max_initial_timestamp_index;j.subarray(G+1).fill(-1/0)}const N=(0,i.log_softmax)(j),z=Math.log(N.subarray(this.timestamp_begin).map(Math.exp).reduce((G,H)=>G+H)),V=(0,i.max)(N.subarray(0,this.timestamp_begin))[0];z>V&&j.subarray(0,this.timestamp_begin).fill(-1/0)}return T}}class h extends s{constructor(k){super(),this.no_repeat_ngram_size=k}getNgrams(k){const T=k.length,M=[];for(let C=0;C<T+1-this.no_repeat_ngram_size;++C){const R=[];for(let I=0;I<this.no_repeat_ngram_size;++I)R.push(k[C+I]);M.push(R.map(Number))}const j=new Map;for(const C of M){const R=C.slice(0,C.length-1),I=JSON.stringify(R),N=j.get(I)??[];N.push(C[C.length-1]),j.set(I,N)}return j}getGeneratedNgrams(k,T){const M=T.slice(T.length+1-this.no_repeat_ngram_size,T.length);return k.get(JSON.stringify(M.map(Number)))??[]}calcBannedNgramTokens(k){const T=[];if(k.length+1<this.no_repeat_ngram_size)return T;{const M=this.getNgrams(k);return this.getGeneratedNgrams(M,k)}}_call(k,T){for(let M=0;M<k.length;++M){const j=T[M].data,C=this.calcBannedNgramTokens(k[M]);for(const R of C)j[R]=-1/0}return T}}class p extends s{constructor(k){super(),this.penalty=k}_call(k,T){for(let M=0;M<k.length;++M){const j=T[M].data;for(const C of new Set(k[M])){const R=Number(C);j[R]<0?j[R]*=this.penalty:j[R]/=this.penalty}}return T}}class m extends s{constructor(k,T){super(),this.min_length=k,this.eos_token_id=Array.isArray(T)?T:[T]}_call(k,T){for(let M=0;M<k.length;++M)if(k[M].length<this.min_length){const j=T[M].data;for(const C of this.eos_token_id)j[C]=-1/0}return T}}class g extends s{constructor(k,T,M){super(),this.prompt_length_to_skip=k,this.min_new_tokens=T,this.eos_token_id=Array.isArray(M)?M:[M]}_call(k,T){for(let M=0;M<k.length;++M)if(k[M].length-this.prompt_length_to_skip<this.min_new_tokens){const C=T[M].data;for(const R of this.eos_token_id)C[R]=-1/0}return T}}class x extends s{constructor(k,T){super(),this.bad_words_ids=k,this.eos_token_id=Array.isArray(T)?T:[T]}_call(k,T){for(let M=0;M<k.length;++M){const j=T[M].data,C=k[M];for(const R of this.bad_words_ids){if(C.length<R.length-1)continue;let I=!0;for(let N=1;N<=R.length-1;++N)if(R.at(-N-1)!=C.at(-N)){I=!1;break}I&&(j[R.at(-1)]=-1/0)}}return T}}class y extends s{constructor(k){if(super(),k<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${k}.`);this.guidance_scale=k}_call(k,T){if(T.dims[0]!==2*k.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${T.dims[0]} for the logits and ${k.length} for the input ids.`);const M=k.length,j=T.slice([0,M],null),C=T.slice([M,T.dims[0]],null);for(let R=0;R<C.data.length;++R)C.data[R]+=(j.data[R]-C.data[R])*this.guidance_scale;return C}}class v extends a{constructor(k){super(),this.temperature=k}_call(k,T){const M=T.data;for(let j=0;j<M.length;++j)M[j]/=this.temperature;return T}}class _ extends a{constructor(k,{filter_value:T=-1/0,min_tokens_to_keep:M=1}={}){if(super(),k<0||k>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${k}`);if(!Number.isInteger(M)||M<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${M}`);this.top_p=k,this.filter_value=T,this.min_tokens_to_keep=M}}class b extends a{constructor(k,{filter_value:T=-1/0,min_tokens_to_keep:M=1}={}){if(super(),!Number.isInteger(k)||k<0)throw new Error(`\`top_k\` must be a positive integer, but is ${k}`);this.top_k=Math.max(k,M),this.filter_value=T}}},"./src/generation/logits_sampler.js":(e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>a});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class a extends n.Callable{constructor(d){super(),this.generation_config=d}async _call(d){return this.sample(d)}async sample(d){throw Error("sample should be implemented in subclasses.")}getLogits(d,h){let p=d.dims.at(-1),m=d.data;if(h===-1)m=m.slice(-p);else{let g=h*p;m=m.slice(g,g+p)}return m}randomSelect(d){let h=0;for(let m=0;m<d.length;++m)h+=d[m];let p=Math.random()*h;for(let m=0;m<d.length;++m)if(p-=d[m],p<=0)return m;return 0}static getSampler(d){if(d.do_sample)return new l(d);if(d.num_beams>1)return new c(d);if(d.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${d.num_return_sequences}.`);return new o(d)}}class o extends a{async sample(d){const h=(0,s.max)(d.data)[1];return[[BigInt(h),0]]}}class l extends a{async sample(d){let h=d.dims.at(-1);this.generation_config.top_k>0&&(h=Math.min(this.generation_config.top_k,h));const[p,m]=await(0,i.topk)(d,h),g=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},()=>{const x=this.randomSelect(g);return[m.data[x],Math.log(g[x])]})}}class c extends a{async sample(d){let h=d.dims.at(-1);this.generation_config.top_k>0&&(h=Math.min(this.generation_config.top_k,h));const[p,m]=await(0,i.topk)(d,h),g=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},(x,y)=>[m.data[y],Math.log(g[y])])}}},"./src/generation/stopping_criteria.js":(e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>o,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>a,StoppingCriteria:()=>i,StoppingCriteriaList:()=>s});var n=r("./src/utils/generic.js");class i extends n.Callable{_call(f,d){throw Error("StoppingCriteria needs to be subclassed")}}class s extends n.Callable{constructor(){super(),this.criteria=[]}push(f){this.criteria.push(f)}extend(f){f instanceof s?f=f.criteria:f instanceof i&&(f=[f]),this.criteria.push(...f)}_call(f,d){const h=new Array(f.length).fill(!1);for(const p of this.criteria){const m=p(f,d);for(let g=0;g<h.length;++g)h[g]||(h[g]=m[g])}return h}[Symbol.iterator](){return this.criteria.values()}}class a extends i{constructor(f,d=null){super(),this.max_length=f,this.max_position_embeddings=d}_call(f){return f.map(d=>d.length>=this.max_length)}}class o extends i{constructor(f){super(),Array.isArray(f)||(f=[f]),this.eos_token_id=f}_call(f,d){return f.map(h=>{const p=h.at(-1);return this.eos_token_id.some(m=>p==m)})}}class l extends i{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(f,d){return new Array(f.length).fill(this.interrupted)}}},"./src/generation/streamers.js":(e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>a,TextStreamer:()=>l,WhisperTextStreamer:()=>c});var n=r("./src/utils/core.js"),i=r("./src/tokenizers.js"),s=r("./src/env.js");class a{put(d){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const o=s.apis.IS_PROCESS_AVAILABLE?f=>process.stdout.write(f):f=>console.log(f);class l extends a{constructor(d,{skip_prompt:h=!1,callback_function:p=null,token_callback_function:m=null,skip_special_tokens:g=!0,decode_kwargs:x={},...y}={}){super(),this.tokenizer=d,this.skip_prompt=h,this.callback_function=p??o,this.token_callback_function=m,this.decode_kwargs={skip_special_tokens:g,...x,...y},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(d){var x;if(d.length>1)throw Error("TextStreamer only supports batch size of 1");const h=this.next_tokens_are_prompt;if(h&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const p=d[0];(x=this.token_callback_function)==null||x.call(this,p),this.token_cache=(0,n.mergeArrays)(this.token_cache,p);const m=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let g;h||m.endsWith(`
`)?(g=m.slice(this.print_len),this.token_cache=[],this.print_len=0):m.length>0&&(0,i.is_chinese_char)(m.charCodeAt(m.length-1))?(g=m.slice(this.print_len),this.print_len+=g.length):(g=m.slice(this.print_len,m.lastIndexOf(" ")+1),this.print_len+=g.length),this.on_finalized_text(g,!1)}end(){let d;this.token_cache.length>0?(d=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):d="",this.next_tokens_are_prompt=!0,this.on_finalized_text(d,!0)}on_finalized_text(d,h){var p,m;d.length>0&&((p=this.callback_function)==null||p.call(this,d)),h&&this.callback_function===o&&s.apis.IS_PROCESS_AVAILABLE&&((m=this.callback_function)==null||m.call(this,`
`))}}class c extends l{constructor(d,{skip_prompt:h=!1,callback_function:p=null,token_callback_function:m=null,on_chunk_start:g=null,on_chunk_end:x=null,on_finalize:y=null,time_precision:v=.02,skip_special_tokens:_=!0,decode_kwargs:b={}}={}){super(d,{skip_prompt:h,skip_special_tokens:_,callback_function:p,token_callback_function:m,decode_kwargs:b}),this.timestamp_begin=d.timestamp_begin,this.on_chunk_start=g,this.on_chunk_end=x,this.on_finalize=y,this.time_precision=v,this.waiting_for_timestamp=!1}put(d){var p,m,g;if(d.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const h=d[0];if(h.length===1){const x=Number(h[0])-this.timestamp_begin;if(x>=0){const y=x*this.time_precision;this.waiting_for_timestamp?(p=this.on_chunk_end)==null||p.call(this,y):(m=this.on_chunk_start)==null||m.call(this,y),this.waiting_for_timestamp=!this.waiting_for_timestamp,(g=this.token_callback_function)==null||g.call(this,h);return}}return super.put(d)}end(){var d;super.end(),(d=this.on_finalize)==null||d.call(this)}}},"./src/models.js":(e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>Fm,ASTModel:()=>Y_,ASTPreTrainedModel:()=>Rm,AlbertForMaskedLM:()=>Rt,AlbertForQuestionAnswering:()=>ft,AlbertForSequenceClassification:()=>it,AlbertModel:()=>at,AlbertPreTrainedModel:()=>Qe,AutoModel:()=>$M,AutoModelForAudioClassification:()=>D3,AutoModelForAudioFrameClassification:()=>R3,AutoModelForAudioTextToText:()=>K3,AutoModelForCTC:()=>I3,AutoModelForCausalLM:()=>T3,AutoModelForDepthEstimation:()=>V3,AutoModelForDocumentQuestionAnswering:()=>F3,AutoModelForImageClassification:()=>E3,AutoModelForImageFeatureExtraction:()=>G3,AutoModelForImageMatting:()=>B3,AutoModelForImageSegmentation:()=>j3,AutoModelForImageTextToText:()=>H3,AutoModelForImageToImage:()=>z3,AutoModelForMaskGeneration:()=>N3,AutoModelForMaskedLM:()=>M3,AutoModelForNormalEstimation:()=>U3,AutoModelForObjectDetection:()=>O3,AutoModelForPoseEstimation:()=>W3,AutoModelForQuestionAnswering:()=>S3,AutoModelForSemanticSegmentation:()=>C3,AutoModelForSeq2SeqLM:()=>x3,AutoModelForSequenceClassification:()=>y3,AutoModelForSpeechSeq2Seq:()=>b3,AutoModelForTextToSpectrogram:()=>w3,AutoModelForTextToWaveform:()=>k3,AutoModelForTokenClassification:()=>_3,AutoModelForUniversalSegmentation:()=>A3,AutoModelForVision2Seq:()=>P3,AutoModelForXVector:()=>L3,AutoModelForZeroShotObjectDetection:()=>$3,BartForConditionalGeneration:()=>Kn,BartForSequenceClassification:()=>Hi,BartModel:()=>Xr,BartPretrainedModel:()=>ds,BaseModelOutput:()=>Ne,BeitForImageClassification:()=>ZD,BeitModel:()=>QD,BeitPreTrainedModel:()=>qT,BertForMaskedLM:()=>Z,BertForQuestionAnswering:()=>Me,BertForSequenceClassification:()=>ne,BertForTokenClassification:()=>fe,BertModel:()=>Pe,BertPreTrainedModel:()=>je,BlenderbotForConditionalGeneration:()=>pn,BlenderbotModel:()=>Rn,BlenderbotPreTrainedModel:()=>wn,BlenderbotSmallForConditionalGeneration:()=>Pf,BlenderbotSmallModel:()=>gl,BlenderbotSmallPreTrainedModel:()=>Ki,BloomForCausalLM:()=>xD,BloomModel:()=>_D,BloomPreTrainedModel:()=>DT,CLIPModel:()=>Wm,CLIPPreTrainedModel:()=>Qa,CLIPSegForImageSegmentation:()=>$f,CLIPSegModel:()=>Hu,CLIPSegPreTrainedModel:()=>Os,CLIPTextModel:()=>o0,CLIPTextModelWithProjection:()=>Gm,CLIPVisionModel:()=>l0,CLIPVisionModelWithProjection:()=>Hm,CamembertForMaskedLM:()=>At,CamembertForQuestionAnswering:()=>xr,CamembertForSequenceClassification:()=>Wt,CamembertForTokenClassification:()=>pt,CamembertModel:()=>Dt,CamembertPreTrainedModel:()=>ht,CausalLMOutput:()=>Yu,CausalLMOutputWithPast:()=>qle,ChineseCLIPModel:()=>Ct,ChineseCLIPPreTrainedModel:()=>Wu,ClapAudioModelWithProjection:()=>eF,ClapModel:()=>ZR,ClapPreTrainedModel:()=>v0,ClapTextModelWithProjection:()=>JR,CodeGenForCausalLM:()=>se,CodeGenModel:()=>Y,CodeGenPreTrainedModel:()=>W,CohereForCausalLM:()=>eD,CohereModel:()=>JI,CoherePreTrainedModel:()=>PT,ConvBertForMaskedLM:()=>Ro,ConvBertForQuestionAnswering:()=>F,ConvBertForSequenceClassification:()=>tr,ConvBertForTokenClassification:()=>zr,ConvBertModel:()=>Lo,ConvBertPreTrainedModel:()=>Et,ConvNextForImageClassification:()=>HL,ConvNextModel:()=>GL,ConvNextPreTrainedModel:()=>cM,ConvNextV2ForImageClassification:()=>qL,ConvNextV2Model:()=>KL,ConvNextV2PreTrainedModel:()=>uM,DFineForObjectDetection:()=>dL,DFineModel:()=>uL,DFinePreTrainedModel:()=>eM,DPTForDepthEstimation:()=>PL,DPTModel:()=>SL,DPTPreTrainedModel:()=>aM,DacDecoderModel:()=>VF,DacDecoderOutput:()=>FF,DacEncoderModel:()=>zF,DacEncoderOutput:()=>RF,DacModel:()=>BF,DacPreTrainedModel:()=>T0,DebertaForMaskedLM:()=>cs,DebertaForQuestionAnswering:()=>di,DebertaForSequenceClassification:()=>fn,DebertaForTokenClassification:()=>ui,DebertaModel:()=>zi,DebertaPreTrainedModel:()=>Pr,DebertaV2ForMaskedLM:()=>fi,DebertaV2ForQuestionAnswering:()=>Ui,DebertaV2ForSequenceClassification:()=>Fo,DebertaV2ForTokenClassification:()=>Bo,DebertaV2Model:()=>_a,DebertaV2PreTrainedModel:()=>Vi,DecisionTransformerModel:()=>bF,DecisionTransformerPreTrainedModel:()=>xF,DeiTForImageClassification:()=>gL,DeiTModel:()=>mL,DeiTPreTrainedModel:()=>rM,DepthAnythingForDepthEstimation:()=>jL,DepthAnythingPreTrainedModel:()=>EL,DepthProForDepthEstimation:()=>NL,DepthProPreTrainedModel:()=>$L,DetrForObjectDetection:()=>eL,DetrForSegmentation:()=>XT,DetrModel:()=>JD,DetrObjectDetectionOutput:()=>YT,DetrPreTrainedModel:()=>d0,DetrSegmentationOutput:()=>tL,Dinov2ForImageClassification:()=>YL,Dinov2Model:()=>XL,Dinov2PreTrainedModel:()=>dM,Dinov2WithRegistersForImageClassification:()=>ZL,Dinov2WithRegistersModel:()=>QL,Dinov2WithRegistersPreTrainedModel:()=>fM,DistilBertForMaskedLM:()=>Wn,DistilBertForQuestionAnswering:()=>Ln,DistilBertForSequenceClassification:()=>Mi,DistilBertForTokenClassification:()=>Ka,DistilBertModel:()=>As,DistilBertPreTrainedModel:()=>Wi,DonutSwinModel:()=>WL,DonutSwinPreTrainedModel:()=>UL,EfficientNetForImageClassification:()=>oF,EfficientNetModel:()=>aF,EfficientNetPreTrainedModel:()=>kM,ElectraForMaskedLM:()=>le,ElectraForQuestionAnswering:()=>Ue,ElectraForSequenceClassification:()=>pe,ElectraForTokenClassification:()=>Oe,ElectraModel:()=>Q,ElectraPreTrainedModel:()=>ce,Ernie4_5_ForCausalLM:()=>KR,Ernie4_5_Model:()=>HR,Ernie4_5_PretrainedModel:()=>yM,EsmForMaskedLM:()=>Gi,EsmForSequenceClassification:()=>Xe,EsmForTokenClassification:()=>Ye,EsmModel:()=>hl,EsmPreTrainedModel:()=>us,ExaoneForCausalLM:()=>WI,ExaoneModel:()=>UI,ExaonePreTrainedModel:()=>wT,FalconForCausalLM:()=>QR,FalconModel:()=>YR,FalconPreTrainedModel:()=>xM,FastViTForImageClassification:()=>BD,FastViTModel:()=>FD,FastViTPreTrainedModel:()=>UT,Florence2ForConditionalGeneration:()=>t0,Florence2PreTrainedModel:()=>e0,GLPNForDepthEstimation:()=>VL,GLPNModel:()=>zL,GLPNPreTrainedModel:()=>lM,GPT2LMHeadModel:()=>Zm,GPT2Model:()=>Qm,GPT2PreTrainedModel:()=>Nf,GPTBigCodeForCausalLM:()=>$,GPTBigCodeModel:()=>S,GPTBigCodePreTrainedModel:()=>Rf,GPTJForCausalLM:()=>ig,GPTJModel:()=>ng,GPTJPreTrainedModel:()=>Lf,GPTNeoForCausalLM:()=>Df,GPTNeoModel:()=>qu,GPTNeoPreTrainedModel:()=>If,GPTNeoXForCausalLM:()=>rg,GPTNeoXModel:()=>tg,GPTNeoXPreTrainedModel:()=>Xu,Gemma2ForCausalLM:()=>iD,Gemma2Model:()=>nD,Gemma2PreTrainedModel:()=>jT,Gemma3ForCausalLM:()=>aD,Gemma3Model:()=>sD,Gemma3PreTrainedModel:()=>CT,Gemma3nForConditionalGeneration:()=>mc,Gemma3nPreTrainedModel:()=>s0,GemmaForCausalLM:()=>rD,GemmaModel:()=>tD,GemmaPreTrainedModel:()=>ET,GlmForCausalLM:()=>VI,GlmModel:()=>zI,GlmPreTrainedModel:()=>bT,GraniteForCausalLM:()=>ZI,GraniteModel:()=>QI,GranitePreTrainedModel:()=>ST,GroundingDinoForObjectDetection:()=>eR,GroundingDinoPreTrainedModel:()=>JL,GroupViTModel:()=>RD,GroupViTPreTrainedModel:()=>LD,HeliumForCausalLM:()=>BI,HeliumModel:()=>u0,HeliumPreTrainedModel:()=>zo,HieraForImageClassification:()=>yL,HieraModel:()=>vL,HieraPreTrainedModel:()=>nM,HubertForCTC:()=>CR,HubertForSequenceClassification:()=>AR,HubertModel:()=>jR,HubertPreTrainedModel:()=>Nle,IJepaForImageClassification:()=>ED,IJepaModel:()=>PD,IJepaPreTrainedModel:()=>BT,Idefics3ForConditionalGeneration:()=>Vu,Idefics3PreTrainedModel:()=>gc,ImageMattingOutput:()=>X3,JAISLMHeadModel:()=>eg,JAISModel:()=>Jm,JAISPreTrainedModel:()=>Ku,JinaCLIPModel:()=>Xm,JinaCLIPPreTrainedModel:()=>Of,JinaCLIPTextModel:()=>Ym,JinaCLIPVisionModel:()=>Gu,Lfm2ForCausalLM:()=>Kt,Lfm2Model:()=>_t,Lfm2PreTrainedModel:()=>st,LiteWhisperForConditionalGeneration:()=>zm,LlamaForCausalLM:()=>Ke,LlamaModel:()=>Le,LlamaPreTrainedModel:()=>be,LlavaForConditionalGeneration:()=>Cf,LlavaOnevisionForConditionalGeneration:()=>Z_,LlavaPreTrainedModel:()=>jf,LlavaQwen2ForCausalLM:()=>i0,LongT5ForConditionalGeneration:()=>ei,LongT5Model:()=>Gn,LongT5PreTrainedModel:()=>Or,M2M100ForConditionalGeneration:()=>uR,M2M100Model:()=>cR,M2M100PreTrainedModel:()=>mM,MBartForCausalLM:()=>jn,MBartForConditionalGeneration:()=>hi,MBartForSequenceClassification:()=>xa,MBartModel:()=>Ya,MBartPreTrainedModel:()=>Ni,MPNetForMaskedLM:()=>Fu,MPNetForQuestionAnswering:()=>U,MPNetForSequenceClassification:()=>Bu,MPNetForTokenClassification:()=>Te,MPNetModel:()=>Ru,MPNetPreTrainedModel:()=>Xa,MT5ForConditionalGeneration:()=>Si,MT5Model:()=>Hn,MT5PreTrainedModel:()=>bn,MarianMTModel:()=>lR,MarianModel:()=>oR,MarianPreTrainedModel:()=>pM,MaskFormerForInstanceSegmentation:()=>BL,MaskFormerModel:()=>FL,MaskFormerPreTrainedModel:()=>oM,MaskedLMOutput:()=>pi,Metric3DForDepthEstimation:()=>DL,Metric3DPreTrainedModel:()=>IL,Metric3Dv2ForDepthEstimation:()=>RL,Metric3Dv2PreTrainedModel:()=>LL,MgpstrForSceneTextRecognition:()=>SF,MgpstrModelOutput:()=>TF,MgpstrPreTrainedModel:()=>MF,MimiDecoderModel:()=>LF,MimiDecoderOutput:()=>NF,MimiEncoderModel:()=>DF,MimiEncoderOutput:()=>$F,MimiModel:()=>IF,MimiPreTrainedModel:()=>k0,MistralForCausalLM:()=>GR,MistralModel:()=>WR,MistralPreTrainedModel:()=>vM,MobileBertForMaskedLM:()=>pl,MobileBertForQuestionAnswering:()=>ml,MobileBertForSequenceClassification:()=>qa,MobileBertModel:()=>Vr,MobileBertPreTrainedModel:()=>ut,MobileLLMForCausalLM:()=>HI,MobileLLMModel:()=>GI,MobileLLMPreTrainedModel:()=>kT,MobileNetV1ForImageClassification:()=>cF,MobileNetV1ForSemanticSegmentation:()=>uF,MobileNetV1Model:()=>lF,MobileNetV1PreTrainedModel:()=>_0,MobileNetV2ForImageClassification:()=>fF,MobileNetV2ForSemanticSegmentation:()=>hF,MobileNetV2Model:()=>dF,MobileNetV2PreTrainedModel:()=>x0,MobileNetV3ForImageClassification:()=>mF,MobileNetV3ForSemanticSegmentation:()=>gF,MobileNetV3Model:()=>pF,MobileNetV3PreTrainedModel:()=>b0,MobileNetV4ForImageClassification:()=>yF,MobileNetV4ForSemanticSegmentation:()=>_F,MobileNetV4Model:()=>vF,MobileNetV4PreTrainedModel:()=>w0,MobileViTForImageClassification:()=>WD,MobileViTModel:()=>UD,MobileViTPreTrainedModel:()=>WT,MobileViTV2ForImageClassification:()=>HD,MobileViTV2Model:()=>GD,MobileViTV2PreTrainedModel:()=>GT,ModelOutput:()=>we,ModernBertDecoderForCausalLM:()=>Zr,ModernBertDecoderModel:()=>xn,ModernBertDecoderPreTrainedModel:()=>$t,ModernBertForMaskedLM:()=>ct,ModernBertForSequenceClassification:()=>Ht,ModernBertForTokenClassification:()=>Ut,ModernBertModel:()=>nt,ModernBertPreTrainedModel:()=>We,Moondream1ForConditionalGeneration:()=>J_,MoonshineForConditionalGeneration:()=>Q_,MoonshineModel:()=>xT,MoonshinePreTrainedModel:()=>Vm,MptForCausalLM:()=>wD,MptModel:()=>bD,MptPreTrainedModel:()=>LT,MultiModalityCausalLM:()=>kF,MultiModalityPreTrainedModel:()=>wF,MusicgenForCausalLM:()=>Rle,MusicgenForConditionalGeneration:()=>MM,MusicgenModel:()=>Lle,MusicgenPreTrainedModel:()=>TM,NeoBertForMaskedLM:()=>Fe,NeoBertForQuestionAnswering:()=>He,NeoBertForSequenceClassification:()=>ze,NeoBertForTokenClassification:()=>Je,NeoBertModel:()=>me,NeoBertPreTrainedModel:()=>Ce,NomicBertModel:()=>Cs,NomicBertPreTrainedModel:()=>dn,OPTForCausalLM:()=>TD,OPTModel:()=>kD,OPTPreTrainedModel:()=>RT,Olmo2ForCausalLM:()=>YI,Olmo2Model:()=>XI,Olmo2PreTrainedModel:()=>MT,OlmoForCausalLM:()=>qI,OlmoModel:()=>KI,OlmoPreTrainedModel:()=>TT,OpenELMForCausalLM:()=>lD,OpenELMModel:()=>oD,OpenELMPreTrainedModel:()=>AT,OwlViTForObjectDetection:()=>qD,OwlViTModel:()=>KD,OwlViTPreTrainedModel:()=>HT,Owlv2ForObjectDetection:()=>YD,Owlv2Model:()=>XD,Owlv2PreTrainedModel:()=>KT,PaliGemmaForConditionalGeneration:()=>n0,PaliGemmaPreTrainedModel:()=>r0,PatchTSMixerForPrediction:()=>CF,PatchTSMixerModel:()=>jF,PatchTSMixerPreTrainedModel:()=>PM,PatchTSTForPrediction:()=>EF,PatchTSTModel:()=>PF,PatchTSTPreTrainedModel:()=>SM,Phi3ForCausalLM:()=>yD,Phi3Model:()=>vD,Phi3PreTrainedModel:()=>IT,Phi3VForCausalLM:()=>Uu,Phi3VPreTrainedModel:()=>a0,PhiForCausalLM:()=>gD,PhiModel:()=>mD,PhiPreTrainedModel:()=>NT,PreTrainedModel:()=>J,PretrainedMixin:()=>Tr,PvtForImageClassification:()=>OD,PvtModel:()=>AD,PvtPreTrainedModel:()=>zT,PyAnnoteForAudioFrameClassification:()=>gR,PyAnnoteModel:()=>mR,PyAnnotePreTrainedModel:()=>gM,QuestionAnsweringModelOutput:()=>Ii,Qwen2ForCausalLM:()=>uD,Qwen2Model:()=>cD,Qwen2PreTrainedModel:()=>OT,Qwen2VLForConditionalGeneration:()=>pD,Qwen2VLPreTrainedModel:()=>hD,Qwen3ForCausalLM:()=>fD,Qwen3Model:()=>dD,Qwen3PreTrainedModel:()=>$T,RFDetrForObjectDetection:()=>lL,RFDetrModel:()=>oL,RFDetrObjectDetectionOutput:()=>cL,RFDetrPreTrainedModel:()=>JT,RTDetrForObjectDetection:()=>nL,RTDetrModel:()=>rL,RTDetrObjectDetectionOutput:()=>sg,RTDetrPreTrainedModel:()=>QT,RTDetrV2ForObjectDetection:()=>sL,RTDetrV2Model:()=>iL,RTDetrV2ObjectDetectionOutput:()=>aL,RTDetrV2PreTrainedModel:()=>ZT,ResNetForImageClassification:()=>xL,ResNetModel:()=>_L,ResNetPreTrainedModel:()=>iM,RoFormerForMaskedLM:()=>kr,RoFormerForQuestionAnswering:()=>Hs,RoFormerForSequenceClassification:()=>li,RoFormerForTokenClassification:()=>ci,RoFormerModel:()=>er,RoFormerPreTrainedModel:()=>vt,RobertaForMaskedLM:()=>Nm,RobertaForQuestionAnswering:()=>V_,RobertaForSequenceClassification:()=>B_,RobertaForTokenClassification:()=>z_,RobertaModel:()=>F_,RobertaPreTrainedModel:()=>dc,SamImageSegmentationOutput:()=>aR,SamModel:()=>sR,SamPreTrainedModel:()=>iR,SapiensForDepthEstimation:()=>AL,SapiensForNormalEstimation:()=>OL,SapiensForSemanticSegmentation:()=>CL,SapiensPreTrainedModel:()=>h0,SegformerForImageClassification:()=>rF,SegformerForSemanticSegmentation:()=>nF,SegformerModel:()=>Dle,SegformerPreTrainedModel:()=>y0,Seq2SeqLMOutput:()=>Kle,SequenceClassifierOutput:()=>qt,SiglipModel:()=>c0,SiglipPreTrainedModel:()=>Af,SiglipTextModel:()=>Km,SiglipVisionModel:()=>qm,SmolLM3ForCausalLM:()=>ti,SmolLM3Model:()=>$r,SmolLM3PreTrainedModel:()=>pr,SmolVLMForConditionalGeneration:()=>Um,SnacDecoderModel:()=>GF,SnacEncoderModel:()=>WF,SnacModel:()=>UF,SnacPreTrainedModel:()=>M0,SpeechT5ForSpeechToText:()=>FR,SpeechT5ForTextToSpeech:()=>BR,SpeechT5HifiGan:()=>zR,SpeechT5Model:()=>Ile,SpeechT5PreTrainedModel:()=>g0,SqueezeBertForMaskedLM:()=>xe,SqueezeBertForQuestionAnswering:()=>De,SqueezeBertForSequenceClassification:()=>ke,SqueezeBertModel:()=>he,SqueezeBertPreTrainedModel:()=>ie,StableLmForCausalLM:()=>sF,StableLmModel:()=>iF,StableLmPreTrainedModel:()=>wM,Starcoder2ForCausalLM:()=>XR,Starcoder2Model:()=>qR,Starcoder2PreTrainedModel:()=>_M,StyleTextToSpeech2Model:()=>RR,StyleTextToSpeech2PreTrainedModel:()=>LR,Swin2SRForImageSuperResolution:()=>ML,Swin2SRModel:()=>TL,Swin2SRPreTrainedModel:()=>sM,SwinForImageClassification:()=>wL,SwinForSemanticSegmentation:()=>kL,SwinModel:()=>bL,SwinPreTrainedModel:()=>f0,T5ForConditionalGeneration:()=>hn,T5Model:()=>mr,T5PreTrainedModel:()=>br,TableTransformerForObjectDetection:()=>hL,TableTransformerModel:()=>fL,TableTransformerObjectDetectionOutput:()=>pL,TableTransformerPreTrainedModel:()=>tM,TokenClassifierOutput:()=>ri,TrOCRForCausalLM:()=>UR,TrOCRPreTrainedModel:()=>VR,UltravoxModel:()=>EM,UltravoxPreTrainedModel:()=>AF,UniSpeechForCTC:()=>xR,UniSpeechForSequenceClassification:()=>bR,UniSpeechModel:()=>_R,UniSpeechPreTrainedModel:()=>p0,UniSpeechSatForAudioFrameClassification:()=>MR,UniSpeechSatForCTC:()=>kR,UniSpeechSatForSequenceClassification:()=>TR,UniSpeechSatModel:()=>wR,UniSpeechSatPreTrainedModel:()=>ag,ViTForImageClassification:()=>SD,ViTMAEModel:()=>ND,ViTMAEPreTrainedModel:()=>$D,ViTMSNForImageClassification:()=>DD,ViTMSNModel:()=>ID,ViTMSNPreTrainedModel:()=>VT,ViTModel:()=>MD,ViTPreTrainedModel:()=>FT,VisionEncoderDecoderModel:()=>zu,VitMatteForImageMatting:()=>VD,VitMattePreTrainedModel:()=>zD,VitPoseForPoseEstimation:()=>CD,VitPosePreTrainedModel:()=>jD,VitsModel:()=>bM,VitsModelOutput:()=>Y3,VitsPreTrainedModel:()=>tF,VoxtralForConditionalGeneration:()=>OF,Wav2Vec2BertForCTC:()=>PR,Wav2Vec2BertForSequenceClassification:()=>ER,Wav2Vec2BertModel:()=>SR,Wav2Vec2BertPreTrainedModel:()=>m0,Wav2Vec2ForAudioFrameClassification:()=>pR,Wav2Vec2ForCTC:()=>fR,Wav2Vec2ForSequenceClassification:()=>hR,Wav2Vec2Model:()=>dR,Wav2Vec2PreTrainedModel:()=>vc,WavLMForAudioFrameClassification:()=>DR,WavLMForCTC:()=>$R,WavLMForSequenceClassification:()=>NR,WavLMForXVector:()=>IR,WavLMModel:()=>OR,WavLMPreTrainedModel:()=>Ff,WeSpeakerResNetModel:()=>yR,WeSpeakerResNetPreTrainedModel:()=>vR,WhisperForConditionalGeneration:()=>Bm,WhisperModel:()=>pc,WhisperPreTrainedModel:()=>Ef,XLMForQuestionAnswering:()=>K_,XLMForSequenceClassification:()=>G_,XLMForTokenClassification:()=>H_,XLMModel:()=>U_,XLMPreTrainedModel:()=>fc,XLMRobertaForMaskedLM:()=>X_,XLMRobertaForQuestionAnswering:()=>Lm,XLMRobertaForSequenceClassification:()=>Im,XLMRobertaForTokenClassification:()=>Dm,XLMRobertaModel:()=>q_,XLMRobertaPreTrainedModel:()=>hc,XLMWithLMHeadModel:()=>W_,XVectorOutput:()=>q3,YolosForObjectDetection:()=>rR,YolosModel:()=>tR,YolosObjectDetectionOutput:()=>nR,YolosPreTrainedModel:()=>hM});var n=r("./src/configs.js"),i=r("./src/backends/onnx.js"),s=r("./src/utils/dtypes.js"),a=r("./src/utils/generic.js"),o=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),c=r("./src/utils/constants.js"),f=r("./src/generation/logits_process.js"),d=r("./src/generation/configuration_utils.js"),h=r("./src/utils/tensor.js"),p=r("./src/utils/image.js"),m=r("./src/utils/maths.js"),g=r("./src/generation/stopping_criteria.js"),x=r("./src/generation/logits_sampler.js"),y=r("./src/env.js"),v=r("./src/models/whisper/generation_whisper.js"),_=r("./src/models/whisper/common_whisper.js");const b={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12},w=new Map,k=new Map,T=new Map;async function M(A,L,X){var mi;let ve=((mi=X.config)==null?void 0:mi["transformers.js_config"])??{},Ae=X.device??ve.device;Ae&&typeof Ae!="string"&&(Ae.hasOwnProperty(L)?Ae=Ae[L]:(console.warn(`device not specified for "${L}". Using the default device.`),Ae=null));const Ee=Ae??(y.apis.IS_NODE_ENV?"cpu":"wasm"),Re=(0,i.deviceToExecutionProviders)(Ee),qe=ve.device_config??{};qe.hasOwnProperty(Ee)&&(ve={...ve,...qe[Ee]});let tt=X.dtype??ve.dtype;if(typeof tt!="string"&&(tt&&tt.hasOwnProperty(L)?tt=tt[L]:(tt=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ee]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${L}". Using the default dtype (${tt}) for this device (${Ee}).`))),tt===s.DATA_TYPES.auto){let nr=ve.dtype;typeof nr!="string"&&(nr=nr==null?void 0:nr[L]),nr&&nr!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(nr)?tt=nr:tt=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ee]??s.DATA_TYPES.fp32}const ot=tt;if(s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(ot)){if(ot===s.DATA_TYPES.fp16&&Ee==="webgpu"&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${Ee}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${ot}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);const Ot=ve.kv_cache_dtype,Bt=Ot?typeof Ot=="string"?Ot:Ot[ot]??"float32":void 0;if(Bt&&!["float32","float16"].includes(Bt))throw new Error(`Invalid kv_cache_dtype: ${Bt}. Should be one of: float32, float16`);const zt={dtype:ot,kv_cache_dtype:Bt,device:Ee},hr=s.DEFAULT_DTYPE_SUFFIX_MAPPING[ot],It=`${L}${hr}.onnx`,rr=`${X.subfolder??""}/${It}`,jt={...X.session_options};jt.executionProviders??(jt.executionProviders=Re);const cr=ve.free_dimension_overrides;cr?jt.freeDimensionOverrides??(jt.freeDimensionOverrides=cr):Ee.startsWith("webnn")&&!jt.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${Ee}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const Lr=y.apis.IS_NODE_ENV&&y.env.useFSCache,Jr=(0,l.getModelFile)(A,rr,!0,X,Lr),Cn=X.use_external_data_format??ve.use_external_data_format;let kn=[];if(Cn){let nr;typeof Cn=="object"?Cn.hasOwnProperty(It)?nr=Cn[It]:Cn.hasOwnProperty(L)?nr=Cn[L]:nr=!1:nr=Cn;const ni=+nr;if(ni>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${ni}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let Ks=0;Ks<ni;++Ks){const Qu=`${It}_data${Ks===0?"":"_"+Ks}`,fs=`${X.subfolder??""}/${Qu}`;kn.push(new Promise(async(ba,S0)=>{const Zu=await(0,l.getModelFile)(A,fs,!0,X,Lr);ba(Zu instanceof Uint8Array?{path:Qu,data:Zu}:Qu)}))}}else jt.externalData!==void 0&&(kn=jt.externalData.map(async nr=>{if(typeof nr.data=="string"){const ni=await(0,l.getModelFile)(A,nr.data,!0,X);return{...nr,data:ni}}return nr}));if(kn.length>0){const nr=await Promise.all(kn);y.apis.IS_NODE_ENV||(jt.externalData=nr)}if(Ee==="webgpu"){const nr=(0,n.getCacheShapes)(X.config,{prefix:"present"});if(Object.keys(nr).length>0&&!(0,i.isONNXProxy)()){const ni={};for(const Ks in nr)ni[Ks]="gpu-buffer";jt.preferredOutputLocation=ni}}return{buffer_or_path:await Jr,session_options:jt,session_config:zt}}async function j(A,L,X){return Object.fromEntries(await Promise.all(Object.keys(L).map(async ve=>{const{buffer_or_path:Ae,session_options:Ee,session_config:Re}=await M(A,L[ve],X),qe=await(0,i.createInferenceSession)(Ae,Ee,Re);return[ve,qe]})))}async function C(A,L,X){return Object.fromEntries(await Promise.all(Object.keys(L).map(async ve=>{const Ae=await(0,l.getModelJSON)(A,L[ve],!1,X);return[ve,Ae]})))}function R(A,L){const X=Object.create(null),ve=[];for(const Re of A.inputNames){const qe=L[Re];if(!(qe instanceof h.Tensor)){ve.push(Re);continue}X[Re]=(0,i.isONNXProxy)()?qe.clone():qe}if(ve.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${ve.join(", ")}.`);const Ae=Object.keys(L).length,Ee=A.inputNames.length;if(Ae>Ee){let Re=Object.keys(L).filter(qe=>!A.inputNames.includes(qe));console.warn(`WARNING: Too many inputs were provided (${Ae} > ${Ee}). The following inputs will be ignored: "${Re.join(", ")}".`)}return X}let I=Promise.resolve();async function N(A,L){const X=R(A,L);try{const ve=Object.fromEntries(Object.entries(X).map(([Re,qe])=>[Re,qe.ort_tensor])),Ae=()=>A.run(ve),Ee=await(y.apis.IS_BROWSER_ENV||y.apis.IS_WEBWORKER_ENV?I=I.then(Ae):Ae());return z(Ee)}catch(ve){const Ae=Object.fromEntries(Object.entries(X).map(([Ee,Re])=>{const qe={type:Re.type,dims:Re.dims,location:Re.location};return qe.location!=="gpu-buffer"&&(qe.data=Re.data),[Ee,qe]}));throw console.error(`An error occurred during model execution: "${ve}".`),console.error("Inputs given to model:",Ae),ve}}function z(A){for(let L in A)(0,i.isONNXTensor)(A[L])?A[L]=new h.Tensor(A[L]):typeof A[L]=="object"&&z(A[L]);return A}function V(A){if(A instanceof h.Tensor)return A;if(A.length===0)throw Error("items must be non-empty");if(Array.isArray(A[0])){if(A.some(L=>L.length!==A[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new h.Tensor("int64",BigInt64Array.from(A.flat().map(L=>BigInt(L))),[A.length,A[0].length])}else return new h.Tensor("int64",BigInt64Array.from(A.map(L=>BigInt(L))),[1,A.length])}function G(A){return new h.Tensor("bool",[A],[1])}async function H(A,L){let{encoder_outputs:X,input_ids:ve,decoder_input_ids:Ae,...Ee}=L;if(!X){const qe=(0,o.pick)(L,A.sessions.model.inputNames);X=(await O(A,qe)).last_hidden_state}return Ee.input_ids=Ae,Ee.encoder_hidden_states=X,A.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(Ee.encoder_attention_mask=L.attention_mask),await ee(A,Ee,!0)}async function O(A,L){const X=A.sessions.model,ve=(0,o.pick)(L,X.inputNames);if(X.inputNames.includes("inputs_embeds")&&!ve.inputs_embeds){if(!L.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");ve.inputs_embeds=await A.encode_text({input_ids:L.input_ids})}if(X.inputNames.includes("token_type_ids")&&!ve.token_type_ids){if(!ve.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");ve.token_type_ids=(0,h.zeros_like)(ve.input_ids)}if(X.inputNames.includes("pixel_mask")&&!ve.pixel_mask){if(!ve.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Ae=ve.pixel_values.dims;ve.pixel_mask=(0,h.ones)([Ae[0],Ae[2],Ae[3]])}return await N(X,ve)}async function q(A,L){const X=await A.encode(L);return await A.decode(X)}async function ee(A,L,X=!1){const ve=A.sessions[X?"decoder_model_merged":"model"],{past_key_values:Ae,...Ee}=L;if(ve.inputNames.includes("use_cache_branch")&&(Ee.use_cache_branch=G(!!Ae)),ve.inputNames.includes("position_ids")&&Ee.attention_mask&&!Ee.position_ids){const qe=["paligemma","gemma3_text","gemma3"].includes(A.config.model_type)?1:0;Ee.position_ids=$e(Ee,Ae,qe)}A.addPastKeyValues(Ee,Ae);const Re=(0,o.pick)(Ee,ve.inputNames);return await N(ve,Re)}function B({modality_token_id:A,inputs_embeds:L,modality_features:X,input_ids:ve,attention_mask:Ae}){const Ee=ve.tolist().map(ot=>ot.reduce((Ot,Bt,zt)=>(Bt==A&&Ot.push(zt),Ot),[])),Re=Ee.reduce((ot,Ot)=>ot+Ot.length,0),qe=X.dims[0];if(Re!==qe)throw new Error(`Number of tokens and features do not match: tokens: ${Re}, features ${qe}`);let tt=0;for(let ot=0;ot<Ee.length;++ot){const Ot=Ee[ot],Bt=L[ot];for(let zt=0;zt<Ot.length;++zt)Bt[Ot[zt]].data.set(X[tt++].data)}return{inputs_embeds:L,attention_mask:Ae}}function D({image_token_id:A,inputs_embeds:L,image_features:X,input_ids:ve,attention_mask:Ae}){return B({modality_token_id:A,inputs_embeds:L,modality_features:X,input_ids:ve,attention_mask:Ae})}function K({audio_token_id:A,inputs_embeds:L,audio_features:X,input_ids:ve,attention_mask:Ae}){return B({modality_token_id:A,inputs_embeds:L,modality_features:X,input_ids:ve,attention_mask:Ae})}async function oe(A,{encode_function:L,merge_function:X,modality_input_name:ve,modality_output_name:Ae,input_ids:Ee=null,attention_mask:Re=null,position_ids:qe=null,inputs_embeds:tt=null,past_key_values:ot=null,generation_config:Ot=null,logits_processor:Bt=null,...zt}){const hr=zt[ve];if(!tt){if(tt=await A.encode_text({input_ids:Ee,...zt}),hr&&Ee.dims[1]!==1){const rr=await L({[ve]:hr,...zt});({inputs_embeds:tt,attention_mask:Re}=X({[Ae]:rr,inputs_embeds:tt,input_ids:Ee,attention_mask:Re}))}else if(ot&&hr&&Ee.dims[1]===1){const rr=Ee.dims[1],jt=Object.values(ot)[0].dims.at(-2);Re=(0,h.cat)([(0,h.ones)([Ee.dims[0],jt]),Re.slice(null,[Re.dims[1]-rr,Re.dims[1]])],1)}}if(!qe&&A.config.model_type==="qwen2_vl"){const{image_grid_thw:rr,video_grid_thw:jt}=zt;[qe]=A.get_rope_index(Ee,rr,jt,Re)}return await ee(A,{inputs_embeds:tt,past_key_values:ot,attention_mask:Re,position_ids:qe,generation_config:Ot,logits_processor:Bt},!0)}async function _e(A,L){return await oe(A,{...L,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:A.encode_audio.bind(A),merge_function:A._merge_input_ids_with_audio_features.bind(A)})}async function ue(A,L){return await oe(A,{...L,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:A.encode_image.bind(A),merge_function:A._merge_input_ids_with_image_features.bind(A)})}function ye(A,L=0){const[X,ve]=A.dims,Ae=A.data,Ee=new BigInt64Array(Ae.length);for(let Re=0;Re<X;++Re){const qe=Re*ve;let tt=BigInt(L);for(let ot=0;ot<ve;++ot){const Ot=qe+ot;Ae[Ot]===0n?Ee[Ot]=BigInt(1):(Ee[Ot]=tt,tt+=Ae[Ot])}}return{data:Ee,dims:A.dims}}function $e(A,L=null,X=0){const{input_ids:ve,inputs_embeds:Ae,attention_mask:Ee}=A,{data:Re,dims:qe}=ye(Ee,X);let tt=new h.Tensor("int64",Re,qe);if(L){const ot=-(ve??Ae).dims.at(1);tt=tt.slice(null,[ot,null])}return tt}function Se(A,L,X,ve){const Ae=X.past_key_values?Object.values(X.past_key_values)[0].dims.at(-2):0;if(!X.attention_mask){let Ee;for(const Re of["input_ids","inputs_embeds","position_ids"])if(X[Re]){Ee=X[Re].dims;break}if(!Ee)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");X.attention_mask=(0,h.ones)([Ee[0],Ae+Ee[1]])}if(X.past_key_values){const{input_ids:Ee,attention_mask:Re}=X;Re&&Re.dims[1]>Ee.dims[1]||Ae<Ee.dims[1]&&(X.input_ids=Ee.slice(null,[Ae,null]))}return X}function ge(A,L,X,ve){return X.past_key_values&&(L=L.map(Ae=>[Ae.at(-1)])),{...X,decoder_input_ids:V(L)}}function te(A,...L){return A.config.is_encoder_decoder?ge(A,...L):Se(A,...L)}function re(A,L,X,ve){const Ae=!!X.past_key_values;return ve.guidance_scale!==null&&ve.guidance_scale>1&&(Ae?X.input_ids=(0,h.cat)([X.input_ids,X.input_ids],0):(X.input_ids=(0,h.cat)([X.input_ids,(0,h.full_like)(X.input_ids,BigInt(ve.pad_token_id))],0),X.attention_mask=(0,h.cat)([X.attention_mask,(0,h.full_like)(X.attention_mask,0n)],0))),(Ae||!X.pixel_values)&&(X.pixel_values=(0,h.full)([0,0,3,384,384],1)),Ae&&(X.images_seq_mask=new h.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),X.images_emb_mask=new h.Tensor("bool",new Array(0).fill(!1),[1,1,0])),X}class J extends a.Callable{constructor(X,ve,Ae){super();de(this,"main_input_name","input_ids");de(this,"forward_params",["input_ids","attention_mask"]);this.config=X,this.sessions=ve,this.configs=Ae;const Ee=T.get(this.constructor),Re=w.get(Ee);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,Re){case b.DecoderOnly:this.can_generate=!0,this._forward=ee,this._prepare_inputs_for_generation=Se;break;case b.Seq2Seq:case b.Vision2Seq:case b.Musicgen:this.can_generate=!0,this._forward=H,this._prepare_inputs_for_generation=ge;break;case b.EncoderDecoder:this._forward=H;break;case b.ImageTextToText:this.can_generate=!0,this._forward=ue,this._prepare_inputs_for_generation=te;break;case b.AudioTextToText:this.can_generate=!0,this._forward=_e,this._prepare_inputs_for_generation=te;break;case b.Phi3V:case b.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=te;break;case b.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=re;break;case b.AutoEncoder:this._forward=q;break;default:this._forward=O;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){var ve;const X=[];for(const Ae of Object.values(this.sessions))(ve=Ae==null?void 0:Ae.handler)!=null&&ve.dispose&&X.push(Ae.handler.dispose());return await Promise.all(X)}static async from_pretrained(X,{progress_callback:ve=null,config:Ae=null,cache_dir:Ee=null,local_files_only:Re=!1,revision:qe="main",model_file_name:tt=null,subfolder:ot="onnx",device:Ot=null,dtype:Bt=null,use_external_data_format:zt=null,session_options:hr={}}={}){let It={progress_callback:ve,config:Ae,cache_dir:Ee,local_files_only:Re,revision:qe,model_file_name:tt,subfolder:ot,device:Ot,dtype:Bt,use_external_data_format:zt,session_options:hr};const rr=T.get(this),jt=w.get(rr);Ae=It.config=await n.AutoConfig.from_pretrained(X,It);let cr;if(jt===b.DecoderOnly)cr=await Promise.all([j(X,{model:It.model_file_name??"model"},It),C(X,{generation_config:"generation_config.json"},It)]);else if(jt===b.Seq2Seq||jt===b.Vision2Seq)cr=await Promise.all([j(X,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},It),C(X,{generation_config:"generation_config.json"},It)]);else if(jt===b.MaskGeneration)cr=await Promise.all([j(X,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},It)]);else if(jt===b.EncoderDecoder)cr=await Promise.all([j(X,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},It)]);else if(jt===b.ImageTextToText){const Lr={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Ae.is_encoder_decoder&&(Lr.model="encoder_model"),cr=await Promise.all([j(X,Lr,It),C(X,{generation_config:"generation_config.json"},It)])}else if(jt===b.AudioTextToText){const Lr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};cr=await Promise.all([j(X,Lr,It),C(X,{generation_config:"generation_config.json"},It)])}else if(jt===b.ImageAudioTextToText){const Lr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};cr=await Promise.all([j(X,Lr,It),C(X,{generation_config:"generation_config.json"},It)])}else if(jt===b.Musicgen)cr=await Promise.all([j(X,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},It),C(X,{generation_config:"generation_config.json"},It)]);else if(jt===b.MultiModality)cr=await Promise.all([j(X,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},It),C(X,{generation_config:"generation_config.json"},It)]);else if(jt===b.Phi3V)cr=await Promise.all([j(X,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},It),C(X,{generation_config:"generation_config.json"},It)]);else if(jt===b.AutoEncoder)cr=await Promise.all([j(X,{encoder_model:"encoder_model",decoder_model:"decoder_model"},It)]);else{if(jt!==b.EncoderOnly){const Lr=rr??(Ae==null?void 0:Ae.model_type);Lr!=="custom"&&console.warn(`Model type for '${Lr}' not found, assuming encoder-only architecture. Please report this at ${c.GITHUB_ISSUE_URL}.`)}cr=await Promise.all([j(X,{model:It.model_file_name??"model"},It)])}return new this(Ae,...cr)}async _call(X){return await this.forward(X)}async forward(X){return await this._forward(this,X)}get generation_config(){var X;return((X=this.configs)==null?void 0:X.generation_config)??null}_get_logits_warper(X){const ve=new f.LogitsProcessorList;return X.temperature!==null&&X.temperature!==1&&ve.push(new f.TemperatureLogitsWarper(X.temperature)),X.top_k!==null&&X.top_k!==0&&ve.push(new f.TopKLogitsWarper(X.top_k)),X.top_p!==null&&X.top_p<1&&ve.push(new f.TopPLogitsWarper(X.top_p)),ve}_get_logits_processor(X,ve,Ae=null){const Ee=new f.LogitsProcessorList;if(X.repetition_penalty!==null&&X.repetition_penalty!==1&&Ee.push(new f.RepetitionPenaltyLogitsProcessor(X.repetition_penalty)),X.no_repeat_ngram_size!==null&&X.no_repeat_ngram_size>0&&Ee.push(new f.NoRepeatNGramLogitsProcessor(X.no_repeat_ngram_size)),X.bad_words_ids!==null&&Ee.push(new f.NoBadWordsLogitsProcessor(X.bad_words_ids,X.eos_token_id)),X.min_length!==null&&X.eos_token_id!==null&&X.min_length>0&&Ee.push(new f.MinLengthLogitsProcessor(X.min_length,X.eos_token_id)),X.min_new_tokens!==null&&X.eos_token_id!==null&&X.min_new_tokens>0&&Ee.push(new f.MinNewTokensLengthLogitsProcessor(ve,X.min_new_tokens,X.eos_token_id)),X.forced_bos_token_id!==null&&Ee.push(new f.ForcedBOSTokenLogitsProcessor(X.forced_bos_token_id)),X.forced_eos_token_id!==null&&Ee.push(new f.ForcedEOSTokenLogitsProcessor(X.max_length,X.forced_eos_token_id)),X.begin_suppress_tokens!==null){const Re=ve>1||X.forced_bos_token_id===null?ve:ve+1;Ee.push(new f.SuppressTokensAtBeginLogitsProcessor(X.begin_suppress_tokens,Re))}return X.guidance_scale!==null&&X.guidance_scale>1&&Ee.push(new f.ClassifierFreeGuidanceLogitsProcessor(X.guidance_scale)),Ae!==null&&Ee.extend(Ae),Ee}_prepare_generation_config(X,ve,Ae=d.GenerationConfig){const Ee={...this.config};for(const qe of["decoder","generator","text_config"])qe in Ee&&Object.assign(Ee,Ee[qe]);const Re=new Ae(Ee);return Object.assign(Re,this.generation_config??{}),X&&Object.assign(Re,X),ve&&Object.assign(Re,(0,o.pick)(ve,Object.getOwnPropertyNames(Re))),Re}_get_stopping_criteria(X,ve=null){const Ae=new g.StoppingCriteriaList;return X.max_length!==null&&Ae.push(new g.MaxLengthCriteria(X.max_length,this.config.max_position_embeddings??null)),X.eos_token_id!==null&&Ae.push(new g.EosTokenCriteria(X.eos_token_id)),ve&&Ae.extend(ve),Ae}_validate_model_class(){if(!this.can_generate){const X=[AM,OM,CM,jM],ve=T.get(this.constructor),Ae=new Set,Ee=this.config.model_type;for(const qe of X){const tt=qe.get(Ee);tt&&Ae.add(tt[0])}let Re=`The current model class (${ve}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw Ae.size>0&&(Re+=` Please use the following class instead: ${[...Ae].join(", ")}`),Error(Re)}}prepare_inputs_for_generation(...X){return this._prepare_inputs_for_generation(this,...X)}_update_model_kwargs_for_generation({generated_input_ids:X,outputs:ve,model_inputs:Ae,is_encoder_decoder:Ee}){return Ae.past_key_values=this.getPastKeyValues(ve,Ae.past_key_values),Ae.input_ids=new h.Tensor("int64",X.flat(),[X.length,1]),Ee||(Ae.attention_mask=(0,h.cat)([Ae.attention_mask,(0,h.ones)([Ae.attention_mask.dims[0],1])],1)),Ae.position_ids=null,Ae}_prepare_model_inputs({inputs:X,bos_token_id:ve,model_kwargs:Ae}){const Ee=(0,o.pick)(Ae,this.forward_params),Re=this.main_input_name;if(Re in Ee){if(X)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else Ee[Re]=X;return{inputs_tensor:Ee[Re],model_inputs:Ee,model_input_name:Re}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:X,model_inputs:ve,model_input_name:Ae,generation_config:Ee}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!ve.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:qe,pixel_values:tt,attention_mask:ot,...Ot}=ve,Bt=await this._prepare_inputs_embeds(ve);ve={...Ot,...(0,o.pick)(Bt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:Re}=await O(this,ve);if(Ee.guidance_scale!==null&&Ee.guidance_scale>1)Re=(0,h.cat)([Re,(0,h.full_like)(Re,0)],0),"attention_mask"in ve&&(ve.attention_mask=(0,h.cat)([ve.attention_mask,(0,h.zeros_like)(ve.attention_mask)],0));else if(ve.decoder_input_ids){const qe=V(ve.decoder_input_ids).dims[0];if(qe!==Re.dims[0]){if(Re.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${Re.dims[0]}) than the decoder inputs (${qe}).`);Re=(0,h.cat)(Array.from({length:qe},()=>Re),0)}}return ve.encoder_outputs=Re,ve}_prepare_decoder_input_ids_for_generation({batch_size:X,model_input_name:ve,model_kwargs:Ae,decoder_start_token_id:Ee,bos_token_id:Re,generation_config:qe}){let{decoder_input_ids:tt,...ot}=Ae;if(!(tt instanceof h.Tensor)){if(tt)Array.isArray(tt[0])||(tt=Array.from({length:X},()=>tt));else if(Ee??(Ee=Re),this.config.model_type==="musicgen")tt=Array.from({length:X*this.config.decoder.num_codebooks},()=>[Ee]);else if(Array.isArray(Ee)){if(Ee.length!==X)throw new Error(`\`decoder_start_token_id\` expcted to have length ${X} but got ${Ee.length}`);tt=Ee}else tt=Array.from({length:X},()=>[Ee]);tt=V(tt)}return Ae.decoder_attention_mask=(0,h.ones_like)(tt),{input_ids:tt,model_inputs:ot}}async generate({inputs:X=null,generation_config:ve=null,logits_processor:Ae=null,stopping_criteria:Ee=null,streamer:Re=null,...qe}){this._validate_model_class(),ve=this._prepare_generation_config(ve,qe);let{inputs_tensor:tt,model_inputs:ot,model_input_name:Ot}=this._prepare_model_inputs({inputs:X,model_kwargs:qe});const Bt=this.config.is_encoder_decoder;Bt&&("encoder_outputs"in ot||(ot=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:tt,model_inputs:ot,model_input_name:Ot,generation_config:ve})));let zt;Bt?{input_ids:zt,model_inputs:ot}=this._prepare_decoder_input_ids_for_generation({batch_size:ot[Ot].dims.at(0),model_input_name:Ot,model_kwargs:ot,decoder_start_token_id:ve.decoder_start_token_id,bos_token_id:ve.bos_token_id,generation_config:ve}):zt=ot[Ot];let hr=zt.dims.at(-1);ve.max_new_tokens!==null&&(ve.max_length=hr+ve.max_new_tokens);const It=this._get_logits_processor(ve,hr,Ae),rr=this._get_stopping_criteria(ve,Ee),jt=ot[Ot].dims.at(0),cr=x.LogitsSampler.getSampler(ve),Lr=new Array(jt).fill(0),Jr=zt.tolist();Re&&Re.put(Jr);let Cn,kn={};for(;;){if(ot=this.prepare_inputs_for_generation(Jr,ot,ve),Cn=await this.forward(ot),ve.output_attentions&&ve.return_dict_in_generate){const fs=this.getAttentions(Cn);for(const ba in fs)ba in kn||(kn[ba]=[]),kn[ba].push(fs[ba])}const nr=Cn.logits.slice(null,-1,null),ni=It(Jr,nr),Ks=[];for(let fs=0;fs<ni.dims.at(0);++fs){const ba=ni[fs],S0=await cr(ba);for(const[Zu,P0]of S0){const E0=BigInt(Zu);Lr[fs]+=P0,Jr[fs].push(E0),Ks.push([E0]);break}}if(Re&&Re.put(Ks),rr(Jr).every(fs=>fs))break;ot=this._update_model_kwargs_for_generation({generated_input_ids:Ks,outputs:Cn,model_inputs:ot,is_encoder_decoder:Bt})}Re&&Re.end();const qn=this.getPastKeyValues(Cn,ot.past_key_values,!0),mi=new h.Tensor("int64",Jr.flat(),[Jr.length,Jr[0].length]);if(ve.return_dict_in_generate)return{sequences:mi,past_key_values:qn,...kn};for(const nr of Object.values(Cn))nr.location==="gpu-buffer"&&nr.dispose();return mi}getPastKeyValues(X,ve,Ae=!1){const Ee=Object.create(null);for(const Re in X)if(Re.startsWith("present")){const qe=Re.replace("present_conv","past_conv").replace("present","past_key_values"),tt=Re.includes("encoder");if(tt&&ve?Ee[qe]=ve[qe]:Ee[qe]=X[Re],ve&&(!tt||Ae)){const ot=ve[qe];ot.location==="gpu-buffer"&&ot.dispose()}}return Ee}getAttentions(X){const ve={};for(const Ae of["cross_attentions","encoder_attentions","decoder_attentions"])for(const Ee in X)Ee.startsWith(Ae)&&(Ae in ve||(ve[Ae]=[]),ve[Ae].push(X[Ee]));return ve}addPastKeyValues(X,ve){var Ae,Ee,Re;if(ve)Object.assign(X,ve);else{const qe=this.sessions.decoder_model_merged??this.sessions.model,tt=((Ee=(Ae=X[this.main_input_name]??X.attention_mask)==null?void 0:Ae.dims)==null?void 0:Ee[0])??1,ot=((Re=qe==null?void 0:qe.config)==null?void 0:Re.kv_cache_dtype)??"float32",Ot=ot==="float16"?h.DataTypeMap.float16:h.DataTypeMap.float32,Bt=(0,n.getCacheShapes)(this.config,{batch_size:tt});for(const zt in Bt){const hr=Bt[zt].reduce((It,rr)=>It*rr,1);X[zt]=new h.Tensor(ot,new Ot(hr),Bt[zt])}}}async encode_image({pixel_values:X}){return(await N(this.sessions.vision_encoder,{pixel_values:X})).image_features}async encode_text({input_ids:X}){return(await N(this.sessions.embed_tokens,{input_ids:X})).inputs_embeds}async encode_audio({audio_values:X}){return(await N(this.sessions.audio_encoder,{audio_values:X})).audio_features}}class we{}class Ne extends we{constructor({last_hidden_state:L,hidden_states:X=null,attentions:ve=null}){super(),this.last_hidden_state=L,this.hidden_states=X,this.attentions=ve}}class je extends J{}class Pe extends je{}class Z extends je{async _call(L){return new pi(await super._call(L))}}class ne extends je{async _call(L){return new qt(await super._call(L))}}class fe extends je{async _call(L){return new ri(await super._call(L))}}class Me extends je{async _call(L){return new Ii(await super._call(L))}}class Ce extends J{}class me extends Ce{}class Fe extends Ce{async _call(L){return new pi(await super._call(L))}}class ze extends Ce{async _call(L){return new qt(await super._call(L))}}class Je extends Ce{async _call(L){return new ri(await super._call(L))}}class He extends Ce{async _call(L){return new Ii(await super._call(L))}}class We extends J{}class nt extends We{}class ct extends We{async _call(L){return new pi(await super._call(L))}}class Ht extends We{async _call(L){return new qt(await super._call(L))}}class Ut extends We{async _call(L){return new ri(await super._call(L))}}class $t extends J{}class xn extends $t{}class Zr extends $t{}class dn extends J{}class Cs extends dn{}class vt extends J{}class er extends vt{}class kr extends vt{async _call(L){return new pi(await super._call(L))}}class li extends vt{async _call(L){return new qt(await super._call(L))}}class ci extends vt{async _call(L){return new ri(await super._call(L))}}class Hs extends vt{async _call(L){return new Ii(await super._call(L))}}class Et extends J{}class Lo extends Et{}class Ro extends Et{async _call(L){return new pi(await super._call(L))}}class tr extends Et{async _call(L){return new qt(await super._call(L))}}class zr extends Et{async _call(L){return new ri(await super._call(L))}}class F extends Et{async _call(L){return new Ii(await super._call(L))}}class ce extends J{}class Q extends ce{}class le extends ce{async _call(L){return new pi(await super._call(L))}}class pe extends ce{async _call(L){return new qt(await super._call(L))}}class Oe extends ce{async _call(L){return new ri(await super._call(L))}}class Ue extends ce{async _call(L){return new Ii(await super._call(L))}}class ht extends J{}class Dt extends ht{}class At extends ht{async _call(L){return new pi(await super._call(L))}}class Wt extends ht{async _call(L){return new qt(await super._call(L))}}class pt extends ht{async _call(L){return new ri(await super._call(L))}}class xr extends ht{async _call(L){return new Ii(await super._call(L))}}class Pr extends J{}class zi extends Pr{}class cs extends Pr{async _call(L){return new pi(await super._call(L))}}class fn extends Pr{async _call(L){return new qt(await super._call(L))}}class ui extends Pr{async _call(L){return new ri(await super._call(L))}}class di extends Pr{async _call(L){return new Ii(await super._call(L))}}class Vi extends J{}class _a extends Vi{}class fi extends Vi{async _call(L){return new pi(await super._call(L))}}class Fo extends Vi{async _call(L){return new qt(await super._call(L))}}class Bo extends Vi{async _call(L){return new ri(await super._call(L))}}class Ui extends Vi{async _call(L){return new Ii(await super._call(L))}}class Wi extends J{}class As extends Wi{}class Mi extends Wi{async _call(L){return new qt(await super._call(L))}}class Ka extends Wi{async _call(L){return new ri(await super._call(L))}}class Ln extends Wi{async _call(L){return new Ii(await super._call(L))}}class Wn extends Wi{async _call(L){return new pi(await super._call(L))}}class us extends J{}class hl extends us{}class Gi extends us{async _call(L){return new pi(await super._call(L))}}class Xe extends us{async _call(L){return new qt(await super._call(L))}}class Ye extends us{async _call(L){return new ri(await super._call(L))}}class ut extends J{}class Vr extends ut{}class pl extends ut{async _call(L){return new pi(await super._call(L))}}class qa extends ut{async _call(L){return new qt(await super._call(L))}}class ml extends ut{async _call(L){return new Ii(await super._call(L))}}class Xa extends J{}class Ru extends Xa{}class Fu extends Xa{async _call(L){return new pi(await super._call(L))}}class Bu extends Xa{async _call(L){return new qt(await super._call(L))}}class Te extends Xa{async _call(L){return new ri(await super._call(L))}}class U extends Xa{async _call(L){return new Ii(await super._call(L))}}class ie extends J{}class he extends ie{}class xe extends ie{async _call(L){return new pi(await super._call(L))}}class ke extends ie{async _call(L){return new qt(await super._call(L))}}class De extends ie{async _call(L){return new Ii(await super._call(L))}}class Qe extends J{}class at extends Qe{}class it extends Qe{async _call(L){return new qt(await super._call(L))}}class ft extends Qe{async _call(L){return new Ii(await super._call(L))}}class Rt extends Qe{async _call(L){return new pi(await super._call(L))}}class br extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class mr extends br{}class hn extends br{}class Or extends J{}class Gn extends Or{}class ei extends Or{}class bn extends J{}class Hn extends bn{}class Si extends bn{}class ds extends J{}class Xr extends ds{}class Kn extends ds{}class Hi extends ds{async _call(L){return new qt(await super._call(L))}}class Ni extends J{}class Ya extends Ni{}class hi extends Ni{}class xa extends Ni{async _call(L){return new qt(await super._call(L))}}class jn extends Ni{}class wn extends J{}class Rn extends wn{}class pn extends wn{}class Ki extends J{}class gl extends Ki{}class Pf extends Ki{}class dc extends J{}class F_ extends dc{}class Nm extends dc{async _call(L){return new pi(await super._call(L))}}class B_ extends dc{async _call(L){return new qt(await super._call(L))}}class z_ extends dc{async _call(L){return new ri(await super._call(L))}}class V_ extends dc{async _call(L){return new Ii(await super._call(L))}}class fc extends J{}class U_ extends fc{}class W_ extends fc{async _call(L){return new pi(await super._call(L))}}class G_ extends fc{async _call(L){return new qt(await super._call(L))}}class H_ extends fc{async _call(L){return new ri(await super._call(L))}}class K_ extends fc{async _call(L){return new Ii(await super._call(L))}}class hc extends J{}class q_ extends hc{}class X_ extends hc{async _call(L){return new pi(await super._call(L))}}class Im extends hc{async _call(L){return new qt(await super._call(L))}}class Dm extends hc{async _call(L){return new ri(await super._call(L))}}class Lm extends hc{async _call(L){return new Ii(await super._call(L))}}class Rm extends J{}class Y_ extends Rm{}class Fm extends Rm{}class Ef extends J{constructor(){super(...arguments);de(this,"requires_attention_mask",!1);de(this,"main_input_name","input_features");de(this,"forward_params",["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class pc extends Ef{}class Bm extends Ef{_prepare_generation_config(L,X){return super._prepare_generation_config(L,X,v.WhisperGenerationConfig)}_retrieve_init_tokens(L){const X=[L.decoder_start_token_id];let ve=L.language;const Ae=L.task;if(L.is_multilingual){ve||(console.warn("No language specified - defaulting to English (en)."),ve="en");const Re=`<|${(0,_.whisper_language_to_code)(ve)}|>`;X.push(L.lang_to_id[Re]),X.push(L.task_to_id[Ae??"transcribe"])}else if(ve||Ae)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!L.return_timestamps&&L.no_timestamps_token_id&&X.at(-1)!==L.no_timestamps_token_id?X.push(L.no_timestamps_token_id):L.return_timestamps&&X.at(-1)===L.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),X.pop()),X.filter(Ee=>Ee!=null)}async generate({inputs:L=null,generation_config:X=null,logits_processor:ve=null,stopping_criteria:Ae=null,...Ee}){X=this._prepare_generation_config(X,Ee);const Re=Ee.decoder_input_ids??this._retrieve_init_tokens(X);if(X.return_timestamps&&(ve??(ve=new f.LogitsProcessorList),ve.push(new f.WhisperTimeStampLogitsProcessor(X,Re))),X.begin_suppress_tokens&&(ve??(ve=new f.LogitsProcessorList),ve.push(new f.SuppressTokensAtBeginLogitsProcessor(X.begin_suppress_tokens,Re.length))),X.return_token_timestamps){if(!X.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");X.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),X.output_attentions=!0,X.return_dict_in_generate=!0}const qe=await super.generate({inputs:L,generation_config:X,logits_processor:ve,decoder_input_ids:Re,...Ee});return X.return_token_timestamps&&(qe.token_timestamps=this._extract_token_timestamps(qe,X.alignment_heads,X.num_frames)),qe}_extract_token_timestamps(L,X,ve=null,Ae=.02){if(!L.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");ve==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let Ee=this.config.median_filter_width;Ee===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Ee=7);const Re=L.cross_attentions,qe=Array.from({length:this.config.decoder_layers},(rr,jt)=>(0,h.cat)(Re.map(cr=>cr[jt]),2)),tt=(0,h.stack)(X.map(([rr,jt])=>{if(rr>=qe.length)throw new Error(`Layer index ${rr} is out of bounds for cross attentions (length ${qe.length}).`);return ve?qe[rr].slice(null,jt,null,[0,ve]):qe[rr].slice(null,jt)})).transpose(1,0,2,3),[ot,Ot]=(0,h.std_mean)(tt,-2,0,!0),Bt=tt.clone();for(let rr=0;rr<Bt.dims[0];++rr){const jt=Bt[rr];for(let cr=0;cr<jt.dims[0];++cr){const Lr=jt[cr],Jr=ot[rr][cr][0].data,Cn=Ot[rr][cr][0].data;for(let kn=0;kn<Lr.dims[0];++kn){let qn=Lr[kn].data;for(let mi=0;mi<qn.length;++mi)qn[mi]=(qn[mi]-Cn[mi])/Jr[mi];qn.set((0,m.medianFilter)(qn,Ee))}}}const zt=[(0,h.mean)(Bt,1)],hr=L.sequences.dims,It=new h.Tensor("float32",new Float32Array(hr[0]*hr[1]),hr);for(let rr=0;rr<hr[0];++rr){const jt=zt[rr].neg().squeeze_(0),[cr,Lr]=(0,m.dynamic_time_warping)(jt.tolist()),Jr=Array.from({length:cr.length-1},(qn,mi)=>cr[mi+1]-cr[mi]),Cn=(0,o.mergeArrays)([1],Jr).map(qn=>!!qn),kn=[];for(let qn=0;qn<Cn.length;++qn)Cn[qn]&&kn.push(Lr[qn]*Ae);It[rr].data.set(kn,1)}return It}}class zm extends Bm{}class Vm extends J{constructor(){super(...arguments);de(this,"requires_attention_mask",!1);de(this,"main_input_name","input_values");de(this,"forward_params",["input_values","decoder_input_ids","past_key_values"])}}class xT extends Vm{}class Q_ extends Vm{}class zu extends J{constructor(){super(...arguments);de(this,"main_input_name","pixel_values");de(this,"forward_params",["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"])}}class jf extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class Cf extends jf{_merge_input_ids_with_image_features(L){const X=L.image_features.dims.at(-1),ve=L.image_features.view(-1,X);return D({image_token_id:this.config.image_token_index,...L,image_features:ve})}}class Z_ extends Cf{}class J_ extends Cf{}class e0 extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"]);de(this,"main_input_name","inputs_embeds")}}class t0 extends e0{_merge_input_ids_with_image_features({inputs_embeds:L,image_features:X,input_ids:ve,attention_mask:Ae}){return{inputs_embeds:(0,h.cat)([X,L],1),attention_mask:(0,h.cat)([(0,h.ones)(X.dims.slice(0,2)),Ae],1)}}async _prepare_inputs_embeds({input_ids:L,pixel_values:X,inputs_embeds:ve,attention_mask:Ae}){if(!L&&!X)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let Ee,Re;return L&&(Ee=await this.encode_text({input_ids:L})),X&&(Re=await this.encode_image({pixel_values:X})),Ee&&Re?{inputs_embeds:ve,attention_mask:Ae}=this._merge_input_ids_with_image_features({inputs_embeds:Ee,image_features:Re,input_ids:L,attention_mask:Ae}):ve=Ee||Re,{inputs_embeds:ve,attention_mask:Ae}}async forward({input_ids:L,pixel_values:X,attention_mask:ve,decoder_input_ids:Ae,decoder_attention_mask:Ee,encoder_outputs:Re,past_key_values:qe,inputs_embeds:tt,decoder_inputs_embeds:ot}){if(tt||({inputs_embeds:tt,attention_mask:ve}=await this._prepare_inputs_embeds({input_ids:L,pixel_values:X,inputs_embeds:tt,attention_mask:ve})),!Re){let{last_hidden_state:zt}=await O(this,{inputs_embeds:tt,attention_mask:ve});Re=zt}if(!ot){if(!Ae)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");ot=await this.encode_text({input_ids:Ae})}return await ee(this,{inputs_embeds:ot,attention_mask:Ee,encoder_attention_mask:ve,encoder_hidden_states:Re,past_key_values:qe},!0)}}class r0 extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class n0 extends r0{_merge_input_ids_with_image_features(L){const X=L.image_features.dims.at(-1),ve=L.image_features.view(-1,X);return D({image_token_id:this.config.image_token_index,...L,image_features:ve})}}class i0 extends jf{_merge_input_ids_with_image_features(L){const X=L.image_features.dims.at(-1),ve=L.image_features.view(-1,X);return D({image_token_id:this.config.image_token_index,...L,image_features:ve})}}class s0 extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"])}}class mc extends s0{async forward({input_ids:L=null,attention_mask:X=null,pixel_values:ve=null,input_features:Ae=null,input_features_mask:Ee=null,position_ids:Re=null,inputs_embeds:qe=null,per_layer_inputs:tt=null,past_key_values:ot=null,generation_config:Ot=null,logits_processor:Bt=null,...zt}){if((!qe||!tt)&&({inputs_embeds:qe,per_layer_inputs:tt}=await N(this.sessions.embed_tokens,{input_ids:L}),L.dims[1]!==1)){if(ve){const{image_features:It}=await N(this.sessions.vision_encoder,{pixel_values:ve});({inputs_embeds:qe,attention_mask:X}=this._merge_input_ids_with_image_features({image_features:It,inputs_embeds:qe,input_ids:L,attention_mask:X}))}if(Ae){const{audio_features:It}=await N(this.sessions.audio_encoder,{input_features:Ae,input_features_mask:Ee});({inputs_embeds:qe,attention_mask:X}=this._merge_input_ids_with_audio_features({audio_features:It,inputs_embeds:qe,input_ids:L,attention_mask:X}))}}return await ee(this,{inputs_embeds:qe,per_layer_inputs:tt,past_key_values:ot,attention_mask:X,position_ids:Re,generation_config:Ot,logits_processor:Bt},!0)}_merge_input_ids_with_image_features(L){const X=L.image_features.dims.at(-1),ve=L.image_features.view(-1,X);return D({image_token_id:this.config.image_token_id,...L,image_features:ve})}_merge_input_ids_with_audio_features(L){const X=L.audio_features.dims.at(-1),ve=L.audio_features.view(-1,X);return K({audio_token_id:this.config.audio_token_id,...L,audio_features:ve})}}class gc extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"])}}class Vu extends gc{async encode_image({pixel_values:L,pixel_attention_mask:X}){return(await N(this.sessions.vision_encoder,{pixel_values:L,pixel_attention_mask:X})).image_features}_merge_input_ids_with_image_features(L){const X=L.image_features.dims.at(-1),ve=L.image_features.view(-1,X);return D({image_token_id:this.config.image_token_id,...L,image_features:ve})}}class Um extends Vu{}class a0 extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"])}}class Uu extends a0{async forward({input_ids:L=null,attention_mask:X=null,pixel_values:ve=null,image_sizes:Ae=null,position_ids:Ee=null,inputs_embeds:Re=null,past_key_values:qe=null,generation_config:tt=null,logits_processor:ot=null,...Ot}){if(!Re){let zt;if(ve&&L.dims[1]!==1){if(!Ae)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:zt}=await N(this.sessions.vision_encoder,{pixel_values:ve,image_sizes:Ae}))}else{const hr=this.config.normalized_config.hidden_size;zt=new h.Tensor("float32",[],[0,hr])}({inputs_embeds:Re}=await N(this.sessions.prepare_inputs_embeds,{input_ids:L,image_features:zt}))}return await ee(this,{inputs_embeds:Re,past_key_values:qe,attention_mask:X,position_ids:Ee,generation_config:tt,logits_processor:ot},!1)}}class Qa extends J{}class Wm extends Qa{}class o0 extends Qa{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"text_model"})}}class Gm extends Qa{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"text_model"})}}class l0 extends Qa{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"vision_model"})}}class Hm extends Qa{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"vision_model"})}}class Af extends J{}class c0 extends Af{}class Km extends Af{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"text_model"})}}class qm extends Qa{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"vision_model"})}}class Wu extends J{}class Ct extends Wu{}class Of extends J{}class Xm extends Of{async forward(L){const X=!L.input_ids,ve=!L.pixel_values;if(X&&ve)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(X&&(L.input_ids=(0,h.ones)([L.pixel_values.dims[0],1])),ve){const{image_size:ot}=this.config.vision_config;L.pixel_values=(0,h.full)([0,3,ot,ot],0)}const{text_embeddings:Ae,image_embeddings:Ee,l2norm_text_embeddings:Re,l2norm_image_embeddings:qe}=await super.forward(L),tt={};return X||(tt.text_embeddings=Ae,tt.l2norm_text_embeddings=Re),ve||(tt.image_embeddings=Ee,tt.l2norm_image_embeddings=qe),tt}}class Ym extends Of{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"text_model"})}}class Gu extends Of{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"vision_model"})}}class Os extends J{}class Hu extends Os{}class $f extends Os{}class Nf extends J{}class Qm extends Nf{}class Zm extends Nf{}class Ku extends J{}class Jm extends Ku{}class eg extends Ku{}class If extends J{}class qu extends If{}class Df extends If{}class Xu extends J{}class tg extends Xu{}class rg extends Xu{}class Lf extends J{}class ng extends Lf{}class ig extends Lf{}class Rf extends J{}class S extends Rf{}class $ extends Rf{}class W extends J{}class Y extends W{}class se extends W{}class be extends J{}class Le extends be{}class Ke extends be{}class st extends J{}class _t extends st{}class Kt extends st{}class pr extends J{}class $r extends pr{}class ti extends pr{}class zo extends J{}class u0 extends zo{}class BI extends zo{}class bT extends J{}class zI extends bT{}class VI extends bT{}class wT extends J{}class UI extends wT{}class WI extends wT{}class kT extends J{}class GI extends kT{}class HI extends kT{}class TT extends J{}class KI extends TT{}class qI extends TT{}class MT extends J{}class XI extends MT{}class YI extends MT{}class ST extends J{}class QI extends ST{}class ZI extends ST{}class PT extends J{}class JI extends PT{}class eD extends PT{}class ET extends J{}class tD extends ET{}class rD extends ET{}class jT extends J{}class nD extends jT{}class iD extends jT{}class CT extends J{}class sD extends CT{}class aD extends CT{}class AT extends J{}class oD extends AT{}class lD extends AT{}class OT extends J{}class cD extends OT{}class uD extends OT{}class $T extends J{}class dD extends $T{}class fD extends $T{}class hD extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"])}}class pD extends hD{get_rope_index(L,X,ve,Ae){const{vision_config:Ee,image_token_id:Re,video_token_id:qe,vision_start_token_id:tt}=this.config,ot=Ee.spatial_merge_size??2,Ot=[];if(X||ve){let Bt=L.tolist();Ae||(Ae=(0,h.ones_like)(L));const zt=Ae.tolist(),hr=Array.from({length:3},Lr=>Array.from({length:L.dims[0]},Jr=>Array.from({length:L.dims[1]},Cn=>1))),It=X?X.tolist():[],rr=ve?ve.tolist():[];let jt=0,cr=0;for(let Lr=0;Lr<Bt.length;++Lr){const Jr=Bt[Lr].filter((en,ii)=>zt[Lr][ii]==1),kn=Jr.reduce((en,ii,yc)=>(ii==tt&&en.push(yc),en),[]).map(en=>Jr[en+1]),qn=kn.filter(en=>en==Re).length,mi=kn.filter(en=>en==qe).length;let nr=[],ni=0,Ks=qn,Qu=mi;for(let en=0;en<kn.length;++en){const ii=Jr.findIndex((ed,Za)=>Za>ni&&ed==Re),yc=Jr.findIndex((ed,Za)=>Za>ni&&ed==qe),Ju=Ks>0&&ii!==-1?ii:Jr.length+1,zf=Qu>0&&yc!==-1?yc:Jr.length+1;let j0,NM,IM,DM;Ju<zf?([NM,IM,DM]=It[jt],++jt,--Ks,j0=Ju):([NM,IM,DM]=rr[cr],++cr,--Qu,j0=zf);const[Xle,LM,C0]=[Number(NM),Math.floor(Number(IM)/ot),Math.floor(Number(DM)/ot)],RM=j0-ni,Q3=nr.length>0?(0,m.max)(nr.at(-1))[0]+1:0;nr.push(Array.from({length:3*RM},(ed,Za)=>Q3+Za%RM));const FM=RM+Q3,A0=Xle*LM*C0,Yle=Array.from({length:A0},(ed,Za)=>FM+Math.floor(Za/(LM*C0))),Qle=Array.from({length:A0},(ed,Za)=>FM+Math.floor(Za/C0)%LM),Zle=Array.from({length:A0},(ed,Za)=>FM+Za%C0);nr.push([Yle,Qle,Zle].flat()),ni=j0+A0}if(ni<Jr.length){const en=nr.length>0?(0,m.max)(nr.at(-1))[0]+1:0,ii=Jr.length-ni;nr.push(Array.from({length:3*ii},(yc,Ju)=>en+Ju%ii))}const fs=nr.reduce((en,ii)=>en+ii.length,0),ba=new Array(fs);let S0=0;for(let en=0;en<3;++en)for(let ii=0;ii<nr.length;++ii){const yc=nr[ii],Ju=yc.length/3;for(let zf=en*Ju;zf<(en+1)*Ju;++zf)ba[S0++]=yc[zf]}let Zu=0;const P0=zt[Lr];for(let en=0;en<P0.length;++en)if(P0[en]==1){for(let ii=0;ii<3;++ii)hr[ii][Lr][en]=ba[ii*fs/3+Zu];++Zu}const E0=(0,m.max)(ba)[0];Ot.push(E0+1-Bt[Lr].length)}return[new h.Tensor("int64",hr.flat(1/0),[3,L.dims[0],L.dims[1]]),new h.Tensor("int64",Ot,[Ot.length,1])]}else if(Ae){const{data:Bt,dims:zt}=ye(Ae),hr=BigInt64Array.from({length:3*Bt.length},(rr,jt)=>Bt[jt%Bt.length]),It=Array.from({length:zt[0]},(rr,jt)=>(0,m.max)(Bt.subarray(zt[1]*jt,zt[1]*(jt+1)))[0]+1n+BigInt(zt[1]));return[new h.Tensor("int64",hr,[3,...zt]),new h.Tensor("int64",It,[It.length,1])]}else{const[Bt,zt]=L.dims,hr=BigInt64Array.from({length:3*Bt*zt},(It,rr)=>BigInt(Math.floor(rr%zt/Bt)));return[new h.Tensor("int64",hr,[3,...L.dims]),(0,h.zeros)([Bt,1])]}}async encode_image({pixel_values:L,image_grid_thw:X}){return(await N(this.sessions.vision_encoder,{pixel_values:L,grid_thw:X})).image_features}_merge_input_ids_with_image_features(L){return D({image_token_id:this.config.image_token_id,...L})}prepare_inputs_for_generation(L,X,ve){if(X.attention_mask&&!X.position_ids)if(!X.past_key_values)[X.position_ids,X.rope_deltas]=this.get_rope_index(X.input_ids,X.image_grid_thw,X.video_grid_thw,X.attention_mask);else{X.pixel_values=null;const Ae=BigInt(Object.values(X.past_key_values)[0].dims.at(-2)),Ee=X.rope_deltas.map(Re=>Ae+Re);X.position_ids=(0,h.stack)([Ee,Ee,Ee],0)}return X}}class NT extends J{}class mD extends NT{}class gD extends NT{}class IT extends J{}class vD extends IT{}class yD extends IT{}class DT extends J{}class _D extends DT{}class xD extends DT{}class LT extends J{}class bD extends LT{}class wD extends LT{}class RT extends J{}class kD extends RT{}class TD extends RT{}class FT extends J{}class MD extends FT{}class SD extends FT{async _call(L){return new qt(await super._call(L))}}class BT extends J{}class PD extends BT{}class ED extends BT{async _call(L){return new qt(await super._call(L))}}class jD extends J{}class CD extends jD{}class zT extends J{}class AD extends zT{}class OD extends zT{async _call(L){return new qt(await super._call(L))}}class $D extends J{}class ND extends $D{}class VT extends J{}class ID extends VT{}class DD extends VT{async _call(L){return new qt(await super._call(L))}}class LD extends J{}class RD extends LD{}class UT extends J{}class FD extends UT{}class BD extends UT{async _call(L){return new qt(await super._call(L))}}class zD extends J{}class VD extends zD{async _call(L){return new X3(await super._call(L))}}class WT extends J{}class UD extends WT{}class WD extends WT{async _call(L){return new qt(await super._call(L))}}class GT extends J{}class GD extends GT{}class HD extends GT{async _call(L){return new qt(await super._call(L))}}class HT extends J{}class KD extends HT{}class qD extends HT{}class KT extends J{}class XD extends KT{}class YD extends KT{}class qT extends J{}class QD extends qT{}class ZD extends qT{async _call(L){return new qt(await super._call(L))}}class d0 extends J{}class JD extends d0{}class eL extends d0{async _call(L){return new YT(await super._call(L))}}class XT extends d0{async _call(L){return new tL(await super._call(L))}}class YT extends we{constructor({logits:L,pred_boxes:X}){super(),this.logits=L,this.pred_boxes=X}}class tL extends we{constructor({logits:L,pred_boxes:X,pred_masks:ve}){super(),this.logits=L,this.pred_boxes=X,this.pred_masks=ve}}class QT extends J{}class rL extends QT{}class nL extends QT{async _call(L){return new sg(await super._call(L))}}class sg extends we{constructor({logits:L,pred_boxes:X}){super(),this.logits=L,this.pred_boxes=X}}class ZT extends J{}class iL extends ZT{}class sL extends ZT{async _call(L){return new aL(await super._call(L))}}class aL extends sg{}class JT extends J{}class oL extends JT{}class lL extends JT{async _call(L){return new cL(await super._call(L))}}class cL extends sg{}class eM extends J{}class uL extends eM{}class dL extends eM{async _call(L){return new sg(await super._call(L))}}class tM extends J{}class fL extends tM{}class hL extends tM{async _call(L){return new pL(await super._call(L))}}class pL extends YT{}class rM extends J{}class mL extends rM{}class gL extends rM{async _call(L){return new qt(await super._call(L))}}class nM extends J{}class vL extends nM{}class yL extends nM{async _call(L){return new qt(await super._call(L))}}class iM extends J{}class _L extends iM{}class xL extends iM{async _call(L){return new qt(await super._call(L))}}class f0 extends J{}class bL extends f0{}class wL extends f0{async _call(L){return new qt(await super._call(L))}}class kL extends f0{}class sM extends J{}class TL extends sM{}class ML extends sM{}class aM extends J{}class SL extends aM{}class PL extends aM{}class EL extends J{}class jL extends EL{}class h0 extends J{}class CL extends h0{}class AL extends h0{}class OL extends h0{}class $L extends J{}class NL extends $L{}class IL extends J{}class DL extends IL{}class LL extends J{}class RL extends LL{}class oM extends J{}class FL extends oM{}class BL extends oM{}class lM extends J{}class zL extends lM{}class VL extends lM{}class UL extends J{}class WL extends UL{}class cM extends J{}class GL extends cM{}class HL extends cM{async _call(L){return new qt(await super._call(L))}}class uM extends J{}class KL extends uM{}class qL extends uM{async _call(L){return new qt(await super._call(L))}}class dM extends J{}class XL extends dM{}class YL extends dM{async _call(L){return new qt(await super._call(L))}}class fM extends J{}class QL extends fM{}class ZL extends fM{async _call(L){return new qt(await super._call(L))}}class JL extends J{}class eR extends JL{}class hM extends J{}class tR extends hM{}class rR extends hM{async _call(L){return new nR(await super._call(L))}}class nR extends we{constructor({logits:L,pred_boxes:X}){super(),this.logits=L,this.pred_boxes=X}}class iR extends J{}class sR extends iR{async get_image_embeddings({pixel_values:L}){return await O(this,{pixel_values:L})}async forward(L){if((!L.image_embeddings||!L.image_positional_embeddings)&&(L={...L,...await this.get_image_embeddings(L)}),!L.input_labels&&L.input_points){const ve=L.input_points.dims.slice(0,-1),Ae=ve.reduce((Ee,Re)=>Ee*Re,1);L.input_labels=new h.Tensor("int64",new BigInt64Array(Ae).fill(1n),ve)}const X={image_embeddings:L.image_embeddings,image_positional_embeddings:L.image_positional_embeddings};return L.input_points&&(X.input_points=L.input_points),L.input_labels&&(X.input_labels=L.input_labels),L.input_boxes&&(X.input_boxes=L.input_boxes),await N(this.sessions.prompt_encoder_mask_decoder,X)}async _call(L){return new aR(await super._call(L))}}class aR extends we{constructor({iou_scores:L,pred_masks:X}){super(),this.iou_scores=L,this.pred_masks=X}}class pM extends J{}class oR extends pM{}class lR extends pM{}class mM extends J{}class cR extends mM{}class uR extends mM{}class vc extends J{}class dR extends vc{}class fR extends vc{async _call(L){return new Yu(await super._call(L))}}class hR extends vc{async _call(L){return new qt(await super._call(L))}}class pR extends vc{async _call(L){return new ri(await super._call(L))}}class gM extends J{}class mR extends gM{}class gR extends gM{async _call(L){return new ri(await super._call(L))}}class vR extends J{}class yR extends vR{}class p0 extends J{}class _R extends p0{}class xR extends p0{async _call(L){return new Yu(await super._call(L))}}class bR extends p0{async _call(L){return new qt(await super._call(L))}}class ag extends J{}class wR extends ag{}class kR extends ag{async _call(L){return new Yu(await super._call(L))}}class TR extends ag{async _call(L){return new qt(await super._call(L))}}class MR extends ag{async _call(L){return new ri(await super._call(L))}}class m0 extends J{}class SR extends m0{}class PR extends m0{async _call(L){return new Yu(await super._call(L))}}class ER extends m0{async _call(L){return new qt(await super._call(L))}}class Nle extends J{}class jR extends vc{}class CR extends vc{async _call(L){return new Yu(await super._call(L))}}class AR extends vc{async _call(L){return new qt(await super._call(L))}}class Ff extends J{}class OR extends Ff{}class $R extends Ff{async _call(L){return new Yu(await super._call(L))}}class NR extends Ff{async _call(L){return new qt(await super._call(L))}}class IR extends Ff{async _call(L){return new q3(await super._call(L))}}class DR extends Ff{async _call(L){return new ri(await super._call(L))}}class LR extends J{}class RR extends LR{}class g0 extends J{}class Ile extends g0{}class FR extends g0{}class BR extends g0{async generate_speech(L,X,{threshold:ve=.5,minlenratio:Ae=0,maxlenratio:Ee=20,vocoder:Re=null}={}){const qe={input_ids:L},{encoder_outputs:tt,encoder_attention_mask:ot}=await O(this,qe),Ot=tt.dims[1]/this.config.reduction_factor,Bt=Math.floor(Ot*Ee),zt=Math.floor(Ot*Ae),hr=this.config.num_mel_bins;let It=[],rr=null,jt=null,cr=0;for(;;){++cr;const Cn=G(!!jt);let kn;jt?kn=jt.output_sequence_out:kn=new h.Tensor("float32",new Float32Array(hr),[1,1,hr]);let qn={use_cache_branch:Cn,output_sequence:kn,encoder_attention_mask:ot,speaker_embeddings:X,encoder_hidden_states:tt};this.addPastKeyValues(qn,rr),jt=await N(this.sessions.decoder_model_merged,qn),rr=this.getPastKeyValues(jt,rr);const{prob:mi,spectrum:nr}=jt;if(It.push(nr),cr>=zt&&(Array.from(mi.data).filter(ni=>ni>=ve).length>0||cr>=Bt))break}const Lr=(0,h.cat)(It),{waveform:Jr}=await N(Re.sessions.model,{spectrogram:Lr});return{spectrogram:Lr,waveform:Jr}}}class zR extends J{constructor(){super(...arguments);de(this,"main_input_name","spectrogram")}}class VR extends J{}class UR extends VR{}class vM extends J{}class WR extends vM{}class GR extends vM{}class yM extends J{}class HR extends yM{}class KR extends yM{}class _M extends J{}class qR extends _M{}class XR extends _M{}class xM extends J{}class YR extends xM{}class QR extends xM{}class v0 extends J{}class ZR extends v0{}class JR extends v0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"text_model"})}}class eF extends v0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"audio_model"})}}class tF extends J{}class bM extends tF{async _call(L){return new Y3(await super._call(L))}}class y0 extends J{}class Dle extends y0{}class rF extends y0{}class nF extends y0{}class wM extends J{}class iF extends wM{}class sF extends wM{}class kM extends J{}class aF extends kM{}class oF extends kM{async _call(L){return new qt(await super._call(L))}}class TM extends J{}class Lle extends TM{}class Rle extends TM{}class MM extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}_apply_and_filter_by_delay_pattern_mask(X){const[ve,Ae]=X.dims,Ee=this.config.decoder.num_codebooks,Re=Ae-Ee;let qe=0;for(let Ot=0;Ot<X.size;++Ot){if(X.data[Ot]===this.config.decoder.pad_token_id)continue;const Bt=Ot%Ae,zt=Math.floor(Ot/Ae)%Ee,hr=Bt-zt;hr>0&&hr<=Re&&(X.data[qe++]=X.data[Ot])}const tt=Math.floor(ve/Ee),ot=qe/(tt*Ee);return new h.Tensor(X.type,X.data.slice(0,qe),[tt,Ee,ot])}prepare_inputs_for_generation(X,ve,Ae){let Ee=structuredClone(X);for(let qe=0;qe<Ee.length;++qe)for(let tt=0;tt<Ee[qe].length;++tt)qe%this.config.decoder.num_codebooks>=tt&&(Ee[qe][tt]=BigInt(this.config.decoder.pad_token_id));return Ae.guidance_scale!==null&&Ae.guidance_scale>1&&(Ee=Ee.concat(Ee)),super.prepare_inputs_for_generation(Ee,ve,Ae)}async generate(X){const ve=await super.generate(X),Ae=this._apply_and_filter_by_delay_pattern_mask(ve).unsqueeze_(0),{audio_values:Ee}=await N(this.sessions.encodec_decode,{audio_codes:Ae});return Ee}}class _0 extends J{}class lF extends _0{}class cF extends _0{async _call(L){return new qt(await super._call(L))}}class uF extends _0{}class x0 extends J{}class dF extends x0{}class fF extends x0{async _call(L){return new qt(await super._call(L))}}class hF extends x0{}class b0 extends J{}class pF extends b0{}class mF extends b0{async _call(L){return new qt(await super._call(L))}}class gF extends b0{}class w0 extends J{}class vF extends w0{}class yF extends w0{async _call(L){return new qt(await super._call(L))}}class _F extends w0{}class xF extends J{}class bF extends xF{}class wF extends J{}class kF extends wF{constructor(...X){super(...X);de(this,"forward_params",["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"]);this._generation_mode="text"}async forward(X){const ve=this._generation_mode??"text";let Ae;if(ve==="text"||!X.past_key_values){const ot=this.sessions.prepare_inputs_embeds,Ot=(0,o.pick)(X,ot.inputNames);Ae=await N(ot,Ot)}else{const ot=this.sessions.gen_img_embeds,Ot=(0,o.pick)({image_ids:X.input_ids},ot.inputNames);Ae=await N(ot,Ot)}const Ee={...X,...Ae},Re=await ee(this,Ee),qe=this.sessions[ve==="text"?"lm_head":"gen_head"];if(!qe)throw new Error(`Unable to find "${qe}" generation head`);const tt=await N(qe,(0,o.pick)(Re,qe.inputNames));return{...Ae,...Re,...tt}}async generate(X){return this._generation_mode="text",super.generate(X)}async generate_images(X){this._generation_mode="image";const ve=(X.inputs??X[this.main_input_name]).dims[1],Ee=(await super.generate(X)).slice(null,[ve,null]),Re=this.sessions.image_decode,{decoded_image:qe}=await N(Re,{generated_tokens:Ee}),tt=qe.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),ot=[];for(const Ot of tt){const Bt=p.RawImage.fromTensor(Ot);ot.push(Bt)}return ot}}class TF extends we{constructor({char_logits:L,bpe_logits:X,wp_logits:ve}){super(),this.char_logits=L,this.bpe_logits=X,this.wp_logits=ve}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class MF extends J{}class SF extends MF{async _call(L){return new TF(await super._call(L))}}class SM extends J{}class PF extends SM{}class EF extends SM{}class PM extends J{}class jF extends PM{}class CF extends PM{}class AF extends J{constructor(){super(...arguments);de(this,"forward_params",["input_ids","attention_mask","position_ids","audio_values","past_key_values"])}}class EM extends AF{_merge_input_ids_with_audio_features(L){const X=L.audio_features.dims.at(-1),ve=L.audio_features.view(-1,X);return K({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...L,audio_features:ve})}}class OF extends EM{}class k0 extends J{constructor(){super(...arguments);de(this,"main_input_name","input_values");de(this,"forward_params",["input_values"])}}class $F extends we{constructor({audio_codes:L}){super(),this.audio_codes=L}}class NF extends we{constructor({audio_values:L}){super(),this.audio_values=L}}class IF extends k0{async encode(L){return new $F(await N(this.sessions.encoder_model,L))}async decode(L){return new NF(await N(this.sessions.decoder_model,L))}}class DF extends k0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"encoder_model"})}}class LF extends k0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"decoder_model"})}}class T0 extends J{constructor(){super(...arguments);de(this,"main_input_name","input_values");de(this,"forward_params",["input_values"])}}class RF extends we{constructor({audio_codes:L}){super(),this.audio_codes=L}}class FF extends we{constructor({audio_values:L}){super(),this.audio_values=L}}class BF extends T0{async encode(L){return new RF(await N(this.sessions.encoder_model,L))}async decode(L){return new FF(await N(this.sessions.decoder_model,L))}}class zF extends T0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"encoder_model"})}}class VF extends T0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"decoder_model"})}}class M0 extends J{constructor(){super(...arguments);de(this,"main_input_name","input_values");de(this,"forward_params",["input_values"])}}class UF extends M0{async encode(L){return await N(this.sessions.encoder_model,L)}async decode(L){return await N(this.sessions.decoder_model,L)}}class WF extends M0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"encoder_model"})}}class GF extends M0{static async from_pretrained(L,X={}){return super.from_pretrained(L,{...X,model_file_name:X.model_file_name??"decoder_model"})}}class Tr{static async from_pretrained(L,{progress_callback:X=null,config:ve=null,cache_dir:Ae=null,local_files_only:Ee=!1,revision:Re="main",model_file_name:qe=null,subfolder:tt="onnx",device:ot=null,dtype:Ot=null,use_external_data_format:Bt=null,session_options:zt={}}={}){const hr={progress_callback:X,config:ve,cache_dir:Ae,local_files_only:Ee,revision:Re,model_file_name:qe,subfolder:tt,device:ot,dtype:Ot,use_external_data_format:Bt,session_options:zt};if(hr.config=await n.AutoConfig.from_pretrained(L,hr),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const It=hr.config.model_type;for(const rr of this.MODEL_CLASS_MAPPINGS){let jt=rr.get(It);if(!jt){for(const cr of rr.values())if(cr[0]===It){jt=cr;break}if(!jt)continue}return await jt[1].from_pretrained(L,hr)}if(this.BASE_IF_FAIL)return v3.has(It)||console.warn(`Unknown model class "${It}", attempting to construct from base class.`),await J.from_pretrained(L,hr);throw Error(`Unsupported model type: ${It}`)}}de(Tr,"MODEL_CLASS_MAPPINGS",null),de(Tr,"BASE_IF_FAIL",!1);const Fle=new Map([["bert",["BertModel",Pe]],["neobert",["NeoBertModel",me]],["modernbert",["ModernBertModel",nt]],["nomic_bert",["NomicBertModel",Cs]],["roformer",["RoFormerModel",er]],["electra",["ElectraModel",Q]],["esm",["EsmModel",hl]],["convbert",["ConvBertModel",Lo]],["camembert",["CamembertModel",Dt]],["deberta",["DebertaModel",zi]],["deberta-v2",["DebertaV2Model",_a]],["mpnet",["MPNetModel",Ru]],["albert",["AlbertModel",at]],["distilbert",["DistilBertModel",As]],["roberta",["RobertaModel",F_]],["xlm",["XLMModel",U_]],["xlm-roberta",["XLMRobertaModel",q_]],["clap",["ClapModel",ZR]],["clip",["CLIPModel",Wm]],["clipseg",["CLIPSegModel",Hu]],["chinese_clip",["ChineseCLIPModel",Ct]],["siglip",["SiglipModel",c0]],["jina_clip",["JinaCLIPModel",Xm]],["mobilebert",["MobileBertModel",Vr]],["squeezebert",["SqueezeBertModel",he]],["wav2vec2",["Wav2Vec2Model",dR]],["wav2vec2-bert",["Wav2Vec2BertModel",SR]],["unispeech",["UniSpeechModel",_R]],["unispeech-sat",["UniSpeechSatModel",wR]],["hubert",["HubertModel",jR]],["wavlm",["WavLMModel",OR]],["audio-spectrogram-transformer",["ASTModel",Y_]],["vits",["VitsModel",bM]],["pyannote",["PyAnnoteModel",mR]],["wespeaker-resnet",["WeSpeakerResNetModel",yR]],["detr",["DetrModel",JD]],["rt_detr",["RTDetrModel",rL]],["rt_detr_v2",["RTDetrV2Model",iL]],["rf_detr",["RFDetrModel",oL]],["d_fine",["DFineModel",uL]],["table-transformer",["TableTransformerModel",fL]],["vit",["ViTModel",MD]],["ijepa",["IJepaModel",PD]],["pvt",["PvtModel",AD]],["vit_msn",["ViTMSNModel",ID]],["vit_mae",["ViTMAEModel",ND]],["groupvit",["GroupViTModel",RD]],["fastvit",["FastViTModel",FD]],["mobilevit",["MobileViTModel",UD]],["mobilevitv2",["MobileViTV2Model",GD]],["owlvit",["OwlViTModel",KD]],["owlv2",["Owlv2Model",XD]],["beit",["BeitModel",QD]],["deit",["DeiTModel",mL]],["hiera",["HieraModel",vL]],["convnext",["ConvNextModel",GL]],["convnextv2",["ConvNextV2Model",KL]],["dinov2",["Dinov2Model",XL]],["dinov2_with_registers",["Dinov2WithRegistersModel",QL]],["resnet",["ResNetModel",_L]],["swin",["SwinModel",bL]],["swin2sr",["Swin2SRModel",TL]],["donut-swin",["DonutSwinModel",WL]],["yolos",["YolosModel",tR]],["dpt",["DPTModel",SL]],["glpn",["GLPNModel",zL]],["hifigan",["SpeechT5HifiGan",zR]],["efficientnet",["EfficientNetModel",aF]],["decision_transformer",["DecisionTransformerModel",bF]],["patchtst",["PatchTSTForPrediction",PF]],["patchtsmixer",["PatchTSMixerForPrediction",jF]],["mobilenet_v1",["MobileNetV1Model",lF]],["mobilenet_v2",["MobileNetV2Model",dF]],["mobilenet_v3",["MobileNetV3Model",pF]],["mobilenet_v4",["MobileNetV4Model",vF]],["maskformer",["MaskFormerModel",FL]],["mgp-str",["MgpstrForSceneTextRecognition",SF]],["style_text_to_speech_2",["StyleTextToSpeech2Model",RR]]]),Ble=new Map([["t5",["T5Model",mr]],["longt5",["LongT5Model",Gn]],["mt5",["MT5Model",Hn]],["bart",["BartModel",Xr]],["mbart",["MBartModel",Ya]],["marian",["MarianModel",oR]],["whisper",["WhisperModel",pc]],["m2m_100",["M2M100Model",cR]],["blenderbot",["BlenderbotModel",Rn]],["blenderbot-small",["BlenderbotSmallModel",gl]]]),zle=new Map([["mimi",["MimiModel",IF]],["dac",["DacModel",BF]],["snac",["SnacModel",UF]]]),Vle=new Map([["bloom",["BloomModel",_D]],["jais",["JAISModel",Jm]],["gpt2",["GPT2Model",Qm]],["gptj",["GPTJModel",ng]],["gpt_bigcode",["GPTBigCodeModel",S]],["gpt_neo",["GPTNeoModel",qu]],["gpt_neox",["GPTNeoXModel",tg]],["codegen",["CodeGenModel",Y]],["llama",["LlamaModel",Le]],["lfm2",["Lfm2Model",_t]],["smollm3",["SmolLM3Model",$r]],["exaone",["ExaoneModel",UI]],["olmo",["OlmoModel",KI]],["olmo2",["Olmo2Model",XI]],["mobilellm",["MobileLLMModel",GI]],["granite",["GraniteModel",QI]],["cohere",["CohereModel",JI]],["gemma",["GemmaModel",tD]],["gemma2",["Gemma2Model",nD]],["gemma3_text",["Gemma3Model",sD]],["helium",["HeliumModel",u0]],["glm",["GlmModel",zI]],["openelm",["OpenELMModel",oD]],["qwen2",["Qwen2Model",cD]],["qwen3",["Qwen3Model",dD]],["phi",["PhiModel",mD]],["phi3",["Phi3Model",vD]],["mpt",["MptModel",bD]],["opt",["OPTModel",kD]],["mistral",["MistralModel",WR]],["ernie4_5",["Ernie4_5_Model",HR]],["starcoder2",["Starcoder2Model",qR]],["falcon",["FalconModel",YR]],["stablelm",["StableLmModel",iF]],["modernbert-decoder",["ModernBertDecoderModel",xn]]]),jM=new Map([["speecht5",["SpeechT5ForSpeechToText",FR]],["whisper",["WhisperForConditionalGeneration",Bm]],["lite-whisper",["LiteWhisperForConditionalGeneration",zm]],["moonshine",["MoonshineForConditionalGeneration",Q_]]]),HF=new Map([["speecht5",["SpeechT5ForTextToSpeech",BR]]]),KF=new Map([["vits",["VitsModel",bM]],["musicgen",["MusicgenForConditionalGeneration",MM]]]),qF=new Map([["bert",["BertForSequenceClassification",ne]],["neobert",["NeoBertForSequenceClassification",ze]],["modernbert",["ModernBertForSequenceClassification",Ht]],["roformer",["RoFormerForSequenceClassification",li]],["electra",["ElectraForSequenceClassification",pe]],["esm",["EsmForSequenceClassification",Xe]],["convbert",["ConvBertForSequenceClassification",tr]],["camembert",["CamembertForSequenceClassification",Wt]],["deberta",["DebertaForSequenceClassification",fn]],["deberta-v2",["DebertaV2ForSequenceClassification",Fo]],["mpnet",["MPNetForSequenceClassification",Bu]],["albert",["AlbertForSequenceClassification",it]],["distilbert",["DistilBertForSequenceClassification",Mi]],["roberta",["RobertaForSequenceClassification",B_]],["xlm",["XLMForSequenceClassification",G_]],["xlm-roberta",["XLMRobertaForSequenceClassification",Im]],["bart",["BartForSequenceClassification",Hi]],["mbart",["MBartForSequenceClassification",xa]],["mobilebert",["MobileBertForSequenceClassification",qa]],["squeezebert",["SqueezeBertForSequenceClassification",ke]]]),XF=new Map([["bert",["BertForTokenClassification",fe]],["neobert",["NeoBertForTokenClassification",Je]],["modernbert",["ModernBertForTokenClassification",Ut]],["roformer",["RoFormerForTokenClassification",ci]],["electra",["ElectraForTokenClassification",Oe]],["esm",["EsmForTokenClassification",Ye]],["convbert",["ConvBertForTokenClassification",zr]],["camembert",["CamembertForTokenClassification",pt]],["deberta",["DebertaForTokenClassification",ui]],["deberta-v2",["DebertaV2ForTokenClassification",Bo]],["mpnet",["MPNetForTokenClassification",Te]],["distilbert",["DistilBertForTokenClassification",Ka]],["roberta",["RobertaForTokenClassification",z_]],["xlm",["XLMForTokenClassification",H_]],["xlm-roberta",["XLMRobertaForTokenClassification",Dm]]]),CM=new Map([["t5",["T5ForConditionalGeneration",hn]],["longt5",["LongT5ForConditionalGeneration",ei]],["mt5",["MT5ForConditionalGeneration",Si]],["bart",["BartForConditionalGeneration",Kn]],["mbart",["MBartForConditionalGeneration",hi]],["marian",["MarianMTModel",lR]],["m2m_100",["M2M100ForConditionalGeneration",uR]],["blenderbot",["BlenderbotForConditionalGeneration",pn]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",Pf]]]),AM=new Map([["bloom",["BloomForCausalLM",xD]],["gpt2",["GPT2LMHeadModel",Zm]],["jais",["JAISLMHeadModel",eg]],["gptj",["GPTJForCausalLM",ig]],["gpt_bigcode",["GPTBigCodeForCausalLM",$]],["gpt_neo",["GPTNeoForCausalLM",Df]],["gpt_neox",["GPTNeoXForCausalLM",rg]],["codegen",["CodeGenForCausalLM",se]],["llama",["LlamaForCausalLM",Ke]],["lfm2",["Lfm2ForCausalLM",Kt]],["smollm3",["SmolLM3ForCausalLM",ti]],["exaone",["ExaoneForCausalLM",WI]],["olmo",["OlmoForCausalLM",qI]],["olmo2",["Olmo2ForCausalLM",YI]],["mobilellm",["MobileLLMForCausalLM",HI]],["granite",["GraniteForCausalLM",ZI]],["cohere",["CohereForCausalLM",eD]],["gemma",["GemmaForCausalLM",rD]],["gemma2",["Gemma2ForCausalLM",iD]],["gemma3_text",["Gemma3ForCausalLM",aD]],["helium",["HeliumForCausalLM",BI]],["glm",["GlmForCausalLM",VI]],["openelm",["OpenELMForCausalLM",lD]],["qwen2",["Qwen2ForCausalLM",uD]],["qwen3",["Qwen3ForCausalLM",fD]],["phi",["PhiForCausalLM",gD]],["phi3",["Phi3ForCausalLM",yD]],["mpt",["MptForCausalLM",wD]],["opt",["OPTForCausalLM",TD]],["mbart",["MBartForCausalLM",jn]],["mistral",["MistralForCausalLM",GR]],["ernie4_5",["Ernie4_5_ForCausalLM",KR]],["starcoder2",["Starcoder2ForCausalLM",XR]],["falcon",["FalconForCausalLM",QR]],["trocr",["TrOCRForCausalLM",UR]],["stablelm",["StableLmForCausalLM",sF]],["modernbert-decoder",["ModernBertDecoderForCausalLM",Zr]],["phi3_v",["Phi3VForCausalLM",Uu]]]),Ule=new Map([["multi_modality",["MultiModalityCausalLM",kF]]]),YF=new Map([["bert",["BertForMaskedLM",Z]],["neobert",["NeoBertForMaskedLM",Fe]],["modernbert",["ModernBertForMaskedLM",ct]],["roformer",["RoFormerForMaskedLM",kr]],["electra",["ElectraForMaskedLM",le]],["esm",["EsmForMaskedLM",Gi]],["convbert",["ConvBertForMaskedLM",Ro]],["camembert",["CamembertForMaskedLM",At]],["deberta",["DebertaForMaskedLM",cs]],["deberta-v2",["DebertaV2ForMaskedLM",fi]],["mpnet",["MPNetForMaskedLM",Fu]],["albert",["AlbertForMaskedLM",Rt]],["distilbert",["DistilBertForMaskedLM",Wn]],["roberta",["RobertaForMaskedLM",Nm]],["xlm",["XLMWithLMHeadModel",W_]],["xlm-roberta",["XLMRobertaForMaskedLM",X_]],["mobilebert",["MobileBertForMaskedLM",pl]],["squeezebert",["SqueezeBertForMaskedLM",xe]]]),QF=new Map([["bert",["BertForQuestionAnswering",Me]],["neobert",["NeoBertForQuestionAnswering",He]],["roformer",["RoFormerForQuestionAnswering",Hs]],["electra",["ElectraForQuestionAnswering",Ue]],["convbert",["ConvBertForQuestionAnswering",F]],["camembert",["CamembertForQuestionAnswering",xr]],["deberta",["DebertaForQuestionAnswering",di]],["deberta-v2",["DebertaV2ForQuestionAnswering",Ui]],["mpnet",["MPNetForQuestionAnswering",U]],["albert",["AlbertForQuestionAnswering",ft]],["distilbert",["DistilBertForQuestionAnswering",Ln]],["roberta",["RobertaForQuestionAnswering",V_]],["xlm",["XLMForQuestionAnswering",K_]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Lm]],["mobilebert",["MobileBertForQuestionAnswering",ml]],["squeezebert",["SqueezeBertForQuestionAnswering",De]]]),OM=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",zu]],["idefics3",["Idefics3ForConditionalGeneration",Vu]],["smolvlm",["SmolVLMForConditionalGeneration",Um]]]),ZF=new Map([["llava",["LlavaForConditionalGeneration",Cf]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",Z_]],["moondream1",["Moondream1ForConditionalGeneration",J_]],["florence2",["Florence2ForConditionalGeneration",t0]],["qwen2-vl",["Qwen2VLForConditionalGeneration",pD]],["idefics3",["Idefics3ForConditionalGeneration",Vu]],["smolvlm",["SmolVLMForConditionalGeneration",Um]],["paligemma",["PaliGemmaForConditionalGeneration",n0]],["llava_qwen2",["LlavaQwen2ForCausalLM",i0]],["gemma3n",["Gemma3nForConditionalGeneration",mc]]]),JF=new Map([["ultravox",["UltravoxModel",EM]],["voxtral",["VoxtralForConditionalGeneration",OF]]]),Wle=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",zu]]]),e3=new Map([["vit",["ViTForImageClassification",SD]],["ijepa",["IJepaForImageClassification",ED]],["pvt",["PvtForImageClassification",OD]],["vit_msn",["ViTMSNForImageClassification",DD]],["fastvit",["FastViTForImageClassification",BD]],["mobilevit",["MobileViTForImageClassification",WD]],["mobilevitv2",["MobileViTV2ForImageClassification",HD]],["beit",["BeitForImageClassification",ZD]],["deit",["DeiTForImageClassification",gL]],["hiera",["HieraForImageClassification",yL]],["convnext",["ConvNextForImageClassification",HL]],["convnextv2",["ConvNextV2ForImageClassification",qL]],["dinov2",["Dinov2ForImageClassification",YL]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",ZL]],["resnet",["ResNetForImageClassification",xL]],["swin",["SwinForImageClassification",wL]],["segformer",["SegformerForImageClassification",rF]],["efficientnet",["EfficientNetForImageClassification",oF]],["mobilenet_v1",["MobileNetV1ForImageClassification",cF]],["mobilenet_v2",["MobileNetV2ForImageClassification",fF]],["mobilenet_v3",["MobileNetV3ForImageClassification",mF]],["mobilenet_v4",["MobileNetV4ForImageClassification",yF]]]),t3=new Map([["detr",["DetrForObjectDetection",eL]],["rt_detr",["RTDetrForObjectDetection",nL]],["rt_detr_v2",["RTDetrV2ForObjectDetection",sL]],["rf_detr",["RFDetrForObjectDetection",lL]],["d_fine",["DFineForObjectDetection",dL]],["table-transformer",["TableTransformerForObjectDetection",hL]],["yolos",["YolosForObjectDetection",rR]]]),r3=new Map([["owlvit",["OwlViTForObjectDetection",qD]],["owlv2",["Owlv2ForObjectDetection",YD]],["grounding-dino",["GroundingDinoForObjectDetection",eR]]]),Bf=new Map([["detr",["DetrForSegmentation",XT]],["clipseg",["CLIPSegForImageSegmentation",$f]]]),n3=new Map([["segformer",["SegformerForSemanticSegmentation",nF]],["sapiens",["SapiensForSemanticSegmentation",CL]],["swin",["SwinForSemanticSegmentation",kL]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",uF]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",hF]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",gF]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",_F]]]),i3=new Map([["detr",["DetrForSegmentation",XT]],["maskformer",["MaskFormerForInstanceSegmentation",BL]]]),s3=new Map([["sam",["SamModel",sR]]]),a3=new Map([["wav2vec2",["Wav2Vec2ForCTC",fR]],["wav2vec2-bert",["Wav2Vec2BertForCTC",PR]],["unispeech",["UniSpeechForCTC",xR]],["unispeech-sat",["UniSpeechSatForCTC",kR]],["wavlm",["WavLMForCTC",$R]],["hubert",["HubertForCTC",CR]]]),o3=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",hR]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",ER]],["unispeech",["UniSpeechForSequenceClassification",bR]],["unispeech-sat",["UniSpeechSatForSequenceClassification",TR]],["wavlm",["WavLMForSequenceClassification",NR]],["hubert",["HubertForSequenceClassification",AR]],["audio-spectrogram-transformer",["ASTForAudioClassification",Fm]]]),l3=new Map([["wavlm",["WavLMForXVector",IR]]]),c3=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",MR]],["wavlm",["WavLMForAudioFrameClassification",DR]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",pR]],["pyannote",["PyAnnoteForAudioFrameClassification",gR]]]),u3=new Map([["vitmatte",["VitMatteForImageMatting",VD]]]),Gle=new Map([["patchtst",["PatchTSTForPrediction",EF]],["patchtsmixer",["PatchTSMixerForPrediction",CF]]]),d3=new Map([["swin2sr",["Swin2SRForImageSuperResolution",ML]]]),f3=new Map([["dpt",["DPTForDepthEstimation",PL]],["depth_anything",["DepthAnythingForDepthEstimation",jL]],["glpn",["GLPNForDepthEstimation",VL]],["sapiens",["SapiensForDepthEstimation",AL]],["depth_pro",["DepthProForDepthEstimation",NL]],["metric3d",["Metric3DForDepthEstimation",DL]],["metric3dv2",["Metric3Dv2ForDepthEstimation",RL]]]),h3=new Map([["sapiens",["SapiensForNormalEstimation",OL]]]),p3=new Map([["vitpose",["VitPoseForPoseEstimation",CD]]]),m3=new Map([["clip",["CLIPVisionModelWithProjection",Hm]],["siglip",["SiglipVisionModel",qm]],["jina_clip",["JinaCLIPVisionModel",Gu]]]),g3=[[Fle,b.EncoderOnly],[Ble,b.EncoderDecoder],[Vle,b.DecoderOnly],[zle,b.AutoEncoder],[qF,b.EncoderOnly],[XF,b.EncoderOnly],[CM,b.Seq2Seq],[jM,b.Seq2Seq],[AM,b.DecoderOnly],[Ule,b.MultiModality],[YF,b.EncoderOnly],[QF,b.EncoderOnly],[OM,b.Vision2Seq],[ZF,b.ImageTextToText],[JF,b.AudioTextToText],[e3,b.EncoderOnly],[Bf,b.EncoderOnly],[i3,b.EncoderOnly],[n3,b.EncoderOnly],[u3,b.EncoderOnly],[Gle,b.EncoderOnly],[d3,b.EncoderOnly],[f3,b.EncoderOnly],[h3,b.EncoderOnly],[p3,b.EncoderOnly],[t3,b.EncoderOnly],[r3,b.EncoderOnly],[s3,b.MaskGeneration],[a3,b.EncoderOnly],[o3,b.EncoderOnly],[HF,b.Seq2Seq],[KF,b.EncoderOnly],[l3,b.EncoderOnly],[c3,b.EncoderOnly],[m3,b.EncoderOnly]];for(const[A,L]of g3)for(const[X,ve]of A.values())w.set(X,L),T.set(ve,X),k.set(X,ve);const Hle=[["MusicgenForConditionalGeneration",MM,b.Musicgen],["Phi3VForCausalLM",Uu,b.Phi3V],["CLIPTextModelWithProjection",Gm,b.EncoderOnly],["SiglipTextModel",Km,b.EncoderOnly],["JinaCLIPTextModel",Ym,b.EncoderOnly],["ClapTextModelWithProjection",JR,b.EncoderOnly],["ClapAudioModelWithProjection",eF,b.EncoderOnly],["DacEncoderModel",zF,b.EncoderOnly],["DacDecoderModel",VF,b.EncoderOnly],["MimiEncoderModel",DF,b.EncoderOnly],["MimiDecoderModel",LF,b.EncoderOnly],["SnacEncoderModel",WF,b.EncoderOnly],["SnacDecoderModel",GF,b.EncoderOnly],["Gemma3nForConditionalGeneration",mc,b.ImageAudioTextToText]];for(const[A,L,X]of Hle)w.set(A,X),T.set(L,A),k.set(A,L);const v3=new Map([["modnet",Bf],["birefnet",Bf],["isnet",Bf],["ben",Bf]]);for(const[A,L]of v3.entries())L.set(A,["PreTrainedModel",J]),w.set(A,b.EncoderOnly),T.set(J,A),k.set(A,J);class $M extends Tr{}de($M,"MODEL_CLASS_MAPPINGS",g3.map(L=>L[0])),de($M,"BASE_IF_FAIL",!0);class y3 extends Tr{}de(y3,"MODEL_CLASS_MAPPINGS",[qF]);class _3 extends Tr{}de(_3,"MODEL_CLASS_MAPPINGS",[XF]);class x3 extends Tr{}de(x3,"MODEL_CLASS_MAPPINGS",[CM]);class b3 extends Tr{}de(b3,"MODEL_CLASS_MAPPINGS",[jM]);class w3 extends Tr{}de(w3,"MODEL_CLASS_MAPPINGS",[HF]);class k3 extends Tr{}de(k3,"MODEL_CLASS_MAPPINGS",[KF]);class T3 extends Tr{}de(T3,"MODEL_CLASS_MAPPINGS",[AM]);class M3 extends Tr{}de(M3,"MODEL_CLASS_MAPPINGS",[YF]);class S3 extends Tr{}de(S3,"MODEL_CLASS_MAPPINGS",[QF]);class P3 extends Tr{}de(P3,"MODEL_CLASS_MAPPINGS",[OM]);class E3 extends Tr{}de(E3,"MODEL_CLASS_MAPPINGS",[e3]);class j3 extends Tr{}de(j3,"MODEL_CLASS_MAPPINGS",[Bf]);class C3 extends Tr{}de(C3,"MODEL_CLASS_MAPPINGS",[n3]);class A3 extends Tr{}de(A3,"MODEL_CLASS_MAPPINGS",[i3]);class O3 extends Tr{}de(O3,"MODEL_CLASS_MAPPINGS",[t3]);class $3 extends Tr{}de($3,"MODEL_CLASS_MAPPINGS",[r3]);class N3 extends Tr{}de(N3,"MODEL_CLASS_MAPPINGS",[s3]);class I3 extends Tr{}de(I3,"MODEL_CLASS_MAPPINGS",[a3]);class D3 extends Tr{}de(D3,"MODEL_CLASS_MAPPINGS",[o3]);class L3 extends Tr{}de(L3,"MODEL_CLASS_MAPPINGS",[l3]);class R3 extends Tr{}de(R3,"MODEL_CLASS_MAPPINGS",[c3]);class F3 extends Tr{}de(F3,"MODEL_CLASS_MAPPINGS",[Wle]);class B3 extends Tr{}de(B3,"MODEL_CLASS_MAPPINGS",[u3]);class z3 extends Tr{}de(z3,"MODEL_CLASS_MAPPINGS",[d3]);class V3 extends Tr{}de(V3,"MODEL_CLASS_MAPPINGS",[f3]);class U3 extends Tr{}de(U3,"MODEL_CLASS_MAPPINGS",[h3]);class W3 extends Tr{}de(W3,"MODEL_CLASS_MAPPINGS",[p3]);class G3 extends Tr{}de(G3,"MODEL_CLASS_MAPPINGS",[m3]);class H3 extends Tr{}de(H3,"MODEL_CLASS_MAPPINGS",[ZF]);class K3 extends Tr{}de(K3,"MODEL_CLASS_MAPPINGS",[JF]);class Kle extends we{constructor({logits:L,past_key_values:X,encoder_outputs:ve,decoder_attentions:Ae=null,cross_attentions:Ee=null}){super(),this.logits=L,this.past_key_values=X,this.encoder_outputs=ve,this.decoder_attentions=Ae,this.cross_attentions=Ee}}class qt extends we{constructor({logits:L,...X}){super(),this.logits=L;const ve=Object.values(X);ve.length>0&&(this.attentions=ve)}}class q3 extends we{constructor({logits:L,embeddings:X}){super(),this.logits=L,this.embeddings=X}}class ri extends we{constructor({logits:L}){super(),this.logits=L}}class pi extends we{constructor({logits:L}){super(),this.logits=L}}class Ii extends we{constructor({start_logits:L,end_logits:X}){super(),this.start_logits=L,this.end_logits=X}}class Yu extends we{constructor({logits:L}){super(),this.logits=L}}class qle extends we{constructor({logits:L,past_key_values:X}){super(),this.logits=L,this.past_key_values=X}}class X3 extends we{constructor({alphas:L}){super(),this.alphas=L}}class Y3 extends we{constructor({waveform:L,spectrogram:X}){super(),this.waveform=L,this.spectrogram=X}}},"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o);const l=this.config.sampling_rate,c=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,i.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(o,l){return(0,i.spectrogram)(o,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(o){(0,n.validate_audio_inputs)(o,"ASTFeatureExtractor");const l=await this._extract_fbank_features(o,this.config.max_length);if(this.config.do_normalize){const c=this.std*2,f=l.data;for(let d=0;d<f.length;++d)f[d]=(f[d]-this.mean)/c}return{input_values:l.unsqueeze_(0)}}}},"./src/models/auto/feature_extraction_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var s=r("./src/models/feature_extractors.js");class a{static async from_pretrained(l,c={}){const f=await(0,i.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,c),d=f.feature_extractor_type,h=s[d];if(!h)throw new Error(`Unknown feature_extractor_type: '${d}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new h(f)}}},"./src/models/auto/image_processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/image_processors_utils.js"),a=r("./src/models/image_processors.js");class o{static async from_pretrained(c,f={}){const d=await(0,i.getModelJSON)(c,n.IMAGE_PROCESSOR_NAME,!0,f),h=d.image_processor_type??d.feature_extractor_type;let p=a[h==null?void 0:h.replace(/Fast$/,"")];return p||(h!==void 0&&console.warn(`Image processor type '${h}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),p=s.ImageProcessor),new p(d)}}},"./src/models/auto/processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>c});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/processing_utils.js"),a=r("./src/models/processors.js"),o=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class c{static async from_pretrained(d,h={}){const p=await(0,i.getModelJSON)(d,n.IMAGE_PROCESSOR_NAME,!0,h),{image_processor_type:m,feature_extractor_type:g,processor_class:x}=p;if(x&&a[x])return a[x].from_pretrained(d,h);if(!m&&!g)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const y={};if(m){const _=o[m.replace(/Fast$/,"")];if(!_)throw new Error(`Unknown image_processor_type: '${m}'.`);y.image_processor=new _(p)}if(g){const _=o[g];if(_)y.image_processor=new _(p);else{const b=l[g];if(!b)throw new Error(`Unknown feature_extractor_type: '${g}'.`);y.feature_extractor=new b(p)}}const v={};return new s.Processor(v,y,null)}}},"./src/models/beit/image_processing_beit.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/bit/image_processing_bit.js":(e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/chinese_clip/image_processing_chinese_clip.js":(e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/clap/feature_extraction_clap.js":(e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o),this.mel_filters=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,i.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(o,l,c,f){let d;const h=o.length-l;if(h>0)if(c==="rand_trunc"){const p=Math.floor(Math.random()*(h+1));o=o.subarray(p,p+l),d=await this._extract_fbank_features(o,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${c}" not implemented`);else{if(h<0){let p=new Float64Array(l);if(p.set(o),f==="repeat")for(let m=o.length;m<l;m+=o.length)p.set(o.subarray(0,Math.min(o.length,l-m)),m);else if(f==="repeatpad")for(let m=o.length;m<-h;m+=o.length)p.set(o,m);o=p}if(c==="fusion")throw new Error(`Truncation strategy "${c}" not implemented`);d=await this._extract_fbank_features(o,this.mel_filters_slaney,this.config.nb_max_samples)}return d.unsqueeze_(0)}async _extract_fbank_features(o,l,c=null){return(0,i.spectrogram)(o,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:c,do_pad:!1,transpose:!0})}async _call(o,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(o,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(o,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}},"./src/models/clip/image_processing_clip.js":(e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/convnext/image_processing_convnext.js":(e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(o){super(o),this.crop_pct=this.config.crop_pct??224/256}async resize(o){var c;const l=(c=this.size)==null?void 0:c.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const f=Math.floor(l/this.crop_pct),[d,h]=this.get_resize_output_image_size(o,{shortest_edge:f});o=await o.resize(d,h,{resample:this.resample}),o=await o.center_crop(l,l)}else o=await o.resize(l,l,{resample:this.resample});return o}}class s extends i{}},"./src/models/dac/feature_extraction_dac.js":(e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>i});var n=r("./src/models/encodec/feature_extraction_encodec.js");class i extends n.EncodecFeatureExtractor{}},"./src/models/deit/image_processing_deit.js":(e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/detr/image_processing_detr.js":(e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>a,DetrImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(l){const c=await super._call(l),f=[c.pixel_values.dims[0],64,64],d=(0,i.full)(f,1n);return{...c,pixel_mask:d}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class a extends s{}},"./src/models/donut/image_processing_donut.js":(e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(o,l,c,f={}){const[d,h,p]=l;let m=this.image_mean;Array.isArray(this.image_mean)||(m=new Array(p).fill(m));let g=this.image_std;Array.isArray(g)||(g=new Array(p).fill(m));const x=m.map((y,v)=>-y/g[v]);return super.pad_image(o,l,c,{center:!0,constant_values:x,...f})}}class s extends i{}},"./src/models/dpt/image_processing_dpt.js":(e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/efficientnet/image_processing_efficientnet.js":(e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super(a),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(o=>o*o))}}},"./src/models/encodec/feature_extraction_encodec.js":(e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(o){(0,n.validate_audio_inputs)(o,"EncodecFeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));const l=this.config.feature_size;if(o.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const c=[1,l,o.length/l];return{input_values:new i.Tensor("float32",o,c)}}}},"./src/models/feature_extractors.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>a.DacFeatureExtractor,EncodecFeatureExtractor:()=>i.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>o.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>x.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>c.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>f.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>h.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>p.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>m.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>g.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),i=r("./src/models/encodec/feature_extraction_encodec.js"),s=r("./src/models/clap/feature_extraction_clap.js"),a=r("./src/models/dac/feature_extraction_dac.js"),o=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),c=r("./src/models/pyannote/feature_extraction_pyannote.js"),f=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),d=r("./src/models/snac/feature_extraction_snac.js"),h=r("./src/models/speecht5/feature_extraction_speecht5.js"),p=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),m=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),g=r("./src/models/whisper/feature_extraction_whisper.js"),x=r("./src/base/image_processors_utils.js")},"./src/models/florence2/processing_florence2.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{constructor(l,c,f){super(l,c,f);const{tasks_answer_post_processing_type:d,task_prompts_without_inputs:h,task_prompts_with_input:p}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(d??{})),this.task_prompts_without_inputs=new Map(Object.entries(h??{})),this.task_prompts_with_input=new Map(Object.entries(p??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const c=[];for(const f of l)if(this.task_prompts_without_inputs.has(f))c.push(this.task_prompts_without_inputs.get(f));else{for(const[d,h]of this.task_prompts_with_input)if(f.includes(d)){c.push(h.replaceAll("{input}",f).replaceAll(d,""));break}c.length!==l.length&&c.push(f)}return c}post_process_generation(l,c,f){const d=this.tasks_answer_post_processing_type.get(c)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let h;switch(d){case"pure_text":h=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const p=d==="ocr"?"quad_boxes":"bboxes",m=l.matchAll(this.regexes[p]),g=[],x=[];for(const[y,v,..._]of m)g.push(v?v.trim():g.at(-1)??""),x.push(_.map((b,w)=>(Number(b)+.5)/this.size_per_bin*f[w%2]));h={labels:g,[p]:x};break;default:throw new Error(`Task "${c}" (of type "${d}") not yet implemented.`)}return{[c]:h}}async _call(l,c=null,f={}){if(!l&&!c)throw new Error("Either text or images must be provided");const d=await this.image_processor(l,f),h=c?this.tokenizer(this.construct_prompts(c),f):{};return{...d,...h}}}de(a,"tokenizer_class",s.AutoTokenizer),de(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/gemma3n/feature_extraction_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:c,feature_size:f,min_frequency:d,max_frequency:h,sampling_rate:p,frame_length:m}=this.config,g=(0,s.mel_filter_bank)(Math.floor(1+c/2),f,d,h,p,null,"htk",!1);this.mel_filters=g,this.window=(0,s.window_function)(m,"hann")}async _extract_fbank_features(l,c){return(0,s.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:c=48e4,truncation:f=!0,padding:d=!0,pad_to_multiple_of:h=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),f&&l.length>c&&(l=l.slice(0,c)),d&&l.length%h!==0){const g=h-l.length%h,x=new Float64Array(l.length+g);x.set(l),this.config.padding_value!==0&&x.fill(this.config.padding_value,l.length),l=x}const p=await this._extract_fbank_features(l,this.config.max_length),m=(0,i.full)([1,p.dims[0]],!0);return{input_features:p.unsqueeze_(0),input_features_mask:m}}}},"./src/models/gemma3n/processing_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class o extends n.Processor{constructor(c,f,d){super(c,f,d),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:h,boa_token:p,audio_token:m,eoa_token:g,image_token_id:x,boi_token:y,image_token:v,eoi_token:_}=this.tokenizer.config;this.audio_token_id=h,this.boa_token=p,this.audio_token=m;const b=m.repeat(this.audio_seq_length);this.full_audio_sequence=`

${p}${b}${g}

`,this.image_token_id=x,this.boi_token=y,this.image_token=v;const w=v.repeat(this.image_seq_length);this.full_image_sequence=`

${y}${w}${_}

`}async _call(c,f=null,d=null,h={}){typeof c=="string"&&(c=[c]);let p;d&&(p=await this.feature_extractor(d,h),c=c.map(x=>x.replaceAll(this.audio_token,this.full_audio_sequence)));let m;return f&&(m=await this.image_processor(f,h),c=c.map(x=>x.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(c,h),...m,...p}}}de(o,"image_processor_class",i.AutoImageProcessor),de(o,"feature_extractor_class",s.AutoFeatureExtractor),de(o,"tokenizer_class",a.AutoTokenizer),de(o,"uses_processor_config",!0),de(o,"uses_chat_template_file",!0)},"./src/models/glpn/image_processing_glpn.js":(e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/grounding_dino/image_processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o){const l=await super._call(o),c=l.pixel_values.dims,f=(0,i.ones)([c[0],c[2],c[3]]);return{...l,pixel_mask:f}}}},"./src/models/grounding_dino/processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/image_processors_utils.js");function o(c,f){const h=c.dims.at(-1)-1,p=c.tolist();p.fill(!1,0,1),p.fill(!1,h);const m=f.tolist();return p.map((g,x)=>g?x:null).filter(g=>g!==null).map(g=>m[g])}class l extends n.Processor{async _call(f,d,h={}){const p=f?await this.image_processor(f,h):{};return{...d?this.tokenizer(d,h):{},...p}}post_process_grounded_object_detection(f,d,{box_threshold:h=.25,text_threshold:p=.25,target_sizes:m=null}={}){const{logits:g,pred_boxes:x}=f,y=g.dims[0];if(m!==null&&m.length!==y)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const v=g.dims.at(1),_=g.sigmoid(),b=_.max(-1).tolist(),w=x.tolist().map(T=>T.map(M=>(0,a.center_to_corners_format)(M))),k=[];for(let T=0;T<y;++T){const M=m!==null?m[T]:null;M!==null&&(w[T]=w[T].map(N=>N.map((z,V)=>z*M[(V+1)%2])));const j=b[T],C=[],R=[],I=[];for(let N=0;N<v;++N){const z=j[N];if(z<=h)continue;const V=w[T][N],G=_[T][N];C.push(z),I.push(V);const H=o(G.gt(p),d[T]);R.push(H)}k.push({scores:C,boxes:I,labels:this.batch_decode(R)})}return k}}de(l,"tokenizer_class",s.AutoTokenizer),de(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/idefics3/image_processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{constructor(o){super(o),this.do_image_splitting=o.do_image_splitting??!0,this.max_image_size=o.max_image_size}get_resize_for_vision_encoder(o,l){let[c,f]=o.dims.slice(-2);const d=f/c;return f>=c?(f=Math.ceil(f/l)*l,c=Math.floor(f/d),c=Math.ceil(c/l)*l):(c=Math.ceil(c/l)*l,f=Math.floor(c*d),f=Math.ceil(f/l)*l),{height:c,width:f}}async _call(o,{do_image_splitting:l=null,return_row_col_info:c=!1}={}){let f;if(!Array.isArray(o))f=[[o]];else{if(o.length===0||!o[0])throw new Error("No images provided.");Array.isArray(o[0])?f=o:f=[o]}let d=[],h=[],p=[];const m=[],g=[];for(const T of f){let M=await Promise.all(T.map(R=>this.preprocess(R)));m.push(...M.map(R=>R.original_size)),g.push(...M.map(R=>R.reshaped_input_size)),M.forEach(R=>R.pixel_values.unsqueeze_(0));const{longest_edge:j}=this.max_image_size;let C;if(l??this.do_image_splitting){let R=new Array(M.length),I=new Array(M.length);C=await Promise.all(M.map(async(N,z)=>{const V=this.get_resize_for_vision_encoder(N.pixel_values,j),G=await(0,i.interpolate_4d)(N.pixel_values,{size:[V.height,V.width]}),{frames:H,num_splits_h:O,num_splits_w:q}=await this.split_image(G,this.max_image_size);return R[z]=O,I[z]=q,(0,i.cat)(H,0)})),h.push(R),p.push(I)}else{const R=[j,j];C=await Promise.all(M.map(I=>(0,i.interpolate_4d)(I.pixel_values,{size:R}))),h.push(new Array(M.length).fill(0)),p.push(new Array(M.length).fill(0))}d.push((0,i.cat)(C,0))}const x=d.length,[y,v,_,b]=d[0].dims;let w,k;if(x===1)w=d[0].unsqueeze_(0),k=(0,i.full)([x,y,_,b],!0);else{const T=Math.max(...d.map(C=>C.dims.at(0)));k=(0,i.full)([x,T,_,b],!0);const M=k.data,j=T*_*b;for(let C=0;C<x;++C){const R=d[C].dims[0];if(R<T){d[C]=(0,i.cat)([d[C],(0,i.full)([T-R,v,_,b],0)],0);const I=C*j+R*_*b,N=(C+1)*j;M.fill(!1,I,N)}}w=(0,i.stack)(d,0)}return{pixel_values:w,pixel_attention_mask:k,original_sizes:m,reshaped_input_sizes:g,...c?{rows:h,cols:p}:{}}}async split_image(o,{longest_edge:l}){const c=l,f=l,d=[],[h,p]=o.dims.slice(-2);let m=0,g=0;if(h>c||p>f){m=Math.ceil(h/c),g=Math.ceil(p/f);const x=Math.ceil(h/m),y=Math.ceil(p/g);for(let b=0;b<m;++b)for(let w=0;w<g;++w){let k,T,M,j;b===m-1?(T=h-x,j=h):(T=b*x,j=(b+1)*x),w===g-1?(k=p-y,M=p):(k=w*y,M=(w+1)*y);const C=[T,k],R=[j,M],I=await(0,i.slice)(o,C,R,[2,3]);d.push(I)}const v=c,_=f;(h!==v||p!==_)&&(o=await(0,i.interpolate_4d)(o,{size:[v,_]}))}return d.push(o),{frames:d,num_splits_h:m,num_splits_w:g}}}},"./src/models/idefics3/processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>f});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");var a=r("./src/utils/core.js");function o(d,h,p,m,g,x){let y="";for(let v=0;v<h;++v){for(let _=0;_<p;++_)y+=m+`<row_${v+1}_col_${_+1}>`+g.repeat(d);y+=`
`}return y+=`
${m}${x}`+g.repeat(d)+`${m}`,y}function l(d,h,p,m){return`${h}${m}`+p.repeat(d)+`${h}`}function c(d,h,p,m,g,x){return d===0&&h===0?l(p,m,g,x):o(p,d,h,m,g,x)}class f extends n.Processor{constructor(){super(...arguments);de(this,"fake_image_token","<fake_token_around_image>");de(this,"image_token","<image>");de(this,"global_img_token","<global-img>")}async _call(p,m=null,g={}){g.return_row_col_info??(g.return_row_col_info=!0);let x;m&&(x=await this.image_processor(m,g)),Array.isArray(p)||(p=[p]);const y=x.rows??[new Array(p.length).fill(0)],v=x.cols??[new Array(p.length).fill(0)],_=this.config.image_seq_len,b=[],w=[];for(let T=0;T<p.length;++T){const M=p[T],j=y[T],C=v[T];b.push((0,a.count)(M,this.image_token));const R=j.map((z,V)=>c(z,C[V],_,this.fake_image_token,this.image_token,this.global_img_token)),I=M.split(this.image_token);if(I.length===0)throw new Error("The image token should be present in the text.");let N=I[0];for(let z=0;z<R.length;++z)N+=R[z]+I[z+1];w.push(N)}return{...this.tokenizer(w),...x}}}de(f,"image_processor_class",i.AutoImageProcessor),de(f,"tokenizer_class",s.AutoTokenizer),de(f,"uses_processor_config",!0)},"./src/models/image_processors.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>i.BitImageProcessor,CLIPFeatureExtractor:()=>a.CLIPFeatureExtractor,CLIPImageProcessor:()=>a.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>o.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>o.ConvNextImageProcessor,DPTFeatureExtractor:()=>d.DPTFeatureExtractor,DPTImageProcessor:()=>d.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>c.DetrFeatureExtractor,DetrImageProcessor:()=>c.DetrImageProcessor,DonutFeatureExtractor:()=>f.DonutFeatureExtractor,DonutImageProcessor:()=>f.DonutImageProcessor,EfficientNetImageProcessor:()=>h.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>p.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>m.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>g.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>y.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>v.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>_.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>b.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>b.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>w.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>w.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>k.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>k.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>T.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>T.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>M.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>M.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>j.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>j.MobileViTImageProcessor,NougatImageProcessor:()=>C.NougatImageProcessor,OwlViTFeatureExtractor:()=>I.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>I.OwlViTImageProcessor,Owlv2ImageProcessor:()=>R.Owlv2ImageProcessor,Phi3VImageProcessor:()=>N.Phi3VImageProcessor,PvtImageProcessor:()=>z.PvtImageProcessor,Qwen2VLImageProcessor:()=>V.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>G.RTDetrImageProcessor,SamImageProcessor:()=>H.SamImageProcessor,SegformerFeatureExtractor:()=>O.SegformerFeatureExtractor,SegformerImageProcessor:()=>O.SegformerImageProcessor,SiglipImageProcessor:()=>q.SiglipImageProcessor,SmolVLMImageProcessor:()=>ee.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>B.Swin2SRImageProcessor,VLMImageProcessor:()=>x.VLMImageProcessor,ViTFeatureExtractor:()=>D.ViTFeatureExtractor,ViTImageProcessor:()=>D.ViTImageProcessor,VitMatteImageProcessor:()=>K.VitMatteImageProcessor,VitPoseImageProcessor:()=>oe.VitPoseImageProcessor,YolosFeatureExtractor:()=>_e.YolosFeatureExtractor,YolosImageProcessor:()=>_e.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),i=r("./src/models/bit/image_processing_bit.js"),s=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),a=r("./src/models/clip/image_processing_clip.js"),o=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),c=r("./src/models/detr/image_processing_detr.js"),f=r("./src/models/donut/image_processing_donut.js"),d=r("./src/models/dpt/image_processing_dpt.js"),h=r("./src/models/efficientnet/image_processing_efficientnet.js"),p=r("./src/models/glpn/image_processing_glpn.js"),m=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),g=r("./src/models/idefics3/image_processing_idefics3.js"),x=r("./src/models/janus/image_processing_janus.js"),y=r("./src/models/jina_clip/image_processing_jina_clip.js"),v=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),_=r("./src/models/mask2former/image_processing_mask2former.js"),b=r("./src/models/maskformer/image_processing_maskformer.js"),w=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),k=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),T=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),M=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),j=r("./src/models/mobilevit/image_processing_mobilevit.js"),C=r("./src/models/nougat/image_processing_nougat.js"),R=r("./src/models/owlv2/image_processing_owlv2.js"),I=r("./src/models/owlvit/image_processing_owlvit.js"),N=r("./src/models/phi3_v/image_processing_phi3_v.js"),z=r("./src/models/pvt/image_processing_pvt.js"),V=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),G=r("./src/models/rt_detr/image_processing_rt_detr.js"),H=r("./src/models/sam/image_processing_sam.js"),O=r("./src/models/segformer/image_processing_segformer.js"),q=r("./src/models/siglip/image_processing_siglip.js"),ee=r("./src/models/smolvlm/image_processing_smolvlm.js"),B=r("./src/models/swin2sr/image_processing_swin2sr.js"),D=r("./src/models/vit/image_processing_vit.js"),K=r("./src/models/vitmatte/image_processing_vitmatte.js"),oe=r("./src/models/vitpose/image_processing_vitpose.js"),_e=r("./src/models/yolos/image_processing_yolos.js")},"./src/models/janus/image_processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super({do_pad:!0,pad_size:{width:a.image_size,height:a.image_size},...a}),this.constant_values=this.config.background_color.map(o=>o*this.rescale_factor)}pad_image(a,o,l,c){return super.pad_image(a,o,l,{constant_values:this.constant_values,center:!0,...c})}}},"./src/models/janus/processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>c});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/core.js"),o=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class c extends n.Processor{constructor(d,h,p){super(d,h,p),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(d,{images:h=null,chat_template:p="default"}={}){h?Array.isArray(h)||(h=[h]):h=await Promise.all(d.filter(C=>C.images).flatMap(C=>C.images).map(C=>l.RawImage.read(C)));const m=this.tokenizer,g=m.apply_chat_template(d,{tokenize:!1,add_generation_prompt:!0,chat_template:p}),x=C=>m.encode(C,{add_special_tokens:!1}),y=g.split(this.image_tag),v=y.length-1;if(h.length!==v)throw new Error(`Number of images provided (${h.length}) does not match number of "${this.image_tag}" image tags (${v})`);const[_,b,w]=m.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let k=x(y[0]),T=new Array(k.length).fill(!1);for(let C=1;C<y.length;++C){const R=new Array(this.num_image_tokens).fill(_),I=x(y[C]);k=(0,a.mergeArrays)(k,[b],R,[w],I);const N=new Array(this.num_image_tokens).fill(!0);T=(0,a.mergeArrays)(T,[!1],N,[!1],new Array(I.length).fill(!1))}const M=[1,k.length],j={input_ids:new o.Tensor("int64",k,M),attention_mask:new o.Tensor("int64",new Array(k.length).fill(1),M),images_seq_mask:new o.Tensor("bool",T,M),images_emb_mask:new o.Tensor("bool",new Array(v*this.num_image_tokens).fill(!0),[1,v,this.num_image_tokens])};if(h&&h.length>0){const C=await this.image_processor(h);return C.pixel_values.unsqueeze_(0),{...j,...C}}return j}}de(c,"image_processor_class",i.AutoImageProcessor),de(c,"tokenizer_class",s.AutoTokenizer),de(c,"uses_processor_config",!0)},"./src/models/jina_clip/image_processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){const{resize_mode:o,fill_color:l,interpolation:c,size:f,...d}=a,h=o==="squash"?{width:f,height:f}:o==="shortest"?{shortest_edge:f}:{longest_edge:f},p=c==="bicubic"?3:2;super({...d,size:h,resample:p,do_center_crop:!0,crop_size:f,do_normalize:!0})}}},"./src/models/jina_clip/processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{async _call(l=null,c=null,f={}){if(!l&&!c)throw new Error("Either text or images must be provided");const d=l?this.tokenizer(l,f):{},h=c?await this.image_processor(c,f):{};return{...d,...h}}}de(a,"tokenizer_class",s.AutoTokenizer),de(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/llava/processing_llava.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{async _call(l,c=null,f={}){const d=await this.image_processor(l,f);if(c){const[p,m]=d.pixel_values.dims.slice(-2),{image_token:g,patch_size:x,num_additional_image_tokens:y}=this.config,v=Math.floor(p/x)*Math.floor(m/x)+y;c=structuredClone(c),Array.isArray(c)||(c=[c]);for(let _=0;_<c.length;++_)c[_]=c[_].replace(g,g.repeat(v))}const h=c?this.tokenizer(c,f):{};return{...d,...h}}}de(a,"tokenizer_class",s.AutoTokenizer),de(a,"image_processor_class",i.AutoImageProcessor),de(a,"uses_processor_config",!0)},"./src/models/llava_onevision/image_processing_llava_onevision.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/mask2former/image_processing_mask2former.js":(e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>i});var n=r("./src/models/maskformer/image_processing_maskformer.js");class i extends n.MaskFormerImageProcessor{}},"./src/models/maskformer/image_processing_maskformer.js":(e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_panoptic_segmentation(...o){return(0,n.post_process_panoptic_segmentation)(...o)}post_process_instance_segmentation(...o){return(0,n.post_process_instance_segmentation)(...o)}}class s extends i{}},"./src/models/mgp_str/processing_mgp_str.js":(e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/utils/maths.js");const o={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(f,d){if(!o.hasOwnProperty(d))throw new Error(`Format ${d} is not supported.`);const[h,p]=o[d],m=this[h].bind(this),[g,x]=f.dims,y=[],v=[],_=f.tolist();for(let w=0;w<g;++w){const k=_[w],T=[],M=[];for(let C=1;C<x;++C){const[R,I]=(0,a.max)((0,a.softmax)(k[C]));if(M.push(R),I==p)break;T.push(I)}const j=M.length>0?M.reduce((C,R)=>C*R,1):0;v.push(T),y.push(j)}return[m(v),y]}char_decode(f){return this.char_tokenizer.batch_decode(f).map(d=>d.replaceAll(" ",""))}bpe_decode(f){return this.bpe_tokenizer.batch_decode(f)}wp_decode(f){return this.wp_tokenizer.batch_decode(f).map(d=>d.replaceAll(" ",""))}batch_decode([f,d,h]){const[p,m]=this._decode_helper(f,"char"),[g,x]=this._decode_helper(d,"bpe"),[y,v]=this._decode_helper(h,"wp"),_=[],b=[];for(let w=0;w<p.length;++w){const[k,T]=(0,a.max)([m[w],x[w],v[w]]);_.push([p[w],g[w],y[w]][T]),b.push(k)}return{generated_text:_,scores:b,char_preds:p,bpe_preds:g,wp_preds:y}}static async from_pretrained(...f){const d=await super.from_pretrained(...f),h=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),p=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return d.components={image_processor:d.image_processor,char_tokenizer:d.tokenizer,bpe_tokenizer:h,wp_tokenizer:p},d}async _call(f,d=null){const h=await this.image_processor(f);return d&&(h.labels=this.tokenizer(d).input_ids),h}}de(l,"tokenizer_class",s.AutoTokenizer),de(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/mobilevit/image_processing_mobilevit.js":(e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/moonshine/feature_extraction_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(o){(0,n.validate_audio_inputs)(o,"MoonshineFeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));const l=[1,o.length];return{input_values:new i.Tensor("float32",o,l)}}}},"./src/models/moonshine/processing_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}de(a,"tokenizer_class",i.AutoTokenizer),de(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/nougat/image_processing_nougat.js":(e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>i});var n=r("./src/models/donut/image_processing_donut.js");class i extends n.DonutImageProcessor{}},"./src/models/owlv2/image_processing_owlv2.js":(e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>i});var n=r("./src/models/owlvit/image_processing_owlvit.js");class i extends n.OwlViTImageProcessor{}},"./src/models/owlvit/image_processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}class s extends i{}},"./src/models/owlvit/processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class a extends n.Processor{}de(a,"tokenizer_class",s.AutoTokenizer),de(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/paligemma/processing_paligemma.js":(e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");const a="<image>";function o(c,f,d,h,p){return`${h.repeat(d*p)}${f}${c}
`}class l extends n.Processor{async _call(f,d=null,h={}){d||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),d=""),Array.isArray(f)||(f=[f]),Array.isArray(d)||(d=[d]);const p=this.tokenizer.bos_token,m=this.image_processor.config.image_seq_length;let g;d.some(v=>v.includes(a))?g=d.map(v=>{const _=v.replaceAll(a,a.repeat(m)),b=_.lastIndexOf(a),w=b===-1?0:b+a.length;return _.slice(0,w)+p+_.slice(w)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),g=d.map(v=>o(v,p,m,a,f.length)));const x=this.tokenizer(g,h);return{...await this.image_processor(f,h),...x}}}de(l,"tokenizer_class",s.AutoTokenizer),de(l,"image_processor_class",i.AutoImageProcessor),de(l,"uses_processor_config",!1)},"./src/models/phi3_v/image_processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>f});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");const s=336,a=[2,3],{ceil:o,floor:l,sqrt:c}=Math;class f extends n.ImageProcessor{constructor(h){super({...h,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=h.num_crops}calc_num_image_tokens_from_image_size(h,p){const{num_img_tokens:m}=this.config;return l((l(p/s)*l(h/s)+1)*m+1+(l(p/s)+1)*c(m))}get_resize_output_image_size(h,p){const m=this._num_crops,[g,x]=h.size;let y=g/x,v=1;for(;v*Math.ceil(v/y)<=m;)v+=1;v-=1;const _=Math.floor(v*336),b=Math.floor(_/y);return[_,b]}pad_image(h,p,m,g={}){const[x,y]=p,v=s*o(x/s),_=s*o(y/s),b=[1,1,1].map((w,k)=>(w-this.image_mean[k])/this.image_std[k]);return super.pad_image(h,p,{width:_,height:v},{center:!0,constant_values:b,...g})}async _call(h,{num_crops:p=null}={}){if(this._num_crops=p??(p=this.config.num_crops),p<4||c(p)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(h)||(h=[h]);const m=h.length,g=await Promise.all(h.map(T=>this.preprocess(T))),x=g.map(T=>T.original_size),y=g.map(T=>T.reshaped_input_size),v=[];for(const{pixel_values:T}of g){T.unsqueeze_(0);const[M,j]=T.dims.slice(-2),C=await(0,i.interpolate_4d)(T,{size:[s,s],mode:"bicubic"});if(p>0){const R=[],I=c(p),N=l(j/I),z=l(M/I);for(let G=0;G<I;++G)for(let H=0;H<I;++H){let O,q,ee,B;G===I-1?(q=M-z,B=M):(q=G*z,B=(G+1)*z),H===I-1?(O=j-N,ee=j):(O=H*N,ee=(H+1)*N);const D=[q,O],K=[B,ee],oe=await(0,i.slice)(T,D,K,a);R.push(oe)}const V=await(0,i.interpolate_4d)((0,i.cat)(R,0),{size:[s,s],mode:"bicubic"});v.push((0,i.cat)([C,V],0))}else v.push(C)}const _=(0,i.stack)(v,0),b=y.map(T=>T.map(M=>s*o(M/s))),w=new i.Tensor("int64",b.flat(),[m,2]),k=b.map(([T,M])=>this.calc_num_image_tokens_from_image_size(M,T));return{pixel_values:_,original_sizes:x,reshaped_input_sizes:y,image_sizes:w,num_img_tokens:k}}}},"./src/models/phi3_v/processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");const a="<|image|>",o=/<\|image_\d+\|>/g;class l extends n.Processor{async _call(f,d=null,{padding:h=!0,truncation:p=!0,num_crops:m=null}={}){Array.isArray(f)||(f=[f]);let g,x;if(d){x=await this.image_processor(d,{num_crops:m});const{num_img_tokens:y}=x,v=f.map((b,w)=>b.split(o).join(a.repeat(y[w])));g=this.tokenizer(v,{padding:h,truncation:p});const _=this.tokenizer.model.convert_tokens_to_ids([a])[0];g.input_ids.map_(b=>b==_?-b:b)}else g=this.tokenizer(f);return{...g,...x}}}de(l,"image_processor_class",i.AutoImageProcessor),de(l,"tokenizer_class",s.AutoTokenizer)},"./src/models/processors.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>i.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>a.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>c.LlavaProcessor,MgpstrProcessor:()=>f.MgpstrProcessor,MoonshineProcessor:()=>d.MoonshineProcessor,OwlViTProcessor:()=>h.OwlViTProcessor,PaliGemmaProcessor:()=>m.PaliGemmaProcessor,Phi3VProcessor:()=>p.Phi3VProcessor,PyAnnoteProcessor:()=>g.PyAnnoteProcessor,Qwen2VLProcessor:()=>x.Qwen2VLProcessor,SamProcessor:()=>y.SamProcessor,SmolVLMProcessor:()=>v.SmolVLMProcessor,SpeechT5Processor:()=>_.SpeechT5Processor,UltravoxProcessor:()=>b.UltravoxProcessor,VLChatProcessor:()=>o.VLChatProcessor,VoxtralProcessor:()=>w.VoxtralProcessor,Wav2Vec2Processor:()=>k.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>T.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>M.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),i=r("./src/models/gemma3n/processing_gemma3n.js"),s=r("./src/models/grounding_dino/processing_grounding_dino.js"),a=r("./src/models/idefics3/processing_idefics3.js"),o=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),c=r("./src/models/llava/processing_llava.js"),f=r("./src/models/mgp_str/processing_mgp_str.js"),d=r("./src/models/moonshine/processing_moonshine.js"),h=r("./src/models/owlvit/processing_owlvit.js"),p=r("./src/models/phi3_v/processing_phi3_v.js"),m=r("./src/models/paligemma/processing_paligemma.js"),g=r("./src/models/pyannote/processing_pyannote.js"),x=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),y=r("./src/models/sam/processing_sam.js"),v=r("./src/models/smolvlm/processing_smolvlm.js"),_=r("./src/models/speecht5/processing_speecht5.js"),b=r("./src/models/ultravox/processing_ultravox.js"),w=r("./src/models/voxtral/processing_voxtral.js"),k=r("./src/models/wav2vec2/processing_wav2vec2.js"),T=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),M=r("./src/models/whisper/processing_whisper.js")},"./src/models/pvt/image_processing_pvt.js":(e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/pyannote/feature_extraction_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");class a extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const c=[1,1,l.length];return{input_values:new i.Tensor("float32",l,c)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,c){const f=c/this.samples_to_frames(c)/this.config.sampling_rate,d=[];for(const h of l.tolist()){const p=[];let m=-1;for(let g=0;g<h.length;++g){const x=(0,s.softmax)(h[g]),[y,v]=(0,s.max)(x),[_,b]=[g,g+1];v!==m?(m=v,p.push({id:v,start:_,end:b,score:y})):(p.at(-1).end=b,p.at(-1).score+=y)}d.push(p.map(({id:g,start:x,end:y,score:v})=>({id:g,start:x*f,end:y*f,confidence:v/(y-x)})))}return d}}},"./src/models/pyannote/processing_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/pyannote/feature_extraction_pyannote.js");class s extends n.Processor{async _call(o){return await this.feature_extractor(o)}post_process_speaker_diarization(...o){return this.feature_extractor.post_process_speaker_diarization(...o)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}de(s,"feature_extractor_class",i.PyAnnoteFeatureExtractor)},"./src/models/qwen2_vl/image_processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o,...l){const{pixel_values:c,original_sizes:f,reshaped_input_sizes:d}=await super._call(o,...l);let h=c;const{temporal_patch_size:p,merge_size:m,patch_size:g}=this.config;h.dims[0]===1&&(h=(0,i.cat)(Array.from({length:p},()=>h),0));const x=h.dims[0]/p,y=h.dims[1],v=Math.floor(h.dims[2]/g),_=Math.floor(h.dims[3]/g),b=h.view(x,p,y,Math.floor(v/m),m,g,Math.floor(_/m),m,g).permute(0,3,6,4,7,2,1,5,8).view(x*v*_,y*p*g*g),w=new i.Tensor("int64",[x,v,_],[1,3]);return{pixel_values:b,image_grid_thw:w,original_sizes:f,reshaped_input_sizes:d}}}},"./src/models/qwen2_vl/processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");class a extends n.Processor{async _call(l,c=null,...f){Array.isArray(l)||(l=[l]);let d,h;if(c&&(d=await this.image_processor(c),h=d.image_grid_thw),h){let m=this.image_processor.config.merge_size**2,g=0;const x=h.tolist();l=l.map(y=>{for(;y.includes("<|image_pad|>");){const v=Number(x[g++].reduce((_,b)=>_*b,1n));y=y.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(v/m)))}return y.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...d}}}de(a,"image_processor_class",i.AutoImageProcessor),de(a,"tokenizer_class",s.AutoTokenizer)},"./src/models/rt_detr/image_processing_rt_detr.js":(e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}},"./src/models/sam/image_processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/core.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{reshape_input_points(l,c,f,d=!1){l=structuredClone(l);let h=(0,i.calculateDimensions)(l);if(h.length===3)d||(h=[1,...h]),l=[l];else if(h.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let p=0;p<l.length;++p){let m=c[p],g=f[p],x=[g[0]/m[0],g[1]/m[1]];for(let y=0;y<l[p].length;++y)for(let v=0;v<l[p][y].length;++v)for(let _=0;_<l[p][y][v].length;++_)l[p][y][v][_]*=x[_%2]}return new s.Tensor("float32",Float32Array.from(l.flat(1/0)),h)}add_input_labels(l,c){let f=(0,i.calculateDimensions)(l);if(f.length===2)f=[1,...f],l=[l];else if(f.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(f.some((d,h)=>d!==c.dims[h]))throw Error(`The first ${f.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",l.flat(1/0).map(BigInt),f)}async _call(l,{input_points:c=null,input_labels:f=null,input_boxes:d=null}={}){const h=await super._call(l);if(c&&(h.input_points=this.reshape_input_points(c,h.original_sizes,h.reshaped_input_sizes)),f){if(!h.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");h.input_labels=this.add_input_labels(f,h.input_points)}return d&&(h.input_boxes=this.reshape_input_points(d,h.original_sizes,h.reshaped_input_sizes,!0)),h}async post_process_masks(l,c,f,{mask_threshold:d=0,binarize:h=!0,pad_size:p=null}={}){const m=[];p=p??this.pad_size;const g=[p.height,p.width];for(let x=0;x<c.length;++x){const y=c[x],v=f[x];let _=await(0,s.interpolate_4d)(l[x],{mode:"bilinear",size:g});if(_=_.slice(null,null,[0,v[0]],[0,v[1]]),_=await(0,s.interpolate_4d)(_,{mode:"bilinear",size:y}),h){const b=_.data,w=new Uint8Array(b.length);for(let k=0;k<b.length;++k)b[k]>d&&(w[k]=1);_=new s.Tensor("bool",w,_.dims)}m.push(_)}return m}generate_crop_boxes(l,c,{crop_n_layers:f=0,overlap_ratio:d=512/1500,points_per_crop:h=32,crop_n_points_downscale_factor:p=1}={}){}}},"./src/models/sam/processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js");class s extends n.Processor{async _call(...o){return await this.image_processor(...o)}post_process_masks(...o){return this.image_processor.post_process_masks(...o)}reshape_input_points(...o){return this.image_processor.reshape_input_points(...o)}}de(s,"image_processor_class",i.AutoImageProcessor)},"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":(e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const c=this.config.sampling_rate,f=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(c/2),c,null,"kaldi",!0);this.mel_filters=f,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,c){return l=l.map(f=>f*32768),(0,s.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:c,transpose:!0})}async _call(l,{padding:c=!0,pad_to_multiple_of:f=2,do_normalize_per_mel_bins:d=!0,return_attention_mask:h=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let p=await this._extract_fbank_features(l,this.config.max_length);if(d){const[w,k]=p.dims,T=p.data;for(let M=0;M<k;++M){let j=0;for(let N=0;N<w;++N)j+=T[N*k+M];const C=j/w;let R=0;for(let N=0;N<w;++N)R+=(T[N*k+M]-C)**2;R/=w-1;const I=Math.sqrt(R+1e-7);for(let N=0;N<w;++N){const z=N*k+M;T[z]=(T[z]-C)/I}}}let m;if(c){const[w,k]=p.dims,T=p.data,M=w%f;if(M>0){const j=new Float32Array(k*(w+M));j.set(T),j.fill(this.config.padding_value,T.length);const C=w+M;p=new i.Tensor(p.type,j,[C,k]),h&&(m=new i.Tensor("int64",new BigInt64Array(C),[1,C]),m.data.fill(1n,0,w))}}const[g,x]=p.dims,y=this.config.stride;if(g%y!==0)throw new Error(`The number of frames (${g}) must be a multiple of the stride (${y}).`);const _=p.view(1,Math.floor(g/y),x*y),b={input_features:_};if(h){const w=_.dims[1],k=new BigInt64Array(w);if(m){const T=m.data;for(let M=1,j=0;M<g;M+=y,++j)k[j]=T[M]}else k.fill(1n);b.attention_mask=new i.Tensor("int64",k,[1,w])}return b}}},"./src/models/segformer/image_processing_segformer.js":(e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_semantic_segmentation(...o){return(0,n.post_process_semantic_segmentation)(...o)}}class s extends i{}},"./src/models/siglip/image_processing_siglip.js":(e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/smolvlm/image_processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")},"./src/models/smolvlm/processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")},"./src/models/snac/feature_extraction_snac.js":(e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>i});var n=r("./src/models/dac/feature_extraction_dac.js");class i extends n.DacFeatureExtractor{}},"./src/models/speecht5/feature_extraction_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js");class i extends n.FeatureExtractor{}},"./src/models/speecht5/processing_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js");class a extends n.Processor{async _call(l){return await this.feature_extractor(l)}}de(a,"tokenizer_class",i.AutoTokenizer),de(a,"feature_extractor_class",s.AutoFeatureExtractor)},"./src/models/swin2sr/image_processing_swin2sr.js":(e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(a,o,l,c={}){const[f,d,h]=o;return super.pad_image(a,o,{width:d+(l-d%l)%l,height:f+(l-f%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...c})}}},"./src/models/ultravox/processing_ultravox.js":(e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l,c=null,f={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let d={};if(c){const p=c.length,{input_features:m}=await this.feature_extractor(c,{...f,max_length:p}),g=Math.round(p/this.config.encoder_ds_factor+1e-4),x=1+Math.ceil(g/this.config.stack_factor);d.audio_token_len=[x],d.audio_values=m;const y=this.config.audio_placeholder;if(!l.includes(y))throw new Error(`The input text does not contain the image token ${y}.`);l=l.replaceAll(y,y.repeat(x))}return{...this.tokenizer(l,{add_special_tokens:!1,...f}),...d}}}de(a,"tokenizer_class",i.AutoTokenizer),de(a,"feature_extractor_class",n.AutoFeatureExtractor),de(a,"uses_processor_config",!0)},"./src/models/vit/image_processing_vit.js":(e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}},"./src/models/vitmatte/image_processing_vitmatte.js":(e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(o,l){Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const c=await Promise.all(o.map(h=>this.preprocess(h))),f=await Promise.all(l.map(h=>this.preprocess(h,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,i.stack)(c.map((h,p)=>(0,i.cat)([h.pixel_values,f[p].pixel_values],0)),0),original_sizes:c.map(h=>h.original_size),reshaped_input_sizes:c.map(h=>h.reshaped_input_size)}}}},"./src/models/vitpose/image_processing_vitpose.js":(e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_pose_estimation(a,o,{threshold:l=null}={}){const c=a.tolist(),[f,d,h,p]=a.dims,m=[];for(let g=0;g<f;++g){const x=c[g],y=o[g],v=[];for(let _=0;_<y.length;++_){const b=y[_],w=[],k=[],T=[],M=b.at(-2)/p,j=b.at(-1)/h;for(let C=0;C<x.length;++C){let[R,I]=[0,0],N=0,z=-1/0;const V=x[C];for(let H=0;H<V.length;++H){const O=V[H];for(let q=0;q<O.length;++q){const ee=O[q];N+=ee,z=Math.max(z,ee),R+=(q+.5)*ee,I+=H*ee}}if(l!=null&&z<l)continue;const G=[M*R/N,j*I/N];w.push(G),T.push(C),k.push(z)}v.push({bbox:b,scores:k,labels:T,keypoints:w})}m.push(v)}return m}}},"./src/models/voxtral/processing_voxtral.js":(e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>d});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js"),a=r("./src/utils/tensor.js");const o="[AUDIO]",l="[BEGIN_AUDIO]",c=375;function f(h,p){const m=[];for(let g=0;g<h.length;g+=p)m.push(h.subarray(g,Math.min(g+p,h.length)));return m}class d extends s.Processor{async _call(p,m=null,g={}){if(Array.isArray(p))throw new Error("Batched inputs are not supported yet.");const x={};if(m){if(!p.includes(o))throw new Error(`The input text does not contain the audio token ${o}.`);Array.isArray(m)||(m=[m]);const v=p.split(o),_=v.length-1;if(_!==m.length)throw new Error(`The number of audio inputs (${m.length}) does not match the number of audio tokens in the text (${_}).`);const b=this.feature_extractor.config.n_samples,w=m.map(C=>f(C,b)),k=w.map(C=>C.length),T=w.flat(),M=(await Promise.all(T.map(C=>this.feature_extractor(C,g)))).map(C=>C.input_features);x.audio_values=M.length>1?(0,a.cat)(M,0):M[0];let j=v[0];for(let C=0;C<k.length;++C){j+=l;for(let R=0;R<k[C];++R)j+=o.repeat(c);j+=v[C+1]}p=j}return{...this.tokenizer(p,{add_special_tokens:!1,...g}),...x}}}de(d,"tokenizer_class",i.AutoTokenizer),de(d,"feature_extractor_class",n.AutoFeatureExtractor),de(d,"uses_processor_config",!1)},"./src/models/wav2vec2/feature_extraction_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{_zero_mean_unit_var_norm(o){const c=o.reduce((d,h)=>d+h,0)/o.length,f=o.reduce((d,h)=>d+(h-c)**2,0)/o.length;return o.map(d=>(d-c)/Math.sqrt(f+1e-7))}async _call(o){(0,n.validate_audio_inputs)(o,"Wav2Vec2FeatureExtractor"),o instanceof Float64Array&&(o=new Float32Array(o));let l=o;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const c=[1,l.length];return{input_values:new i.Tensor("float32",l,c),attention_mask:new i.Tensor("int64",new BigInt64Array(l.length).fill(1n),c)}}}},"./src/models/wav2vec2/processing_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}de(a,"tokenizer_class",n.AutoTokenizer),de(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}de(a,"tokenizer_class",n.AutoTokenizer),de(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wespeaker/feature_extraction_wespeaker.js":(e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(o){super(o);const l=this.config.sampling_rate,c=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,i.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(o){return o=o.map(l=>l*32768),(0,i.spectrogram)(o,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(o){(0,n.validate_audio_inputs)(o,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(o)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const c=l.mean(1).data,f=l.data,[d,h,p]=l.dims;for(let m=0;m<d;++m){const g=m*h*p,x=m*p;for(let y=0;y<h;++y){const v=g+y*p;for(let _=0;_<p;++_)f[v+_]-=c[x+_]}}}return{input_features:l}}}},"./src/models/whisper/common_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>i,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>a});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],i=new Map(n),s=new Map([...n.map(([o,l])=>[l,o]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function a(o){o=o.toLowerCase();let l=s.get(o);if(l===void 0){const c=o.match(/^<\|([a-z]{2})\|>$/);if(c&&(o=c[1]),i.has(o))l=o;else{const d=o.length===2?i.keys():i.values();throw new Error(`Language "${o}" is not supported. Must be one of: ${JSON.stringify(Array.from(d))}`)}}return l}},"./src/models/whisper/feature_extraction_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js"),s=r("./src/utils/maths.js");class a extends n.FeatureExtractor{constructor(l){var c;super(l),(c=this.config).mel_filters??(c.mel_filters=(0,i.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=(0,i.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const c=await(0,i.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),f=c.data,d=(0,s.max)(f)[0];for(let h=0;h<f.length;++h)f[h]=(Math.max(f[h],d-8)+4)/4;return c}async _call(l,{max_length:c=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let f;const d=c??this.config.n_samples;return l.length>d?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),f=l.slice(0,d)):(f=new Float32Array(d),f.set(l)),{input_features:(await this._extract_fbank_features(f)).unsqueeze_(0)}}}},"./src/models/whisper/generation_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>i});var n=r("./src/generation/configuration_utils.js");class i extends n.GenerationConfig{constructor(){super(...arguments);de(this,"return_timestamps",null);de(this,"return_token_timestamps",null);de(this,"num_frames",null);de(this,"alignment_heads",null);de(this,"task",null);de(this,"language",null);de(this,"no_timestamps_token_id",null);de(this,"prompt_ids",null);de(this,"is_multilingual",null);de(this,"lang_to_id",null);de(this,"task_to_id",null);de(this,"max_initial_timestamp_index",1)}}},"./src/models/whisper/processing_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class a extends s.Processor{async _call(l){return await this.feature_extractor(l)}}de(a,"tokenizer_class",i.AutoTokenizer),de(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/yolos/image_processing_yolos.js":(e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}class s extends i{}},"./src/ops/registry.js":(e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>l});var n=r("./src/backends/onnx.js"),i=r("./src/utils/tensor.js"),s=r("./src/env.js");const a=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV,o=async(c,f,d)=>{const h=await(0,n.createInferenceSession)(new Uint8Array(c),f);let p=Promise.resolve();return async m=>{const g=(0,n.isONNXProxy)(),x=Object.fromEntries(Object.entries(m).map(([v,_])=>[v,(g?_.clone():_).ort_tensor])),y=await(p=a?p.then(()=>h.run(x)):h.run(x));return Array.isArray(d)?d.map(v=>new i.Tensor(y[v])):new i.Tensor(y[d])}};class l{static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=o([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=o([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=o([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=o([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=o([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=o([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=o([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=o([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}de(l,"session_options",{})},"./src/pipelines.js":(e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>I,AutomaticSpeechRecognitionPipeline:()=>z,BackgroundRemovalPipeline:()=>O,DepthEstimationPipeline:()=>_e,DocumentQuestionAnsweringPipeline:()=>D,FeatureExtractionPipeline:()=>C,FillMaskPipeline:()=>_,ImageClassificationPipeline:()=>G,ImageFeatureExtractionPipeline:()=>R,ImageSegmentationPipeline:()=>H,ImageToImagePipeline:()=>oe,ImageToTextPipeline:()=>V,ObjectDetectionPipeline:()=>ee,Pipeline:()=>g,QuestionAnsweringPipeline:()=>v,SummarizationPipeline:()=>w,Text2TextGenerationPipeline:()=>b,TextClassificationPipeline:()=>x,TextGenerationPipeline:()=>M,TextToAudioPipeline:()=>K,TokenClassificationPipeline:()=>y,TranslationPipeline:()=>k,ZeroShotAudioClassificationPipeline:()=>N,ZeroShotClassificationPipeline:()=>j,ZeroShotImageClassificationPipeline:()=>q,ZeroShotObjectDetectionPipeline:()=>B,pipeline:()=>$e});var n=r("./src/tokenizers.js"),i=r("./src/models.js"),s=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var a=r("./src/utils/generic.js"),o=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),c=r("./src/utils/audio.js"),f=r("./src/utils/tensor.js"),d=r("./src/utils/image.js");async function h(ge){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(te=>d.RawImage.read(te)))}async function p(ge,te){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(re=>typeof re=="string"||re instanceof URL?(0,c.read_audio)(re,te):re instanceof Float64Array?new Float32Array(re):re))}function m(ge,te){te&&(ge=ge.map(je=>je|0));const[re,J,we,Ne]=ge;return{xmin:re,ymin:J,xmax:we,ymax:Ne}}class g extends a.Callable{constructor({task:te,model:re,tokenizer:J=null,processor:we=null}){super(),this.task=te,this.model=re,this.tokenizer=J,this.processor=we}async dispose(){await this.model.dispose()}}class x extends g{constructor(te){super(te)}async _call(te,{top_k:re=1}={}){const J=this.tokenizer(te,{padding:!0,truncation:!0}),we=await this.model(J),Ne=this.model.config.problem_type==="multi_label_classification"?Z=>Z.sigmoid():Z=>new f.Tensor("float32",(0,l.softmax)(Z.data),Z.dims),je=this.model.config.id2label,Pe=[];for(const Z of we.logits){const ne=Ne(Z),fe=await(0,f.topk)(ne,re),Me=fe[0].tolist(),me=fe[1].tolist().map((Fe,ze)=>({label:je?je[Fe]:`LABEL_${Fe}`,score:Me[ze]}));re===1?Pe.push(...me):Pe.push(me)}return Array.isArray(te)||re===1?Pe:Pe[0]}}class y extends g{constructor(te){super(te)}async _call(te,{ignore_labels:re=["O"]}={}){const J=Array.isArray(te),we=this.tokenizer(J?te:[te],{padding:!0,truncation:!0}),je=(await this.model(we)).logits,Pe=this.model.config.id2label,Z=[];for(let ne=0;ne<je.dims[0];++ne){const fe=we.input_ids[ne],Me=je[ne],Ce=[];for(let me=0;me<Me.dims[0];++me){const Fe=Me[me],ze=(0,l.max)(Fe.data)[1],Je=Pe?Pe[ze]:`LABEL_${ze}`;if(re.includes(Je))continue;const He=this.tokenizer.decode([fe[me].item()],{skip_special_tokens:!0});if(He==="")continue;const We=(0,l.softmax)(Fe.data);Ce.push({entity:Je,score:We[ze],index:me,word:He})}Z.push(Ce)}return J?Z:Z[0]}}class v extends g{constructor(te){super(te)}async _call(te,re,{top_k:J=1}={}){const we=this.tokenizer(te,{text_pair:re,padding:!0,truncation:!0}),{start_logits:Ne,end_logits:je}=await this.model(we),Pe=we.input_ids.tolist(),Z=we.attention_mask.tolist(),ne=this.tokenizer.all_special_ids,fe=[];for(let Me=0;Me<Ne.dims[0];++Me){const Ce=Pe[Me],me=Ce.findIndex(nt=>nt==this.tokenizer.sep_token_id);Z[Me].map((nt,ct)=>nt==1&&(ct===0||ct>me&&ne.findIndex(Ht=>Ht==Ce[ct])===-1));const Fe=Ne[Me].tolist(),ze=je[Me].tolist();for(let nt=1;nt<Fe.length;++nt)(Z[Me]==0||nt<=me||ne.findIndex(ct=>ct==Ce[nt])!==-1)&&(Fe[nt]=-1/0,ze[nt]=-1/0);const Je=(0,l.softmax)(Fe).map((nt,ct)=>[nt,ct]),He=(0,l.softmax)(ze).map((nt,ct)=>[nt,ct]);Je[0][0]=0,He[0][0]=0;const We=(0,o.product)(Je,He).filter(nt=>nt[0][1]<=nt[1][1]).map(nt=>[nt[0][1],nt[1][1],nt[0][0]*nt[1][0]]).sort((nt,ct)=>ct[2]-nt[2]);for(let nt=0;nt<Math.min(We.length,J);++nt){const[ct,Ht,Ut]=We[nt],$t=Ce.slice(ct,Ht+1),xn=this.tokenizer.decode($t,{skip_special_tokens:!0});fe.push({answer:xn,score:Ut})}}return J===1?fe[0]:fe}}class _ extends g{constructor(te){super(te)}async _call(te,{top_k:re=5}={}){const J=this.tokenizer(te,{padding:!0,truncation:!0}),{logits:we}=await this.model(J),Ne=[],je=J.input_ids.tolist();for(let Pe=0;Pe<je.length;++Pe){const Z=je[Pe],ne=Z.findIndex(Fe=>Fe==this.tokenizer.mask_token_id);if(ne===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const fe=we[Pe][ne],Me=await(0,f.topk)(new f.Tensor("float32",(0,l.softmax)(fe.data),fe.dims),re),Ce=Me[0].tolist(),me=Me[1].tolist();Ne.push(me.map((Fe,ze)=>{const Je=Z.slice();return Je[ne]=Fe,{score:Ce[ze],token:Number(Fe),token_str:this.tokenizer.decode([Fe]),sequence:this.tokenizer.decode(Je,{skip_special_tokens:!0})}}))}return Array.isArray(te)?Ne:Ne[0]}}class b extends g{constructor(re){super(re);de(this,"_key","generated_text")}async _call(re,J={}){Array.isArray(re)||(re=[re]),this.model.config.prefix&&(re=re.map(ne=>this.model.config.prefix+ne));const we=this.model.config.task_specific_params;we&&we[this.task]&&we[this.task].prefix&&(re=re.map(ne=>we[this.task].prefix+ne));const Ne=this.tokenizer,je={padding:!0,truncation:!0};let Pe;this instanceof k&&"_build_translation_inputs"in Ne?Pe=Ne._build_translation_inputs(re,je,J):Pe=Ne(re,je);const Z=await this.model.generate({...Pe,...J});return Ne.batch_decode(Z,{skip_special_tokens:!0}).map(ne=>({[this._key]:ne}))}}class w extends b{constructor(re){super(re);de(this,"_key","summary_text")}}class k extends b{constructor(re){super(re);de(this,"_key","translation_text")}}function T(ge){return Array.isArray(ge)&&ge.every(te=>"role"in te&&"content"in te)}class M extends g{constructor(te){super(te)}async _call(te,re={}){let J=!1,we=!1,Ne=re.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,je;if(typeof te=="string")je=te=[te];else if(Array.isArray(te)&&te.every(me=>typeof me=="string"))J=!0,je=te;else{if(T(te))te=[te];else if(Array.isArray(te)&&te.every(T))J=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");we=!0,je=te.map(me=>this.tokenizer.apply_chat_template(me,{tokenize:!1,add_generation_prompt:!0})),Ne=!1}const Pe=we?!1:re.return_full_text??!0;this.tokenizer.padding_side="left";const Z=this.tokenizer(je,{add_special_tokens:Ne,padding:!0,truncation:!0}),ne=await this.model.generate({...Z,...re}),fe=this.tokenizer.batch_decode(ne,{skip_special_tokens:!0});let Me;!Pe&&Z.input_ids.dims.at(-1)>0&&(Me=this.tokenizer.batch_decode(Z.input_ids,{skip_special_tokens:!0}).map(me=>me.length));const Ce=Array.from({length:te.length},me=>[]);for(let me=0;me<fe.length;++me){const Fe=Math.floor(me/ne.dims[0]*te.length);Me&&(fe[me]=fe[me].slice(Me[Fe])),Ce[Fe].push({generated_text:we?[...te[Fe],{role:"assistant",content:fe[me]}]:fe[me]})}return!J&&Ce.length===1?Ce[0]:Ce}}class j extends g{constructor(te){super(te),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([re,J])=>[re.toLowerCase(),J])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(te,re,{hypothesis_template:J="This example is {}.",multi_label:we=!1}={}){const Ne=Array.isArray(te);Ne||(te=[te]),Array.isArray(re)||(re=[re]);const je=re.map(ne=>J.replace("{}",ne)),Pe=we||re.length===1,Z=[];for(const ne of te){const fe=[];for(const me of je){const Fe=this.tokenizer(ne,{text_pair:me,padding:!0,truncation:!0}),ze=await this.model(Fe);Pe?fe.push([ze.logits.data[this.contradiction_id],ze.logits.data[this.entailment_id]]):fe.push(ze.logits.data[this.entailment_id])}const Ce=(Pe?fe.map(me=>(0,l.softmax)(me)[1]):(0,l.softmax)(fe)).map((me,Fe)=>[me,Fe]).sort((me,Fe)=>Fe[0]-me[0]);Z.push({sequence:ne,labels:Ce.map(me=>re[me[1]]),scores:Ce.map(me=>me[0])})}return Ne?Z:Z[0]}}class C extends g{constructor(te){super(te)}async _call(te,{pooling:re="none",normalize:J=!1,quantize:we=!1,precision:Ne="binary"}={}){const je=this.tokenizer(te,{padding:!0,truncation:!0}),Pe=await this.model(je);let Z=Pe.last_hidden_state??Pe.logits??Pe.token_embeddings;switch(re){case"none":break;case"mean":Z=(0,f.mean_pooling)(Z,je.attention_mask);break;case"first_token":case"cls":Z=Z.slice(null,0);break;case"last_token":case"eos":Z=Z.slice(null,-1);break;default:throw Error(`Pooling method '${re}' not supported.`)}return J&&(Z=Z.normalize(2,-1)),we&&(Z=(0,f.quantize_embeddings)(Z,Ne)),Z}}class R extends g{constructor(te){super(te)}async _call(te,{pool:re=null}={}){const J=await h(te),{pixel_values:we}=await this.processor(J),Ne=await this.model({pixel_values:we});let je;if(re){if(!("pooler_output"in Ne))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");je=Ne.pooler_output}else je=Ne.last_hidden_state??Ne.logits??Ne.image_embeds;return je}}class I extends g{constructor(te){super(te)}async _call(te,{top_k:re=5}={}){const J=this.processor.feature_extractor.config.sampling_rate,we=await p(te,J),Ne=this.model.config.id2label,je=[];for(const Pe of we){const Z=await this.processor(Pe),fe=(await this.model(Z)).logits[0],Me=await(0,f.topk)(new f.Tensor("float32",(0,l.softmax)(fe.data),fe.dims),re),Ce=Me[0].tolist(),Fe=Me[1].tolist().map((ze,Je)=>({label:Ne?Ne[ze]:`LABEL_${ze}`,score:Ce[Je]}));je.push(Fe)}return Array.isArray(te)?je:je[0]}}class N extends g{constructor(te){super(te)}async _call(te,re,{hypothesis_template:J="This is a sound of {}."}={}){const we=!Array.isArray(te);we&&(te=[te]);const Ne=re.map(fe=>J.replace("{}",fe)),je=this.tokenizer(Ne,{padding:!0,truncation:!0}),Pe=this.processor.feature_extractor.config.sampling_rate,Z=await p(te,Pe),ne=[];for(const fe of Z){const Me=await this.processor(fe),Ce=await this.model({...je,...Me}),me=(0,l.softmax)(Ce.logits_per_audio.data);ne.push([...me].map((Fe,ze)=>({score:Fe,label:re[ze]})))}return we?ne[0]:ne}}class z extends g{constructor(te){super(te)}async _call(te,re={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(te,re);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(te,re);case"moonshine":return this._call_moonshine(te,re);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(te,re){re.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),re.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const J=!Array.isArray(te);J&&(te=[te]);const we=this.processor.feature_extractor.config.sampling_rate,Ne=await p(te,we),je=[];for(const Pe of Ne){const Z=await this.processor(Pe),fe=(await this.model(Z)).logits[0],Me=[];for(const me of fe)Me.push((0,l.max)(me.data)[1]);const Ce=this.tokenizer.decode(Me);je.push({text:Ce})}return J?je[0]:je}async _call_whisper(te,re){const J=re.return_timestamps??!1,we=re.chunk_length_s??0,Ne=re.force_full_sequences??!1;let je=re.stride_length_s??null;const Pe={...re};J==="word"&&(Pe.return_token_timestamps=!0,Pe.return_timestamps=!1);const Z=!Array.isArray(te);Z&&(te=[te]);const ne=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,fe=this.processor.feature_extractor.config.hop_length,Me=this.processor.feature_extractor.config.sampling_rate,Ce=await p(te,Me),me=[];for(const Fe of Ce){let ze=[];if(we>0){if(je===null)je=we/6;else if(we<=je)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const We=Me*we,nt=Me*je,ct=We-2*nt;let Ht=0;for(;;){const Ut=Ht+We,$t=Fe.subarray(Ht,Ut),xn=await this.processor($t),Zr=Ht===0,dn=Ut>=Fe.length;if(ze.push({stride:[$t.length,Zr?0:nt,dn?0:nt],input_features:xn.input_features,is_last:dn}),dn)break;Ht+=ct}}else ze=[{stride:[Fe.length,0,0],input_features:(await this.processor(Fe)).input_features,is_last:!0}];for(const We of ze){Pe.num_frames=Math.floor(We.stride[0]/fe);const nt=await this.model.generate({inputs:We.input_features,...Pe});J==="word"?(We.tokens=nt.sequences.tolist()[0],We.token_timestamps=nt.token_timestamps.tolist()[0].map(ct=>(0,l.round)(ct,2))):We.tokens=nt[0].tolist(),We.stride=We.stride.map(ct=>ct/Me)}const[Je,He]=this.tokenizer._decode_asr(ze,{time_precision:ne,return_timestamps:J,force_full_sequences:Ne});me.push({text:Je,...He})}return Z?me[0]:me}async _call_moonshine(te,re){const J=!Array.isArray(te);J&&(te=[te]);const we=this.processor.feature_extractor.config.sampling_rate,Ne=await p(te,we),je=[];for(const Pe of Ne){const Z=await this.processor(Pe),ne=Math.floor(Pe.length/we)*6,fe=await this.model.generate({max_new_tokens:ne,...re,...Z}),Me=this.processor.batch_decode(fe,{skip_special_tokens:!0})[0];je.push({text:Me})}return J?je[0]:je}}class V extends g{constructor(te){super(te)}async _call(te,re={}){const J=Array.isArray(te),we=await h(te),{pixel_values:Ne}=await this.processor(we),je=[];for(const Pe of Ne){Pe.dims=[1,...Pe.dims];const Z=await this.model.generate({inputs:Pe,...re}),ne=this.tokenizer.batch_decode(Z,{skip_special_tokens:!0}).map(fe=>({generated_text:fe.trim()}));je.push(ne)}return J?je:je[0]}}class G extends g{constructor(te){super(te)}async _call(te,{top_k:re=5}={}){const J=await h(te),{pixel_values:we}=await this.processor(J),Ne=await this.model({pixel_values:we}),je=this.model.config.id2label,Pe=[];for(const Z of Ne.logits){const ne=await(0,f.topk)(new f.Tensor("float32",(0,l.softmax)(Z.data),Z.dims),re),fe=ne[0].tolist(),Ce=ne[1].tolist().map((me,Fe)=>({label:je?je[me]:`LABEL_${me}`,score:fe[Fe]}));Pe.push(Ce)}return Array.isArray(te)?Pe:Pe[0]}}class H extends g{constructor(te){super(te),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(te,{threshold:re=.5,mask_threshold:J=.5,overlap_mask_area_threshold:we=.8,label_ids_to_fuse:Ne=null,target_sizes:je=null,subtask:Pe=null}={}){if(Array.isArray(te)&&te.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const ne=await h(te),fe=ne.map(We=>[We.height,We.width]),Me=await this.processor(ne),{inputNames:Ce,outputNames:me}=this.model.sessions.model;if(!Ce.includes("pixel_values")){if(Ce.length!==1)throw Error(`Expected a single input name, but got ${Ce.length} inputs: ${Ce}.`);const We=Ce[0];if(We in Me)throw Error(`Input name ${We} already exists in the inputs.`);Me[We]=Me.pixel_values}const Fe=await this.model(Me);let ze=null;if(Pe!==null)ze=this.subtasks_mapping[Pe];else if(this.processor.image_processor){for(const[We,nt]of Object.entries(this.subtasks_mapping))if(nt in this.processor.image_processor){ze=this.processor.image_processor[nt].bind(this.processor.image_processor),Pe=We;break}}const Je=this.model.config.id2label,He=[];if(Pe)if(Pe==="panoptic"||Pe==="instance"){const We=ze(Fe,re,J,we,Ne,je??fe)[0],nt=We.segmentation;for(const ct of We.segments_info){const Ht=new Uint8ClampedArray(nt.data.length);for(let $t=0;$t<nt.data.length;++$t)nt.data[$t]===ct.id&&(Ht[$t]=255);const Ut=new d.RawImage(Ht,nt.dims[1],nt.dims[0],1);He.push({score:ct.score,label:Je[ct.label_id],mask:Ut})}}else if(Pe==="semantic"){const{segmentation:We,labels:nt}=ze(Fe,je??fe)[0];for(const ct of nt){const Ht=new Uint8ClampedArray(We.data.length);for(let $t=0;$t<We.data.length;++$t)We.data[$t]===ct&&(Ht[$t]=255);const Ut=new d.RawImage(Ht,We.dims[1],We.dims[0],1);He.push({score:null,label:Je[ct],mask:Ut})}}else throw Error(`Subtask ${Pe} not supported.`);else{const nt=Fe[me[0]];for(let ct=0;ct<fe.length;++ct){const Ht=fe[ct],Ut=nt[ct];Ut.data.some(xn=>xn<-1e-5||xn>1+1e-5)&&Ut.sigmoid_();const $t=await d.RawImage.fromTensor(Ut.mul_(255).to("uint8")).resize(Ht[1],Ht[0]);He.push({label:null,score:null,mask:$t})}}return He}}class O extends H{constructor(te){super(te)}async _call(te,re={}){if(Array.isArray(te)&&te.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const we=await h(te),Ne=await super._call(te,re);return we.map((Pe,Z)=>{const ne=Pe.clone();return ne.putAlpha(Ne[Z].mask),ne})}}class q extends g{constructor(te){super(te)}async _call(te,re,{hypothesis_template:J="This is a photo of {}"}={}){const we=Array.isArray(te),Ne=await h(te),je=re.map(Ce=>J.replace("{}",Ce)),Pe=this.tokenizer(je,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Z}=await this.processor(Ne),ne=await this.model({...Pe,pixel_values:Z}),fe=this.model.config.model_type==="siglip"?Ce=>Ce.sigmoid().data:Ce=>(0,l.softmax)(Ce.data),Me=[];for(const Ce of ne.logits_per_image){const Fe=[...fe(Ce)].map((ze,Je)=>({score:ze,label:re[Je]}));Fe.sort((ze,Je)=>Je.score-ze.score),Me.push(Fe)}return we?Me:Me[0]}}class ee extends g{constructor(te){super(te)}async _call(te,{threshold:re=.9,percentage:J=!1}={}){const we=Array.isArray(te);if(we&&te.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Ne=await h(te),je=J?null:Ne.map(me=>[me.height,me.width]),{pixel_values:Pe,pixel_mask:Z}=await this.processor(Ne),ne=await this.model({pixel_values:Pe,pixel_mask:Z}),fe=this.processor.image_processor.post_process_object_detection(ne,re,je),Me=this.model.config.id2label,Ce=fe.map(me=>me.boxes.map((Fe,ze)=>({score:me.scores[ze],label:Me[me.classes[ze]],box:m(Fe,!J)})));return we?Ce:Ce[0]}}class B extends g{constructor(te){super(te)}async _call(te,re,{threshold:J=.1,top_k:we=null,percentage:Ne=!1}={}){const je=Array.isArray(te),Pe=await h(te),Z=this.tokenizer(re,{padding:!0,truncation:!0}),ne=await this.processor(Pe),fe=[];for(let Me=0;Me<Pe.length;++Me){const Ce=Pe[Me],me=Ne?null:[[Ce.height,Ce.width]],Fe=ne.pixel_values[Me].unsqueeze_(0),ze=await this.model({...Z,pixel_values:Fe});let Je;if("post_process_grounded_object_detection"in this.processor){const He=this.processor.post_process_grounded_object_detection(ze,Z.input_ids,{box_threshold:J,text_threshold:J,target_sizes:me})[0];Je=He.boxes.map((We,nt)=>({score:He.scores[nt],label:He.labels[nt],box:m(We,!Ne)}))}else{const He=this.processor.image_processor.post_process_object_detection(ze,J,me,!0)[0];Je=He.boxes.map((We,nt)=>({score:He.scores[nt],label:re[He.classes[nt]],box:m(We,!Ne)}))}Je.sort((He,We)=>We.score-He.score),we!==null&&(Je=Je.slice(0,we)),fe.push(Je)}return je?fe:fe[0]}}class D extends g{constructor(te){super(te)}async _call(te,re,J={}){const we=(await h(te))[0],{pixel_values:Ne}=await this.processor(we),je=`<s_docvqa><s_question>${re}</s_question><s_answer>`,Pe=this.tokenizer(je,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Z=await this.model.generate({inputs:Ne,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:Pe,...J}),fe=this.tokenizer.batch_decode(Z)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Me=null;return fe&&fe.length>=2&&(Me=fe[1].trim()),[{answer:Me}]}}class K extends g{constructor(re){super(re);de(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=re.vocoder??null}async _call(re,{speaker_embeddings:J=null}={}){return this.processor?this._call_text_to_spectrogram(re,{speaker_embeddings:J}):this._call_text_to_waveform(re)}async _call_text_to_waveform(re){const J=this.tokenizer(re,{padding:!0,truncation:!0}),{waveform:we}=await this.model(J),Ne=this.model.config.sampling_rate;return new c.RawAudio(we.data,Ne)}async _call_text_to_spectrogram(re,{speaker_embeddings:J}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await i.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),(typeof J=="string"||J instanceof URL)&&(J=new Float32Array(await(await fetch(J)).arrayBuffer())),J instanceof Float32Array)J=new f.Tensor("float32",J,[1,J.length]);else if(!(J instanceof f.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:we}=this.tokenizer(re,{padding:!0,truncation:!0}),{waveform:Ne}=await this.model.generate_speech(we,J,{vocoder:this.vocoder}),je=this.processor.feature_extractor.config.sampling_rate;return new c.RawAudio(Ne.data,je)}}class oe extends g{constructor(te){super(te)}async _call(te){const re=await h(te),J=await this.processor(re),we=await this.model(J),Ne=[];for(const je of we.reconstruction){const Pe=je.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Ne.push(d.RawImage.fromTensor(Pe))}return Ne.length>1?Ne:Ne[0]}}class _e extends g{constructor(te){super(te)}async _call(te){const re=await h(te),J=await this.processor(re),{predicted_depth:we}=await this.model(J),Ne=[];for(let je=0;je<re.length;++je){const Pe=we[je],[Z,ne]=Pe.dims.slice(-2),[fe,Me]=re[je].size,Ce=(await(0,f.interpolate_4d)(Pe.view(1,1,Z,ne),{size:[Me,fe],mode:"bilinear"})).view(Me,fe),me=Ce.min().item(),Fe=Ce.max().item(),ze=Ce.sub(me).div_(Fe-me).mul_(255).to("uint8").unsqueeze(0),Je=d.RawImage.fromTensor(ze);Ne.push({predicted_depth:Ce,depth:Je})}return Ne.length>1?Ne:Ne[0]}}const ue=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:x,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:y,model:i.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:v,model:i.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:_,model:i.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:w,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:k,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:b,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:M,model:i.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:j,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:I,model:i.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:N,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:z,model:[i.AutoModelForSpeechSeq2Seq,i.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:K,model:[i.AutoModelForTextToWaveform,i.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:V,model:i.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:G,model:i.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:H,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:O,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:q,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ee,model:i.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:B,model:i.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:D,model:i.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:oe,model:i.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:_e,model:i.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:C,model:i.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:R,model:[i.AutoModelForImageFeatureExtraction,i.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),ye=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function $e(ge,te=null,{progress_callback:re=null,config:J=null,cache_dir:we=null,local_files_only:Ne=!1,revision:je="main",device:Pe=null,dtype:Z=null,subfolder:ne="onnx",use_external_data_format:fe=null,model_file_name:Me=null,session_options:Ce={}}={}){ge=ye[ge]??ge;const me=ue[ge.split("_",1)[0]];if(!me)throw Error(`Unsupported pipeline: ${ge}. Must be one of [${Object.keys(ue)}]`);te||(te=me.default.model,console.log(`No model specified. Using default model: "${te}".`));const Fe={progress_callback:re,config:J,cache_dir:we,local_files_only:Ne,revision:je,device:Pe,dtype:Z,subfolder:ne,use_external_data_format:fe,model_file_name:Me,session_options:Ce},ze=new Map([["tokenizer",me.tokenizer],["model",me.model],["processor",me.processor]]),Je=await Se(ze,te,Fe);Je.task=ge,(0,o.dispatchCallback)(re,{status:"ready",task:ge,model:te});const He=me.pipeline;return new He(Je)}async function Se(ge,te,re){const J=Object.create(null),we=[];for(const[Ne,je]of ge.entries()){if(!je)continue;let Pe;Array.isArray(je)?Pe=new Promise(async(Z,ne)=>{var Me,Ce;let fe;for(const me of je){if(me===null){Z(null);return}try{Z(await me.from_pretrained(te,re));return}catch(Fe){if((Me=Fe.message)!=null&&Me.includes("Unsupported model type"))fe=Fe;else if((Ce=Fe.message)!=null&&Ce.includes("Could not locate file"))fe=Fe;else{ne(Fe);return}}}ne(fe)}):Pe=je.from_pretrained(te,re),J[Ne]=Pe,we.push(Pe)}await Promise.all(we);for(const[Ne,je]of Object.entries(J))J[Ne]=await je;return J}},"./src/tokenizers.js":(e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>Ro,AutoTokenizer:()=>Bu,BartTokenizer:()=>pt,BertTokenizer:()=>Lo,BlenderbotSmallTokenizer:()=>Vr,BlenderbotTokenizer:()=>ut,BloomTokenizer:()=>cs,CLIPTokenizer:()=>hl,CamembertTokenizer:()=>Ue,CodeGenTokenizer:()=>us,CodeLlamaTokenizer:()=>di,CohereTokenizer:()=>Xa,ConvBertTokenizer:()=>le,DebertaTokenizer:()=>F,DebertaV2Tokenizer:()=>ce,DistilBertTokenizer:()=>Oe,ElectraTokenizer:()=>Dt,Ernie4_5_Tokenizer:()=>Fu,EsmTokenizer:()=>Bo,FalconTokenizer:()=>fi,GPT2Tokenizer:()=>Wt,GPTNeoXTokenizer:()=>Fo,GemmaTokenizer:()=>Wi,Grok1Tokenizer:()=>As,HerbertTokenizer:()=>Q,LlamaTokenizer:()=>ui,M2M100Tokenizer:()=>Ln,MBart50Tokenizer:()=>Pr,MBartTokenizer:()=>xr,MPNetTokenizer:()=>_a,MarianTokenizer:()=>Xe,MgpstrTokenizer:()=>Ru,MobileBertTokenizer:()=>tr,NllbTokenizer:()=>Ka,NougatTokenizer:()=>qa,PreTrainedTokenizer:()=>Et,Qwen2Tokenizer:()=>Ui,RoFormerTokenizer:()=>pe,RobertaTokenizer:()=>zi,SiglipTokenizer:()=>Gi,SpeechT5Tokenizer:()=>pl,SqueezeBertTokenizer:()=>zr,T5Tokenizer:()=>At,TokenizerModel:()=>R,VitsTokenizer:()=>ml,Wav2Vec2CTCTokenizer:()=>Ye,WhisperTokenizer:()=>Wn,XLMRobertaTokenizer:()=>Vi,XLMTokenizer:()=>ht,is_chinese_char:()=>_});var n=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),a=r("./src/utils/maths.js"),o=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),c=r("./node_modules/@huggingface/jinja/dist/index.js"),f=r("./src/models/whisper/common_whisper.js");async function d(Te,U){const ie=await Promise.all([(0,s.getModelJSON)(Te,"tokenizer.json",!0,U),(0,s.getModelJSON)(Te,"tokenizer_config.json",!0,U)]);return U.legacy!==null&&(ie[1].legacy=U.legacy),ie}function h(Te,U){const ie=[];let he=0;for(const xe of Te.matchAll(U)){const ke=xe[0];he<xe.index&&ie.push(Te.slice(he,xe.index)),ke.length>0&&ie.push(ke),he=xe.index+ke.length}return he<Te.length&&ie.push(Te.slice(he)),ie}function p(Te,U=!0){if(Te.Regex!==void 0){let ie=Te.Regex.replace(/\\([#&~])/g,"$1");for(const[he,xe]of j)ie=ie.replaceAll(he,xe);return new RegExp(ie,"gu")}else if(Te.String!==void 0){const ie=(0,i.escapeRegExp)(Te.String);return new RegExp(U?ie:`(${ie})`,"gu")}else return console.warn("Unknown pattern type:",Te),null}function m(Te){return new Map(Object.entries(Te))}function g(Te){const U=Te.dims;switch(U.length){case 1:return Te.tolist();case 2:if(U[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Te.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${U.length}.`)}}function x(Te){return Te.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function y(Te){return Te.replace(new RegExp("\\p{M}","gu"),"")}function v(Te){return y(Te.toLowerCase())}function _(Te){return Te>=19968&&Te<=40959||Te>=13312&&Te<=19903||Te>=131072&&Te<=173791||Te>=173824&&Te<=177983||Te>=177984&&Te<=178207||Te>=178208&&Te<=183983||Te>=63744&&Te<=64255||Te>=194560&&Te<=195103}function b(Te,U,ie){const he=[];let xe=0;for(;xe<Te.length;){if(he.push(Te[xe]),(U.get(Te[xe])??ie)!==ie){++xe;continue}for(;++xe<Te.length&&(U.get(Te[xe])??ie)===ie;)U.get(he.at(-1))!==ie&&(he[he.length-1]+=Te[xe])}return he}function w(Te){return Te.match(/\S+/g)||[]}const k="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",T=new RegExp(`^[${k}]+$`,"gu"),M=".,!?",j=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${M}])]+`,` ?[^\\s${M}]+`]]);class C{constructor(U){this.content=U.content,this.id=U.id,this.single_word=U.single_word??!1,this.lstrip=U.lstrip??!1,this.rstrip=U.rstrip??!1,this.special=U.special??!1,this.normalized=U.normalized??null}}class R extends n.Callable{constructor(U){super(),this.config=U,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(U,...ie){switch(U.type){case"WordPiece":return new I(U);case"Unigram":return new N(U,...ie);case"BPE":return new G(U);default:if(U.vocab)return Array.isArray(U.vocab)?new N(U,...ie):Object.hasOwn(U,"continuing_subword_prefix")&&Object.hasOwn(U,"unk_token")?Object.hasOwn(U,"merges")?new G(U):new I(U):new H(U,...ie);throw new Error(`Unknown TokenizerModel type: ${U.type}`)}}_call(U){return U=this.encode(U),this.fuse_unk&&(U=b(U,this.tokens_to_ids,this.unk_token_id)),U}encode(U){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(U){return U.map(ie=>this.tokens_to_ids.get(ie)??this.unk_token_id)}convert_ids_to_tokens(U){return U.map(ie=>this.vocab[ie]??this.unk_token)}}class I extends R{constructor(U){super(U),this.tokens_to_ids=m(U.vocab),this.unk_token_id=this.tokens_to_ids.get(U.unk_token),this.unk_token=U.unk_token,this.max_input_chars_per_word=U.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[ie,he]of this.tokens_to_ids)this.vocab[he]=ie}encode(U){const ie=[];for(const he of U){const xe=[...he];if(xe.length>this.max_input_chars_per_word){ie.push(this.unk_token);continue}let ke=!1,De=0;const Qe=[];for(;De<xe.length;){let at=xe.length,it=null;for(;De<at;){let ft=xe.slice(De,at).join("");if(De>0&&(ft=this.config.continuing_subword_prefix+ft),this.tokens_to_ids.has(ft)){it=ft;break}--at}if(it===null){ke=!0;break}Qe.push(it),De=at}ke?ie.push(this.unk_token):ie.push(...Qe)}return ie}}class N extends R{constructor(U,ie){super(U);const he=U.vocab.length;this.vocab=new Array(he),this.scores=new Array(he);for(let xe=0;xe<he;++xe)[this.vocab[xe],this.scores[xe]]=U.vocab[xe];this.unk_token_id=U.unk_id,this.unk_token=this.vocab[U.unk_id],this.tokens_to_ids=new Map(this.vocab.map((xe,ke)=>[xe,ke])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ie.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,a.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(U){const ie=U.chars,he=1;let xe=0;for(;xe<ie.length;){let ke=!1;const De=ie.slice(xe).join(""),Qe=this.trie.commonPrefixSearch(De);for(const at of Qe){const it=this.tokens_to_ids.get(at),ft=this.scores[it],Rt=(0,i.len)(at);U.insert(xe,Rt,ft,it),!ke&&Rt===he&&(ke=!0)}ke||U.insert(xe,he,this.unk_score,this.unk_token_id),xe+=he}}tokenize(U){const ie=new l.TokenLattice(U,this.bos_token_id,this.eos_token_id);return this.populateNodes(ie),ie.tokens()}encode(U){const ie=[];for(const he of U){const xe=this.tokenize(he);ie.push(...xe)}return ie}}const z=(()=>{const Te=[...Array.from({length:94},(xe,ke)=>ke+33),...Array.from({length:12},(xe,ke)=>ke+161),...Array.from({length:82},(xe,ke)=>ke+174)],U=Te.slice();let ie=0;for(let xe=0;xe<256;++xe)Te.includes(xe)||(Te.push(xe),U.push(256+ie),ie+=1);const he=U.map(xe=>String.fromCharCode(xe));return Object.fromEntries(Te.map((xe,ke)=>[xe,he[ke]]))})(),V=(0,i.reverseDictionary)(z);class G extends R{constructor(U){super(U),this.tokens_to_ids=m(U.vocab),this.unk_token_id=this.tokens_to_ids.get(U.unk_token),this.unk_token=U.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[he,xe]of this.tokens_to_ids)this.vocab[xe]=he;const ie=Array.isArray(U.merges[0]);this.merges=ie?U.merges:U.merges.map(he=>he.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((he,xe)=>[JSON.stringify(he),xe])),this.end_of_word_suffix=U.end_of_word_suffix,this.continuing_subword_suffix=U.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(U){if(U.length===0)return[];const ie=this.cache.get(U);if(ie!==void 0)return ie;const he=Array.from(U);this.end_of_word_suffix&&(he[he.length-1]+=this.end_of_word_suffix);let xe=[];if(he.length>1){const ke=new l.PriorityQueue((at,it)=>at.score<it.score);let De={token:he[0],bias:0,prev:null,next:null},Qe=De;for(let at=1;at<he.length;++at){const it={bias:at/he.length,token:he[at],prev:Qe,next:null};Qe.next=it,this._add_node(ke,Qe),Qe=it}for(;!ke.isEmpty();){const at=ke.pop();if(at.deleted||!at.next||at.next.deleted)continue;if(at.deleted=!0,at.next.deleted=!0,at.prev){const ft={...at.prev};at.prev.deleted=!0,at.prev=ft,ft.prev?ft.prev.next=ft:De=ft}const it={token:at.token+at.next.token,bias:at.bias,prev:at.prev,next:at.next.next};it.prev?(it.prev.next=it,this._add_node(ke,it.prev)):De=it,it.next&&(it.next.prev=it,this._add_node(ke,it))}for(let at=De;at!==null;at=at.next)xe.push(at.token)}else xe=he;if(this.continuing_subword_suffix)for(let ke=0;ke<xe.length-1;++ke)xe[ke]+=this.continuing_subword_suffix;return U.length<this.max_length_to_cache&&this.cache.put(U,xe),xe}_add_node(U,ie){const he=this.bpe_ranks.get(JSON.stringify([ie.token,ie.next.token]));he!==void 0&&(ie.score=he+ie.bias,U.push(ie))}encode(U){const ie=[];for(const he of U){if(this.ignore_merges&&this.tokens_to_ids.has(he)){ie.push(he);continue}const xe=this.bpe(he);for(const ke of xe)if(this.tokens_to_ids.has(ke))ie.push(ke);else if(this.byte_fallback){const De=Array.from(this.text_encoder.encode(ke)).map(Qe=>`<0x${Qe.toString(16).toUpperCase().padStart(2,"0")}>`);De.every(Qe=>this.tokens_to_ids.has(Qe))?ie.push(...De):ie.push(this.unk_token)}else ie.push(this.unk_token)}return ie}}class H extends R{constructor(U,ie){super(U),this.tokens_to_ids=m(ie.target_lang?U.vocab[ie.target_lang]:U.vocab),this.bos_token=ie.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ie.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=ie.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=ie.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[he,xe]of this.tokens_to_ids)this.vocab[xe]=he}encode(U){return U}}class O extends n.Callable{constructor(U){super(),this.config=U}static fromConfig(U){if(U===null)return null;switch(U.type){case"BertNormalizer":return new ge(U);case"Precompiled":return new dn(U);case"Sequence":return new Se(U);case"Replace":return new q(U);case"NFC":return new B(U);case"NFD":return new D(U);case"NFKC":return new K(U);case"NFKD":return new oe(U);case"Strip":return new _e(U);case"StripAccents":return new ue(U);case"Lowercase":return new ye(U);case"Prepend":return new $e(U);default:throw new Error(`Unknown Normalizer type: ${U.type}`)}}normalize(U){throw Error("normalize should be implemented in subclass.")}_call(U){return this.normalize(U)}}class q extends O{normalize(U){const ie=p(this.config.pattern);return ie===null?U:U.replaceAll(ie,this.config.content)}}class ee extends O{constructor(){super(...arguments);de(this,"form")}normalize(ie){return ie=ie.normalize(this.form),ie}}class B extends ee{constructor(){super(...arguments);de(this,"form","NFC")}}class D extends ee{constructor(){super(...arguments);de(this,"form","NFD")}}class K extends ee{constructor(){super(...arguments);de(this,"form","NFKC")}}class oe extends ee{constructor(){super(...arguments);de(this,"form","NFKD")}}class _e extends O{normalize(U){return this.config.strip_left&&this.config.strip_right?U=U.trim():(this.config.strip_left&&(U=U.trimStart()),this.config.strip_right&&(U=U.trimEnd())),U}}class ue extends O{normalize(U){return U=y(U),U}}class ye extends O{normalize(U){return U=U.toLowerCase(),U}}class $e extends O{normalize(U){return U=this.config.prepend+U,U}}class Se extends O{constructor(U){super(U),this.normalizers=U.normalizers.map(ie=>O.fromConfig(ie))}normalize(U){return this.normalizers.reduce((ie,he)=>he.normalize(ie),U)}}class ge extends O{_tokenize_chinese_chars(U){const ie=[];for(let he=0;he<U.length;++he){const xe=U[he],ke=xe.charCodeAt(0);_(ke)?(ie.push(" "),ie.push(xe),ie.push(" ")):ie.push(xe)}return ie.join("")}stripAccents(U){return U.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(U){switch(U){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(U)}}_clean_text(U){const ie=[];for(const he of U){const xe=he.charCodeAt(0);xe===0||xe===65533||this._is_control(he)||(/^\s$/.test(he)?ie.push(" "):ie.push(he))}return ie.join("")}normalize(U){return this.config.clean_text&&(U=this._clean_text(U)),this.config.handle_chinese_chars&&(U=this._tokenize_chinese_chars(U)),this.config.lowercase?(U=U.toLowerCase(),this.config.strip_accents!==!1&&(U=this.stripAccents(U))):this.config.strip_accents&&(U=this.stripAccents(U)),U}}class te extends n.Callable{static fromConfig(U){if(U===null)return null;switch(U.type){case"BertPreTokenizer":return new re(U);case"Sequence":return new Cs(U);case"Whitespace":return new vt(U);case"WhitespaceSplit":return new er(U);case"Metaspace":return new xn(U);case"ByteLevel":return new J(U);case"Split":return new we(U);case"Punctuation":return new Ne(U);case"Digits":return new je(U);case"Replace":return new kr(U);default:throw new Error(`Unknown PreTokenizer type: ${U.type}`)}}pre_tokenize_text(U,ie){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(U,ie){return(Array.isArray(U)?U.map(he=>this.pre_tokenize_text(he,ie)):this.pre_tokenize_text(U,ie)).flat()}_call(U,ie){return this.pre_tokenize(U,ie)}}class re extends te{constructor(U){super(),this.pattern=new RegExp(`[^\\s${k}]+|[${k}]`,"gu")}pre_tokenize_text(U,ie){return U.trim().match(this.pattern)||[]}}class J extends te{constructor(U){super(),this.config=U,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=z,this.text_encoder=new TextEncoder}pre_tokenize_text(U,ie){return this.add_prefix_space&&!U.startsWith(" ")&&(U=" "+U),(this.use_regex?U.match(this.pattern)||[]:[U]).map(xe=>Array.from(this.text_encoder.encode(xe),ke=>this.byte_encoder[ke]).join(""))}}class we extends te{constructor(U){super(),this.config=U,this.pattern=p(this.config.pattern,this.config.invert)}pre_tokenize_text(U,ie){var he;return this.pattern===null?[]:this.config.invert?U.match(this.pattern)||[]:((he=this.config.behavior)==null?void 0:he.toLowerCase())==="removed"?U.split(this.pattern).filter(xe=>xe):h(U,this.pattern)}}class Ne extends te{constructor(U){super(),this.config=U,this.pattern=new RegExp(`[^${k}]+|[${k}]+`,"gu")}pre_tokenize_text(U,ie){return U.match(this.pattern)||[]}}class je extends te{constructor(U){super(),this.config=U;const ie=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(ie,"gu")}pre_tokenize_text(U,ie){return U.match(this.pattern)||[]}}class Pe extends n.Callable{constructor(U){super(),this.config=U}static fromConfig(U){if(U===null)return null;switch(U.type){case"TemplateProcessing":return new fe(U);case"ByteLevel":return new Me(U);case"RobertaProcessing":return new ne(U);case"BertProcessing":return new Z(U);case"Sequence":return new Ce(U);default:throw new Error(`Unknown PostProcessor type: ${U.type}`)}}post_process(U,...ie){throw Error("post_process should be implemented in subclass.")}_call(U,...ie){return this.post_process(U,...ie)}}class Z extends Pe{constructor(U){super(U),this.cls=U.cls[0],this.sep=U.sep[0]}post_process(U,ie=null,{add_special_tokens:he=!0}={}){he&&(U=(0,i.mergeArrays)([this.cls],U,[this.sep]));let xe=new Array(U.length).fill(0);if(ie!==null){const ke=he&&this instanceof ne?[this.sep]:[],De=he?[this.sep]:[];U=(0,i.mergeArrays)(U,ke,ie,De),xe=(0,i.mergeArrays)(xe,new Array(ie.length+ke.length+De.length).fill(1))}return{tokens:U,token_type_ids:xe}}}class ne extends Z{}class fe extends Pe{constructor(U){super(U),this.single=U.single,this.pair=U.pair}post_process(U,ie=null,{add_special_tokens:he=!0}={}){const xe=ie===null?this.single:this.pair;let ke=[],De=[];for(const Qe of xe)"SpecialToken"in Qe?he&&(ke.push(Qe.SpecialToken.id),De.push(Qe.SpecialToken.type_id)):"Sequence"in Qe&&(Qe.Sequence.id==="A"?(ke=(0,i.mergeArrays)(ke,U),De=(0,i.mergeArrays)(De,new Array(U.length).fill(Qe.Sequence.type_id))):Qe.Sequence.id==="B"&&(ke=(0,i.mergeArrays)(ke,ie),De=(0,i.mergeArrays)(De,new Array(ie.length).fill(Qe.Sequence.type_id))));return{tokens:ke,token_type_ids:De}}}class Me extends Pe{post_process(U,ie=null){return ie&&(U=(0,i.mergeArrays)(U,ie)),{tokens:U}}}class Ce extends Pe{constructor(U){super(U),this.processors=U.processors.map(ie=>Pe.fromConfig(ie))}post_process(U,ie=null,he={}){let xe;for(const ke of this.processors)if(ke instanceof Me)U=ke.post_process(U).tokens,ie&&(ie=ke.post_process(ie).tokens);else{const De=ke.post_process(U,ie,he);U=De.tokens,xe=De.token_type_ids}return{tokens:U,token_type_ids:xe}}}class me extends n.Callable{constructor(U){super(),this.config=U,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=U.trim_offsets}static fromConfig(U){if(U===null)return null;switch(U.type){case"WordPiece":return new We(U);case"Metaspace":return new Zr(U);case"ByteLevel":return new nt(U);case"Replace":return new Fe(U);case"ByteFallback":return new ze(U);case"Fuse":return new Je(U);case"Strip":return new He(U);case"Sequence":return new Ht(U);case"CTC":return new ct(U);case"BPEDecoder":return new Ut(U);default:throw new Error(`Unknown Decoder type: ${U.type}`)}}_call(U){return this.decode(U)}decode(U){return this.decode_chain(U).join("")}decode_chain(U){throw Error("`decode_chain` should be implemented in subclass.")}}class Fe extends me{decode_chain(U){const ie=p(this.config.pattern);return ie===null?U:U.map(he=>he.replaceAll(ie,this.config.content))}}class ze extends me{constructor(U){super(U),this.text_decoder=new TextDecoder}decode_chain(U){const ie=[];let he=[];for(const xe of U){let ke=null;if(xe.length===6&&xe.startsWith("<0x")&&xe.endsWith(">")){const De=parseInt(xe.slice(3,5),16);isNaN(De)||(ke=De)}if(ke!==null)he.push(ke);else{if(he.length>0){const De=this.text_decoder.decode(Uint8Array.from(he));ie.push(De),he=[]}ie.push(xe)}}if(he.length>0){const xe=this.text_decoder.decode(Uint8Array.from(he));ie.push(xe),he=[]}return ie}}class Je extends me{decode_chain(U){return[U.join("")]}}class He extends me{constructor(U){super(U),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(U){return U.map(ie=>{let he=0;for(let ke=0;ke<this.start&&ie[ke]===this.content;++ke){he=ke+1;continue}let xe=ie.length;for(let ke=0;ke<this.stop;++ke){const De=ie.length-ke-1;if(ie[De]===this.content){xe=De;continue}else break}return ie.slice(he,xe)})}}class We extends me{constructor(U){super(U),this.cleanup=U.cleanup}decode_chain(U){return U.map((ie,he)=>(he!==0&&(ie.startsWith(this.config.prefix)?ie=ie.replace(this.config.prefix,""):ie=" "+ie),this.cleanup&&(ie=x(ie)),ie))}}class nt extends me{constructor(U){super(U),this.byte_decoder=V,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(U){const ie=U.join(""),he=new Uint8Array([...ie].map(ke=>this.byte_decoder[ke]));return this.text_decoder.decode(he)}decode_chain(U){const ie=[];let he=[];for(const xe of U)this.added_tokens.find(ke=>ke.content===xe)!==void 0?(he.length>0&&(ie.push(this.convert_tokens_to_string(he)),he=[]),ie.push(xe)):he.push(xe);return he.length>0&&ie.push(this.convert_tokens_to_string(he)),ie}}class ct extends me{constructor(U){super(U),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(U){if(U.length===0)return"";const ie=[U[0]];for(let ke=1;ke<U.length;++ke)U[ke]!==ie.at(-1)&&ie.push(U[ke]);let xe=ie.filter(ke=>ke!==this.pad_token).join("");return this.cleanup&&(xe=x(xe).replaceAll(this.word_delimiter_token," ").trim()),xe}decode_chain(U){return[this.convert_tokens_to_string(U)]}}class Ht extends me{constructor(U){super(U),this.decoders=U.decoders.map(ie=>me.fromConfig(ie))}decode_chain(U){return this.decoders.reduce((ie,he)=>he.decode_chain(ie),U)}}class Ut extends me{constructor(U){super(U),this.suffix=this.config.suffix}decode_chain(U){return U.map((ie,he)=>ie.replaceAll(this.suffix,he===U.length-1?"":" "))}}class $t extends me{decode_chain(U){let ie="";for(let he=1;he<U.length;he+=2)ie+=U[he];return[ie]}}class xn extends te{constructor(U){super(),this.addPrefixSpace=U.add_prefix_space,this.replacement=U.replacement,this.strRep=U.str_rep||this.replacement,this.prepend_scheme=U.prepend_scheme??"always"}pre_tokenize_text(U,{section_index:ie=void 0}={}){let he=U.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!he.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&ie===0)&&(he=this.strRep+he),[he]}}class Zr extends me{constructor(U){super(U),this.addPrefixSpace=U.add_prefix_space,this.replacement=U.replacement}decode_chain(U){const ie=[];for(let he=0;he<U.length;++he){let xe=U[he].replaceAll(this.replacement," ");this.addPrefixSpace&&he==0&&xe.startsWith(" ")&&(xe=xe.substring(1)),ie.push(xe)}return ie}}class dn extends O{constructor(U){super(U),this.charsmap=U.precompiled_charsmap}normalize(U){return U=U.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),U=U.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),U.includes("")?U=U.split("").map(he=>he.normalize("NFKC")).join(""):U=U.normalize("NFKC"),U}}class Cs extends te{constructor(U){super(),this.tokenizers=U.pretokenizers.map(ie=>te.fromConfig(ie))}pre_tokenize_text(U,ie){return this.tokenizers.reduce((he,xe)=>xe.pre_tokenize(he,ie),[U])}}class vt extends te{constructor(U){super()}pre_tokenize_text(U,ie){return U.match(/\w+|[^\w\s]+/g)||[]}}class er extends te{constructor(U){super()}pre_tokenize_text(U,ie){return w(U)}}class kr extends te{constructor(U){super(),this.config=U,this.pattern=p(this.config.pattern),this.content=this.config.content}pre_tokenize_text(U,ie){return this.pattern===null?[U]:[U.replaceAll(this.pattern,this.config.content)]}}const li=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function ci(Te,U,ie,he){for(const xe of Object.keys(Te)){const ke=U-Te[xe].length,De=ie(xe),Qe=new Array(ke).fill(De);Te[xe]=he==="right"?(0,i.mergeArrays)(Te[xe],Qe):(0,i.mergeArrays)(Qe,Te[xe])}}function Hs(Te,U){for(const ie of Object.keys(Te))Te[ie].length=U}class Et extends n.Callable{constructor(ie,he){super();de(this,"return_token_type_ids",!1);de(this,"padding_side","right");this.config=he,this.normalizer=O.fromConfig(ie.normalizer),this.pre_tokenizer=te.fromConfig(ie.pre_tokenizer),this.model=R.fromConfig(ie.model,he),this.post_processor=Pe.fromConfig(ie.post_processor),this.decoder=me.fromConfig(ie.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const xe of ie.added_tokens){const ke=new C(xe);this.added_tokens.push(ke),this.model.tokens_to_ids.set(ke.content,ke.id),this.model.vocab[ke.id]=ke.content,ke.special&&(this.special_tokens.push(ke.content),this.all_special_ids.push(ke.id))}if(this.additional_special_tokens=he.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(xe=>xe.content)),this.added_tokens_map=new Map(this.added_tokens.map(xe=>[xe.content,xe])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=he.model_max_length,this.remove_space=he.remove_space,this.clean_up_tokenization_spaces=he.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=he.do_lowercase_and_remove_accent??!1,he.padding_side&&(this.padding_side=he.padding_side),this.add_bos_token=he.add_bos_token,this.add_eos_token=he.add_eos_token,this.legacy=!1,this.chat_template=he.chat_template??null,Array.isArray(this.chat_template)){const xe=Object.create(null);for(const{name:ke,template:De}of this.chat_template){if(typeof ke!="string"||typeof De!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');xe[ke]=De}this.chat_template=xe}this._compiled_template_cache=new Map}getToken(...ie){for(const he of ie){const xe=this.config[he];if(xe)if(typeof xe=="object"){if(xe.__type==="AddedToken")return xe.content;throw Error(`Unknown token: ${xe}`)}else return xe}return null}static async from_pretrained(ie,{progress_callback:he=null,config:xe=null,cache_dir:ke=null,local_files_only:De=!1,revision:Qe="main",legacy:at=null}={}){const it=await d(ie,{progress_callback:he,config:xe,cache_dir:ke,local_files_only:De,revision:Qe,legacy:at});return new this(...it)}_call(ie,{text_pair:he=null,add_special_tokens:xe=!0,padding:ke=!1,truncation:De=null,max_length:Qe=null,return_tensor:at=!0,return_token_type_ids:it=null}={}){const ft=Array.isArray(ie);let Rt;if(ft){if(ie.length===0)throw Error("text array must be non-empty");if(he!==null){if(Array.isArray(he)){if(ie.length!==he.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");Rt=ie.map((mr,hn)=>this._encode_plus(mr,{text_pair:he[hn],add_special_tokens:xe,return_token_type_ids:it}))}else Rt=ie.map(mr=>this._encode_plus(mr,{add_special_tokens:xe,return_token_type_ids:it}))}else{if(ie==null)throw Error("text may not be null or undefined");if(Array.isArray(he))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");Rt=[this._encode_plus(ie,{text_pair:he,add_special_tokens:xe,return_token_type_ids:it})]}if(Qe===null?Qe=this.model_max_length:De===null&&(ke===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Qe=this.model_max_length):ke===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),De=!0)),ke===!0&&(Qe=Math.min((0,a.max)(Rt.map(mr=>mr.input_ids.length))[0],Qe??1/0)),Qe=Math.min(Qe,this.model_max_length??1/0),ke||De)for(let mr=0;mr<Rt.length;++mr)Rt[mr].input_ids.length!==Qe&&(Rt[mr].input_ids.length>Qe?De&&Hs(Rt[mr],Qe):ke&&ci(Rt[mr],Qe,hn=>hn==="input_ids"?this.pad_token_id:0,this.padding_side));const br={};if(at){if(!(ke&&De)&&Rt.some(hn=>{var Or;for(const Gn of Object.keys(hn))if(hn[Gn].length!==((Or=Rt[0][Gn])==null?void 0:Or.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const mr=[Rt.length,Rt[0].input_ids.length];for(const hn of Object.keys(Rt[0]))br[hn]=new o.Tensor("int64",BigInt64Array.from(Rt.flatMap(Or=>Or[hn]).map(BigInt)),mr)}else{for(const mr of Object.keys(Rt[0]))br[mr]=Rt.map(hn=>hn[mr]);if(!ft)for(const mr of Object.keys(br))br[mr]=br[mr][0]}return br}_encode_text(ie){if(ie===null)return null;const he=this.added_tokens_splitter.split(ie);for(let ke=0;ke<he.length;++ke){const De=this.added_tokens_map.get(he[ke]);De&&(De.lstrip&&ke>0&&(he[ke-1]=he[ke-1].trimEnd()),De.rstrip&&ke<he.length-1&&(he[ke+1]=he[ke+1].trimStart()))}return he.flatMap((ke,De)=>{if(ke.length===0)return[];if(this.added_tokens_map.has(ke))return[ke];if(this.remove_space===!0&&(ke=ke.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ke=v(ke)),this.normalizer!==null&&(ke=this.normalizer(ke)),ke.length===0)return[];const Qe=this.pre_tokenizer!==null?this.pre_tokenizer(ke,{section_index:De}):[ke];return this.model(Qe)})}_encode_plus(ie,{text_pair:he=null,add_special_tokens:xe=!0,return_token_type_ids:ke=null}={}){const{tokens:De,token_type_ids:Qe}=this._tokenize_helper(ie,{pair:he,add_special_tokens:xe}),at=this.model.convert_tokens_to_ids(De),it={input_ids:at,attention_mask:new Array(at.length).fill(1)};return(ke??this.return_token_type_ids)&&Qe&&(it.token_type_ids=Qe),it}_tokenize_helper(ie,{pair:he=null,add_special_tokens:xe=!1}={}){const ke=this._encode_text(ie),De=this._encode_text(he);return this.post_processor?this.post_processor(ke,De,{add_special_tokens:xe}):{tokens:(0,i.mergeArrays)(ke??[],De??[])}}tokenize(ie,{pair:he=null,add_special_tokens:xe=!1}={}){return this._tokenize_helper(ie,{pair:he,add_special_tokens:xe}).tokens}encode(ie,{text_pair:he=null,add_special_tokens:xe=!0,return_token_type_ids:ke=null}={}){return this._encode_plus(ie,{text_pair:he,add_special_tokens:xe,return_token_type_ids:ke}).input_ids}batch_decode(ie,he={}){return ie instanceof o.Tensor&&(ie=ie.tolist()),ie.map(xe=>this.decode(xe,he))}decode(ie,he={}){if(ie instanceof o.Tensor&&(ie=g(ie)),!Array.isArray(ie)||ie.length===0||!(0,i.isIntegralNumber)(ie[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(ie,he)}decode_single(ie,{skip_special_tokens:he=!1,clean_up_tokenization_spaces:xe=null}){let ke=this.model.convert_ids_to_tokens(ie);he&&(ke=ke.filter(Qe=>!this.special_tokens.includes(Qe)));let De=this.decoder?this.decoder(ke):ke.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(De=De.replaceAll(this.decoder.end_of_word_suffix," "),he&&(De=De.trim())),(xe??this.clean_up_tokenization_spaces)&&(De=x(De)),De}get_chat_template({chat_template:ie=null,tools:he=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const xe=this.chat_template;if(ie!==null&&Object.hasOwn(xe,ie))ie=xe[ie];else if(ie===null)if(he!==null&&"tool_use"in xe)ie=xe.tool_use;else if("default"in xe)ie=xe.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(xe).sort()}.`)}else if(ie===null)if(this.chat_template)ie=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return ie}apply_chat_template(ie,{tools:he=null,documents:xe=null,chat_template:ke=null,add_generation_prompt:De=!1,tokenize:Qe=!0,padding:at=!1,truncation:it=!1,max_length:ft=null,return_tensor:Rt=!0,return_dict:br=!1,tokenizer_kwargs:mr={},...hn}={}){if(ke=this.get_chat_template({chat_template:ke,tools:he}),typeof ke!="string")throw Error(`chat_template must be a string, but got ${typeof ke}`);let Or=this._compiled_template_cache.get(ke);Or===void 0&&(Or=new c.Template(ke),this._compiled_template_cache.set(ke,Or));const Gn=Object.create(null);for(const bn of li){const Hn=this.getToken(bn);Hn&&(Gn[bn]=Hn)}const ei=Or.render({messages:ie,add_generation_prompt:De,tools:he,documents:xe,...Gn,...hn});if(Qe){const bn=this._call(ei,{add_special_tokens:!1,padding:at,truncation:it,max_length:ft,return_tensor:Rt,...mr});return br?bn:bn.input_ids}return ei}}class Lo extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class Ro extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class tr extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class zr extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class F extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class ce extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class Q extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class le extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class pe extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class Oe extends Et{}class Ue extends Et{}class ht extends Et{constructor(ie,he){super(ie,he);de(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class Dt extends Et{constructor(){super(...arguments);de(this,"return_token_type_ids",!0)}}class At extends Et{}class Wt extends Et{}class pt extends Et{}class xr extends Et{constructor(U,ie){super(U,ie),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(U,ie,he){return Mi(this,U,ie,he)}}class Pr extends xr{}class zi extends Et{}class cs extends Et{}const fn="";class ui extends Et{constructor(ie,he){super(ie,he);de(this,"padding_side","left");this.legacy=he.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new xn({replacement:fn,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(ie){if(ie===null)return null;if(this.legacy||ie.length===0)return super._encode_text(ie);let he=super._encode_text(fn+ie.replaceAll(fn," "));return he.length>1&&he[0]===fn&&this.special_tokens.includes(he[1])&&(he=he.slice(1)),he}}class di extends Et{}class Vi extends Et{}class _a extends Et{}class fi extends Et{}class Fo extends Et{}class Bo extends Et{}class Ui extends Et{}class Wi extends Et{}class As extends Et{}function Mi(Te,U,ie,he){if(!("language_codes"in Te)||!Array.isArray(Te.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Te)||!(Te.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Te)||typeof Te.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const xe=he.src_lang,ke=he.tgt_lang;if(!Te.language_codes.includes(ke))throw new Error(`Target language code "${ke}" is not valid. Must be one of: {${Te.language_codes.join(", ")}}`);if(xe!==void 0){if(!Te.language_codes.includes(xe))throw new Error(`Source language code "${xe}" is not valid. Must be one of: {${Te.language_codes.join(", ")}}`);for(const De of Te.post_processor.config.single)if("SpecialToken"in De&&Te.languageRegex.test(De.SpecialToken.id)){De.SpecialToken.id=Te.lang_to_token(xe);break}}return he.forced_bos_token_id=Te.model.convert_tokens_to_ids([Te.lang_to_token(ke)])[0],Te._call(U,ie)}class Ka extends Et{constructor(U,ie){super(U,ie),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(U,ie,he){return Mi(this,U,ie,he)}}class Ln extends Et{constructor(U,ie){super(U,ie),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)).map(he=>he.slice(2,-2)),this.lang_to_token=he=>`__${he}__`}_build_translation_inputs(U,ie,he){return Mi(this,U,ie,he)}}class Wn extends Et{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(U,{return_timestamps:ie=!1,return_language:he=!1,time_precision:xe=null,force_full_sequences:ke=!0}={}){if(xe===null)throw Error("Must specify time_precision");let De=null;const Qe=ie==="word";function at(){return{language:De,timestamp:[null,null],text:""}}const it=[];let ft=at(),Rt=0;const br=this.timestamp_begin,hn=br+1500;let Or=[],Gn=[],ei=!1,bn=null;const Hn=new Set(this.all_special_ids);for(const Xr of U){const Kn=Xr.tokens,Hi=Qe?Xr.token_timestamps:null;let Ni=null,Ya=br;if("stride"in Xr){const[jn,wn,Rn]=Xr.stride;if(Rt-=wn,bn=jn-Rn,wn&&(Ya=wn/xe+br),Rn)for(let pn=Kn.length-1;pn>=0;--pn){const Ki=Number(Kn[pn]);if(Ki>=br){if(Ni!==null&&(Ki-br)*xe<bn)break;Ni=Ki}}}let hi=[],xa=[];for(let jn=0;jn<Kn.length;++jn){const wn=Number(Kn[jn]);if(Hn.has(wn)){const Rn=this.decode([wn]),pn=f.WHISPER_LANGUAGE_MAPPING.get(Rn.slice(2,-2));if(pn!==void 0){if(De!==null&&pn!==De&&!ie){Or.push(hi);const Ki=this.findLongestCommonSequence(Or)[0],gl=this.decode(Ki);ft.text=gl,it.push(ft),Or=[],hi=[],ft=at()}De=ft.language=pn}}else if(wn>=br&&wn<=hn){const Rn=(wn-br)*xe+Rt,pn=(0,a.round)(Rn,2);if(Ni!==null&&wn>=Ni)ei=!0;else if(ei||Or.length>0&&wn<Ya)ei=!1;else if(ft.timestamp[0]===null)ft.timestamp[0]=pn;else if(pn!==ft.timestamp[0]){ft.timestamp[1]=pn,Or.push(hi),Qe&&Gn.push(xa);const[Ki,gl]=this.findLongestCommonSequence(Or,Gn),Pf=this.decode(Ki);ft.text=Pf,Qe&&(ft.words=this.collateWordTimestamps(Ki,gl,De)),it.push(ft),Or=[],hi=[],Gn=[],xa=[],ft=at()}}else if(hi.push(wn),Qe){let Rn=(0,a.round)(Hi[jn]+Rt,2),pn;if(jn+1<Hi.length){pn=(0,a.round)(Hi[jn+1]+Rt,2);const Ki=this.decode([wn]);T.test(Ki)&&(pn=(0,a.round)(Math.min(Rn+xe,pn),2))}else pn=null;xa.push([Rn,pn])}}if("stride"in Xr){const[jn,wn,Rn]=Xr.stride;Rt+=jn-Rn}hi.length>0?(Or.push(hi),Qe&&Gn.push(xa)):Or.every(jn=>jn.length===0)&&(ft=at(),Or=[],hi=[],Gn=[],xa=[])}if(Or.length>0){if(ke&&ie)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Xr,Kn]=this.findLongestCommonSequence(Or,Gn),Hi=this.decode(Xr);ft.text=Hi,Qe&&(ft.words=this.collateWordTimestamps(Xr,Kn,De)),it.push(ft)}let Si=Object.create(null);const ds=it.map(Xr=>Xr.text).join("");if(ie||he){for(let Xr=0;Xr<it.length;++Xr){const Kn=it[Xr];ie||delete Kn.timestamp,he||delete Kn.language}if(Qe){const Xr=[];for(const Kn of it)for(const Hi of Kn.words)Xr.push(Hi);Si={chunks:Xr}}else Si={chunks:it}}return[ds,Si]}findLongestCommonSequence(U,ie=null){let he=U[0],xe=he.length,ke=[];const De=Array.isArray(ie)&&ie.length>0;let Qe=De?[]:null,at=De?ie[0]:null;for(let it=1;it<U.length;++it){const ft=U[it];let Rt=0,br=[xe,xe,0,0];const mr=ft.length;for(let Si=1;Si<xe+mr;++Si){const ds=Math.max(0,xe-Si),Xr=Math.min(xe,xe+mr-Si),Kn=he.slice(ds,Xr),Hi=Math.max(0,Si-xe),Ni=Math.min(mr,Si),Ya=ft.slice(Hi,Ni);if(Kn.length!==Ya.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let hi;De?hi=Kn.filter((wn,Rn)=>wn===Ya[Rn]&&at[ds+Rn]<=ie[it][Hi+Rn]).length:hi=Kn.filter((wn,Rn)=>wn===Ya[Rn]).length;const xa=Si/1e4,jn=hi/Si+xa;hi>1&&jn>Rt&&(Rt=jn,br=[ds,Xr,Hi,Ni])}const[hn,Or,Gn,ei]=br,bn=Math.floor((Or+hn)/2),Hn=Math.floor((ei+Gn)/2);ke.push(...he.slice(0,bn)),he=ft.slice(Hn),xe=he.length,De&&(Qe.push(...at.slice(0,bn)),at=ie[it].slice(Hn))}return ke.push(...he),De?(Qe.push(...at),[ke,Qe]):[ke,[]]}collateWordTimestamps(U,ie,he){const[xe,ke,De]=this.combineTokensIntoWords(U,he),Qe=[];for(let at=0;at<xe.length;++at){const it=De[at];Qe.push({text:xe[at],timestamp:[ie[it.at(0)][0],ie[it.at(-1)][1]]})}return Qe}combineTokensIntoWords(U,ie,he=`"'([{-`,xe=`"'.,!?:)]}`){ie=ie??"english";let ke,De,Qe;return["chinese","japanese","thai","lao","myanmar"].includes(ie)?[ke,De,Qe]=this.splitTokensOnUnicode(U):[ke,De,Qe]=this.splitTokensOnSpaces(U),this.mergePunctuations(ke,De,Qe,he,xe)}decode(U,ie){let he;return ie!=null&&ie.decode_with_timestamps?(U instanceof o.Tensor&&(U=g(U)),he=this.decodeWithTimestamps(U,ie)):he=super.decode(U,ie),he}decodeWithTimestamps(U,ie){const he=(ie==null?void 0:ie.time_precision)??.02,xe=Array.from(this.all_special_ids).at(-1)+1;let ke=[[]];for(let De of U)if(De=Number(De),De>=xe){const Qe=((De-xe)*he).toFixed(2);ke.push(`<|${Qe}|>`),ke.push([])}else ke[ke.length-1].push(De);return ke=ke.map(De=>typeof De=="string"?De:super.decode(De,ie)),ke.join("")}splitTokensOnUnicode(U){const ie=this.decode(U,{decode_with_timestamps:!0}),he="",xe=[],ke=[],De=[];let Qe=[],at=[],it=0;for(let ft=0;ft<U.length;++ft){const Rt=U[ft];Qe.push(Rt),at.push(ft);const br=this.decode(Qe,{decode_with_timestamps:!0});(!br.includes(he)||ie[it+br.indexOf(he)]===he)&&(xe.push(br),ke.push(Qe),De.push(at),Qe=[],at=[],it+=br.length)}return[xe,ke,De]}splitTokensOnSpaces(U){const[ie,he,xe]=this.splitTokensOnUnicode(U),ke=[],De=[],Qe=[],at=new RegExp(`^[${k}]$`,"gu");for(let it=0;it<ie.length;++it){const ft=ie[it],Rt=he[it],br=xe[it],mr=Rt[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),hn=ft.startsWith(" "),Or=ft.trim(),Gn=at.test(Or);if(mr||hn||Gn||ke.length===0)ke.push(ft),De.push(Rt),Qe.push(br);else{const ei=ke.length-1;ke[ei]+=ft,De[ei].push(...Rt),Qe[ei].push(...br)}}return[ke,De,Qe]}mergePunctuations(U,ie,he,xe,ke){const De=structuredClone(U),Qe=structuredClone(ie),at=structuredClone(he);let it=De.length-2,ft=De.length-1;for(;it>=0;)De[it].startsWith(" ")&&xe.includes(De[it].trim())?(De[ft]=De[it]+De[ft],Qe[ft]=(0,i.mergeArrays)(Qe[it],Qe[ft]),at[ft]=(0,i.mergeArrays)(at[it],at[ft]),De[it]="",Qe[it]=[],at[it]=[]):ft=it,--it;for(it=0,ft=1;ft<De.length;)!De[it].endsWith(" ")&&ke.includes(De[ft])?(De[it]+=De[ft],Qe[it]=(0,i.mergeArrays)(Qe[it],Qe[ft]),at[it]=(0,i.mergeArrays)(at[it],at[ft]),De[ft]="",Qe[ft]=[],at[ft]=[]):it=ft,++ft;return[De.filter(Rt=>Rt),Qe.filter(Rt=>Rt.length>0),at.filter(Rt=>Rt.length>0)]}}class us extends Et{}class hl extends Et{}class Gi extends Et{}class Xe extends Et{constructor(U,ie){super(U,ie),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(he=>this.languageRegex.test(he)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(U){if(U===null)return null;const[ie,...he]=U.trim().split(this.languageRegex);if(he.length===0)return super._encode_text(ie);if(he.length===2){const[xe,ke]=he;return this.supported_language_codes.includes(xe)||console.warn(`Unsupported language code "${xe}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,i.mergeArrays)([xe],super._encode_text(ke))}}}class Ye extends Et{}class ut extends Et{}class Vr extends Et{}class pl extends Et{}class qa extends Et{}class ml extends Et{constructor(U,ie){super(U,ie),this.decoder=new $t({})}}class Xa extends Et{}class Ru extends Et{}class Fu extends Et{}class Bu{static async from_pretrained(U,{progress_callback:ie=null,config:he=null,cache_dir:xe=null,local_files_only:ke=!1,revision:De="main",legacy:Qe=null}={}){var br;const[at,it]=await d(U,{progress_callback:ie,config:he,cache_dir:xe,local_files_only:ke,revision:De,legacy:Qe}),ft=((br=it.tokenizer_class)==null?void 0:br.replace(/Fast$/,""))??"PreTrainedTokenizer";let Rt=this.TOKENIZER_CLASS_MAPPING[ft];return Rt||(console.warn(`Unknown tokenizer class "${ft}", attempting to construct from base class.`),Rt=Et),new Rt(at,it)}}de(Bu,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer:At,DistilBertTokenizer:Oe,CamembertTokenizer:Ue,DebertaTokenizer:F,DebertaV2Tokenizer:ce,BertTokenizer:Lo,HerbertTokenizer:Q,ConvBertTokenizer:le,RoFormerTokenizer:pe,XLMTokenizer:ht,ElectraTokenizer:Dt,MobileBertTokenizer:tr,SqueezeBertTokenizer:zr,AlbertTokenizer:Ro,GPT2Tokenizer:Wt,BartTokenizer:pt,MBartTokenizer:xr,MBart50Tokenizer:Pr,RobertaTokenizer:zi,WhisperTokenizer:Wn,CodeGenTokenizer:us,CLIPTokenizer:hl,SiglipTokenizer:Gi,MarianTokenizer:Xe,BloomTokenizer:cs,NllbTokenizer:Ka,M2M100Tokenizer:Ln,LlamaTokenizer:ui,CodeLlamaTokenizer:di,XLMRobertaTokenizer:Vi,MPNetTokenizer:_a,FalconTokenizer:fi,GPTNeoXTokenizer:Fo,EsmTokenizer:Bo,Wav2Vec2CTCTokenizer:Ye,BlenderbotTokenizer:ut,BlenderbotSmallTokenizer:Vr,SpeechT5Tokenizer:pl,NougatTokenizer:qa,VitsTokenizer:ml,Qwen2Tokenizer:Ui,GemmaTokenizer:Wi,Grok1Tokenizer:As,CohereTokenizer:Xa,MgpstrTokenizer:Ru,Ernie4_5_Tokenizer:Fu,PreTrainedTokenizer:Et})},"./src/utils/audio.js":(e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>I,hamming:()=>h,hanning:()=>d,mel_filter_bank:()=>_,read_audio:()=>c,spectrogram:()=>M,window_function:()=>j});var n=r("./src/utils/hub.js"),i=r("./src/utils/maths.js"),s=r("./src/utils/core.js"),a=r("./src/env.js"),o=r("./src/utils/tensor.js"),l=r("?7992");async function c(N,z){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const V=await(await(0,n.getFile)(N)).arrayBuffer(),G=new AudioContext({sampleRate:z});typeof z>"u"&&console.warn(`No sampling rate provided, using default of ${G.sampleRate}Hz.`);const H=await G.decodeAudioData(V);let O;if(H.numberOfChannels===2){const q=Math.sqrt(2),ee=H.getChannelData(0),B=H.getChannelData(1);O=new Float32Array(ee.length);for(let D=0;D<H.length;++D)O[D]=q*(ee[D]+B[D])/2}else O=H.getChannelData(0);return O}function f(N,z){if(N<1)return new Float64Array;if(N===1)return new Float64Array([1]);const V=1-z,G=2*Math.PI/(N-1),H=new Float64Array(N);for(let O=0;O<N;++O)H[O]=z-V*Math.cos(O*G);return H}function d(N){return f(N,.5)}function h(N){return f(N,.54)}const p={htk:N=>2595*Math.log10(1+N/700),kaldi:N=>1127*Math.log(1+N/700),slaney:(N,z=1e3,V=15,G=27/Math.log(6.4))=>N>=z?V+Math.log(N/z)*G:3*N/200};function m(N,z="htk"){const V=p[z];if(!V)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof N=="number"?V(N):N.map(G=>V(G))}const g={htk:N=>700*(10**(N/2595)-1),kaldi:N=>700*(Math.exp(N/1127)-1),slaney:(N,z=1e3,V=15,G=Math.log(6.4)/27)=>N>=V?z*Math.exp(G*(N-V)):200*N/3};function x(N,z="htk"){const V=g[z];if(!V)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof N=="number"?V(N):N.map(G=>V(G))}function y(N,z){const V=Float64Array.from({length:z.length-1},(q,ee)=>z[ee+1]-z[ee]),G=Array.from({length:N.length},()=>new Array(z.length));for(let q=0;q<N.length;++q){const ee=G[q];for(let B=0;B<z.length;++B)ee[B]=z[B]-N[q]}const H=z.length-2,O=Array.from({length:H},()=>new Array(N.length));for(let q=0;q<N.length;++q){const ee=G[q];for(let B=0;B<H;++B){const D=-ee[B]/V[B],K=ee[B+2]/V[B+1];O[B][q]=Math.max(0,Math.min(D,K))}}return O}function v(N,z,V){const G=(z-N)/(V-1);return Float64Array.from({length:V},(H,O)=>N+G*O)}function _(N,z,V,G,H,O=null,q="htk",ee=!1){if(O!==null&&O!=="slaney")throw new Error('norm must be one of null or "slaney"');if(N<2)throw new Error(`Require num_frequency_bins: ${N} >= 2`);if(V>G)throw new Error(`Require min_frequency: ${V} <= max_frequency: ${G}`);const B=m(V,q),D=m(G,q),K=v(B,D,z+2);let oe=x(K,q),_e;if(ee){const ye=H/((N-1)*2);_e=m(Float64Array.from({length:N},($e,Se)=>Se*ye),q),oe=K}else _e=v(0,Math.floor(H/2),N);const ue=y(_e,oe);if(O!==null&&O==="slaney")for(let ye=0;ye<z;++ye){const $e=ue[ye],Se=2/(oe[ye+2]-oe[ye]);for(let ge=0;ge<N;++ge)$e[ge]*=Se}return ue}function b(N,z,V){const G=new N.constructor(N.length+z+V),H=N.length-1;for(let O=0;O<N.length;++O)G[z+O]=N[O];for(let O=1;O<=z;++O)G[z-O]=N[(0,s.calculateReflectOffset)(O,H)];for(let O=1;O<=V;++O)G[H+z+O]=N[(0,s.calculateReflectOffset)(H-O,H)];return G}function w(N,z,V,G,H){if(V<=0)throw new Error("reference must be greater than zero");if(G<=0)throw new Error("min_value must be greater than zero");V=Math.max(G,V);const O=Math.log10(V);for(let q=0;q<N.length;++q)N[q]=z*Math.log10(Math.max(G,N[q])-O);if(H!==null){if(H<=0)throw new Error("db_range must be greater than zero");const q=(0,i.max)(N)[0]-H;for(let ee=0;ee<N.length;++ee)N[ee]=Math.max(N[ee],q)}return N}function k(N,z=1,V=1e-5,G=null){return w(N,20,z,V,G)}function T(N,z=1,V=1e-10,G=null){return w(N,10,z,V,G)}async function M(N,z,V,G,{fft_length:H=null,power:O=1,center:q=!0,pad_mode:ee="reflect",onesided:B=!0,preemphasis:D=null,preemphasis_htk_flavor:K=!0,mel_filters:oe=null,mel_floor:_e=1e-10,log_mel:ue=null,reference:ye=1,min_value:$e=1e-10,db_range:Se=null,remove_dc_offset:ge=null,min_num_frames:te=null,max_num_frames:re=null,do_pad:J=!0,transpose:we=!1}={}){const Ne=z.length;if(H===null&&(H=V),V>H)throw Error(`frame_length (${V}) may not be larger than fft_length (${H})`);if(Ne!==V)throw new Error(`Length of the window (${Ne}) must equal frame_length (${V})`);if(G<=0)throw new Error("hop_length must be greater than zero");if(O===null&&oe!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!K)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(q){if(ee!=="reflect")throw new Error(`pad_mode="${ee}" not implemented yet.`);const He=Math.floor((H-1)/2)+1;N=b(N,He,He)}let je=Math.floor(1+Math.floor((N.length-V)/G));te!==null&&je<te&&(je=te);const Pe=B?Math.floor(H/2)+1:H;let Z=je,ne=je;re!==null&&(re>je?J&&(ne=re):ne=Z=re);const fe=new i.FFT(H),Me=new Float64Array(H),Ce=new Float64Array(fe.outputBufferSize),me=new Float32Array(Pe*ne);for(let He=0;He<Z;++He){const We=He*G,nt=Math.min(N.length-We,V);nt!==V&&Me.fill(0,0,V);for(let ct=0;ct<nt;++ct)Me[ct]=N[We+ct];if(ge){let ct=0;for(let Ut=0;Ut<nt;++Ut)ct+=Me[Ut];const Ht=ct/nt;for(let Ut=0;Ut<nt;++Ut)Me[Ut]-=Ht}if(D!==null){for(let ct=nt-1;ct>=1;--ct)Me[ct]-=D*Me[ct-1];Me[0]*=1-D}for(let ct=0;ct<z.length;++ct)Me[ct]*=z[ct];fe.realTransform(Ce,Me);for(let ct=0;ct<Pe;++ct){const Ht=ct<<1;me[ct*ne+He]=Ce[Ht]**2+Ce[Ht+1]**2}}if(O!==null&&O!==2){const He=O/2;for(let We=0;We<me.length;++We)me[We]**=He}const Fe=oe.length;let ze=await(0,o.matmul)(new o.Tensor("float32",oe.flat(),[Fe,Pe]),new o.Tensor("float32",me,[Pe,ne]));we&&(ze=ze.transpose(1,0));const Je=ze.data;for(let He=0;He<Je.length;++He)Je[He]=Math.max(_e,Je[He]);if(O!==null&&ue!==null){const He=Math.min(Je.length,Z*Fe);switch(ue){case"log":for(let We=0;We<He;++We)Je[We]=Math.log(Je[We]);break;case"log10":for(let We=0;We<He;++We)Je[We]=Math.log10(Je[We]);break;case"dB":if(O===1)k(Je,ye,$e,Se);else if(O===2)T(Je,ye,$e,Se);else throw new Error(`Cannot use log_mel option '${ue}' with power ${O}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${ue}'`)}}return ze}function j(N,z,{periodic:V=!0,frame_length:G=null,center:H=!0}={}){const O=V?N+1:N;let q;switch(z){case"boxcar":q=new Float64Array(O).fill(1);break;case"hann":case"hann_window":q=d(O);break;case"hamming":q=h(O);break;case"povey":q=d(O).map(ee=>Math.pow(ee,.85));break;default:throw new Error(`Unknown window type ${z}.`)}if(V&&(q=q.subarray(0,N)),G===null)return q;if(N>G)throw new Error(`Length of the window (${N}) may not be larger than frame_length (${G})`);return q}function C(N,z){let V=44;const G=new ArrayBuffer(V+N.length*4),H=new DataView(G);R(H,0,"RIFF"),H.setUint32(4,36+N.length*4,!0),R(H,8,"WAVE"),R(H,12,"fmt "),H.setUint32(16,16,!0),H.setUint16(20,3,!0),H.setUint16(22,1,!0),H.setUint32(24,z,!0),H.setUint32(28,z*4,!0),H.setUint16(32,4,!0),H.setUint16(34,32,!0),R(H,36,"data"),H.setUint32(40,N.length*4,!0);for(let O=0;O<N.length;++O,V+=4)H.setFloat32(V,N[O],!0);return G}function R(N,z,V){for(let G=0;G<V.length;++G)N.setUint8(z+G,V.charCodeAt(G))}class I{constructor(z,V){this.audio=z,this.sampling_rate=V}toWav(){return C(this.audio,this.sampling_rate)}toBlob(){const z=this.toWav();return new Blob([z],{type:"audio/wav"})}async save(z){let V;if(a.apis.IS_BROWSER_ENV){if(a.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");V=s.saveBlob}else if(a.apis.IS_FS_AVAILABLE)V=async(G,H)=>{let O=await H.arrayBuffer();l.writeFileSync(G,Buffer.from(O))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await V(z,this.toBlob())}}},"./src/utils/constants.js":(e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>i,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>c,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>a,PROCESSOR_NAME:()=>o});const n="https://github.com/huggingface/transformers.js/issues/new/choose",i="config.json",s="preprocessor_config.json",a=s,o="processor_config.json",l="chat_template.jinja",c="generation_config.json"},"./src/utils/core.js":(e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>c,calculateReflectOffset:()=>p,count:()=>y,dispatchCallback:()=>n,escapeRegExp:()=>s,isIntegralNumber:()=>o,isNullishDimension:()=>l,isTypedArray:()=>a,len:()=>x,mergeArrays:()=>d,pick:()=>g,pop:()=>f,product:()=>h,reverseDictionary:()=>i,saveBlob:()=>m});function n(v,_){v&&v(_)}function i(v){return Object.fromEntries(Object.entries(v).map(([_,b])=>[b,_]))}function s(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(v){var _,b,w;return((w=(b=(_=v==null?void 0:v.prototype)==null?void 0:_.__proto__)==null?void 0:b.constructor)==null?void 0:w.name)==="TypedArray"}function o(v){return Number.isInteger(v)||typeof v=="bigint"}function l(v){return v==null||v===-1}function c(v){const _=[];let b=v;for(;Array.isArray(b);)_.push(b.length),b=b[0];return _}function f(v,_,b=void 0){const w=v[_];if(w!==void 0)return delete v[_],w;if(b===void 0)throw Error(`Key ${_} does not exist in object.`);return b}function d(...v){return Array.prototype.concat.apply([],v)}function h(...v){return v.reduce((_,b)=>_.flatMap(w=>b.map(k=>[w,k])))}function p(v,_){return Math.abs((v+_)%(2*_)-_)}function m(v,_){const b=URL.createObjectURL(_),w=document.createElement("a");w.href=b,w.download=v,w.click(),w.remove(),URL.revokeObjectURL(b)}function g(v,_){return Object.assign({},..._.map(b=>{if(v[b]!==void 0)return{[b]:v[b]}}))}function x(v){let _=0;for(const b of v)++_;return _}function y(v,_){let b=0;for(const w of v)w===_&&++b;return b}},"./src/utils/data-structures.js":(e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>i,DictionarySplitter:()=>l,LRUCache:()=>c,PriorityQueue:()=>n,TokenLattice:()=>a});class n{constructor(d=(p,m)=>p>m,h=1/0){this._heap=[],this._comparator=d,this._maxSize=h}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...d){return this.extend(d)}extend(d){for(const h of d)if(this.size<this._maxSize)this._heap.push(h),this._siftUp();else{const p=this._smallest();this._comparator(h,this._heap[p])&&(this._heap[p]=h,this._siftUpFrom(p))}return this.size}pop(){const d=this.peek(),h=this.size-1;return h>0&&this._swap(0,h),this._heap.pop(),this._siftDown(),d}replace(d){const h=this.peek();return this._heap[0]=d,this._siftDown(),h}_parent(d){return(d+1>>>1)-1}_left(d){return(d<<1)+1}_right(d){return d+1<<1}_greater(d,h){return this._comparator(this._heap[d],this._heap[h])}_swap(d,h){const p=this._heap[d];this._heap[d]=this._heap[h],this._heap[h]=p}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(d){for(;d>0&&this._greater(d,this._parent(d));)this._swap(d,this._parent(d)),d=this._parent(d)}_siftDown(){let d=0;for(;this._left(d)<this.size&&this._greater(this._left(d),d)||this._right(d)<this.size&&this._greater(this._right(d),d);){const h=this._right(d)<this.size&&this._greater(this._right(d),this._left(d))?this._right(d):this._left(d);this._swap(d,h),d=h}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class i{constructor(){this.root=s.default()}extend(d){for(const h of d)this.push(h)}push(d){let h=this.root;for(const p of d){let m=h.children.get(p);m===void 0&&(m=s.default(),h.children.set(p,m)),h=m}h.isLeaf=!0}*commonPrefixSearch(d){let h=this.root;if(h===void 0)return;let p="";for(const m of d){if(p+=m,h=h.children.get(m),h===void 0)return;h.isLeaf&&(yield p)}}}class s{constructor(d,h){this.isLeaf=d,this.children=h}static default(){return new s(!1,new Map)}}class a{constructor(d,h,p){this.chars=Array.from(d),this.len=this.chars.length,this.bosTokenId=h,this.eosTokenId=p,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const m=new o(this.bosTokenId,0,0,0,0),g=new o(this.eosTokenId,1,this.len,0,0);this.nodes.push(m.clone()),this.nodes.push(g.clone()),this.beginNodes[this.len].push(g),this.endNodes[0].push(m)}insert(d,h,p,m){const g=this.nodes.length,x=new o(m,g,d,h,p);this.beginNodes[d].push(x),this.endNodes[d+h].push(x),this.nodes.push(x)}viterbi(){const d=this.len;let h=0;for(;h<=d;){if(this.beginNodes[h].length==0)return[];for(let y of this.beginNodes[h]){y.prev=null;let v=0,_=null;for(let b of this.endNodes[h]){const w=b.backtraceScore+y.score;(_===null||w>v)&&(_=b.clone(),v=w)}if(_!==null)y.prev=_,y.backtraceScore=v;else return[]}++h}const p=[],g=this.beginNodes[d][0].prev;if(g===null)return[];let x=g.clone();for(;x.prev!==null;)p.push(x.clone()),x=x.clone().prev.clone();return p.reverse(),p}piece(d){return this.chars.slice(d.pos,d.pos+d.length).join("")}tokens(){return this.viterbi().map(h=>this.piece(h))}tokenIds(){return this.viterbi().map(h=>h.tokenId)}}class o{constructor(d,h,p,m,g){this.tokenId=d,this.nodeId=h,this.pos=p,this.length=m,this.score=g,this.prev=null,this.backtraceScore=0}clone(){const d=new o(this.tokenId,this.nodeId,this.pos,this.length,this.score);return d.prev=this.prev,d.backtraceScore=this.backtraceScore,d}}class l{constructor(d){this.trie=this._buildTrie(d)}_buildTrie(d){var p;const h=Object.create(null);for(const m of d){let g=h;for(let x=0;x<m.length;++x)g=g[p=m[x]]??(g[p]=Object.create(null));g.end=m}return h}split(d){const h=[],p=d.length;let m=0,g=0;for(;g<p;){let x=this.trie,y=null,v=g;for(;v<p&&(x=x[d[v]]);)x.end&&(y=x.end),++v;y?(g>m&&h.push(d.slice(m,g)),h.push(y),g+=y.length,m=g):++g}return m<p&&h.push(d.slice(m)),h}}class c{constructor(d){this.capacity=d,this.cache=new Map}get(d){if(!this.cache.has(d))return;const h=this.cache.get(d);return this.cache.delete(d),this.cache.set(d,h),h}put(d,h){this.cache.has(d)&&this.cache.delete(d),this.cache.set(d,h),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}},"./src/utils/devices.js":(e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})},"./src/utils/dtypes.js":(e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>a,DEFAULT_DEVICE_DTYPE_MAPPING:()=>o,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>s});var n=r("./src/env.js"),i=r("./src/utils/devices.js");const s=function(){let c;return async function(){if(c===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)c=!1;else try{c=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{c=!1}return c}}(),a=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),o=Object.freeze({[i.DEVICE_TYPES.wasm]:a.q8}),l=Object.freeze({[a.fp32]:"",[a.fp16]:"_fp16",[a.int8]:"_int8",[a.uint8]:"_uint8",[a.q8]:"_quantized",[a.q4]:"_q4",[a.q4f16]:"_q4f16",[a.bnb4]:"_bnb4"})},"./src/utils/generic.js":(e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let i=function(...s){return i._call(...s)};return Object.setPrototypeOf(i,new.target.prototype)}_call(...i){throw Error("Must implement _call method in subclass")}}},"./src/utils/hub.js":(e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>o,getFile:()=>p,getModelFile:()=>v,getModelJSON:()=>b,getModelText:()=>_});var n=r("?7992"),i=r("?5af5"),s=r("./src/env.js"),a=r("./src/utils/core.js");const o=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class c{constructor(M){if(this.filePath=M,this.headers=new Headers,this.exists=n.existsSync(M),this.exists){this.status=200,this.statusText="OK";let j=n.statSync(M);this.headers.set("content-length",j.size.toString()),this.updateContentType();const C=n.createReadStream(M);this.body=new ReadableStream({start(R){C.on("data",I=>R.enqueue(I)),C.on("end",()=>R.close()),C.on("error",I=>R.error(I))},cancel(){C.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const M=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[M]??"application/octet-stream")}clone(){let M=new c(this.filePath);return M.exists=this.exists,M.status=this.status,M.statusText=this.statusText,M.headers=new Headers(this.headers),M}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const M=await n.promises.readFile(this.filePath);return new Blob([M],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function f(T,M=null,j=null){let C;try{C=new URL(T)}catch{return!1}return!(M&&!M.includes(C.protocol)||j&&!j.includes(C.hostname))}const d=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function h(T){return!(!d.test(T)||T.includes("..")||T.includes("--")||T.endsWith(".git")||T.endsWith(".ipynb"))}async function p(T){var M;if(s.env.useFS&&!f(T,["http:","https:","blob:"]))return new c(T instanceof URL?T.protocol==="file:"?T.pathname:T.toString():T);if(typeof process<"u"&&((M=process==null?void 0:process.release)==null?void 0:M.name)==="node"){const j=!!(wl!=null&&wl.TESTING_REMOTELY),C=s.env.version,R=new Headers;if(R.set("User-Agent",`transformers.js/${C}; is_ci/${j};`),f(T,["http:","https:"],["huggingface.co","hf.co"])){const N=(wl==null?void 0:wl.HF_TOKEN)??(wl==null?void 0:wl.HF_ACCESS_TOKEN);N&&R.set("Authorization",`Bearer ${N}`)}return fetch(T,{headers:R})}else return fetch(T)}const m={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function g(T,M,j){if(!j)return null;const C=m[T]??`Error (${T}) occurred while trying to load file`;throw Error(`${C}: "${M}".`)}class x{constructor(M){this.path=M}async match(M){let j=i.join(this.path,M),C=new c(j);if(C.exists)return C}async put(M,j,C=void 0){let R=i.join(this.path,M);try{const I=j.headers.get("Content-Length"),N=parseInt(I??"0");let z=0;await n.promises.mkdir(i.dirname(R),{recursive:!0});const V=n.createWriteStream(R),G=j.body.getReader();for(;;){const{done:H,value:O}=await G.read();if(H)break;await new Promise((ee,B)=>{V.write(O,D=>{if(D){B(D);return}ee()})}),z+=O.length;const q=N?z/N*100:0;C==null||C({progress:q,loaded:z,total:N})}V.close()}catch(I){try{await n.promises.unlink(R)}catch{}throw I}}}async function y(T,...M){for(let j of M)try{let C=await T.match(j);if(C)return C}catch{continue}}async function v(T,M,j=!0,C={},R=!1){if(!s.env.allowLocalModels){if(C.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,a.dispatchCallback)(C.progress_callback,{status:"initiate",name:T,file:M});let I;if(!I&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");I=s.env.customCache}if(!I&&s.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{I=await caches.open("transformers-cache")}catch(_e){console.warn("An error occurred while opening the browser cache:",_e)}}if(!I&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");I=new x(C.cache_dir??s.env.cacheDir)}const N=C.revision??"main",z=k(T,M),V=h(T),G=V?k(s.env.localModelPath,z):z,H=k(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",T).replaceAll("{revision}",encodeURIComponent(N)),M);let O;const q=I instanceof x?N==="main"?z:k(T,N,M):H;let ee=!1,B;I&&(B=await y(I,G,q));const D=B!==void 0;if(B===void 0){if(s.env.allowLocalModels)if(f(z,["http:","https:"])){if(C.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${z}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${z}.`)}else try{B=await p(G),O=G}catch(ue){console.warn(`Unable to load from local path "${G}": "${ue}"`)}if(B===void 0||B.status===404){if(C.local_files_only||!s.env.allowRemoteModels){if(j)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${G}".`);return null}if(!V)throw Error(`Local file missing at "${G}" and download aborted due to invalid model ID "${T}".`);if(B=await p(H),B.status!==200)return g(B.status,H,j);O=q}ee=I&&typeof Response<"u"&&B instanceof Response&&B.status===200}(0,a.dispatchCallback)(C.progress_callback,{status:"download",name:T,file:M});let K;if(!(s.apis.IS_NODE_ENV&&R)){let _e;C.progress_callback?D&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(_e=new Uint8Array(await B.arrayBuffer()),(0,a.dispatchCallback)(C.progress_callback,{status:"progress",name:T,file:M,progress:100,loaded:_e.length,total:_e.length})):_e=await w(B,ue=>{(0,a.dispatchCallback)(C.progress_callback,{status:"progress",name:T,file:M,...ue})}):_e=new Uint8Array(await B.arrayBuffer()),K=_e}if(ee&&O&&await I.match(O)===void 0&&(K?await I.put(O,new Response(K,{headers:B.headers})).catch(_e=>{console.warn(`Unable to add response to browser cache: ${_e}.`)}):await I.put(O,B,C.progress_callback)),(0,a.dispatchCallback)(C.progress_callback,{status:"done",name:T,file:M}),K){if(!s.apis.IS_NODE_ENV&&R)throw new Error("Cannot return path in a browser environment.");return K}if(B instanceof c)return B.filePath;const oe=await(I==null?void 0:I.match(O));if(oe instanceof c)return oe.filePath;if(oe instanceof Response)return new Uint8Array(await oe.arrayBuffer());if(typeof oe=="string")return oe;throw new Error("Unable to get model file path or buffer.")}async function _(T,M,j=!0,C={}){const R=await v(T,M,j,C,!1);return R===null?null:new TextDecoder("utf-8").decode(R)}async function b(T,M,j=!0,C={}){const R=await _(T,M,j,C);return R===null?{}:JSON.parse(R)}async function w(T,M){const j=T.headers.get("Content-Length");j===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let C=parseInt(j??"0"),R=new Uint8Array(C),I=0;const N=T.body.getReader();async function z(){const{done:V,value:G}=await N.read();if(V)return;const H=I+G.length;if(H>C){C=H;const q=new Uint8Array(C);q.set(R),R=q}R.set(G,I),I=H;const O=I/C*100;return M({progress:O,loaded:I,total:C}),z()}return await z(),R}function k(...T){return T=T.map((M,j)=>(j&&(M=M.replace(new RegExp("^/"),"")),j!==T.length-1&&(M=M.replace(new RegExp("/$"),"")),M)),T.join("/")}},"./src/utils/image.js":(e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>m,load_image:()=>g});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js"),s=r("./src/env.js"),a=r("./src/utils/tensor.js"),o=r("?2b25");let l,c,f;const d=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(d)l=(x,y)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(x,y)},f=self.createImageBitmap,c=self.ImageData;else if(o)f=async x=>{const v=(await x.metadata()).channels,{data:_,info:b}=await x.rotate().raw().toBuffer({resolveWithObject:!0}),w=new m(new Uint8ClampedArray(_),b.width,b.height,b.channels);return v!==void 0&&v!==b.channels&&w.convert(v),w};else throw new Error("Unable to load image processing library.");const h={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},p=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class m{constructor(y,v,_,b){this.data=y,this.width=v,this.height=_,this.channels=b}get size(){return[this.width,this.height]}static async read(y){if(y instanceof m)return y;if(typeof y=="string"||y instanceof URL)return await this.fromURL(y);if(y instanceof Blob)return await this.fromBlob(y);if(typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&y instanceof OffscreenCanvas)return this.fromCanvas(y);throw new Error(`Unsupported input type: ${typeof y}`)}static fromCanvas(y){if(!d)throw new Error("fromCanvas() is only supported in browser environments.");const _=y.getContext("2d").getImageData(0,0,y.width,y.height).data;return new m(_,y.width,y.height,4)}static async fromURL(y){const v=await(0,i.getFile)(y);if(v.status!==200)throw new Error(`Unable to read image from "${y}" (${v.status} ${v.statusText})`);const _=await v.blob();return this.fromBlob(_)}static async fromBlob(y){if(d){const v=await f(y),_=l(v.width,v.height).getContext("2d");return _.drawImage(v,0,0),new this(_.getImageData(0,0,v.width,v.height).data,v.width,v.height,4)}else{const v=o(await y.arrayBuffer());return await f(v)}}static fromTensor(y,v="CHW"){if(y.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${y.dims.length} dimensions.`);if(v==="CHW")y=y.transpose(1,2,0);else if(v!=="HWC")throw new Error(`Unsupported channel format: ${v}`);if(!(y.data instanceof Uint8ClampedArray||y.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${y.type}`);switch(y.dims[2]){case 1:case 2:case 3:case 4:return new m(y.data,y.dims[1],y.dims[0],y.dims[2]);default:throw new Error(`Unsupported number of channels: ${y.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const y=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let v=0,_=0;v<this.data.length;v+=this.channels){const b=this.data[v],w=this.data[v+1],k=this.data[v+2];y[_++]=Math.round(.2989*b+.587*w+.114*k)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(y,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const y=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let v=0,_=0;v<this.data.length;++v)y[_++]=this.data[v],y[_++]=this.data[v],y[_++]=this.data[v];break;case 4:for(let v=0,_=0;v<this.data.length;v+=4)y[_++]=this.data[v],y[_++]=this.data[v+1],y[_++]=this.data[v+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(y,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const y=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let v=0,_=0;v<this.data.length;++v)y[_++]=this.data[v],y[_++]=this.data[v],y[_++]=this.data[v],y[_++]=255;break;case 3:for(let v=0,_=0;v<this.data.length;v+=3)y[_++]=this.data[v],y[_++]=this.data[v+1],y[_++]=this.data[v+2],y[_++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(y,this.width,this.height,4)}putAlpha(y){if(y.width!==this.width||y.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${y.width}x${y.height}`);if(y.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${y.channels}`);const v=this.data,_=y.data,b=this.width*this.height;if(this.channels===3){const w=new Uint8ClampedArray(b*4);for(let k=0,T=0,M=0;k<b;++k)w[M++]=v[T++],w[M++]=v[T++],w[M++]=v[T++],w[M++]=_[k];return this._update(w,this.width,this.height,4)}else if(this.channels===4){for(let w=0;w<b;++w)v[4*w+3]=_[w];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(y,v,{resample:_=2}={}){if(this.width===y&&this.height===v)return this;let b=h[_]??_;const w=(0,n.isNullishDimension)(y),k=(0,n.isNullishDimension)(v);if(w&&k)return this;if(w?y=v/this.height*this.width:k&&(v=y/this.width*this.height),d){const T=this.channels,M=this.toCanvas(),j=l(y,v).getContext("2d");return j.drawImage(M,0,0,y,v),new m(j.getImageData(0,0,y,v).data,y,v,4).convert(T)}else{let T=this.toSharp();switch(b){case"box":case"hamming":(b==="box"||b==="hamming")&&(console.warn(`Resampling method ${b} is not yet supported. Using bilinear instead.`),b="bilinear");case"nearest":case"bilinear":case"bicubic":T=T.affine([y/this.width,0,0,v/this.height],{interpolator:b});break;case"lanczos":T=T.resize({width:y,height:v,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${b} is not supported.`)}return await f(T)}}async pad([y,v,_,b]){if(y=Math.max(y,0),v=Math.max(v,0),_=Math.max(_,0),b=Math.max(b,0),y===0&&v===0&&_===0&&b===0)return this;if(d){const w=this.channels,k=this.toCanvas(),T=this.width+y+v,M=this.height+_+b,j=l(T,M).getContext("2d");return j.drawImage(k,0,0,this.width,this.height,y,_,this.width,this.height),new m(j.getImageData(0,0,T,M).data,T,M,4).convert(w)}else{const w=this.toSharp().extend({left:y,right:v,top:_,bottom:b});return await f(w)}}async crop([y,v,_,b]){if(y=Math.max(y,0),v=Math.max(v,0),_=Math.min(_,this.width-1),b=Math.min(b,this.height-1),y===0&&v===0&&_===this.width-1&&b===this.height-1)return this;const w=_-y+1,k=b-v+1;if(d){const T=this.channels,M=this.toCanvas(),j=l(w,k).getContext("2d");return j.drawImage(M,y,v,w,k,0,0,w,k),new m(j.getImageData(0,0,w,k).data,w,k,4).convert(T)}else{const T=this.toSharp().extract({left:y,top:v,width:w,height:k});return await f(T)}}async center_crop(y,v){if(this.width===y&&this.height===v)return this;const _=(this.width-y)/2,b=(this.height-v)/2;if(d){const w=this.channels,k=this.toCanvas(),T=l(y,v).getContext("2d");let M=0,j=0,C=0,R=0;return _>=0?M=_:C=-_,b>=0?j=b:R=-b,T.drawImage(k,M,j,y,v,C,R,y,v),new m(T.getImageData(0,0,y,v).data,y,v,4).convert(w)}else{let w=this.toSharp();if(_>=0&&b>=0)w=w.extract({left:Math.floor(_),top:Math.floor(b),width:y,height:v});else if(_<=0&&b<=0){const k=Math.floor(-b),T=Math.floor(-_);w=w.extend({top:k,left:T,right:y-this.width-T,bottom:v-this.height-k})}else{let k=[0,0],T=0;b<0?(k[0]=Math.floor(-b),k[1]=v-this.height-k[0]):T=Math.floor(b);let M=[0,0],j=0;_<0?(M[0]=Math.floor(-_),M[1]=y-this.width-M[0]):j=Math.floor(_),w=w.extend({top:k[0],bottom:k[1],left:M[0],right:M[1]}).extract({left:j,top:T,width:y,height:v})}return await f(w)}}async toBlob(y="image/png",v=1){if(!d)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:y,quality:v})}toTensor(y="CHW"){let v=new a.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(y!=="HWC")if(y==="CHW")v=v.permute(2,0,1);else throw new Error(`Unsupported channel format: ${y}`);return v}toCanvas(){if(!d)throw new Error("toCanvas() is only supported in browser environments.");const y=this.clone().rgba(),v=l(y.width,y.height),_=new c(y.data,y.width,y.height);return v.getContext("2d").putImageData(_,0,0),v}split(){const{data:y,width:v,height:_,channels:b}=this,w=y.constructor,k=y.length/b,T=Array.from({length:b},()=>new w(k));for(let M=0;M<k;++M){const j=b*M;for(let C=0;C<b;++C)T[C][M]=y[j+C]}return T.map(M=>new m(M,v,_,1))}_update(y,v,_,b=null){return this.data=y,this.width=v,this.height=_,b!==null&&(this.channels=b),this}clone(){return new m(this.data.slice(),this.width,this.height,this.channels)}convert(y){if(this.channels===y)return this;switch(y){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(y){if(d){if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const v=y.split(".").pop().toLowerCase(),_=p.get(v)??"image/png",b=await this.toBlob(_);(0,n.saveBlob)(y,b)}else{if(s.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(y);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(d)throw new Error("toSharp() is only supported in server-side environments.");return o(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const g=m.read.bind(m)},"./src/utils/maths.js":(e,t,r)=>{r.r(t),r.d(t,{FFT:()=>g,bankers_round:()=>v,cos_sim:()=>l,dot:()=>o,dynamic_time_warping:()=>_,interpolate_data:()=>n,log_softmax:()=>a,magnitude:()=>c,max:()=>d,medianFilter:()=>x,min:()=>f,permute_data:()=>i,round:()=>y,softmax:()=>s});function n(b,[w,k,T],[M,j],C="bilinear",R=!1){const I=j/T,N=M/k,z=new b.constructor(M*j*w),V=k*T,G=M*j;for(let H=0;H<M;++H)for(let O=0;O<j;++O){const q=H*j+O,ee=(O+.5)/I-.5,B=(H+.5)/N-.5;let D=Math.floor(ee),K=Math.floor(B);const oe=Math.min(D+1,T-1),_e=Math.min(K+1,k-1);D=Math.max(D,0),K=Math.max(K,0);const ue=ee-D,ye=B-K,$e=(1-ue)*(1-ye),Se=ue*(1-ye),ge=(1-ue)*ye,te=ue*ye,re=K*T,J=_e*T,we=re+D,Ne=re+oe,je=J+D,Pe=J+oe;for(let Z=0;Z<w;++Z){const ne=Z*V;z[Z*G+q]=$e*b[ne+we]+Se*b[ne+Ne]+ge*b[ne+je]+te*b[ne+Pe]}}return z}function i(b,w,k){const T=new Array(k.length),M=new Array(k.length);for(let R=k.length-1,I=1;R>=0;--R)M[R]=I,T[R]=w[k[R]],I*=T[R];const j=k.map((R,I)=>M[k.indexOf(I)]),C=new b.constructor(b.length);for(let R=0;R<b.length;++R){let I=0;for(let N=w.length-1,z=R;N>=0;--N)I+=z%w[N]*j[N],z=Math.floor(z/w[N]);C[I]=b[R]}return[C,T]}function s(b){const w=d(b)[0],k=b.map(j=>Math.exp(j-w)),T=k.reduce((j,C)=>j+C,0);return k.map(j=>j/T)}function a(b){const w=d(b)[0];let k=0;for(let j=0;j<b.length;++j)k+=Math.exp(b[j]-w);const T=Math.log(k);return b.map(j=>j-w-T)}function o(b,w){let k=0;for(let T=0;T<b.length;++T)k+=b[T]*w[T];return k}function l(b,w){const k=o(b,w),T=c(b),M=c(w);return k/(T*M)}function c(b){return Math.sqrt(b.reduce((w,k)=>w+k*k,0))}function f(b){if(b.length===0)throw Error("Array must not be empty");let w=b[0],k=0;for(let T=1;T<b.length;++T)b[T]<w&&(w=b[T],k=T);return[w,k]}function d(b){if(b.length===0)throw Error("Array must not be empty");let w=b[0],k=0;for(let T=1;T<b.length;++T)b[T]>w&&(w=b[T],k=T);return[w,k]}function h(b){return b>0&&(b&b-1)===0}class p{constructor(w){if(this.size=w|0,this.size<=1||!h(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=w<<1,this.table=new Float64Array(this.size*2);for(let T=0;T<this.table.length;T+=2){const M=Math.PI*T/this.size;this.table[T]=Math.cos(M),this.table[T+1]=-Math.sin(M)}let k=0;for(let T=1;this.size>T;T<<=1)++k;this._width=k%2===0?k-1:k,this._bitrev=new Int32Array(1<<this._width);for(let T=0;T<this._bitrev.length;++T){this._bitrev[T]=0;for(let M=0;M<this._width;M+=2){const j=this._width-M-2;this._bitrev[T]|=(T>>>M&3)<<j}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(w,k){const T=k||new Array(w.length>>>1);for(let M=0;M<w.length;M+=2)T[M>>>1]=w[M];return T}toComplexArray(w,k){const T=k||this.createComplexArray();for(let M=0;M<T.length;M+=2)T[M]=w[M>>>1],T[M+1]=0;return T}transform(w,k){if(w===k)throw new Error("Input and output buffers must be different");this._transform4(w,k,1)}realTransform(w,k){if(w===k)throw new Error("Input and output buffers must be different");this._realTransform4(w,k,1)}inverseTransform(w,k){if(w===k)throw new Error("Input and output buffers must be different");this._transform4(w,k,-1);for(let T=0;T<w.length;++T)w[T]/=this.size}_transform4(w,k,T){const M=this._csize;let C=1<<this._width,R=M/C<<1,I,N;const z=this._bitrev;if(R===4)for(I=0,N=0;I<M;I+=R,++N){const G=z[N];this._singleTransform2(k,w,I,G,C)}else for(I=0,N=0;I<M;I+=R,++N){const G=z[N];this._singleTransform4(k,w,I,G,C,T)}const V=this.table;for(C>>=2;C>=2;C>>=2){R=M/C<<1;const G=R>>>2;for(I=0;I<M;I+=R){const H=I+G-1;for(let O=I,q=0;O<H;O+=2,q+=C){const ee=O,B=ee+G,D=B+G,K=D+G,oe=w[ee],_e=w[ee+1],ue=w[B],ye=w[B+1],$e=w[D],Se=w[D+1],ge=w[K],te=w[K+1],re=V[q],J=T*V[q+1],we=ue*re-ye*J,Ne=ue*J+ye*re,je=V[2*q],Pe=T*V[2*q+1],Z=$e*je-Se*Pe,ne=$e*Pe+Se*je,fe=V[3*q],Me=T*V[3*q+1],Ce=ge*fe-te*Me,me=ge*Me+te*fe,Fe=oe+Z,ze=_e+ne,Je=oe-Z,He=_e-ne,We=we+Ce,nt=Ne+me,ct=T*(we-Ce),Ht=T*(Ne-me);w[ee]=Fe+We,w[ee+1]=ze+nt,w[B]=Je+Ht,w[B+1]=He-ct,w[D]=Fe-We,w[D+1]=ze-nt,w[K]=Je-Ht,w[K+1]=He+ct}}}}_singleTransform2(w,k,T,M,j){const C=w[M],R=w[M+1],I=w[M+j],N=w[M+j+1];k[T]=C+I,k[T+1]=R+N,k[T+2]=C-I,k[T+3]=R-N}_singleTransform4(w,k,T,M,j,C){const R=j*2,I=j*3,N=w[M],z=w[M+1],V=w[M+j],G=w[M+j+1],H=w[M+R],O=w[M+R+1],q=w[M+I],ee=w[M+I+1],B=N+H,D=z+O,K=N-H,oe=z-O,_e=V+q,ue=G+ee,ye=C*(V-q),$e=C*(G-ee);k[T]=B+_e,k[T+1]=D+ue,k[T+2]=K+$e,k[T+3]=oe-ye,k[T+4]=B-_e,k[T+5]=D-ue,k[T+6]=K-$e,k[T+7]=oe+ye}_realTransform4(w,k,T){const M=this._csize;let C=1<<this._width,R=M/C<<1,I,N;const z=this._bitrev;if(R===4)for(I=0,N=0;I<M;I+=R,++N){const H=z[N];this._singleRealTransform2(k,w,I,H>>>1,C>>>1)}else for(I=0,N=0;I<M;I+=R,++N){const H=z[N];this._singleRealTransform4(k,w,I,H>>>1,C>>>1,T)}const V=this.table;for(C>>=2;C>=2;C>>=2){R=M/C<<1;const H=R>>>1,O=H>>>1,q=O>>>1;for(I=0;I<M;I+=R)for(let ee=0,B=0;ee<=q;ee+=2,B+=C){const D=I+ee,K=D+O,oe=K+O,_e=oe+O,ue=w[D],ye=w[D+1],$e=w[K],Se=w[K+1],ge=w[oe],te=w[oe+1],re=w[_e],J=w[_e+1],we=ue,Ne=ye,je=V[B],Pe=T*V[B+1],Z=$e*je-Se*Pe,ne=$e*Pe+Se*je,fe=V[2*B],Me=T*V[2*B+1],Ce=ge*fe-te*Me,me=ge*Me+te*fe,Fe=V[3*B],ze=T*V[3*B+1],Je=re*Fe-J*ze,He=re*ze+J*Fe,We=we+Ce,nt=Ne+me,ct=we-Ce,Ht=Ne-me,Ut=Z+Je,$t=ne+He,xn=T*(Z-Je),Zr=T*(ne-He);if(w[D]=We+Ut,w[D+1]=nt+$t,w[K]=ct+Zr,w[K+1]=Ht-xn,ee===0){w[oe]=We-Ut,w[oe+1]=nt-$t;continue}if(ee===q)continue;const dn=I+O-ee,Cs=I+H-ee;w[dn]=ct-T*Zr,w[dn+1]=-Ht-T*xn,w[Cs]=We-T*Ut,w[Cs+1]=-nt+T*$t}}const G=M>>>1;for(let H=2;H<G;H+=2)w[M-H]=w[H],w[M-H+1]=-w[H+1]}_singleRealTransform2(w,k,T,M,j){const C=w[M],R=w[M+j];k[T]=C+R,k[T+1]=0,k[T+2]=C-R,k[T+3]=0}_singleRealTransform4(w,k,T,M,j,C){const R=j*2,I=j*3,N=w[M],z=w[M+j],V=w[M+R],G=w[M+I],H=N+V,O=N-V,q=z+G,ee=C*(z-G);k[T]=H+q,k[T+1]=0,k[T+2]=O,k[T+3]=-ee,k[T+4]=H-q,k[T+5]=0,k[T+6]=O,k[T+7]=ee}}class m{constructor(w){const k=2*(w-1),T=2*(2*w-1),M=2**Math.ceil(Math.log2(T));this.bufferSize=M,this._a=k;const j=new Float64Array(T),C=new Float64Array(M);this._chirpBuffer=new Float64Array(M),this._buffer1=new Float64Array(M),this._buffer2=new Float64Array(M),this._outBuffer1=new Float64Array(M),this._outBuffer2=new Float64Array(M);const R=-2*Math.PI/w,I=Math.cos(R),N=Math.sin(R);for(let z=0;z<T>>1;++z){const V=(z+1-w)**2/2,G=Math.sqrt(I**2+N**2)**V,H=V*Math.atan2(N,I),O=2*z;j[O]=G*Math.cos(H),j[O+1]=G*Math.sin(H),C[O]=j[O],C[O+1]=-j[O+1]}this._slicedChirpBuffer=j.subarray(k,T),this._f=new p(M>>1),this._f.transform(this._chirpBuffer,C)}_transform(w,k,T){const M=this._buffer1,j=this._buffer2,C=this._outBuffer1,R=this._outBuffer2,I=this._chirpBuffer,N=this._slicedChirpBuffer,z=this._a;if(T)for(let V=0;V<N.length;V+=2){const G=V+1,H=V>>1,O=k[H];M[V]=O*N[V],M[G]=O*N[G]}else for(let V=0;V<N.length;V+=2){const G=V+1;M[V]=k[V]*N[V]-k[G]*N[G],M[G]=k[V]*N[G]+k[G]*N[V]}this._f.transform(C,M);for(let V=0;V<I.length;V+=2){const G=V+1;j[V]=C[V]*I[V]-C[G]*I[G],j[G]=C[V]*I[G]+C[G]*I[V]}this._f.inverseTransform(R,j);for(let V=0;V<R.length;V+=2){const G=R[V+z],H=R[V+z+1],O=N[V],q=N[V+1];w[V]=G*O-H*q,w[V+1]=G*q+H*O}}transform(w,k){this._transform(w,k,!1)}realTransform(w,k){this._transform(w,k,!0)}}class g{constructor(w){this.fft_length=w,this.isPowerOfTwo=h(w),this.isPowerOfTwo?(this.fft=new p(w),this.outputBufferSize=2*w):(this.fft=new m(w),this.outputBufferSize=this.fft.bufferSize)}realTransform(w,k){this.fft.realTransform(w,k)}transform(w,k){this.fft.transform(w,k)}}function x(b,w){if(w%2===0||w<=0)throw new Error("Window size must be a positive odd number");const k=new b.constructor(b.length),T=new b.constructor(w),M=Math.floor(w/2);for(let j=0;j<b.length;++j){let C=0;for(let R=-M;R<=M;++R){let I=j+R;I<0?I=Math.abs(I):I>=b.length&&(I=2*(b.length-1)-I),T[C++]=b[I]}T.sort(),k[j]=T[M]}return k}function y(b,w){const k=Math.pow(10,w);return Math.round(b*k)/k}function v(b){const w=Math.round(b);return Math.abs(b)%1===.5?w%2===0?w:w-1:w}function _(b){const w=b.length,k=b[0].length,T=[w+1,k+1],M=Array.from({length:T[0]},()=>Array(T[1]).fill(1/0));M[0][0]=0;const j=Array.from({length:T[0]},()=>Array(T[1]).fill(-1));for(let z=1;z<T[1];++z)for(let V=1;V<T[0];++V){const G=M[V-1][z-1],H=M[V-1][z],O=M[V][z-1];let q,ee;G<H&&G<O?(q=G,ee=0):H<G&&H<O?(q=H,ee=1):(q=O,ee=2),M[V][z]=b[V-1][z-1]+q,j[V][z]=ee}for(let z=0;z<T[1];++z)j[0][z]=2;for(let z=0;z<T[0];++z)j[z][0]=1;let C=w,R=k,I=[],N=[];for(;C>0||R>0;)switch(I.push(C-1),N.push(R-1),j[C][R]){case 0:--C,--R;break;case 1:--C;break;case 2:--R;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${C}, ${R}]. Please file a bug report.`)}return I.reverse(),N.reverse(),[I,N]}},"./src/utils/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>a,Tensor:()=>o,cat:()=>k,full:()=>N,full_like:()=>z,interpolate:()=>f,interpolate_4d:()=>d,layer_norm:()=>v,matmul:()=>h,mean:()=>C,mean_pooling:()=>y,ones:()=>V,ones_like:()=>G,permute:()=>c,quantize_embeddings:()=>ee,rand:()=>q,rfft:()=>p,slice:()=>x,stack:()=>T,std_mean:()=>j,topk:()=>m,zeros:()=>H,zeros_like:()=>O});var n=r("./src/utils/maths.js"),i=r("./src/backends/onnx.js"),s=r("./src/ops/registry.js");const a=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class o{constructor(...D){de(this,"ort_tensor");return(0,i.isONNXTensor)(D[0])?this.ort_tensor=D[0]:this.ort_tensor=new i.Tensor(D[0],D[1],D[2]),new Proxy(this,{get:(K,oe)=>{if(typeof oe=="string"){let _e=Number(oe);if(Number.isInteger(_e))return K._getitem(_e)}return K[oe]},set:(K,oe,_e)=>K[oe]=_e})}get dims(){return this.ort_tensor.dims}set dims(D){this.ort_tensor.dims=D}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[D,...K]=this.dims;if(K.length>0){const oe=K.reduce((_e,ue)=>_e*ue);for(let _e=0;_e<D;++_e)yield this._subarray(_e,oe,K)}else yield*this.data}_getitem(D){const[K,...oe]=this.dims;if(D=w(D,K),oe.length>0){const _e=oe.reduce((ue,ye)=>ue*ye);return this._subarray(D,_e,oe)}else return new o(this.type,[this.data[D]],oe)}indexOf(D){const K=this.data;for(let oe=0;oe<K.length;++oe)if(K[oe]==D)return oe;return-1}_subarray(D,K,oe){const _e=D*K,ue=(D+1)*K,ye="subarray"in this.data?this.data.subarray(_e,ue):this.data.slice(_e,ue);return new o(this.type,ye,oe)}item(){const D=this.data;if(D.length!==1)throw new Error(`a Tensor with ${D.length} elements cannot be converted to Scalar`);return D[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=1/(1+Math.exp(-D[K]));return this}map(D){return this.clone().map_(D)}map_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]=D(K[oe],oe,K);return this}mul(D){return this.clone().mul_(D)}mul_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]*=D;return this}div(D){return this.clone().div_(D)}div_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]/=D;return this}add(D){return this.clone().add_(D)}add_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]+=D;return this}sub(D){return this.clone().sub_(D)}sub_(D){const K=this.data;for(let oe=0;oe<K.length;++oe)K[oe]-=D;return this}clone(){return new o(this.type,this.data.slice(),this.dims.slice())}slice(...D){const K=[],oe=[];for(let ge=0;ge<this.dims.length;++ge){let te=D[ge];if(te==null)oe.push([0,this.dims[ge]]),K.push(this.dims[ge]);else if(typeof te=="number")te=w(te,this.dims[ge],ge),oe.push([te,te+1]);else if(Array.isArray(te)&&te.length===2){let[re,J]=te;if(re=re===null?0:w(re,this.dims[ge],ge,!1),J=J===null?this.dims[ge]:w(J,this.dims[ge],ge,!1),re>J)throw new Error(`Invalid slice: ${te}`);const we=[Math.max(re,0),Math.min(J,this.dims[ge])];oe.push(we),K.push(we[1]-we[0])}else throw new Error(`Invalid slice: ${te}`)}const _e=oe.map(([ge,te])=>te-ge),ue=_e.reduce((ge,te)=>ge*te),ye=this.data,$e=new ye.constructor(ue),Se=this.stride();for(let ge=0;ge<ue;++ge){let te=0;for(let re=_e.length-1,J=ge;re>=0;--re){const we=_e[re];te+=(J%we+oe[re][0])*Se[re],J=Math.floor(J/we)}$e[ge]=ye[te]}return new o(this.type,$e,K)}permute(...D){return c(this,D)}transpose(...D){return this.permute(...D)}sum(D=null,K=!1){return this.norm(1,D,K)}norm(D="fro",K=null,oe=!1){if(D==="fro")D=2;else if(typeof D=="string")throw Error(`Unsupported norm: ${D}`);const _e=this.data,ue=(ge,te)=>ge+te**D;if(K===null){const ge=_e.reduce(ue,0)**(1/D);return new o(this.type,[ge],[])}const[ye,$e,Se]=M(ue,this,K,oe);if(D!==1)for(let ge=0;ge<$e.length;++ge)$e[ge]=$e[ge]**(1/D);return new o(ye,$e,Se)}normalize_(D=2,K=1){K=w(K,this.dims.length);const oe=this.norm(D,K,!0),_e=this.data,ue=oe.data;for(let ye=0;ye<_e.length;++ye){let $e=0;for(let Se=this.dims.length-1,ge=ye,te=1;Se>=0;--Se){const re=this.dims[Se];if(Se!==K){const J=ge%re;$e+=J*te,te*=this.dims[Se]}ge=Math.floor(ge/re)}_e[ye]/=ue[$e]}return this}normalize(D=2,K=1){return this.clone().normalize_(D,K)}stride(){return R(this.dims)}squeeze(D=null){return new o(this.type,this.data,_(this.dims,D))}squeeze_(D=null){return this.dims=_(this.dims,D),this}unsqueeze(D=null){return new o(this.type,this.data,b(this.dims,D))}unsqueeze_(D=null){return this.dims=b(this.dims,D),this}flatten_(D=0,K=-1){K=(K+this.dims.length)%this.dims.length;let oe=this.dims.slice(0,D),_e=this.dims.slice(D,K+1),ue=this.dims.slice(K+1);return this.dims=[...oe,_e.reduce((ye,$e)=>ye*$e,1),...ue],this}flatten(D=0,K=-1){return this.clone().flatten_(D,K)}view(...D){let K=-1;for(let _e=0;_e<D.length;++_e)if(D[_e]===-1){if(K!==-1)throw new Error("Only one dimension can be inferred");K=_e}const oe=this.data;if(K!==-1){const _e=D.reduce((ue,ye,$e)=>$e!==K?ue*ye:ue,1);D[K]=oe.length/_e}return new o(this.type,oe,D)}neg_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=-D[K];return this}neg(){return this.clone().neg_()}gt(D){const K=new Uint8Array(this.data.length),oe=this.data;for(let _e=0;_e<oe.length;++_e)K[_e]=oe[_e]>D?1:0;return new o("bool",K,this.dims)}lt(D){const K=new Uint8Array(this.data.length),oe=this.data;for(let _e=0;_e<oe.length;++_e)K[_e]=oe[_e]<D?1:0;return new o("bool",K,this.dims)}clamp_(D,K){const oe=this.data;for(let _e=0;_e<oe.length;++_e)oe[_e]=Math.min(Math.max(oe[_e],D),K);return this}clamp(D,K){return this.clone().clamp_(D,K)}round_(){const D=this.data;for(let K=0;K<D.length;++K)D[K]=Math.round(D[K]);return this}round(){return this.clone().round_()}mean(D=null,K=!1){return C(this,D,K)}min(D=null,K=!1){if(D===null){const ye=(0,n.min)(this.data)[0];return new o(this.type,[ye],[])}const[oe,_e,ue]=M((ye,$e)=>Math.min(ye,$e),this,D,K,1/0);return new o(oe,_e,ue)}max(D=null,K=!1){if(D===null){const ye=(0,n.max)(this.data)[0];return new o(this.type,[ye],[])}const[oe,_e,ue]=M((ye,$e)=>Math.max(ye,$e),this,D,K,-1/0);return new o(oe,_e,ue)}argmin(D=null,K=!1){if(D!==null)throw new Error("`dim !== null` not yet implemented.");const oe=(0,n.min)(this.data)[1];return new o("int64",[BigInt(oe)],[])}argmax(D=null,K=!1){if(D!==null)throw new Error("`dim !== null` not yet implemented.");const oe=(0,n.max)(this.data)[1];return new o("int64",[BigInt(oe)],[])}to(D){if(this.type===D)return this;if(!a.hasOwnProperty(D))throw new Error(`Unsupported type: ${D}`);let K;const oe=["int64","uint64"].includes(this.type),_e=["int64","uint64"].includes(D);return oe&&!_e?K=Number:!oe&&_e&&(K=BigInt),new o(D,a[D].from(this.data,K),this.dims)}}function l(B,D){const K=B.length,oe=D.reduce((ue,ye)=>ue*ye);if(K!==oe)throw Error(`cannot reshape array of size ${K} into shape (${D})`);let _e=B;for(let ue=D.length-1;ue>=0;ue--)_e=_e.reduce((ye,$e)=>{let Se=ye[ye.length-1];return Se.length<D[ue]?Se.push($e):ye.push([$e]),ye},[[]]);return _e[0]}function c(B,D){const[K,oe]=(0,n.permute_data)(B.data,B.dims,D);return new o(B.type,K,oe)}function f(B,[D,K],oe="bilinear",_e=!1){const ue=B.dims.at(-3)??1,ye=B.dims.at(-2),$e=B.dims.at(-1);let Se=(0,n.interpolate_data)(B.data,[ue,ye,$e],[D,K],oe,_e);return new o(B.type,Se,[ue,D,K])}async function d(B,{size:D=null,mode:K="bilinear"}={}){if(B.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!D)throw new Error("`interpolate_4d` requires a `size` argument.");let oe;if(D.length===2)oe=[...B.dims.slice(0,2),...D];else if(D.length===3)oe=[B.dims[0],...D];else if(D.length===4)oe=D;else throw new Error("`size` must be of length 2, 3, or 4.");let _e;if(K==="nearest")_e=await s.TensorOpRegistry.nearest_interpolate_4d;else if(K==="bilinear")_e=await s.TensorOpRegistry.bilinear_interpolate_4d;else if(K==="bicubic")_e=await s.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${K}`);const ue=new o("int64",new BigInt64Array(oe.map(BigInt)),[oe.length]);return await _e({x:B,s:ue})}async function h(B,D){return await(await s.TensorOpRegistry.matmul)({a:B,b:D})}async function p(B,D){return await(await s.TensorOpRegistry.rfft)({x:B,a:D})}async function m(B,D){const K=await s.TensorOpRegistry.top_k;return D==null?D=B.dims.at(-1):D=Math.min(D,B.dims.at(-1)),await K({x:B,k:new o("int64",[BigInt(D)],[1])})}const g=B=>new o("int64",B,[B.length]);async function x(B,D,K,oe,_e){return await(await s.TensorOpRegistry.slice)({x:B,s:g(D),e:g(K),a:g(oe),t:g(_e??new Array(oe.length).fill(1))})}function y(B,D){const K=B.data,oe=D.data,_e=[B.dims[0],B.dims[2]],ue=new K.constructor(_e[0]*_e[1]),[ye,$e,Se]=B.dims;let ge=0;for(let te=0;te<ye;++te){const re=te*Se*$e;for(let J=0;J<Se;++J){let we=0,Ne=0;const je=te*$e,Pe=re+J;for(let ne=0;ne<$e;++ne){const fe=Number(oe[je+ne]);Ne+=fe,we+=K[Pe+ne*Se]*fe}const Z=we/Ne;ue[ge++]=Z}}return new o(B.type,ue,_e)}function v(B,D,{eps:K=1e-5}={}){if(B.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[oe,_e]=B.dims;if(D.length!==1&&D[0]!==_e)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[ue,ye]=j(B,1,0,!0),$e=ue.data,Se=ye.data,ge=B.data,te=new ge.constructor(ge.length);for(let re=0;re<oe;++re){const J=re*_e;for(let we=0;we<_e;++we){const Ne=J+we;te[Ne]=(ge[Ne]-Se[re])/($e[re]+K)}}return new o(B.type,te,B.dims)}function _(B,D){return B=B.slice(),D===null?B=B.filter(K=>K!==1):typeof D=="number"?B[D]===1&&B.splice(D,1):Array.isArray(D)&&(B=B.filter((K,oe)=>K!==1||!D.includes(oe))),B}function b(B,D){return D=w(D,B.length+1),B=B.slice(),B.splice(D,0,1),B}function w(B,D,K=null,oe=!0){if(B<-D||B>=D){if(oe)throw new Error(`IndexError: index ${B} is out of bounds for dimension${K===null?"":" "+K} with size ${D}`);return B<-D?0:D}return B<0&&(B=(B%D+D)%D),B}function k(B,D=0){D=w(D,B[0].dims.length);const K=B[0].dims.slice();K[D]=B.reduce((ye,$e)=>ye+$e.dims[D],0);const oe=K.reduce((ye,$e)=>ye*$e,1),_e=new B[0].data.constructor(oe),ue=B[0].type;if(D===0){let ye=0;for(const $e of B){const Se=$e.data;_e.set(Se,ye),ye+=Se.length}}else{let ye=0;for(let $e=0;$e<B.length;++$e){const{data:Se,dims:ge}=B[$e];for(let te=0;te<Se.length;++te){let re=0;for(let J=ge.length-1,we=te,Ne=1;J>=0;--J){const je=ge[J];let Pe=we%je;J===D&&(Pe+=ye),re+=Pe*Ne,Ne*=K[J],we=Math.floor(we/je)}_e[re]=Se[te]}ye+=ge[D]}}return new o(ue,_e,K)}function T(B,D=0){return k(B.map(K=>K.unsqueeze(D)),D)}function M(B,D,K=null,oe=!1,_e=null){const ue=D.data,ye=D.dims;K=w(K,ye.length);const $e=ye.slice();$e[K]=1;const Se=new ue.constructor(ue.length/ye[K]);_e!==null&&Se.fill(_e);for(let ge=0;ge<ue.length;++ge){let te=0;for(let re=ye.length-1,J=ge,we=1;re>=0;--re){const Ne=ye[re];if(re!==K){const je=J%Ne;te+=je*we,we*=$e[re]}J=Math.floor(J/Ne)}Se[te]=B(Se[te],ue[ge],ge,te)}return oe||$e.splice(K,1),[D.type,Se,$e]}function j(B,D=null,K=1,oe=!1){const _e=B.data,ue=B.dims;if(D===null){const we=_e.reduce((Z,ne)=>Z+ne,0)/_e.length,Ne=Math.sqrt(_e.reduce((Z,ne)=>Z+(ne-we)**2,0)/(_e.length-K)),je=new o(B.type,[we],[]);return[new o(B.type,[Ne],[]),je]}D=w(D,ue.length);const ye=C(B,D,oe),$e=ye.data,[Se,ge,te]=M((J,we,Ne,je)=>J+(we-$e[je])**2,B,D,oe);for(let J=0;J<ge.length;++J)ge[J]=Math.sqrt(ge[J]/(ue[D]-K));return[new o(Se,ge,te),ye]}function C(B,D=null,K=!1){const oe=B.dims,_e=B.data;if(D===null){const Se=_e.reduce((ge,te)=>ge+te,0);return new o(B.type,[Se/_e.length],[])}D=w(D,oe.length);const[ue,ye,$e]=M((Se,ge)=>Se+ge,B,D,K);if(oe[D]!==1)for(let Se=0;Se<ye.length;++Se)ye[Se]/=oe[D];return new o(ue,ye,$e)}function R(B){const D=new Array(B.length);for(let K=B.length-1,oe=1;K>=0;--K)D[K]=oe,oe*=B[K];return D}function I(B,D,K,oe){const _e=B.reduce((ue,ye)=>ue*ye,1);return new o(K,new oe(_e).fill(D),B)}function N(B,D){let K,oe;if(typeof D=="number")K="float32",oe=Float32Array;else if(typeof D=="bigint")K="int64",oe=BigInt64Array;else if(typeof D=="boolean")K="bool",oe=Uint8Array;else throw new Error(`Unsupported data type: ${typeof D}`);return I(B,D,K,oe)}function z(B,D){return N(B.dims,D)}function V(B){return I(B,1n,"int64",BigInt64Array)}function G(B){return V(B.dims)}function H(B){return I(B,0n,"int64",BigInt64Array)}function O(B){return H(B.dims)}function q(B){const D=B.reduce((K,oe)=>K*oe,1);return new o("float32",Float32Array.from({length:D},()=>Math.random()),B)}function ee(B,D){if(B.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(B.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(D))throw new Error("The precision must be either 'binary' or 'ubinary'");const K=D==="binary",oe=K?"int8":"uint8",_e=K?Int8Array:Uint8Array,ue=B.data,ye=new _e(ue.length/8);for(let $e=0;$e<ue.length;++$e){const Se=ue[$e]>0?1:0,ge=Math.floor($e/8),te=$e%8;ye[ge]|=Se<<7-te,K&&te===0&&(ye[ge]-=128)}return new o(oe,ye,[B.dims[0],B.dims[1]/8])}},"./src/utils/video.js":(e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>a,RawVideoFrame:()=>s,load_video:()=>o});var n=r("./src/utils/image.js"),i=r("./src/env.js");class s{constructor(c,f){this.image=c,this.timestamp=f}}class a{constructor(c,f){c.length>0&&c[0]instanceof n.RawImage&&(c=c.map((d,h)=>new s(d,(h+1)/(c.length+1)*f))),this.frames=c,this.duration=f}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function o(l,{num_frames:c=null,fps:f=null}={}){if(!i.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(c==null&&f==null)throw new Error("Either num_frames or fps must be provided.");const d=[],h=document.createElement("video");if(h.crossOrigin="anonymous",h.muted=!0,typeof l=="string")h.src=l;else if(l instanceof Blob)h.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)h.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(_=>h.onloadedmetadata=_),h.seekable.start(0)===h.seekable.end(0)){const b=await(await fetch(h.src)).blob();h.src=URL.createObjectURL(b),await new Promise(w=>h.onloadedmetadata=w)}const p=h.duration;let m,g;c!=null?(m=c,g=c===1?0:p/(c-1)):(g=1/f,m=Math.floor(p/g));let x=[];for(let _=0;_<m;++_)x.push(c===1?p/2:_*g);const y=document.createElement("canvas");y.width=h.videoWidth,y.height=h.videoHeight;const v=y.getContext("2d",{willReadFrequently:!0});for(const _ of x){h.currentTime=_,await new Promise(T=>{h.onseeked=T}),v.drawImage(h,0,0,y.width,y.height);const b=v.getImageData(0,0,y.width,y.height),w=new n.RawImage(b.data,y.width,y.height,4),k=new s(w,_);d.push(k)}return h.remove(),new a(d,p)}}},z9={};function jr(e){var t=z9[e];if(t!==void 0)return t.exports;var r=z9[e]={exports:{}};return U7e[e](r,r.exports,jr),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;jr.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var i=Object.create(null);jr.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=n&2&&r;typeof a=="object"&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach(o=>s[o]=()=>r[o]);return s.default=()=>r,jr.d(i,s),i}})();jr.d=(e,t)=>{for(var r in t)jr.o(t,r)&&!jr.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};jr.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);jr.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var P={};(()=>{/*!*****************************!*\
  !*** ./src/transformers.js ***!
  \*****************************/jr.r(P),jr.d(P,{ASTFeatureExtractor:()=>d.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>i.AutoConfig,AutoFeatureExtractor:()=>h.AutoFeatureExtractor,AutoImageProcessor:()=>g.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>v.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>_.BaseStreamer,BeitFeatureExtractor:()=>m.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>m.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>m.CLIPFeatureExtractor,CLIPImageProcessor:()=>m.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>m.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>d.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>w.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>m.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>m.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>m.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>d.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>m.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>m.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>m.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>m.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>m.DonutFeatureExtractor,DonutImageProcessor:()=>m.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>m.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>d.EncodecFeatureExtractor,EosTokenCriteria:()=>b.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>n.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>c.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>f.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>y.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>w.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>w.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>m.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>d.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>y.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>m.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>y.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>m.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>y.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>d.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>p.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>b.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>m.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>y.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>m.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>y.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>w.LogitsProcessor,LogitsProcessorList:()=>w.LogitsProcessorList,LogitsWarper:()=>w.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>m.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>m.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>m.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>b.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>y.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>w.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>w.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>m.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>m.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>m.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>m.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>m.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>m.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>m.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>m.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>m.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>m.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>d.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>y.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>w.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>w.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>m.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>m.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>m.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>y.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>m.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>y.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>m.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>y.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>i.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>x.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>m.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>d.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>y.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>m.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>y.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>m.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>a.RawImage,RawVideo:()=>o.RawVideo,RawVideoFrame:()=>o.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>w.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,SamImageProcessor:()=>m.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>y.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>d.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>m.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>m.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>m.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>m.SmolVLMImageProcessor,SmolVLMProcessor:()=>y.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>d.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>y.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>b.StoppingCriteria,StoppingCriteriaList:()=>b.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>w.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>m.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>w.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>_.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>w.TopKLogitsWarper,TopPLogitsWarper:()=>w.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>y.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>y.VLChatProcessor,VLMImageProcessor:()=>m.VLMImageProcessor,ViTFeatureExtractor:()=>m.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>m.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>m.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>m.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>y.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>d.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>y.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>y.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>d.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>d.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>y.WhisperProcessor,WhisperTextStreamer:()=>_.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>w.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>m.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>m.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>c.bankers_round,cat:()=>l.cat,cos_sim:()=>c.cos_sim,dot:()=>c.dot,dynamic_time_warping:()=>c.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>i.getCacheShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>c.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>a.load_image,load_video:()=>o.load_video,log_softmax:()=>c.log_softmax,magnitude:()=>c.magnitude,matmul:()=>l.matmul,max:()=>c.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>c.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>c.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>c.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>s.read_audio,rfft:()=>l.rfft,round:()=>c.round,slice:()=>l.slice,softmax:()=>c.softmax,spectrogram:()=>s.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>s.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=jr("./src/env.js"),t=jr("./src/pipelines.js"),r=jr("./src/models.js"),n=jr("./src/tokenizers.js"),i=jr("./src/configs.js"),s=jr("./src/utils/audio.js"),a=jr("./src/utils/image.js"),o=jr("./src/utils/video.js"),l=jr("./src/utils/tensor.js"),c=jr("./src/utils/maths.js"),f=jr("./src/base/feature_extraction_utils.js"),d=jr("./src/models/feature_extractors.js"),h=jr("./src/models/auto/feature_extraction_auto.js"),p=jr("./src/base/image_processors_utils.js"),m=jr("./src/models/image_processors.js"),g=jr("./src/models/auto/image_processing_auto.js"),x=jr("./src/base/processing_utils.js"),y=jr("./src/models/processors.js"),v=jr("./src/models/auto/processing_auto.js"),_=jr("./src/generation/streamers.js"),b=jr("./src/generation/stopping_criteria.js"),w=jr("./src/generation/logits_process.js")})();P.ASTFeatureExtractor;P.ASTForAudioClassification;P.ASTModel;P.ASTPreTrainedModel;P.AlbertForMaskedLM;P.AlbertForQuestionAnswering;P.AlbertForSequenceClassification;P.AlbertModel;P.AlbertPreTrainedModel;P.AlbertTokenizer;P.AudioClassificationPipeline;P.AutoConfig;P.AutoFeatureExtractor;P.AutoImageProcessor;P.AutoModel;P.AutoModelForAudioClassification;P.AutoModelForAudioFrameClassification;P.AutoModelForAudioTextToText;P.AutoModelForCTC;P.AutoModelForCausalLM;P.AutoModelForDepthEstimation;P.AutoModelForDocumentQuestionAnswering;P.AutoModelForImageClassification;P.AutoModelForImageFeatureExtraction;P.AutoModelForImageMatting;P.AutoModelForImageSegmentation;P.AutoModelForImageTextToText;P.AutoModelForImageToImage;P.AutoModelForMaskGeneration;P.AutoModelForMaskedLM;P.AutoModelForNormalEstimation;P.AutoModelForObjectDetection;P.AutoModelForPoseEstimation;P.AutoModelForQuestionAnswering;P.AutoModelForSemanticSegmentation;P.AutoModelForSeq2SeqLM;P.AutoModelForSequenceClassification;P.AutoModelForSpeechSeq2Seq;P.AutoModelForTextToSpectrogram;P.AutoModelForTextToWaveform;P.AutoModelForTokenClassification;P.AutoModelForUniversalSegmentation;P.AutoModelForVision2Seq;P.AutoModelForXVector;P.AutoModelForZeroShotObjectDetection;P.AutoProcessor;P.AutoTokenizer;P.AutomaticSpeechRecognitionPipeline;P.BackgroundRemovalPipeline;P.BartForConditionalGeneration;P.BartForSequenceClassification;P.BartModel;P.BartPretrainedModel;P.BartTokenizer;P.BaseModelOutput;P.BaseStreamer;P.BeitFeatureExtractor;P.BeitForImageClassification;P.BeitModel;P.BeitPreTrainedModel;P.BertForMaskedLM;P.BertForQuestionAnswering;P.BertForSequenceClassification;P.BertForTokenClassification;P.BertModel;P.BertPreTrainedModel;P.BertTokenizer;P.BitImageProcessor;P.BlenderbotForConditionalGeneration;P.BlenderbotModel;P.BlenderbotPreTrainedModel;P.BlenderbotSmallForConditionalGeneration;P.BlenderbotSmallModel;P.BlenderbotSmallPreTrainedModel;P.BlenderbotSmallTokenizer;P.BlenderbotTokenizer;P.BloomForCausalLM;P.BloomModel;P.BloomPreTrainedModel;P.BloomTokenizer;P.CLIPFeatureExtractor;P.CLIPImageProcessor;P.CLIPModel;P.CLIPPreTrainedModel;P.CLIPSegForImageSegmentation;P.CLIPSegModel;P.CLIPSegPreTrainedModel;P.CLIPTextModel;P.CLIPTextModelWithProjection;P.CLIPTokenizer;P.CLIPVisionModel;P.CLIPVisionModelWithProjection;P.CamembertForMaskedLM;P.CamembertForQuestionAnswering;P.CamembertForSequenceClassification;P.CamembertForTokenClassification;P.CamembertModel;P.CamembertPreTrainedModel;P.CamembertTokenizer;P.CausalLMOutput;P.CausalLMOutputWithPast;P.ChineseCLIPFeatureExtractor;P.ChineseCLIPModel;P.ChineseCLIPPreTrainedModel;P.ClapAudioModelWithProjection;P.ClapFeatureExtractor;P.ClapModel;P.ClapPreTrainedModel;P.ClapTextModelWithProjection;P.ClassifierFreeGuidanceLogitsProcessor;P.CodeGenForCausalLM;P.CodeGenModel;P.CodeGenPreTrainedModel;P.CodeGenTokenizer;P.CodeLlamaTokenizer;P.CohereForCausalLM;P.CohereModel;P.CoherePreTrainedModel;P.CohereTokenizer;P.ConvBertForMaskedLM;P.ConvBertForQuestionAnswering;P.ConvBertForSequenceClassification;P.ConvBertForTokenClassification;P.ConvBertModel;P.ConvBertPreTrainedModel;P.ConvBertTokenizer;P.ConvNextFeatureExtractor;P.ConvNextForImageClassification;P.ConvNextImageProcessor;P.ConvNextModel;P.ConvNextPreTrainedModel;P.ConvNextV2ForImageClassification;P.ConvNextV2Model;P.ConvNextV2PreTrainedModel;P.DFineForObjectDetection;P.DFineModel;P.DFinePreTrainedModel;P.DPTFeatureExtractor;P.DPTForDepthEstimation;P.DPTImageProcessor;P.DPTModel;P.DPTPreTrainedModel;P.DacDecoderModel;P.DacDecoderOutput;P.DacEncoderModel;P.DacEncoderOutput;P.DacFeatureExtractor;P.DacModel;P.DacPreTrainedModel;P.DataTypeMap;P.DebertaForMaskedLM;P.DebertaForQuestionAnswering;P.DebertaForSequenceClassification;P.DebertaForTokenClassification;P.DebertaModel;P.DebertaPreTrainedModel;P.DebertaTokenizer;P.DebertaV2ForMaskedLM;P.DebertaV2ForQuestionAnswering;P.DebertaV2ForSequenceClassification;P.DebertaV2ForTokenClassification;P.DebertaV2Model;P.DebertaV2PreTrainedModel;P.DebertaV2Tokenizer;P.DecisionTransformerModel;P.DecisionTransformerPreTrainedModel;P.DeiTFeatureExtractor;P.DeiTForImageClassification;P.DeiTImageProcessor;P.DeiTModel;P.DeiTPreTrainedModel;P.DepthAnythingForDepthEstimation;P.DepthAnythingPreTrainedModel;P.DepthEstimationPipeline;P.DepthProForDepthEstimation;P.DepthProPreTrainedModel;P.DetrFeatureExtractor;P.DetrForObjectDetection;P.DetrForSegmentation;P.DetrImageProcessor;P.DetrModel;P.DetrObjectDetectionOutput;P.DetrPreTrainedModel;P.DetrSegmentationOutput;P.Dinov2ForImageClassification;P.Dinov2Model;P.Dinov2PreTrainedModel;P.Dinov2WithRegistersForImageClassification;P.Dinov2WithRegistersModel;P.Dinov2WithRegistersPreTrainedModel;P.DistilBertForMaskedLM;P.DistilBertForQuestionAnswering;P.DistilBertForSequenceClassification;P.DistilBertForTokenClassification;P.DistilBertModel;P.DistilBertPreTrainedModel;P.DistilBertTokenizer;P.DocumentQuestionAnsweringPipeline;P.DonutFeatureExtractor;P.DonutImageProcessor;P.DonutSwinModel;P.DonutSwinPreTrainedModel;P.EfficientNetForImageClassification;P.EfficientNetImageProcessor;P.EfficientNetModel;P.EfficientNetPreTrainedModel;P.ElectraForMaskedLM;P.ElectraForQuestionAnswering;P.ElectraForSequenceClassification;P.ElectraForTokenClassification;P.ElectraModel;P.ElectraPreTrainedModel;P.ElectraTokenizer;P.EncodecFeatureExtractor;P.EosTokenCriteria;P.Ernie4_5_ForCausalLM;P.Ernie4_5_Model;P.Ernie4_5_PretrainedModel;P.Ernie4_5_Tokenizer;P.EsmForMaskedLM;P.EsmForSequenceClassification;P.EsmForTokenClassification;P.EsmModel;P.EsmPreTrainedModel;P.EsmTokenizer;P.ExaoneForCausalLM;P.ExaoneModel;P.ExaonePreTrainedModel;P.FFT;P.FalconForCausalLM;P.FalconModel;P.FalconPreTrainedModel;P.FalconTokenizer;P.FastViTForImageClassification;P.FastViTModel;P.FastViTPreTrainedModel;P.FeatureExtractionPipeline;P.FeatureExtractor;P.FillMaskPipeline;P.Florence2ForConditionalGeneration;P.Florence2PreTrainedModel;P.Florence2Processor;P.ForcedBOSTokenLogitsProcessor;P.ForcedEOSTokenLogitsProcessor;P.GLPNFeatureExtractor;P.GLPNForDepthEstimation;P.GLPNModel;P.GLPNPreTrainedModel;P.GPT2LMHeadModel;P.GPT2Model;P.GPT2PreTrainedModel;P.GPT2Tokenizer;P.GPTBigCodeForCausalLM;P.GPTBigCodeModel;P.GPTBigCodePreTrainedModel;P.GPTJForCausalLM;P.GPTJModel;P.GPTJPreTrainedModel;P.GPTNeoForCausalLM;P.GPTNeoModel;P.GPTNeoPreTrainedModel;P.GPTNeoXForCausalLM;P.GPTNeoXModel;P.GPTNeoXPreTrainedModel;P.GPTNeoXTokenizer;P.Gemma2ForCausalLM;P.Gemma2Model;P.Gemma2PreTrainedModel;P.Gemma3ForCausalLM;P.Gemma3Model;P.Gemma3PreTrainedModel;P.Gemma3nAudioFeatureExtractor;P.Gemma3nForConditionalGeneration;P.Gemma3nPreTrainedModel;P.Gemma3nProcessor;P.GemmaForCausalLM;P.GemmaModel;P.GemmaPreTrainedModel;P.GemmaTokenizer;P.GlmForCausalLM;P.GlmModel;P.GlmPreTrainedModel;P.GraniteForCausalLM;P.GraniteModel;P.GranitePreTrainedModel;P.Grok1Tokenizer;P.GroundingDinoForObjectDetection;P.GroundingDinoImageProcessor;P.GroundingDinoPreTrainedModel;P.GroundingDinoProcessor;P.GroupViTModel;P.GroupViTPreTrainedModel;P.HeliumForCausalLM;P.HeliumModel;P.HeliumPreTrainedModel;P.HerbertTokenizer;P.HieraForImageClassification;P.HieraModel;P.HieraPreTrainedModel;P.HubertForCTC;P.HubertForSequenceClassification;P.HubertModel;P.HubertPreTrainedModel;P.IJepaForImageClassification;P.IJepaModel;P.IJepaPreTrainedModel;P.Idefics3ForConditionalGeneration;P.Idefics3ImageProcessor;P.Idefics3PreTrainedModel;P.Idefics3Processor;P.ImageClassificationPipeline;P.ImageFeatureExtractionPipeline;P.ImageFeatureExtractor;P.ImageMattingOutput;P.ImageProcessor;P.ImageSegmentationPipeline;P.ImageToImagePipeline;P.ImageToTextPipeline;P.InterruptableStoppingCriteria;P.JAISLMHeadModel;P.JAISModel;P.JAISPreTrainedModel;P.JinaCLIPImageProcessor;P.JinaCLIPModel;P.JinaCLIPPreTrainedModel;P.JinaCLIPProcessor;P.JinaCLIPTextModel;P.JinaCLIPVisionModel;P.Lfm2ForCausalLM;P.Lfm2Model;P.Lfm2PreTrainedModel;P.LiteWhisperForConditionalGeneration;P.LlamaForCausalLM;P.LlamaModel;P.LlamaPreTrainedModel;P.LlamaTokenizer;P.LlavaForConditionalGeneration;P.LlavaOnevisionForConditionalGeneration;P.LlavaOnevisionImageProcessor;P.LlavaPreTrainedModel;P.LlavaProcessor;P.LlavaQwen2ForCausalLM;P.LogitsProcessor;P.LogitsProcessorList;P.LogitsWarper;P.LongT5ForConditionalGeneration;P.LongT5Model;P.LongT5PreTrainedModel;P.M2M100ForConditionalGeneration;P.M2M100Model;P.M2M100PreTrainedModel;P.M2M100Tokenizer;P.MBart50Tokenizer;P.MBartForCausalLM;P.MBartForConditionalGeneration;P.MBartForSequenceClassification;P.MBartModel;P.MBartPreTrainedModel;P.MBartTokenizer;P.MPNetForMaskedLM;P.MPNetForQuestionAnswering;P.MPNetForSequenceClassification;P.MPNetForTokenClassification;P.MPNetModel;P.MPNetPreTrainedModel;P.MPNetTokenizer;P.MT5ForConditionalGeneration;P.MT5Model;P.MT5PreTrainedModel;P.MarianMTModel;P.MarianModel;P.MarianPreTrainedModel;P.MarianTokenizer;P.Mask2FormerImageProcessor;P.MaskFormerFeatureExtractor;P.MaskFormerForInstanceSegmentation;P.MaskFormerImageProcessor;P.MaskFormerModel;P.MaskFormerPreTrainedModel;P.MaskedLMOutput;P.MaxLengthCriteria;P.Metric3DForDepthEstimation;P.Metric3DPreTrainedModel;P.Metric3Dv2ForDepthEstimation;P.Metric3Dv2PreTrainedModel;P.MgpstrForSceneTextRecognition;P.MgpstrModelOutput;P.MgpstrPreTrainedModel;P.MgpstrProcessor;P.MgpstrTokenizer;P.MimiDecoderModel;P.MimiDecoderOutput;P.MimiEncoderModel;P.MimiEncoderOutput;P.MimiModel;P.MimiPreTrainedModel;P.MinLengthLogitsProcessor;P.MinNewTokensLengthLogitsProcessor;P.MistralForCausalLM;P.MistralModel;P.MistralPreTrainedModel;P.MobileBertForMaskedLM;P.MobileBertForQuestionAnswering;P.MobileBertForSequenceClassification;P.MobileBertModel;P.MobileBertPreTrainedModel;P.MobileBertTokenizer;P.MobileLLMForCausalLM;P.MobileLLMModel;P.MobileLLMPreTrainedModel;P.MobileNetV1FeatureExtractor;P.MobileNetV1ForImageClassification;P.MobileNetV1ForSemanticSegmentation;P.MobileNetV1ImageProcessor;P.MobileNetV1Model;P.MobileNetV1PreTrainedModel;P.MobileNetV2FeatureExtractor;P.MobileNetV2ForImageClassification;P.MobileNetV2ForSemanticSegmentation;P.MobileNetV2ImageProcessor;P.MobileNetV2Model;P.MobileNetV2PreTrainedModel;P.MobileNetV3FeatureExtractor;P.MobileNetV3ForImageClassification;P.MobileNetV3ForSemanticSegmentation;P.MobileNetV3ImageProcessor;P.MobileNetV3Model;P.MobileNetV3PreTrainedModel;P.MobileNetV4FeatureExtractor;P.MobileNetV4ForImageClassification;P.MobileNetV4ForSemanticSegmentation;P.MobileNetV4ImageProcessor;P.MobileNetV4Model;P.MobileNetV4PreTrainedModel;P.MobileViTFeatureExtractor;P.MobileViTForImageClassification;P.MobileViTImageProcessor;P.MobileViTModel;P.MobileViTPreTrainedModel;P.MobileViTV2ForImageClassification;P.MobileViTV2Model;P.MobileViTV2PreTrainedModel;P.ModelOutput;P.ModernBertDecoderForCausalLM;P.ModernBertDecoderModel;P.ModernBertDecoderPreTrainedModel;P.ModernBertForMaskedLM;P.ModernBertForSequenceClassification;P.ModernBertForTokenClassification;P.ModernBertModel;P.ModernBertPreTrainedModel;P.Moondream1ForConditionalGeneration;P.MoonshineFeatureExtractor;P.MoonshineForConditionalGeneration;P.MoonshineModel;P.MoonshinePreTrainedModel;P.MoonshineProcessor;P.MptForCausalLM;P.MptModel;P.MptPreTrainedModel;P.MultiModalityCausalLM;P.MultiModalityPreTrainedModel;P.MusicgenForCausalLM;P.MusicgenForConditionalGeneration;P.MusicgenModel;P.MusicgenPreTrainedModel;P.NeoBertForMaskedLM;P.NeoBertForQuestionAnswering;P.NeoBertForSequenceClassification;P.NeoBertForTokenClassification;P.NeoBertModel;P.NeoBertPreTrainedModel;P.NllbTokenizer;P.NoBadWordsLogitsProcessor;P.NoRepeatNGramLogitsProcessor;P.NomicBertModel;P.NomicBertPreTrainedModel;P.NougatImageProcessor;P.NougatTokenizer;P.OPTForCausalLM;P.OPTModel;P.OPTPreTrainedModel;P.ObjectDetectionPipeline;P.Olmo2ForCausalLM;P.Olmo2Model;P.Olmo2PreTrainedModel;P.OlmoForCausalLM;P.OlmoModel;P.OlmoPreTrainedModel;P.OpenELMForCausalLM;P.OpenELMModel;P.OpenELMPreTrainedModel;P.OwlViTFeatureExtractor;P.OwlViTForObjectDetection;P.OwlViTImageProcessor;P.OwlViTModel;P.OwlViTPreTrainedModel;P.OwlViTProcessor;P.Owlv2ForObjectDetection;P.Owlv2ImageProcessor;P.Owlv2Model;P.Owlv2PreTrainedModel;P.PaliGemmaForConditionalGeneration;P.PaliGemmaPreTrainedModel;P.PaliGemmaProcessor;P.PatchTSMixerForPrediction;P.PatchTSMixerModel;P.PatchTSMixerPreTrainedModel;P.PatchTSTForPrediction;P.PatchTSTModel;P.PatchTSTPreTrainedModel;P.Phi3ForCausalLM;P.Phi3Model;P.Phi3PreTrainedModel;P.Phi3VForCausalLM;P.Phi3VImageProcessor;P.Phi3VPreTrainedModel;P.Phi3VProcessor;P.PhiForCausalLM;P.PhiModel;P.PhiPreTrainedModel;P.Pipeline;P.PreTrainedModel;P.PreTrainedTokenizer;P.PretrainedConfig;P.PretrainedMixin;P.Processor;P.PvtForImageClassification;P.PvtImageProcessor;P.PvtModel;P.PvtPreTrainedModel;P.PyAnnoteFeatureExtractor;P.PyAnnoteForAudioFrameClassification;P.PyAnnoteModel;P.PyAnnotePreTrainedModel;P.PyAnnoteProcessor;P.QuestionAnsweringModelOutput;P.QuestionAnsweringPipeline;P.Qwen2ForCausalLM;P.Qwen2Model;P.Qwen2PreTrainedModel;P.Qwen2Tokenizer;P.Qwen2VLForConditionalGeneration;P.Qwen2VLImageProcessor;P.Qwen2VLPreTrainedModel;P.Qwen2VLProcessor;P.Qwen3ForCausalLM;P.Qwen3Model;P.Qwen3PreTrainedModel;P.RFDetrForObjectDetection;P.RFDetrModel;P.RFDetrObjectDetectionOutput;P.RFDetrPreTrainedModel;P.RTDetrForObjectDetection;P.RTDetrImageProcessor;P.RTDetrModel;P.RTDetrObjectDetectionOutput;P.RTDetrPreTrainedModel;P.RTDetrV2ForObjectDetection;P.RTDetrV2Model;P.RTDetrV2ObjectDetectionOutput;P.RTDetrV2PreTrainedModel;P.RawAudio;P.RawImage;P.RawVideo;P.RawVideoFrame;P.RepetitionPenaltyLogitsProcessor;P.ResNetForImageClassification;P.ResNetModel;P.ResNetPreTrainedModel;P.RoFormerForMaskedLM;P.RoFormerForQuestionAnswering;P.RoFormerForSequenceClassification;P.RoFormerForTokenClassification;P.RoFormerModel;P.RoFormerPreTrainedModel;P.RoFormerTokenizer;P.RobertaForMaskedLM;P.RobertaForQuestionAnswering;P.RobertaForSequenceClassification;P.RobertaForTokenClassification;P.RobertaModel;P.RobertaPreTrainedModel;P.RobertaTokenizer;P.SamImageProcessor;P.SamImageSegmentationOutput;P.SamModel;P.SamPreTrainedModel;P.SamProcessor;P.SapiensForDepthEstimation;P.SapiensForNormalEstimation;P.SapiensForSemanticSegmentation;P.SapiensPreTrainedModel;P.SeamlessM4TFeatureExtractor;P.SegformerFeatureExtractor;P.SegformerForImageClassification;P.SegformerForSemanticSegmentation;P.SegformerImageProcessor;P.SegformerModel;P.SegformerPreTrainedModel;P.Seq2SeqLMOutput;P.SequenceClassifierOutput;P.SiglipImageProcessor;P.SiglipModel;P.SiglipPreTrainedModel;P.SiglipTextModel;P.SiglipTokenizer;P.SiglipVisionModel;P.SmolLM3ForCausalLM;P.SmolLM3Model;P.SmolLM3PreTrainedModel;P.SmolVLMForConditionalGeneration;P.SmolVLMImageProcessor;P.SmolVLMProcessor;P.SnacDecoderModel;P.SnacEncoderModel;P.SnacFeatureExtractor;P.SnacModel;P.SnacPreTrainedModel;P.SpeechT5FeatureExtractor;P.SpeechT5ForSpeechToText;P.SpeechT5ForTextToSpeech;P.SpeechT5HifiGan;P.SpeechT5Model;P.SpeechT5PreTrainedModel;P.SpeechT5Processor;P.SpeechT5Tokenizer;P.SqueezeBertForMaskedLM;P.SqueezeBertForQuestionAnswering;P.SqueezeBertForSequenceClassification;P.SqueezeBertModel;P.SqueezeBertPreTrainedModel;P.SqueezeBertTokenizer;P.StableLmForCausalLM;P.StableLmModel;P.StableLmPreTrainedModel;P.Starcoder2ForCausalLM;P.Starcoder2Model;P.Starcoder2PreTrainedModel;P.StoppingCriteria;P.StoppingCriteriaList;P.StyleTextToSpeech2Model;P.StyleTextToSpeech2PreTrainedModel;P.SummarizationPipeline;P.SuppressTokensAtBeginLogitsProcessor;P.Swin2SRForImageSuperResolution;P.Swin2SRImageProcessor;P.Swin2SRModel;P.Swin2SRPreTrainedModel;P.SwinForImageClassification;P.SwinForSemanticSegmentation;P.SwinModel;P.SwinPreTrainedModel;P.T5ForConditionalGeneration;P.T5Model;P.T5PreTrainedModel;P.T5Tokenizer;P.TableTransformerForObjectDetection;P.TableTransformerModel;P.TableTransformerObjectDetectionOutput;P.TableTransformerPreTrainedModel;P.TemperatureLogitsWarper;P.Tensor;P.Text2TextGenerationPipeline;P.TextClassificationPipeline;P.TextGenerationPipeline;P.TextStreamer;P.TextToAudioPipeline;P.TokenClassificationPipeline;P.TokenClassifierOutput;P.TokenizerModel;P.TopKLogitsWarper;P.TopPLogitsWarper;P.TrOCRForCausalLM;P.TrOCRPreTrainedModel;P.TranslationPipeline;P.UltravoxModel;P.UltravoxPreTrainedModel;P.UltravoxProcessor;P.UniSpeechForCTC;P.UniSpeechForSequenceClassification;P.UniSpeechModel;P.UniSpeechPreTrainedModel;P.UniSpeechSatForAudioFrameClassification;P.UniSpeechSatForCTC;P.UniSpeechSatForSequenceClassification;P.UniSpeechSatModel;P.UniSpeechSatPreTrainedModel;P.VLChatProcessor;P.VLMImageProcessor;P.ViTFeatureExtractor;P.ViTForImageClassification;P.ViTImageProcessor;P.ViTMAEModel;P.ViTMAEPreTrainedModel;P.ViTMSNForImageClassification;P.ViTMSNModel;P.ViTMSNPreTrainedModel;P.ViTModel;P.ViTPreTrainedModel;P.VisionEncoderDecoderModel;P.VitMatteForImageMatting;P.VitMatteImageProcessor;P.VitMattePreTrainedModel;P.VitPoseForPoseEstimation;P.VitPoseImageProcessor;P.VitPosePreTrainedModel;P.VitsModel;P.VitsModelOutput;P.VitsPreTrainedModel;P.VitsTokenizer;P.VoxtralForConditionalGeneration;P.VoxtralProcessor;P.Wav2Vec2BertForCTC;P.Wav2Vec2BertForSequenceClassification;P.Wav2Vec2BertModel;P.Wav2Vec2BertPreTrainedModel;P.Wav2Vec2CTCTokenizer;P.Wav2Vec2FeatureExtractor;P.Wav2Vec2ForAudioFrameClassification;P.Wav2Vec2ForCTC;P.Wav2Vec2ForSequenceClassification;P.Wav2Vec2Model;P.Wav2Vec2PreTrainedModel;P.Wav2Vec2Processor;P.Wav2Vec2ProcessorWithLM;P.WavLMForAudioFrameClassification;P.WavLMForCTC;P.WavLMForSequenceClassification;P.WavLMForXVector;P.WavLMModel;P.WavLMPreTrainedModel;P.WeSpeakerFeatureExtractor;P.WeSpeakerResNetModel;P.WeSpeakerResNetPreTrainedModel;P.WhisperFeatureExtractor;P.WhisperForConditionalGeneration;P.WhisperModel;P.WhisperPreTrainedModel;P.WhisperProcessor;P.WhisperTextStreamer;P.WhisperTimeStampLogitsProcessor;P.WhisperTokenizer;P.XLMForQuestionAnswering;P.XLMForSequenceClassification;P.XLMForTokenClassification;P.XLMModel;P.XLMPreTrainedModel;P.XLMRobertaForMaskedLM;P.XLMRobertaForQuestionAnswering;P.XLMRobertaForSequenceClassification;P.XLMRobertaForTokenClassification;P.XLMRobertaModel;P.XLMRobertaPreTrainedModel;P.XLMRobertaTokenizer;P.XLMTokenizer;P.XLMWithLMHeadModel;P.XVectorOutput;P.YolosFeatureExtractor;P.YolosForObjectDetection;P.YolosImageProcessor;P.YolosModel;P.YolosObjectDetectionOutput;P.YolosPreTrainedModel;P.ZeroShotAudioClassificationPipeline;P.ZeroShotClassificationPipeline;P.ZeroShotImageClassificationPipeline;P.ZeroShotObjectDetectionPipeline;P.bankers_round;P.cat;P.cos_sim;P.dot;P.dynamic_time_warping;var zoe=P.env;P.full;P.full_like;P.getCacheShapes;P.hamming;P.hanning;P.interpolate;P.interpolate_4d;P.interpolate_data;P.is_chinese_char;P.layer_norm;P.load_image;P.load_video;P.log_softmax;P.magnitude;P.matmul;P.max;P.mean;P.mean_pooling;P.medianFilter;P.mel_filter_bank;P.min;P.ones;P.ones_like;P.permute;P.permute_data;var W7e=P.pipeline;P.quantize_embeddings;P.rand;P.read_audio;P.rfft;P.round;P.slice;P.softmax;P.spectrogram;P.stack;P.std_mean;P.topk;P.window_function;P.zeros;P.zeros_like;zoe.allowLocalModels=!1;zoe.useBrowserCache=!1;const nh=1024;function G7e(e,t,r){let n=r.naturalWidth,i=r.naturalHeight;return n>nh||i>nh?(n>i?(i=Math.round(i*nh/n),n=nh):(n=Math.round(n*nh/i),i=nh),e.width=n,e.height=i,t.drawImage(r,0,0,n,i),!0):(e.width=n,e.height=i,t.drawImage(r,0,0),!1)}const H7e=async e=>{try{console.log("Starting background removal process...");const t=await W7e("image-segmentation","Xenova/segformer-b0-finetuned-ade-512-512",{device:"webgpu"}),r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("Could not get canvas context");const i=G7e(r,n,e);console.log(`Image ${i?"was":"was not"} resized. Final dimensions: ${r.width}x${r.height}`);const s=r.toDataURL("image/jpeg",.8);console.log("Image converted to base64"),console.log("Processing with segmentation model...");const a=await t(s);if(console.log("Segmentation result:",a),!a||!Array.isArray(a)||a.length===0||!a[0].mask)throw new Error("Invalid segmentation result");const o=document.createElement("canvas");o.width=r.width,o.height=r.height;const l=o.getContext("2d");if(!l)throw new Error("Could not get output canvas context");l.drawImage(r,0,0);const c=l.getImageData(0,0,o.width,o.height),f=c.data;for(let d=0;d<a[0].mask.data.length;d++){const h=Math.round((1-a[0].mask.data[d])*255);f[d*4+3]=h}return l.putImageData(c,0,0),console.log("Mask applied successfully"),new Promise((d,h)=>{o.toBlob(p=>{p?(console.log("Successfully created final blob"),d(p)):h(new Error("Failed to create blob"))},"image/png",1)})}catch(t){throw console.error("Error removing background:",t),t}},K7e=e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=r,n.src=URL.createObjectURL(e)}),q7e=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(null),[i,s]=E.useState(null),[a,o]=E.useState(null),l=E.useCallback(async f=>{t(!0),o(null);try{const d=URL.createObjectURL(f);s(d);const h=await K7e(f),p=await H7e(h),m=URL.createObjectURL(p);return n(m),m}catch(d){const h=d instanceof Error?d.message:"Unknown error occurred";return o(h),console.error("Background removal failed:",d),null}finally{t(!1)}},[]),c=E.useCallback(()=>{r&&URL.revokeObjectURL(r),i&&URL.revokeObjectURL(i),n(null),s(null),o(null),t(!1)},[r,i]);return{processImage:l,isProcessing:e,processedImageUrl:r,originalImageUrl:i,error:a,reset:c}},X7e=()=>{const e=E.useRef(null),{processImage:t,isProcessing:r,processedImageUrl:n,originalImageUrl:i,error:s,reset:a}=q7e(),o=async d=>{var p;const h=(p=d.target.files)==null?void 0:p[0];h&&await t(h)},l=()=>{var d;(d=e.current)==null||d.click()},c=()=>{if(n){const d=document.createElement("a");d.href=n,d.download="logo-no-background.png",d.click()}},f=async()=>{if(n)try{const h=await(await fetch(n)).blob();await navigator.clipboard.write([new ClipboardItem({"image/png":h})]),console.log("Image copied to clipboard")}catch(d){console.error("Failed to copy image:",d)}};return u.jsxs(sn,{className:"w-full max-w-2xl mx-auto",children:[u.jsx(Zs,{children:u.jsxs(Js,{className:"flex items-center gap-2",children:[u.jsx(bB,{className:"w-5 h-5"}),"Logo Background Removal"]})}),u.jsxs(an,{className:"space-y-4",children:[u.jsx("input",{ref:e,type:"file",accept:"image/*",onChange:o,className:"hidden"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ln,{onClick:l,disabled:r,children:[u.jsx(bB,{className:"w-4 h-4 mr-2"}),r?"Processing...":"Upload Logo"]}),(i||n)&&u.jsxs(ln,{variant:"outline",onClick:a,children:[u.jsx(The,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),s&&u.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:u.jsx("p",{className:"text-destructive text-sm",children:s})}),(i||n)&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"font-semibold",children:"Original"}),u.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:u.jsx("img",{src:i,alt:"Original logo",className:"w-full h-auto max-h-48 object-contain"})})]}),n&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"font-semibold",children:"Background Removed"}),u.jsx("div",{className:"border rounded-lg p-4 bg-gradient-to-br from-muted/20 to-muted/40",children:u.jsx("img",{src:n,alt:"Processed logo",className:"w-full h-auto max-h-48 object-contain"})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ln,{size:"sm",onClick:c,children:[u.jsx(che,{className:"w-4 h-4 mr-2"}),"Download"]}),u.jsx(ln,{size:"sm",variant:"outline",onClick:f,children:"Copy to Clipboard"})]})]})]}),r&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-r-transparent rounded-full mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Processing your logo..."})]})]})]})},Y7e=()=>u.jsx(bi,{children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Logo Background Removal Tool"}),u.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Upload your logo image and remove the background while keeping all the white elements intact. Perfect for logos with gray or colored backgrounds that need to become transparent."})]}),u.jsx(X7e,{}),u.jsxs("div",{className:"mt-8 max-w-2xl mx-auto",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"How it works:"}),u.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[u.jsx("li",{children:" Upload your logo image with any background color"}),u.jsx("li",{children:" Our AI will analyze the image and identify the background"}),u.jsx("li",{children:" White and colored elements are preserved while the background becomes transparent"}),u.jsx("li",{children:" Download the result as a PNG with transparent background"})]})]})]})}),Q7e=({children:e})=>{const t=$o();return E.useEffect(()=>{window.scrollTo(0,0)},[t]),u.jsxs("div",{className:"min-h-screen bg-transparent w-full max-w-[100vw] overflow-x-hidden",children:[u.jsx(EZ,{}),e,u.jsx(jZ,{})]})},Z7e="service_6r9m8wf",J7e="template_on07od7",eqe="wRFDBmEPD5mCrpb2a",tqe=({isOpen:e,onClose:t})=>{const{cartItems:r,clearCart:n}=mm(),{toast:i}=Oo(),[s,a]=E.useState(!1),[o,l]=E.useState("summary"),[c,f]=E.useState({firstName:"",lastName:"",email:"",phone:"",birthDate:"",address:"",postalCode:"",city:"",promoCode:"",acceptTerms:!1}),d=r.reduce((g,x)=>{const y=parseFloat(x.price.replace(/[^0-9.,]/g,"").replace(",","."));return g+y*x.quantity},0),h=g=>{const{name:x,value:y}=g.target;f(v=>({...v,[x]:y}))},p=g=>{f(x=>({...x,acceptTerms:g}))},m=async g=>{if(g.preventDefault(),!c.acceptTerms){i({title:"Hyvksy ehdot",description:"Sinun tytyy hyvksy ehdot ennen tilauksen tekemist.",variant:"destructive"});return}a(!0);try{const x={customer_email:c.email,customer_first_name:c.firstName,customer_last_name:c.lastName,customer_phone:c.phone,customer_birth_date:c.birthDate,billing_address:c.address,billing_postal_code:c.postalCode,billing_city:c.city,products:r,total_price:d,promo_code:c.promoCode||null},v=await(await fetch("https://fsirlcxhtyppecjjdqbp.supabase.co/functions/v1/save-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzaXJsY3hodHlwcGVjampkcWJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2OTk0NTgsImV4cCI6MjA2OTI3NTQ1OH0.7HZENU4G4fRpemRp44Xj6cGIobhDaxqbJEa7U4gVHVU"},body:JSON.stringify({orderData:x})})).json();if(v.success){const _=`${window.location.origin}/vahvista-tilaus/${v.confirmation_token}`,b={subject:"Tervetuloa OmaVerkkoturva-palveluun!",from_name:"OmaVerkkoturva",to_name:`${c.firstName} ${c.lastName}`,to_email:c.email,message:` UUSI TILAUS VASTAANOTETTU!

 ASIAKASTIEDOT:
Nimi: ${c.firstName} ${c.lastName}
Shkposti: ${c.email}
Puhelin: ${c.phone}
Syntymaika: ${c.birthDate}

 LASKUTUSTIEDOT:
Osoite: ${c.address}
Postinumero: ${c.postalCode}
Postitoimipaikka: ${c.city}
${c.promoCode?`Tarjouskoodi: ${c.promoCode}`:""}

 TILATUT TUOTTEET:
${r.map(w=>` ${w.title} - ${w.price} (mr: ${w.quantity})`).join(`
`)}

 YHTEENSA: ${d.toFixed(2).replace(".",",")} /kk

 Tilausaika: ${new Date().toLocaleString("fi-FI")}

 Asiakas on hyvksynyt sopimusehdot ja tietosuojaselosteen

---

Ennen aktivointia, vahvistathan tilauksesi klikkaamalla alla olevaa painiketta:

${_}

---
Tm viesti on lhetetty automaattisesti OmaVerkkoturva-tilausjrjestelmst`,reply_to:"tuki@omaverkkoturva.fi"};await ZN.send(Z7e,J7e,b,eqe),i({title:"Tilaus vastaanotettu!",description:"Tilauksesi on tallennettu ja vahvistusviesti lhetetty shkpostiin."}),n(),t(),l("summary")}else throw new Error(v.error||"Tilauksen tallentaminen eponnistui")}catch(x){console.error("Error submitting order:",x),i({title:"Virhe tilauksen ksittelyss",description:"Yrit uudelleen tai ota yhteytt asiakaspalveluun.",variant:"destructive"})}finally{a(!1)}};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tee tilaus"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-2",children:u.jsx(xp,{className:"h-6 w-6"})})]}),u.jsx("div",{className:"p-6",children:o==="summary"?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Tilausyhteenveto"}),u.jsx("p",{className:"text-gray-600",children:"Tarkista tilatut tuotteet ja hinta ennen tietojen tyttmist"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Tilatut tuotteet:"}),u.jsx("div",{className:"space-y-3",children:r.map(g=>u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:g.title}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Mr: ",g.quantity]})]}),u.jsx("p",{className:"font-bold text-blue-900",children:g.price})]},g.id))}),u.jsx("div",{className:"pt-3 border-t-2 border-gray-300 mt-4",children:u.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[u.jsx("span",{children:"Kuukausittainen hinta:"}),u.jsxs("span",{className:"text-blue-900",children:[d.toFixed(2).replace(".",",")," /kk"]})]})})]}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-gray-700 leading-relaxed",children:[u.jsx("p",{children:"Lhettmll tmn tilauksen sitoudut Omaverkkoturva-palvelun jatkuvaan tilaukseen, josta veloitetaan snnllisesti (ilmaiskokeilut, jotka eivt vaadi sitoutumista, poikkeavat tst). Tilauksen kuukausittainen hinta nkyy tilauksen yhteenvedossa. Tilaus on voimassa toistaiseksi, ja sen voi irtisanoa aikaisintaan kuluvan kuukauden lopussa. Tilatuilla palveluilla on 14 pivn perumisoikeus."}),u.jsx("br",{}),u.jsx("p",{children:"Palvelun kytt edellytt, ett kuukausimaksu on suoritettu, ja Omaverkkoturva pidtt oikeuden keskeytt tilaus, mikli maksua ei ole vastaanotettu. Lhettmll tilauksen hyvksyt mys Omaverkkoturva:n yleiset sopimusehdot ja palvelukohtaiset kyttehdot, jotka lytyvt verkkosivuiltamme ja toimitetaan tilausvahvistuksen yhteydess ilmoitettuun shkpostiosoitteeseen."}),u.jsx("br",{}),u.jsx("p",{children:"Omaverkkoturva voi kytt asiakkaan henkiltietoja ja tunnistamistietoja mys omaan suoramarkkinointiinsa."})]}),u.jsx(ln,{onClick:()=>l("form"),className:"w-full py-3 text-lg",children:"Jatka tietojen tyttmiseen"})]}):u.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Tyt tilaustiedot"}),u.jsx("p",{className:"text-gray-600",children:"Tyt kaikki pakolliset kentt (*)"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx(H1,{className:"h-5 w-5"}),"Henkiltiedot"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"firstName",children:"Etunimi *"}),u.jsx(wr,{id:"firstName",name:"firstName",placeholder:"Etunimi",value:c.firstName,onChange:h,required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"lastName",children:"Sukunimi *"}),u.jsx(wr,{id:"lastName",name:"lastName",placeholder:"Sukunimi",value:c.lastName,onChange:h,required:!0})]})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"email",children:"Shkpostiosoite *"}),u.jsx(wr,{id:"email",name:"email",type:"email",placeholder:"Shkpostiosoite",value:c.email,onChange:h,required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"phone",children:"Puhelinnumero *"}),u.jsx(wr,{id:"phone",name:"phone",type:"tel",placeholder:"Puhelinnumero",value:c.phone,onChange:h,required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"birthDate",children:"Syntymaika *"}),u.jsx(wr,{id:"birthDate",name:"birthDate",type:"date",placeholder:"01.01.1999",value:c.birthDate,onChange:h,required:!0})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx(G1,{className:"h-5 w-5"}),"Laskutustiedot"]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"address",children:"Laskutusosoite *"}),u.jsx(wr,{id:"address",name:"address",placeholder:"Esimerkkikatu 1",value:c.address,onChange:h,required:!0})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"postalCode",children:"Postinumero *"}),u.jsx(wr,{id:"postalCode",name:"postalCode",placeholder:"40100",value:c.postalCode,onChange:h,required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"city",children:"Postitoimipaikka *"}),u.jsx(wr,{id:"city",name:"city",placeholder:"JYVSKYL",value:c.city,onChange:h,required:!0})]})]})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"promoCode",children:"Tarjouskoodi"}),u.jsx(wr,{id:"promoCode",name:"promoCode",placeholder:"Kirjoita koodi thn",value:c.promoCode,onChange:h})]}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(_m,{id:"acceptTerms",checked:c.acceptTerms,onCheckedChange:p,className:"mt-1"}),u.jsx(Ur,{htmlFor:"acceptTerms",className:"text-sm leading-relaxed",children:"Lhettmll tmn lomakkeen vakuutan, ett antamani tiedot ovat oikein. Lisksi hyvksyn henkiltietojeni ksittelyn OmaVerkkoturvan tietosuojaselosteen mukaisesti."})]})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx(ln,{type:"button",variant:"outline",onClick:()=>l("summary"),className:"flex-1",children:"Takaisin yhteenvetoon"}),u.jsx(ln,{type:"submit",className:"flex-1",disabled:s,children:s?"Ksitelln...":"Tee tilaus"})]})]})})]})}):null},rqe=()=>{const{cartItems:e,updateQuantity:t,removeFromCart:r}=mm(),[n,i]=E.useState(!1),[s,a]=E.useState(!1),o=e.reduce((c,f)=>c+f.quantity,0),l=e.reduce((c,f)=>{const d=parseFloat(f.price.replace(/[^0-9.,]/g,"").replace(",","."));return c+d*f.quantity},0);return u.jsxs("div",{className:"fixed top-20 right-4 z-50",children:[u.jsx("div",{className:"relative",children:u.jsxs("button",{onClick:()=>i(!n),className:"bg-blue-900 text-white p-3 rounded-full shadow-lg hover:bg-blue-800 transition-colors relative",children:[u.jsx(Xl,{className:"w-6 h-6"}),o>0&&u.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:o})]})}),n&&u.jsxs("div",{className:"absolute top-16 right-0 bg-white rounded-2xl shadow-2xl border border-gray-200 p-4 w-80 max-h-96 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Ostoskori"}),u.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:u.jsx(xp,{className:"w-5 h-5"})})]}),o===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("p",{className:"text-gray-500",children:"Ostoskori on tyhj"}),u.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Lis tuotteita ostoskoriin"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-3 mb-4",children:e.map(c=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:c.title}),u.jsx("p",{className:"font-bold text-blue-900 text-sm",children:c.price})]}),u.jsx("button",{onClick:()=>r(c.id),className:"text-red-500 hover:text-red-700 p-1",title:"Poista tuote",children:u.jsx(xp,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-gray-600",children:"Mr:"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>t(c.id,c.quantity-1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-100 text-gray-600",children:u.jsx(yhe,{className:"w-3 h-3"})}),u.jsx("span",{className:"w-6 text-center font-semibold text-sm",children:c.quantity}),u.jsx("button",{onClick:()=>t(c.id,c.quantity+1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-100 text-gray-600",children:u.jsx(whe,{className:"w-3 h-3"})})]})]})]},c.id))}),u.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[u.jsxs("div",{className:"flex justify-between items-center text-lg font-bold mb-3",children:[u.jsx("span",{className:"text-gray-900",children:"Yhteens:"}),u.jsxs("span",{className:"text-blue-900",children:[l.toFixed(2).replace(".",",")," /kk"]})]}),u.jsx("button",{className:"w-full bg-blue-900 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-800 transition-colors text-sm",onClick:()=>{a(!0),i(!1)},children:"Jatka tilausta"})]})]})]}),u.jsx(tqe,{isOpen:s,onClose:()=>a(!1)})]})},nqe=()=>{const{addToCart:e}=mm(),t=[{title:"Henkilsuoja Yhdelle",price:"21,99 /kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista","Vakuutus, joka turvaa sinut vahinkojen varalta","Apu ja tuki"]},{title:"Henkilsuoja Tupla",price:"28,99 /kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek lheisellesi","Vakuutus, joka turvaa sinut ja lheisesi vahinkojen varalta","Apu ja tuki","Sislt 2 lisenssi"]},{title:"Henkilsuoja Perhe",price:"32,99 /kk",features:["Tietojen monitorointi ja ilmoitus tietovuodoista sinulle sek koko perheellesi","Vakuutus, joka turvaa sinut ja koko perheesi vahinkojen varalta","Apu ja tuki","Sislt 5 lisenssi"]}],r={title:"Henkilsuoja - Ilmainen kokeilujakso 30pv",price:"0"};return u.jsxs(Q7e,{children:[u.jsx(xf,{title:"Verkkokauppa - Identiteettiturva paketit",description:"Valitse sinulle sopiva identiteettiturva paketti. Suojaa itsesi ja lheisesi verkkorikollisuudelta."}),u.jsxs("div",{className:"min-h-screen bg-background pt-44 pb-12",children:[u.jsx(rqe,{}),u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground leading-tight mb-4",children:"Valitse sinulle sopivin turva"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-2",children:"Valitse parhaiten sopiva suojaus."}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Jokaisessa tilauksessa on 14vrk maksuton peruutusoikeus."})]}),u.jsx("div",{className:"mb-16 flex justify-center",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center hover:shadow-xl transition-shadow",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:r.title}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:r.price}),u.jsx("button",{onClick:()=>e(r),className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Aloita ilmainen kokeilu"})]})})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:t.map((n,i)=>u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:n.title}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:n.price})]}),u.jsx("ul",{className:"space-y-3 mb-8 text-left",children:n.features.map((s,a)=>u.jsx("li",{className:"flex items-start",children:u.jsxs("span",{className:"text-gray-700",children:[" ",s]})},a))}),u.jsx("button",{onClick:()=>e(n),className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Valitse paketti"})]},i))})]})]})]})},iqe=()=>{const{user:e,loading:t,signOut:r,isAdmin:n}=ya(),{cartItems:i,updateQuantity:s,removeFromCart:a,clearCart:o,addToCart:l}=mm(),c=js(),{toast:f}=Oo(),[d,h]=E.useState(!1),[p,m]=E.useState(!1);if(t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!e)return u.jsx(fm,{to:"/",replace:!0});const g=async()=>{await r()},x=()=>{h(!1),m(!0)},y=_=>{console.log("Order submitted:",_),m(!1),o(),f({title:"Tilaus lhetetty!",description:"Kiitos tilauksestasi. Saat pian vahvistuksen shkpostiin."})},v=[{title:"Henkilsuoja Yhdelle",price:"19,99 /kk"},{title:"Henkilsuoja Tupla",price:"26,99 /kk"},{title:"Henkilsuoja Perhe",price:"30,99 /kk"}];return u.jsxs(u.Fragment,{children:[u.jsx(xf,{title:"Portaalin Verkkokauppa - Identiteettiturva paketit",description:"Valitse sinulle sopiva identiteettiturva paketti. Suojaa itsesi ja lheisesi verkkorikollisuudelta."}),u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>c("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>c("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>c("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),n&&u.jsxs("button",{onClick:()=>c("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:g,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-16",children:[u.jsx("div",{className:"text-center flex-1",children:u.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-800 leading-tight mb-4",children:"Valitse tst sopiva turva"})}),u.jsxs("button",{onClick:()=>h(!0),className:"relative p-3 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors flex items-center space-x-2",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{children:"Ostoskori"}),i.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i.length})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:v.map((_,b)=>u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-200 p-8 shadow-lg text-center hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:_.title}),u.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-6",children:_.price})]}),u.jsx("button",{onClick:()=>l(_),className:"w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-800 transition-colors",children:"Valitse paketti"})]},b))})]})})]}),d&&u.jsx(CZ,{items:i,onContinueOrder:x,onClose:()=>h(!1),onUpdateQuantity:s,onRemoveItem:a}),p&&u.jsx(RZ,{onClose:()=>m(!1),onSubmit:y})]})},sqe=v_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Kd({className:e,variant:t,...r}){return u.jsx("div",{className:St(sqe({variant:t}),e),...r})}var NI="Dialog",[Voe,_Xe]=vf(NI),[aqe,Do]=Voe(NI),Uoe=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=E.useRef(null),l=E.useRef(null),[c=!1,f]=ql({prop:n,defaultProp:i,onChange:s});return u.jsx(aqe,{scope:t,triggerRef:o,contentRef:l,contentId:tl(),titleId:tl(),descriptionId:tl(),open:c,onOpenChange:f,onOpenToggle:E.useCallback(()=>f(d=>!d),[f]),modal:a,children:r})};Uoe.displayName=NI;var Woe="DialogTrigger",Goe=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Do(Woe,r),s=Nr(t,i.triggerRef);return u.jsx(Ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":LI(i.open),...n,ref:s,onClick:xt(e.onClick,i.onOpenToggle)})});Goe.displayName=Woe;var II="DialogPortal",[oqe,Hoe]=Voe(II,{forceMount:void 0}),Koe=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=Do(II,t);return u.jsx(oqe,{scope:t,forceMount:r,children:E.Children.map(n,a=>u.jsx(Ua,{present:r||s.open,children:u.jsx(B1,{asChild:!0,container:i,children:a})}))})};Koe.displayName=II;var k1="DialogOverlay",qoe=E.forwardRef((e,t)=>{const r=Hoe(k1,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Do(k1,e.__scopeDialog);return s.modal?u.jsx(Ua,{present:n||s.open,children:u.jsx(lqe,{...i,ref:t})}):null});qoe.displayName=k1;var lqe=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Do(k1,r);return u.jsx(eI,{as:uu,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(Ft.div,{"data-state":LI(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),hf="DialogContent",Xoe=E.forwardRef((e,t)=>{const r=Hoe(hf,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=Do(hf,e.__scopeDialog);return u.jsx(Ua,{present:n||s.open,children:s.modal?u.jsx(cqe,{...i,ref:t}):u.jsx(uqe,{...i,ref:t})})});Xoe.displayName=hf;var cqe=E.forwardRef((e,t)=>{const r=Do(hf,e.__scopeDialog),n=E.useRef(null),i=Nr(t,r.contentRef,n);return E.useEffect(()=>{const s=n.current;if(s)return one(s)},[]),u.jsx(Yoe,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xt(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xt(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:xt(e.onFocusOutside,s=>s.preventDefault())})}),uqe=E.forwardRef((e,t)=>{const r=Do(hf,e.__scopeDialog),n=E.useRef(!1),i=E.useRef(!1);return u.jsx(Yoe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=r.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Yoe=E.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=Do(hf,r),l=E.useRef(null),c=Nr(t,l);return ine(),u.jsxs(u.Fragment,{children:[u.jsx(JN,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:u.jsx(am,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":LI(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(dqe,{titleId:o.titleId}),u.jsx(hqe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),DI="DialogTitle",Qoe=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Do(DI,r);return u.jsx(Ft.h2,{id:i.titleId,...n,ref:t})});Qoe.displayName=DI;var Zoe="DialogDescription",Joe=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Do(Zoe,r);return u.jsx(Ft.p,{id:i.descriptionId,...n,ref:t})});Joe.displayName=Zoe;var ele="DialogClose",tle=E.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Do(ele,r);return u.jsx(Ft.button,{type:"button",...n,ref:t,onClick:xt(e.onClick,()=>i.onOpenChange(!1))})});tle.displayName=ele;function LI(e){return e?"open":"closed"}var rle="DialogTitleWarning",[xXe,nle]=pfe(rle,{contentName:hf,titleName:DI,docsSlug:"dialog"}),dqe=({titleId:e})=>{const t=nle(rle),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return E.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},fqe="DialogDescriptionWarning",hqe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nle(fqe).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},pqe=Uoe,mqe=Goe,gqe=Koe,ile=qoe,sle=Xoe,ale=Qoe,ole=Joe,vqe=tle;const yqe=pqe,_qe=mqe,xqe=gqe,lle=E.forwardRef(({className:e,...t},r)=>u.jsx(ile,{ref:r,className:St("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lle.displayName=ile.displayName;const cle=E.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(xqe,{children:[u.jsx(lle,{}),u.jsxs(sle,{ref:n,className:St("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,u.jsxs(vqe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(xp,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cle.displayName=sle.displayName;const ule=({className:e,...t})=>u.jsx("div",{className:St("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ule.displayName="DialogHeader";const dle=E.forwardRef(({className:e,...t},r)=>u.jsx(ale,{ref:r,className:St("text-lg font-semibold leading-none tracking-tight",e),...t}));dle.displayName=ale.displayName;const bqe=E.forwardRef(({className:e,...t},r)=>u.jsx(ole,{ref:r,className:St("text-sm text-muted-foreground",e),...t}));bqe.displayName=ole.displayName;const fle=E.forwardRef(({className:e,...t},r)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:r,className:St("w-full caption-bottom text-sm",e),...t})}));fle.displayName="Table";const hle=E.forwardRef(({className:e,...t},r)=>u.jsx("thead",{ref:r,className:St("[&_tr]:border-b",e),...t}));hle.displayName="TableHeader";const ple=E.forwardRef(({className:e,...t},r)=>u.jsx("tbody",{ref:r,className:St("[&_tr:last-child]:border-0",e),...t}));ple.displayName="TableBody";const wqe=E.forwardRef(({className:e,...t},r)=>u.jsx("tfoot",{ref:r,className:St("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));wqe.displayName="TableFooter";const PA=E.forwardRef(({className:e,...t},r)=>u.jsx("tr",{ref:r,className:St("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));PA.displayName="TableRow";const dh=E.forwardRef(({className:e,...t},r)=>u.jsx("th",{ref:r,className:St("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));dh.displayName="TableHead";const fh=E.forwardRef(({className:e,...t},r)=>u.jsx("td",{ref:r,className:St("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));fh.displayName="TableCell";const kqe=E.forwardRef(({className:e,...t},r)=>u.jsx("caption",{ref:r,className:St("mt-4 text-sm text-muted-foreground",e),...t}));kqe.displayName="TableCaption";function Tqe(e,t=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[e][l])||o,x=E.useMemo(()=>m,Object.values(m));return u.jsx(g.Provider,{value:x,children:p})}function f(d,h){const p=(h==null?void 0:h[e][l])||o,m=E.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,f]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return E.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,Mqe(i,...t)]}function Mqe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var CE="rovingFocusGroup.onEntryFocus",Sqe={bubbles:!1,cancelable:!0},_T="RovingFocusGroup",[EA,mle,Pqe]=m_(_T),[Eqe,gle]=Tqe(_T,[Pqe]),[jqe,Cqe]=Eqe(_T),vle=E.forwardRef((e,t)=>u.jsx(EA.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(EA.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Aqe,{...e,ref:t})})}));vle.displayName=_T;var Aqe=E.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...d}=e,h=E.useRef(null),p=Nr(t,h),m=hk(s),[g=null,x]=ql({prop:a,defaultProp:o,onChange:l}),[y,v]=E.useState(!1),_=Qn(c),b=mle(r),w=E.useRef(!1),[k,T]=E.useState(0);return E.useEffect(()=>{const M=h.current;if(M)return M.addEventListener(CE,_),()=>M.removeEventListener(CE,_)},[_]),u.jsx(jqe,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:g,onItemFocus:E.useCallback(M=>x(M),[x]),onItemShiftTab:E.useCallback(()=>v(!0),[]),onFocusableItemAdd:E.useCallback(()=>T(M=>M+1),[]),onFocusableItemRemove:E.useCallback(()=>T(M=>M-1),[]),children:u.jsx(Ft.div,{tabIndex:y||k===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:xt(e.onMouseDown,()=>{w.current=!0}),onFocus:xt(e.onFocus,M=>{const j=!w.current;if(M.target===M.currentTarget&&j&&!y){const C=new CustomEvent(CE,Sqe);if(M.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=b().filter(G=>G.focusable),I=R.find(G=>G.active),N=R.find(G=>G.id===g),V=[I,N,...R].filter(Boolean).map(G=>G.ref.current);xle(V,f)}}w.current=!1}),onBlur:xt(e.onBlur,()=>v(!1))})})}),yle="RovingFocusGroupItem",_le=E.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,...a}=e,o=tl(),l=s||o,c=Cqe(yle,r),f=c.currentTabStopId===l,d=mle(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return E.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),u.jsx(EA.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:u.jsx(Ft.span,{tabIndex:f?0:-1,"data-orientation":c.orientation,...a,ref:t,onMouseDown:xt(e.onMouseDown,m=>{n?c.onItemFocus(l):m.preventDefault()}),onFocus:xt(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:xt(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=Nqe(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let y=d().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const v=y.indexOf(m.currentTarget);y=c.loop?Iqe(y,v+1):y.slice(v+1)}setTimeout(()=>xle(y))}})})})});_le.displayName=yle;var Oqe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $qe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Nqe(e,t,r){const n=$qe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Oqe[n]}function xle(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Iqe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Dqe=vle,Lqe=_le,RI="Tabs",[Rqe,bXe]=vf(RI,[gle]),ble=gle(),[Fqe,FI]=Rqe(RI),wle=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,f=hk(o),[d,h]=ql({prop:n,onChange:i,defaultProp:s});return u.jsx(Fqe,{scope:r,baseId:tl(),value:d,onValueChange:h,orientation:a,dir:f,activationMode:l,children:u.jsx(Ft.div,{dir:f,"data-orientation":a,...c,ref:t})})});wle.displayName=RI;var kle="TabsList",Tle=E.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=FI(kle,r),a=ble(r);return u.jsx(Dqe,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:u.jsx(Ft.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});Tle.displayName=kle;var Mle="TabsTrigger",Sle=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,a=FI(Mle,r),o=ble(r),l=jle(a.baseId,n),c=Cle(a.baseId,n),f=n===a.value;return u.jsx(Lqe,{asChild:!0,...o,focusable:!i,active:f,children:u.jsx(Ft.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:xt(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(n):d.preventDefault()}),onKeyDown:xt(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(n)}),onFocus:xt(e.onFocus,()=>{const d=a.activationMode!=="manual";!f&&!i&&d&&a.onValueChange(n)})})})});Sle.displayName=Mle;var Ple="TabsContent",Ele=E.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=e,o=FI(Ple,r),l=jle(o.baseId,n),c=Cle(o.baseId,n),f=n===o.value,d=E.useRef(f);return E.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),u.jsx(Ua,{present:i||f,children:({present:h})=>u.jsx(Ft.div,{"data-state":f?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Ele.displayName=Ple;function jle(e,t){return`${e}-trigger-${t}`}function Cle(e,t){return`${e}-content-${t}`}var Bqe=wle,Ale=Tle,Ole=Sle,$le=Ele;const V9=Bqe,jA=E.forwardRef(({className:e,...t},r)=>u.jsx(Ale,{ref:r,className:St("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));jA.displayName=Ale.displayName;const hh=E.forwardRef(({className:e,...t},r)=>u.jsx(Ole,{ref:r,className:St("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));hh.displayName=Ole.displayName;const ph=E.forwardRef(({className:e,...t},r)=>u.jsx($le,{ref:r,className:St("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ph.displayName=$le.displayName;const zqe=()=>{const{user:e,isAdmin:t,signOut:r}=ya(),n=js(),[i,s]=E.useState([]),[a,o]=E.useState([]),[l,c]=E.useState({}),[f,d]=E.useState(!0),[h,p]=E.useState(!1),[m,g]=E.useState(!1),[x,y]=E.useState(""),{toast:v}=Oo();E.useEffect(()=>{if(!t)return;_(),b();const O=Mn.channel("admin-order-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"order_confirmations"},()=>{b(),v({title:"Tilaus vahvistettu",description:"Asiakas on vahvistanut tilauksen."})}).subscribe();return()=>{Mn.removeChannel(O)}},[v,t]);const _=async()=>{try{const{data:O,error:q}=await Mn.from("profiles").select("*").order("created_at",{ascending:!1});if(q)throw q;const ee=await Promise.all((O||[]).map(async B=>{const{data:D}=await Mn.from("user_roles").select("role").eq("user_id",B.user_id).single();return{...B,role:(D==null?void 0:D.role)||"user"}}));s(ee)}catch(O){console.error("Error fetching profiles:",O),v({title:"Virhe",description:"Kyttjien lataaminen eponnistui.",variant:"destructive"})}finally{d(!1)}},b=async()=>{try{const{data:O,error:q}=await Mn.from("orders").select(`
          *,
          order_items (
            package_title,
            quantity,
            package_price
          ),
          profiles (
            first_name,
            last_name,
            email
          ),
          order_confirmations (
            confirmed_at,
            ip_address,
            user_agent,
            created_at
          )
        `).order("created_at",{ascending:!1});if(q)throw console.error("Supabase error:",q),q;console.log("Fetched orders data:",O),o(O||[])}catch(O){console.error("Error fetching orders:",O),v({title:"Virhe",description:"Tilausten lataaminen eponnistui.",variant:"destructive"})}},w=async O=>{O.preventDefault();const q=O.target,ee=new FormData(q),B=ee.get("email"),D=ee.get("password"),K=ee.get("firstName"),oe=ee.get("lastName"),_e=ee.get("role")||"user";p(!0);try{const{data:{session:ue}}=await Mn.auth.getSession();if(!ue)throw new Error("No active session");const{data:ye,error:$e}=await Mn.functions.invoke("admin-users",{body:{action:"create",payload:{email:B,password:D,first_name:K,last_name:oe,role:_e}},headers:{Authorization:`Bearer ${ue.access_token}`,"x-access-token":ue.access_token}});if($e||!(ye!=null&&ye.success))throw new Error((ye==null?void 0:ye.error)||($e==null?void 0:$e.message)||"Kyttjn luonti eponnistui");v({title:"Kyttj luotu",description:`Kyttj ${B} luotiin onnistuneesti.`}),g(!1),q.reset(),await _()}catch(ue){console.error("Error creating user:",ue),v({title:"Virhe",description:ue instanceof Error?ue.message:"Kyttjn luominen eponnistui.",variant:"destructive"})}finally{p(!1)}},k=async O=>{try{const{data:{session:q}}=await Mn.auth.getSession();if(!q)throw new Error("No active session");const{data:ee,error:B}=await Mn.functions.invoke("admin-users",{body:{action:"delete",payload:{user_id:O}},headers:{Authorization:`Bearer ${q.access_token}`,"x-access-token":q.access_token}});if(B||!(ee!=null&&ee.success))throw new Error((ee==null?void 0:ee.error)||(B==null?void 0:B.message)||"Kyttjn poistaminen eponnistui");v({title:"Kyttj poistettu"}),await _()}catch(q){console.error("Error deleting user:",q),v({title:"Virhe",description:q instanceof Error?q.message:"Kyttjn poistaminen eponnistui.",variant:"destructive"})}},T=i.filter(O=>O.role==="admin").length,M=i.filter(O=>O.role==="user").length,j=a.filter(O=>!O.confirmed_at).length,C=a.filter(O=>O.confirmed_at).length,R=a.reduce((O,q)=>{var ee;return O+(((ee=q.order_confirmations)==null?void 0:ee.length)||0)},0),I=O=>O.confirmed_at?u.jsx(ns,{className:"h-4 w-4 text-green-600"}):u.jsx(Vd,{className:"h-4 w-4 text-yellow-600"}),N=O=>O.confirmed_at?"Vahvistettu":"Odottaa vahvistusta",z=O=>O.confirmed_at?"default":"secondary",V=O=>{c(q=>({...q,[O]:!q[O]}))},G=a.filter(O=>{var ee,B,D,K,oe,_e,ue,ye,$e,Se;if(!x)return!0;const q=x.toLowerCase();return!!((ee=O.order_number)!=null&&ee.toLowerCase().includes(q)||O.id.toLowerCase().includes(q)||(B=O.customer_name)!=null&&B.toLowerCase().includes(q)||(D=O.customer_email)!=null&&D.toLowerCase().includes(q)||(K=O.customer_phone)!=null&&K.toLowerCase().includes(q)||(_e=(oe=O.profiles)==null?void 0:oe.first_name)!=null&&_e.toLowerCase().includes(q)||(ye=(ue=O.profiles)==null?void 0:ue.last_name)!=null&&ye.toLowerCase().includes(q)||(Se=($e=O.profiles)==null?void 0:$e.email)!=null&&Se.toLowerCase().includes(q))}),H=i.filter(O=>{var ee,B;if(!x)return!0;const q=x.toLowerCase();return!!((ee=O.first_name)!=null&&ee.toLowerCase().includes(q)||(B=O.last_name)!=null&&B.toLowerCase().includes(q)||O.email.toLowerCase().includes(q))});return t?f?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>n("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>n("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>n("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),u.jsxs("button",{onClick:()=>n("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:async()=>{await r()},className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[u.jsx(ca,{className:"h-6 w-6"}),u.jsx("h1",{className:"text-3xl font-bold",children:"Admin Portaali"})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-6 mb-8",children:[u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Kyttji yhteens"}),u.jsx(Ub,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:i.length})})]}),u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Jrjestelmnvalvojia"}),u.jsx(ca,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:T})})]}),u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Tavallisia kyttji"}),u.jsx(Ub,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:M})})]}),u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Odottavia tilauksia"}),u.jsx(Vd,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:j})})]}),u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Vahvistettuja tilauksia"}),u.jsx(el,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:C})})]}),u.jsxs(sn,{children:[u.jsxs(Zs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Js,{className:"text-sm font-medium",children:"Vahvistustapahtumia"}),u.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(an,{children:u.jsx("div",{className:"text-2xl font-bold",children:R})})]})]}),u.jsxs(V9,{defaultValue:"users",className:"space-y-4",children:[u.jsxs(jA,{children:[u.jsx(hh,{value:"users",children:"Kyttjt"}),u.jsx(hh,{value:"orders",children:"Tilaukset"}),u.jsx(hh,{value:"confirmations",children:"Vahvistuslogi"})]}),u.jsx(ph,{value:"users",children:u.jsxs(sn,{children:[u.jsx(Zs,{children:u.jsxs(Js,{className:"flex items-center justify-between",children:["Kyttjien hallinta",u.jsxs(yqe,{open:m,onOpenChange:g,children:[u.jsx(_qe,{asChild:!0,children:u.jsxs(ln,{children:[u.jsx(jhe,{className:"w-4 h-4 mr-2"}),"Luo uusi kyttj"]})}),u.jsxs(cle,{children:[u.jsx(ule,{children:u.jsx(dle,{children:"Luo uusi kyttj"})}),u.jsxs("form",{onSubmit:w,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"firstName",children:"Etunimi"}),u.jsx(wr,{id:"firstName",name:"firstName"})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"lastName",children:"Sukunimi"}),u.jsx(wr,{id:"lastName",name:"lastName"})]})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"email",children:"Shkposti"}),u.jsx(wr,{id:"email",name:"email",type:"email",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"password",children:"Salasana"}),u.jsx(wr,{id:"password",name:"password",type:"password",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"role",children:"Rooli"}),u.jsxs("select",{id:"role",name:"role",defaultValue:"user",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:[u.jsx("option",{value:"user",children:"Kyttj"}),u.jsx("option",{value:"admin",children:"Admin"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(ln,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Peruuta"}),u.jsx(ln,{type:"submit",disabled:h,children:h?"Luodaan...":"Luo kyttj"})]})]})]})]})]})}),u.jsxs(an,{children:[u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(wr,{placeholder:"Hae kyttji nimell tai shkpostilla...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})}),u.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm",children:[u.jsx("div",{className:"min-w-[800px] p-1",children:u.jsxs(fle,{children:[u.jsx(hle,{children:u.jsxs(PA,{children:[u.jsx(dh,{className:"w-[200px]",children:"Nimi"}),u.jsx(dh,{className:"w-[200px]",children:"Shkposti"}),u.jsx(dh,{className:"w-[120px]",children:"Rooli"}),u.jsx(dh,{className:"w-[120px]",children:"Luotu"}),u.jsx(dh,{className:"w-[100px]",children:"Toiminnot"})]})}),u.jsx(ple,{children:H.map(O=>u.jsxs(PA,{children:[u.jsx(fh,{className:"font-medium",children:O.first_name&&O.last_name?`${O.first_name} ${O.last_name}`:O.email}),u.jsx(fh,{children:O.email}),u.jsx(fh,{children:u.jsx(Kd,{variant:O.role==="admin"?"default":"secondary",children:O.role==="admin"?"Admin":"Kyttj"})}),u.jsx(fh,{children:new Date(O.created_at).toLocaleDateString("fi-FI")}),u.jsx(fh,{children:u.jsx(ln,{variant:"destructive",size:"sm",onClick:()=>k(O.user_id),children:"Poista"})})]},O.id))})]})}),H.length===0&&x&&u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-muted-foreground",children:"Ei hakutuloksia kyttjille."})})]})]})]})}),u.jsx(ph,{value:"orders",children:u.jsxs(sn,{children:[u.jsx(Zs,{children:u.jsxs(Js,{className:"flex items-center gap-2",children:[u.jsx(el,{className:"h-5 w-5"}),"Tilausten hallinta"]})}),u.jsx(an,{children:u.jsxs(V9,{defaultValue:"pending",className:"w-full",children:[u.jsxs(jA,{className:"grid w-full grid-cols-2",children:[u.jsxs(hh,{value:"pending",className:"flex items-center gap-2",children:[u.jsx(Vd,{className:"h-4 w-4"}),"Vahvistamattomat (",G.filter(O=>O.status==="pending").length,")"]}),u.jsxs(hh,{value:"confirmed",className:"flex items-center gap-2",children:[u.jsx(ns,{className:"h-4 w-4"}),"Vahvistetut (",G.filter(O=>O.status==="confirmed").length,")"]})]}),u.jsx("div",{className:"mt-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(wr,{placeholder:"Hae tilausnumerolla, asiakastiedoilla tai myyjn tiedoilla...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})}),u.jsxs("div",{className:"mt-4 text-sm text-muted-foreground bg-blue-50 p-3 rounded-lg border border-blue-200",children:[" ",u.jsx("strong",{children:"Klikkaa tilauksesta"})," nhdksesi kaikki asiakastiedot ja laskutustiedot"]}),u.jsx(ph,{value:"pending",className:"mt-6",children:G.filter(O=>O.status==="pending").length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-muted-foreground",children:x?"Ei hakutuloksia vahvistamattomille tilauksille.":"Ei vahvistamattomia tilauksia."})}):u.jsx("div",{className:"space-y-3",children:G.filter(O=>O.status==="pending").map(O=>u.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>V(O.id),children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"font-medium text-sm",children:["Tilaus: ",O.order_number||O.id.slice(0,6)]}),u.jsx("div",{className:"text-sm",children:O.customer_name}),u.jsx("div",{className:"text-sm text-muted-foreground",children:O.customer_email}),u.jsxs("div",{className:"text-sm font-medium",children:[Number(O.total_amount).toFixed(2)," "]}),u.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(O.created_at).toLocaleDateString("fi-FI")})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(Kd,{variant:z(O),className:"flex items-center gap-1 w-fit text-xs",children:[I(O),N(O)]}),u.jsx(Jd,{className:`h-4 w-4 transition-transform ${l[O.id]?"rotate-180":""}`})]})]}),l[O.id]&&u.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Asiakastiedot"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Nimi:"})," ",O.customer_name]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Shkposti:"})," ",O.customer_email]}),O.customer_phone&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Puhelin:"})," ",O.customer_phone]})]})]}),O.billing_address&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Laskutustiedot"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{children:O.billing_address.address}),u.jsxs("div",{children:[O.billing_address.postalCode," ",O.billing_address.city]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Tilaaja"}),u.jsx("div",{className:"text-sm",children:O.profiles?u.jsxs(u.Fragment,{children:[u.jsx("div",{children:O.profiles.first_name&&O.profiles.last_name?`${O.profiles.first_name} ${O.profiles.last_name}`:O.profiles.email}),O.profiles.first_name&&O.profiles.last_name&&u.jsx("div",{className:"text-muted-foreground",children:O.profiles.email})]}):u.jsx("div",{className:"text-muted-foreground",children:"Kyttjtietoja ei lydy"})})]}),O.order_confirmations&&O.order_confirmations.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vahvistusyritykset"}),u.jsx("div",{className:"space-y-2 text-sm",children:O.order_confirmations.map((q,ee)=>u.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Yritys:"})," ",new Date(q.created_at).toLocaleString("fi-FI")]}),q.ip_address&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"IP-osoite:"})," ",q.ip_address]}),q.user_agent&&u.jsxs("div",{className:"col-span-2",children:[u.jsx("span",{className:"font-medium",children:"Selain:"})," ",q.user_agent]})]})},ee))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Tuotteet"}),u.jsx("div",{className:"space-y-1",children:O.order_items.map((q,ee)=>u.jsxs("div",{className:"text-sm",children:[q.quantity,"x ",q.package_title," - ",Number(q.package_price).toFixed(2)," "]},ee))})]})]})]},O.id))})}),u.jsx(ph,{value:"confirmed",className:"mt-6",children:G.filter(O=>O.status==="confirmed").length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-muted-foreground",children:x?"Ei hakutuloksia vahvistetuille tilauksille.":"Ei vahvistettuja tilauksia."})}):u.jsx("div",{className:"space-y-3",children:G.filter(O=>O.status==="confirmed").map(O=>u.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>V(O.id),children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"font-medium text-sm",children:["Tilaus: ",O.order_number||O.id.slice(0,6)]}),u.jsx("div",{className:"text-sm",children:O.customer_name}),u.jsx("div",{className:"text-sm text-muted-foreground",children:O.customer_email}),u.jsxs("div",{className:"text-sm font-medium",children:[Number(O.total_amount).toFixed(2)," "]}),u.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vahvistettu: ",O.confirmed_at?new Date(O.confirmed_at).toLocaleString("fi-FI"):"-"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(Kd,{variant:z(O),className:"flex items-center gap-1 w-fit text-xs",children:[I(O),N(O)]}),u.jsx(Jd,{className:`h-4 w-4 transition-transform ${l[O.id]?"rotate-180":""}`})]})]}),l[O.id]&&u.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Asiakastiedot"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Nimi:"})," ",O.customer_name]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Shkposti:"})," ",O.customer_email]}),O.customer_phone&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Puhelin:"})," ",O.customer_phone]})]})]}),O.billing_address&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Laskutustiedot"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{children:O.billing_address.address}),u.jsxs("div",{children:[O.billing_address.postalCode," ",O.billing_address.city]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Tilaaja"}),u.jsx("div",{className:"text-sm",children:O.profiles?u.jsxs(u.Fragment,{children:[u.jsx("div",{children:O.profiles.first_name&&O.profiles.last_name?`${O.profiles.first_name} ${O.profiles.last_name}`:O.profiles.email}),O.profiles.first_name&&O.profiles.last_name&&u.jsx("div",{className:"text-muted-foreground",children:O.profiles.email})]}):u.jsx("div",{className:"text-muted-foreground",children:"Kyttjtietoja ei lydy"})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vahvistusajankohta"}),u.jsx("div",{className:"text-sm",children:O.confirmed_at?new Date(O.confirmed_at).toLocaleString("fi-FI"):"Ei vahvistettu"})]}),O.order_confirmations&&O.order_confirmations.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vahvistustiedot"}),u.jsx("div",{className:"space-y-2 text-sm",children:O.order_confirmations.map((q,ee)=>u.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border",children:u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Vahvistettu:"})," ",new Date(q.confirmed_at).toLocaleString("fi-FI")]}),q.ip_address&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"IP-osoite:"})," ",q.ip_address]}),q.user_agent&&u.jsxs("div",{className:"col-span-2",children:[u.jsx("span",{className:"font-medium",children:"Selain:"})," ",q.user_agent]})]})},ee))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2",children:"Tuotteet"}),u.jsx("div",{className:"space-y-1",children:O.order_items.map((q,ee)=>u.jsxs("div",{className:"text-sm",children:[q.quantity,"x ",q.package_title," - ",Number(q.package_price).toFixed(2)," "]},ee))})]})]})]},O.id))})})]})})]})}),u.jsx(ph,{value:"confirmations",children:u.jsxs(sn,{children:[u.jsx(Zs,{children:u.jsxs(Js,{className:"flex items-center gap-2",children:[u.jsx(ns,{className:"h-5 w-5"}),"Vahvistuslogi"]})}),u.jsxs(an,{children:[u.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Kaikki vahvistusyritykset ja -tapahtumat jrjestelmss"}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(wr,{placeholder:"Hae vahvistuslogista tilausnumerolla, asiakastiedoilla tai myyjn tiedoilla...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})}),u.jsxs("div",{className:"space-y-3",children:[G.filter(O=>O.order_confirmations&&O.order_confirmations.length>0).flatMap(O=>O.order_confirmations.map((q,ee)=>({order:O,confirmation:q,key:`${O.id}-${ee}`}))).sort((O,q)=>new Date(q.confirmation.created_at).getTime()-new Date(O.confirmation.created_at).getTime()).map(({order:O,confirmation:q,key:ee})=>u.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Tilaus:"})," ",O.order_number||O.id.slice(0,6)]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Asiakas:"})," ",O.customer_name]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Aika:"})," ",new Date(q.created_at).toLocaleString("fi-FI")]}),q.ip_address&&u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"IP-osoite:"})," ",q.ip_address]}),q.user_agent&&u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("span",{className:"font-medium",children:"Selain:"})," ",q.user_agent]})]})},ee)),G.filter(O=>O.order_confirmations&&O.order_confirmations.length>0).length===0&&u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-muted-foreground",children:x?"Ei hakutuloksia vahvistuslogista.":"Ei vahvistustapahtumia."})})]})]})]})})]})]})})]}):u.jsx(fm,{to:"/dashboard",replace:!0})},Vqe=()=>{const{user:e,loading:t,signOut:r,isAdmin:n}=ya(),i=js();if(t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!e)return u.jsx(fm,{to:"/",replace:!0});const s=async()=>{await r()};return u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>i("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>i("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>i("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),n&&u.jsxs("button",{onClick:()=>i("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:s,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Hallintapaneeli"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>i("/dashboard"),children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ef,{className:"w-8 h-8 text-blue-600"}),u.jsx("span",{className:"font-medium text-gray-800",children:"Hallintapaneeli"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>i("/portaalin-verkkokauppa"),children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(Xl,{className:"w-8 h-8 text-green-600"}),u.jsx("span",{className:"font-medium text-gray-800",children:"Verkkokauppa"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>i("/tilaukset"),children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(el,{className:"w-8 h-8 text-purple-600"}),u.jsx("span",{className:"font-medium text-gray-800",children:"Tilaukseni"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:s,children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(fu,{className:"w-8 h-8 text-red-600"}),u.jsx("span",{className:"font-medium text-gray-800",children:"Kirjaudu ulos"})]})}),n&&u.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>i("/admin"),children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ca,{className:"w-8 h-8 text-indigo-600"}),u.jsx("span",{className:"font-medium text-gray-800",children:"Yllpito"})]})})]})]})})]})},Uqe=()=>{const{token:e}=YO(),t=js(),{toast:r}=Oo(),[n,i]=E.useState(!0),[s,a]=E.useState(!1),[o,l]=E.useState(null),[c,f]=E.useState(null);return E.useEffect(()=>{(async()=>{if(!e){l("Virheellinen vahvistuslinkki"),i(!1);return}try{console.log("Confirming order with token:",e);const{data:h,error:p}=await Mn.from("orders").select("*").eq("confirmation_token",e).single();if(console.log("Order query result:",{order:h,orderError:p}),p||!h){console.error("Order not found:",p),l("Tilausta ei lytynyt tai linkki on virheellinen"),i(!1);return}if(h.confirmed_at){l("Tilaus on jo vahvistettu aiemmin"),i(!1);return}const m=await fetch("https://api.ipify.org?format=json"),{ip:g}=await m.json(),x=navigator.userAgent,{error:y}=await Mn.from("orders").update({confirmed_at:new Date().toISOString(),status:"confirmed"}).eq("id",h.id);if(y)throw y;const{error:v}=await Mn.from("order_confirmations").insert({order_id:h.id,ip_address:g,user_agent:x});v&&console.error("Failed to log confirmation:",v),f(h),a(!0),r({title:"Tilaus vahvistettu!",description:"Lhetmme tunnukset shkpostitse pian."})}catch(h){console.error("Error confirming order:",h),l("Virhe vahvistettaessa tilausta")}finally{i(!1)}})()},[e,r]),n?u.jsx(bi,{children:u.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:u.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx(U1,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Vahvistetaan tilausta..."}),u.jsx("p",{className:"text-muted-foreground",children:"Odota hetki, ksittelemme vahvistustasi."})]})})}):o?u.jsx(bi,{children:u.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:u.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx(Hq,{className:"h-16 w-16 text-red-500 mx-auto mb-6"}),u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Virhe vahvistettaessa"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:o}),u.jsx(ln,{onClick:()=>t("/"),variant:"outline",children:"Palaa etusivulle"})]})})}):s?u.jsx(bi,{children:u.jsx("div",{className:"min-h-screen bg-background py-12 pt-32",children:u.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx(ns,{className:"h-16 w-16 text-green-500 mx-auto mb-6"}),u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Kiitos tilauksen vahvituksesta!"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Saat meilt hetken pst shkpostia, jossa annamme tarkat ohjeet kuinka pset ottamaan tuotteen kyttn."}),c&&u.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg mb-8 text-left",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Tilauksen tiedot:"}),u.jsxs("p",{children:[u.jsx("strong",{children:"Tilausnumero:"})," ",c.order_number||c.id]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Shkposti:"})," ",c.customer_email]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Kokonaissumma:"})," ",c.total_amount," "]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Vahvistettu:"})," ",new Date().toLocaleString("fi-FI")]})]}),u.jsx("div",{className:"text-center",children:u.jsx(ln,{onClick:()=>t("/"),variant:"outline",children:"Etusivulle"})})]})})}):null},Wqe=()=>{const{user:e,loading:t,signOut:r,isAdmin:n}=ya(),i=js();if(t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!e)return u.jsx(fm,{to:"/",replace:!0});const s=async()=>{await r()};return u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>i("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>i("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>i("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),n&&u.jsxs("button",{onClick:()=>i("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:s,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx(el,{className:"h-8 w-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tilaukseni"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl",children:[u.jsx(sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>i("/tilaukset/vahvistamattomat"),children:u.jsx(an,{className:"p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:u.jsx(Vd,{className:"w-8 h-8 text-yellow-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Vahvistamattomat tilaukset"}),u.jsx("p",{className:"text-gray-600",children:"Nyt kaikki tilaukset, joita ei ole viel vahvistettu"})]})]})})}),u.jsx(sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>i("/tilaukset/vahvistetut"),children:u.jsx(an,{className:"p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:u.jsx(ns,{className:"w-8 h-8 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Vahvistetut tilaukset"}),u.jsx("p",{className:"text-gray-600",children:"Nyt kaikki asiakkaan vahvistamat tilaukset"})]})]})})})]})]})})]})},Gqe=()=>{const{user:e,loading:t,signOut:r,isAdmin:n}=ya(),i=js(),[s,a]=E.useState([]),[o,l]=E.useState(!0),[c,f]=E.useState(new Set),[d,h]=E.useState("");console.log("UnconfirmedOrders render - user:",e,"authLoading:",t,"orders:",s,"loading:",o),E.useEffect(()=>{console.log("useEffect triggered, user:",e),e?(console.log("User found, calling fetchUnconfirmedOrders"),p()):console.log("No user found")},[e]);const p=async()=>{var _,b,w;try{console.log("Fetching unconfirmed orders...");const{data:{session:k}}=await Mn.auth.getSession();if(!k){console.error("No active session");return}const T=await fetch("https://fsirlcxhtyppecjjdqbp.supabase.co/functions/v1/get-orders?status=pending&scope=mine",{headers:{Authorization:`Bearer ${k.access_token}`,"Content-Type":"application/json"}});if(console.log("Response status:",T.status),console.log("Response ok:",T.ok),T.ok){const M=await T.json();if(console.log("Response data:",M),console.log("First order details:",(_=M.orders)==null?void 0:_[0]),console.log("First order total_amount:",(w=(b=M.orders)==null?void 0:b[0])==null?void 0:w.total_amount),M.orders&&M.orders.length>0){const j=M.orders[0];console.log("=== FIRST ORDER FULL DEBUG ==="),console.log("All keys:",Object.keys(j)),console.log("Full order object:",JSON.stringify(j,null,2)),console.log("=============================")}a(M.orders||[]),console.log("Orders set:",M.orders||[])}else{console.error("Response not ok:",T.status,T.statusText);const M=await T.text();console.error("Error response:",M)}}catch(k){console.error("Error fetching orders:",k)}finally{l(!1)}},m=async()=>{await r()},g=_=>{const b=new Set(c);b.has(_)?b.delete(_):b.add(_),f(b)},x=s.filter(_=>{var w,k,T;if(!d)return!0;const b=d.toLowerCase();return _.customer_name.toLowerCase().includes(b)||_.customer_email.toLowerCase().includes(b)||_.customer_phone&&_.customer_phone.includes(d)||((w=_.billing_address)==null?void 0:w.address)&&_.billing_address.address.toLowerCase().includes(b)||((k=_.billing_address)==null?void 0:k.city)&&_.billing_address.city.toLowerCase().includes(b)||((T=_.billing_address)==null?void 0:T.postalCode)&&_.billing_address.postalCode.includes(d)});if(t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!e)return u.jsx(fm,{to:"/",replace:!0});const y=_=>new Date(_).toLocaleDateString("fi-FI",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=_=>_==null?"0,00 /kk":`${_.toFixed(2).replace(".",",")} /kk`;return u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>i("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>i("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>i("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),n&&u.jsxs("button",{onClick:()=>i("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx(Vd,{className:"h-8 w-8 text-yellow-600"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Vahvistamattomat tilaukset"}),u.jsxs(Kd,{variant:"secondary",className:"ml-4",children:[x.length," tilaus"]})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"relative max-w-md",children:[u.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Hae asiakkaan nimell, shkpostilla, puhelinnumerolla tai osoitteella...",value:d,onChange:_=>h(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),o?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Ladataan tilauksia..."})]}):s.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Vd,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Ei vahvistamattomia tilauksia"}),u.jsx("p",{className:"text-gray-500",children:"Kaikki tilaukset on jo vahvistettu tai ei ole uusia tilauksia."})]}):u.jsx("div",{className:"space-y-4",children:x.map(_=>{var b,w,k;return u.jsxs(sn,{className:"hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>g(_.id),children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Tilaus ",_.order_number]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Luotu: ",y(_.created_at)]})]}),u.jsx(Kd,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Odottaa vahvistusta"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"text-right",children:u.jsx("div",{className:"text-xl font-bold text-gray-800",children:v(_.total_amount)})}),c.has(_.id)?u.jsx(AO,{className:"w-5 h-5 text-gray-500"}):u.jsx(Jd,{className:"w-5 h-5 text-gray-500"})]})]})}),c.has(_.id)&&u.jsx(an,{className:"pt-0 border-t border-gray-100",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[u.jsx(H1,{className:"w-4 h-4"}),"Asiakastiedot"]}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Nimi:"})," ",_.customer_name]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(W1,{className:"w-4 h-4 text-gray-500"}),_.customer_email]}),_.customer_phone&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(y_,{className:"w-4 h-4 text-gray-500"}),_.customer_phone]})]})]}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[u.jsx(G1,{className:"w-4 h-4"}),"Laskutustiedot"]}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsx("p",{children:((b=_.billing_address)==null?void 0:b.address)||"Ei osoitetta"}),u.jsxs("p",{children:[(w=_.billing_address)==null?void 0:w.postalCode," ",(k=_.billing_address)==null?void 0:k.city]})]})]})]})})]},_.id)})})]})})]})},Hqe=()=>{const{user:e,loading:t,signOut:r,isAdmin:n}=ya(),[i,s]=E.useState([]),[a,o]=E.useState(!0),l=js(),[c,f]=E.useState(new Set),[d,h]=E.useState("");E.useEffect(()=>{console.log("useEffect triggered, user:",e),e?(console.log("User found, calling fetchConfirmedOrders"),p()):console.log("No user found")},[e]);const p=async()=>{var _,b,w;try{console.log("Fetching confirmed orders...");const{data:{session:k}}=await Mn.auth.getSession();if(!k){console.error("No active session");return}const T=await fetch("https://fsirlcxhtyppecjjdqbp.supabase.co/functions/v1/get-orders?status=confirmed&scope=mine",{headers:{Authorization:`Bearer ${k.access_token}`,"Content-Type":"application/json"}});if(console.log("Response status:",T.status),console.log("Response ok:",T.ok),T.ok){const M=await T.json();if(console.log("Response data:",M),console.log("First order details:",(_=M.orders)==null?void 0:_[0]),console.log("First order total_amount:",(w=(b=M.orders)==null?void 0:b[0])==null?void 0:w.total_amount),M.orders&&M.orders.length>0){const j=M.orders[0];console.log("=== FIRST ORDER FULL DEBUG ==="),console.log("All keys:",Object.keys(j)),console.log("Full order object:",JSON.stringify(j,null,2)),console.log("=============================")}s(M.orders||[]),console.log("Orders set:",M.orders||[])}else{console.error("Response not ok:",T.status,T.statusText);const M=await T.text();console.error("Error response:",M)}}catch(k){console.error("Error fetching orders:",k)}finally{o(!1)}},m=async()=>{await r()},g=_=>{const b=new Set(c);b.has(_)?b.delete(_):b.add(_),f(b)},x=i.filter(_=>{var w,k,T;if(!d)return!0;const b=d.toLowerCase();return _.customer_name.toLowerCase().includes(b)||_.customer_email.toLowerCase().includes(b)||_.customer_phone&&_.customer_phone.includes(d)||((w=_.billing_address)==null?void 0:w.address)&&_.billing_address.address.toLowerCase().includes(b)||((k=_.billing_address)==null?void 0:k.city)&&_.billing_address.city.toLowerCase().includes(b)||((T=_.billing_address)==null?void 0:T.postalCode)&&_.billing_address.postalCode.includes(d)});if(t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!e)return u.jsx(fm,{to:"/",replace:!0});const y=_=>new Date(_).toLocaleDateString("fi-FI",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=_=>_==null?"0,00 /kk":`${_.toFixed(2).replace(".",",")} /kk`;return u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-white shadow-lg",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-8",children:"OmaVerkkoturva"}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>l("/dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ef,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Hallintapaneeli"})]}),u.jsxs("button",{onClick:()=>l("/portaalin-verkkokauppa"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(Xl,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Verkkokauppa"})]}),u.jsxs("button",{onClick:()=>l("/tilaukset"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Tilaukseni"})]}),n&&u.jsxs("button",{onClick:()=>l("/admin"),className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[u.jsx(ca,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Yllpito"})]}),u.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors mt-8",children:[u.jsx(fu,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})]})}),u.jsx("div",{className:"flex-1 bg-white",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx(ln,{variant:"ghost",onClick:()=>l("/tilaukset"),className:"p-2",children:u.jsx(du,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ns,{className:"h-8 w-8 text-green-600"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Vahvistetut tilaukset"}),u.jsxs(Kd,{variant:"secondary",className:"ml-4",children:[x.length," tilaus"]})]})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"relative max-w-md",children:[u.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Hae asiakkaan nimell, shkpostilla, puhelinnumerolla tai osoitteella...",value:d,onChange:_=>h(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Ladataan tilauksia..."})]}):i.length===0?u.jsx(sn,{children:u.jsxs(an,{className:"py-12 text-center",children:[u.jsx(ns,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ei vahvistettuja tilauksia"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Kaikki tilaukset odottavat viel vahvistusta tai ei ole tilauksia."}),u.jsx(ln,{onClick:()=>l("/portaalin-verkkokauppa"),children:"Siirry verkkokauppaan"})]})}):u.jsx("div",{className:"space-y-4",children:x.map(_=>{var b,w,k;return u.jsxs(sn,{className:"hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>g(_.id),children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Tilaus ",_.order_number]}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsxs("p",{children:["Luotu: ",y(_.created_at)]}),u.jsxs("p",{children:["Vahvistettu: ",y(_.confirmed_at)]})]})]}),u.jsx(Kd,{variant:"default",className:"text-green-600 bg-green-100 border-green-600",children:"Vahvistettu"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"text-right",children:u.jsx("div",{className:"text-xl font-bold text-gray-800",children:v(_.total_amount)})}),c.has(_.id)?u.jsx(AO,{className:"w-5 h-5 text-gray-500"}):u.jsx(Jd,{className:"w-5 h-5 text-gray-500"})]})]})}),c.has(_.id)&&u.jsxs(an,{className:"pt-0 border-t border-gray-100",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[u.jsx(H1,{className:"w-4 h-4"}),"Asiakastiedot"]}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Nimi:"})," ",_.customer_name]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(W1,{className:"w-4 h-4 text-gray-500"}),_.customer_email]}),_.customer_phone&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(y_,{className:"w-4 h-4 text-gray-500"}),_.customer_phone]})]})]}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[u.jsx(G1,{className:"w-4 h-4"}),"Laskutustiedot"]}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsx("p",{children:((b=_.billing_address)==null?void 0:b.address)||"Ei osoitetta"}),u.jsxs("p",{children:[(w=_.billing_address)==null?void 0:w.postalCode," ",(k=_.billing_address)==null?void 0:k.city]})]})]})]}),u.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 mt-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(ns,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Tilaus vahvistettu:"}),u.jsx("p",{className:"text-sm text-green-700",children:y(_.confirmed_at)}),u.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Tilaus on aktiivinen ja palvelu on kytss."})]})]})})]})]},_.id)})})]})})]})},Kqe=()=>{var i;const e=$o();js();const t=((i=e.state)==null?void 0:i.from)||"/",r=()=>{const s="https://portaali.omaverkkoturva.fi";sessionStorage.setItem("redirectAfterLogin",t),window.location.href=s},n=()=>{const s="https://portaali.omaverkkoturva.fi";window.location.href=s};return u.jsx(bi,{children:u.jsx("div",{className:"min-h-screen bg-background pt-44 pb-12",children:u.jsx("div",{className:"max-w-md mx-auto px-4",children:u.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Sisnkirjautuminen vaaditaan"}),u.jsx("p",{className:"text-muted-foreground",children:"Tm sivu vaatii sisnkirjautumisen portaalin kautta"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{onClick:r,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Kirjaudu sisn portaalin kautta"}),u.jsx("button",{onClick:n,className:"w-full bg-secondary text-secondary-foreground py-3 px-4 rounded-lg font-medium hover:bg-secondary/90 transition-colors",children:"Palaa portaaliin"})]}),u.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:u.jsxs("p",{children:["Jos sinulla on ongelmia kirjautumisessa,",u.jsx("br",{}),"ota yhteytt yllpitoon"]})})]})})})})},U9=()=>{const[e,t]=E.useState(""),[r,n]=E.useState(""),[i,s]=E.useState(!1),[a,o]=E.useState(!1),[l,c]=E.useState(!1),{signIn:f}=ya(),d=js(),h=async p=>{p.preventDefault(),c(!0);const{error:m}=await f(e,r);m||d("/dashboard"),c(!1)};return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsx("div",{className:"text-center",children:u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"OmaVerkkoturva"})}),u.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-lg",children:[u.jsx("div",{className:"text-center mb-6",children:u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tervetuloa!"})}),u.jsxs("form",{onSubmit:h,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Shkpostiosoite"}),u.jsx(wr,{id:"email",type:"email",value:e,onChange:p=>t(p.target.value),placeholder:"Syt shkpostiosoitteesi",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx(Ur,{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Salasana"}),u.jsxs("div",{className:"relative",children:[u.jsx(wr,{id:"password",type:i?"text":"password",value:r,onChange:p=>n(p.target.value),placeholder:"Kirjoita salasanasi",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!i),children:i?u.jsx(uhe,{className:"h-5 w-5 text-gray-400"}):u.jsx(dhe,{className:"h-5 w-5 text-gray-400"})})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(_m,{id:"stayLoggedIn",checked:a,onCheckedChange:p=>o(p),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),u.jsx(Ur,{htmlFor:"stayLoggedIn",className:"ml-2 block text-sm text-gray-700",children:"Pysy kirjautuneena"})]}),u.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-500",onClick:p=>{p.preventDefault()},children:"Unohditko salasanasi?"})]}),u.jsx(ln,{type:"submit",disabled:l,className:"w-full bg-white border border-purple-300 text-purple-600 py-3 px-4 rounded-md font-medium hover:bg-purple-50 transition-colors",children:l?"Kirjaudutaan...":"Kirjaudu sisn"})]})]})]})})},qqe=()=>{const e=js(),{user:t}=ya();return E.useEffect(()=>{if(t){const r=sessionStorage.getItem("redirectAfterLogin")||"/";sessionStorage.removeItem("redirectAfterLogin"),e(r,{replace:!0})}},[t,e]),u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Kirjaututaan sisn..."})]})})},Xqe=()=>{const{token:e}=YO(),t=js(),[r,n]=E.useState(!0),[i,s]=E.useState(!1),[a,o]=E.useState(null),[l,c]=E.useState(null);E.useEffect(()=>{if(!e){c("Vahvistustoken puuttuu"),n(!1);return}f()},[e]);const f=async()=>{try{const{data:{session:d}}=await Mn.auth.getSession();if(!d){console.error("No active session"),c("Ei aktiivista istuntoa"),n(!1);return}const p=await(await fetch("https://fsirlcxhtyppecjjdqbp.supabase.co/functions/v1/confirm-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify({confirmation_token:e})})).json();p.success?(s(!0),o(p)):c(p.error||"Tilauksen vahvistus eponnistui")}catch(d){c("Virhe tilauksen vahvistuksessa"),console.error("Error confirming order:",d)}finally{n(!1)}};return r?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx(U1,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Vahvistetaan tilauksesi..."})]})}):l?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs(sn,{className:"max-w-md w-full",children:[u.jsxs(Zs,{className:"text-center",children:[u.jsx(Hq,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),u.jsx(Js,{className:"text-red-600",children:"Vahvistus eponnistui"})]}),u.jsxs(an,{className:"text-center",children:[u.jsx("p",{className:"text-gray-600 mb-6",children:l}),u.jsx(ln,{onClick:()=>t("/"),className:"w-full",children:"Palaa etusivulle"})]})]})}):i&&a?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs(sn,{className:"max-w-2xl w-full",children:[u.jsxs(Zs,{className:"text-center",children:[u.jsx(ns,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),u.jsx(Js,{className:"text-green-600",children:"Tilaus vahvistettu!"})]}),u.jsxs(an,{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("p",{className:"text-gray-600 mb-4",children:["Kiitos, ",a.customer_name,"! Tilauksesi on nyt vahvistettu."]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("p",{className:"font-semibold text-gray-800",children:["Tilausnumero: ",a.order_id]}),u.jsxs("p",{className:"text-gray-600",children:["Shkposti: ",a.customer_email]})]})]}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Mit tapahtuu seuraavaksi?"}),u.jsxs("ul",{className:"space-y-2 text-gray-600",children:[u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),"Saat pian aktivointiohjeet shkpostiin"]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),"Palvelu aktivoituu 24 tunnin sisll"]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),"Ensimminen laskutus lhetetn aktivointia seuraavana kuukautena"]})]})]}),u.jsx("div",{className:"text-center pt-4",children:u.jsx(ln,{onClick:()=>t("/"),className:"w-full",children:"Palaa etusivulle"})})]})]})}):null},Yqe=()=>{const[e]=E.useState(()=>new Dge);return u.jsx(Rge,{client:e,children:u.jsx(J_e,{children:u.jsx(e0e,{children:u.jsxs(hge,{children:[u.jsx(dpe,{}),u.jsx(Bpe,{}),u.jsx($ve,{children:u.jsx(t0e,{children:u.jsxs(Sve,{children:[u.jsx(Er,{path:"/confirm-order/:token",element:u.jsx(Uqe,{})}),u.jsx(Er,{path:"/login",element:u.jsx(Kqe,{})}),u.jsx(Er,{path:"/portal",element:u.jsx(U9,{})}),u.jsx(Er,{path:"/portal/login",element:u.jsx(U9,{})}),u.jsx(Er,{path:"/auth/callback",element:u.jsx(qqe,{})}),u.jsx(Er,{path:"/",element:u.jsx(ake,{})}),u.jsx(Er,{path:"/projects/firecat",element:u.jsx(lke,{})}),u.jsx(Er,{path:"/projects/sport-retail",element:u.jsx(cke,{})}),u.jsx(Er,{path:"/projects/workwear",element:u.jsx(uke,{})}),u.jsx(Er,{path:"/projects/hockey",element:u.jsx(dke,{})}),u.jsx(Er,{path:"/projects/pet-tracker",element:u.jsx(fke,{})}),u.jsx(Er,{path:"/tech-details",element:u.jsx(gke,{})}),u.jsx(Er,{path:"/development-process",element:u.jsx(vke,{})}),u.jsx(Er,{path:"/about",element:u.jsx(IV,{})}),u.jsx(Er,{path:"/meista",element:u.jsx(IV,{})}),u.jsx(Er,{path:"/careers",element:u.jsx(_ke,{})}),u.jsx(Er,{path:"/privacy-policy",element:u.jsx(xke,{})}),u.jsx(Er,{path:"/blog",element:u.jsx(bke,{})}),u.jsx(Er,{path:"/blog/:slug",element:u.jsx(tGe,{})}),u.jsx(Er,{path:"/identiteettiturva",element:u.jsx(rGe,{})}),u.jsx(Er,{path:"/verkkokauppa",element:u.jsx(nqe,{})}),u.jsx(Er,{path:"/portaalin-verkkokauppa",element:u.jsx(iqe,{})}),u.jsx(Er,{path:"/irtisanomislomake",element:u.jsx(Q9e,{})}),u.jsx(Er,{path:"/ota-yhteytta",element:u.jsx(nKe,{})}),u.jsx(Er,{path:"/logo-tool",element:u.jsx(Y7e,{})}),u.jsx(Er,{path:"/admin",element:u.jsx(zqe,{})}),u.jsx(Er,{path:"/dashboard",element:u.jsx(Vqe,{})}),u.jsx(Er,{path:"/tilaukset",element:u.jsx(Wqe,{})}),u.jsx(Er,{path:"/tilaukset/vahvistamattomat",element:u.jsx(Gqe,{})}),u.jsx(Er,{path:"/tilaukset/vahvistetut",element:u.jsx(Hqe,{})}),u.jsx(Er,{path:"/vahvista-tilaus/:token",element:u.jsx(Xqe,{})}),u.jsx(Er,{path:"*",element:u.jsx(oke,{})})]})})})]})})})})};dq(document.getElementById("root")).render(u.jsx(yq,{children:u.jsx(Yqe,{})}));
